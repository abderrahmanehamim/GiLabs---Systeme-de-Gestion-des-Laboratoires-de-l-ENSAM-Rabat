(self.webpackChunk_msnews_msnews_experiences=self.webpackChunk_msnews_msnews_experiences||[]).push([["common"],{74037:function(e,t){"use strict";t.Z='<svg width="14" height="15" viewBox="0 0 12 8"><path d="m11.25.8.53.52-5.9 5.89L0 1.3.53.8l5.36 5.36L11.25.8Z"/></svg>'},34550:function(e,t){"use strict";t.Z='<svg width="20" height="20" viewBox="0 0 20 20"><path d="M7.65 4.15c.2-.2.5-.2.7 0l5.49 5.46c.21.22.21.57 0 .78l-5.49 5.46a.5.5 0 0 1-.7-.7L12.8 10 7.65 4.85a.5.5 0 0 1 0-.7Z"/></svg>'},545:function(e,t){"use strict";t.Z='<svg width="12" height="12" viewBox="0 0 12 12"><path d="M6.85 6 12 11.15l-.85.85L6 6.85.85 12 0 11.15 5.15 6 0 .85.85 0 6 5.15 11.15 0l.85.85L6.85 6Z"/></svg>'},62014:function(e,t){"use strict";t.Z='<svg viewBox="0 0 226 48" height="48" width="225"><path key="MicrosoftLogo1" id="microsoft" d="M93.6 9.6v28.8h-5V15.8h-.1l-8.9 22.6h-3.3l-9.1-22.6h-.1v22.6h-4.6V9.6h7.2L78 30.9h.1l8.7-21.3h6.8zm4.1 2.2c0-.8.3-1.5.9-2 .6-.5 1.3-.8 2.1-.8.9 0 1.6.3 2.1.9.5.5.9 1.2.9 2s-.3 1.5-.9 2c-.6.5-1.3.8-2.1.8-.9 0-1.5-.3-2.1-.8-.5-.7-.9-1.4-.9-2.1zm5.4 5.9v20.7h-4.9V17.7h4.9zm14.8 17.2a9.2 9.2 0 0 0 4.8-1.8v4.5c-.8.5-1.7.8-2.7 1-1 .2-2.1.3-3.3.3-3.1 0-5.5-.9-7.4-2.9-1.9-1.9-2.9-4.4-2.9-7.3 0-3.3 1-6.1 2.9-8.2 1.9-2.1 4.7-3.2 8.3-3.2.9 0 1.8.1 2.7.3.9.3 1.7.5 2.2.8v4.7c-.7-.5-1.5-1-2.3-1.3-.8-.3-1.6-.5-2.4-.5-1.9 0-3.5.6-4.7 1.9-1.2 1.3-1.8 2.9-1.8 5.1 0 2.1.5 3.7 1.7 4.9 1.4 1.1 2.9 1.7 4.9 1.7zm18.6-17.5c.4 0 .7 0 1.1.1.3.1.6.1.8.2v4.9c-.3-.2-.6-.3-1.1-.5-.5-.2-1.1-.3-1.8-.3-1.2 0-2.2.5-3 1.5-.8 1-1.3 2.5-1.3 4.7v10.4h-4.9V17.7h4.9V21h.1c.5-1.1 1.1-2 2-2.7.8-.6 1.9-.9 3.2-.9zm2.1 11c0-3.4.9-6.1 2.9-8.1 1.9-2 4.6-3 8.1-3 3.2 0 5.7.9 7.5 2.9 1.8 1.9 2.7 4.5 2.7 7.8s-.9 6-2.9 8c-1.9 2-4.5 3-7.9 3-3.2 0-5.7-.9-7.6-2.8-1.9-2-2.8-4.6-2.8-7.8zm5.1-.2c0 2.1.5 3.8 1.5 4.9 1 1.1 2.4 1.7 4.2 1.7 1.8 0 3.1-.6 4.1-1.7.9-1.1 1.4-2.8 1.4-5.1 0-2.2-.5-3.9-1.5-5-.9-1.1-2.3-1.7-4-1.7-1.8 0-3.1.6-4.1 1.8-1.2 1.2-1.6 2.9-1.6 5.1zm23.3-5c0 .7.2 1.3.7 1.7.5.4 1.4.9 2.9 1.5 1.9.8 3.3 1.7 4.1 2.6.8 1 1.2 2.1 1.2 3.5 0 1.9-.7 3.5-2.3 4.7-1.5 1.2-3.5 1.8-6.1 1.8-.9 0-1.8-.1-2.9-.3-1.1-.2-1.9-.5-2.7-.8V33c.9.6 1.9 1.1 2.9 1.5 1 .3 1.9.5 2.8.5 1.1 0 1.9-.1 2.4-.5.5-.3.8-.8.8-1.5s-.3-1.3-.8-1.7c-.5-.5-1.6-1-3.1-1.6-1.8-.7-3.1-1.6-3.8-2.5s-1.1-2.1-1.1-3.6c0-1.9.7-3.4 2.2-4.6 1.5-1.2 3.4-1.8 5.7-1.8.7 0 1.5.1 2.4.3.9.1 1.7.4 2.3.6v4.6c-.7-.4-1.4-.8-2.3-1.1-.9-.3-1.7-.5-2.5-.5-.9 0-1.7.2-2.1.5-.4.5-.7.9-.7 1.6zm10.9 5.2c0-3.4.9-6.1 2.9-8.1s4.6-3 8.1-3c3.2 0 5.7.9 7.5 2.9 1.8 1.9 2.7 4.5 2.7 7.8s-.9 6-2.9 8c-1.9 2-4.5 3-7.9 3-3.2 0-5.7-.9-7.6-2.8-1.8-2-2.8-4.6-2.8-7.8zm5.1-.2c0 2.1.5 3.8 1.5 4.9 1 1.1 2.4 1.7 4.2 1.7 1.8 0 3.1-.6 4.1-1.7.9-1.1 1.4-2.8 1.4-5.1 0-2.2-.5-3.9-1.5-5-.9-1.1-2.3-1.7-4-1.7-1.8 0-3.1.6-4.1 1.8-1.1 1.2-1.6 2.9-1.6 5.1zm32.3-6.5H208v16.7h-4.9V21.7h-3.5v-4h3.5v-2.9c0-2.2.7-3.9 2.1-5.3 1.4-1.4 3.2-2.1 5.4-2.1.6 0 1.1 0 1.6.1s.9.1 1.2.3V12c-.1-.1-.5-.2-.9-.3-.4-.1-.9-.2-1.4-.2-1 0-1.8.3-2.3.9-.5.7-.8 1.6-.8 2.8v2.5h7.3V13l4.9-1.5v6.1h4.9v4h-4.9v9.7c0 1.3.2 2.2.7 2.7.5.5 1.2.8 2.2.8.3 0 .6-.1 1-.2s.7-.3 1.1-.5v4c-.3.2-.8.3-1.5.5-.7.1-1.4.2-2.1.2-2.1 0-3.6-.5-4.6-1.7-1-1.1-1.5-2.7-1.5-4.9V21.7h-.2z"/><path key="MicrosoftLogo2" id="blue" d="M22.8 25.2H0V48h22.8V25.2z" fill="#00A4EF"/><path key="MicrosoftLogo3" id="yellow" d="M48 25.2H25.2V48H48V25.2z" fill="#FFB900"/><path key="MicrosoftLogo4" id="green" d="M48 0H25.2v22.8H48V0z" fill="#7FBA00"/><path key="MicrosoftLogo5" id="red" d="M22.8 0H0v22.8h22.8V0z" fill="#F25022"/></svg>'},37482:function(e,t,i){"use strict";i.r(t),i.d(t,{BackgroundImageWC:function(){return ye},BackgroundImageWCStyles:function(){return At},BackgroundImageWCTemplate:function(){return vt},ToolingInfo:function(){return It}});var n=i(33940),r=i(26415),o=i(64434);const s=o.K.Dialog.toString();var a=i(53899),c=i(91608),d=i(35385),l=i(83227),u=i(53076),p=i(55027),g=i(970),h=i(83216),m=i(84169),f=i(41115),v=i(26769),y=i(1334),b=i(82891),S=i(17769),C=i(58155),w=i(65337),T=i(3931),k=i(92031),A=i(6660),I=i(83760),P=i(70260),E=i(6751),O=i(12574),M=i(65135),x=i(38156),D=i(10619);const R=()=>{};var L=i(82423),F=i(85663),N=i(4734);var B;!function(e){e.alert="Alert",e.edit="Edit",e.globe="Globe",e.lightbulb="Lightbulb",e.meetNow="MeetNow",e.news="News",e.search="Search"}(B||(B={}));class j{constructor(e,t,i,o,s){this.fallbackImageURL="",this.museumBarText="",this.likeClickButtonHandler=()=>{const{actTelemetry:e}=this.irisStateInfo||{};this.sendIrisActionTelemetry(e,A.M.Like)},this.dislikeClickButtonHandler=()=>{const{actTelemetry:e}=this.irisStateInfo||{};if(this.dislikeCountWasIncremented=O.Vv.addImageCreativeToDislikeList(),this.dislikeCountWasIncremented)return this.sendIrisActionTelemetry(e,A.M.Dislike),this.getNewIrisContent()},this.hotSpotClickHandler=(e,t)=>{t&&t.preventDefault&&t.preventDefault();const{creativeId:i,placementId:n,actTelemetry:r,impTelemetry:o}=this.irisStateInfo||{},s={ctaType:e.cta_type,ctaMetaData:e.cta,delayInMs:void 0,irisTelemetryActionId:e.hs,irisTelemetryActionString:r},a=this.hotSpotCtaHandler(s,t);a&&a().then((e=>{if(e&&e.actionCompleted&&s.ctaType===I.W.executeAction&&s.ctaMetaData===k.uS.setDefaultBrowser){const e={actionUrl:r,impressionUrl:o};this.fireIrisBeacon(n,i,A.R.Action,e,A.M.Conversion),this.irisDataConnector.resetImageLastUpdateTime()}}))},this.hotSpotMouseEnterHandler=e=>{M.M0.sendActionEvent(null==e?void 0:e.currentTarget,x.Aw.Hover,x.wu.View)},this.hotSpotCtaHandler=(e,t)=>{if(e)if(e.ctaType&&e.ctaMetaData){if(t)return()=>(0,n.mG)(this,void 0,void 0,(function*(){const i=P._.formatTelemetryActionUrl(e.irisTelemetryActionString,A.M.Click+e.irisTelemetryActionId);E.c.sendActionUpdate(i),M.M0.sendActionEvent(t.currentTarget,x.Aw.Click,x.wu.Navigate);const n=this.getCtaCallback(e);return n?yield n():null}));R(Object.assign(Object.assign({},r.OeS),{message:"Event is not defined"}))}else R(Object.assign(Object.assign({},r.jSE),{message:"Either of call to action type or metadata is not defined",pb:Object.assign(Object.assign({},r.jSE.pb),{customMessage:`ctaType: ${e.ctaType||""} and ctaMetaData: ${e.ctaMetaData||""}`})}));else R(Object.assign(Object.assign({},r.drd),{message:"HotSpot call to action state not defined"}))},this.getCtaCallback=e=>{switch(e.ctaType){case I.W.offPageNavigation:return H(e.ctaType,e.ctaMetaData)?(0,k.$y)(e.ctaMetaData):void R(Object.assign(Object.assign({},r.MaG),{message:"Invalid CTA Offpage Nav Data",pb:Object.assign(Object.assign({},r.MaG.pb),{customMessage:`ctaType: ${e.ctaType||""} and ctaMetaData: ${e.ctaMetaData||""}`})}));case I.W.inPageNavigation:return(0,k.U$)(e.ctaMetaData,e.delayInMs);case I.W.executeAction:return(0,k.jo)(e.ctaMetaData)}},this.fireIrisBeacon=(e,t,i,n,r)=>{(0,L.oU)(u.z.IrisData).then((o=>{o&&o.sendActionUpdate(e,t,i,n,r)}))},this.sendIrisActionTelemetry=(e,t)=>{if(e){const i=P._.formatTelemetryActionUrl(e,t);E.c.sendActionUpdate(i)}},this.getNewIrisContent=()=>(0,n.mG)(this,void 0,void 0,(function*(){this.getImageHotSpotsData(!0)})),this.connector=e,this.fallbackImageURL=t,this.dislikeCountWasIncremented=!0,this.updatedImageCallback=i,this.notifyOnCallCompletion=o,this.irisFallbackTitle=s,this.getImageHotSpotsData()}loadImageHotSpots(){return this.irisFetchPromise}updateImageMetadata(e,t,i){e&&t&&i&&(this.irisImageURL=e,this.museumCard=t,this.irisStateInfo=i,this.updatedImageCallback())}getImageHotSpotsData(e){return(0,n.mG)(this,void 0,void 0,(function*(){this.irisFetchPromise=new Promise(((t,i)=>(0,n.mG)(this,void 0,void 0,(function*(){const n=!(0,F.isNullOrUndefined)(e)&&e,o={credits:null,irisButtons:{likeClicked:!1,dislikeClicked:!1},isDisplayed:!1,title:null,titleURL:null},s={};let a,c;if(this.irisDataConnector=yield(0,L.oU)(u.z.IrisData),!this.irisDataConnector)return D.i.trackAppErrorEvent(Object.assign(Object.assign({},r._c7),{message:"No Iris data connector for background image"})),void i();if(n){if(!O.Vv.addImageCreativeToDislikeList())return void t()}if(c=n?yield this.irisDataConnector.getImagePayload(!0):yield this.irisDataConnector.getImagePayload(),(0,F.isNullOrUndefined)(c)||(0,F.isNullOrUndefined)(c.creatives)||c.creatives.length<=0)return a=this.fallbackImageURL,o.title=this.museumBarText,s.disableMuseumCard=!0,D.i.trackAppErrorEvent(Object.assign(Object.assign({},r.sd_),{message:`No creative in surface info. Triggered by dislike: ${n}. Surface info: ${c}`})),this.updateImageMetadata(a,o,s),this.notifyOnCallCompletion&&T.f.irisImageUpdated.getActionSender(this.connector).send(),void i();const d=c.creatives[0],l={title:d.content.title||"",credits:d.content.copyright||"",titleURL:d.content.cta},p={titleLink:d.content.cta,ctaType:d.content.cta_type,creativeId:d.content.creativeId,placementId:c.placement,impTelemetry:d.telemetry?d.telemetry.impressionUrl:null,actTelemetry:d.telemetry?d.telemetry.actionUrl:null,hsList:$(d)};a=d.content.LANDSCAPE,Object.assign(o,l),Object.assign(s,p),(0,F.isNullOrUndefined)(s.impTelemetry)||(n?E.c.sendActionUpdate(s.impTelemetry):((0,N.F_)().then((()=>{this.irisDataConnector.fetchedNewImage()&&E.c.sendActionUpdate(s.impTelemetry)})),this.updateImageMetadata(a,o,s)),this.updateImageMetadata(a,o,s),this.notifyOnCallCompletion&&T.f.irisImageUpdated.getActionSender(this.connector).send()),t()})))),this.irisFetchPromise}))}}const $=e=>{if((0,F.isNullOrUndefined)(e)||(0,F.isNullOrUndefined)(e.content)||(0,F.isNullOrUndefined)(e.content.hs)||0===e.content.hs.length)return null;const t=[];return e.content.hs.forEach((e=>{t.push(e)})),t},U=e=>{let t="",i="";switch(e){case B.alert:t="-8 -8 40 40",i="M12,1.99622391 C16.0499218,1.99622391 19.3566662,5.19096617 19.4958079,9.24527692 L19.5,9.49622391 L19.5,13.5931945 L20.8800025,16.7492056 C20.949058,16.9071328 20.9847056,17.0776351 20.9847056,17.25 C20.9847056,17.9403559 20.4250615,18.5 19.7347056,18.5 L15,18.5014962 C15,20.1583504 13.6568542,21.5014962 12,21.5014962 C10.4023191,21.5014962 9.09633912,20.2525762 9.00509269,18.6777689 L8.99954674,18.4992239 L4.27486429,18.5 C4.10352557,18.5 3.93401618,18.4647755 3.7768624,18.3965139 C3.14366026,18.121475 2.85331154,17.3852002 3.1283504,16.7519981 L4.5,13.594148 L4.50000001,9.4961162 C4.50059668,5.34132493 7.85208744,1.99622391 12,1.99622391 Z M13.4995467,18.4992239 L10.5,18.5014962 C10.5,19.3299233 11.1715729,20.0014962 12,20.0014962 C12.7796961,20.0014962 13.4204487,19.4066081 13.4931334,18.6459562 L13.4995467,18.4992239 Z M12,3.49622391 C8.67983848,3.49622391 6.00047762,6.17047646 6,9.49622391 L6,13.905852 L4.65602014,17 L19.3525351,17 L18,13.9068055 L18.0001102,9.5090803 L17.9963601,9.28387824 C17.8853006,6.05040449 15.2415749,3.49622391 12,3.49622391 Z";break;case B.edit:t="-8 -8 40 40",i="M21.0303301,2.96966991 C22.4277928,4.36713263 22.4277928,6.63286737 21.0303301,8.03033009 L9.06200371,19.9986565 C8.78512854,20.2755316 8.44079112,20.4753584 8.06302761,20.5783848 L2.94733805,21.9735729 C2.38746387,22.1262658 1.87373417,21.6125361 2.02642713,21.0526619 L3.4216152,15.9369724 C3.52464161,15.5592089 3.72446837,15.2148715 4.00134354,14.9379963 L15.9696699,2.96966991 C17.3671326,1.5722072 19.6328674,1.5722072 21.0303301,2.96966991 Z M15.0001717,6.06057288 L5.06200371,15.9986565 C4.96971199,16.0909482 4.90310306,16.2057273 4.86876093,16.3316485 L3.81891446,20.1810855 L7.6683515,19.1312391 C7.79427267,19.0968969 7.90905181,19.030288 8.00134354,18.9379963 L17.9391717,8.99957288 L15.0001717,6.06057288 Z M17.0303301,4.03033009 L16.0601717,4.99957288 L18.9991717,7.93957288 L19.9696699,6.96966991 C20.7813462,6.15799363 20.7813462,4.84200637 19.9696699,4.03033009 C19.1579936,3.21865381 17.8420064,3.21865381 17.0303301,4.03033009 Z";break;case B.globe:t="-5 -5 26 26",i="M7.93868 0H8.06132C10.6629 0 12.8409 1.14472 14.5951 3.43415C15.5317 4.87619 16 6.3777 16 7.93868V8.06132C16 10.6629 14.8553 12.8409 12.5659 14.5951C11.1238 15.5317 9.6223 16 8.06132 16H7.93868C5.33705 16 3.15912 14.8553 1.40488 12.5659C0.468293 11.1312 0 9.62973 0 8.06132V7.93868C0 5.33705 1.14472 3.15912 3.43415 1.40488C4.86876 0.468293 6.37027 0 7.93868 0ZM4.89477 5.32962H11.1052C10.9268 4.46736 10.715 3.72404 10.4697 3.09965C9.74123 1.47921 8.90871 0.66899 7.97213 0.66899C7.08757 0.66899 6.28478 1.46806 5.56376 3.0662C5.29617 3.66829 5.07317 4.42276 4.89477 5.32962ZM1.20418 5.32962H4.17003C4.21463 5.32962 4.31498 4.93194 4.47108 4.13659C4.90221 2.72427 5.43368 1.65761 6.06551 0.936585H6.03206C4.11429 1.56098 2.69082 2.62764 1.76167 4.13659C1.39001 4.82044 1.20418 5.21812 1.20418 5.32962ZM9.93449 0.936585C10.7001 1.79884 11.2985 3.14053 11.7296 4.96167C11.7296 5.20697 11.7631 5.32962 11.83 5.32962H14.7958C14.164 3.64971 12.997 2.36376 11.2948 1.47178C10.8636 1.24878 10.4102 1.07038 9.93449 0.936585ZM0.936585 5.99861C0.758188 6.79396 0.66899 7.47038 0.66899 8.02787C0.66899 8.5259 0.758188 9.18374 0.936585 10.0014H4.10314C4.03624 9.22091 4.00279 8.60767 4.00279 8.16167V7.83833C4.00279 7.39233 4.03624 6.77909 4.10314 5.99861H0.936585ZM4.80557 5.99861C4.71638 6.77909 4.67178 7.45552 4.67178 8.02787C4.67178 8.54077 4.71638 9.19861 4.80557 10.0014H11.2056C11.2873 9.22091 11.3282 8.54448 11.3282 7.97213C11.3282 7.45923 11.2873 6.80139 11.2056 5.99861H4.80557ZM11.8969 5.99861C11.9638 6.77909 11.9972 7.39233 11.9972 7.83833V8.16167C11.9972 8.60767 11.9638 9.22091 11.8969 10.0014H15.0634C15.2418 9.20604 15.331 8.52962 15.331 7.97213C15.331 7.4741 15.2418 6.81626 15.0634 5.99861H11.8969ZM1.20418 10.6704C1.82857 12.3503 2.99559 13.6362 4.70523 14.5282C5.06945 14.7364 5.52288 14.9148 6.06551 15.0634C5.23299 14.1343 4.61231 12.6699 4.20348 10.6704H1.20418ZM4.89477 10.6704C5.07317 11.5326 5.28502 12.276 5.53031 12.9003C6.25877 14.5208 7.09129 15.331 8.02787 15.331C9.03879 15.331 9.93078 14.3089 10.7038 12.2648C10.793 11.9972 10.9268 11.4657 11.1052 10.6704H4.89477ZM9.93449 15.0634H9.96794C11.7816 14.4911 13.1494 13.5024 14.0711 12.0976C14.4056 11.5995 14.6472 11.1238 14.7958 10.6704H11.83C11.7854 10.6704 11.6962 11.0235 11.5624 11.7296C11.1461 13.1791 10.6035 14.2904 9.93449 15.0634Z";break;case B.lightbulb:t="-8 -8 40 40",i="M12.000008,2.00139734 C16.0040628,2.00139734 19.249992,5.24733208 19.249992,9.25139734 C19.249992,11.3474567 18.3493333,13.2711054 16.5869535,14.9933011 C16.5100054,15.0685004 16.450441,15.1590617 16.4118457,15.2586031 L16.380373,15.3609016 L15.2492957,20.256497 C15.0265913,21.2204195 14.2034707,21.9187611 13.2302558,21.9933796 L13.0570456,22 L10.9432689,22 C9.95374997,22 9.08791486,21.3549492 8.79629808,20.4232534 L8.75088874,20.2559339 L7.62132399,15.3611533 C7.58904306,15.2212595 7.51728321,15.0935695 7.41456824,14.9932517 C5.73516207,13.3530399 4.83779011,11.5301519 4.75613429,9.54965138 L4.750008,9.25139734 L4.75388322,9.01208292 C4.88014853,5.11879041 8.07602134,2.00139734 12.000008,2.00139734 Z M14.115008,18.4993973 L9.884008,18.4993973 L10.2124755,19.9186446 C10.2831529,20.2249131 10.5356676,20.4507962 10.8400612,20.4929101 L10.9432689,20.5 L13.0570456,20.5 C13.3712985,20.5 13.6481364,20.3048226 13.757662,20.0177756 L13.7877956,19.9188323 L14.115008,18.4993973 Z M12.000008,3.50139734 C8.89821922,3.50139734 6.37007083,5.95741111 6.25416008,9.03084139 L6.250008,9.25139734 L6.25672343,9.52840679 C6.33286953,11.0917695 7.05722352,12.5475342 8.46263227,13.9201432 C8.72676013,14.1781068 8.92266257,14.4964075 9.03423135,14.8463815 L9.08291336,15.0238752 L9.538008,16.9993973 L14.461008,16.9993973 L14.9188729,15.023237 C15.0019011,14.6638694 15.1717664,14.3313677 15.4124215,14.0542893 L15.5385739,13.9205009 C16.9431998,12.547902 17.6671738,11.0920338 17.7432801,9.5284475 L17.749992,9.25139734 L17.7458399,9.03084154 C17.6299293,5.9574132 15.1017833,3.50139734 12.000008,3.50139734 Z";break;case B.meetNow:break;case B.news:t="-5 -5 25 25",i="M16 4V11C16 11.276 15.9453 11.5365 15.8359 11.7812C15.7318 12.0208 15.5885 12.2318 15.4062 12.4141C15.2292 12.5911 15.0182 12.7344 14.7734 12.8438C14.5286 12.9479 14.2708 13 14 13H1.94531C1.67969 13 1.42708 12.9479 1.1875 12.8438C0.953125 12.7396 0.747396 12.6016 0.570312 12.4297C0.398438 12.2526 0.260417 12.0469 0.15625 11.8125C0.0520833 11.5729 0 11.3203 0 11.0547V2H14V4H16ZM15 5H14V10.5C14 10.6354 13.9505 10.7526 13.8516 10.8516C13.7526 10.9505 13.6354 11 13.5 11C13.3646 11 13.2474 10.9505 13.1484 10.8516C13.0495 10.7526 13 10.6354 13 10.5V3H1V11.0547C1 11.1849 1.02344 11.3073 1.07031 11.4219C1.1224 11.5365 1.1901 11.638 1.27344 11.7266C1.36198 11.8099 1.46354 11.8776 1.57812 11.9297C1.69271 11.9766 1.8151 12 1.94531 12H14C14.1406 12 14.2708 11.974 14.3906 11.9219C14.5104 11.8698 14.6146 11.7995 14.7031 11.7109C14.7969 11.6172 14.8698 11.5104 14.9219 11.3906C14.974 11.2708 15 11.1406 15 11V5ZM12 5H2V4H12V5ZM12 11H8V10H12V11ZM12 9H8V8H12V9ZM12 7H8V6H12V7ZM7 11H2V5.97656H7V11ZM3 10H6V6.97656H3V10Z";break;default:t="-12 -12 40 40",i="M10.5 0C11.0052 0 11.4922 0.0651042 11.9609 0.195312C12.4297 0.325521 12.8672 0.510417 13.2734 0.75C13.6797 0.989583 14.0495 1.27865 14.3828 1.61719C14.7214 1.95052 15.0104 2.32031 15.25 2.72656C15.4896 3.13281 15.6745 3.57031 15.8047 4.03906C15.9349 4.50781 16 4.99479 16 5.5C16 6.00521 15.9349 6.49219 15.8047 6.96094C15.6745 7.42969 15.4896 7.86719 15.25 8.27344C15.0104 8.67969 14.7214 9.05208 14.3828 9.39062C14.0495 9.72396 13.6797 10.0104 13.2734 10.25C12.8672 10.4896 12.4297 10.6745 11.9609 10.8047C11.4922 10.9349 11.0052 11 10.5 11C9.84896 11 9.22396 10.8906 8.625 10.6719C8.03125 10.4531 7.48438 10.138 6.98438 9.72656L0.851562 15.8516C0.752604 15.9505 0.635417 16 0.5 16C0.364583 16 0.247396 15.9505 0.148438 15.8516C0.0494792 15.7526 0 15.6354 0 15.5C0 15.3646 0.0494792 15.2474 0.148438 15.1484L6.27344 9.01562C5.86198 8.51562 5.54688 7.96875 5.32812 7.375C5.10938 6.77604 5 6.15104 5 5.5C5 4.99479 5.0651 4.50781 5.19531 4.03906C5.32552 3.57031 5.51042 3.13281 5.75 2.72656C5.98958 2.32031 6.27604 1.95052 6.60938 1.61719C6.94792 1.27865 7.32031 0.989583 7.72656 0.75C8.13281 0.510417 8.57031 0.325521 9.03906 0.195312C9.50781 0.0651042 9.99479 0 10.5 0ZM10.5 10C11.1198 10 11.7031 9.88281 12.25 9.64844C12.7969 9.40885 13.2734 9.08594 13.6797 8.67969C14.0859 8.27344 14.4062 7.79688 14.6406 7.25C14.8802 6.70312 15 6.11979 15 5.5C15 4.88021 14.8802 4.29688 14.6406 3.75C14.4062 3.20312 14.0859 2.72656 13.6797 2.32031C13.2734 1.91406 12.7969 1.59375 12.25 1.35938C11.7031 1.11979 11.1198 1 10.5 1C9.88021 1 9.29688 1.11979 8.75 1.35938C8.20312 1.59375 7.72656 1.91406 7.32031 2.32031C6.91406 2.72656 6.59115 3.20312 6.35156 3.75C6.11719 4.29688 6 4.88021 6 5.5C6 6.11979 6.11719 6.70312 6.35156 7.25C6.59115 7.79688 6.91406 8.27344 7.32031 8.67969C7.72656 9.08594 8.20312 9.40885 8.75 9.64844C9.29688 9.88281 9.88021 10 10.5 10Z"}return{viewBoxString:t,svgString:i}},H=(e,t)=>!(!e||!t)&&(e===I.W.offPageNavigation&&_(t)),_=e=>/^((microsoft-edge:)?https:\/\/((www)|(cn)|(go))\.((msn)|(bing)|(skype)|(microsoft))\.com)|(edge:\/\/)/.test(e);var W,z=i(99452),G=i(42590),V=i(9533),q=i(81555),Z=i(41691);!function(e){e.offPageNavigation="nav-newtab",e.inPageNavigation="nav-inpage",e.executeAction="execute-action"}(W||(W={}));var K=i(68364),Q=i(19388),J=i(25964),X=i(44979),Y=i(53909),ee=i(49042),te=i(7781),ie=i(12884),ne=i(40860),re=i(32717);class oe{constructor(e,t){if(this.dayNow=(new Date).getDay(),this.firstFrameHidden=!1,this.isEnergySaverMode=!1,this.isGalleryEnabled=!1,this.isPlaying=!1,this.isReducedMotionActive=!1,this.isTomorrowsVideoCached=!1,this.showVideo=!1,this.showToast=!1,this.storageKey="bkgdV",this.timeNow=(new Date).getTime(),this.batteryChargingChange=()=>{this.battery.charging?this.currentTrigger?this.playVideo("Battery"):this.playVideo("Timer"):this.showToastMessage(this.backgroundImageWC.config.localizedStrings.video_pauseToast,!0)},this.playVideo=e=>(0,n.mG)(this,void 0,void 0,(function*(){!this.config.isTest&&this.showVideo&&e&&(this.config.turnOffAutoPlay&&"Button"!==e||(yield this.batteryPromise,e!==this.currentTrigger&&"Timer"!==e&&"Button"!==e||this.battery&&!this.battery.charging&&"Button"!==e||this.isPlaying||this.isReducedMotionActive&&"Button"!==e?this.battery.charging||(this.currentTrigger="Battery"):(0,re.eC)().then((()=>{const t=1e3*this.config.pauseTime;if(this.videoTimer&&this.videoTimer.timer&&clearTimeout(this.videoTimer.timer),"Button"!==e||this.battery.charging){if(this.isGalleryEnabled&&this.isEnergySaverMode&&!this.isBandwidthAdequateForVideo())return void this.pauseVideo("Network");if(!this.battery.charging)return void this.pauseVideo("Battery")}else this.showToastMessage(this.backgroundImageWC.config.localizedStrings.video_powerDrainToast,!1);this.videoTimer.remainingTime<=0&&(this.videoTimer.remainingTime=t),this.videoTimer.startTime=Date.now(),this.videoTimer.timer=setTimeout((()=>{(this.isGalleryEnabled||!this.battery.charging)&&(!this.isGalleryEnabled||this.isEnergySaverMode)?this.pauseVideo("Timer"):this.playVideo("Timer")}),this.videoTimer.remainingTime),this.handleVideoPlay()}))))})),this.handleVideoPlay=()=>{this.isPlaying=!1,requestAnimationFrame((()=>{this.isReducedMotionActive=!1,this.backgroundImageWC.ref_video.play().then((()=>{this.isPlaying=!0})).catch((e=>{(0,K.OO)(e,r.N1Y,"Failed to trigger play.","Timer: "+JSON.stringify(this.videoTimer)+". Current trigger: "+this.currentTrigger+". Show video: "+this.showVideo),this.isPlaying=!1})).finally((()=>{this.backgroundImageWC.updateProperties()}))}))},this.pauseVideo=e=>{if(this.isPlaying&&this.showVideo){this.currentTrigger=e,this.videoTimer&&this.videoTimer.timer&&(clearTimeout(this.videoTimer.timer),this.videoTimer.remainingTime-=Date.now()-this.videoTimer.startTime),this.isPlaying=!1,this.backgroundImageWC.updateProperties();try{this.backgroundImageWC.ref_video.pause()}catch(e){(0,K.OO)(e,r.FtH,"Failed to trigger pause.","Timer: "+JSON.stringify(this.videoTimer)+". Current trigger: "+this.currentTrigger+". Show video: "+this.showVideo)}}},this.reducedMotionChange=()=>{this.isReducedMotionActive=window.matchMedia("(prefers-reduced-motion)").matches},this.showToastMessage=(e,t)=>{this.showToast=!0,this.toastMessage=e,t&&this.pauseVideo("Battery"),this.shouldSkipShowToast()?this.hideToastMessage():(this.backgroundImageWC.updateProperties(),setTimeout((()=>{this.hideToastMessage()}),5e3))},this.hideToastMessage=()=>{this.showToast=!1,this.toastMessage=null,this.backgroundImageWC.updateProperties()},this.shouldSkipShowToast=()=>{var e,t,i;const n="off"===(null===(e=this.backgroundImageWC.chromiumPageSettingsState)||void 0===e?void 0:e.selectedQuickLinksDisplaySetting)||(null===(i=null===(t=this.topSitesLayoutDataConnector)||void 0===t?void 0:t.getCurrentState())||void 0===i?void 0:i.isTopSitesCollapsed);return"always"===this.backgroundImageWC.chromiumPageSettingsState.selectedFeedDisplaySetting&&n},this.config=e,this.backgroundImageWC=t,this.backgroundImageWC.config.newStorage&&(this.config.data=te.p.getCMSVideoData()),this.topSitesLayoutDataConnector=(0,L.K0)(u.z.TopSitesLayoutData),this.isGalleryEnabled=!t.config.disableBackgroundGallery&&te.p.getBackgroundGalleryEligibility(),this.isGalleryEnabled){this.backgroundDataConnector=(0,L.K0)(u.z.BackgroundData);const e=this.backgroundDataConnector.getCurrentState();this.isEnergySaverMode=!(0,F.isNullOrUndefined)(e)&&"energySaver"===e.selectedVideoSetting,T.f.videoSettingsUpdated.registerObserver((e=>{const t=e&&e.params;if(!t||!t.length)return;const i=t[0];this.isEnergySaverMode="energySaver"===i}))}this.videoTimer={remainingTime:-1,startTime:-1,timer:null},this.assignVideoSchedule();const i=window&&window.navigator;this.deviceLogicalProcessors=i?i.hardwareConcurrency:-1,this.deviceMemoryGB=i?i.deviceMemory:-1,this.batteryPromise=i.getBattery().then((e=>{this.battery=e})),this.deviceLogicalProcessors<=2||this.deviceMemoryGB<4?this.showVideo=!1:(this.showVideo=!this.backgroundImageWC.config.simpleImages&&this.shouldShowVideo(),this.showVideo&&this.setVideoAndMuseumCardProperties(),this.config.isTest||(ee.B.toggleCollapsibleControl.registerObserver((e=>{const t=e&&e.params;if(!t||t.length<1)return;t[0]&&1==t[0]&&"always"===this.backgroundImageWC.chromiumPageSettingsState.selectedFeedDisplaySetting&&this.hideToastMessage()})),Promise.all([(0,Q.e3)(),(0,N.F_)()]).then((()=>{this.cacheNextVideo()}))))}setVideoAndMuseumCardProperties(){this.defineResolution(),this.videoSource=this.getVideoURL(this.videoId),this.firstFrameSource=this.getFirstFrameURL(this.videoId);const e="video"+this.videoId;this.videoSource&&this.firstFrameSource&&(this.museumCard={credits:this.config.data[this.videoId].attribution,isDisplayed:!0,irisButtons:{likeClicked:!1,dislikeClicked:!1},title:this.backgroundImageWC.config.localizedStrings.video_titles[e],titleURL:null})}assignBackgroundFromGallerySelection(e){this.videoId=Number(e),this.setVideoAndMuseumCardProperties()}getCurrentBackgroundVideoId(){return this.videoId}assignVideoSchedule(){const e=this.getVideoData();e&&e.schedule?(this.schedule=e.schedule,this.scheduleFixed=e.scheduleFixed,this.checkAndGenerateVideoSchedule(),this.reRandomizeSchedule(e)):this.isGalleryEnabled?this.generateFilteredVideoSchedule():this.generateVideoSchedule()}checkAndGenerateVideoSchedule(){for(let e=0;e<this.schedule.length;e++)if(this.schedule[e]>-1&&!this.validateCurrentIndex(this.schedule[e],!0)){this.isGalleryEnabled?this.generateFilteredVideoSchedule():this.generateVideoSchedule();break}}validateCurrentIndex(e,t=!1){const i=!(0,F.isNullOrUndefined)(e)&&e<this.config.data.length&&!!this.config.data[e];return!i&&t&&(0,K.H)(r.FEC,"Error validating video configuration index: "+e),i}cacheNextVideo(){const e=new Date;e.setDate(e.getDate()+1);const t=e.getDay(),i=this.getVideoData();if(!(i&&i.cachedVideoId===this.schedule[t]||this.backgroundImageWC.config.simpleImages)&&this.schedule[t]>=0&&this.config.enableFeature){const e=this.schedule[t];try{const t=this.getVideoURL(e),n=this.getFirstFrameURL(e);if(!t||!n)return;fetch(t),fetch(n),this.isTomorrowsVideoCached=!0,this.storeVideoData({cachedVideoId:e,lastUpdatedTime:null==i?void 0:i.lastUpdatedTime,schedule:null==i?void 0:i.schedule,scheduleFixed:null==i?void 0:i.scheduleFixed})}catch(t){(0,K.H)(r.LWq,"Video caching failed. Video url: "+this.getVideoURL(e)+" First frame url: "+this.getFirstFrameURL(e),"Error: "+t)}}}defineResolution(){const e=new X.fH,t=(0,X.Nd)(e.data.innerHeight,"innerHeight"),i=(0,X.Nd)(e.data.innerWidth,"innerWidth"),n=(0,ie.x_)()||1,r=(window.screen&&window.screen.height?window.screen.height:t+150)*n,o=(window.screen&&window.screen.width?window.screen.width:i)*n;this.backgroundImageWC.config.serveBetterResolution?this.currentResolution=r<=720||o<=1280?"1080":720<r&&r<=1080||1280<o&&o<=1920?"1440":r>=1080||o>=1920?"2160":"1440":this.currentResolution=r<=720||o<=1280?"720":720<r&&r<=1080||1280<o&&o<=1920?"1080":1080<r&&r<2e3||1920<o&&o<3e3?"1440":r>=2e3||o>=3e3?"2160":"1440"}error(){this.showVideo=!1}generateVideoSchedule(){const e=[];for(let t=0;t<this.config.data.length;t++)e[t]=!1;this.schedule=[-1,-1,-1,-1,-1,-1,-1],this.scheduleFixed=[-1,-1,-1,-1,-1,-1,-1];for(let t=0;t<this.config.videosPerWeek;t++){let i=Math.floor(Math.random()*this.config.data.length);if(e[i]||!this.config.data[i]||this.config.data[i].skipRotation)do{i===this.config.data.length-1?i=0:i++}while(e[i]||!this.config.data[i]||this.config.data[i].skipRotation);this.schedule[t]=i,e[i]=!0}(0,ne.Z)(this.schedule),this.scheduleFixed=this.schedule;const t=this.getVideoData();this.storeVideoData({cachedVideoId:(null==t?void 0:t.cachedVideoId)?t.cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed})}generateFilteredVideoSchedule(){const e=[],t=te.p.getLikeAndDislikeCacheByType(J.wI.videoDislikes);for(let i=0;i<this.config.data.length;i++)t.has(String(i))||e.push(i);const i=[];for(let t=0;t<e.length;t++)i[t]=!1;this.schedule=[-1,-1,-1,-1,-1,-1,-1],this.scheduleFixed=[-1,-1,-1,-1,-1,-1,-1];const n=Math.min(e.length,this.config.videosPerWeek);for(let t=0;t<n;t++){let n=Math.floor(Math.random()*e.length);if(i[n]||!this.config.data[n]||this.config.data[n].skipRotation)do{n===e.length-1?n=0:n++}while(i[n]||!this.config.data[n]||this.config.data[n].skipRotation);this.schedule[t]=e[n],i[n]=!0}(0,ne.Z)(this.schedule),this.scheduleFixed=this.schedule;const r=this.getVideoData();this.storeVideoData({cachedVideoId:(null==r?void 0:r.cachedVideoId)?r.cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed})}getFirstFrameURL(e){var t;if(!this.config.data[e])return null;let i;switch(this.currentResolution){case"720":i=this.config.data[e].firstFrame.i720;break;case"1080":i=this.config.data[e].firstFrame.i1080;break;case"1440":i=this.config.data[e].firstFrame.i1440;break;case"2160":i=this.config.data[e].firstFrame.i2160}return this.isGalleryEnabled?this.isGalleryEnabled&&(i=this.isEnergySaverMode?this.config.data[e].firstFrame.i720:i):i=this.shouldReduceTo1080()?this.config.data[e].firstFrame.i1080:i,i=(null===(t=this.backgroundImageWC.config)||void 0===t?void 0:t.useImgGenerator)?(0,Y.zz)(i,{width:0,height:0,enableDpiScaling:!1}):J.qR+i+".img",i}getVideoData(){try{return(0,w.$o)().getObject(this.storageKey)}catch(e){return(0,K.H)(r.eEQ,"Local storage for video data failed."),null}}getVideoURL(e){var t;if(!this.config.data[e])return null;let i;switch(this.currentResolution){case"720":i=this.config.data[e].video.v720;break;case"1080":i=this.config.data[e].video.v1080;break;case"1440":i=this.config.data[e].video.v1440;break;case"2160":i=this.config.data[e].video.v2160}return this.isGalleryEnabled?this.isGalleryEnabled&&(i=this.isEnergySaverMode?this.config.data[e].video.v720:i):i=this.shouldReduceTo1080()?this.config.data[e].video.v1080:i,i=(null===(t=this.backgroundImageWC.config)||void 0===t?void 0:t.useImgGenerator)?(0,Y.QG)(i):J.Od+i+".mp4",i}removeVideoForToday(){const e=this.getVideoData();e&&e.schedule&&(e.schedule[this.dayNow]=-1,this.showVideo=!1,this.storeVideoData(e))}removeVideoFromLocalStorage(e){const t=this.getVideoData(),i=Number(e);let n=!1;if(t&&t.schedule){for(let e=0;e<t.schedule.length;e++)t.schedule[e]===i&&(t.schedule[e]=-1,n=e===this.dayNow);this.storeVideoData(t)}return n}reRandomizeSchedule(e){e.lastUpdatedTime<this.timeNow-6048e5&&(this.isGalleryEnabled?this.generateFilteredVideoSchedule():this.generateVideoSchedule())}shouldShowVideo(){const e=this.schedule&&this.schedule[this.dayNow];return!!(e>-1&&this.validateCurrentIndex(e)&&this.config.enableFeature&&this.config.data)&&(this.videoId=this.schedule[this.dayNow],!0)}shouldReduceTo1080(){const e=this.isBandwidthAdequateForVideo(),t=this.deviceMemoryGB>=4;return(!e||!t)&&(this.currentResolution="1080",!0)}isBandwidthAdequateForVideo(){return"4g"===window.navigator.connection.effectiveType}storeVideoData(e){try{(0,w.$o)().setObject(this.storageKey,e)}catch(e){return void(0,K.H)(r.ybt,"Local storage for video data failed.")}}unloadVideo(){this.batteryPromise.then((()=>{this.battery.removeEventListener("chargingchange",this.batteryChargingChange)})),window.matchMedia("(prefers-reduced-motion)").removeEventListener("change",this.reducedMotionChange)}videoLoaded(){this.firstFrameHidden=!0,this.backgroundImageWC.updateProperties();const e=this.getVideoData();e&&e.cachedVideoId<0&&M.M0.addOrUpdateTmplString("videoFirstLoad"),this.isReducedMotionActive=window.matchMedia("(prefers-reduced-motion)").matches,!this.isReducedMotionActive&&this.deviceMemoryGB>=4&&(this.isPlaying=!1,this.playVideo("Timer")),this.isReducedMotionActive&&this.showToastMessage(this.backgroundImageWC.config.localizedStrings.video_reducedMotionToast,!1),this.batteryPromise.then((()=>{this.battery.addEventListener("chargingchange",this.batteryChargingChange)})),window.matchMedia("(prefers-reduced-motion)").addEventListener("change",this.reducedMotionChange)}}var se=i(64193),ae=i(88828),ce=i(14165),de=i(51953),le=i(23586),ue=i(65932);class pe{constructor(e,t){this.showSimpleImage=!1,this.dayNow=(new Date).getDay(),this.config=e,this.backgroundImageWC=t,this.backgroundImageWC.config.newStorage&&(this.config.data=te.p.getCMSImageData()),this.cmsSize=this.config.data.length,this.backgroundImageWC.config.simpleImages&&(this.config.data=this.config.data.concat(this.backgroundImageWC.config.simpleImages.data)),this.showSimpleImage=this.shouldShowSimpleImage(),this.showSimpleImage&&this.setImageAndMuseumCardProperties()}shouldShowSimpleImage(){if(this.backgroundImageWC.schedule){const e=this.backgroundImageWC.schedule,t=e&&e[this.dayNow];if(t>-1&&this.validateCurrentIndex(t)&&this.config.data)return this.imageId=e[this.dayNow]+this.cmsSize,!0}return!1}setImageAndMuseumCardProperties(){if(this.defineResolution(),this.imageSource=this.getImageURL(this.imageId),!this.imageSource)return;const e=this.imageId<this.cmsSize?"image"+this.imageId:"simple"+this.imageId;this.museumCard={credits:this.config.data[this.imageId].attribution,isDisplayed:!0,irisButtons:{likeClicked:!1,dislikeClicked:!1},title:this.backgroundImageWC.config.localizedStrings.cmsimage_titles[e]||"",titleURL:null}}assignBackgroundFromGallerySelection(e){this.imageId=Number(e),this.setImageAndMuseumCardProperties()}getImageURL(e){if(!this.config.data[e])return null;let t;switch(this.currentResolution){case"720":t=this.config.data[e].image.i720;break;case"1080":t=this.config.data[e].image.i1080;break;case"1440":t=this.config.data[e].image.i1440;break;case"2160":t=this.config.data[e].image.i2160}return t=J.qR+t+".img",t}defineResolution(){const e=new X.fH,t=(0,X.Nd)(e.data.innerHeight,"innerHeight"),i=(0,X.Nd)(e.data.innerWidth,"innerWidth"),n=(0,ie.x_)()||1,r=(window.screen&&window.screen.height?window.screen.height:t+150)*n,o=(window.screen&&window.screen.width?window.screen.width:i)*n;this.backgroundImageWC.config.serveBetterResolution?this.currentResolution=r<=720||o<=1280?"1080":720<r&&r<=1080||1280<o&&o<=1920?"1440":r>=1080||o>=1920?"2160":"1440":this.currentResolution=r<=720||o<=1280?"720":720<r&&r<=1080||1280<o&&o<=1920?"1080":1080<r&&r<2e3||1920<o&&o<3e3?"1440":r>=2e3||o>=3e3?"2160":"1440"}validateCurrentIndex(e,t=!1){const i=!(0,F.isNullOrUndefined)(e)&&e<this.config.data.length&&!!this.config.data[e];return!i&&t&&(0,K.H)(r.FEC,"Error validating CMS Image configuration index: "+e),i}}var ge=i(38349),he=i(76868),me=i(23344),fe=i(31402);const ve="vp"===(0,g.L)().get("reqsrc")||!!(0,g.L)().get("vptest");class ye extends se.l{constructor(){super(...arguments),this.hotSpots=[],this.eventLocalStorage=h.Q.getInstance(),this.imageInformationalStyles="",this.imageOverrideStyles="",this.isFeedDisplayAlwaysOn=!1,this.isFRE=m.jG.IsFrePage,this.isTestRunning=!1,this.isReducedMotionActive=!1,this.isTTVRFired=!1,this.isLoadComplete=!1,this.hasFeedDisplayChanged=!1,this.museumCreditsCardIsShown=!1,this.recommendedSitesHeight=0,this.storeOverrideStyles="",this.telemetryTags={},this.triggerHover=!1,this.videoPlaying=!1,this.loadImageHotSpotsErrorFired=!1,this.shouldUpdateMuseumCardVisibility=!0,this.renderHotSpots=!0,this.storageKey="bkgdV",this.timeNow=(new Date).getTime(),this.backgroundGalleryEligibility=!1,this.includeVideoBackgroundsInRotation=!1,this.bespokeAdStyleOverride="",this.displayBespokeAd=!1,this.bespokeAdOpacity="1",this.bespokeAdTopGradientOpacity="0.54",this.imageEmptyChecked=!1,this.currentProviderChanged=(e,t)=>{var i;switch(this.imageOverrideStyles="",this.imageInformationalStyles="",this.isLoadComplete=!1,"NoBackground"===t?(0,f.j3)("backgroundImage","hidden"):(0,f.j3)("backgroundImage","displayed"),t){case"Iris":if(!this.irisProvider){const e=(0,Y.zz)(this.config.fallbackImageId,{width:0,height:0,enableDpiScaling:!1});this.irisProvider=this.backgroundGalleryEligibility?new j(this.backgroundDataConnector,e,this.updateProperties,!0,this.strings.irisFallbackTitle):new j(this.chromiumPageSettingsConnector,e,this.updateProperties)}break;case"Video":if(this.videoProvider||(this.videoProvider=new oe(this.config.video,this)),this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&"Video"===this.galleryBackgroundSelectionMetadata.provider&&(this.videoProvider.showVideo=this.videoProvider.validateCurrentIndex(Number(this.galleryBackgroundSelectionMetadata.configIndex),!0),!this.videoProvider.showVideo)){te.p.clearCachedBackground().then((()=>{this.defineCurrentProvider()}));break}this.videoProvider&&this.videoProvider.showVideo?(window.addEventListener("blur",this.onWindowBlur,!1),window.addEventListener("focus",this.onWindowFocus,!1)):this.currentProvider=this.config.simpleImages?"CMSImage":"Iris";break;case"CMSImage":this.cmsImageProvider||(this.cmsImageProvider=new pe(this.config.cmsImage,this)),this.cmsImageProvider.showSimpleImage||this.cmsImageProvider.validateCurrentIndex(Number(this.galleryBackgroundSelectionMetadata.configIndex),!0)||te.p.clearCachedBackground().then((()=>{this.defineCurrentProvider()}))}if("Video"!==this.currentProvider&&this.videoProvider&&(this.videoProvider.isPlaying=!1),"Video"===e)null===(i=this.videoProvider)||void 0===i||i.unloadVideo(),window.removeEventListener("blur",this.onWindowBlur,!1),window.removeEventListener("focus",this.onWindowFocus,!1);this.updateProperties()},this.animationComplete=()=>{this.calcMuseumBottom(),this.displayBespokeAd&&this.calcBespokeAdTemplateBottom()},this.calcMuseumBottom=()=>{if(scrollY>0)return;if(this.ref_museumCardContainer&&this.ref_museumCardContainer.classList.remove("museumCard_hide"),this.museumCreditsCardIsShown)return void(this.museumBottom=7);const e=(0,V.b_)(q._.headerSpaceHolder);if(!e)return;const t=e.offsetHeight;switch(this.chromiumPageSettingsState.selectedFeedDisplaySetting){case"always":case"peek":case"headingsonly":this.museumBottom=innerHeight-t+7;break;default:this.museumBottom=7}},this.calcBespokeAdDismissBottom=()=>{if(scrollY>0)return;this.ref_bespokeAdDismissButton&&this.ref_bespokeAdDismissButton.classList.remove("museumCard_hide"),this.ref_bespokeAdSponsoredTextContainer&&this.ref_bespokeAdSponsoredTextContainer.classList.remove("museumCard_hide");const e=(0,V.b_)(q._.headerSpaceHolder);if(!e)return;const t=e.offsetHeight;switch(this.chromiumPageSettingsState.selectedFeedDisplaySetting){case"always":case"peek":this.museumBottom=innerHeight-t+7}},this.calcBespokeAdTemplateBottom=()=>{const e=(0,V.b_)(q._.headerSpaceHolder);if(!e)return;const t=e.offsetHeight,i=(0,ae.Bn)().currentColumnArrangement,n=le.$F.get(i),r=Math.floor(this.screenWidth/1e3);switch(this.chromiumPageSettingsState.selectedFeedDisplaySetting){case"always":case"peek":case"headingsonly":this.bespokeAdCTATemplateBottom=innerHeight-t+scrollY+("c5"===i?n*r:n);break;default:this.bespokeAdCTATemplateBottom=300}},this.calcBespokeAdTemplateLeft=()=>{switch((0,ae.Bn)().currentColumnArrangement){case"c5":this.bespokeAdCTATemplateLeft=(innerWidth-ce.sc)/2+100+"px";break;case"c4":this.bespokeAdCTATemplateLeft=(innerWidth-ce.xX)/2+100+"px";break;case"c3":this.bespokeAdCTATemplateLeft=(innerWidth-ce.Xn)/2+"px";break;default:this.bespokeAdCTATemplateLeft="50%"}},this.setOpacityForBespokeAdContainer=()=>{var e;if(!this.ref_bespokeAdInfoAndCTAContainer||!this.bespokeAdTopGradientHeight)return;const t=null===(e=this.ref_bespokeAdInfoAndCTAContainer.getBoundingClientRect())||void 0===e?void 0:e.top;if(!t)return;t<=this.bespokeAdTopGradientHeight&&0!==scrollY?this.bespokeAdOpacity="0":this.bespokeAdOpacity="1"},this.createTelemetryTags=()=>{(0,F.isNullOrUndefined)(this.telemetryObject)?(0,K.H)(r.CgS,"Telemetry object is undefined"):(this.telemetryTags.hotSpots={},this.telemetryTags.video=this.telemetryObject.addOrUpdateChild({name:"BackgroundVideo"}).getMetadataTag(),this.backgroundGalleryEligibility&&(this.telemetryTags.backgroundGalleryButton=this.telemetryObject.addOrUpdateChild({name:"BackgroundGalleryButton",type:x.c9.Interaction,behavior:x.wu.Navigate,content:{headline:"Edit Background"}}).getMetadataTag()))},this.defineCurrentProvider=()=>{var e,t,i,n,o;if(null===(e=this.config.video)||void 0===e?void 0:e.isTest)this.currentProvider="Video";else if(this.backgroundGalleryEligibility&&(this.galleryBackgroundSelectionMetadata=te.p.getPreferenceByKeyFromFromPreferencesCache(J.wI.backgroundSelectionMetadata),this.includeVideoBackgroundsInRotation=te.p.getPreferenceByKeyFromFromPreferencesCache(J.wI.includeVideoBackgroundsInRotation)),"bing"!==this.chromiumPageSettingsState.currentBackgroundImageType&&"imageAndVideo"!==this.chromiumPageSettingsState.currentBackgroundImageType||!this.isTestRunning)switch(this.chromiumPageSettingsState.currentBackgroundImageType){case a.HX.bing:case a.HX.enterprise:case a.HX.imageAndVideo:case a.HX.iris:if(this.isFRE&&!this.config.turnOffFREImage){this.currentProvider="FREBackground";break}if(this.displayBespokeAd){this.currentProvider="BespokeAd";break}if(null===(t=this.config.event)||void 0===t?void 0:t.enableEvent){const e=this.config.event.showImageIndefinitely?v.vC:void 0;if(this.showEvent=this.eventLocalStorage.shouldShowEvent(this.config.event.eventId,l.x.backgroundImageWC,this.config.event.creatives,e,null===(i=this.config.event.cmsContent)||void 0===i?void 0:i.url,r.LXY),this.showEvent&&this.chromiumPageSettingsState.backgroundImageTypePolicy===a.gZ.allowAll){this.currentProvider="Event";break}}if(this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata){if("CMSImage"===this.galleryBackgroundSelectionMetadata.provider){this.currentProvider="CMSImage";break}if("Video"===this.galleryBackgroundSelectionMetadata.provider){this.videoProvider&&!this.videoProvider.showVideo?this.currentProvider=this.config.simpleImages?"CMSImage":"Iris":this.currentProvider="Video";break}if("Iris"===this.galleryBackgroundSelectionMetadata.provider){this.currentProvider="Iris";break}if("BrowserLocal"===this.galleryBackgroundSelectionMetadata.provider&&this.chromiumPageSettingsState.customBackgroundImageInfo&&this.chromiumPageSettingsState.customBackgroundImageInfo.hasImage){this.currentProvider="BrowserLocal";break}}if((null===(n=this.config.video)||void 0===n?void 0:n.enableFeature)&&this.chromiumPageSettingsState.backgroundImageTypePolicy===a.gZ.allowAll&&this.chromiumPageSettingsState.currentBackgroundImageType!==a.HX.bing){if(!this.videoProvider||this.videoProvider.showVideo&&this.videoProvider.shouldShowVideo()&&this.includeVideoBackgroundsInRotation){this.currentProvider="Video";break}this.currentProvider=this.config.simpleImages?"CMSImage":"Iris";break}this.currentProvider="Iris";break;case a.HX.custom:this.chromiumPageSettingsState.customBackgroundImageInfo&&this.chromiumPageSettingsState.customBackgroundImageInfo.hasImage?this.currentProvider="BrowserLocal":this.currentProvider="Iris";break;case a.HX.off:this.currentProvider="NoBackground";break;case a.HX.theme:{const e=this.chromiumPageSettingsState.configData,t=e&&e.enabledFeatures&&e.enabledFeatures.includes("msAllowThemeInstallationFromChromeStore"),i=this.chromiumPageSettingsState.ntpTheme&&this.chromiumPageSettingsState.ntpTheme.usingDefaultTheme,n=this.chromiumPageSettingsState.ntpTheme&&this.chromiumPageSettingsState.ntpTheme.imageUrl,r=this.chromiumPageSettingsState.ntpTheme&&(null===(o=this.chromiumPageSettingsState.ntpTheme.backgroundColorRgba)||void 0===o?void 0:o.length)>3;this.currentProvider=t&&!i&&(n||r)?"Theme":"NoBackground";break}default:this.currentProvider="Iris"}else this.isFRE&&!this.config.turnOffFREImage?this.currentProvider="FREBackground":this.currentProvider="Iris"},this.error=e=>{if(this.isTTVRFired||(this.isTTVRFired=!0,this.markVisuallyReady()),(0,K.H)(r.yb9,"Error fetching source","Source: "+e),"Video"===this.currentProvider)this.videoProvider.error(),this.defineCurrentProvider();else this.currentProvider="Error",this.updateProperties()},this.loadComplete=()=>{this.isTTVRFired||(this.isTTVRFired=!0,this.markVisuallyReady())},this.playVideo=()=>{this.videoPlaying||this.videoProvider.videoLoaded()},this.toggleMuseumCardOpen=()=>{const e=(0,V.b_)(q._.recommendedSites);if(!e)return;const t=this.getStyleForElementKey(q._.backgroundOuterHolder);this.museumCreditsCardIsShown?(window.removeEventListener("click",this.onClick_outsideMuseumCard),window.removeEventListener("keydown",this.onKeyDown_closeMuseumCard)):setTimeout((()=>{window.addEventListener("click",this.onClick_outsideMuseumCard),window.addEventListener("keydown",this.onKeyDown_closeMuseumCard)}),100),this.isFeedDisplayAlwaysOn&&(this.museumCreditsCardIsShown?(this.imageInformationalStyles=this.storeOverrideStyles,this.storeOverrideStyles=""):(this.storeOverrideStyles=this.imageInformationalStyles,this.imageInformationalStyles="")),this.museumCreditsCardIsShown?(t.zIndex="",this.isFeedDisplayAlwaysOn&&this.config&&this.config.noFeedBackgroundEnabled&&e&&(e.style.zIndex="501")):(t.zIndex=s,this.getStyleForElementKey(q._.backgroundInnerHolder).height=innerHeight+"px"),this.museumCreditsCardIsShown=!this.museumCreditsCardIsShown,(0,y.Gg)(y.tk.museumCard,this.museumCreditsCardIsShown),this.calcMuseumBottom(),"Video"===this.currentProvider&&this.museumCreditsCardIsShown&&this.videoProvider.playVideo("Timer")},this.syncWithStateChange=()=>{const e=this.chromiumPageSettingsConnector.getCurrentState(),t=this.topSitesLayoutDataConnector.getCurrentState(),i=e.selectedFeedDisplaySetting!==this.chromiumPageSettingsState.selectedFeedDisplaySetting,n=e.quickLinksEnabled!==this.chromiumPageSettingsState.quickLinksEnabled,r=t.isTopSitesCollapsed!==this.topSitesLayoutState.isTopSitesCollapsed,o=this.displayBespokeAd&&e.sponsoredContentEnabled!==this.chromiumPageSettingsState.sponsoredContentEnabled;if((i||n||this.isFeedDisplayAlwaysOn&&r)&&(this.museumBottom=0),i&&(this.hasFeedDisplayChanged=!0,this.displayBespokeAd&&"always"!==e.selectedFeedDisplaySetting&&"peek"!==e.selectedFeedDisplaySetting&&(this.displayBespokeAd=!1)),o&&!e.sponsoredContentEnabled&&(this.displayBespokeAd=!1),this.displayBespokeAd){this.adjustBespokeAdGradient(e,t);e.currentBackgroundImageType!==this.chromiumPageSettingsState.currentBackgroundImageType&&e.currentBackgroundImageType!==a.HX.imageAndVideo&&e.currentBackgroundImageType!==a.HX.bing&&(this.displayBespokeAd=!1,this.backgroundDataConnector.bespokeAdDisplayStatusUpdated(!1))}if(this.displayBespokeAd||this.isFeedDisplayAlwaysOn&&!this.hasFeedDisplayChanged&&!this.translucentFeedEnabled){const e=(0,V.b_)(q._.headerSpaceHolder);e&&(this.imageInformationalStyles=`height: ${e.offsetHeight}px;`)}else this.imageInformationalStyles="";if(this.chromiumPageSettingsState=e,this.topSitesLayoutState=t,this.defineCurrentProvider(),this.updateProperties(),this.calcMuseumBottom(),this.displayBespokeAd&&(this.calcBespokeAdTemplateBottom(),this.calcBespokeAdTemplateLeft()),this.config.noBckImgOnNavSticky&&0===scrollY){const e="off"===this.chromiumPageSettingsState.currentBackgroundImageType;this.updatebackgroundImageOp(e)}},this.updateProperties=()=>{switch(this.isFeedDisplayAlwaysOn="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting,this.currentProvider){case"BrowserLocal":this.updateProperties_customImage();break;case"FREBackground":this.updateProperties_fre();break;case"Event":this.updateProperties_event();break;case"Iris":this.updateProperties_iris();break;case"NoBackground":this.updateProperties_noBackground();break;case"Theme":this.updateProperties_theme();break;case"Video":this.updateProperties_video();break;case"CMSImage":this.updateProperties_cmsImage();break;case"BespokeAd":this.updateProperties_bespokeAd();break;default:this.updateProperties_error()}},this.updateProperties_customImage=()=>{this.imageSourceAgent=this.chromiumPageSettingsState.customBackgroundImageInfo.resourceUrl,this.museumCard=null,this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:"",this.imageOverrideStyles=""},this.updateProperties_error=()=>{const e=this.config.freImages.informational,t=this.config.freImages.inspirational;this.imageSourceAgent="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting?(0,Y.zz)(e,{width:0,height:0,enableDpiScaling:!1}):(0,Y.zz)(t,{width:0,height:0,enableDpiScaling:!1}),this.museumCard=null,this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:"",this.imageOverrideStyles=""},this.updateProperties_event=()=>{var e,t;const i=this.config.event.eventId,n=this.config.event.showImageIndefinitely?v.vC:void 0;let o,s;if(this.currentEventCreative=this.eventLocalStorage.getCurrentCreativeId(i,l.x.backgroundImageWC,this.config.event.creatives,n,null===(e=this.config.event.cmsContent)||void 0===e?void 0:e.url,r.LXY),null===(t=this.config.event)||void 0===t?void 0:t.cmsContent){if(o=this.eventLocalStorage.getCMSContent(i,l.x.backgroundImageWC,this.config.event.creatives,r.LXY),!o)return this.config.event=null,void this.defineCurrentProvider();this.config.event.imageData.CMS.attribution=o.attribution,this.config.event.imageData.CMS.imageSource=o.imageSource,this.config.event.imageData.CMS.imageHref=o.imageHref}if(s="VpTest"===i?"Test image":this.config.event.cmsContent?o.title:this.strings.events[this.config.event.useCommonIdForLocString?this.config.event.eventId:this.currentEventCreative],this.imageSourceAgent=this.config.event.imageData[this.currentEventCreative].imageSource,this.museumCard={credits:this.config.event.imageData[this.currentEventCreative].attribution,isDisplayed:!0,irisButtons:{likeClicked:!1,dislikeClicked:!1},title:s,titleURL:(0,b.h_)(this.config.event.imageData[this.currentEventCreative].imageHref)},this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:"",this.imageOverrideStyles="",!this.telemetryObject)return void(0,K.H)(r.CgS,"Telemetry object is undefined on Iris update");this.telemetryTags.cardTitle=this.telemetryObject.addOrUpdateChild({name:"CopyrightLink",behavior:x.wu.Navigate,content:{headline:s,id:v.YO+this.config.event.eventId},overrideDestinationUrl:this.config.event.imageData[this.currentEventCreative].imageHref}).getMetadataTag(),this.telemetryTags.dismissButton=this.telemetryObject.addOrUpdateChild({name:"DismissEvent",behavior:x.wu.Dislike,content:{headline:this.museumCard.title,id:v.YO+this.config.event.eventId}}).getMetadataTag(),this.telemetryTags.title_cardHidden=this.telemetryObject.addOrUpdateChild({name:"LikeBackground",behavior:x.wu.Show,content:{headline:"LikeBackground",id:v.YO+this.config.event.eventId}}).getMetadataTag(),this.telemetryTags.title_cardShown=this.telemetryObject.addOrUpdateChild({name:"ExitFullView",behavior:x.wu.Close,content:{headline:"ExitFullView",id:v.YO+this.config.event.eventId}}).getMetadataTag();const a=this.config.event.imageData[this.currentEventCreative].secondaryButton;a&&(this.secondaryButtonTelemetryTag=this.telemetryObject.addOrUpdateChild({name:"SecondaryButton",behavior:x.wu.Navigate,content:{headline:this.museumCard.title,id:v.YO+this.config.event.eventId},overrideDestinationUrl:a.href}).getMetadataTag())},this.updateProperties_fre=()=>{const e=this.config.freImages.informational,t=this.config.freImages.inspirational;this.imageSourceAgent="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting?(0,Y.zz)(e,{width:0,height:0,enableDpiScaling:!1}):(0,Y.zz)(t,{width:0,height:0,enableDpiScaling:!1}),this.museumCard=null,this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:"",this.imageOverrideStyles=""},this.updateProperties_iris=()=>(0,n.mG)(this,void 0,void 0,(function*(){var e;if(ve)yield this.irisProvider.loadImageHotSpots();else try{yield this.irisProvider.loadImageHotSpots()}catch(e){this.loadImageHotSpotsErrorFired||((0,K.H)(r.W91,"irisProvider.loadImageHotSpots failed. Mark load complete.",e&&e.message),this.loadImageHotSpotsErrorFired=!0)}const t=this.irisProvider.irisStateInfo;this.imageSourceAgent=this.irisProvider.irisImageURL,this.museumCard=Object.assign(Object.assign({},this.irisProvider.museumCard),{irisButtons:Object.assign({},null===(e=this.museumCard)||void 0===e?void 0:e.irisButtons)}),this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:"",this.imageOverrideStyles="";const i=this.config.iris.disableHotSpots||this.isFeedDisplayAlwaysOn||!t||!t.hsList||0===t.hsList.length;if(this.hotSpots=[],!i){let e,i;const n=(0,V.b_)(q._.topSites);this.config.topSitesCloserToSearchBox?(e=n,i=(0,V.b_)(q._.navBar)):(e=(0,V.b_)(q._.searchBox),i=n);const r=e?e.getBoundingClientRect().bottom:0,o=i?i.getBoundingClientRect().top:0,s=Math.max(o-r-32,0),a=Math.max(window.outerWidth-64,0);t.hsList.forEach((e=>{if(!e||!e.landscape)return;const t=s*parseFloat(e.landscape.y_percent),i=a*parseFloat(e.landscape.x_percent);if(t+32+16+20<=s&&i+32+8+256<=a){const n={marginTop:r+16+"px",marginLeft:"16px",marginRight:"32px",height:s+"px",width:a+"px",widthOffset:Math.floor(i)+"px",heightOffset:Math.floor(t)+"px"};this.hotSpots.push({data:e,styles:n,icon:U(e.icon),telemetryTags:this.telemetryTags.hotSpots[e.title],onClickHandler:this.irisProvider.hotSpotClickHandler,onMouseEnterHandler:this.irisProvider.hotSpotMouseEnterHandler})}}))}if(!this.telemetryObject||!t)return void(0,K.H)(r.CgS,"Telemetry object is undefined on Iris update");const n=this.museumCard.title?this.museumCard.title:"",o=t.titleLink?t.titleLink:"";this.telemetryTags.cardTitle=this.telemetryObject.addOrUpdateChild({name:"CopyrightLink",behavior:x.wu.Navigate,content:{headline:n},overrideDestinationUrl:o}).getMetadataTag(),this.telemetryTags.dislikeButton=this.telemetryObject.addOrUpdateChild({name:"DisLike",behavior:x.wu.Dislike,content:{headline:n}}).getMetadataTag(),this.telemetryTags.likeButton=this.telemetryObject.addOrUpdateChild({name:"Like",behavior:x.wu.Like,content:{headline:n}}).getMetadataTag(),this.telemetryTags.title_cardHidden=this.telemetryObject.addOrUpdateChild({name:"IrisMuseumCard",behavior:x.wu.Show,content:{headline:"Like this Background?",type:x.uH.Image}}).getMetadataTag(),this.telemetryTags.title_cardShown=this.telemetryObject.addOrUpdateChild({name:"IrisMuseumCard",behavior:x.wu.Close,content:{headline:"Exit Full View",type:x.uH.Image}}).getMetadataTag();const{hsList:s,creativeId:a}=t;s&&s.forEach((e=>{const t=this.telemetryObject.addOrUpdateChild({name:"HotSpot",content:{headline:(e.cta_type===W.offPageNavigation?`HotSpot_${a}_${e.hs}`:`HotSpot_${e.cta}_${a}_${e.hs}`)+" - "+e.title},type:x.c9.Module,behavior:x.wu.Navigate,action:x.Aw.Click,overrideDestinationUrl:e.cta}).getMetadataTag();this.telemetryTags.hotSpots&&(this.telemetryTags.hotSpots[e.title]=t)}))})),this.updateProperties_noBackground=()=>{this.imageSourceAgent=null,this.museumCard=null,this.imageOverrideStyles="",this.loadComplete()},this.updateProperties_theme=()=>{const e=this.chromiumPageSettingsState.ntpTheme;this.imageSourceAgent=null,this.museumCard=null,this.imageInformationalStyles="",this.imageOverrideStyles=`background-position: ${e.imageHorizontalAlignment} ${e.imageVerticalAlignment}; background-repeat: ${e.imageTiling}; background-image: ${e.imageUrl}; background-color: ${this.getThemeBackgroundColor()}`,"repeat"===e.imageTiling&&(this.imageOverrideStyles+="background-size: auto;"),this.loadComplete()},this.updateProperties_video=()=>{this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&"Video"===this.galleryBackgroundSelectionMetadata.provider?this.videoProvider.assignBackgroundFromGallerySelection(this.galleryBackgroundSelectionMetadata.configIndex):this.videoProvider&&this.videoProvider.setVideoAndMuseumCardProperties(),this.imageSourceAgent=this.videoProvider.firstFrameSource,this.museumCard=Object.assign({},this.videoProvider.museumCard),this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:"",this.isReducedMotionActive=this.videoProvider.isReducedMotionActive,this.showToast=this.videoProvider.showToast,this.toastMessage=this.videoProvider.toastMessage,this.videoPlaying=this.videoProvider.isPlaying,this.videoSource=this.videoProvider.videoSource,this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:"",this.loadComplete(),this.telemetryObject?(this.setVideoSecondaryButtonTelemetry(),this.telemetryTags.dislikeButton=this.telemetryObject.addOrUpdateChild({name:"DisLike",behavior:x.wu.Dislike,content:{headline:this.videoProvider.museumCard.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag(),this.telemetryTags.likeButton=this.telemetryObject.addOrUpdateChild({name:"Like",behavior:x.wu.Like,content:{headline:this.videoProvider.museumCard.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag(),this.telemetryTags.title_cardHidden=this.telemetryObject.addOrUpdateChild({name:"LikeBackground",behavior:x.wu.Show,content:{headline:"LikeBackground",id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag(),this.telemetryTags.title_cardShown=this.telemetryObject.addOrUpdateChild({name:"ExitFullView",behavior:x.wu.Close,content:{headline:"ExitFullView",id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag()):(0,K.H)(r.CgS,"Telemetry object is undefined on Iris update")},this.updateProperties_cmsImage=()=>{this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&this.cmsImageProvider.assignBackgroundFromGallerySelection(this.galleryBackgroundSelectionMetadata.configIndex),this.imageSourceAgent=this.cmsImageProvider.imageSource,this.museumCard=Object.assign({},this.cmsImageProvider.museumCard),this.imageInformationalStyles=this.isFeedDisplayAlwaysOn?this.imageInformationalStyles:""},this.updateProperties_bespokeAd=()=>{var e,t,i,n,o,s;let a=this.currentColumnArrangement;"c5"===this.currentColumnArrangement&&(a+=this.screenWidth>1920?"_2k":"_hd"),this.imageSourceAgent=null===(e=this.config.bespokeAds)||void 0===e?void 0:e.backgroundImageURLs[a],this.museumCard=null,this.imageInformationalStyles=`height: ${(0,V.b_)(q._.headerSpaceHolder).offsetHeight}px;`,this.telemetryObject?(this.telemetryTags.bespokeAdDismissButton=this.telemetryObject.addOrUpdateChild({name:"BespokeAdDismissButton",behavior:x.wu.Hide,content:{headline:null===(t=this.bespokeAdPayload)||void 0===t?void 0:t.title,id:null===(i=this.bespokeAdPayload)||void 0===i?void 0:i.clickthroughUrl}}).getMetadataTag(),this.telemetryTags.bespokeAdCTAButton=this.telemetryObject.addOrUpdateChild({name:"BespokeAdCTAButton",type:x.c9.Interaction,behavior:x.wu.Navigate,content:{headline:(null===(n=this.config.bespokeAds)||void 0===n?void 0:n.ctaButtonText)?null===(o=this.config.bespokeAds)||void 0===o?void 0:o.ctaButtonText:this.strings.bespokeAds.ctaFallbackText,id:null===(s=this.bespokeAdPayload)||void 0===s?void 0:s.clickthroughUrl}}).getMetadataTag()):(0,K.H)(r.CgS,"Telemetry object is undefined for bespoke ads update")},this.handleGalleryDispositionButtonClick=()=>(0,n.mG)(this,void 0,void 0,(function*(){const e=this.backgroundDataConnector.getCurrentState().backgroundDispositionMetadata;switch(e.actionType){case"like":yield this.handleGalleryLike(e.provider);break;case"dislike":yield this.handleGalleryDislike(e.provider)}})),this.handleGalleryLike=e=>(0,n.mG)(this,void 0,void 0,(function*(){if("Iris"===e)this.irisProvider.likeClickButtonHandler()})),this.handleGalleryDislike=(e,t)=>(0,n.mG)(this,void 0,void 0,(function*(){switch(e){case"Video":this.videoProvider&&this.videoProvider.removeVideoFromLocalStorage(t);break;case"Iris":this.irisProvider.dislikeClickButtonHandler()}})),this.onClick_bespokeAdDismissButton=()=>(0,n.mG)(this,void 0,void 0,(function*(){var e;this.backgroundDataConnector.bespokeAdDisplayStatusUpdated(!1),this.displayBespokeAd=!1,this.defineCurrentProvider();const t=null===(e=this.config.bespokeAds)||void 0===e?void 0:e.campaignName;return(0,ge.yV)(he.y.BackgroundImageChange),te.p.getBespokeAdPreferencesByCampaign(t).then((e=>{const i=te.p.buildBespokeAdMetadata(t,e?e.numTimesSeen:1,!0);return te.p.setBespokeAdPreferencesByCampaign(t,i)}))})),this.onClick_secondaryButton=()=>{"Video"===this.currentProvider?this.videoProvider?(this.videoProvider.isPlaying?this.videoProvider.pauseVideo("Button"):this.videoProvider.playVideo("Button"),this.setVideoSecondaryButtonTelemetry(!0)):(0,K.H)(r.$qz,"Video provider not available. Attempted play/pause video"):"Event"===this.currentProvider&&window.open(this.config.event.imageData[this.currentEventCreative].secondaryButton.href)},this.onClick_outsideMuseumCard=e=>{e.composedPath().includes(this.ref_museumCardContainer)||(M.M0.sendActionEvent(this.ref_museumCardButton,x.Aw.Click,x.wu.Close),this.toggleMuseumCardOpen())},this.onClick_openGalleryButton=()=>{this.backgroundDataConnector&&this.galleryBroadcastChannel&&(this.galleryBroadcastChannel.postMessage("galleryOpened"),this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!0),this.toggleMuseumCardOpen())},this.onClick_imageEditButton=()=>{this.backgroundDataConnector&&this.galleryBroadcastChannel&&(this.galleryBroadcastChannel.postMessage("galleryOpened"),this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!0))},this.onKeyDown_closeMuseumCard=e=>{"Escape"===e.code&&(M.M0.sendActionEvent(this.ref_museumCardButton,x.Aw.Click,x.wu.Close),this.toggleMuseumCardOpen())},this.onMouseEnter_museumCard=()=>{this.triggerHover=!0,this.museumCreditsCardIsShown||setTimeout((()=>{this.triggerHover&&(this.toggleMuseumCardOpen(),M.M0.sendActionEvent(this.ref_museumCardButton,x.Aw.Hover,x.wu.Show))}),500)},this.onMouseLeave_museumCard=()=>{this.triggerHover=!1},this.onFocusLeave_museumCardButton=()=>{this.museumCreditsCardIsShown&&this.ref_backgroundGalleryButton&&this.ref_backgroundGalleryButton.focus()},this.onFocusLeave_backgroundGalleryButton=()=>{this.museumCreditsCardIsShown&&this.ref_museumCardButton&&this.ref_museumCardButton.focus()},this.onResize=()=>{this.museumCard&&this.calcMuseumBottom(),"Iris"===this.currentProvider&&this.updateProperties(),this.backgroundGalleryEligibility&&this.checkMinimumWidthForGallery(),this.displayBespokeAd&&(this.calcBespokeAdTemplateBottom(),this.calcBespokeAdDismissBottom(),this.calcBespokeAdTemplateLeft())},this.onScroll=(0,S.k)((()=>{this.museumCreditsCardIsShown&&this.toggleMuseumCardOpen(),this.displayBespokeAd&&(this.calcBespokeAdTemplateBottom(),this.calcBespokeAdDismissBottom(),this.calcBespokeAdGradientAttributesOnScroll(),this.setOpacityForBespokeAdContainer());const e=0===scrollY;this.museumCard&&(e?(this.ref_hotSpotsContainer&&this.ref_hotSpotsContainer.classList.remove("hotSpotContainer_hide"),this.calcMuseumBottom(),this.shouldUpdateMuseumCardVisibility=!0):!e&&this.shouldUpdateMuseumCardVisibility&&(this.ref_museumCardContainer&&this.ref_museumCardContainer.classList.add("museumCard_hide"),this.ref_hotSpotsContainer&&this.ref_hotSpotsContainer.classList.add("hotSpotContainer_hide"),this.shouldUpdateMuseumCardVisibility=!1)),this.displayBespokeAd&&(e||(this.ref_museumButtonContainer&&this.ref_museumButtonContainer.classList.add("museumCard_hide"),this.ref_bespokeAdSponsoredTextContainer&&this.ref_bespokeAdSponsoredTextContainer.classList.add("museumCard_hide"))),"Video"===this.currentProvider&&(e?this.videoProvider.playVideo("Scroll"):this.videoProvider.pauseVideo("Scroll"));const t=scrollY>c.FT;if(this.config.noBckImgOnNavSticky){const e="off"===this.chromiumPageSettingsState.currentBackgroundImageType||t;this.updatebackgroundImageOp(e)}}),350),this.onWindowBlur=()=>{this.videoProvider.pauseVideo("Focus")},this.onWindowFocus=()=>{this.videoProvider.playVideo("Focus")},this.updatebackgroundImageOp=e=>{this.shadowRoot.getElementById("backgroundImage")&&(this.shadowRoot.getElementById("backgroundImage").style.opacity=e?"0":"1")}}set imageSourceAgent(e){if(!e&&!this.imageEmptyChecked&&!ve)switch(this.currentProvider){case"NoBackground":case"Theme":break;default:this.imageEmptyChecked=!0,this.error("No image source")}this.imageSource=e}experienceConnected(){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.config.newStorage&&(yield te.p.loadCMSImageData(),yield te.p.loadCMSVideoData()),this.chromiumPageSettingsConnector=(0,L.K0)(u.z.ChromiumPageSettings),this.topSitesLayoutDataConnector=(0,L.K0)(u.z.TopSitesLayoutData),(0,F.isNullOrUndefined)(this.chromiumPageSettingsConnector)||(0,F.isNullOrUndefined)(this.topSitesLayoutDataConnector)){const e=(0,F.isNullOrUndefined)(this.chromiumPageSettingsConnector),t=(0,F.isNullOrUndefined)(this.topSitesLayoutDataConnector);return(0,K.H)(r.B5f,"Data connector missing: ChromiumSettings-"+e+" Topsites-"+t),void this.error("Data connectors missing")}this.config.simpleImages&&(te.p.setSimpleImagesandCMSSize(!0,this.config.cmsImage.data.length),this.checkAndGenerateVideoSchedule());let e=te.p.getBackgroundGalleryEligibility();if(void 0!==e||this.config.disableBackgroundGallery||m.jG.IsFrePage||(yield te.p.initState(T.f.backgroundDataStateLoaded.getActionSender((0,L.K0)(u.z.BackgroundData))),e=te.p.getBackgroundGalleryEligibility()),this.backgroundGalleryEligibility=!this.config.disableBackgroundGallery&&!this.isFRE&&te.p&&e,this.backgroundGalleryEligibility&&(this.checkMinimumWidthForGallery(),this.backgroundDataConnector=(0,L.K0)(u.z.BackgroundData),this.galleryBroadcastChannel=new BroadcastChannel(le.fZ)),this.backgroundGalleryEligibility&&(0,F.isNullOrUndefined)(this.backgroundDataConnector))return(0,K.H)(r.B5f,"Data connector missing: BackgroundData"),void this.error("Data connectors missing");this.chromiumPageSettingsState=this.chromiumPageSettingsConnector.getCurrentState(),this.topSitesLayoutState=this.topSitesLayoutDataConnector.getCurrentState(),this.config.enableBespokeAds&&(fe.i.handleBespokeAdResponse(),this.isEligibleForBespokeAd=yield fe.i.getBespokeAdEligibilityAync(),this.isEligibleForBespokeAd&&(this.bespokeAdPayload=fe.i.getBespokeAdPayload(),this.screenWidth=this.bespokeAdPayload.screenWidth,this.backgroundDataConnector=(0,L.K0)(u.z.BackgroundData),this.displayBespokeAd=!0,this.getBespokeAdTextStyleOverrides(),this.setColumnArrangementAttributes((0,ae.Bn)().currentColumnArrangement),(0,ae.Bn)().subscribe((e=>{this.setColumnArrangementAttributes(e),this.getBespokeAdGradientClassName(),this.updateProperties()})))),this.isTestRunning="1"===C.c.getQueryParameterByName("forceImageTest",(0,ie.zp)()),this.defineCurrentProvider(),this.createTelemetryTags(),d.J.updateLayout.registerObserver((()=>{this.syncWithStateChange()})),Z.V.updateNtpTheme.registerObserver((()=>{this.syncWithStateChange()})),p.I.layoutAnimationComplete.registerObserver((()=>{this.animationComplete()})),this.backgroundGalleryEligibility&&(T.f.backgroundDispositionUpdated.registerObserver((()=>{this.handleGalleryDispositionButtonClick()})),T.f.updateGallerySelectedBackground.registerObserver((()=>{this.handleGalleryBackgroundSelection()})),T.f.refreshBackgroundMetadata.registerObserver((()=>{this.handleBackgroundRefresh()})),(0,ue.Uo)(u.z.BackgroundData,(e=>{this.renderHotSpots=e.shouldRenderHotSpots}))),this.isFeedDisplayAlwaysOn="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting,addEventListener("resize",this.onResize),addEventListener("scroll",this.onScroll)}))}disconnectedCallback(){if(super.disconnectedCallback(),removeEventListener("resize",this.onResize),removeEventListener("scroll",this.onScroll),"Video"===this.currentProvider)window.removeEventListener("blur",this.onWindowBlur,!1),window.removeEventListener("focus",this.onWindowFocus,!1)}getExperienceType(){return l.x.backgroundImageWC}shadowDomPopulated(){(0,V.h_)(q._.headerSpaceHolder).then((e=>{var t;(t=this.syncWithStateChange,new ResizeObserver(t)).observe(e),this.calcMuseumBottom(),this.displayBespokeAd&&(this.calcBespokeAdTemplateBottom(),this.calcBespokeAdTemplateLeft(),(0,re.eC)().then((()=>{fe.i.sendBeacons(this.bespokeAdPayload.adViewedUrls)})))}))}checkAndGenerateVideoSchedule(){const e=this.getVideoData();e&&e.schedule?(this.schedule=e.schedule,this.scheduleFixed=e.scheduleFixed):(this.schedule=[-1,-1,-1,-1,-1,-1,-1],this.scheduleFixed=[-1,-1,-1,-1,-1,-1,-1]);for(let e=0;e<this.schedule.length;e++)if(-1==this.schedule[e]||this.schedule[e]>-1&&this.config.simpleImages.data.length-1<this.schedule[e]){const t=Math.floor(Math.random()*this.config.simpleImages.data.length);this.schedule[e]=t}this.scheduleFixed=this.schedule,this.storeVideoData({cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed})}getVideoData(){try{return(0,w.$o)().getObject(this.storageKey)}catch(e){return(0,K.H)(r.eEQ,"Local storage for video data failed."),null}}storeVideoData(e){try{(0,w.$o)().setObject(this.storageKey,e)}catch(e){return void(0,K.H)(r.ybt,"Local storage for video data failed.")}}checkMinimumWidthForGallery(){this.backgroundGalleryButtonEnabled=innerWidth>J.Gb}getThemeBackgroundColor(){var e,t;let i=null;const n=null===(t=null===(e=this.chromiumPageSettingsState)||void 0===e?void 0:e.ntpTheme)||void 0===t?void 0:t.backgroundColorRgba;if(!n||n.length<4)return null;const r={r:n[0],g:n[1],b:n[2],a:n[3]};return i=de.g.rgbNumberToCssHexColor(de.g.parsedColorToNumber(r)),i}setVideoSecondaryButtonTelemetry(e){!e||this.telemetryObject?this.secondaryButtonTelemetryTag=this.videoPlaying?this.telemetryObject.addOrUpdateChild({name:"Pause",behavior:x.wu.Pause,content:{headline:this.videoProvider.museumCard.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag():this.telemetryObject.addOrUpdateChild({name:"Play",behavior:x.wu.Play,content:{headline:this.videoProvider.museumCard.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag():(0,K.H)(r.CgS,"Telemetry object is undefined on Iris update")}handleGalleryBackgroundSelection(){const e=this.backgroundDataConnector.getCurrentState();if(!e)return;const t=this.currentProvider;switch(this.galleryBackgroundSelectionMetadata=e.backgroundSelectionMetadata,this.galleryBackgroundSelectionMetadata.provider){case"Video":this.currentProvider="Video";break;case"Iris":this.currentProvider="Iris";break;case"BrowserLocal":this.currentProvider="BrowserLocal";break;case"CMSImage":this.currentProvider="CMSImage"}this.videoProvider&&"Video"===this.currentProvider&&(this.videoProvider.isPlaying=!1),t===this.currentProvider&&(this.isLoadComplete=!1,this.updateProperties()),this.displayBespokeAd&&(this.displayBespokeAd=!1,this.backgroundDataConnector.bespokeAdDisplayStatusUpdated(!1))}handleBackgroundRefresh(){this.defineCurrentProvider(),"Video"===this.currentProvider&&(this.videoProvider.setVideoAndMuseumCardProperties(),this.videoProvider.isPlaying=!1,this.isLoadComplete=!1),this.updateProperties()}onClick_dislikeButton(){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.museumCard=Object.assign(Object.assign({},this.museumCard),{irisButtons:Object.assign(Object.assign({},this.museumCard.irisButtons),{dislikeClicked:!0})}),window.setTimeout((()=>{this.museumCard=Object.assign(Object.assign({},this.museumCard),{irisButtons:Object.assign(Object.assign({},this.museumCard.irisButtons),{dislikeClicked:!1,likeClicked:!1})})}),3e3),"Video"===this.currentProvider)this.videoProvider.removeVideoForToday(),this.currentProvider="Iris";else yield this.irisProvider.dislikeClickButtonHandler()}))}onClick_BespokeAdCTAButton(){return(0,n.mG)(this,void 0,void 0,(function*(){window.open(this.bespokeAdPayload.clickthroughUrl,"_blank").focus(),yield fe.i.sendBeacons(this.bespokeAdPayload.adClickedUrls)}))}onClick_dismissButton(){this.eventLocalStorage.dismissCreative(this.config.event.eventId,l.x.backgroundImageWC,this.currentEventCreative,r.LXY),this.defineCurrentProvider()}onClick_likeButton(){if(this.museumCard=Object.assign(Object.assign({},this.museumCard),{irisButtons:Object.assign(Object.assign({},this.museumCard.irisButtons),{likeClicked:!0})}),"Video"===this.currentProvider);else this.irisProvider.likeClickButtonHandler()}getStyleForElementKey(e){var t;return null===(t=(0,V.b_)(e))||void 0===t?void 0:t.style}setColumnArrangementAttributes(e){switch(this.currentColumnArrangement=e,e){case"c5":this.bespokeAdStyleOverride=`width: ${this.screenWidth}px; left: 50%; margin-left: -${this.screenWidth/2}px;`;break;case"c4":this.bespokeAdStyleOverride=`width: ${ce.sc+20}px; left: 50%; margin-left: -${(ce.sc+20)/2}px;`;break;case"c3":this.bespokeAdStyleOverride=`width: ${ce.xX+20}px; left: 50%; margin-left: -${(ce.xX+20)/2}px;`;break;case"c2":this.bespokeAdStyleOverride=`width: ${ce.Xn+20}px; left: 50%; margin-left: -${(ce.Xn+20)/2}px;`;break;case"c1":this.bespokeAdStyleOverride=`width: ${ce._3+20}px; left: 50%; margin-left: -${(ce._3+20)/2}px;`}}getBespokeAdGradientClassName(){if(!this.config.bespokeAds||!this.isEligibleForBespokeAd)return"";if(this.currentColumnArrangement<"c3")return"bespokeAdOverlayGradient";switch(this.config.bespokeAds.gradientType){case"whiteGradient":return"overlayGradientWhiteGradient";case"lightGradient":return"overlayGradientLightBespokeAd";case"mediumGradient":return"overlayGradientMediumBespokeAd";case"darkGradient":return"overlayGradientDarkBespokeAd";default:return""}}getBespokeAdTextStyleOverrides(){this.bespokeAdTextStyleOverrides="",this.config.bespokeAds.textColorOverride&&(this.bespokeAdTextStyleOverrides+=`color: ${this.config.bespokeAds.textColorOverride};`)}getBespokeAdImageUrl(){var e,t,i;return this.config.bespokeAds.useCmsLogo||!(null===(e=this.bespokeAdPayload)||void 0===e?void 0:e.imageUrl)?null===(t=this.config.bespokeAds)||void 0===t?void 0:t.logoUrl:null===(i=this.bespokeAdPayload)||void 0===i?void 0:i.imageUrl}adjustBespokeAdGradient(e,t){const i=(0,ae.Bn)().currentColumnArrangement;!e||!t||i<"c3"||requestAnimationFrame((()=>{setTimeout((()=>{const t=(0,V.b_)(q._.searchBox),i=(0,V.b_)(q._.topSites);if(!t||!i)return;const n=this.getBottomElement(e.selectedQuickLinksDisplaySetting,t,i),r=n&&n.getBoundingClientRect();r&&(this.bespokeAdTopGradientHeight=r.bottom+20||0)}),100)}))}calcBespokeAdGradientAttributesOnScroll(){var e,t;const i=(0,V.b_)(q._.searchBox),n=(0,V.b_)(q._.topSites);if(!i||!n)return;const r=(0,me.Nu)("top");if(!r)return;if(r<scrollY)return void(this.bespokeAdTopGradientOpacity="0");this.bespokeAdTopGradientOpacity="0.54";if(this.getBottomElement(this.chromiumPageSettingsState.selectedQuickLinksDisplaySetting,i,n)===i)return;const o=(null===(e=i.getBoundingClientRect())||void 0===e?void 0:e.bottom)||this.bespokeAdTopGradientHeight,s=(null===(t=n.getBoundingClientRect())||void 0===t?void 0:t.bottom)||this.bespokeAdTopGradientHeight;this.bespokeAdTopGradientHeight=Math.max(o+20,s+20)}getBottomElement(e,t,i){switch(e){case a.Z3.off:return t;case a.Z3.onerow:case a.Z3.tworows:return i;case a.Z3.top:return t;default:return i}}}(0,n.gn)([z.LO],ye.prototype,"currentProvider",void 0),(0,n.gn)([z.LO],ye.prototype,"hotSpots",void 0),(0,n.gn)([z.LO],ye.prototype,"imageInformationalStyles",void 0),(0,n.gn)([z.LO],ye.prototype,"imageOverrideStyles",void 0),(0,n.gn)([z.LO],ye.prototype,"imageSource",void 0),(0,n.gn)([z.LO],ye.prototype,"isReducedMotionActive",void 0),(0,n.gn)([z.LO],ye.prototype,"isLoadComplete",void 0),(0,n.gn)([z.LO],ye.prototype,"museumBottom",void 0),(0,n.gn)([z.LO],ye.prototype,"museumCard",void 0),(0,n.gn)([z.LO],ye.prototype,"museumCreditsCardIsShown",void 0),(0,n.gn)([z.LO],ye.prototype,"showToast",void 0),(0,n.gn)([z.LO],ye.prototype,"telemetryTags",void 0),(0,n.gn)([z.LO],ye.prototype,"toastMessage",void 0),(0,n.gn)([(0,G.Lj)({mode:"boolean"})],ye.prototype,"translucentFeedEnabled",void 0),(0,n.gn)([z.LO],ye.prototype,"videoPlaying",void 0),(0,n.gn)([z.LO],ye.prototype,"videoSource",void 0),(0,n.gn)([(0,G.Lj)({mode:"boolean"})],ye.prototype,"windowsBlurOpacity",void 0),(0,n.gn)([(0,G.Lj)({mode:"boolean"})],ye.prototype,"wholePageTranslucentFeed",void 0),(0,n.gn)([z.LO],ye.prototype,"secondaryButtonTelemetryTag",void 0),(0,n.gn)([z.LO],ye.prototype,"imageEditButtonTelemetryTag",void 0),(0,n.gn)([z.LO],ye.prototype,"renderHotSpots",void 0),(0,n.gn)([z.LO],ye.prototype,"backgroundGalleryButtonEnabled",void 0),(0,n.gn)([z.LO],ye.prototype,"bespokeAdCTATemplateBottom",void 0),(0,n.gn)([z.LO],ye.prototype,"bespokeAdStyleOverride",void 0),(0,n.gn)([z.LO],ye.prototype,"currentColumnArrangement",void 0),(0,n.gn)([z.LO],ye.prototype,"bespokeAdObjectFitStyle",void 0),(0,n.gn)([z.LO],ye.prototype,"bespokeAdTopGradientHeight",void 0),(0,n.gn)([z.LO],ye.prototype,"bespokeAdOpacity",void 0),(0,n.gn)([z.LO],ye.prototype,"bespokeAdTopGradientOpacity",void 0),(0,n.gn)([z.LO],ye.prototype,"bespokeAdCTATemplateLeft",void 0);var be=i(49218),Se=i(41472),Ce=i(93703),we=i(89150),Te=i(34550),ke=i(545),Ae=i(56618),Ie=i.n(Ae),Pe=i(41990),Ee=i.n(Pe),Oe=i(14289),Me=i.n(Oe),xe=i(13622),De=i.n(xe),Re=i(6014),Le=i.n(Re),Fe=i(7143),Ne=i.n(Fe),Be=i(57757),je=i(93638),$e=i.n(je),Ue=i(56246),He=i.n(Ue);Be.Z;const _e=be.dy`<p class="irisResponse">${e=>e.strings.irisResponse}</p>`,We=be.dy`<img class="picture ${e=>e.displayBespokeAd?"bespokeAd":""}" id="backgroundImagePicture" src=${e=>e.imageSource} style=${e=>e.imageOverrideStyles+e.imageInformationalStyles+e.bespokeAdStyleOverride} @load=${e=>e.loadComplete()} @error=${e=>e.error(e.imageSource)}></img>`,ze=be.dy`<div class="museumButtonContainer" ${(0,Se.i)("ref_museumButtonContainer")}><fluent-button appearance="stealth" class="irisButton" data-t="${e=>e.telemetryTags&&e.telemetryTags.dismissButton}" id="like" @click="${e=>e.onClick_dismissButton()}"><span slot="start">${be.dy.partial(Ie())}</span><div class="irisButtonTitle">${e=>e.strings.dismissTitle}</div></fluent-button></div>`,Ge=be.dy`<div class="museumButtonContainer" ${(0,Se.i)("ref_museumButtonContainer")}><fluent-button appearance="stealth" class="irisButton" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.likeButton}}" id="like" @click="${e=>e.onClick_likeButton()}"><span slot="start">${be.dy.partial(Me())}</span><div><div class="irisButtonTitle">${e=>e.strings.irisLikeTitle}</div><div class="irisButtonSubtitle">${e=>e.strings.irisLikeSubTitle}</div></div></fluent-button><fluent-button appearance="stealth" class="irisButton" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.dislikeButton}}" id="dislike" @click="${e=>e.onClick_dislikeButton()}"><span slot="start">${be.dy.partial(Ee())}</span><div class="irisButtonTitle">${e=>e.strings.irisDislikeTitle}</div><div class="irisButtonSubtitle">${e=>e.strings.irisDislikeSubTitle}</div></fluent-button></div>`,Ve=be.dy`<div class="backgroundGalleryButtonContainer"><fluent-button appearance="outline" class="backgroundGalleryButton" @click=${e=>e.onClick_openGalleryButton()} @focusout=${e=>e.onFocusLeave_backgroundGalleryButton()} title="${e=>e.backgroundGalleryButtonEnabled?e.strings.backgroundGalleryButtonText:e.strings.backgroundGalleryBelowMinimumWidthTooltip}" ?disabled=${e=>!e.backgroundGalleryButtonEnabled} data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.backgroundGalleryButton}}" ${(0,Se.i)("ref_backgroundGalleryButton")}><span class="backgroundGalleryButtonText">${e=>e.strings.backgroundGalleryButtonText}</span></fluent-button></div>`,qe=be.dy`<div class="museumCardCreditsContainer" ${(0,Se.i)("ref_museumCreditsContainer")}><div class="museumCardTitleContainer">${(0,Ce.g)((e=>e.museumCard.titleURL),be.dy`<a class="museumCardTitle museumCardTitleAnchor" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.cardTitle}}" href="${e=>e.museumCard.titleURL}" target="_blank">${e=>e.museumCard.title}</a>`)} ${(0,Ce.g)((e=>!e.museumCard.titleURL),be.dy`<p class="museumCardTitle">${e=>e.museumCard.title}</p>`)}<p class="museumCardCredits ${e=>e.backgroundGalleryEligibility&&"Event"!==e.currentProvider?"backgroundGallery":""}">${e=>e.museumCard.credits}</p></div>${(0,Ce.g)((e=>!e.backgroundGalleryEligibility||"Event"===e.currentProvider),be.dy`<div class="museumCardDivider"></div>${(0,Ce.g)((e=>"Event"!==e.currentProvider&&!e.museumCard.irisButtons.likeClicked&&!e.museumCard.irisButtons.dislikeClicked),Ge)} ${(0,Ce.g)((e=>"Event"!==e.currentProvider&&e.museumCard.irisButtons.likeClicked||e.museumCard.irisButtons.dislikeClicked),_e)} ${(0,Ce.g)((e=>"Event"===e.currentProvider),ze)}</div>`)} ${(0,Ce.g)((e=>e.backgroundGalleryEligibility&&"Event"!==e.currentProvider),be.dy`<div class="copyrightContainer">${e=>` ${e.strings.copyrightText}`}</div>${Ve} `)}
`,Ze=be.dy`<fluent-button class="backgroundButton ${e=>e.museumCreditsCardIsShown?"backgroundButton_active":""}" data-t="${e=>e.imageEditButtonTelemetryTag}" id="imageEditButton" @click="${e=>e.onClick_imageEditButton()}" title="${e=>e.backgroundGalleryButtonEnabled?e.strings.backgroundGalleryButtonText:e.strings.backgroundGalleryBelowMinimumWidthTooltip}" aria-label="${e=>e.strings.backgroundGalleryButtonText}"><span slot="start">${be.dy.partial(De())}</span></fluent-button>`,Ke=be.dy`<fluent-button appearance=${e=>"Event"===e.currentProvider?"hypertext":"neutral"} class="backgroundButton ${e=>e.museumCreditsCardIsShown?"backgroundButton_active":""}" data-t="${e=>e.secondaryButtonTelemetryTag}" id="secondaryButton" href=${e=>"Event"===e.currentProvider?e.config.event.imageData[e.currentEventCreative].secondaryButton.href:""} @click="${e=>e.onClick_secondaryButton()}" title="${e=>e.videoPlaying?e.strings.video_pause:e.strings.video_play}" aria-label="${e=>e.videoPlaying?e.strings.video_pause:e.strings.video_play}">${(0,Ce.g)((e=>"Video"===e.currentProvider),be.dy` ${(0,Ce.g)((e=>e.videoPlaying),be.dy`<span slot="start">${be.dy.partial($e())}</span>`)} ${(0,Ce.g)((e=>!e.videoPlaying),be.dy`<span slot="start">${be.dy.partial(He())}</span>`)} `)} ${(0,Ce.g)((e=>"Event"===e.currentProvider),be.dy`<a href=${e=>e.config.event.imageData[e.currentEventCreative].secondaryButton.href} class="backgroundButtonText secondaryButtonAnchor">${(0,Ce.g)((e=>"Event"===e.currentProvider),be.dy` ${e=>e.config.event.useCommonIdForLocString?e.strings.events[e.config.event.eventId+"Button"]:e.strings.events[e.config.event.imageData[e.currentEventCreative].secondaryButton.id]} `)}</a>`)}</fluent-button>`,Qe=be.dy` ${(0,Ce.g)((e=>e.museumCreditsCardIsShown),qe)}<fluent-button class="backgroundButton ${e=>e.museumCreditsCardIsShown?"backgroundButton_active":""}" data-t="${e=>{var t,i;return e.museumCreditsCardIsShown?null===(i=e.telemetryTags)||void 0===i?void 0:i.title_cardShown:null===(t=e.telemetryTags)||void 0===t?void 0:t.title_cardHidden}}" id="museumCardButton" @click="${e=>e.toggleMuseumCardOpen()}" @focusout=${e=>e.onFocusLeave_museumCardButton()} @mouseenter="${e=>e.onMouseEnter_museumCard()}" @mouseleave="${e=>e.onMouseLeave_museumCard()}" title="${e=>e.museumCreditsCardIsShown?e.strings.museumCardExpanded:e.strings.museumCardCollapsed}" aria-label="${e=>e.museumCreditsCardIsShown?e.strings.museumCardExpanded:e.strings.museumCardCollapsed}" aria-expanded="${e=>e.museumCreditsCardIsShown}" ${(0,Se.i)("ref_museumCardButton")}>${e=>e.museumCreditsCardIsShown?be.dy`<span slot="start">${be.dy.partial(Ne())}</span>`:be.dy`<span slot="start">${be.dy.partial(Le())}</span>`}</fluent-button>`,Je=be.dy`<div class="museumCard" style="${e=>`bottom:${e.museumBottom}px`}" ${(0,Se.i)("ref_museumCardContainer")}>${Qe} ${(0,Ce.g)((e=>e.backgroundGalleryButtonEnabled),Ze)} ${(0,Ce.g)((e=>{var t;return"Video"===e.currentProvider||"Event"===e.currentProvider&&(null===(t=e.config.event)||void 0===t?void 0:t.imageData[e.currentEventCreative].secondaryButton)}),Ke)}</div>`,Xe=be.dy`<fluent-button class="backgroundButton opaqueOnRest" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.bespokeAdDismissButton}}" id="bespokeAdDismissButton" @click="${e=>e.onClick_bespokeAdDismissButton()}" title="${e=>e.strings.dismissBespokeAdText}" aria-label="${e=>e.strings.dismissBespokeAdText}" ${(0,Se.i)("ref_bespokeAdDismissButton")}><span slot="start">${be.dy.partial(ke.Z)}</span><p class="backgroundButtonText">${e=>e.strings.dismissBespokeAdText}</p></fluent-button>`,Ye=be.dy`<div class="bespokeAdDismissButtonContainer" style="${e=>`bottom:${e.museumBottom}px`}">${Xe}</div>`,et=be.dy` ${(0,Ce.g)((e=>e.windowsBlurOpacity),be.dy`<span class="windowsBlur"></span>`)}<span class="${e=>e.config&&(e.config.removeOverlayGradient||e.displayBespokeAd)?"":"overlayGradient "}${e=>e.wholePageTranslucentFeed?"overlayTranslucent":"overlay"} ${e=>e.museumCreditsCardIsShown||"Theme"===e.currentProvider&&!e.wholePageTranslucentFeed?"overlay_hide":""} ${e=>e.getBespokeAdGradientClassName()}" data-mscc-ic="false" id="backgroundImageOverlay" ${(0,Se.i)("ref_backgroundOverlay")}></span>`,tt=be.dy`<span class="bespokeAdTopSitesOverlay" data-mscc-ic="false" id="bespokeAdTopSitesOverlay" ${(0,Se.i)("ref_bespokeAdTopSitesOverlay")} style="${e=>`height:${e.bespokeAdTopGradientHeight}px;`} ${e=>`opacity:${e.bespokeAdTopGradientOpacity};`}"></span>`,it=be.dy`<div id="bspk-ad-cta-container" class="bespokeAdInfoAndCTAContainer" style="${e=>`bottom:${e.bespokeAdCTATemplateBottom}px;`} ${e=>`opacity:${e.bespokeAdOpacity};`} ${e=>`left:${e.bespokeAdCTATemplateLeft};`}" ${(0,Se.i)("ref_bespokeAdInfoAndCTAContainer")}>${(0,Ce.g)((e=>{var t,i;return(null===(t=e.config.bespokeAds)||void 0===t?void 0:t.localizedStringKey)&&e.strings.bespokeAds[(null===(i=e.config.bespokeAds)||void 0===i?void 0:i.localizedStringKey)+"_iconAsText"]}),be.dy`<span class="bespokeAdImageAsTextContainer" title="${e=>e.strings.bespokeAds[e.config.bespokeAds.localizedStringKey+"_iconAsText"]}" aria-label="${e=>e.strings.bespokeAds[e.config.bespokeAds.localizedStringKey+"_iconAsText"]}">${e=>e.strings.bespokeAds[e.config.bespokeAds.localizedStringKey+"_iconAsText"]}</span>`)} ${(0,Ce.g)((e=>!e.config.bespokeAds.localizedStringKey),be.dy`<span class="bespokeAdImageContainer ${e=>{var t,i;return null===(i=null===(t=e.config)||void 0===t?void 0:t.bespokeAds)||void 0===i?void 0:i.stylingClassName}}"><img alt="" class="bespokeAdImage ${e=>{var t,i;return null===(i=null===(t=e.config)||void 0===t?void 0:t.bespokeAds)||void 0===i?void 0:i.stylingClassName}}" src="${e=>e.getBespokeAdImageUrl()}"></span>`)}<span class="bespokeAdInformationContainer" title="${e=>e.bespokeAdPayload.title}" aria-label="${e=>e.bespokeAdPayload.title}" style=${e=>e.bespokeAdTextStyleOverrides}>${e=>e.bespokeAdPayload.title}</span><div class="bespokeAdCTAButtonContainer"><fluent-button appearance="accent" class="bespokeAdCTAButton ${e=>{var t,i;return null===(i=null===(t=e.config)||void 0===t?void 0:t.bespokeAds)||void 0===i?void 0:i.stylingClassName}}" @click=${e=>e.onClick_BespokeAdCTAButton()} style="${e=>{var t,i;return(null===(t=e.config.bespokeAds)||void 0===t?void 0:t.ctaButtonColor)?`background:${null===(i=e.config.bespokeAds)||void 0===i?void 0:i.ctaButtonColor};`:""}}" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.bespokeAdCTAButton}}" title="${e=>{var t;return e.strings.bespokeAds[(null===(t=e.config.bespokeAds)||void 0===t?void 0:t.localizedStringKey)+"_ctaAccessibility"]||""}}" aria-label="${e=>{var t;return e.strings.bespokeAds[(null===(t=e.config.bespokeAds)||void 0===t?void 0:t.localizedStringKey)+"_ctaAccessibility"]||""}}"><span class="bespokeAdCTATextAndSVGContainer" style="${e=>{var t,i;return(null===(t=e.config.bespokeAds)||void 0===t?void 0:t.ctaButtonTextColor)?`color:${null===(i=e.config.bespokeAds)||void 0===i?void 0:i.ctaButtonTextColor};`:"color:white;"}}">${e=>{var t,i;return(null===(t=e.config.bespokeAds)||void 0===t?void 0:t.ctaButtonText)||(null===(i=e.strings.bespokeAds)||void 0===i?void 0:i.ctaFallbackText)}} ${be.dy.partial(Te.Z)}</span></fluent-button></div><div class="bespokeAdSlugContainer"><span class="bespokeAdSponsoredByText" style=${e=>e.bespokeAdTextStyleOverrides}>${(0,Ce.g)((e=>{var t;return null===(t=e.config.bespokeAds)||void 0===t?void 0:t.sponsoredText}),be.dy`${e=>{var t;return null===(t=e.config.bespokeAds)||void 0===t?void 0:t.sponsoredText}}`)} ${(0,Ce.g)((e=>{var t;return!(null===(t=e.config.bespokeAds)||void 0===t?void 0:t.sponsoredText)}),be.dy`${e=>{var t,i;return(null===(t=e.config.bespokeAds)||void 0===t?void 0:t.campaignName)&&e.strings.bespokeAds[(null===(i=e.config.bespokeAds)||void 0===i?void 0:i.localizedStringKey)+"_sponsorsedText"]||""}}`)}</span></div></div>`,nt=be.dy` ${We} ${et}
`,rt=be.dy` ${We} ${et}
`,ot=be.dy` ${We} ${et}
`,st=be.dy` ${We} ${et} ${(0,Ce.g)((e=>e.museumCard&&e.museumBottom>0),Je)}
`,at=be.dy` ${We} ${et} ${(0,Ce.g)((e=>e.currentColumnArrangement>="c3"),be.dy`${tt}`)} ${it} ${Ye}
`,ct=be.dy`<svg role="img" viewBox="${e=>e.icon.viewBoxString}" xmlns="http://www.w3.org/2000/svg"><path d="${e=>e.icon.svgString}" fill="#fff" /></svg>`,dt=be.dy`<svg role="img" viewBox="-3 -3 30 36" xmlns="http://www.w3.org/2000/svg"><path d="M11.9999 2C10.3241 2 8.94444 2.26211 7.97842 2.52663C7.49515 2.65896 7.11432 2.79217 6.8504 2.8942C6.71839 2.94523 6.61548 2.98852 6.54346 3.02007C6.50744 3.03585 6.47914 3.0487 6.45877 3.05813L6.43418 3.06965L6.4264 3.07336L6.42364 3.07469L6.42165 3.07566C6.04922 3.25696 5.89428 3.70585 6.07559 4.07828C6.25683 4.45058 6.7053 4.60563 7.07765 4.42462L7.08878 4.41941C7.10006 4.41419 7.11901 4.40556 7.14541 4.39399C7.19821 4.37086 7.28075 4.33602 7.39125 4.2933C7.61235 4.20783 7.94481 4.09104 8.37456 3.97337C9.23458 3.73789 10.4799 3.5 11.9999 3.5C13.5199 3.5 14.7653 3.73789 15.6253 3.97337C16.055 4.09104 16.3875 4.20783 16.6086 4.2933C16.7191 4.33602 16.8016 4.37086 16.8544 4.39399C16.8808 4.40556 16.8998 4.41419 16.9111 4.41941L16.9225 4.42478C17.2948 4.60539 17.7431 4.45041 17.9243 4.07828C18.1853 3.44362 17.5773 3.07522 17.5773 3.07522L17.5762 3.07469L17.5734 3.07336L17.5657 3.06965L17.5411 3.05813C17.5207 3.0487 17.4924 3.03585 17.4564 3.02007C17.3844 2.98852 17.2815 2.94523 17.1494 2.8942C16.8855 2.79217 16.5047 2.65896 16.0214 2.52663C15.0554 2.26211 13.6757 2 11.9999 2Z" fill="#fff" /><path d="M7.25 7C6.00736 7 5 8.00736 5 9.25V14.75C5 15.9926 6.00736 17 7.25 17H12.75C13.9926 17 15 15.9926 15 14.75V14.4635L17.9146 15.9208C18.1471 16.0371 18.4232 16.0246 18.6443 15.888C18.8654 15.7513 19 15.5099 19 15.25V8.75C19 8.49007 18.8654 8.24867 18.6443 8.11201C18.4232 7.97536 18.1471 7.96293 17.9146 8.07918L15 9.53648V9.25C15 8.00736 13.9926 7 12.75 7H7.25ZM15 11.2135L17.5 9.96353V14.0365L15 12.7865V11.2135ZM13.5 9.25V14.75C13.5 15.1642 13.1642 15.5 12.75 15.5H7.25C6.83579 15.5 6.5 15.1642 6.5 14.75V9.25C6.5 8.83579 6.83579 8.5 7.25 8.5H12.75C13.1642 8.5 13.5 8.83579 13.5 9.25Z" fill="#fff" /><path d="M6.41779 20.9225L6.4206 20.9239L6.42843 20.9277L6.45291 20.9394C6.47312 20.949 6.50109 20.9619 6.53664 20.9778C6.60773 21.0095 6.70917 21.0528 6.8395 21.1039C7.10008 21.2061 7.47658 21.3392 7.95712 21.4714C8.91801 21.7359 10.2974 21.9976 11.9988 22C13.7014 22.0025 15.0818 21.7406 16.0435 21.4747C16.5244 21.3417 16.9013 21.2075 17.1621 21.1045C17.2926 21.053 17.3941 21.0092 17.4653 20.9772C17.5009 20.9611 17.529 20.9481 17.5492 20.9384L17.5738 20.9266L17.5816 20.9227L17.5845 20.9213L17.5856 20.9207C17.5856 20.9207 18.2406 20.5515 17.9201 19.9134C17.7342 19.5434 17.2837 19.394 16.9136 19.5796L16.904 19.5842C16.8934 19.5893 16.8753 19.5978 16.8499 19.6092C16.799 19.6321 16.7189 19.6668 16.6111 19.7094C16.3954 19.7946 16.0691 19.9113 15.6438 20.0289C14.7929 20.2642 13.5484 20.5023 12.001 20.5C10.4523 20.4978 9.20677 20.2596 8.35515 20.0252C7.92945 19.908 7.60282 19.792 7.38684 19.7074C7.27888 19.665 7.19869 19.6306 7.14771 19.6079C7.12222 19.5965 7.10405 19.5881 7.09337 19.583L7.08365 19.5784C6.7129 19.3942 6.26293 19.5452 6.07845 19.9159C5.89587 20.2827 6.05097 20.7407 6.41779 20.9225Z" fill="#fff" /></svg>`,lt=be.dy`<div class="hotSpotRenderRegion" id = "hotspots" style="margin-top:${e=>e.styles.marginTop}; margin-left:${e=>e.styles.marginLeft}; margin-right:${e=>e.styles.marginRight}; height:${e=>e.styles.height}; width:${e=>e.styles.width};"><div class="hotSpot" data-t="${e=>e.telemetryTags}" style="left: ${e=>e.styles.widthOffset}; top: ${e=>e.styles.heightOffset};" @mouseenter="${(e,t)=>null==e?void 0:e.onMouseEnterHandler(null==t?void 0:t.event)}"><a class="hotSpot hotSpotAccess" href="${e=>e.data.cta}" target="_blank" @click="${(e,t)=>e.onClickHandler&&e.onClickHandler(e.data,t)}"><div class="hotSpotSpot hotSpotClickable">${e=>""===e.icon.svgString?dt:ct}</div><div class="hotSpotTextArea hotSpotClickable">${e=>e.data.title}<div class="hotSpotSubTextArea">${e=>e.data.text}</div></div></a></div></div>`,ut=be.dy` ${We} ${et} ${(0,Ce.g)((e=>e.museumCard&&e.museumBottom>0),Je)} ${(0,Ce.g)((e=>!e.museumCreditsCardIsShown&&e.renderHotSpots),be.dy`<div class="hotSpotContainer" ${(0,Se.i)("ref_hotSpotsContainer")}>${(0,we.rx)((e=>e.hotSpots),lt)}</div>`)}`,pt=be.dy` ${We} ${et}
`,gt=be.dy`<msn-toast class="toast" style="${e=>`bottom:${e.museumBottom}px`}">${e=>e.toastMessage}</msn-toast>`,ht=be.dy`<video class="video" loop muted src="${e=>e.videoSource}" poster="${e=>e.imageSource}" style=${e=>e.imageInformationalStyles} @canplaythrough=${e=>e.playVideo()} @error=${e=>e.error(e.videoSource)} ${(0,Se.i)("ref_video")}></video>`,mt=be.dy` ${(0,Ce.g)((e=>e.imageSource||e.videoSource),be.dy` ${ht} ${et} ${(0,Ce.g)((e=>e.museumCard&&e.museumBottom>0),Je)} ${(0,Ce.g)((e=>e.showToast),gt)} `)}
`,ft=be.dy` ${We} ${et} ${(0,Ce.g)((e=>e.museumCard&&e.museumBottom>0),Je)}
`,vt=be.dy`<template><div class="backgroundImage" id="backgroundImage">${e=>{switch(e.currentProvider){case"BrowserLocal":return nt;case"FREBackground":return ot;case"Event":return st;case"Iris":return ut;case"NoBackground":return null;case"Theme":return pt;case"Video":return mt;case"CMSImage":return ft;case"BespokeAd":return at;default:return rt}}}</div></template>`;var yt=i(14989),bt=i(22674),St=i(78923),Ct=i(29717);const wt=St.i` .backgroundButton{float:right}.backgroundGalleryButtonContainer{padding-left:12px}.bespokeAdDismissButtonContainer{left:initial;right:12px}.bespokeAdSponsoredTextContainer{right:initial;left:12px}.copyrightContainer{padding-left:12px}.museumCard{left:initial;right:12px}.secondaryButton{float:right;margin-right:8px}`,Tt=St.i` .backgroundButton{float:left}.backgroundGalleryButtonContainer{padding-right:12px}.bespokeAdDismissButtonContainer{left:initial;right:12px}.bespokeAdSponsoredTextContainer{right:12px;left:initial}.copyrightContainer{padding-right:12px}.museumCard{left:12px;right:initial}.secondaryButton{float:left;margin-left:8px}`,kt=St.i` .windowsBlur{background:rgba(0,0,0,.5)}`,At=St.i` .backgroundButton{background:transparent;border-radius:12px;border:none;color:white;cursor:pointer;display:inline-block;font-size:12px;height:24px;overflow:hidden;white-space:nowrap;fill:currentColor}.backgroundButton.opaqueOnRest{background:rgba(0,0,0,0.54)}.backgroundButton svg{display:flex}.backgroundButton:hover{background:rgba(0,0,0,.6)}.backgroundButton span[slot="start"]{margin-inline:0px}.backgroundButton::part(control){padding:0 8px}.backgroundButton_active{background:rgba(0,0,0,.6)}.backgroundButton_active:hover{background:rgba(0,0,0,.9)}.backgroundButtonText{font-size:12px;margin-inline-start:8px;padding:0}.backgroundGalleryButtonContainer{padding-bottom:4px;width:362px}.backgroundGalleryButtonText{color:white}.bespokeAdDismissButtonContainer,.bespokeAdSponsoredTextContainer{position:absolute}.bespokeAdCTATextAndSVGContainer > svg{height:16px;width:16px;transform:translateY(1px)}.bespokeAdImage.bingCodex,.bespokeAdImageContainer.bingCodex{width:202px;height:80px}.bespokeAdImage.grammarly,.bespokeAdImageContainer.grammarly{width:314px;height:43px}.bespokeAdImage{object-fit:cover}.bespokeAdImageAsTextContainer{color:white;font-size:38px;font-weight:600;max-width:350px}.bespokeAdInfoAndCTAContainer{position:absolute;display:grid;transition:opacity 0.3s ease-in-out 0s;width:max-content}.bespokeAdInformationContainer{color:white;font-size:28px;font-weight:600;max-width:387px;padding-bottom:24px;padding-top:8px}.bespokeAdSponsoredByText{color:white;font-size:16px}.bespokeAdSlugContainer{padding-top:16px}.bespokeAdTopSitesOverlay{background:black;position:absolute;transition:opacity 0.3s ease-out 0s;width:100%}.copyrightContainer{color:rgba(255,255,255,0.54);padding-bottom:10px}fluent-button.backgroundGalleryButton::part(control){border-radius:16px}fluent-button.bespokeAdCTAButton{border-radius:50px;box-shadow:-4px 4px 8px rgba(0,0,0,0.3);display:inline-block;height:48px}fluent-button.bespokeAdCTAButton::part(content){font-size:20px;font-weight:600}fluent-button.bespokeAdCTAButton::part(control){padding-left:22px;padding-right:16px}fluent-button.bespokeAdCTAButton.bingCodex::part(control){background:#174AE4}fluent-button.bespokeAdCTAButton.bingCodex::part(control):hover{background:#0A36BD}fluent-button.bespokeAdCTAButton.bingCodex::part(control):active{background:#0F3299}fluent-button.bespokeAdCTAButton.grammarly::part(control){background:#018374}fluent-button.bespokeAdCTAButton.grammarly::part(control):hover{background:#0B6F67}fluent-button.bespokeAdCTAButton.grammarly::part(control):active{background:#014C43}.white-icon svg{fill:white}.backgroundImage{height:100%;width:100%}.hotSpot{height:max-content;position:absolute;width:max-content;z-index:290}.hotSpotAccess{animation-fill-mode:forwards;animation:"backgroundFadeInAnimation 0.5s linear";cursor:default;display:flex;text-decoration:none;z-index:292}.hotSpotClickable{cursor:pointer !important}.hotSpotContainer{opacity:1;transition:opacity 0.2s}.hotSpotContainer_hide{opacity:0;transition:opacity 0.2s}.hotSpotRenderRegion{opacity:1;position:absolute}.hotSpotSpot{background-color:rgba(0,0,0,0.64);border-radius:16px;cursor:default;height:32px;margin-inline-end:8px;width:32px}.hotSpotSubTextArea{color:rgba(255,255,255,0.74);font-size:12px;line-height:16px;opacity:0}.hotSpotSubTextArea:hover{opacity:1}.hotSpotTextArea{border-radius:4px;color:#FFFFFF;font-size:14px;line-height:20px;max-width:256px;padding:4px 12px 10px 12px}.hotSpotTextArea:hover{background-color:rgba(0,0,0,0.64);cursor:pointer;z-index:292}.hotSpotTextArea:hover .hotSpotSubTextArea{opacity:1}.irisButton{background:none;border:none;color:#fff;cursor:pointer;height:auto;width:100%;fill:currentColor}.irisButton:hover{background:rgba(0,0,0,.9)}.irisButton::part(control){align-items:flex-start;justify-content:unset;padding:10px 15px}.irisButtonTitle{font-size:14px;line-height:16px;margin-bottom:4px;text-align:start;user-select:none;width:100%}.irisButtonSubtitle{color:rgba(255,255,255,0.54);font-size:12px;line-height:14px;text-align:start;user-select:none;white-space:normal}.irisResponse{padding:0px 12px;user-select:none}.museumCard{color:#fff;opacity:1;position:absolute;transition:opacity 0.2s}.museumCard_hide{opacity:0;transition:opacity 0.2s}.museumCardCredits{color:rgba(255,255,255,0.54);font-size:13px;margin:10px 0px 16px 0px;user-select:none}.museumCardCredits.backgroundGallery{margin:10px 0px 12px 0px}.museumCardCreditsContainer{background:rgba(0,0,0,.77);border-bottom:1px solid transparent;border-radius:4px;font-family:inherit;font-size:12px;font-weight:400;margin-bottom:10px;max-width:384px;padding:8px 4px}.museumCardDivider{background-color:rgba(255,255,255,0.54);height:1px;margin:4px 12px;width:350px}.museumCardIcon{display:inline;fill:#fff;font-size:20px;height:14px;position:relative;top:1px;width:20px}.museumCardTextContainer{background:none;border:none;color:#fff;display:inline;height:auto;padding-left:12px;padding-right:12px;position:relative;text-decoration:none;width:auto}.museumCardTextContainer:hover,.irisButton:hover{cursor:pointer}.museumCardTitle{color:#fff;font-family:inherit;font-size:20px;font-weight:400;line-height:24px;margin:4px 0px;text-decoration:none;user-select:none}.museumCardTitleAnchor:hover{cursor:pointer;text-decoration:underline}.museumCardTitleContainer{padding:0px 12px}.overlayGradient{background-image:radial-gradient(rgba(0,0,0,0) 0%,rgba(0,0,0,0.5) 100%),radial-gradient(rgba(0,0,0,0) 33%,rgba(0,0,0,0.3) 166%)}.overlayGradientWhiteGradient{background-image:linear-gradient(89.98deg,rgba(255,255,255,0.9) 0.02%,rgba(255,255,255,0.54) 59.36%,rgba(255,255,255,0) 99.98%)}.overlayGradientMediumBespokeAd{background-image:linear-gradient(89.98deg,rgba(0,0,0,0.54) 0.02%,rgba(0,0,0,0.54) 59.36%,rgba(0,0,0,0) 99.98%);width:50% !important}.overlayGradientDarkBespokeAd{background-image:linear-gradient(89.98deg,rgba(0,0,0,0.9) 0.02%,rgba(0,0,0,0.532914) 59.37%,rgba(0,0,0,0) 99.98%);width:50% !important}.bespokeAdOverlayGradient{background:rgba(0,0,0,0.54)}.overlay{height:100%;opacity:1;position:absolute;top:0;transition:opacity 0.3s linear;width:100%}.overlayTranslucent{background:#00000052;height:100%;opacity:1;position:absolute;top:0;transition:opacity 0.3s linear;width:100%}.overlay_hide{opacity:0}.picture{background-position:center;background-repeat:no-repeat;background-size:cover;height:101%;margin:-1px 0px 0px -1px;object-fit:cover;padding:0;position:absolute;width:101%}.picture.bespokeAd{object-position:center bottom}.resizeFadeInAnimation{animation:opacityFadeInAnimation 0.5s ease-in-out;animation-fill-mode:forwards}.resizeFadeOutAnimation{animation:opacityFadeOutAnimation 0.02s linear;animation-fill-mode:forwards}.secondaryButtonAnchor{color:#fff;text-decoration:none}.secondaryButtonAnchor:hover{text-decoration:underline}.scrollFadeInAnimation{animation:opacityFadeInAnimation 0.5s ease-in-out;animation-fill-mode:forwards}.scrollFadeOutAnimation{animation:opacityFadeOutAnimation 0.5s ease-in-out;animation-fill-mode:forwards}.toast{bottom:32px;left:50%;position:fixed;transform:translate(-50%,0);width:fit-content;z-index:${String(o.K.Over)}}.video{height:100%;margin:0;object-fit:cover;padding:0;position:absolute;width:100%}.windowsBlur{background:rgba(255,255,255,.5);backdrop-filter:blur(3px);height:100%;position:absolute;width:100%;z-index:1}#backgroundImage{transition:opacity 0.3s}${(0,yt.vW)(null,yt.K$.c4)}{.bespokeAdImage.bingCodex,.bespokeAdImageContainer.bingCodex{width:151px;height:60px}.bespokeAdInformationContainer{font-size:24px}.overlayGradientDarkBespokeAd{width:960px !important}}${(0,yt.vW)(null,yt.K$.c3)}{.bespokeAdImage.bingCodex,.bespokeAdImageContainer.bingCodex{width:151px;height:60px}.bespokeAdInfoAndCTAContainer{left:174px}.overlayGradientDarkBespokeAd{width:742px !important}}${(0,yt.vW)(yt.K$.c1,yt.K$.c3)}{.bespokeAdInformationContainer{font-size:20px;max-width:300px;padding-bottom:16px;padding-top:8px}.bespokeAdSlugContainer{padding-top:8px}.bespokeAdCTATextAndSVGContainer > svg{height:12px;width:12px;transform:translateY(1px)}}${(0,yt.vW)(yt.K$.c1,yt.K$.c2)}{.bespokeAdImageContainer.bingCodex,.bespokeAdImage.bingCodex{height:40px;width:101px}.bespokeAdImageContainer.grammarly,.bespokeAdImage.grammarly{height:40px;width:292px}.bespokeAdCTAButtonContainer,.bespokeAdImageContainer,.bespokeAdSlugContainer{margin-left:auto;margin-right:auto}.bespokeAdInformationContainer{text-align:center}.bespokeAdImageAsTextContainer{font-size:24px;max-width:300px;text-align:center}.bespokeAdInfoAndCTAContainer{left:50%;transform:translateX(-50%)}fluent-button.bespokeAdCTAButton::part(control){padding-left:16px;padding-right:12px}fluent-button.bespokeAdCTAButton{height:36px}fluent-button.bespokeAdCTAButton::part(content){font-size:16px;font-weight:600}}`.withBehaviors(new bt.O(wt,Tt),(0,Ct.Uu)(kt)),It={experienceConfigSchema:undefined}},64218:function(e,t,i){"use strict";i.r(t),i.d(t,{CommonSearchBoxEdgeNext:function(){return I},CommonSearchBoxEdgeNextStyles:function(){return D},CommonSearchBoxEdgeNextTemplate:function(){return x},ToolingInfo:function(){return R}});var n=i(47691);var r=i(77615),o=i(33940),s=i(7009),a=i(53076),c=i(82890),d=i(83227),l=i(65135),u=i(970),p=i(84169),g=i(9533),h=i(81555),m=i(22704),f=i(19388),v=i(89696),y=i(33954),b=i(64193),S=i(33379),C=i(99452),w=i(65932),T=i(82423),k=i(4734),A=i(75384);class I extends b.T{constructor(){super(...arguments),this.enableSearchAutoSuggestion=!1,this.enableWarmBingUrl=!1,this.options=null,this.commonSearchBoxRef=null,this.voiceSearchButtonTelemetryTag="",this.openVoiceSearchDialog=!1,this.isVoiceSearchLoaded=!1,this.searchVisible=!0,this.placeholderText="",this.showMultiLineSearchBox=!1,this.showCodexBingPlaceHolder=!1,this.showBingLogo=!1,this.isDefaultSearchBing="0"!==(0,u.L)().get("dsp"),this.pcCode=(0,u.L)().get("PC")||(0,u.L)().get("pc")||"",this.handleFocusEvent=()=>{this.fakeFocused=!0,this.searchboxApiHandle&&this.searchboxApiHandle.startCapturingKeyStrokes()},this.handleMouseDownEvent=e=>{this.commonSearchBoxRef&&this.commonSearchBoxRef!==e.target&&this.fakeFocused&&(this.fakeFocused=!1,this.searchboxApiHandle&&this.searchboxApiHandle.stopCapturingKeyStrokes())},this.onInputStart=()=>{this.fakeFocused&&(this.fakeFocused=!1,this.searchVisible=!1)},this.onInputCancel=()=>{this.searchVisible=!0},this.onKeyCaptureChange=()=>{this.searchboxApiHandle&&(this.fakeFocused=this.searchboxApiHandle.isKeyCaptureEnabled)}}placeholderTextChanged(e,t){t!==e&&(this.options=this.options&&Object.assign(Object.assign({},this.options),{localizedStrings:Object.assign(Object.assign({},this.options.localizedStrings),{placeholderText:this.placeholderText})}))}experienceConnected(){var e,t,i;const n=null===(e=(0,T.K0)(a.z.ChromiumPageSettings))||void 0===e?void 0:e.getCurrentState();this.enableFocusRedirect=(null===(t=null==n?void 0:n.configData)||void 0===t?void 0:t.inPageSearchBoxType)===s.HT.redirect,this.isProjectEqual=null===(i=null==n?void 0:n.configData)||void 0===i?void 0:i.isEnrolledInProjectEqual,this.selectedFeedDisplaySetting=null==n?void 0:n.selectedFeedDisplaySetting;const r=window;r.chrome&&r.chrome.embeddedSearch&&(this.ntpApiHandle=r.chrome.embeddedSearch.newTabPage,this.searchboxApiHandle=r.chrome.embeddedSearch.searchBox),this.showMultiLineSearchBox=this.config&&!!this.config.enableMultiLineSearchBox&&this.config.enableMultiLineSearchBox&&!this.enableFocusRedirect&&(!this.config.limitMSBToNonDSE||!this.isDefaultSearchBing),this.showCodexBingPlaceHolder=this.showMultiLineSearchBox||this.config&&!!this.config.codexBingPlaceHolder&&this.config.codexBingPlaceHolder&&(this.isDefaultSearchBing||!this.enableFocusRedirect),this.showBingLogo=!this.isDefaultSearchBing&&!this.enableFocusRedirect,this.populateCommonSearchBoxOptions(),this.setTelemetryPersonalizationParam(),(0,S.N)()&&window.searchFormSubmitListener&&window.requestAnimationFrame((()=>{var e;(null===(e=this.commonSearchBoxRef)||void 0===e?void 0:e.formElement)&&this.commonSearchBoxRef.formElement.removeEventListener("submit",window.searchFormSubmitListener)}))}shadowDomPopulated(){if((0,S.N)()){const e=(0,m.Ou)(),t=e[f.nz+c.p.searchBox];this.markVisuallyReadyRaf(t&&void 0===e[c.p.isSSRAborted]?t:void 0)}else(0,v.hf)("SSR.SearchBoxRendered",(0,m.UE)());!this.config.enableClarity&&(0,p.Yq)().ClarityEnabled&&(this.options=this.options&&Object.assign(Object.assign({},this.options),{enableClarity:!0})),this.setPlaceholderText(),(0,g.FY)(h._.searchBox,this),this.commonSearchBoxRef&&this.commonSearchBoxRef.inputElement&&(0,g.FY)(h._.searchBoxInput,this.commonSearchBoxRef.inputElement);const e=this.commonSearchBoxRef&&this.commonSearchBoxRef.shadowRoot&&this.commonSearchBoxRef.shadowRoot.querySelector("#voice_srch_go");e&&(0,g.FY)(h._.searchBoxVoiceButton,e),this.enableFocusRedirect?this.registerFocusRedirectHandler():this.enableSearchAutoSuggestion=!0,Promise.all([(0,k.F_)(),(0,A.lr)()]).then((()=>{this.enableWarmBingUrl=!0})).catch((()=>{y.k.logError("Failed to wait for ATF visually ready and reveal")}))}getExperienceType(){return d.x.commonSearchBoxEdgeNext}setPlaceholderText(){var e;if(!this.config.localizedStrings)return;const{testBingPlaceholderText:t,placeholderText:i,tenantMissingEnterprisePlaceholderText:n,tenantAvailableEnterprisePlaceholderText:r}=this.config.localizedStrings;if(this.showMultiLineSearchBox||this.showCodexBingPlaceHolder)return void(this.placeholderText=t);if(!(0,p.Yq)().isAadAccountUser)return void(this.placeholderText=i);let o=!1;const s=null===(e=(0,T.K0)(a.z.AdminPortalData))||void 0===e?void 0:e.getCurrentState();s&&(o=!0,this.setEnterprisePlaceholderTextWithAdminSettings(s)),(0,w.Uo)(a.z.AdminPortalData,(e=>{o=!0,this.setEnterprisePlaceholderTextWithAdminSettings(e)})),o||(this.placeholderText=n)}setEnterprisePlaceholderTextWithAdminSettings(e){if(!this.config.localizedStrings)return;const{tenantMissingEnterprisePlaceholderText:t,tenantAvailableEnterprisePlaceholderText:i}=this.config.localizedStrings;if(this.placeholderText)return;if(!e.settingsDataRecieved)return;const{company:n,isMsbEnabled:r}=e.settings||{};this.placeholderText=r&&n?i.replace(/\{0\}/g,n):t}getFormParameters(){const e=Object.assign({},this.config.additionalFormParamMap);e.refig=l.M0.getRequestId();const{formCodes:t}=this.config;return e.form=this.isDefaultSearchBing?t.bingSearchEngine:t.nonBingSearchEngine,this.pcCode&&(e.pc=this.pcCode),e}populateCommonSearchBoxOptions(){var e;this.options=Object.assign(Object.assign({},this.config),{showMultiLineSearchBox:this.showMultiLineSearchBox,newsInASOnRest:(null===(e=this.config)||void 0===e?void 0:e.newsInASOnRest)&&"peek"===this.selectedFeedDisplaySetting,localizedStrings:Object.assign(Object.assign({},this.strings),{placeholderText:this.placeholderText,inputTitle:this.showMultiLineSearchBox?this.strings.testBingInputTitle:this.strings.inputTitle}),additionalFormParamMap:this.getFormParameters(),showVoiceSearchButton:this.config.showVoiceSearchButton&&this.isDefaultSearchBing,childExperienceReferencesWC:this.config.childExperienceReferencesWC?Object.assign(Object.assign({},this.config.childExperienceReferencesWC),{ImageSearchWC:this.isDefaultSearchBing?this.config.childExperienceReferencesWC.ImageSearchWC:null}):void 0})}registerFocusRedirectHandler(){this.ntpApiHandle&&(this.ntpApiHandle.oninputstart=this.onInputStart,this.ntpApiHandle.oninputcancel=this.onInputCancel,this.ntpApiHandle.isInputInProgress&&this.onInputStart()),this.searchboxApiHandle&&(this.searchboxApiHandle.onkeycapturechange=this.onKeyCaptureChange,this.fakeFocused=this.searchboxApiHandle.isKeyCaptureEnabled,this.searchboxApiHandle.isKeyCaptureEnabled&&this.searchboxApiHandle.startCapturingKeyStrokes()),this.commonSearchBoxRef&&this.commonSearchBoxRef.addEventListener("focus",this.handleFocusEvent),document.body.addEventListener("mousedown",this.handleMouseDownEvent)}setTelemetryPersonalizationParam(){const e={page:{has3PSearch:!this.isDefaultSearchBing,isSearchAB:this.enableFocusRedirect}};l.M0.updatePageMetadata(e)}}(0,o.gn)([C.LO],I.prototype,"enableSearchAutoSuggestion",void 0),(0,o.gn)([C.LO],I.prototype,"enableWarmBingUrl",void 0),(0,o.gn)([C.LO],I.prototype,"options",void 0),(0,o.gn)([C.LO],I.prototype,"openVoiceSearchDialog",void 0),(0,o.gn)([C.LO],I.prototype,"isVoiceSearchLoaded",void 0),(0,o.gn)([C.LO],I.prototype,"fakeFocused",void 0),(0,o.gn)([C.LO],I.prototype,"searchVisible",void 0),(0,o.gn)([C.LO],I.prototype,"placeholderText",void 0),(0,o.gn)([C.LO],I.prototype,"showMultiLineSearchBox",void 0),(0,o.gn)([C.LO],I.prototype,"showCodexBingPlaceHolder",void 0),(0,o.gn)([C.LO],I.prototype,"showBingLogo",void 0),(0,o.gn)([C.LO],I.prototype,"selectedFeedDisplaySetting",void 0);var P=i(49218),E=i(41472),O=i(93703);const M=P.dy`<span slot="search-options" class="bing-logo ${e=>e.showMultiLineSearchBox?"ml-bing-logo":"bing-logo-o"}"><img src=${"https://assets.msn.com/staticsb/statics/latest/icons/BingLogo.svg"}></span>`,x=P.dy`<cs-common-search-box ${(0,E.i)("commonSearchBoxRef")} :options=${e=>e.options} :enableAutoSuggestion=${e=>e.enableSearchAutoSuggestion} :enableWarmBingUrl=${e=>e.enableWarmBingUrl} :fakeFocused=${e=>e.fakeFocused} :disableSubmit=${e=>e.enableFocusRedirect} :searchVisible=${e=>e.searchVisible} exportparts="root, searchcore">${(0,O.g)((e=>{var t;return null===(t=e.config)||void 0===t?void 0:t.enableCodexBundlePrefetch}),P.dy`<div><iframe src="https://www.bing.com/wpt/prefetchcib" style="display: none;" /></div>`)} ${(0,O.g)((e=>e.showBingLogo),M)}</cs-common-search-box>`;const D=i(78923).i` .bing-logo-o{padding-inline-end:12px}.bing-logo > img{margin:12px 2px;height:22px;width:22px}.ml-bing-logo{padding-inline-end:8px;display:flex}`,R={experienceConfigSchema:undefined};n.il.define(r.s.registry)},89877:function(e,t,i){"use strict";i.r(t),i.d(t,{EdgeChromiumPageWC:function(){return _t},EdgeChromiumPageWCCommonTemplate:function(){return pi},EdgeChromiumPageWCStyles:function(){return wi},EdgeChromiumPageWCTemplate:function(){return gi},ToolingInfo:function(){return Ti}});var n=i(61803),r=i(33940),o=i(53076);const s=new Map([["en",["en-xl","en-ae","en-au","en-ca","en-gb","en-ie","en-in","en-my","en-nz","en-ph","en-sg","en-us","en-za"]],["ja",["ja-jp"]],["ko",["ko-kr"]],["ru",["ru-ru","ru-xl"]],["de",["de-de","de-ch","de-at"]],["fr",["fr-xl","fr-be","fr-ca","fr-ch","fr-fr"]],["es",["es-xl","es-us","es-mx","es-ar","es-cl","es-co","es-es"]],["it",["it-it"]],["pl",["pl-pl"]],["ar",["ar-eg","ar-sa","ar-ae"]],["sv",["sv-se"]],["nl",["nl-nl","nl-be"]],["tr",["tr-tr"]],["bn",["bn-in"]],["te",["te-in"]],["hi",["hi-in"]],["mr",["mr-in"]],["nb",["nb-no"]],["pt",["pt-pt","pt-br"]],["id",["id-id"]]]);var a=i(83227),c=i(12108),d=i(32506),l=i(82890);const u=new Set(["AD","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BW","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CO","CR","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GT","GU","GW","GY","HK","HN","HR","HT","HU","ID","IE","IM","IN","IO","IQ","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PR","PT","PW","PY","QA","RE","RO","RS","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW","EN-US","JA-JP","DE-DE"]);var p=i(64893),g=i(64434),h=i(17769),m=i(41115),f=i(65337),v=i(1334),y=i(84169),b=i(73252),S=i(36802),C=i(66588),w=i(31293),T=i(23401),k=i(970),A=i(32181),I=i(44979),P=i(89638),E=i(11326),O=i(91608),M=i(53899),x=i(35385),D=i(41691),R=i(7009),L=i(14989),F=i(88828),N=i(59294),B=i(87538),j=i(58958),$=i(73231),U=i(81555);const H="background",_="pivot",W="solidHeader",z=($.jX.Experience,$.dm.Small,$.M_.Opposite,$.ur.Below,"ntps"),G=204,V=176,q=64,Z=400,K=650,Q=900,J=[U._.signInButton,U._.rewardsIcon];var X=i(67462),Y=i(52144),ee=i(65135),te=i(19388),ie=i(26415),ne=i(22704),re=i(62325),oe=i(62676),se=i(59902),ae=i(59785),ce=i(17440),de=i(75192),le=i(34955),ue=i(84754),pe=i(11765),ge=i(58155);const he={NavResponseParsingFailed:"NavResponseParsingFailed",FeedResponseCachingFailed:"FeedResponseCachingFailed",FeedRequestURLGenerationFailed:"FeedRequestURLGenerationFailed",UserIDNotAvailableForFeedFetch:"UserIDNotAvailableForFeedFetch",FailedToReadNavResponseStream:"FailedToReadNavResponseStream",NavResponseHandlerFailed:"NavResponseHandlerFailed",NavResponseErrorHandlerReturnedFallback:"NavResponseErrorHandlerReturnedFallback",NavHandlerMarkersNotFound:"NavHandlerMarkersNotFound",UnhandledErrorInNavHandler:"UnhandledErrorInNavHandler",NavFeedRequestFailed:"NavFeedRequestFailed",NavFeedHandlerExited:"NavFeedHandlerExited",InMemoryHandlerCacheMissed:"InMemoryHandlerCacheMissed",FetchMsgHandlerCacheMissed:"FetchMsgHandlerCacheMissed"};var me=i(41065);function fe(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=yield(0,me.T)({type:"SW_ERROR_DATA"});if(e&&e.length){for(const t of e){const e=he[t.id];if(!e||!ie._fX[e])continue;const i=Object.assign(Object.assign({},ie._fX[e]),{message:t.message});if(t.data&&(i.pb=Object.assign(Object.assign({},i.pb),t.data)),(e===he.FetchMsgHandlerCacheMissed||e===he.InMemoryHandlerCacheMissed)&&t.data&&t.data.pageUrl&&t.data.swUrl){const n=ge.c.compareURLs(t.data.pageUrl,t.data.swUrl);i.pb=Object.assign(Object.assign({},ie._fX[e]),{urlMismatchData:n})}ee.M0.sendAppErrorEvent(i)}ee.M0.addOrUpdateTmplProperty("swerr",e.length.toString())}}))}function ve(e){return(0,r.mG)(this,void 0,void 0,(function*(){if(!e)return;const t=yield function(){return(0,r.mG)(this,void 0,void 0,(function*(){return yield(0,me.T)({type:"SW_FLAGS_DATA"})}))}();if(t&&t.featureFlags&&t.workerParams){["enableEarlyFeedFetchMem","enableEarlyFeedFetchMsg","enableEarlyFeedFetch"].forEach((i=>{var n,r;const o=e[i],s=t.featureFlags[i];if((o||s)&&o!==s){const e=((null===(r=null===(n=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||void 0===r?void 0:r.scriptURL)||"").split("?")[1];ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie._fX.FeatureFlagMismatchOccured),{message:`Flag mismatch. Page: ${o}, Worker: ${s}`,pb:Object.assign(Object.assign({},ie._fX.FeatureFlagMismatchOccured.pb),{workerParams:t.workerParams,pageSwParams:e})}))}}))}}))}var ye=i(62661),be=i(37574),Se=i(64193),Ce=i(76858),we=i(23344),Te=i(95460),ke=i(7124),Ae=i(16614),Ie=i(9533);var Pe=i(68364),Ee=i(4734);function Oe(e,t,i=!1,n,r){e?"serviceWorker"in navigator?(e=function(e,t){const i=t.indexOf("?")>-1?"&":"?",n=i+function(e){const t=(0,k.L)().getAll("item"),i=t?t.find((e=>e&&0===e.indexOf("spalink:"))):void 0;let n=function(e){const t=(0,k.L)().get("bundles");let i;if(t&&(i=Me("bundles",t),i))return i;if(i=Me("bundles",e.bundlesOverride),i)return i;const n=b.Al.ClientSettings&&b.Al.ClientSettings.queryparams,r=new URLSearchParams(n);return Me("bundles",r.get("bundles"))}(e);i&&(n=Me("item",i.replace("/mobile","")));return n}(e)+function(e){const t=(0,k.L)().get("raceEnabled");return e.cacheAndNetworkRaceEnabled||t?Me("raceEnabled","true"):""}(e)+((null===(r=null===b.Al||void 0===b.Al?void 0:b.Al.ClientSettings)||void 0===r?void 0:r.audienceMode)===c.F.Enterprise?Me("enableOfficeRoutes","true"):"")+function(e){return isNaN(e.riverAgeMinutes)?"":Me("riverAgeMinutes",e.riverAgeMinutes.toString())}(e)+function(e){const t=(0,k.L)().get("enableNetworkFirst");return e.enableNetworkFirst||t?Me("enableNetworkFirst","true"):""}(e)+function(e){return isNaN(e.navAgeMinutes)?"":Me("navAgeMinutes",e.navAgeMinutes.toString())}(e)+function(e){const t=(0,k.L)().get("enableNavPreload");return e.enableNavPreload||t?Me("enableNavPreload","true"):""}(e)+function(e){const t=(0,k.L)().get("enablePreRenderPartialResponseRoute");return e.enablePreRenderPartialResponseRoute||t?Me("enablePreRenderPartialResponseRoute","true"):""}(e)+function(e){const t=(0,k.L)().get("enableEmptySectionRoute");return e.enableEmptySectionRoute||t?Me("enableEmptySectionRoute","true"):""}(e)+function(e){const t=(0,k.L)().get("disablePrecache");return e.disablePrecache||t?Me("disablePrecache","true"):""}(e)+function(e){const t=(0,k.L)().get("enableEarlyFeedFetch");return e.enableEarlyFeedFetch||t?Me("enableEarlyFeedFetch","true"):""}(e)+function(e){const t=(0,k.L)().get("enableEarlyFeedFetchMsg");return e.enableEarlyFeedFetchMsg||t?Me("enableEarlyFeedFetchMsg","true"):""}(e)+function(e){const t=(0,k.L)().get("enableEarlyFeedFetchMem");return e.enableEarlyFeedFetchMem||t?Me("enableEarlyFeedFetchMem","true"):""}(e)+function(e){const t=(0,k.L)().get("enableBaseResponseTeeNoOp");return e.enableBaseResponseTeeNoOp||t?Me("enableBaseResponseTeeNoOp","true"):""}(e)+function(e){const t=(0,k.L)().get("enableBkgdNewStorage");return e.enableBkgdNewStorage||t?Me("enableBkgdNewStorage","true"):""}(e)+function(e){const t=(0,k.L)().get("enableAltCacheNetworkRace");return e.enableAltCacheNetworkRace||t?Me("enableAltCacheNetworkRace","true"):""}(e)+function(e){const t=(0,k.L)().get("enableNavErrorHandler");return e.enableNavErrorHandler||t?Me("enableNavErrorHandler","true"):""}(e)+function(e){const t=(0,k.L)().get("enableSafeUpdate");return e.enableSafeUpdate||t?Me("enableSafeUpdate","true"):""}(e)+function(e){const t=(0,k.L)().get("enableJSPrecacheOnly");return e.enableJSPrecacheOnly||t?Me("enableJSPrecacheOnly","true"):""}(e);var r;n!==i&&(t=function(e,t){if(!e||!e.endsWith(t))return e;return e.slice(0,-1)}(t+=n,"&"));return t}(n,e),i?De(e,t,r):(0,Ee.F_)().then((()=>{De(e,t,r)}))):(0,Pe.H)(ie.a6r,"Service Worker is not in navigator."):(0,Pe.H)(ie.a6r,"No scriptUrl provided")}function Me(e,t){return t?e+"="+t+"&":""}function xe(e="/"){return(0,r.mG)(this,void 0,void 0,(function*(){try{const t=yield navigator.serviceWorker.getRegistration(e);if(!t)return;(yield t.unregister())||(0,Pe.H)(ie.Fst,"ServiceWorker unregistration failed.")}catch(e){(0,Pe.OO)(e,ie.Fst,"Failed to unregister ServiceWorker:"+e.message)}}))}function De(e,t,i){return(0,r.mG)(this,void 0,void 0,(function*(){try{yield navigator.serviceWorker.register(e,{scope:t}),i&&i()}catch(e){(0,Pe.OO)(e,ie.a6r,"ServiceWorker registration failed.")}}))}var Re=i(12884),Le=i(42420);function Fe(e,t,i,n,r){if(!t||"true"!==t.enabled)return;const o=b.Al.ClientSettings.deviceFormFactor;if("false"===t.mobileEnabled&&("phone"===o||"tablet"===o))return;if(!function(e){const t=b.Al.ClientSettings.browser;if(!t&&"false"===e.mobileEnabled)return!1;const i=e.unsupportedBrowsers;if(!i||!i.length)return!0;if(i.findIndex((e=>e.toLowerCase()===t.browserType.toLowerCase()))>-1)return!1;return!0}(t))return;if(!function(){const e="storageTest";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){console.log(e)}return!1}())return;const s=t.isLowEndDevice&&t.disableOnLowEndDevices;if("true"===t.registrationEnabled&&!s){const o=function(){const e=(0,Re.zp)(),t=ge.c.getQueryParameterByName("swimmediateregistration",e);if(t)return"true"===t.toLocaleLowerCase();return!1}();n=n||o,Le.U.setIsServiceWorkerEnabled(!0),Oe(e,i,n,t,r)}("true"===t.unregistrationEnabled||s)&&(!function(e="/",t=!1){if(!e||!("serviceWorker"in navigator))return null;t||"complete"===document.readyState?xe(e):window.addEventListener("load",(()=>{xe(e)}))}(i),Le.U.setIsServiceWorkerEnabled(!1))}var Ne=i(89123),Be=i(1584),je=i(68793),$e=i(10209),Ue=i(41710),He=i(93450);var _e,We=i(63263),ze=i(29904),Ge=i(38349),Ve=i(76868),qe=i(75384),Ze=i(32717),Ke=i(24066),Qe=i(72344),Je=i(59997),Xe=i(55027),Ye=i(75559),et=i(38156);let tt;!function(e){e.topStories="topstory",e.breakingNews="breakingnews",e.socialReplies="socialreplies",e.socialReactions="socialreactions",e.socialFollowers="socialfollowers",e.socialAchievements="socialachievements",e.socialAlerts="socialalerts"}(_e||(_e={}));class it{constructor(e){this.resolvePushNotificationsSubscription=(e,t,i,n,o,s,a)=>(0,r.mG)(this,void 0,void 0,(function*(){const c=yield this.swRegistration.pushManager.getSubscription();if("denied"===Notification.permission)return;if(s.size<1&&(!c||"granted"!==Notification.permission))return;if(c)return void it.updateSubscriptions(c,e,s);let d="granted"===Notification.permission;const l=d;let u="";const{defaultNotification:p,defaultNotificationPromptAllow:g,defaultNotificationPromptBlock:h,defaultNotificationPromptDefault:m}=it.buildDefaultNotificationPermissionPromptTelemetryElement(a);if(!d){let e;switch(ee.M0.sendContentViewEvent(p,Ye.NS.View),u=yield Notification.requestPermission(),u){case"granted":e=g,d=!0;break;case"denied":e=h;break;default:e=m}ee.M0.sendActionEvent(e,et.Aw.Click,et.wu.Undefined)}if(!d)return;if(fetch(e+"/webpush/key").then((t=>(0,r.mG)(this,void 0,void 0,(function*(){if(t.ok){const i=yield this.swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:it.urlB64ToUint8Array((yield t.json()).key)});it.updateSubscriptions(i,e,s)}else ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie.UVO.FetchKeyError),{message:"Error fetching key for subscribing to push notifications endpoint",pb:Object.assign(Object.assign({},ie.UVO.FetchKeyError.pb),{customMessage:`HTTP Status: ${t.status}`})}))})))),!l){const e={body:i,tag:"web-notification",icon:o,data:{url:ge.c.getAbsoluteUrl(n)}};"edge"===b.Al.ClientSettings.browser.browserType?this.swRegistration.showNotification(t,e):new Notification(t,e)}})),this.swRegistration=e}static getInstance(){return tt}static initializePushSubscriptionManager(e){"string"==typeof e?this.initializeFromScope(e):this.initializeFromRegistration(e)}static initializeFromRegistration(e){tt=new it(e)}static initializeFromScope(e){return(0,r.mG)(this,void 0,void 0,(function*(){yield navigator.serviceWorker.ready,it.initializePushSubscriptionManager(yield navigator.serviceWorker.getRegistration(e))}))}static urlB64ToUint8Array(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),i=atob(t),n=new Uint8Array(i.length);for(let e=0;e<i.length;++e)n[e]=i.charCodeAt(e);return n}static addTelemetryTagsToElement(e,t,i){const n={name:i},r=t?t.addOrUpdateChild(n):null,o=r.render();return Object.keys(o).forEach((t=>{e.setAttribute(t,o[t])})),r}static buildDefaultNotificationPermissionPromptTelemetryElement(e){const t=document.createElement("div"),i=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");t.appendChild(i),t.appendChild(n),t.appendChild(r);const o=it.addTelemetryTagsToElement(t,e,"browserNativeNotificationPermissionPrompt");return it.addTelemetryTagsToElement(i,o,"Accept"),it.addTelemetryTagsToElement(n,o,"Block"),it.addTelemetryTagsToElement(r,o,"Default"),{defaultNotification:t,defaultNotificationPromptAllow:i,defaultNotificationPromptBlock:n,defaultNotificationPromptDefault:r}}static updateSubscriptions(e,t,i){return(0,r.mG)(this,void 0,void 0,(function*(){const n=Object.values(_e).filter((e=>!i.has(e)));[{segment:"subscribe",tags:[...i]},{segment:"unsubscribe",tags:n}].forEach((i=>(0,r.mG)(this,void 0,void 0,(function*(){if(i.tags.length<1)return;const n=i.tags.join(";"),r=t+"/webpush/news/"+b.Al.Locale+"/v1/webpush/"+i.segment+"?scn=MSNRPSAuth",o=yield fetch(r,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Tags:n},body:JSON.stringify({subscription:e})});o.ok?o.json().then((e=>{"Success"!==e.message&&ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie.UVO.SubscribeUnsubscribeError),{message:"Response contained unexpected value when subscribing or unsubscribing from push notifications endpoint",pb:Object.assign(Object.assign({},ie.UVO.SubscribeUnsubscribeError.pb),{customMessage:`Expected response message to be 'Success' but instead was ${e.message} when receiving response from endpoint at ${r}`})}))})):ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie.UVO.SubscribeUnsubscribeError),{message:"HTTP error when making subscribe or unsubscribe call from push notifications endpoint",pb:Object.assign(Object.assign({},ie.UVO.SubscribeUnsubscribeError.pb),{customMessage:`Response status was ${o.status} when attempting to communicate with the endpoint at ${r}`})}))}))))}))}}var nt=i(32758),rt=i(53301);const ot=(0,h.k)((function(){window.pageYOffset>0&&at()}),0);let st=!1;function at(){const e=(0,Ee.S0)();e&&rt.g.updateBelowTheFoldTransitionStart.getActionSender(e).send(!0),st=!0,window.removeEventListener("scroll",ot)}const ct={initialize:function(){window.addEventListener("scroll",ot,{passive:!0})},handleSettingUpdate:function(e){st||"always"!==e&&"headingsonly"!==e&&"peek"!==e||at()}};var dt=i(33379),lt=i(83705),ut=i(99452),pt=i(65932),gt=i(82423),ht=i(3931),mt=i(7781),ft=i(54291),vt=i(96470),yt=i(67277),bt=i(1033),St=i(51019),Ct=i(37180),wt=i(31402),Tt=i(68848),kt=i(25964),At=i(85068),It=i(37526),Pt=i(88901),Et=i(65453),Ot=i(4766),Mt=i(57945);const xt="localhost.msn.com"===(0,Re.Td)(),Dt=300,Rt=(e,t=e,i="default")=>({instanceId:e,configRef:{experienceType:t,instanceSrc:i}}),Lt=Rt("GridViewFeed"),Ft=Rt("GamingGridViewFeed","GridViewFeed","index_GamingGridViewFeed");let Nt="";const Bt="https://assets.msn.com/statics/icons/favicon_newtabpage.png",jt="gaming";let $t=null;const Ut=(0,ae.AF)("feedDependencies",(()=>Promise.all([i.e("common-windows-widget-shared"),i.e("common-feed-libs"),i.e("common-cscore"),i.e("libs_feed-layout_dist_card-templates_content-card_ContentCardDataMapper_js-libs_toast-data_di-ed3cbe"),i.e("libs_weather-shared_dist_utils_FeedWeatherDataUtils_js"),i.e("libs_icons-wc_icons_ThumbDown_svg-libs_icons-wc_icons_ThumbDownFilled_svg-libs_icons-wc_icons-0d8e2c"),i.e("nas-highlight-v1"),i.e("feedDependencies")]).then(i.bind(i,7503)))),Ht=(0,ae.AF)("feedDependenciesGaming",(()=>Promise.all([i.e("common-windows-widget-shared"),i.e("common-feed-libs"),i.e("common-cscore"),i.e("libs_feed-layout_dist_card-templates_content-card_ContentCardDataMapper_js-libs_toast-data_di-ed3cbe"),i.e("libs_weather-shared_dist_utils_FeedWeatherDataUtils_js"),i.e("libs_icons-wc_icons_ThumbDown_svg-libs_icons-wc_icons_ThumbDownFilled_svg-libs_icons-wc_icons-0d8e2c"),i.e("nas-highlight-v1"),i.e("feedDependenciesGaming")]).then(i.bind(i,35674))));class _t extends Se.l{constructor(){super(...arguments),this.showFeedTranslucent=!0,this.enableHiddenRecommendedSitesStyles=!1,this.brandZoneShowInRecommendedSites=!1,this.brandZoneSize="large",this.hideComplianceLink=!1,this.showGreeting=!0,this.showMobileAppUpsell=!1,this.isNotificationEnabledByAdmin=!0,this.isShowMSRewardsAllowedByPolicy=!0,this.isShowRewardsAllowedByWindowSize=!1,this.isShowRewardsAllowedByLocation=!1,this.isAppLauncherAllowedByPolicy=!0,this.marketToggleCanFit=!0,this.enableShowMSBrandLogo=!1,this.enableNewUserDefaultSettings=!1,this.className="",this.disableStickyHeader=!1,this.canaryFlightEnabled=!1,this.holidayEffectsPosition="display: none;",this.applyHeaderStylesForLanguageMismatchBanner=!1,this.displayConditionalBanner=!1,this.isOnPersonalizeOrM365Page=!1,this.nowPivotId="",this.hideQuickLinks=!1,this.hideOneLineTopSites=!1,this.isNewTabPageContentManagedByPolicy=!1,this.hideSearchHistory=!1,this.headerCoreOffset=0,this.stickyHeaderHeight=O.FQ,this.isSearchSticky=!1,this.searchStickyBreakpoint=0,this.hideSearchBox=!1,this.topSitesQuickLinkEndMarginUsedPadding=0,this.museumCardShown=!1,this.scrollIsPastStyleThreshold=!0,this.showTopsitesWithRecommendSites=!1,this.brandZoneSizeHeightMapping={large:{[L.K$.c1]:0,[L.K$.c2]:311,[L.K$.c3]:371,[L.K$.c4]:371,[L.K$.c5]:371},medium:{[L.K$.c1]:0,[L.K$.c2]:271,[L.K$.c3]:331,[L.K$.c4]:331,[L.K$.c5]:331},small:{[L.K$.c1]:0,[L.K$.c2]:221,[L.K$.c3]:281,[L.K$.c4]:281,[L.K$.c5]:281}},this.msNtpExpBitmask="",this.multiLineSearchBox=!1,this.showCodexBingWithNonBingDSE=!1,this.headingsOnlyHeightReduction=0,this.initializeRecommendedSites=()=>{if(this.shouldRenderRecommendedSites())if("headingsonly"===this.layoutState.selectedFeedDisplaySetting){const e=this.recommendedSitesHeight/100;this.complianceHyperlink&&(this.complianceHyperlink.style.bottom="12px"),this.recommendedSites||((0,Ie.FY)(U._.recommendedSites,this.shadowRoot.querySelector("#recommendedSites")),this.recommendedSites=(0,Ie.b_)(U._.recommendedSites)),this.recommendedSites.style.opacity=`${Math.min(1,window.scrollY*e/this.recommendedSitesHeight)}`,0===window.scrollY?this.recommendedSites.style.visibility="hidden":this.recommendedSites.style.visibility="visible",0===window.scrollY?this.enableHiddenRecommendedSitesStyles=!0:this.enableHiddenRecommendedSitesStyles=!1}else this.complianceHyperlink&&(this.complianceHyperlink.style.bottom="12px"),this.recommendedSites&&(this.recommendedSites.style.opacity="1",this.recommendedSites.style.visibility="visible"),this.enableHiddenRecommendedSitesStyles=!1},this.recommendedSitesSelection=e=>{var t,i,n;(null==e?void 0:e.detail)&&(this.recommendedSitesDisplaySetting=null!==(t=null==e?void 0:e.detail.key)&&void 0!==t?t:this.recommendedSitesDisplaySetting,this.brandZoneShowInRecommendedSites=null!==(i=null==e?void 0:e.detail.showBrandZone)&&void 0!==i?i:this.brandZoneShowInRecommendedSites,this.brandZoneSize=null!==(n=null==e?void 0:e.detail.brandZoneSize)&&void 0!==n?n:this.brandZoneSize,this.refreshHeaderHeight(),this.config.enableUnifiedRecommendedSites&&this.updateHeaderGrid(),this.calculateTopAndBackgroundStickyBreakpoints())},this.displayDailyDiscovery=()=>{this.dailyDiscovery.style.visibility="",this.updateAfterWheelingToDisplayMore()},this.displayQuickLinks=()=>{this.hideQuickLinks=!1,this.topSitesHolder.style.visibility="",this.updateAfterWheelingToDisplayMore()},this.updateAfterWheelingToDisplayMore=()=>{this.calculateStickyBreakpoints(),this.hideSearchHistory=!1,this.updateHeaderCoreBelowSearchData(),this.refreshHeaderHeight(),window.removeEventListener("wheel",this.quickLinksToggle)},this.quickLinksToggle=e=>{if("always"!==this.layoutState.selectedFeedDisplaySetting)return;const{selectedQuickLinksDisplaySetting:t}=this.layoutState;if(![M.Z3.onerow,M.Z3.tworows,M.Z3.threerows,M.Z3.top].includes(t))return;0===(document.documentElement?document.documentElement:document.body).scrollTop&&e.deltaY<0&&this.hideQuickLinks&&this.displayQuickLinks()},this.smoothScrollToNav=e=>{const t=scrollY,i=e-t;let n;i&&window.requestAnimationFrame((function e(r){n=n||r;const o=r-n,s=Math.min(o/500,1);var a;window.scrollTo(0,t+i*((a=s)<.5?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1)),o<500&&window.requestAnimationFrame(e)}))},this.quickScrollToTop=e=>{const{selectedFeedDisplaySetting:t}=this.layoutState,i=e.wheelDelta<0,n="peek"===t,r="headingsonly"===t;let o=0;r?o=window.innerHeight-151:n&&(o=this.getHeaderHeightForPeekMode()-92),i&&(n||r)&&scrollY<o&&(e.preventDefault(),this.smoothScrollToNav(o))},this.controlNewTabSettings=()=>{Nt=document.title;const e=document.querySelector('head link[rel="icon"]');if(e)e.href=Bt;else{const e=document.createElement("link");e.rel="icon",e.href=Bt,e.type="image/png",document.head.appendChild(e)}},this.changeNewTabSettings=e=>{document.title=e?"Microsoft Start":Nt;const t=document.querySelector('head link[rel="icon"]');t&&(t.href=e?"https://assets.msn.com/statics/icons/Microsoft_16_SVG.ico":Bt)},this.areNavTopSitesOverlapping=(0,ke.Z)((()=>{if("hidden"===document.visibilityState||!this.nav||!this.topSitesHolder||"hidden"===this.topSitesHolder.style.visibility||!this.topSitesHolder.children.length||"1"!==this.topSitesHolder.style.opacity&&""!==this.topSitesHolder.style.opacity)return;if(this.topSitesHolder.children[0]&&0===this.topSitesHolder.children[0].offsetHeight)return;const e=this.nav.getBoundingClientRect(),t=this.topSitesHolder.getBoundingClientRect();this.checkAndLogRectsOverlapping(e,t)}),500),this.initFeedDependencies=e=>e===jt?Ht().then((({FeedManagerWithClientAd:e,GamingLayoutTemplateMap:t})=>{this.layoutTemplateMap=t;const i=this.layoutState.currentLayout!==M.nP.informational;this.feedManager=new e({disablePreloadLikelyExperiences:i})})):Ut().then((({FeedManagerWithClientAd:e,AnaheimLayoutTemplateMap:t})=>{this.layoutTemplateMap=t;const i=this.layoutState.currentLayout!==M.nP.informational;this.feedManager=new e({disablePreloadLikelyExperiences:i})})),this.scrollToShowFeed=()=>{const e=(0,we.Nu)("top"),t=this.disableStickyHeader?e+this.stickyHeaderHeight:e;t&&window.scrollTo({top:t,behavior:"smooth"})},this.topSitesIntersectionObserverCallback=e=>{if(this.topSitesHolder&&(!this.layoutState.quickLinksEnabled||"off"===this.layoutState.selectedQuickLinksDisplaySetting))return this.topSitesHolder.style.opacity="0",void(this.topSitesHolder.style.visibility="hidden");const t=e[e.length-1];let i,n,r;this.config.translucentFeed&&this.disableStickyHeader||!(t.intersectionRatio<=.99)||"top"===this.layoutState.selectedQuickLinksDisplaySetting?(i=1,n="",r=this.shouldRenderRecommendedSites()?(g.K.Over+3).toString()+3:""):(i=0,n="none",r="1"),this.topSitesHolder.style.opacity=`${i>1?1:i}`,this.topSitesHolder.style.pointerEvents=n,this.topSitesHolder.style.zIndex=r,this.updateTopSitesDailyDiscoveryVisibility()},this.setupTopSitesIntersectionObserver=()=>{const e={root:null,rootMargin:`${this.hideSearchBox?-44:-117}px 0px 0px 0px`,threshold:[.99]};this.topSitesObserver=new IntersectionObserver(this.topSitesIntersectionObserverCallback,e),this.topSitesObserver.observe(this.topSitesHolder)},this.debouncedSetupTopSitesIntersectionObserver=(0,ke.Z)(this.setupTopSitesIntersectionObserver,300),this.updateTopSitesDailyDiscoveryVisibility=()=>{var e,t,i;const{layoutState:n}=this;let r=(null===(e=this.shadowRoot.getElementById("g_nav"))||void 0===e?void 0:e.clientHeight)||0;["always","off"].includes(n.selectedFeedDisplaySetting)&&(r=0);let o=117;const s=this.shadowRoot.getElementById("topSitesHolder");if(s){n.imageOfTheDayEnabled||(o=Math.max(s.getBoundingClientRect().top,o));let e=r+o;["headingsonly","off"].includes(n.selectedFeedDisplaySetting)||(e+=this.recommendedSitesHeight),this.columnArrangement<"c4"&&this.columnArrangement>"c1"&&(e+=50);const a=s.querySelector("top-sites-edgenext"),c=null===(t=null==a?void 0:a.shadowRoot)||void 0===t?void 0:t.getElementById("TopSitesCommon");s.classList.add("topSitesZoomHidden");let d=s.clientHeight;c&&(c.style.height="",d=null!==(i=c.clientHeight)&&void 0!==i?i:d),window.innerHeight>=e+d?(s.classList.remove("topSitesZoomHidden"),this.recommendedSitesHeight&&(this.showTopsitesWithRecommendSites=!0)):d<100||window.innerHeight<e+d/2?(s.classList.add("topSitesZoomHidden"),this.showTopsitesWithRecommendSites=!1):(s.classList.remove("topSitesZoomHidden"),c&&(c.style.height=d/2+"px"),this.recommendedSitesHeight&&(this.showTopsitesWithRecommendSites=!0))}this.updateDailyDiscoveryVisibility(r)},this.updateTopSitesDailyDiscoveryVisibilityDebounced=(0,ke.Z)(this.updateTopSitesDailyDiscoveryVisibility,600),this.updateDailyDiscoveryVisibility=e=>{if(!this.dailyDiscovery)return;let t=e;["headingsonly","off"].includes(this.layoutState.selectedFeedDisplaySetting)||(t+=this.recommendedSitesHeight);const i=this.dailyDiscovery.getBoundingClientRect();if("always"===this.layoutState.selectedFeedDisplaySetting)i&&i.bottom>window.innerHeight?this.dailyDiscovery.style.visibility="hidden":this.layoutState.dailyDiscoveryEnabled&&(this.dailyDiscovery.style.visibility="");else{i.bottom+t>window.innerHeight?this.dailyDiscovery.style.visibility="hidden":this.dailyDiscovery.style.visibility=""}},this.onResize=()=>{const e=this.showCodexBingWithNonBingDSE;this.checkCodexBingFlagWithNonBingDSE(),e!=this.showCodexBingWithNonBingDSE&&this.updateHeaderGrid(),this.refreshHeaderHeight(),this.refreshImageHeight(),this.calculateStickyBreakpointsDebounced(),this.checkTopEndCornerFitOnPage(),this.updateTopSitesDailyDiscoveryVisibilityDebounced(),(this.config.companyLogo||this.renderMarketLanguageToggle&&this.config.languageToggleTreatment5)&&this.updateCompanyLogoStatus(),this.config.enableSignInControl&&this.checkSignInControlPageFit(),this.renderBackgroundGallery&&this.checkGalleryPageFitAndDisplayToast(),this.renderMarketLanguageToggle&&!this.config.languageToggleTreatment5&&(this.checkMarketToggleFitOnPage()||(this.marketToggleCanFit=!1)),this.config.enableRiverZoom&&this.checkTopEndCornerOverlap()},this.disableHover=(0,ke.Z)((()=>{const e="disable-hover";clearTimeout($t),this.content.classList.contains(e)||this.content.classList.add(e),$t=setTimeout((()=>{this.content.classList.remove(e)}),400)}),350,{leading:!0,trailing:!1}),this.onScroll=(0,h.k)((()=>{var e,t,i;const n=window.scrollY<100;n!=this.scrollIsPastStyleThreshold&&(this.scrollIsPastStyleThreshold=n,this.refreshTranslucentMode()),this.navIsSticky=window.scrollY>O.FT;const r=window.scrollY>O.FT-this.recommendedSitesHeight;if(this.config.enableUnifiedRecommendedSites?this.hideOneLineTopSites=this.quickLinksDisplaySetting===M.Z3.top&&window.scrollY>O.FT-O.jb:this.hideOneLineTopSites=this.quickLinksDisplaySetting===M.Z3.top&&window.scrollY>O.FT-O.jb-this.recommendedSitesHeight,this.navIsSticky&&ee.M0.addOrUpdateTmplProperty("StickyBreakpointTriggered","1"),this.config.translucentFeed&&(null===(e=this.config.translucentFeed)||void 0===e?void 0:e.enableTranslucentFeed)&&this.layoutState.currentBackgroundImageType!==M.HX.off&&this.layoutState.currentBackgroundImageType!==M.HX.theme&&(r&&!this.config.translucentFeed.disableSticky?(0,m.j3)("backgroundImage","hidden"):(0,m.j3)("backgroundImage","displayed"),(null===(t=this.config.translucentFeed)||void 0===t?void 0:t.enableTranslucentFeed)||this.navIsSticky&&!this.config.translucentFeed.disableSticky?(0,m.j3)("navBar","normal"):(0,m.j3)("navBar","translucentBackground")),this.config.complianceHyperlink&&this.updateComplianceLinkStyleOnScroll(),this.config.useNewTabSettings&&this.changeNewTabSettings(this.navIsSticky),this.config.noBckImgOnNavSticky){const e="off"===this.layoutState.currentBackgroundImageType||this.navIsSticky;this.showBackplate=e,(0,m.j3)("backgroundImage",e?"hidden":"displayed")}this.updateHeaderCoreOffset(),this.isSearchSticky=!this.disableStickyHeader&&!this.config.disableFeed&&(this.bespokeAdActive||"always"===this.layoutState.selectedFeedDisplaySetting||window.scrollY>this.searchStickyBreakpoint),this.config.showCodexBingNudge&&(0!=scrollY?(this.showCodexBingWithNonBingDSE=!1,this.updateHeaderCoreBelowSearchData()):this.checkCodexBingFlagWithNonBingDSE()),this.config.enableHeadingsOnlyCardSlivers&&this.displayBlankRiver&&(this.handleCardSliversOnScroll(),this.stampScrollTmpl()),"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&this.childRefs.scrollDownButton&&(this.scrollDownButton=null===(i=this.shadowRoot.querySelector(".navAndContent"))||void 0===i?void 0:i.querySelector("#scrollDownButtonContainer"),this.scrollDownButton&&(this.scrollDownButton.style.display=0!=scrollY?"none":"flex"))})),this.throttledOnScroll=(0,h.k)((()=>{this.initializeRecommendedSites(),this.childRefs.dailyDiscovery&&(this.dailyDiscovery=this.dailyDiscovery||this.shadowRoot.getElementById("dailyDiscovery"),this.dailyDiscovery&&(this.dailyDiscovery.style.transition="opacity .3s ease-out",0!==window.scrollY?(this.dailyDiscovery.style.opacity="0",this.dailyDiscovery.style.visibility="hidden"):(this.dailyDiscovery.style.opacity="1",this.dailyDiscovery.style.visibility=""),setTimeout((()=>{this.dailyDiscovery.style.transition=null}),Dt)))})),this.updateComplianceLinkStyleOnScroll=()=>{const e=window.scrollY>0;e!==this.hideComplianceLink&&(this.hideComplianceLink=e,this.hideComplianceLink?this.complianceHyperlink&&this.complianceHyperlink.classList.add("complianceHyperlink_hide"):this.complianceHyperlink&&this.complianceHyperlink.classList.remove("complianceHyperlink_hide"))},this.calculateStickyBreakpointsDebounced=(0,ke.Z)(this.calculateStickyBreakpoints,Dt),this.getCompanyLogoFromLocalStorage=()=>{const e=(0,f.$o)().supported&&(0,f.$o)().getObject("companyLogo",null);if(!e||!e.default_logo)return"";return!this.layoutState.imageOfTheDayEnabled||!e.light_logo?e.default_logo||"":e.light_logo||""},this.onFlyoutEvent=(e,t)=>{var i,n,r,o;let s;switch(e){case v.tk.settings:case v.tk.msRewards:case v.tk.notificationBell:case v.tk.signInControl:case v.tk.mobileAppUpsell:s=this.hideSearchBox?this.headerCoreRef:null===(i=this.headerCoreRef)||void 0===i?void 0:i.end;break;case v.tk.search:case v.tk.imageSearch:case v.tk.voiceSearchWC:s=this.hideSearchBox?this.headerCoreRef:null===(n=this.headerCoreRef)||void 0===n?void 0:n.core;break;case v.tk.searchHistoryMoreOptions:case v.tk.newsHeadlineBelowSearchboxMoreOptions:s=this.hideSearchBox?this.headerCoreRef:null===(r=this.headerCoreRef)||void 0===r?void 0:r.belowSearch;break;case v.tk.waffle:case v.tk.editWelcomeGreeting:s=this.hideSearchBox?this.headerCoreRef:null===(o=this.headerCoreRef)||void 0===o?void 0:o.start;break;case v.tk.addTopSite:case v.tk.editTopSite:case v.tk.topSiteOverflowPanel:s=this.topSitesHolder;break;case v.tk.museumCard:this.museumCardShown=t;break;case v.tk.locationMarkerCard:s=this.shadowRoot.getElementById("locationMarkerHolder");break;case v.tk.recommendedSitesSetting:s=this.shadowRoot.getElementById("recommendedSites");break;case v.tk.dailyDiscovery:s=this.dailyDiscovery||this.shadowRoot.getElementById("dailyDiscovery")}if(s&&(s.style.zIndex=t?g.K.Flyout.toString():null),!s||e!==v.tk.ntpSearchSuggestions&&e!==v.tk.search||t||((0,v.YN)(v.tk.ntpSearchSuggestions)||(0,v.YN)(v.tk.search)?s.style.zIndex=g.K.Flyout.toString():s.style.zIndex=null),s&&e===v.tk.settings&&(s.style.zIndex=t?g.K.Flyout.toString():null),e===v.tk.topSiteOverflowPanel&&(s.style.zIndex=t?(g.K.Flyout+1).toString():null),this.quickLinksDisplaySetting===M.Z3.top&&s===this.topSitesHolder&&e!==v.tk.topSiteOverflowPanel&&(s.style.zIndex=(g.K.Flyout+1).toString()),e!==v.tk.hamburgerMenu&&e!==v.tk.navOverflow||(this.headerCoreRef&&(this.headerCoreRef.style.zIndex=t?"302":(g.K.Nav+2).toString()),this.quickLinksDisplaySetting===M.Z3.top&&(this.topSitesHolder.style.zIndex=t?"302":(g.K.Nav+2).toString())),e===v.tk.toast&&this.quickLinksDisplaySetting!==M.Z3.top&&(this.topSitesHolder.style.zIndex=t?(g.K.Nav+1).toString():(g.K.Over+3).toString()),e===v.tk.actionMenuOpen){const e=this.shadowRoot.getElementById("g_nav");(null==e?void 0:e.style)&&(e.style.zIndex=t?"0":"")}},this.switchListenerCallback=e=>{var t;if(this.isOnPersonalizeOrM365Page=!1,this.isOnM365Page=!1,this.nowPivotId=(null===(t=null==e?void 0:e.newSelection)||void 0===t?void 0:t.pivotId)||"",e&&e.newSelection){const t=e.newSelection;this.startContentLoad(t.configIndexRef,t.context,void 0,t.pivotId),this.isOnM365Page="productivityhub"===t.pivotId.toLocaleLowerCase(),this.isOnPersonalizeOrM365Page="myInterests"===t.pivotId||this.isOnM365Page||"navigationPage"===t.pivotId}e.oldSelection&&this.scrollToShowFeed()},this.handleColumnArrangementChange=e=>{if(this.columnArrangement=e,this.enableOneColumn=this.config.enableOneColumn&&"c1"===this.columnArrangement,ee.M0.addOrUpdateTmplProperty("pageColumn",this.columnArrangement),this.updateHeaderGrid(),(0,dt.N)()){this.shadowRoot.querySelector("background-image").recommendedSitesHeight=this.recommendedSitesHeight}ee.M0.updatePageMetadata({page:{viewType:(0,F.vi)()}},!0),this.config.companyLogo&&(this.showCompanyLogo=!("c1"===this.columnArrangement||"c2"===this.columnArrangement)),this.refreshHeaderHeight(),this.updateHeaderCoreData()},this.onHeaderSpaceHolderTransitionEnd=()=>{Xe.I.headerTransitionEnd.getActionSender(this.pageSettingsDataConnector).send()},this.onMarketValueChange=e=>(0,r.mG)(this,void 0,void 0,(function*(){var t;this.pageSettingsDataConnector||(this.pageSettingsDataConnector=(0,gt.K0)(o.z.ChromiumPageSettings)),e&&this.pageSettingsDataConnector&&(null===(t=D.V.marketUpdated.getActionSender(this.pageSettingsDataConnector))||void 0===t||t.send(e),(0,Ge.yV)(Ve.y.MarketChange))})),this.updateLanguageToggle=()=>{if("language"==y.jG.MarketMismatchDetail.type){const e=this.targetLanguageOnMismatch(s);e&&(this.renderMarketLanguageToggle=!0,this.localeMarket=e,ee.M0.addOrUpdateTmplProperty("marketMismatchForToggle","1"))}},this.onRefreshFeed=()=>(0,r.mG)(this,void 0,void 0,(function*(){var e;const t=document.documentElement?document.documentElement:document.body;(this.layoutState.currentLayout!=M.nP.inspirational&&this.layoutState.currentLayout!=M.nP.focused||0!==t.scrollTop)&&(this.closeRefreshAnimation=!1,this.showPivotRefreshButton=!0,yield null===(e=this.feedManager)||void 0===e?void 0:e.callRefreshRegionsData({invalidateCache:!0,scrollToTop:!0}),this.closeRefreshAnimation=!0,setTimeout((()=>{this.showPivotRefreshButton=!1}),2e3))})),this.saveViewportInPref=()=>{if((0,dt.N)()){const{innerWidth:e,innerHeight:t}=window;ce.U.savePreferenceSetting(de.Xm.viewport,{width:e,height:t},!1,!0)}}}get isTopSitesMovedUp(){return this.hideSearchBox&&this.isAlwaysMode&&this.quickLinksDisplaySetting!==M.Z3.off&&this.quickLinksDisplaySetting!==M.Z3.top}get topBannerOffsetHeight(){if(!this.displayConditionalBanner)return 0;return this.quickLinksDisplaySetting===M.Z3.top&&!this.hideOneLineTopSites?48:40}get topSitesOffsetHeight(){return this.quickLinksDisplaySetting===M.Z3.top&&!this.hideOneLineTopSites?O.jb:0}get topSitesHeightBelowSearchBoxForPeekMode(){const{isTopSitesCollapsed:e,maxTiles:t}=this.topSitesLayoutState||{},{selectedQuickLinksDisplaySetting:i}=this.layoutState,n=t&&t>10&&i==M.Z3.tworows,r=t&&t>20&&i==M.Z3.threerows;return e&&i!=M.Z3.off&&i!=M.Z3.top||i==M.Z3.off||i==M.Z3.top?0:r?258:this.columnArrangement>=L.K$.c3&&!n?90:174}get recommendedSitesHeight(){if(!this.childRefs.recommendedSites||this.recommendedSitesDisplaySetting===M.yR.off)return 0;if(this.config.enableBrandZoneInRecommendedSites&&this.brandZoneShowInRecommendedSites&&"c1"!==this.columnArrangement&&this.brandZoneSize&&this.columnArrangement&&this.brandZoneSizeHeightMapping[this.brandZoneSize][this.columnArrangement])return this.brandZoneSizeHeightMapping[this.brandZoneSize][this.columnArrangement];const e=this.config.enableBrandZoneInRecommendedSites?21:0;if(this.config.enableUnifiedRecommendedSites)if(this.config.enableRecommendedSitesFixHeight)switch(this.recommendedSitesDisplaySetting){case M.yR.tworows:return 88+e;case M.yR.threerows:return 124+e;default:return 0}else switch(this.recommendedSitesDisplaySetting){case M.yR.tworows:switch(this.columnArrangement){case"c5":case"c4":return this.config.enableUnifiedRecommendedSites&&!this.layoutState.imageOfTheDayEnabled&&["peek","headingsonly","off"].includes(this.layoutState.selectedFeedDisplaySetting)?124+e:88+e;case"c3":return 124+e;case"c2":return 160+e;case"c1":return 304;default:return 88+e}case M.yR.threerows:switch(this.columnArrangement){case"c5":case"c4":return this.config.enableUnifiedRecommendedSites&&!this.layoutState.imageOfTheDayEnabled&&["peek","headingsonly","off"].includes(this.layoutState.selectedFeedDisplaySetting)?160+e:124+e;case"c3":return 160+e;case"c2":return 232+e;case"c1":return 448;default:return 124+e}default:return 0}if(this.recommendedSitesDisplaySetting===M.yR.threerows)switch(this.columnArrangement){case"c5":case"c4":return 154+e;case"c3":return 191+e;case"c2":return 265+e;case"c1":return 487;default:return 80+e}switch(this.columnArrangement){case"c5":case"c4":return 117+e;case"c3":return 154+e;case"c2":return 191+e;case"c1":return 339;default:return 80+e}}get applyBannerHeaderStyle(){return this.displayLanguageMismatchBanner&&this.applyHeaderStylesForLanguageMismatchBanner}experienceConnected(){var e,t,i,n,s;return(0,r.mG)(this,void 0,void 0,(function*(){if(this.marketLanguageConsolidation(),(null===(e=this.config.translucentFeed)||void 0===e?void 0:e.disableSticky)?this.disableStickyHeader=!0:this.disableStickyHeader=!1,this.updateStickyHeaderHeight(),(0,te.hy)(!b.Al.IsPrerender,"Header"),"marketmismatch"===y.jG.LanguageRegionMismatch){"language"==y.jG.MarketMismatchDetail.type&&(0,te.YJ)(a.x.marketLanguageToggleWC)}if(this.config.enableWpoTopSitesConfigOverride){const e=(0,Be.R)();e&&(this.config.topSitesCollapsibleControlConfig=e)}if(this.config.enableBespokeAds&&wt.i.handleBespokeAdResponse(),this.childRefs=this.config.childRefs,this.updateHeaderCoreSearchData(),this.pageSettingsDataConnector=(0,gt.K0)(o.z.ChromiumPageSettings),this.topSitesLayoutDataConnector=(0,gt.K0)(o.z.TopSitesLayoutData),(0,dt.N)()){this.initializeDevTools();const e=((e=2)=>{let t="/";const i=window.location.pathname.split("/");if(i.length>e&&i[e]){t+=i[1];for(let n=2;n<=e;n++)t+="/"+i[n]}return t})(2);Fe(xt?"service-worker.js":"./ntp/service-worker.js",this.config.serviceWorker,e,!1,(()=>(0,r.mG)(this,void 0,void 0,(function*(){it.initializePushSubscriptionManager(e)}))));const t=function(e){const t=["disablePrecache","enablePreRenderPartialResponseRoute","enableEarlyFeedFetchMsg","enableEarlyFeedFetch","enableEarlyFeedFetchMem","enableBaseResponseTeeNoOp","enableNetworkFirst","cacheAndNetworkRaceEnabled"].map((t=>t&&e[t]?1:0)).join(""),i=parseInt(t,2);return isNaN(i)?"":i}(this.config.serviceWorker||{});ee.M0.addOrUpdateTmplProperty("swfdbg",t.toString())}if(this.reportPerfMarkers(),function(e){if(!e.useEnterpriseCompliance)return;const t=He._.getInstance().rootReducer.connector(o.z.SharedState),i=Ue.s.useEnterpriseCompliance.getActionSender(t);i&&i.send(!0)}(this.config),this.config.preloadFeed){const{viewFeedConfig:e}=this.getViewFeedConfigAndPivot();(0,$e.Fg)(e)}this.checkIPLocationForRewardsMedallion(),(0,te.b1)().then((()=>{(0,S.L)()?b.Al.IsPrerender&&(0,qe.lr)().then((()=>{le.H.logEvent(le.v.NTP_VISUALLY_READY)})):le.H.logEvent(le.v.NTP_VISUALLY_READY),this.renderMarketLanguageToggle&&!this.config.languageToggleTreatment5?(this.checkMarketToggleFitOnPage()||(this.marketToggleCanFit=!1,this.updateHeaderCoreData()),ee.M0.addOrUpdateTmplProperty("marketToggleLoaded",this.marketToggleCanFit?"1":"0")):this.renderMarketLanguageToggle&&(0,dt.N)()&&this.headerCoreRef&&this.updateCompanyLogoStatus()})),(0,v.WW)(this.onFlyoutEvent),this.columnArrangement=(0,F.Bn)().currentColumnArrangement,this.enableOneColumn=this.config.enableOneColumn&&"c1"===this.columnArrangement,ee.M0.addOrUpdateTmplProperty("pageColumn",this.columnArrangement),(0,F.Bn)().subscribe(this.handleColumnArrangementChange),ct.initialize(),this.config.enableUnifiedRecommendedSites&&(this.recommendedSitesDisplaySetting=this.childRefs.recommendedSites&&(yield(0,je.P6)(!0,this.config.enableWpoRecommededSitesConfigOverride)));let l=!1;const u=new N.o;(0,pt.Uo)(o.z.ChromiumPageSettings,(e=>(0,r.mG)(this,void 0,void 0,(function*(){if(!e.isLoadCompleted)return;u.set();const t=this.layoutState;this.layoutState=e,this.isAlwaysMode="always"===e.selectedFeedDisplaySetting,this.isAlwaysMode||(this.dailyDiscovery&&this.displayDailyDiscovery(),this.hideQuickLinks&&this.displayQuickLinks()),this.quickLinksDisplaySetting=e.selectedQuickLinksDisplaySetting;let i=!1,n=!1,r=!1,o=!1;if(t){if(i=t.selectedQuickLinksDisplaySetting!==e.selectedQuickLinksDisplaySetting,n=t.selectedFeedDisplaySetting!==e.selectedFeedDisplaySetting,r=t.imageOfTheDayEnabled!==e.imageOfTheDayEnabled,i){const t=e.selectedQuickLinksDisplaySetting===M.Z3.onerow||e.selectedQuickLinksDisplaySetting===M.Z3.tworows||e.selectedQuickLinksDisplaySetting===M.Z3.threerows||e.selectedQuickLinksDisplaySetting===M.Z3.top;this.handleTopSitesEnableChange(t,e)}n&&(setTimeout((()=>{ct.handleSettingUpdate(e.selectedFeedDisplaySetting)}),0),this.bespokeAdActive&&"always"!==e.selectedFeedDisplaySetting&&"peek"!==e.selectedFeedDisplaySetting&&(this.bespokeAdActive=!1),this.config.enableHeadingsOnlyCardSlivers&&(this.displayBlankRiver=!1)),this.childRefs.dailyDiscovery&&(o=t.dailyDiscoveryEnabled!==e.dailyDiscoveryEnabled)}if(this.multiLineSearchBox=this.config.enableMultiLineSearchBox,this.checkCodexBingFlagWithNonBingDSE(),this.config.hidableSearchBox){const e=this.layoutState.hideSearchBox&&"always"===this.layoutState.selectedFeedDisplaySetting,i=t&&e!==this.hideSearchBox;this.hideSearchBox=e,i&&(this.topSitesObserver&&(this.topSitesObserver.unobserve(this.topSitesHolder),this.topSitesObserver=null),this.debouncedSetupTopSitesIntersectionObserver(),this.config.companyLogo&&this.updateCompanyLogoStatus(),this.config.enableSignInControl&&this.checkSignInControlPageFit(),this.hideSearchBox&&(0,v.YN)(v.tk.settings)&&(this.headerCoreRef.style.zIndex=g.K.Flyout.toString()))}if(this.updateHeaderGrid(),this.refreshTranslucentMode(),this.refreshHeaderHeight(),this.updateHeaderCoreData(),this.updateHeaderCoreOffset(),t&&!n||(this.isSearchSticky=!this.disableStickyHeader&&!this.config.disableFeed&&(this.bespokeAdActive||"always"===this.layoutState.selectedFeedDisplaySetting)),(0,dt.N)()){if(this.updateTopSitesDailyDiscoveryVisibility(),(0,Te.Vo)(l),l=!0,t){if((i||n||r||o)&&(this.fireLayoutAnimationComplete(),scrollTo(0,0),yield(0,C.rh)(400),this.config.noBckImgOnNavSticky&&0===window.scrollY)){const e="off"===this.layoutState.currentBackgroundImageType;(0,m.j3)("backgroundImage",e?"hidden":"displayed")}yield(0,Ce.y)(),this.calculateStickyBreakpoints()}this.config.companyLogo&&this.getCompanyLogo(),yield(0,Ce.y)(),this.initializeRecommendedSites(),this.config.useNewTabSettings&&this.changeNewTabSettings(this.navIsSticky)}}))));const p=this.getSelectedPivot(this.layoutState),h=(null===(t=null===y.jG||void 0===y.jG?void 0:y.jG.CurrentRequestTargetScope)||void 0===t?void 0:t.audienceMode)===c.F.Enterprise,I=h?"productivityHub"!==p:"following"!==p;this.config.enableHeadingsOnlyCardSlivers&&I&&(this.headingsOnlyHeightReduction=this.config.headingsOnlyHeightReduction||0,"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&(this.displayBlankRiver=h?"productivityHub"!==p:"gaming"!==p&&"following"!==p)),this.hideQuickLinks=(null===(i=this.config)||void 0===i?void 0:i.autoHideQuickLinksInAlways)&&"always"===(null===(n=this.layoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting),this.hideQuickLinks&&window.addEventListener("wheel",this.quickLinksToggle),yield u.getResultAsync(),this.config.auctionBeforeWPO&&this.sendAuction(),this.childRefs.searchHistory&&!this.config.enableSearchHistInf&&"always"===this.layoutState.selectedFeedDisplaySetting&&(this.childRefs.searchHistory=null,this.config.childRefs.searchHistory=null);const P=yield(0,ue.aT)((null===(s=this.layoutState.configData)||void 0===s?void 0:s.enabledFeatures)||[]);this.msNtpExpBitmask=(0,ue._W)(P),P.length&&ee.M0.addOrUpdateTmplProperty("edgExpMask",P.join("-")),(0,pt.Uo)(o.z.TopSitesLayoutData,(e=>{var t,i;this.topSitesLayoutState=e,this.checkCodexBingFlagWithNonBingDSE(),this.refreshHeaderHeight(),this.config.enableUnifiedTopSites&&this.updateHeaderGrid(),this.hideQuickLinks&&(null===(t=this.topSitesLayoutState)||void 0===t?void 0:t.isTopSitesCollapsed)&&!this.bespokeAdActive?this.topSitesHolder&&this.quickLinksDisplaySetting!==M.Z3.top&&((null===(i=this.config)||void 0===i?void 0:i.enableNewQuickLinksPositionInAlways)||(this.topSitesHolder.style.visibility="hidden")):this.hideSearchHistory=!1,this.updateHeaderCoreBelowSearchData(),(0,Ce.y)().then((()=>this.calculateStickyBreakpoints()))}));const E=e=>"productivityHub"===(0,w.$z)()||"headingsonly"===e.selectedFeedDisplaySetting||"off"===e.selectedFeedDisplaySetting;(0,dt.N)()&&this.config.useTreatmentsFromFeedResponse&&E(this.layoutState)&&!bt.SI.isOptimizationDataReceived()&&Promise.all([(0,Ee.F_)(),(0,qe.lr)()]).then((()=>{const e=this.config.useTreatmentsFromFeedResponseSuperDp&&this.config.useSuperDataProvider;E(this.layoutState)&&this.fetchAndStoreWpoTreatments(e)})),(null===b.Al||void 0===b.Al?void 0:b.Al.IsPrerender)&&!(0,qe.TR)()&&ee.M0.addOrUpdateTmplProperty("prerev","1");const O=!(0,ue.Tr)()&&!this.config.triggerLowMemDhp||this.config.noDisablePrerenderFeed;if(!this.config.enableEarlyMainFeedRequest||(null===b.Al||void 0===b.Al?void 0:b.Al.IsPrerender)&&!O||this.fetchAndStoreMainFeed(this.config.useSuperDataProvider),this.config.auctionBeforeWPO||this.sendAuction(),(0,dt.N)()){if((0,pt.Uo)(o.z.CoachmarkData,(e=>{this.hasCoachmark=!!e.coachmarkMessages})),window.addEventListener("resize",this.saveViewportInPref),window.addEventListener("beforeunload",this.saveViewportInPref),y.jG.CurrentMarket===T.I.ENUS&&"gaming"===(0,w.$z)()&&y.jG.CurrentRequestTargetScope.audienceMode!==c.F.Enterprise){if(!(0,f.$o)().getItem(d.d.VideoGameInterestFollowed)){const e="Y_993301dc-ad41-46da-b9ee-85cd71d083b7",t="Video Games";(0,gt.K0)(o.z.TopicData).followTopic(e,t).then((e=>{e&&(0,f.$o)().setItem(d.d.VideoGameInterestFollowed,"true")}))}}this.attachListenerForKeyDownScrollOnFocus()}if((0,pt.Uo)(o.z.SignInData,(e=>{void 0!==e.isUserSignedIn&&(this.renderSignInControls=!e.isUserSignedIn,this.updateHeaderCoreData())})),this.childRefs.languageMismatchBanner&&this.config.enableLanguageMismatchBanner&&(this.renderLanguageMismatchBanner="marketmismatch"===y.jG.LanguageRegionMismatch,this.renderLanguageMismatchBanner&&(0,pt.Uo)(o.z.LanguageMismatchData,(e=>(0,r.mG)(this,void 0,void 0,(function*(){this.displayLanguageMismatchBanner=e.isBannerDisplayed,this.applyHeaderStylesForLanguageMismatchBanner=e.isBannerDisplayed,this.updateHeaderGrid(),yield(0,Ce.y)()}))))),this.childRefs.conditionalBanner&&(0,pt.Uo)(o.z.ConditionalBannerData,(e=>(0,r.mG)(this,void 0,void 0,(function*(){this.displayConditionalBanner=e.isBannerDisplayed,this.updateStickyHeaderHeight(),this.updateHeaderCoreOffset(),this.updateHeaderGrid(),this.refreshHeaderHeight(),yield(0,Ce.y)().then((()=>this.calculateStickyBreakpoints()))})))),this.config.enableLangExpBanner&&this.setupLanguageExplainingBanner(),!this.childRefs.backgroundGallery||this.config.disableBackgroundGallery||y.jG.IsFrePage||(this.backgroundDataConnector=(0,gt.K0)(o.z.BackgroundData),this.backgroundDataConnector&&(yield mt.p.initState(ht.f.backgroundDataStateLoaded.getActionSender(this.backgroundDataConnector))),(0,pt.Uo)(o.z.BackgroundData,(e=>{this.renderBackgroundGallery=e.backgroundGalleryDisplayed}))),this.config.enableBespokeAds&&this.config.bespokeAdCampaignName){if(yield wt.i.getBespokeAdEligibilityAync()){const e=wt.i.getBespokeAdPayload();this.screenWidth=e.screenWidth,this.bespokeAdActive=!0,this.isSearchSticky=!this.disableStickyHeader,this.hideQuickLinks=!1,this.updateHeaderGrid(),this.refreshHeaderHeight(),this.calculateStickyBreakpoints(),this.refreshTranslucentMode(),(0,Ze.eC)().then((()=>{ee.M0.addOrUpdateTmplProperty(`BespokeAdVisible_${this.layoutState.selectedFeedDisplaySetting}`,"1"),wt.i.sendBeacons(e.adServedUrls),wt.i.setLocalStorageFrequencyCap(),wt.i.incrementTimesViewedInPsl(this.config.bespokeAdCampaignName),wt.i.sendVerificationToIas(this.config.enableBespokeAdsIasVerification)})),ht.f.bespokeAdDisplayStatusUpdated.registerObserver((e=>{e&&e.params&&e.params.length&&(this.bespokeAdActive=!1,this.isSearchSticky=!this.disableStickyHeader&&"always"===this.layoutState.selectedFeedDisplaySetting,requestAnimationFrame((()=>this.calculateSearchStickyBreakpoint())),this.updateHeaderGrid(),this.refreshHeaderHeight(),this.calculateStickyBreakpoints(),this.refreshTranslucentMode())}))}}this.isNewTabPageContentManagedByPolicy=this.layoutState.isContentFeedManagedByPolicy,this.isAppLauncherAllowedByPolicy=!1!==this.layoutState.isAppLauncherEnabledByPolicy,this.enableNewUserDefaultSettings=this.layoutState.enableNewUserDefaultSettings;let L=this.layoutState&&this.layoutState.configData;const j=(0,gt.K0)(o.z.ChromiumPageSettings);j&&void 0===L&&(L=yield j.getConfigDataAsync()),this.isShowMSRewardsAllowedByPolicy=void 0===(null==L?void 0:L.isShowMicrosoftRewardsEnabled)||L.isShowMicrosoftRewardsEnabled,this.config.enableSignInControl&&this.checkSignInStatusAndSetup(L),D.V.readyToShowRecommendedLayoutAppliedCoachmark.registerObserver((()=>(0,r.mG)(this,void 0,void 0,(function*(){ee.M0.addOrUpdateTmplProperty("scm_candidate_settingsButton","1")})))),L&&L.enabledFeatures&&(L.enabledFeatures.includes("msQuickLinksDefaultOneRow")||L.enabledFeatures.includes("msQuickLinksDefaultTwoRow"))&&(this.twoRowTopSitesEnabledThroughClientConfig=!0),this.config.enableUnifiedRecommendedSites||(this.recommendedSitesDisplaySetting=this.childRefs.recommendedSites&&(yield(0,je.P6)(!0,this.config.enableWpoRecommededSitesConfigOverride))),this.checkAndEnableMobileUpsell(),this.focusRedirectEnabled=L&&L.inPageSearchBoxType===R.HT.redirect,D.V.updateConfigDataChanged.registerObserver((e=>{const t=e&&e.params;if(!t||t.length<1)return;t[0]===R.HT.redirect!==this.focusRedirectEnabled&&(0,B.Z)()}));const $=this.showCodexBingWithNonBingDSE;this.checkCodexBingFlagWithNonBingDSE(),$!==this.showCodexBingWithNonBingDSE&&(this.updateHeaderGrid(),this.refreshHeaderHeight()),this.multiLineSearchBox&&this.focusRedirectEnabled&&"0"===(0,k.L)().get("dsp")&&(this.multiLineSearchBox=!1),Object.keys(this.childRefs).filter((e=>e&&(0,A.oO)(this.childRefs[e])&&this.filterFeedExperiencesToSkip(e))).forEach((e=>(0,$e.Fg)(this.childRefs[e]))),x.J.updateLayout.registerObserver((e=>(0,r.mG)(this,void 0,void 0,(function*(){var t,i;(null===(i=null===(t=this.config)||void 0===t?void 0:t.childRefs)||void 0===i?void 0:i.holidayEffects)&&this.updateHolidayEffectsPostion();const n=e&&e.params;n&&n.length<1||(this.updateFeedLayoutTelemetry(),this.initializePivotManager())})))),this.childRefs.recommendedSites&&window.addEventListener("recommendedSitesSelection",this.recommendedSitesSelection),this.pageSettingsDataConnector&&this.pageSettingsDataConnector.getLayoutStateAsync().then((e=>this.isAlwaysMode="always"===e.selectedFeedDisplaySetting));const U=(0,gt.K0)(o.z.AdminPortalData);this.config.enableAdminPortalInSync&&U&&(yield U.setLayout());const H=U&&U.getCurrentState();H&&H.settings&&(this.isNotificationEnabledByAdmin=!!H.settings.isShowCompanyAndIndustry),(0,dt.N)()||(yield this.initSSRContentConfigInfo(),yield this.tryLoadFeedModuleBundle()),this.updateHeaderCoreData(),this.updateHeaderCoreBelowSearchData()}))}disconnectedCallback(){super.disconnectedCallback(),(0,v.St)(this.onFlyoutEvent),(0,F.Bn)().unsubscribe(this.handleColumnArrangementChange),this.pivotManager&&(this.pivotManager.removeSwitchListener(nt.D.onPivotSwitch),this.pivotManager.removeSwitchListener(this.switchListenerCallback)),removeEventListener("scroll",this.areNavTopSitesOverlapping),removeEventListener("resize",this.onResize),removeEventListener("scroll",this.disableHover),removeEventListener("scroll",this.throttledOnScroll),removeEventListener("scroll",this.onScroll),window.removeEventListener("wheel",this.quickLinksToggle),removeEventListener("recommendedSitesSelection",this.recommendedSitesSelection)}marketLanguageConsolidation(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=(0,X.ej)(z),t=yield pe.L.getPreferenceSetting(z,!1);if(!e||t&&e===t.value){if(!e&&t&&t.value){const e=JSON.parse(t.value);e.m&&(this.onMarketValueChange(e.m),ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie.nPk.EdgeNextPageRefreshDueToMarketCookieMissing),{message:"Edge Next page refresh due to market cookie missing.",pb:Object.assign(Object.assign({},ie.nPk.EdgeNextPageRefreshDueToMarketCookieMissing.pb),{customMessage:`market: ${e.m}`})})))}}else yield pe.L.savePreferenceSetting(z,{setting:z,source:"ntp",timestamp:(new Date).getTime(),value:e})}))}beforeHydration(){return(0,r.mG)(this,void 0,void 0,(function*(){switch(this.updateTopEndCornerDisplayState(),this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":break;default:{const{viewFeedConfig:e,selectedPivot:t}=this.getViewFeedConfigAndPivot(),i=t===jt?{gamingPivotSwitched:!0}:void 0;yield this.startContentLoad(e,i,!0,t)}}}))}afterHydration(){return(0,r.mG)(this,void 0,void 0,(function*(){switch(this.refreshHeaderHeight(),this.headerGrid.style&&(this.headerGrid.style.height=this.headerHeight),this.headerSpaceHolder.style&&(this.headerSpaceHolder.style.height=this.headerHeight),this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":yield this.startContentLoad(Lt,void 0,!0)}if(void 0!==(null===window||void 0===window?void 0:window.ssrSizes)&&!window.isResized){const e=this.columnArrangement+"",t=new I.fH,i=(0,I.Nd)(t.data.innerWidth,"innerWidth"),n=(0,I.Nd)(t.data.innerHeight,"innerHeight");window.ssrSizes.ssrCol!==e&&ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie.txQ.SsrColViewportMismatch),{message:"SSR - Column count mismatch after hydration.",pb:Object.assign(Object.assign({},ie.txQ.SsrColViewportMismatch.pb),{customMessage:`ssrSizes: {ssrCol: ${window.ssrSizes.ssrCol}, ssrWidth: ${window.ssrSizes.ssrWidth} px, ssrHeight: ${window.ssrSizes.ssrHeight} px},csrSizes: {csrCol: ${e}, csrWidth: ${i} px, csrHeight: ${n} px},breakpoints: ${JSON.stringify((0,F.Bn)().breakpoints)}`})}))}}))}logCriticalException(){(0,Mt.Y)(ie.aFk.id),ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie.aFk),{message:"Fatal web component experience exception encountered.",pb:Object.assign(Object.assign({},ie.aFk.pb),{customMessage:"Fatal web component experience exception encountered in EdgeChromiumPageWC"})}))}sendAuction(){if(this.config.auctionInPageTs)return;const e=(0,dt.N)()&&this.config.disableAdsSSR&&!b.Al.IsPrerender,t=!((0,dt.N)()||this.config.disableAdsSSR);this.config.enableECPAuctionInit&&(t||e)&&this.startAdPredictions()}initSSRContentConfigInfo(){return(0,r.mG)(this,void 0,void 0,(function*(){switch(this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":return}const{viewFeedConfig:e,selectedPivot:t}=this.getViewFeedConfigAndPivot();yield this.initFeedDependencies(t).catch((e=>{const i=Object.assign(Object.assign({},ie.QyX.SuperFeedBundleLoadingError.pb),{stack:e.stack});(0,Mt.Y)(ie.QyX.SuperFeedBundleLoadingError.id),ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie.QyX.SuperFeedBundleLoadingError),{message:`Failed to load feedDependencies bundle for ${t} in SSR. ${e.message||""}`,pb:i}))})),this.contentConfigInfo=e,this.context={},yield(0,$e.Fg)(e)}))}getViewFeedConfigAndPivot(){const e=(0,w.$z)();let t;return t=e===jt?Ft:Lt,{viewFeedConfig:t,selectedPivot:e}}fetchAndStoreWpoTreatments(e=!1){var t,i,n,r;const o=e=>{e&&((0,ne.Ou)()[bt.C5.Response]=Math.round(performance.now()),bt.SI.addWpoOptimizationDataToLocalStorage(e.pageContext,y.jG.AppType,y.jG.CurrentRequestTargetScope))};(0,ne.Ou)()[bt.C5.Request]=Math.round(performance.now());const s={isXFeed:!1,ocid:"anaheim-ntp-feeds",timeoutMs:1e3,feedName:(null===(n=null===(i=null===(t=ee.M0.getPageMetadata())||void 0===t?void 0:t.contract)||void 0===i?void 0:i.page)||void 0===n?void 0:n.name)===jt?jt:"default",pageScenario:"ntp",pageConfiguration:(0,Ct.y)(this.layoutState,!1,null===(r=this.topSitesLayoutState)||void 0===r?void 0:r.isTopSitesCollapsed),requestId:ee.M0.getRequestId(),disableContent:!0,shouldUseNewWpoEndpoint:!0};if(e){(new ft.X).fetchFromWpoService(s,null).then(o)}else{new St.fy({initialRequest:{timeoutMs:1e3}},!1).fetchFromWpoService(s,!0).then(o)}}isFeedDisabled(){var e;const t=null===(e=this.layoutState)||void 0===e?void 0:e.selectedFeedDisplaySetting;return"headingsonly"===t||"off"===t}fetchAndStoreMainFeed(e=!1){var t,i,n;return(0,r.mG)(this,void 0,void 0,(function*(){const r=(0,w.$z)();if([jt,"productivityHub","following"].includes(r))return this.isOnM365Page="productivityHub"===r,void(this.isOnPersonalizeOrM365Page=this.isOnM365Page);if(this.isFeedDisabled())return;const o={experienceType:a.x.gridViewFeed,instanceSrc:"default"},s=yield P.U.getConfig(o),c=null===(i=null===(t=null==s?void 0:s.properties)||void 0===t?void 0:t.riverSectionCardProviderConfig)||void 0===i?void 0:i.initialRequest;if(!c)return;let d;this.msNtpExpBitmask&&(c.edgExpMask=this.msNtpExpBitmask);const l=null===(n=null==s?void 0:s.properties)||void 0===n?void 0:n.preloadLikelyExperiences,u=(0,E.x)(l)?void 0:()=>(0,vt.P)(l,(()=>!!d));if(bt.SI.enableEarlyMainFeedRequest=!0,(0,dt.N)()&&window.ntpSSRData&&window.ntpSSRData.wpoFeed)d=window.ntpSSRData.wpoFeed,delete window.ntpSSRData.wpoFeed;else if(e){const e=new ft.X;d=yield e.fetchFromWpoService(c,u)}else{const e=new St.fy({initialRequest:{timeoutMs:c.timeoutInMs}},!1);d=yield e.fetchFromWpoService(c,!0,u),d&&(d.responseStatus=e.getResponseStatus())}bt.SI.storeEarlyWpoFeedData(d),(0,dt.N)()||bt.SI.setSSRInitialFeedResponse(d)}))}startAdPredictions(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=(0,w.$z)();if(![jt,"productivityHub","following"].includes(e)&&!this.isFeedDisabled()){const e={experienceType:a.x.gridViewFeed,instanceSrc:"default"},t=yield P.U.getConfig(e),i=(0,yt.e)(t.properties,a.x.gridViewFeed,!0);i.fetchSamPredictContent(),i.fetchCmsPredictContent()}}))}shouldRenderRecommendedSites(){return!(!this.childRefs.recommendedSites||!this.config.hideRecommendedSitesInHeadingsOnly||this.config.enableUnifiedRecommendedSites)}checkSignInStatusAndSetup(e){var t;return(0,r.mG)(this,void 0,void 0,(function*(){const i=yield this.getPrimaryAccountInfo(),n=i&&""===i.accountId,r=void 0!==e.isEdgeSignInAllowed&&e.isEdgeSignInAllowed;return n&&(null===(t=this.pageSettingsDataConnector)||void 0===t?void 0:t.checkAuthApiIsAvailable())&&r?(this.renderSignInControls=!0,this.updateHeaderGrid(),this.checkSignInControlPageFit()):this.renderSignInControls=!1,this.updateHeaderCoreData(),n}))}getPrimaryAccountInfo(){var e;return(0,r.mG)(this,void 0,void 0,(function*(){return null===(e=this.pageSettingsDataConnector)||void 0===e?void 0:e.getPrimaryAccountInfoAsync(!1)}))}shadowDomPopulated(){var e,t;if(this.tryLoadFeedModuleBundle(),(0,dt.N)()){if(this.markVisuallyReadyRaf(),(0,Ie.FY)(U._.headerSpaceHolder,this.shadowRoot.getElementById("headerSpaceHolder")),this.backgroundOuterHolder=this.shadowRoot.getElementById("bgOuterHolder"),(0,Ie.FY)(U._.backgroundOuterHolder,this.backgroundOuterHolder),(0,Ie.FY)(U._.backgroundInnerHolder,this.shadowRoot.getElementById("bgInnerHolder")),(0,Ie.FY)(U._.navBar,this.shadowRoot.getElementById("g_nav")),(0,Ie.FY)(U._.searchHistory,this.headerCoreRef.belowSearch),this.topSitesHolder=this.shadowRoot.getElementById("topSitesHolder"),this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.off||this.hideQuickLinks&&!(null===(e=this.config)||void 0===e?void 0:e.enableNewQuickLinksPositionInAlways)&&(null===(t=this.topSitesLayoutState)||void 0===t?void 0:t.isTopSitesCollapsed)?(this.quickLinksDisplaySetting!==M.Z3.top&&(this.topSitesHolder.style.visibility="hidden"),this.hideSearchHistory=!0):this.hideSearchHistory=!1,this.updateHeaderCoreBelowSearchData(),this.childRefs.dailyDiscovery&&(this.dailyDiscovery=this.shadowRoot.getElementById("dailyDiscovery"),this.dailyDiscovery&&this.layoutState&&"always"===this.layoutState.selectedFeedDisplaySetting&&!this.layoutState.dailyDiscoveryEnabled&&(this.dailyDiscovery.style.visibility="hidden")),this.updateTopSitesDailyDiscoveryVisibilityDebounced(),this.enableOneColumn&&(this.conditionalBanner=this.shadowRoot.querySelector(".conditionalBannerHolder"),this.conditionalBanner)){new IntersectionObserver((e=>{const t=e[e.length-1];this.conditionalBannerShown=t.intersectionRatio>.5}),{root:null,rootMargin:"-10px 0px 0px 0px",threshold:.5}).observe(this.conditionalBanner)}if(this.refreshImageHeight(),this.calculateStickyBreakpoints(),this.setupTopSitesIntersectionObserver(),this.headerGrid=this.shadowRoot.getElementById("headerGrid"),this.disableStickyHeader&&this.headerGrid){const e=this.shadowRoot.getElementById("translucentFeedSentinel"),t={root:null,rootMargin:-1*this.stickyHeaderHeight+"px 0px 0px",threshold:[.1,1]};new IntersectionObserver((t=>{if(!e||"off"===this.layoutState.selectedFeedDisplaySetting)return;1===t[t.length-1].intersectionRatio?(this.headerGrid.style.zIndex="1",this.headerGrid.classList.add("headerGrid_visible"),this.headerGrid.classList.remove("headerGrid_hidden"),setTimeout((()=>{this.headerGrid.style.zIndex=null}),200)):(this.headerGrid.classList.remove("headerGrid_visible"),this.headerGrid.classList.add("headerGrid_hidden"))}),t).observe(e)}if(this.nav=this.shadowRoot.getElementById("g_nav"),this.content=this.shadowRoot.querySelector(".contentBelowNav"),addEventListener("scroll",this.onScroll),this.config.enableQuickScrollToTop&&addEventListener("wheel",this.quickScrollToTop,{passive:!1}),(this.shouldRenderRecommendedSites()||this.childRefs.dailyDiscovery)&&addEventListener("scroll",this.throttledOnScroll),this.config.disableHoverDuringScroll&&addEventListener("scroll",this.disableHover),addEventListener("resize",this.onResize),this.headerSpaceHolder.addEventListener("transitionend",this.onHeaderSpaceHolderTransitionEnd),this.initializePivotManager(),(0,Ie.FY)(U._.complianceHyperlink,this.shadowRoot.querySelector("#complianceHyperlink")),this.complianceHyperlink=(0,Ie.b_)(U._.complianceHyperlink),(0,Ie.FY)(U._.recommendedSites,this.shadowRoot.querySelector("#recommendedSites")),this.recommendedSites=(0,Ie.b_)(U._.recommendedSites),this.initializeRecommendedSites(),this.config.enableUnifiedRecommendedSites){const e={root:null,rootMargin:-1*this.stickyHeaderHeight+"px 0px 0px",threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,.95,.99,1]};new IntersectionObserver((e=>{e[e.length-1].intersectionRatio>.99?this.recommendedSites.style.visibility="visible":this.recommendedSites.style.visibility="hidden"}),e).observe(this.recommendedSites)}(0,Ee.F_)().then((()=>window.requestAnimationFrame((()=>setTimeout((()=>{var e,t;this.checkTopEndCornerFitOnPage(),this.config.companyLogo&&this.updateCompanyLogoStatus(),(null===(t=null===(e=this.config)||void 0===e?void 0:e.childRefs)||void 0===t?void 0:t.holidayEffects)&&this.updateHolidayEffectsPostion(),this.updateTopSitesQuickLinkEndMarginUsedPadding()}),10))))),this.controlNewTabSettings(),(0,qe.lr)().then((()=>{this.areNavTopSitesOverlapping(),addEventListener("scroll",this.areNavTopSitesOverlapping)})),(0,Ee.F_)().then((()=>{var e,t,i,n;var r;if(!!(r=null===(e=this.config)||void 0===e?void 0:e.serviceWorker)&&(r.enableEarlyFeedFetch||r.enableEarlyFeedFetchMem||r.enableEarlyFeedFetchMsg||r.enableBaseResponseTeeNoOp)){fe();const e=(0,ne.Ou)();(0,Ne.f)(e),ve(null===(t=this.config)||void 0===t?void 0:t.serviceWorker)}else(null===(n=null===(i=this.config)||void 0===i?void 0:i.serviceWorker)||void 0===n?void 0:n.enableNavErrorHandler)&&fe()}))}else this.updateTopEndCornerDisplayState()}checkAndLogRectsOverlapping(e,t){if(0===e.height||0===e.width||0===t.height||0===t.width)return;!(e.top>t.bottom||e.right<t.left||e.bottom<t.top||e.left>t.right)&&(ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie.QyX.SuperFeedUXOverlapError),{message:"Nav and top sites are overlapping",pb:Object.assign(Object.assign({},ie.QyX.SuperFeedUXOverlapError.pb),{customMessage:`{"nav": ${JSON.stringify(e)}, "top sites": ${JSON.stringify(t)}, "selectedQuickLinksDisplaySetting": ${this.layoutState.selectedQuickLinksDisplaySetting}}`})})),removeEventListener("scroll",this.areNavTopSitesOverlapping))}initializePivotManager(){this.pivotManager=(0,ye.l)(null),this.pivotManager&&(this.pivotManager.addSwitchListener(nt.D.onPivotSwitch,be.I.Telemetry),this.pivotManager.addSwitchListener(this.switchListenerCallback))}filterFeedExperiencesToSkip(e){if("devTools"===e&&!this.enableDevTools)return!1;if("msRewards"===e)return this.isShowRewardsAllowedByLocation;return(0,w.$z)()===jt||"gamingDiscoverStrip"!==e}startContentLoad(e,t,i=!1,n){return(0,r.mG)(this,void 0,void 0,(function*(){if(!(0,Ae.Z)(this.lastPivotSelection,{configInfo:e,context:t})){switch(this.lastPivotSelection={configInfo:e,context:t},this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":yield(0,Ee.Qm)()}i||(0,$e.Fg)(e),yield this.initFeedDependencies(n).catch((e=>{const t=Object.assign(Object.assign({},ie.QyX.SuperFeedBundleLoadingError.pb),{stack:e.stack});(0,Mt.Y)(ie.QyX.SuperFeedBundleLoadingError.id),ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie.QyX.SuperFeedBundleLoadingError),{message:`Failed to load feedDependencies bundle for ${n}. ${e.message||""}`,pb:t}))})),this.contentConfigInfo=e,this.context=t,(0,qe.lr)().then((()=>{window&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.activateTrigger&&window.chrome.ntpSettingsPrivate.NTPTrigger&&window.chrome.ntpSettingsPrivate.activateTrigger(window.chrome.ntpSettingsPrivate.NTPTrigger.FEED_VISIBLE)})),this.feedManager&&this.msNtpExpBitmask&&(this.feedManager.edgExpMask=this.msNtpExpBitmask)}}))}fireLayoutAnimationComplete(){setTimeout((()=>{Xe.I.layoutAnimationComplete.getActionSender(this.pageSettingsDataConnector).send({height:100})}),0)}reportPerfMarkers(){var e;return(0,r.mG)(this,void 0,void 0,(function*(){const t=(0,gt.K0)(o.z.ExperienceTrackerEdgeNextData);((0,ue.ZE)()||this.config.triggerLowMemDhp)&&(yield(0,qe.VD)()),yield(0,We.f)({incompleteVisualDependencyCallback:t&&t.getIncompleteVisualDependencies||null,contentViewTimeoutOverride:2e3,timeoutOverride:35e3,onBeforeNotifyCallback:()=>(0,re.o)([["TTVR.BingImage",["TTVR.BackgroundImageWC"]],["TTVR.QuickLinks",["TTVR.TopSitesEdgeNextWC"]],["TTVR.Feed",["TTVR"]]])}),yield(0,qe.lr)(),this.addE2ETtvrToSecondaryPageTimings();const i=(0,ze.S)({incompleteVisualDependencyCallback:t&&t.getIncompleteVisualDependencies||null,timeoutOverride:35e3});(null===(e=b.Al.CurrentFlightSet)||void 0===e?void 0:e.has("prg-webvitals-edg"))&&!b.Al.IsPrerender&&i.then((()=>{(0,Ke.b)((0,ne.Ou)(),(0,ne.WP)(),b.Al.IsPrerender)}));const n=(0,ne.Ou)();n&&"feedCached"in n&&ee.M0.addOrUpdateTmplProperty("swfcs",n.feedCached)}))}addE2ETtvrToSecondaryPageTimings(){var e,t,i,n,r,o,s,a;const c=(0,ne.Ou)(),d=(0,ne.Y9)();if(!c||!d)return;const u=c[oe.MV],p=c[`${oe.MV}.${l.p.searchBox}`],g=c[oe.zJ],h=`${oe.MV}.${oe.T8}`,m=`${oe.MV}.${l.p.searchBox}.${oe.T8}`,f=`${oe.zJ}.${oe.T8}`,v=(e,t,i,n)=>{c[e]=d[e]=t,(0,se.QP)({name:e,startTime:i,endTime:n})},y=(e,t)=>{c[e]=d[e]=t,(0,se.zI)({name:e,duration:t})},S=null===(e=null===performance||void 0===performance?void 0:performance.getEntriesByType)||void 0===e?void 0:e.call(performance,"navigation");if("navigate"!==(S&&1===S.length&&S[0]).type)return v(h,u,0,u),v(m,p,0,p),void v(f,g,0,g);if(!(null===(n=null===(i=null===(t=null===window||void 0===window?void 0:window.chrome)||void 0===t?void 0:t.embeddedSearch)||void 0===i?void 0:i.newTabPage)||void 0===n?void 0:n.getTabTimings))return void ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie.IfP),{message:"window.chrome.embeddedSearch.newTabPage.getTabTimings does not exist."}));const C=Math.round(performance.now());null===(a=null===(s=null===(o=null===(r=null===window||void 0===window?void 0:window.chrome)||void 0===r?void 0:r.embeddedSearch)||void 0===o?void 0:o.newTabPage)||void 0===s?void 0:s.getTabTimings)||void 0===a||a.call(s,((e,t)=>{if(!e)return void ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie.tkb),{message:"chrome.embeddedSearch.newTabPage.getTabTimings returned false."}));if(!t||!t.tabStartToNavigationStart)return void ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie.OWM),{message:"chrome.embeddedSearch.newTabPage.getTabTimings returned invalid timing object."}));let i=Math.round(t.tabStartToNavigationStart);b.Al.IsPrerender&&(i+=c[oe.U4]),u&&y(h,i+u),p&&y(m,i+p),g&&y(f,i+g);const n=Math.round(performance.now()),r=n-C;v(oe.OM,r,C,n);const o=c.telemetryBeaconFireTime;if(o){const e=n-o;ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie.SaE),{message:"chrome.embeddedSearch.newTabPage.getTabTimings returned after telemetry beacon with secondary perf markers has already fired.",pb:Object.assign(Object.assign({},ie.SaE.pb),{timeElapsed:e,timeTakenByGetTabTimings:r})}))}}))}getExperienceType(){return a.x.edgeChromiumPageWC}updateHeaderGrid(){var e,t;const{selectedFeedDisplaySetting:i}=this.layoutState,n=null===(e=null==this?void 0:this.topSitesLayoutState)||void 0===e?void 0:e.isTopSitesCollapsed,r="always"===i&&!this.config.disableFeed,o=this.layoutState.imageOfTheDayEnabled;let s=46,a=32;this.showCodexBingWithNonBingDSE&&(a=r?q:"headingsonly"===i?G:V);const c=O.jb+"px",d=this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.threerows,l=this.recommendedSitesHeight,u=this.config.enableUnifiedRecommendedSites?`${l}px`:"",p=this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.off||this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.top;let g=p?"0":"auto";this.config.enableUnifiedTopSites&&n&&!p&&(g="0");const h=this.config.enableUnifiedTopSites&&this.config.enableUnifiedRecommendedSites&&"0"!==g&&l>0,m="30px";let f=p?"0":"16px";if(r||this.bespokeAdActive){const e=this.layoutState.selectedQuickLinksDisplaySetting!==M.Z3.off,t=this.config.enableUnifiedRecommendedSites?this.layoutState.selectedQuickLinksDisplaySetting!==M.Z3.off:(this.layoutState.quickLinksEnabled||this.twoRowTopSitesEnabledThroughClientConfig||d)&&e;let i=24+this.topBannerOffsetHeight;this.enableOneColumn&&(i=32);const r=`${i}px`;if(f=h?"8px":"0",t){const e=this.bespokeAdActive?"1fr":m,t=this.config.enableUnifiedTopSites&&n?"0":"auto";let i=16;if(this.hideSearchBox&&this.layoutState.selectedQuickLinksDisplaySetting!==M.Z3.top&&(s=0,a=0,i=20),this.gridRows=`${r} ${s}px ${a}px ${i}px ${t} ${e}`,this.childRefs.dailyDiscovery&&(i-=8,this.gridRows=`${r} ${s}px ${a}px ${i}px auto 0px`),this.config.enableUnifiedRecommendedSites&&(this.gridRows=`${r} ${s}px ${a}px ${i}px ${g} ${f} ${u} 30px`,this.recommendedSitesRow=7),this.searchRow=2,this.topSitesRow=5,this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.top){const e=this.config.enableUnifiedTopSites?"0":"16px",t=`${O.jb+this.topBannerOffsetHeight}px`;this.gridRows=`${t} ${r} ${s}px ${a}px ${e} 30px`,this.childRefs.dailyDiscovery&&(this.gridRows=`${t} ${r} ${s}px ${a}px 0px 0px`),this.config.enableUnifiedRecommendedSites&&(this.gridRows=`${t} ${r} ${s}px ${a}px ${e} ${u} 30px`,this.recommendedSitesRow=6),this.searchRow=3,this.topSitesRow=1}}else this.gridRows=`${r} ${s}px ${a}px 16px 30px`,this.childRefs.dailyDiscovery&&(this.gridRows=`${r} ${s}px ${a}px 0px`),this.config.enableUnifiedRecommendedSites&&(this.gridRows=`${r} ${s}px ${a}px 16px ${g} ${f} ${u} 30px`,this.recommendedSitesRow=6),this.searchRow=2,this.topSitesRow=4;this.logoRow=0}else if(o){let e;e=this.twoRowTopSitesEnabledThroughClientConfig&&this.layoutState.selectedQuickLinksDisplaySetting?this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.tworows:(null===(t=this.topSitesLayoutState)||void 0===t?void 0:t.maxTiles)>10;const i=this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.onerow||"off"===this.layoutState.selectedQuickLinksDisplaySetting||this.config.disableFeed,n=this.enableOneColumn?"minmax(32px, 15%)":"minmax(78px, 15%)";this.layoutState.configData&&this.layoutState.configData.maxQuickLinks&&this.layoutState.configData.maxQuickLinks>=29&&this.layoutState.configData.enabledFeatures&&this.layoutState.configData.enabledFeatures.includes("msNtpExp1")&&i&&"off"===this.layoutState.selectedFeedDisplaySetting?(this.gridRows=`${n} ${s}px ${a}px 1fr auto 20%`,this.config.enableUnifiedRecommendedSites&&(this.gridRows=this.recommendedSitesDisplaySetting===M.yR.off?`${n} ${s}px ${a}px 1fr ${g} ${u} 20%`:`${n} ${s}px ${a}px 1fr ${g} ${u} 30px`,this.recommendedSitesRow=6)):(this.gridRows=e||d?`${n} ${s}px ${a}px 1fr auto 20%`:`${n} ${s}px ${a}px 1fr auto 12%`,this.config.enableUnifiedRecommendedSites&&(this.recommendedSitesDisplaySetting===M.yR.off?this.gridRows=e||d?`${n} ${s}px ${a}px 1fr ${g} ${f} ${u} 20%`:`${n} ${s}px ${a}px 1fr ${g} ${f} ${u} 12%`:this.gridRows=`${n} ${s}px ${a}px 1fr ${g} ${f} ${u} 30px`,this.recommendedSitesRow=7)),this.logoRow=1,this.searchRow=2,this.topSitesRow=5,this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.top&&(this.gridRows=`${c} ${n} ${s}px ${a}px 1fr 12%`,this.config.enableUnifiedRecommendedSites&&(this.gridRows=this.recommendedSitesDisplaySetting===M.yR.off?`${c} ${n} ${s}px ${a}px 1fr ${u} 12%`:`${c} ${n} ${s}px ${a}px 1fr ${u} 30px`,this.recommendedSitesRow=6),this.logoRow=2,this.searchRow=3,this.topSitesRow=1)}else this.config.enableUnifiedRecommendedSites&&this.layoutState.selectedQuickLinksDisplaySetting!==M.Z3.off||!this.config.enableUnifiedRecommendedSites&&(this.layoutState.quickLinksEnabled||(this.twoRowTopSitesEnabledThroughClientConfig||d)&&this.layoutState.selectedQuickLinksDisplaySetting!==M.Z3.off)?(this.gridRows=`1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px ${s}px ${a}px 32px auto 1fr`,this.config.enableUnifiedRecommendedSites&&(this.gridRows=`1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px ${s}px ${a}px 32px ${g} ${f} ${u} 1fr`,this.recommendedSitesRow=9),this.logoRow=2,this.searchRow=4,this.topSitesRow=7,this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.top&&(this.gridRows=`${c} 1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px ${s}px ${a}px 32px 1fr`,this.logoRow=3,this.searchRow=5,this.topSitesRow=1,this.config.enableUnifiedRecommendedSites&&(this.gridRows=`${c} 1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px ${s}px ${a}px 32px ${u} 1fr`,this.recommendedSitesRow=8))):(this.gridRows=`1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px ${s}px ${a}px 1fr`,this.logoRow=2,this.searchRow=4,this.topSitesRow=6,this.config.enableUnifiedRecommendedSites&&(this.gridRows=`1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px ${s}px ${a}px 32px ${g} ${u} 1fr`,this.topSitesRow=7,this.recommendedSitesRow=8));if(this.childRefs.dailyDiscovery){let e="90px";"peek"===this.layoutState.selectedFeedDisplaySetting?e="74px":"always"===this.layoutState.selectedFeedDisplaySetting&&(e="55px");const t=this.gridRows.split(" "),i=t.pop(),n="%"===i.slice(-1)?` calc(${i} - ${e}) ${e}`:` ${i} ${e}`;this.gridRows=t.join(" ")+n,this.dailyDiscoveryRow=-2}}getHeaderHeightForPeekMode(){var e;let t;if(this.bespokeAdActive)return t=this.calculateCollapsibleInformationalHeaderHeight()+this.calculateAdditionalHeaderHeight(this.columnArrangement,this.layoutState.selectedQuickLinksDisplaySetting),t;const i=this.getMinimumHeaderHeightForPeekMode();t=window.innerHeight-O.A$-(null!==(e=this.config.maxPeekViewport)&&void 0!==e?e:262);const{isTopSitesCollapsed:n}=this.topSitesLayoutState||{},{selectedQuickLinksDisplaySetting:r}=this.layoutState||{};return n&&r!=M.Z3.off&&r!=M.Z3.top&&(t-=this.config.peekAddWhenTPSColps||0),this.childRefs.recommendedSites&&!this.config.enableUnifiedRecommendedSites&&(t-=this.recommendedSitesHeight),t<i&&(t=i),t}refreshHeaderHeight(){var e,t;if(!this.topSitesLayoutState||!this.layoutState)return;if(this.config.disableFeed)return void(this.headerHeight=window.innerHeight+"px");let i;switch(this.layoutState.selectedFeedDisplaySetting){case"headingsonly":i=window.innerHeight-O.A$-this.headingsOnlyHeightReduction;break;case"peek":i=this.getHeaderHeightForPeekMode();break;case"onscroll":case"off":i=window.innerHeight;break;default:{if(this.museumCardShown)return window.innerHeight-O.A$;let n=0;this.bespokeAdActive?n=this.calculateAdditionalHeaderHeight(this.columnArrangement,this.layoutState.selectedQuickLinksDisplaySetting):n+=this.addHeaderHeightForDailyDiscovery(),this.enableOneColumn&&(n+=8),this.showCodexBingWithNonBingDSE&&(n+=this.calculateAdditionalHeaderHeightForCodexBingNudge(this.columnArrangement,this.layoutState.selectedQuickLinksDisplaySetting)),n+=this.topBannerOffsetHeight;const r=this.calculateCollapsibleInformationalHeaderHeight()+n,o=this.stickyHeaderHeight+n;if(this.config.enableUnifiedRecommendedSites&&this.recommendedSitesDisplaySetting!==M.yR.off)return this.headerHeight=r+"px";if(this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.onerow||this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.tworows||this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.threerows)return this.hideQuickLinks&&(null===(e=this.topSitesLayoutState)||void 0===e?void 0:e.isTopSitesCollapsed)&&!this.hideSearchBox?this.headerHeight=o+8+"px":this.headerHeight=r+"px";if(this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.off)return this.headerHeight=o+"px";if(this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.top)return this.headerHeight=o+O.jb+"px";i=this.layoutState.quickLinksEnabled?r:o,"tworows"===this.layoutState.selectedQuickLinksDisplaySetting&&this.columnArrangement>"c2"&&this.layoutState.quickLinksEnabled&&"always"===this.layoutState.selectedFeedDisplaySetting&&!(null===(t=this.topSitesLayoutState)||void 0===t?void 0:t.isTopSitesCollapsed)&&(i+=112);break}}this.headerHeight=i+"px"}getMinimumHeaderHeightForPeekMode(){var e;let t=0;return this.layoutState.imageOfTheDayEnabled?(this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.top&&(t+=40),t+=78,t+=46,t+=32,t+=this.topSitesHeightBelowSearchBoxForPeekMode,this.childRefs.recommendedSites&&this.config.enableUnifiedRecommendedSites&&this.recommendedSitesDisplaySetting!==M.yR.off&&(this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.top||this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.off||(null===(e=this.topSitesLayoutState)||void 0===e?void 0:e.isTopSitesCollapsed)||(t+=16),t+=this.recommendedSitesHeight),t+=30):(t+=64,this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.top&&(t+=40),t+=48,t+=72,t+=46,t+=32,t+=32,t+=this.topSitesHeightBelowSearchBoxForPeekMode,this.childRefs.recommendedSites&&this.config.enableUnifiedRecommendedSites&&this.recommendedSitesDisplaySetting!==M.yR.off&&(this.layoutState.selectedQuickLinksDisplaySetting!==M.Z3.top&&this.layoutState.selectedQuickLinksDisplaySetting!==M.Z3.off&&(t+=16),t+=this.recommendedSitesHeight),t+=30),t}addHeaderHeightForDailyDiscovery(){return"always"===this.layoutState.selectedFeedDisplaySetting&&this.childRefs.dailyDiscovery&&this.layoutState.dailyDiscoveryEnabled?55:0}refreshImageHeight(){this.imageHeight=window.innerHeight+"px"}refreshTranslucentMode(){var e,t,i,n,r,o,s,a,c,d,l,u,p,g;if(this.config.translucentFeed&&(null===(e=this.config.translucentFeed)||void 0===e?void 0:e.enableTranslucentFeed)&&this.layoutState.currentBackgroundImageType!==M.HX.off&&this.layoutState.currentBackgroundImageType!==M.HX.theme)return this.showFeedTranslucent=!0,this.stickyOverrideStyles="",(null===(t=this.config.translucentFeed)||void 0===t?void 0:t.translucentStickyHeader)&&(this.stickyOverrideStyles="background-color: "+((0,j.Y)()?"#242424e6":"#F7F7F7e6")+";"),this.feedOverrideStyles="",(null===(i=this.config.translucentFeed)||void 0===i?void 0:i.feedOpacity)&&(0,j.Y)()?this.feedOverrideStyles+="background-color: rgb(36 36 36 / "+(null===(n=this.config.translucentFeed)||void 0===n?void 0:n.feedOpacity)+");":(null===(r=this.config.translucentFeed)||void 0===r?void 0:r.feedOpacity)&&!(0,j.Y)()&&(this.feedOverrideStyles+="background-color: rgb(247 247 247 /"+(null===(o=this.config.translucentFeed)||void 0===o?void 0:o.feedOpacity)+");"),this.feedOverrideStyles+=(null===(s=this.config.translucentFeed)||void 0===s?void 0:s.feedSidePadding)?`padding-left: ${null===(a=this.config.translucentFeed)||void 0===a?void 0:a.feedSidePadding}; padding-right: ${null===(c=this.config.translucentFeed)||void 0===c?void 0:c.feedSidePadding};`:"",this.feedOverrideStyles+=(null===(d=this.config.translucentFeed)||void 0===d?void 0:d.feedBorderRadius)?`border-radius: ${null===(l=this.config.translucentFeed)||void 0===l?void 0:l.feedBorderRadius};`:"",this.feedOverrideStyles+=(null===(u=this.config.translucentFeed)||void 0===u?void 0:u.feedBoxShadow)?`box-shadow: ${null===(p=this.config.translucentFeed)||void 0===p?void 0:p.feedBoxShadow};`:"",(null===(g=this.config.translucentFeed)||void 0===g?void 0:g.enableTranslucentFeed)?(0,m.j3)("navBar","normal"):(0,m.j3)("navBar","translucentBackground"),void(0,m.j3)("backgroundImage","displayed");this.feedOverrideStyles="",this.stickyOverrideStyles="",this.showFeedTranslucent=this.scrollIsPastStyleThreshold&&this.layoutState.imageOfTheDayEnabled&&("headingsonly"===this.layoutState.selectedFeedDisplaySetting||"peek"===this.layoutState.selectedFeedDisplaySetting)&&!this.bespokeAdActive&&("peek"===this.layoutState.selectedFeedDisplaySetting||"headingsonly"===this.layoutState.selectedFeedDisplaySetting),(0,m.j3)("navBar",this.showFeedTranslucent?"translucentBackground":"normal"),this.config.translucentFeed&&(0,m.j3)("backgroundImage",this.showFeedTranslucent?"displayed":"hidden")}handleTopSitesEnableChange(e,t){if(this.topSitesHolder){if("always"===t.selectedFeedDisplaySetting&&!e)return this.topSitesHolder.style.opacity="0",void(this.topSitesHolder.style.visibility="hidden");e?(this.topSitesHolder.style.visibility="",this.topSitesHolder.style.opacity="1"):this.topSitesHolder.style.opacity="0",setTimeout((()=>{e||(this.topSitesHolder.style.visibility="hidden"),this.topSitesHolder.style.transition=null}),Dt)}}unifiedTopSitesCalculateCollapsibleInformationalHeaderHeight(){const{isTopSitesCollapsed:e}=this.topSitesLayoutState,{selectedQuickLinksDisplaySetting:t}=this.layoutState;let i=102+(t===M.Z3.top?0:16)+38;if((t===M.Z3.tworows||this.config.enableUnifiedTopSitesTwoLinesOption&&t===M.Z3.onerow)&&!e?i+=72:t!==M.Z3.onerow||e?t===M.Z3.top&&(i+=40):i+=32,this.config.enableUnifiedRecommendedSites){const n=this.recommendedSitesHeight,r=t===M.Z3.off||t===M.Z3.top;i+=n+(!(r||e&&!r)&&n>0?8:0)}return i}calculateCollapsibleInformationalHeaderHeight(){var e;if(this.config.enableUnifiedTopSites)return this.unifiedTopSitesCalculateCollapsibleInformationalHeaderHeight();const{isTopSitesCollapsed:t,maxTiles:i}=this.topSitesLayoutState||{};let n=this.config.enableUnifiedRecommendedSites?238:232,r=344;t||"always"!==this.layoutState.selectedFeedDisplaySetting||(n=this.config.enableUnifiedRecommendedSites?228:222,r=324);const{selectedQuickLinksDisplaySetting:o}=this.layoutState,s=i&&i>10&&o==M.Z3.tworows,a=i&&i>20&&o==M.Z3.threerows,c=this.columnArrangement>=L.K$.c3&&!s&&!a?84:196;let d;d=o==M.Z3.off||o==M.Z3.top?148:a?384:this.columnArrangement>=L.K$.c3&&!s?n:r;let l=d;if(t&&o!=M.Z3.off&&o!=M.Z3.top&&(l-=c,this.config.enableUnifiedRecommendedSites&&this.recommendedSitesDisplaySetting!==M.yR.off||(l-=32)),o==M.Z3.top&&(l+=O.jb),this.config.enableUnifiedRecommendedSites&&(l+=this.recommendedSitesHeight),this.displayConditionalBanner&&(l+=this.topBannerOffsetHeight),this.hideSearchBox&&o!==M.Z3.off&&o!==M.Z3.top&&((null===(e=this.topSitesLayoutState)||void 0===e?void 0:e.isTopSitesCollapsed)?l-=24:l-=85),!(0,dt.N)()){const e=b.Al.EdgeNTPHeader.tscollapsed,i=t?1:0;void 0!==e&&e!==i&&ee.M0.sendAppErrorEvent(Object.assign(Object.assign({},ie.txQ.SsrEdgeHeaderMismatch),{message:"SSR - Edge header mismatch.",pb:Object.assign(Object.assign({},ie.txQ.SsrEdgeHeaderMismatch.pb),{customMessage:`key: tsCollapsed, header: ${e}, state: ${i}, headerHeight: ${l}`})}))}return l}updateTopEndCornerDisplayState(){if(this.renderSignInControls&&this.childRefs.msRewards?(this.isShowRewardsAllowedByWindowSize=this.columnArrangement>="c5",this.showMobileAppUpsell=this.columnArrangement>="c5"):(this.isShowRewardsAllowedByWindowSize=this.columnArrangement>="c3",this.showMobileAppUpsell=this.columnArrangement>="c3"&&window.innerWidth>990),this.config.showMSBrandLogo&&(!this.config.companyLogo||!this.companyLogoImage)){const e=this.renderSignInControls?1680:1470;this.enableShowMSBrandLogo=innerWidth>e;const t=innerWidth>720;this.isShowRewardsAllowedByWindowSize=t,this.showMobileAppUpsell=t}this.showMobileAppUpsell||(0,te.ny)(`TTVR.${a.x.mobileAppUpsell}`),this.isShowRewardsAllowedByWindowSize||(0,te.ny)(`TTVR.${a.x.msRewardsWC}`),"marketmismatch"===y.jG.LanguageRegionMismatch&&this.updateLanguageToggle(),this.updateHeaderCoreData(),this.renderMarketLanguageToggle||(0,te.ny)(`TTVR.${a.x.marketLanguageToggleWC}`)}checkTopEndCornerFitOnPage(){window.requestAnimationFrame((()=>{this.updateTopEndCornerDisplayState()}))}checkMarketToggleOverlap(e,t,i){const n=e.getBoundingClientRect();let r=!1;if(n){const e=!(n.right<t.left||n.left>t.right),o=i?n.bottom>t.top:n.top<t.bottom;r=e&&o}return r}checkMarketToggleFitOnPage(){var e,t,i,n,r,o;if(!this.shadowRoot)return!0;let s=this.shadowRoot.querySelector("market-language-toggle");const a=this.shadowRoot.querySelector("cs-header-core");if(!s){if(!a)return!0;s=null===(e=a.shadowRoot)||void 0===e?void 0:e.querySelector("market-language-toggle")}if(!s||!s.shadowRoot||!(null===(t=s.shadowRoot)||void 0===t?void 0:t.children))return!0;const c=null===(i=s.shadowRoot)||void 0===i?void 0:i.children[0];if(!c)return!0;const d=c.getBoundingClientRect(),l=null===(n=this.headerCoreRef)||void 0===n?void 0:n.search;if(l&&this.checkMarketToggleOverlap(l,d,!1))return!1;const u=this.shadowRoot.querySelector("background-image");if(u){const e=null===(r=u.shadowRoot)||void 0===r?void 0:r.querySelector(".museumCard");if(e&&this.checkMarketToggleOverlap(e,d,!1))return!1}const p=this.shadowRoot.querySelector("top-sites-edgenext");if(p){if(this.checkMarketToggleOverlap(p,d,!1))return!1;const e=null===(o=p.shadowRoot)||void 0===o?void 0:o.querySelector(".action-button");if(e&&this.checkMarketToggleOverlap(e,d,!1))return!1}return!0}checkTopEndCornerOverlap(){window.requestAnimationFrame((()=>{J.forEach((e=>{this.checkAndHandleElementSearchBarOverlap(e)}))}))}checkAndHandleElementSearchBarOverlap(e){const t=(0,Ie.b_)(U._.searchBox),i=(0,Ie.b_)(e);if(!t||!i)return;const n=t.getBoundingClientRect(),r=i.getBoundingClientRect();if(!n||!r)return;n.left<=r.right&&r.left<=n.right?(i.style.visibility="hidden",i.style.pointerEvents="none"):(i.style.visibility="visible",i.style.pointerEvents="auto")}checkSignInControlPageFit(){requestAnimationFrame((()=>{this.config.hidableSearchBox&&this.isTopSitesMovedUp?this.renderSignInButton=!(innerWidth<820||innerWidth>=944&&innerWidth<1024):this.renderSignInButton=!(innerWidth<820),this.renderSignInButton&&this.renderSignInControls||(0,te.ny)(`TTVR.${a.x.signInControlWC}`),this.updateHeaderCoreData()}))}checkGalleryPageFitAndDisplayToast(){requestAnimationFrame((()=>{innerWidth<kt.Gb&&(this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!1),this.renderGalleryMinimumWidthToast())}))}renderGalleryMinimumWidthToast(){this.displayGalleryMinimumWidthToast=!0,setTimeout((()=>{this.displayGalleryMinimumWidthToast=!1}),5e3)}getSelectedPivot(e){return e&&e.selectedFeedPivot?e.selectedFeedPivot:(0,f.$o)().getItem("switchedPivot")}stampScrollTmpl(){ee.M0.addOrUpdateTmplProperty("userScrolled","1")}handleCardSliversOnScroll(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("blankRiverContainer");t&&(t.classList.add("fadeOut"),setTimeout((()=>{this.displayBlankRiver=!1}),500))}calculateStickyBreakpoints(){0===window.scrollY&&this.calculateSearchStickyBreakpoint(),this.calculateTopAndBackgroundStickyBreakpoints()}calculateSearchStickyBreakpoint(){const e=this.headerCoreRef;if(!e)return;let t=24;this.quickLinksDisplaySetting===M.Z3.top&&(t+=36),this.applyHeaderStylesForLanguageMismatchBanner&&(t+=18),t+=this.topBannerOffsetHeight;const i=e.offsetTop;this.searchStickyBreakpoint=i-t+(this.enableOneColumn?this.stickyHeaderHeight:0),(0,we.Fc)("search",this.searchStickyBreakpoint)}calculateTopAndBackgroundStickyBreakpoints(){var e;const{selectedFeedDisplaySetting:t,quickLinksEnabled:i,selectedQuickLinksDisplaySetting:n}=this.layoutState;let r,o=this.calculateAdditionalHeaderHeight(this.columnArrangement,n);const s=this.calculateAdditionalHeaderHeightForCodexBingNudge(this.columnArrangement,this.layoutState.selectedQuickLinksDisplaySetting);switch(t){case"always":{const e=this.calculateCollapsibleInformationalHeaderHeight();this.enableOneColumn&&(o+=8),this.config.enableUnifiedRecommendedSites?r=n===M.Z3.off&&this.recommendedSitesDisplaySetting===M.yR.off?0+o:e-this.stickyHeaderHeight+o:(r=i?e-this.stickyHeaderHeight+o:0+o,r=n===M.Z3.onerow?e-this.stickyHeaderHeight+o:r,r=n===M.Z3.tworows?e-this.stickyHeaderHeight+o:r,r=n===M.Z3.threerows?e-this.stickyHeaderHeight+o:r,r=n===M.Z3.top?O.jb+o:r),r+=s;break}case"peek":r=this.getHeaderHeightForPeekMode()-this.stickyHeaderHeight-this.topBannerOffsetHeight;break;case"headingsonly":r=window.innerHeight-this.stickyHeaderHeight-O.A$-this.topBannerOffsetHeight-this.headingsOnlyHeightReduction;break;default:r=window.innerHeight-this.stickyHeaderHeight-this.topBannerOffsetHeight}let a=r,c=r;const d=this.recommendedSitesHeight;this.childRefs.recommendedSites&&!this.config.enableUnifiedRecommendedSites&&(a+=d),a+=+(this.enableOneColumn?this.stickyHeaderHeight:0),this.enableOneColumn||!this.hideQuickLinks||!(null===(e=this.topSitesLayoutState)||void 0===e?void 0:e.isTopSitesCollapsed)||this.quickLinksDisplaySetting===M.Z3.top||0!==d&&this.config.enableUnifiedRecommendedSites||(c=s+8,a=s+8),!this.config.translucentFeed||this.layoutState.currentBackgroundImageType===M.HX.off&&!this.disableStickyHeader?(0,we.Fc)(H,c):(0,we.Fc)(H,-1),this.disableStickyHeader||(0,we.Fc)(_,a),this.layoutState.currentBackgroundImageType!==M.HX.off?(0,we.Fc)(W,c):(0,we.Fc)(W,-1),(0,we.Fc)("top",a),this.navIsSticky=window.scrollY>a,this.hideOneLineTopSites=this.quickLinksDisplaySetting===M.Z3.top&&window.scrollY>a-O.jb,this.updateHeaderCoreOffset(),(0,O.cN)(a)}calculateAdditionalHeaderHeight(e,t){if(!this.config||!this.config.extraHeaderHeight||"always"!==this.layoutState.selectedFeedDisplaySetting&&"peek"!==this.layoutState.selectedFeedDisplaySetting||!this.config.extraHeaderHeight[e])return 0;if(!this.bespokeAdActive)return 0;if(e<"c5")return this.config.extraHeaderHeight[e];let i=0;t!==M.Z3.off&&t!==M.Z3.top||(i=60);const n=this.config.extraHeaderHeight[e],r=Math.floor(this.screenWidth/3)-248+i;return Math.max(n,r)}calculateAdditionalHeaderHeightForCodexBingNudge(e,t){var i;if(!this.showCodexBingWithNonBingDSE||!this.config||"always"!==this.layoutState.selectedFeedDisplaySetting||e<"c2")return 0;let n=32;return(null===(i=this.topSitesLayoutState)||void 0===i?void 0:i.isTopSitesCollapsed)||t===M.Z3.off||t===M.Z3.top?n=60:t===M.Z3.tworows&&(n=10),n}getCompanyLogo(){const e=this.layoutState.currentLayout;this.showBackplate=e===M.nP.focused||e===M.nP.custom&&!this.layoutState.imageOfTheDayEnabled,this.showCompanyLogo=!("c1"===this.columnArrangement||"c2"===this.columnArrangement),this.companyLogoImage=this.getCompanyLogoFromLocalStorage(),this.updateHeaderCoreData()}updateCompanyLogoStatus(){if(!this.headerCoreRef)return;const e=this.headerCoreRef.endItems.find((e=>"ENTERPRISE-COMPANY-LOGO"===e.tagName)),t=this.headerCoreRef.endItems.find((e=>"marketLanguageToggleContainer"===e.id)),i=this.headerCoreRef.search;let n=i&&i.getBoundingClientRect();this.config.hidableSearchBox&&this.isTopSitesMovedUp&&(n=this.topSitesHolder.getBoundingClientRect()),this.updateTopEndVisibility(n,e),this.updateTopEndVisibility(n,t)}updateTopEndVisibility(e,t){const i=t&&t.getBoundingClientRect();e&&i&&(e.left<i.left&&e.right>=i.left-24||e.left>i.left&&i.right+24>=e.left?t.style.visibility="hidden":t.style.visibility="visible")}updateHolidayEffectsPostion(){this.holidayEffectsPosition="display: none;",setTimeout((()=>{var e,t;const i=getComputedStyle(this).getPropertyValue("--direction")===Je.N.ltr,n=null===(t=null===(e=this.shadowRoot.querySelector("background-image"))||void 0===e?void 0:e.shadowRoot)||void 0===t?void 0:t.querySelector(".museumCard");if(n&&n.clientWidth){const e=n.clientWidth+162;this.holidayEffectsPosition=i?`left: calc(100% - ${e}px);`:`right: calc(100% - ${e}px);`}else this.holidayEffectsPosition=i?"left: calc(100% - 300px);":"right: calc(100% - 300px);"}),Dt)}updateTopSitesQuickLinkEndMarginUsedPadding(){var e,t,i,n;const r=!!(null===(t=null===(e=this.config)||void 0===e?void 0:e.childRefs)||void 0===t?void 0:t.holidayEffects),o=null===(n=null===(i=this.shadowRoot.querySelector("background-image"))||void 0===i?void 0:i.shadowRoot)||void 0===n?void 0:n.querySelector(".museumCard");(r||o)&&setTimeout((()=>{var e,t,i;(this.layoutState.selectedQuickLinksDisplaySetting===M.Z3.off&&(null===(e=this.config)||void 0===e?void 0:e.enableNewQuickLinksPositionInAlways)||this.hideQuickLinks&&(null===(t=this.config)||void 0===t?void 0:t.enableNewQuickLinksPositionInAlways)&&(null===(i=this.topSitesLayoutState)||void 0===i?void 0:i.isTopSitesCollapsed)&&this.quickLinksDisplaySetting!==M.Z3.top)&&(r&&(this.topSitesQuickLinkEndMarginUsedPadding+=124),o&&o.clientWidth&&(this.topSitesQuickLinkEndMarginUsedPadding+=o.clientWidth),this.pageSettingsDataConnector&&this.pageSettingsDataConnector.updateTopSitesQuickLinkEndMarginUsedPadding(this.topSitesQuickLinkEndMarginUsedPadding))}),Dt)}initializeDevTools(){var e,t;if(this.config.childRefs.devTools&&"true"===(0,k.L)().get("devtools")){const i=b.Al.ClientSettings,n=(null===(e=null==i?void 0:i.detection)||void 0===e?void 0:e.isMsft)||(null===(t=null==i?void 0:i.detection)||void 0===t?void 0:t.isCorpNet);this.enableDevTools=n||y.jG.IsDebug}}isCookieConsentRequired(){return Y.A.get(Y.U.CookieConsentStatus)===Qe._.Required}updateFeedLayoutTelemetry(){ee.M0.updatePageMetadata({feed:{layout:"multicol"}})}checkAndEnableMobileUpsell(){var e,t,i;if(this.childRefs.mobileAppUpsell&&this.config.enableMobileAppUpsell){const n=b.Al.ClientSettings,r=(null===(e=null==n?void 0:n.detection)||void 0===e?void 0:e.isMsft)||(null===(t=null==n?void 0:n.detection)||void 0===t?void 0:t.isCorpNet);null===(i=this.pageSettingsDataConnector)||void 0===i||i.getPrimaryAccountInfoAsync(!0).then((e=>{const t=!r&&e.accountType!==R.l7.AAD;t&&ee.M0.addOrUpdateTmplProperty("MobileAppUpsellDisplay","1"),this.config.enableMobileAppUpsell=this.config.enableMobileAppUpsell&&t,this.showMobileAppUpsell=this.config.enableMobileAppUpsell,this.updateHeaderCoreData()}))}}checkIPLocationForRewardsMedallion(){var e;if(!(null===(e=this.config)||void 0===e?void 0:e.enableCountryCheckForRewards)||!y.jG.CountryCode)return void(this.isShowRewardsAllowedByLocation=!1);const t=y.jG.CountryCode.toUpperCase();this.isShowRewardsAllowedByLocation=null==u?void 0:u.has(t)}tryLoadFeedModuleBundle(){return(0,r.mG)(this,void 0,void 0,(function*(){this.feedModuleImportPromise||(this.feedModuleImportPromise=(0,lt.n)(this.config),yield this.feedModuleImportPromise)}))}updateHeaderCoreData(){var e;const t=this.layoutState.greetingEnabled&&this.showGreeting&&this.childRefs.welcomeGreeting&&this.columnArrangement>="c3"&&"greeting"===this.config.topLeftDisplayMode&&!this.isNewTabPageContentManagedByPolicy,i=this.isAppLauncherAllowedByPolicy,n=this.renderSignInControls&&this.renderSignInButton,r=this.childRefs.mobileAppUpsell&&this.config.enableMobileAppUpsell&&this.showMobileAppUpsell,o=this.childRefs.msRewards&&this.isShowRewardsAllowedByWindowSize&&this.isShowRewardsAllowedByLocation&&this.isShowMSRewardsAllowedByPolicy&&!this.enableNewUserDefaultSettings,s=this.childRefs.notificationBell&&"off"!==this.layoutState.selectedFeedDisplaySetting&&this.isNotificationEnabledByAdmin&&!this.enableNewUserDefaultSettings,a=this.renderMarketLanguageToggle&&this.marketToggleCanFit,c=this.showCompanyLogo&&this.config.companyLogo&&!!this.companyLogoImage,d=this.enableShowMSBrandLogo&&this.layoutState.imageOfTheDayEnabled&&this.childRefs.welcomeGreeting&&this.columnArrangement>="c3"&&"greeting"===this.config.topLeftDisplayMode&&!this.isNewTabPageContentManagedByPolicy;this.headerCoreTopStartData={waffleRef:i?this.childRefs.waffle:null,welcomeGreetingRef:t?this.childRefs.welcomeGreeting:null,companyLogoImage:this.companyLogoImage,showcompanyLogoBackplate:this.showBackplate},this.headerCoreTopEndData={signInControlRef:n?this.childRefs.signInControl:null,mobileAppUpsellRef:r?this.childRefs.mobileAppUpsell:null,rewardsRef:o?this.childRefs.msRewards:null,enableCompanyLogo:c,enableMSBranding:d,companyLogoImage:this.companyLogoImage,showcompanyLogoBackplate:this.showBackplate,notificationBellRef:s?this.childRefs.notificationBell:null,settingsRef:this.childRefs.settings,themePickerRef:this.childRefs.themePicker,marketLanguageToggleRef:a?this.childRefs.marketLanguageToggleWC:null,localeMarket:this.localeMarket,onMarketValueChange:this.onMarketValueChange,languageToggleHorizontalAlignment:null!==(e=this.config.languageToggleTreatment5)&&void 0!==e&&e}}updateHeaderCoreSearchData(){this.headerCoreSearchData={searchConfigRef:this.childRefs.search}}updateHeaderCoreBelowSearchData(){this.headerCoreBelowSearchData={hideSearchHistory:this.config.showCodexBingNudge||this.hideSearchHistory,testBingNudgeRef:this.childRefs.testBingNudge&&this.showCodexBingWithNonBingDSE?this.childRefs.testBingNudge:null,searchHistoryRef:this.childRefs.searchHistory,newsHeadlineBelowSearchboxRef:this.isNewTabPageContentManagedByPolicy?null:this.childRefs.newsHeadlineBelowSearchbox}}checkCodexBingFlagWithNonBingDSE(){var e;if(!this.config.showCodexBingNudge||this.focusRedirectEnabled||!document||!document.documentElement||"0"!==(0,k.L)().get("dsp"))return void(this.showCodexBingWithNonBingDSE=!1);const t=document.documentElement.clientHeight,{selectedFeedDisplaySetting:i}=this.layoutState,n=null===(e=null==this?void 0:this.topSitesLayoutState)||void 0===e?void 0:e.isTopSitesCollapsed,r="headingsonly"===i||"off"===i,o="always"===i;this.showCodexBingWithNonBingDSE=r?t>Z:!!o||(n?t>K:document.documentElement.clientHeight>Q),this.updateHeaderCoreBelowSearchData()}targetLanguageOnMismatch(e){var t,i;const n=b.Al.ClientSettings&&b.Al.ClientSettings.market&&b.Al.ClientSettings.market.requestInput,r=y.jG.CurrentMarket.split("-"),o={language:(null!==(t=n.language)&&void 0!==t?t:"").toLowerCase(),market:(null!==(i=n.region)&&void 0!==i?i:"").toLowerCase()};if(n&&o&&"zh"!==o.language){const t={language:o.language,market:r[r.length-1]},i=p.$n.find((e=>e.id==(0,Tt.p)(t)));if(i)return i;const n=o.market&&p.$n.find((e=>e.id==(0,Tt.p)(o)));if(n)return n;{const t=e.get(o.language);if(t)return p.$n.find((e=>e.id==t[0]))}}}updateStickyHeaderHeight(){this.stickyHeaderHeight=O.FQ,this.enableOneColumn||(this.stickyHeaderHeight+=this.topBannerOffsetHeight)}updateHeaderCoreOffset(){this.headerCoreOffset=this.quickLinksDisplaySetting!==M.Z3.top||this.hideOneLineTopSites?0:O.jb,this.enableOneColumn||(this.headerCoreOffset+=this.topBannerOffsetHeight)}setupLanguageExplainingBanner(){var e;return(0,r.mG)(this,void 0,void 0,(function*(){const t={id:"LanguageExplainingBanner",group:At.V$.Functional,placementSource:At.mv.Internal,surfaceModel:{surfaceType:At.US.HorizontalBanner,position:It.bw.Top,displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}}},contentModel:{title:"Language Explaining Banner",description:"     ?     ,         .",contentType:At.JK.CallToAction,dismissContentAction:{label:".",actionDelegate:()=>{}}}},i=[(0,Pt.HL)(Et.p.Dismissed,1728e5),(0,Pt.lH)(Et.p.Dismissed,3),(0,Pt.nQ)(Et.p.Dismissed,3)];null===(e=(0,Ot.$0)())||void 0===e||e.sendInternalPlacement(t,i)}))}attachListenerForKeyDownScrollOnFocus(){window.addEventListener("keyup",this.scrollOnKeyUp,{once:!0})}scrollOnKeyUp(e){"PageDown"!=e.key&&"ArrowDown"!=e.key||window.setTimeout((()=>{if(0==window.scrollY){const t="PageDown"==e.key?window.innerHeight:window.innerHeight/5;window.scrollBy({top:t,behavior:"smooth"})}}),1)}}(0,r.gn)([ut.LO],_t.prototype,"layoutState",void 0),(0,r.gn)([ut.LO],_t.prototype,"columnArrangement",void 0),(0,r.gn)([ut.LO],_t.prototype,"quickLinksDisplaySetting",void 0),(0,r.gn)([ut.LO],_t.prototype,"headerHeight",void 0),(0,r.gn)([ut.LO],_t.prototype,"imageHeight",void 0),(0,r.gn)([ut.LO],_t.prototype,"gridRows",void 0),(0,r.gn)([ut.LO],_t.prototype,"enableOneColumn",void 0),(0,r.gn)([ut.LO],_t.prototype,"showPivotRefreshButton",void 0),(0,r.gn)([ut.LO],_t.prototype,"closeRefreshAnimation",void 0),(0,r.gn)([ut.LO],_t.prototype,"logoRow",void 0),(0,r.gn)([ut.LO],_t.prototype,"searchRow",void 0),(0,r.gn)([ut.LO],_t.prototype,"topSitesRow",void 0),(0,r.gn)([ut.LO],_t.prototype,"recommendedSitesRow",void 0),(0,r.gn)([ut.LO],_t.prototype,"dailyDiscoveryRow",void 0),(0,r.gn)([ut.LO],_t.prototype,"showFeedTranslucent",void 0),(0,r.gn)([ut.LO],_t.prototype,"stickyOverrideStyles",void 0),(0,r.gn)([ut.LO],_t.prototype,"feedOverrideStyles",void 0),(0,r.gn)([ut.LO],_t.prototype,"enableHiddenRecommendedSitesStyles",void 0),(0,r.gn)([ut.LO],_t.prototype,"recommendedSitesDisplaySetting",void 0),(0,r.gn)([ut.LO],_t.prototype,"brandZoneShowInRecommendedSites",void 0),(0,r.gn)([ut.LO],_t.prototype,"brandZoneSize",void 0),(0,r.gn)([ut.LO],_t.prototype,"hasCoachmark",void 0),(0,r.gn)([ut.LO],_t.prototype,"navIsSticky",void 0),(0,r.gn)([ut.LO],_t.prototype,"pivotManager",void 0),(0,r.gn)([ut.LO],_t.prototype,"conditionalBannerShown",void 0),(0,r.gn)([ut.LO],_t.prototype,"isAlwaysMode",void 0),(0,r.gn)([ut.LO],_t.prototype,"bottomRightCornerClassName",void 0),(0,r.gn)([ut.LO],_t.prototype,"className",void 0),(0,r.gn)([ut.LO],_t.prototype,"disableStickyHeader",void 0),(0,r.gn)([ut.LO],_t.prototype,"canaryFlightEnabled",void 0),(0,r.gn)([ut.LO],_t.prototype,"holidayEffectsPosition",void 0),(0,r.gn)([ut.LO],_t.prototype,"renderLanguageMismatchBanner",void 0),(0,r.gn)([ut.LO],_t.prototype,"displayLanguageMismatchBanner",void 0),(0,r.gn)([ut.LO],_t.prototype,"applyHeaderStylesForLanguageMismatchBanner",void 0),(0,r.gn)([ut.LO],_t.prototype,"displayConditionalBanner",void 0),(0,r.gn)([ut.LO],_t.prototype,"isOnPersonalizeOrM365Page",void 0),(0,r.gn)([ut.LO],_t.prototype,"isOnM365Page",void 0),(0,r.gn)([ut.LO],_t.prototype,"nowPivotId",void 0),(0,r.gn)([ut.LO],_t.prototype,"hideOneLineTopSites",void 0),(0,r.gn)([ut.LO],_t.prototype,"isNewTabPageContentManagedByPolicy",void 0),(0,r.gn)([ut.LO],_t.prototype,"contentConfigInfo",void 0),(0,r.gn)([ut.LO],_t.prototype,"context",void 0),(0,r.gn)([ut.LO],_t.prototype,"layoutTemplateMap",void 0),(0,r.gn)([ut.LO],_t.prototype,"feedManager",void 0),(0,r.gn)([ut.LO],_t.prototype,"renderBackgroundGallery",void 0),(0,r.gn)([ut.LO],_t.prototype,"displayGalleryMinimumWidthToast",void 0),(0,r.gn)([ut.LO],_t.prototype,"headerCoreTopStartData",void 0),(0,r.gn)([ut.LO],_t.prototype,"headerCoreTopEndData",void 0),(0,r.gn)([ut.LO],_t.prototype,"headerCoreSearchData",void 0),(0,r.gn)([ut.LO],_t.prototype,"headerCoreBelowSearchData",void 0),(0,r.gn)([ut.LO],_t.prototype,"headerCoreOffset",void 0),(0,r.gn)([ut.LO],_t.prototype,"stickyHeaderHeight",void 0),(0,r.gn)([ut.LO],_t.prototype,"isSearchSticky",void 0),(0,r.gn)([ut.LO],_t.prototype,"hideSearchBox",void 0),(0,r.gn)([ut.lk],_t.prototype,"topBannerOffsetHeight",null),(0,r.gn)([ut.lk],_t.prototype,"topSitesOffsetHeight",null),(0,r.gn)([ut.LO],_t.prototype,"multiLineSearchBox",void 0),(0,r.gn)([ut.LO],_t.prototype,"showCodexBingWithNonBingDSE",void 0),(0,r.gn)([ut.LO],_t.prototype,"displayBlankRiver",void 0);var Wt=i(49218),zt=i(93703),Gt=i(41472),Vt=i(84829),qt=i(62014),Zt=i(57757),Kt=i(81563),Qt=i(72462),Jt=i(82891);Vt.q,Zt.Z;const Xt=(e,t=!1)=>{const i=t?`window.dispatchEvent(new Event("${e}"));`:"";return Wt.dy`<script nonce="${()=>window.NONCE_ID}">_pageTimings["${Wt.dy.partial(`${e}-Init`)}"] = Math.round(performance.now()); if (performance && performance.now) { window.requestAnimationFrame && window.requestAnimationFrame(() =>{ _pageTimings["${Wt.dy.partial(`${e}-RAF`)}"] = Math.round(performance.now()); setTimeout(() =>{ window._pageTimings["${Wt.dy.partial(e)}"] = Math.round(performance.now()); }); }); } ${Wt.dy.partial(i)}</script>`},Yt=e=>`--sticky-height:${e.stickyHeaderHeight||108}px;--search-sticky-extra-height:${e.topBannerOffsetHeight}px`,ei=Wt.dy`<div class="refreshPage ${e=>e.closeRefreshAnimation?"hide":""}"><fluent-progress-ring></fluent-progress-ring></div>`,ti=Wt.dy`<div class="doubleWideRiverCard"></div>`,ii=Wt.dy`<div class="singleWideRiverCard"></div>`,ni=Wt.dy`${ti} ${ii} ${ii} ${ii}`,ri=Wt.dy`${ti} ${ii} ${ii}`,oi=Wt.dy`${ti} ${ii}`,si=Wt.dy`${ti}`,ai=Wt.dy`${ii}`,ci=Wt.dy`<div id="blankRiverContainer" class="blankRiverContainer">${(0,zt.g)((e=>"c5"===e.columnArrangement),ni)} ${(0,zt.g)((e=>"c4"===e.columnArrangement),ri)} ${(0,zt.g)((e=>"c3"===e.columnArrangement),oi)} ${(0,zt.g)((e=>"c2"===e.columnArrangement),si)} ${(0,zt.g)((e=>"c1"===e.columnArrangement),ai)}</div>`,di=Wt.dy`<div class="navAndContent ${e=>e.config.enableOneColumn?"navAndContentOneColumn":""} ${e=>e.showFeedTranslucent?"navAndContent_tb":""} ${e=>{var t;return(null===(t=e.config.translucentFeed)||void 0===t?void 0:t.windowsBlur)&&e.showFeedTranslucent&&!e.navIsSticky?"navAndContent_wb":""}} ${e=>{var t;return(null===(t=e.config.translucentFeed)||void 0===t?void 0:t.windowsBlur)&&e.showFeedTranslucent&&e.navIsSticky?"navAndContent_nwb":""}} ${e=>{var t;return(null===(t=e.config.translucentFeed)||void 0===t?void 0:t.enableTranslucentFeed)?"navAndContent_nb":""}} ${e=>e.config.enableRiverZoom?"riverZoom":""} ${e=>e.config.solidColor?"solidtx":""}">${e=>(0,Kt.Ot)(e.childRefs.backToTopButton)} ${(0,zt.g)((e=>"headingsonly"===e.layoutState.selectedFeedDisplaySetting&&!!e.childRefs.scrollDownButton),Wt.dy`<div id="scrollDownButtonContainer">${e=>(0,Kt.Ot)(e.childRefs.scrollDownButton,{properties:{scrollToShowFeed:e.scrollToShowFeed,isOnBackgroundImage:!!e.layoutState.imageOfTheDayEnabled}})}</div>`)} ${(0,zt.g)((e=>!e.config.enableUnifiedRecommendedSites),Wt.dy`<div id="recommendedSites" class="${e=>e.recommendedSitesDisplaySetting===M.yR.off?"hide":""}">${(0,zt.g)((e=>!e.enableHiddenRecommendedSitesStyles),Wt.dy`${e=>(0,Kt.Ot)(e.childRefs.recommendedSites,{ttvrMarkerAggregate:"Header"})}`)}</div>`)}<div class="navAndContent_feed ${e=>"play"===e.nowPivotId?"navAndContent_feed_fullpage":""}" style="${e=>e.feedOverrideStyles}; ${e=>Yt(e)}"><div class="g_nav_container"><div id="g_nav" style="${e=>e.isOnM365Page&&e.config.translucentFeed?"position:relative;":""}" class="nav ${e=>e.className} ${e=>e.config.enableOneColumn?"navStickyOneColumn":""} ${e=>e.conditionalBannerShown?"conditionalBannerShown":""} ${e=>e.config.translucentFeed&&e.config.translucentFeed.translucentStickyHeader&&e.showFeedTranslucent?"translucentHeader":""}" ${(0,we.Fl)({stickyClassName:"nav_sticky",breakpointName:_})} ${e=>e.config.solidColor?"solidtx":""}"><div class="contentSized navSized ${e=>e.config.enableOneColumn?"contentSizedOneColumn":""} ${e=>e.config.enableRiverZoom?"short":""}">${e=>{var t,i;return(0,Kt.Ot)(e.childRefs.superNav,{ttvrMarkerAggregate:"Header",properties:{onRefreshFeed:e.onRefreshFeed,enablePivotRefreshFeed:null===(t=e.config)||void 0===t?void 0:t.enablePivotRefreshFeed,enableOnlyScrollToTop:null===(i=e.config)||void 0===i?void 0:i.enableOnlyScrollToTop}})}}</div></div></div>${(0,zt.g)((e=>e.showPivotRefreshButton),ei)}<div style="${e=>e.isOnM365Page&&e.config.translucentFeed?"margin-top:0;":""}" class="contentBelowNav ${e=>e.isOnM365Page?"":"contentSized"} ${e=>!e.isOnM365Page&&e.config.enableOneColumn?"contentSizedOneColumn":""} ${e=>"play"===e.nowPivotId?"contentSizedFullScreen":""} ${e=>e.config.enableRiverZoom?"riverZoom short":""}">${(0,zt.g)((e=>!e.isOnPersonalizeOrM365Page&&!e.config.childRefs.superBreakingNews),Wt.dy`${e=>(0,Kt.Ot)(e.childRefs.breakingNews,{ttvrMarkerAggregate:"Header"})}`)} ${(0,zt.g)((e=>!e.isOnPersonalizeOrM365Page&&e.config.childRefs.superBreakingNews&&e.config.useSuperBreakingNews),Wt.dy`${e=>(0,Kt.Ot)(e.childRefs.superBreakingNews,{attributes:{style:"display: grid; justify-items: center;"},ttvrMarkerAggregate:"Header"})}`)} ${(0,zt.g)((e=>"gaming"===e.nowPivotId&&e.childRefs.gamingDiscoverStrip),Wt.dy`${e=>(0,Kt.Ot)(e.childRefs.gamingDiscoverStrip,{ttvrMarkerAggregate:"Header"})}`)} ${(0,zt.g)((e=>e.config.enableHeadingsOnlyCardSlivers&&e.displayBlankRiver),ci)} ${(0,zt.g)((e=>e.contentConfigInfo),Wt.dy`${e=>{var t;return(0,Kt.Ot)(e.contentConfigInfo,{includeTelemetryTag:!1,properties:{gamingPivotSwitched:null===(t=e.context)||void 0===t?void 0:t.gamingPivotSwitched,context:e.context,feedManager:e.feedManager,layoutTemplateMap:e.layoutTemplateMap},memoize:!1})}}`)}</div></div></div>`,li=Wt.dy`<msn-toast class="backgroundGalleryMinimumWidthToast">${e=>e.strings.backgroundGalleryBelowMinimumWidthToastText}</msn-toast>`,ui=Wt.dy`<cs-header-core :startSection=${e=>e.headerCoreTopStartData} :endSection=${e=>e.headerCoreTopEndData} :searchSection=${e=>e.headerCoreSearchData} :belowSearchSection=${e=>e.headerCoreBelowSearchData} :addInlineTTVRScript=${e=>Xt} :topSitesInCenter=${e=>e.hideSearchBox&&e.isAlwaysMode&&e.quickLinksDisplaySetting!==M.Z3.off&&e.quickLinksDisplaySetting!==M.Z3.top} class="${e=>e.isSearchSticky?"search-sticky":""} ${e=>e.hideSearchBox?"hide-search-box":""}" style="grid-row:${e=>e.searchRow};${e=>(e=>`--header-offset:${e.headerCoreOffset||0}px;--header-top-margin:24px;`)(e)}" ${(0,Gt.i)("headerCoreRef")}></cs-header-core>`,pi=Wt.dy`
${(0,zt.g)((e=>e.renderLanguageMismatchBanner),Wt.dy`<div id="languageMismatchBannerHolder">${e=>(0,Kt.Ot)(e.childRefs.languageMismatchBanner)}</div>`)}
${(0,zt.g)((e=>e.childRefs.conditionalBanner),Wt.dy`<div class="conditionalBannerHolder">${e=>(0,Kt.Ot)(e.childRefs.conditionalBanner)}</div>`)}
${(0,zt.g)((e=>e.childRefs.promoBanner),Wt.dy`<div class="conditionalBannerHolder">${e=>(0,Kt.Ot)(e.childRefs.promoBanner)}</div>`)}
${(0,zt.g)((e=>e.childRefs.coachmark),Wt.dy`<div class="coachMarkHolder">${e=>(0,Kt.Ot)(e.childRefs.coachmark)}</div>`)}
${(0,zt.g)((e=>e.childRefs.superCoachMark),Wt.dy`<div class="superCoachMarkHolder">${e=>(0,Kt.Ot)(e.childRefs.superCoachMark)}</div>`)}
${(0,zt.g)((e=>e.childRefs.superNavCoachMark),Wt.dy`${e=>(0,Kt.Ot)(e.childRefs.superNavCoachMark,{attributes:{style:"display: none"}})}`)}
${(0,zt.g)((e=>e.childRefs.stickyPeek),Wt.dy`<div class="stickyPeekHolder">${e=>(0,Kt.Ot)(e.childRefs.stickyPeek)}</div>`)}
${(0,zt.g)((e=>e.childRefs.officeCoachmark),Wt.dy`<div class="officeCoachmarkHolder">${e=>(0,Kt.Ot)(e.childRefs.officeCoachmark)}</div>`)}
${(0,zt.g)((e=>e.displayGalleryMinimumWidthToast),li)}<div id="headerGrid" style="grid-template-rows: ${e=>e.gridRows};height:${e=>e.headerHeight};" role="${e=>"off"===e.layoutState.selectedFeedDisplaySetting?"main":"banner"}"><div class="companyLogoHolder_aboveSearch" ${e=>e.logoRow?"grid-row: ${x => x.logoRow};":""} style=${e=>e.logoRow&&e.quickLinksDisplaySetting===M.Z3.top?"grid-row:"+e.logoRow:""} ${(0,Te.XJ)()}>${(0,zt.g)((e=>"always"!==e.layoutState.selectedFeedDisplaySetting&&!e.layoutState.imageOfTheDayEnabled),Wt.dy`${Wt.dy.partial(qt.Z)}`)}</div>${ui}<div id="topSitesHolder" class=" ${e=>e.quickLinksDisplaySetting===M.Z3.top?"oneline-topsite-holder":""} ${e=>e.hideOneLineTopSites||e.quickLinksDisplaySetting===M.Z3.off?"hide":""} ${e=>e.config.enableRiverZoom&&e.quickLinksDisplaySetting!==M.Z3.top?"short":""} ${e=>e.hideSearchBox&&e.isAlwaysMode?"move-upward":""} " style="grid-row: ${e=>e.topSitesRow}; ${e=>(e=>`--top-banner-offset-height:${e.topBannerOffsetHeight||0}px;`)(e)}" ${(0,Te.XJ)()}>${(0,zt.g)((e=>e.topSitesLayoutState&&e.childRefs.topSites),(e=>{var t,i;return(0,Qt.Z)(e.childRefs.topSites,{attributes:{defaultCollapsedState:!!(null===(t=e.topSitesLayoutState)||void 0===t?void 0:t.isTopSitesCollapsed),showCollapsibleControl:!!(null===(i=e.config.topSitesCollapsibleControlConfig)||void 0===i?void 0:i.showCollapsibleControl),selectedQuickLinksDisplaySetting:e.quickLinksDisplaySetting,quickLinksToggleSpacingForBanner:!(!e.applyBannerHeaderStyle&&!e.displayConditionalBanner)},ttvrMarkerAggregate:"Header"})}))}</div>${(0,zt.g)((e=>e.config.enableUnifiedRecommendedSites),Wt.dy`<div id="recommendedSites" class=" ${e=>e.recommendedSitesDisplaySetting===M.yR.off?"hide":""} ${e=>e.config.enableUnifiedRecommendedSites?"unified":""} " style="grid-row: ${e=>e.recommendedSitesRow};" ${(0,Te.XJ)()}>${(0,zt.g)((e=>!e.enableHiddenRecommendedSitesStyles),Wt.dy` ${e=>(0,Kt.Ot)(e.childRefs.recommendedSites,{properties:{narrowed:!e.layoutState.imageOfTheDayEnabled&&["peek","headingsonly","off"].includes(e.layoutState.selectedFeedDisplaySetting),isOnBackgroundImage:!!e.layoutState.imageOfTheDayEnabled},ttvrMarkerAggregate:"Header"})} `)}</div>`)} ${(0,zt.g)((e=>e.childRefs.dailyDiscovery),Wt.dy`<div id="dailyDiscovery" style="${e=>"grid-row:"+e.dailyDiscoveryRow+" / auto"}"  ${(0,Te.XJ)()}>${e=>(0,Kt.Ot)(e.childRefs.dailyDiscovery,{properties:{currentLayout:e.layoutState.currentLayout,selectedFeedDisplaySetting:e.layoutState.selectedFeedDisplaySetting,backgroundImageType:e.layoutState.currentBackgroundImageType},ttvrMarkerAggregate:"Header"})}</div>`)} ${(0,zt.g)((e=>e.config.complianceHyperlink),Wt.dy`<a href=${e=>(0,Jt.h_)(e.config.complianceHyperlink.url)} id="complianceHyperlink" class="${e=>e.layoutState.imageOfTheDayEnabled?"complianceHyperlink_imageEnabled":null}" ${(0,Te.XJ)()}>${e=>e.config.complianceHyperlink.text}</a>`)} ${(0,zt.g)((e=>e.childRefs.holidayEffects&&"off"!==e.layoutState.selectedFeedDisplaySetting&&"focused"!==e.layoutState.currentLayout),Wt.dy`<div class="holidayEffectsHolder ${e=>e.layoutState.currentBackgroundImageType!==M.HX.off?"darkMode":""}" id="holidayEffects" style="${e=>e.holidayEffectsPosition}">${e=>(0,Kt.Ot)(e.childRefs.holidayEffects,{ttvrMarkerAggregate:"Header"})}</div>`)} ${(0,zt.g)((e=>e.childRefs.backgroundGallery&&e.renderBackgroundGallery),Wt.dy`<div id="backgroundGalleryContainer">${e=>(0,Kt.Ot)(e.childRefs.backgroundGallery,{memoize:!1,ttvrMarkerAggregate:"Header"})}</div>`)}</div>${(0,zt.g)((e=>e.config.translucentFeed&&!e.disableStickyHeader),Wt.dy`<div ${(0,we.Fl)({stickyClassName:"translucentSticky",breakpointName:W})} style=${e=>e.stickyOverrideStyles}></div>`)}<div ${(0,Gt.i)("headerSpaceHolder")} id="headerSpaceHolder" style="height:${e=>e.headerHeight};${e=>Yt(e)}" class="${e=>e.config.translucentFeed&&e.disableStickyHeader?"":"headerSpaceHolder"}"><div id="bgOuterHolder" class="bgOuterHolder ${e=>e.config.solidColor?"solidtx":""}" ${(0,we.Fl)({stickyClassName:"bgOuterHolder_sticky",breakpointName:H})}><div id="bgInnerHolder" style="height:${e=>e.imageHeight};">${e=>{var t,i;return(0,Qt.Z)(e.childRefs.backgroundImage,{attributes:{translucentFeedEnabled:!!e.config.translucentFeed,windowsBlurOpacity:!!((null===(t=e.config.translucentFeed)||void 0===t?void 0:t.windowsBlur)&&e.showFeedTranslucent&&e.navIsSticky),wholePageTranslucentFeed:!!(null===(i=e.config.translucentFeed)||void 0===i?void 0:i.wholePageOpacity)},ttvrMarkerAggregate:"Header"})}}</div></div></div><div id="translucentFeedSentinel"></div>${(0,zt.g)((e=>"off"!==e.layoutState.selectedFeedDisplaySetting&&!e.config.disableFeed),di)}
${(0,zt.g)((e=>e.childRefs.topSites&&!e.hideOneLineTopSites),Wt.dy`${e=>(0,Kt.Ot)(e.childRefs.edgeShopping,{ttvrMarkerAggregate:"Header"})}`)}
${(0,zt.g)((e=>e.enableDevTools),Wt.dy`${e=>(0,Kt.Ot)(e.childRefs.devTools)}`)}
${e=>(0,Kt.Ot)(e.childRefs.sharedLinks,{ttvrMarkerAggregate:"Header"})}
${(0,zt.g)((e=>e.childRefs.feedback),Wt.dy`${e=>(0,Kt.Ot)(e.childRefs.feedback,{properties:{isAutoHide:!e.isAlwaysMode},ttvrMarkerAggregate:"Header"})}`)}
`,gi=Wt.dy` ${(0,zt.g)((e=>e.config.enableMournMode),Wt.dy`<div class="mourn">${pi}</div>`)} ${(0,zt.g)((e=>!e.config.enableMournMode),pi)} ${(0,zt.g)((e=>window.isSSREnabled),Xt(`${te.nz}${l.p.complete}`))}
`;var hi=i(14165),mi=i(78923),fi=i(29717),vi=i(74449);const yi=(g.K.Over+2).toString(),bi=(g.K.Over+3).toString(),Si=(g.K.Nav+2).toString(),Ci=mi.i`
.companyLogoHolder_aboveSearch > svg{fill:white}.navAndContent,.nav.nav_sticky,.bgOuterHolder_sticky{background:#242424}.translucentHeader.nav.nav_sticky{background:#242424e6}.translucentSticky{background:#242424}.navAndContent_wb{background:rgba(0,0,0,.5) !important;backdrop-filter:blur(3px)}.doubleWideRiverCard,.singleWideRiverCard{background:#656565}`,wi=mi.i`
#backgroundGalleryContainer{z-index:${g.K.Flyout.toString()}}#scrollDownButtonContainer{position:fixed;z-index:${(g.K.Over+3).toString()}}.mourn{filter:grayscale(1)}#dailyDiscovery{z-index:${bi};height:38px;transition:opacity 0.3s ease-out 0s;opacity:1}.backgroundGalleryMinimumWidthToast{bottom:25px;left:50%;position:fixed;transform:translateX(-50%);width:fit-content;z-index:${g.K.Overlay.toString()}}.bgOuterHolder{height:100%;overflow:hidden;position:fixed;width:100%}.bgOuterHolder_sticky{background:#F7F7F7;height:calc(var(--sticky-height,108px) + var(--search-sticky-extra-height,0px));z-index:${g.K.Over.toString()}}#bgInnerHolder{height:100%;opacity:1;overflow:hidden;top:0px;transform:scale(1);width:100%}.coachMarkHolder{left:initial;position:fixed;z-index:${g.K.Flyout.toString()}}.companyLogoHolder_aboveSearch{align-self:end;height:48px;opacity:1;width:225px}.companyLogoHolder_aboveSearch > svg{fill:#737373}#complianceHyperlink{bottom:8px;color:${vi.Q};
    font-size: 10px;
    justify-self: self-start;
    padding: 0 8px;
    opacity: 1;
    position: absolute;
    text-decoration: none;
    transition: opacity 0.2s;
    z-index: ${yi}}#complianceHyperlink.complianceHyperlink_imageEnabled,#complianceHyperlink.translucentFeed{color:white;opacity:0.64}#complianceHyperlink.onScroll{transform:translate(-50%,-60px)}.complianceHyperlink_hide{opacity:0 !important}.doubleWideRiverCard,.singleWideRiverCard{background:#dadada;border-radius:8px;height:304px}.doubleWideRiverCard{width:612px}.singleWideRiverCard{width:300px}.blankRiverContainer{display:flex;gap:12px}.blankRiverContainer.fadeOut{opacity:0;transition:opacity 0.5s}.location-marker{bottom:5px;color:white;justify-self:self-start;padding:0 8px;opacity:1;position:absolute;left:36px;text-decoration:none;transition:opacity 0.2s;z-index:${g.K.Nav.toString()}}.conditionalBannerHolder{max-height:200px;position:fixed;top:0;width:100%;z-index:${g.K.Overlay.toString()}}#headerGrid{display:grid;justify-items:center;position:absolute;top:0;width:100%}.headerGrid_hidden{opacity:0;z-index:1}.headerGrid_visible{opacity:1}.headerSpaceHolder{transition:height .3s ease-out,visibility 0.3s}.holidayEffectsHolder{position:absolute;bottom:7px;opacity:1}.holidayEffectsHolder.darkMode{--border:none;--bg-color:#0000008A;--flipper-color:#fff}.holidayEffectsSticky{--menu-opacity:0}.nav{display:flex;height:50px;justify-content:center;z-index:${g.K.Nav.toString()}}.navAndContent{align-items:center;background:#F7F7F7;display:flex;flex-direction:column;min-height:100vh;position:relative;transition:background-color .3s ease-out}.navAndContent.navAndContent_tb{background:#00000051}.navAndContent.navAndContent_nb{background:#00000000}.navAndContent_wb{background:rgba(255,255,255,.5) !important;backdrop-filter:blur(10px);transition:unset !important}.navAndContent.navAndContent_nwb{transition:unset}navAndContent.riverZoom{overflow-x:hidden}#recommendedSites{align-items:center;display:flex;flex-direction:column}#recommendedSites.hide{display:none}#recommendedSites.unified{z-index:${yi}}.navAndContent_feed{align-items:center;display:flex;flex-direction:column}.navAndContent_feed_fullpage{width:100%}.g_nav_container{position:relative;display:flex;justify-content:center}.navAndContent_feed > .contentBelowNav{margin-top:50px}.navAndContent_feed_hidden_rs{background:#00000051}.nav{position:absolute;top:0px}.nav.nav_sticky{background:#F7F7F7;position:fixed;top:calc(var(--sticky-height,108px) + var(--search-sticky-extra-height,0px));width:100%}.translucentHeader.nav.nav_sticky{background:#F7F7F7e6}.navSized{align-items:center;display:flex;gap:5px}.translucentSticky{background:#F7F7F7;height:108px;position:fixed;top:0px;width:100%;z-index:${g.K.Over.toString()}}#topSitesHolder{height:100%;min-width:0;z-index:${bi};opacity:1}#topSitesHolder.oneline-topsite-holder{height:36px;position:fixed;top:var(--top-banner-offset-height,0px);width:100%;z-index:${Si}}#topSitesHolder.hide{visibility:hidden;opacity:0}#topSitesHolder.move-upward{z-index:${Si}}.topSitesZoomHidden{visibility:hidden}.headerGrid_hidden cs-header-core::part(core){top:calc(-1 * var(--header-height))}cs-header-core{z-index:${Si}}cs-header-core.hide-search-box:focus-within{z-index:700}@media (max-width:1097px){#topSitesHolder{height:100%}}@media (min-width:1133px) and (max-width:1256px){.contentSized.short{width:1109px}}@media (min-width:${(0,F.sZ)(3).toString()}px) and (max-width:1132px){.contentSized.short{width:996px}#topSitesHolder.short{transform:scale(0.9)}}@media (min-width:856px) and (max-width:948px){.contentSized.short{width:830px}#topSitesHolder.short{transform:scale(0.9)}}@media (min-width:${(0,F.sZ)(2).toString()}px) and (max-width:855px){.contentSized.short{width:775px}#topSitesHolder.short{transform:scale(0.9)}}.contentSizedFullScreen{width:100%!important}.refreshPage{height:50px;width:50px;margin-top:50px;margin-bottom:-50px}.refreshPage.hide{animation:hideRefreshBtn ease-in both 1s}@keyframes hideRefreshBtn{from{height:50px;opacity:1}to{height:0px;opacity:0}}.refreshPage fluent-progress-ring{margin:8px auto}${(0,L.vW)(null,L.K$.c2)}{.contentSized{width:${hi._3.toString()}px}#topSitesHolder{height:100%}}${(0,L.eH)(L.K$.c3)}{.contentSized{width:${hi.Xn.toString()}px;
    }
}

${(0,L.eH)(L.K$.c4)}{.contentSized{width:${hi.xX.toString()}px;
    }
}

${(0,L.vW)(L.K$.c5,null)}{.contentSized{width:${hi.sc.toString()}px;
    }
}

${(0,L.vW)(null,L.K$.c1)}{.contentSizedOneColumn{width:${hi.xs.toString()}px}.nav.navStickyOneColumn{top:0}.navStickyOneColumn.conditionalBannerShown{top:30px}.navAndContentOneColumn{z-index:401}.disable-hover{pointer-events:none}}.solidtx{background:#f5f5f5}`.withBehaviors((0,fi.Uu)(Ci)),Ti={experienceConfigSchema:undefined};(0,n.W)()},34667:function(e,t,i){"use strict";i.r(t),i.d(t,{AdLabelType:function(){return B},BlockedHosts:function(){return N},DragDropType:function(){return a},GroupPolicySettings:function(){return o},OneLineTopSitesStyles:function(){return ar},OptioTopSitesTemplate:function(){return ni},SharedLinksUrl:function(){return F},TileSource:function(){return s},ToggleOverflowMenuElement:function(){return j},ToolingInfo:function(){return lr},TopSitesClassNameConstants:function(){return L},TopSitesEdgeNextWC:function(){return wn},TopSitesEdgeNextWCStyles:function(){return dr},TopSitesEdgeNextWCTemplate:function(){return ki},TopSitesElementConstants:function(){return R},TopSitesResponsiveStyles:function(){return cr},addDialogHeight:function(){return d},addDialogWithSubSectionHeight:function(){return l},blockedDomainsPair:function(){return $},collapsibleButtonWidth:function(){return u},contextMenuWidth:function(){return p},defaultMaxTileForFirstRow:function(){return f},defaultMaxTileForSixteenTopSites:function(){return h},defaultMaxTileForThreeRowsTopSites:function(){return v},defaultMaxTileForTwentyTopSites:function(){return m},defaultMaxTiles:function(){return g},defaultOverrideIconsList:function(){return U},defaultTopSiteIcon:function(){return y},dialogWidth:function(){return b},displayPinIconTopSitesBindingSource:function(){return fi},editDialogHeight:function(){return S},isOverflowNotEmpty:function(){return yi},notificationToastDefaultDisplayMs:function(){return C},overflowTopSitesBindingSource:function(){return vi},pinToastDefaultDisplayMs:function(){return w},pinToastTemplate:function(){return hi},tileDialogMargin:function(){return T},titleOverrides:function(){return H},topSiteAddDialogTemplate:function(){return ui},topSiteEditDialogTemplate:function(){return pi},topSiteTileHeight:function(){return A},topSiteTileWidth:function(){return I},topSiteTopTileHeight:function(){return k},topSitesBindingSource:function(){return mi},topSitesCollapsedStorageKey:function(){return P},topSitesDragDropStorageKey:function(){return O},topSitesDragDropUnpinStorageKey:function(){return M},topSitesUndoToastMessageMargin:function(){return x},topSitesUnpinnedStorageKey:function(){return E},undoToastTemplate:function(){return gi},validQueryParameterPrefix:function(){return D}});var n=i(89026),r=i(63070);var o,s,a,c=i(33940);!function(e){e.Enforced="ENFORCED",e.Recommended="RECOMMENDED"}(o||(o={})),function(e){e[e.CuratedTileSource=-5]="CuratedTileSource",e[e.UserAddedTileSource=4]="UserAddedTileSource",e[e.UserAddedTileSourceNewVal=3]="UserAddedTileSourceNewVal",e[e.AlgoGeneratedTileSource=0]="AlgoGeneratedTileSource",e[e.WPOPromotedTileSource=-4]="WPOPromotedTileSource",e[e.PromotedCuratedTileSource=-6]="PromotedCuratedTileSource",e[e.SponsoredCuratedTileSource=-8]="SponsoredCuratedTileSource",e[e.AffiliateAutoAppendTileSource=2]="AffiliateAutoAppendTileSource"}(s||(s={})),function(e){e[e.DragDrop=1]="DragDrop",e[e.DragDropUnpin=-1]="DragDropUnpin"}(a||(a={}));const d=282,l=386,u=147,p="130px",g=8,h=16,m=20,f=10,v=30,y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrsl7EJADAIBGPIEO4/nVt8SCFkgijhvhCsPNQHNUmjWnM0EBCpdYK7i07cSUTYy+I5ARaz705UuQR34A4ggAACCCCA4LL6qhPGV94JYgswAGXGEhq663zFAAAAAElFTkSuQmCC",b=320,S=176,C=1e4,w=1200,T=8,k=30,A=84,I=108,P="tsCollapsed",E="tsUnpinned",O="tsDragDrop",M="tsDragDropUnpin",x=32,D=/^(\/\?|\?|&|)/,R={topSitesContainerId:"TopSitesContainer",topSitesId:"TopSitesCommon",topSitesClassSelector:"topSitesCommon",topSitesCollapsedControlId:"tscc",topSitesCollapsedControlLabel:"tscl",topSiteActionMenuId:"tsam"},L={topSitesDarkOnBackgroundImage:"topSitesDarkOnBackgroundImage",topSitesLightOnBackgroundImage:"topSitesLightOnBackgroundImage",topSitesDark:"topSitesDark",topSitesLight:"topSitesLight",tenSites:"ten-sites",nineSites:"nine-sites",eightSites:"eight-sites",sixSites:"six-sites",twoRowSites:"two-row-sites",large:"Large"},F="https://microsofteur.sharepoint.com/teams/SharedLinksHub",N=["ntp.msn.com","ntp.msn.cn","microsoftedgewelcome.microsoft.com"];var B,j;!function(e){e[e.topSiteAdLabelBig=0]="topSiteAdLabelBig",e[e.topSiteAdLabelSmall=1]="topSiteAdLabelSmall",e[e.topSiteAdTxtBig=2]="topSiteAdTxtBig",e[e.topSiteAdTxtSmall=3]="topSiteAdTxtSmall"}(B||(B={})),function(e){e[e.AllQuickLinksButton=1]="AllQuickLinksButton",e[e.SeeMoreButton=2]="SeeMoreButton"}(j||(j={}));const $=[{url:"https://www.bing.com",exc:["maps"]},{url:"https://bing.com",exc:["maps"]},{url:"https://www.google.co.jp",exc:["maps","photos","flights"]},{url:"https://google.com",exc:["maps","photos","flights","mail"]},{url:"https://www.google.com",exc:["maps","photos","flights"]},{url:"https://www.google.com.au",exc:["maps","photos","flights"]},{url:"https://www.google.com.br",exc:["maps","photos","flights"]},{url:"https://www.google.com.fr",exc:["maps","photos","flights"]},{url:"https://www.google.co.uk",exc:["maps","photos","flights"]},{url:"https://www.google.de",exc:["maps","photos","flights"]},{url:"https://www.yahoo.com"},{url:"https://search.yahoo.com"},{url:"https://uk.yahoo.com "},{url:"https://uk.search.yahoo.com"},{url:"https://de.yahoo.com"},{url:"https://de.search.yahoo.com"},{url:"https://fr.yahoo.com"},{url:"https://fr.search.yahoo.com"},{url:"https://ca.yahoo.com"},{url:"https://ca.search.yahoo.com"},{url:"https://au.yahoo.com"},{url:"https://www.yahoo.co.jp"},{url:"https://search.yahoo.co.jp"},{url:"https://www.baidu.com"},{url:"https://www.duckduckgo.com"},{url:"https://yandex.com"},{url:"https://www.yandex.com"},{url:"https://www.yandex.ru"},{url:"https://www.naver.com"},{url:"https://www.microsoft.com/en-us/edge/update"}],U={"https://www.office.com":"AA13Q6AL","https://www.office.com/":"AA13Q6AL"},H={"https://www.office.com":"Microsoft 365","https://www.office.com/":"Microsoft 365"};var _=i(75970),W=i(77331),z=i(65337),G=i(84169),V=i(68364),q=i(26415),Z=i(88352);const K=/www\d*\./i,Q=/^https?:/i;class J{constructor(e){if(!Z.b.isNotNullOrUndefined(e))return;let t;try{t=new URL(e.trim())}catch(e){t=void 0}if(!t||!e.toLocaleLowerCase().startsWith(t.origin.toLocaleLowerCase()))try{t=new URL("http://"+e)}catch(e){t=void 0}if(!t||!t.host||!Q.test(t.protocol))return;const i=t.hostname.replace(K,"");this.url=t.href.replace(/\/$/,""),this.domain=i,this.domainAndPath=this.domain+t.pathname.replace(/[\s/]+$/g,""),this.domainPathAndQuery=this.domainAndPath+t.search,this.hasQuery=!!t.search}}var X=i(99508);const Y="removedTopSiteUrls";let ee,te,ie,ne;function re(e){if(e){return null!=G.jG&&G.jG.IsChinaCompliance?`//img-s.msn.cn/tenant/amp/entityid/${e}.img`:`//img-s-msn-com.akamaized.net/tenant/amp/entityid/${e}.img`}return y}function oe(e){if(e){return(e&&e.match(/cms\/api\/amp\/image\/([a-z0-9]+)$/i)||{})[1]}return null}function se(e,t){t&&!e[t]&&(e[t]=!0)}ne=(0,z.$o)(),ie=ne.getObject(Y)||{},te={};var ae=i(53899),ce=i(17769),de=i(970),le=i(1334),ue=i(40537),pe=i(23401),ge=i(73252),he=i(14989),me=i(58958),fe=i(88828),ve=i(4814),ye=i(87230),be=i(86331),Se=i(53076),Ce=i(83227),we=i(11765),Te=i(82209),ke=i(75192),Ae=i(65135),Ie=i(38156),Pe=i(60483);const Ee="curated_topsite",Oe="user_topsite",Me="frequent_topsite",xe="promotedcurated_topsite",De="wpopromoted_topsite",Re="sharedlinks_topsite",Le="curatedleadgen_topsite",Fe="autoappend_topsite",Ne="tile",Be="url",je="context_menu",$e="topsite_remove_toast",Ue="remove",He="undoremove",_e="close",We="cancel",ze="rename",Ge="save",Ve="suggestedlink",qe="edit_dialog",Ze="add_dialog",Ke="topsiteaddtile",Qe="topsites_hide",Je="show",Xe="collapse",Ye="topsite",et="onelinetopsite",tt="turnonpreview",it="turnoffpreview",nt="topsitePinToTaskBar",rt="unpin",ot="pin",st="allquicklinkbutton",at="seemorebutton",ct="settingButton",dt="dropdownSelector";var lt;!function(e){e.tsn="tsn",e.moreOption="More Options",e.remove="Remove",e.undoRemove="Undo Remove",e.close="Close",e.rename="Rename",e.save="Save",e.cancel="Cancel",e.addSite="Add a site",e.add="Add",e.show="Show",e.collapse="Collapse",e.suggestedLink="Add a suggested link",e.turnOnPreview="Turn On Preview",e.turnOffPreview="Turn Off Preview",e.container="Container",e.unpin="Unpin",e.pin="Pin",e.topsiteTaskbarpin="TopSite Pin to TaskBar",e.allQuickLinkButton="All Quick Link Button",e.seeMoreButton="See More Button",e.settingButton="Setting Button",e.selector="Dropdown Selector",e.edgeShoppingTile="EdgeShopping"}(lt||(lt={}));const ut="tsu";var pt=i(19388),gt=i(99452),ht=i(42590),mt=i(34955),ft=i(7522);function vt(e,t){var i;const n=[];let r=0,o=0;const s=(0,ft.Z)(t,"slot"),a=e.length+t.length;for(let t=0;t<a;t++)t>=(null===(i=s[o])||void 0===i?void 0:i.slot)?n.push(s[o++]):r<e.length&&n.push(e[r++]);for(;o<s.length;)n.push(s[o++]);return n}const yt=[s.CuratedTileSource,s.SponsoredCuratedTileSource,s.WPOPromotedTileSource,s.PromotedCuratedTileSource];function bt(e,t){this.timer&&(window.clearTimeout(this.timer),this.timer=null),e&&(this.timer=window.setTimeout((()=>{t(!0)}),e))}function St(e,t,i,n,r,o,s){if(e){const{left:a,right:c,bottom:d,top:l}=e.getBoundingClientRect(),u=s?k:A,p=t.getBoundingClientRect(),g=n-c>b,h=g?a-p.left:c-b-p.left,m=g?p.right-a-b:p.right-c,f=r-d-T>i,v=l>=i;let y="auto";f&&(y=d-p.bottom+T+"px"),f||v||(y=-l+"px");const S=f?"auto":p.bottom-d+u+T+"px";return o?`--dialog-left:${h}px;--dialog-top:${y};--dialog-bottom:${S};`:`--dialog-right:${m}px;--dialog-top:${y};--dialog-bottom:${S};`}return o?`--dialog-left:0px; --dialog-top:${T}px;`:`--dialog-right:0px; --dialog-top:${T}px;`}function Ct(e){const t=[];if(e){if(!e.mostVisitedAvailable)return null;const i=new Set;e.mostVisited.forEach((n=>{const r=e.getMostVisitedItemData(n.rid),o={rid:n.rid,dataGenerationTime:r.dataGenerationTime,faviconUrl:n.faviconUrl,domain:r.domain,title:r.title,tileSource:r.tileSource,tileTitleSource:r.tileTitleSource,url:r.url,direction:r.direction,enforcement:n.enforcement,customImagePart:n.customImagePart};if(0!=r.tileSource)return void t.push(o);const s=At(r.url).replace("www.","");if(i.has(s)||i.add(s),!N.includes(s)){for(let e=0;e<t.length;e++){if(t[e].url==o.url)return;if((t[e].domain==o.domain||i.has(s))&&t[e].title==o.title)return}(function(e){const t=ge.Al.CurrentFlightSet;return!(t.has("prg-sharedl-t")||t.has("prg-sharedl-te"))&&e.includes(F)})(o.faviconUrl)||t.push(o)}})),i.clear()}return t}function wt(e,t,i,n){const r=function(e,t){const i=e.recommendedSites,n=ie||{},r=te||{},o=t.map((e=>e.url)),a=i.filter((e=>{const t=At(e.url);if(!r[t]&&!n[e.url]&&!o.includes(e.url))return e})),c=t.filter((e=>e.tileSource===s.UserAddedTileSource||e.tileSource===s.UserAddedTileSourceNewVal)).length,d=e.maxTiles-c;return a.splice(0,d)}(e,t),o=r.map((e=>e.url));let a;t=t.filter((e=>{if(!o.includes(e.url))return e})),a=0===t.length&&0===n.length?1:n.length>0?n[n.length-1].rid+1:t[t.length-1].rid+1e3;return function(e,t){const i=e.length+t.length,n=[];let r=0,o=0,s=0;for(let a=0;a<i;a++)o<t.length&&t[o].locationIndex===s?n[s++]=t[o++]:r<e.length?n[s++]=e[r++]:n[s++]=t[o++];return n}(t,r.map((e=>{var t,n;i.set(a,e);const r=null!==(t=e.faviconId)&&void 0!==t?t:oe(e.faviconUrl);return Object.assign(Object.assign({},e),{faviconUrl:re(r),tileSource:s.WPOPromotedTileSource,rid:a++,customImagePart:null!==(n=e.customImagePart)&&void 0!==n?n:"image"})})))}function Tt(e,t,i,n,r,o){if(i){if((s=i.url)&&(ie[s]=!0,ne.setObject(Y,ie)),o&&r(),yt.includes(i.tileSource))return void t();n&&i.rid&&(n.deleteMostVisitedItem(i.rid),mt.H.logEvent(mt.v.NTP_CUSTOMIZE_SHORTCUT_REMOVE))}var s}function kt(e,t,i,n,r){if(yt.includes(n))return(o=r)&&(delete ie[o],ne.setObject(Y,ie)),void e();var o;if(t&&i){const e=t.getMostVisitedItemData(i),n=e?e.tileSource:null;n===s.UserAddedTileSource||n===s.UserAddedTileSourceNewVal?t.undoCustomLinkAction(i):n!==s.AlgoGeneratedTileSource&&n!==s.AffiliateAutoAppendTileSource||t.undoMostVisitedDeletion(i)}}function At(e){try{return new URL(e).hostname}catch(e){return""}}var It=i(37802),Pt=i(70430),Et=i(52965),Ot=i(9533),Mt=i(81555),xt=i(54678),Dt=i.n(xt),Rt=i(59997),Lt=i(44070),Ft=i(49218),Nt=i(89150),Bt=i(93703),jt=i(41472),$t=i(74037),Ut=i(11310),Ht=i.n(Ut),_t=i(6726),Wt=i(88298),zt=i(96779),Gt=i(20899),Vt=i(57757),qt=i(33278),Zt=i(34009),Kt=i.n(Zt),Qt=i(7137),Jt=i.n(Qt),Xt=i(12287),Yt=i.n(Xt);_t.O,Wt.v,zt.S,Vt.Z,qt.X,Gt.O;const ei=Ft.dy`<span class="badge">${e=>e.badge.children}</span>`,ti=Ft.dy`<span class="dot-separator"></span>`,ii=Ft.dy`<msn-native-ad-ad-label type="${e=>e.adLabelType}"></msn-native-ad-ad-label>`,ni=Ft.dy`<fluent-option value="${e=>e.title}" id="${e=>e.id}" class=${(e,t)=>t.parent.topSiteSelectedItem&&t.parent.topSiteSelectedItem.id===e.id?"selected":"unselected"} ?selected=${(e,t)=>t.parent.topSiteSelectedItem&&t.parent.topSiteSelectedItem.id===e.id}>${e=>e.title}</fluent-option>`,ri=Ft.dy`<div class="topsite-list-footer-setting topsite-direct-settings"><label>${e=>{var t;return null===(t=e.strings)||void 0===t?void 0:t.quickLinksLabelText}}</label><fluent-select class="topSitesOptions" id="topSitessSelector" appearance="filled" @click=${(e,t)=>e.onTopSiteOptions(t.event)} data-t="${e=>e.oneLineTopSitesSelectorTelemetryTag}" @change=${(e,t)=>e.updateTopSite(t.event)} current-value=${e=>e.topSiteSelectedItem&&e.topSiteSelectedItem.title} data-customhandled="true"><span slot="selected-value">${e=>e.topSiteSelectedItem&&e.topSiteSelectedItem.title}</span>${(0,Nt.rx)((e=>e.topSiteMenuItems),ni)}</fluent-select></div>`,oi=Ft.dy`<button class="action-button ${e=>e.config.enableBackPlateForPlaceholder?"":"action-button-rmbp"} ${e=>e.quickLinksToggleSpacingForBanner?"banner-action-button":""}" title="${e=>e.quickLinkButtonAriaLabel}" aria-label="${e=>e.quickLinkButtonAriaLabel}" aria-expanded="${e=>!e.currentCollapsedState}" @click="${(e,t)=>e.changeCollapsedState(t.event)}" data-t="${e=>e.quickLinkButtonTelemetryTag}" data-customhandled="true"><label class="${e=>e.actionButtonLabelClassName}">${e=>e.strings.quickLinksLabelText}</label><svg class="${e=>e.actionButtonSvgClassName}" width="32" height="32" viewBox="0 0 32 32" fill="black" xmlns="http://www.w3.org/2000/svg"><g><rect width="32" height="32" rx="16" fill-opacity="0.42"></rect><path fill-opacity="1" d="M16 19.709L10.1465 13.8555L10.8555 13.1465L16 18.291L21.1445 13.1465L21.8535 13.8555L16 19.709Z" fill="white"></path></g></svg></button>`,si=Ft.dy`<msft-top-site :href=${e=>e.url} imagepartname=${e=>e.customImagePart} title="${e=>e.title}" aria-label="${e=>e.title}" class="small-top-sites pill-top-site ${(e,t)=>t.parent.config.enablePinIconUnclickable?"pinned-top-site":" "} ${(e,t)=>t.parent.config.enableGridTopSites&&t.parent.userSelectedSetting===ae.Z3.top?"grid-top-sites ":""}${e=>e.topSitesClassName}" :anchorTelemetryTag="${e=>e.anchorTelemetryTag}" pinned = "${e=>e.dragDropType===a.DragDrop?"1":"0"}" enableIndicator = "${e=>e.enablePinnedIndicator?"1":"0"}" topSitesClassName = "${e=>e.topSitesClassName}" @mouseenter=${(e,t)=>e.onMouseEnter&&e.onMouseEnter(t.event)} @mouseleave=${(e,t)=>e.onMouseLeave&&e.onMouseLeave(t.event)} @focus=${(e,t)=>e.onFocus&&e.onFocus(t.event)} @blur=${(e,t)=>e.onBlur&&e.onBlur(t.event)} @keyup=${(e,t)=>e.onKeyDown&&e.onKeyDown(t.event)} @mouseup=${(e,t)=>e.onMouseUp&&e.onMouseUp(t.event)} data-t="${e=>e.contentViewTelemetryTag}">${(0,Bt.g)(((e,t)=>{var i,n;return((null===(i=t.parent.config)||void 0===i?void 0:i.enableAllPin)&&!((null===(n=t.parent)||void 0===n?void 0:n.config.enablePinIconUnclickable)&&e.dragDropType!==a.DragDrop)||e.promote)&&!e.enablePinnedIndicator}),Ft.dy`<div slot="start"><fluent-button class="start-button" appearance="stealth" title="${(e,t)=>{var i,n;return(null===(n=null===(i=t.parent)||void 0===i?void 0:i.config)||void 0===n?void 0:n.enablePinIconUnclickable)?null:e.pinLabel}}" aria-lable="${e=>e.pinLabel}" role="button" @click=${(e,t)=>{var i,n;return e.pinAction&&!(null===(n=null===(i=t.parent)||void 0===i?void 0:i.config)||void 0===n?void 0:n.enablePinIconUnclickable)&&e.pinAction(e,t.event)}} data-t="${e=>e.pinActionButtonTelemetryTag}">${(0,Bt.g)(((e,t)=>{var i;return!(null===(i=t.parent.config)||void 0===i?void 0:i.enableAllPin)}),Ft.dy`${Ft.dy.partial(Jt())}`)} ${(0,Bt.g)(((e,t)=>{var i;return null===(i=t.parent.config)||void 0===i?void 0:i.enableAllPin}),Ft.dy` ${(0,Bt.g)((e=>e.dragDropType===a.DragDrop),Ft.dy`${Ft.dy.partial(Jt())}`)} ${(0,Bt.g)(((e,t)=>{var i,n;return e.dragDropType!==a.DragDrop&&!(null===(n=null===(i=t.parent)||void 0===i?void 0:i.config)||void 0===n?void 0:n.enablePinIconUnclickable)}),Ft.dy`${Ft.dy.partial(Kt())}`)} `)}</fluent-button></div>`)}<div slot="end"><fluent-button class="end-button" appearance="stealth" title="${e=>e.contextMenuLabel}" aria-label="${e=>e.contextMenuLabel}" role="button" @click=${(e,t)=>e.toggleActionMenu&&e.toggleActionMenu(e,t.event)} data-t="${e=>e.toggleActionMenuButtonTelemetryTag}">${Ft.dy.partial(Ht())}</fluent-button></div><svg class="pinned-indicator" slot="pinned-icon" width="12" height="12" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">${Ft.dy`${Ft.dy.partial(Jt())}`}</svg><img slot="image" src="${e=>e.faviconUrl}" /><div class="top-site-title ${e=>e.textShadowEnabled?"top-site-shadow":""}"><a>${e=>e.title}</a>${(0,Bt.g)((e=>e.adLabelType&&e.isSponsored),ti)} ${(0,Bt.g)((e=>e.adLabelType&&e.isSponsored),ii)} ${(0,Bt.g)((e=>e.badge),ei)}</div></msft-top-site>`,ai=Ft.dy`<msft-top-site-placeholder class="small-top-sites drag-locked ${e=>e.topSitesClassName}" addTileSupported=${e=>e.addTileSupported} backPlateEnabled=${e=>e.backPlateEnabled} seeAllTileEnabled=${e=>e.seeAllTileEnabled}><div slot="icon-action"><fluent-button class="add-button ${e=>e.backPlateEnabled?"with-back-plate":""}" appearance="stealth" aria-label="${e=>e.ariaLabel}" role="button" title="${e=>e.ariaLabel}" id="clickAddTileButton" @click=${(e,t)=>e.onAddTopSiteClick(t.event)} data-t="${e=>e.addTopSiteButtonTelemetryTag}"><div class="add-button-label"><svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M12 5.625V6.375H6.375V12H5.625V6.375H0V5.625H5.625V0H6.375V5.625H12Z" /></svg><span>${e=>e.addTileLabel}</span></div></fluent-button></div></msft-top-site-placeholder>`,ci=Ft.dy`<msft-top-site-placeholder class="small-top-sites drag-locked ${e=>e.topSitesClassName}" addTileSupported=${e=>e.addTileSupported} backPlateEnabled=${e=>e.backPlateEnabled} seeAllTileEnabled=${e=>e.seeAllTileEnabled}><div slot="icon-action"><fluent-button class="add-button ${e=>e.backPlateEnabled?"with-back-plate":""}" appearance="stealth" aria-label="${e=>e.ariaLabel}" role="button" title="${e=>e.ariaLabel}" id="clickSeeAllTileButton" @click=${(e,t)=>e.onSeeAllTopSiteClick(t.event)}><div><svg width="14" height="4" viewBox="0 0 14 4" xmlns="http://www.w3.org/2000/svg"><path d="M3.25 2C3.25 2.69036 2.69036 3.25 2 3.25C1.30964 3.25 0.75 2.69036 0.75 2C0.75 1.30964 1.30964 0.75 2 0.75C2.69036 0.75 3.25 1.30964 3.25 2ZM8.25 2C8.25 2.69036 7.69036 3.25 7 3.25C6.30964 3.25 5.75 2.69036 5.75 2C5.75 1.30964 6.30964 0.75 7 0.75C7.69036 0.75 8.25 1.30964 8.25 2ZM12 3.25C12.6904 3.25 13.25 2.69036 13.25 2C13.25 1.30964 12.6904 0.75 12 0.75C11.3096 0.75 10.75 1.30964 10.75 2C10.75 2.69036 11.3096 3.25 12 3.25Z" /></svg><span>${e=>e.ariaLabel}</span></div></fluent-button></div></msft-top-site-placeholder>`,di=Ft.dy`
${(0,Bt.g)((e=>e.seeAllTileEnabled),ci)}
${(0,Bt.g)((e=>!e.seeAllTileEnabled),ai)}
`,li=Ft.dy`<div class="top-sites-responsive-item drag-locked"><msft-top-site-placeholder class="pill-top-site top-sites-responsive-placeholder" addTileSupported=${e=>e.addTileSupported} backPlateEnabled=${e=>e.backPlateEnabled} seeAllTileEnabled=${e=>e.seeAllTileEnabled}>><div class="left-part top-sites-responsive-placeholder-add-button" id="clickAddTileButton" slot="icon-action" title="${e=>e.ariaLabel}" role="button" aria-label="${e=>e.ariaLabel}" data-t="${e=>e.addTopSiteButtonTelemetryTag}" @click=${(e,t)=>e.onAddTopSiteClick(t.event)}><div class="top-sites-responsive-icon ${(e,t)=>t.parent.config.enableUnifiedRecommendedSites?"top-sites-responsive-icon-size-20":""}"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 12 12"><path d="M 12 5.625 V 6.375 H 6.375 V 12 H 5.625 V 6.375 H 0 V 5.625 H 5.625 V 0 H 6.375 V 5.625 H 12 Z" /></svg></div><span>${e=>e.addTileLabel}</span></div></msft-top-site-placeholder></div>`,ui=Ft.dy`<msn-top-site-dialog id="topSiteAddDialog" cancelText="${e=>e.topSiteAddDialog.cancelText}" headerTitle="${e=>e.topSiteAddDialog.headerTitle}" saveText="${e=>e.topSiteAddDialog.saveText}" closeText="${e=>e.topSiteAddDialog.closeText}" :nameInputData="${e=>e.topSiteAddDialog.nameInputBox}" :urlInputData="${e=>e.topSiteAddDialog.urlInputBox}" :newOrUpdatedTopSite="${e=>e.topSiteAddDialog.newOrUpdatedTopSite}" :saveButtonTelemetryTag="${e=>e.topSiteAddDialog.saveButtonTelemetryTag}" :cancelButtonTelemetryTag="${e=>e.topSiteAddDialog.cancelButtonTelemetryTag}" :closeButtonTelemetryTag="${e=>e.topSiteAddDialog.closeButtonTelemetryTag}" @focus="${(e,t)=>e.topSiteAddDialog.addInputListener(t.event)}" @close="${(e,t)=>e.topSiteAddDialog.onClose(t.event)}" @save="${(e,t)=>e.topSiteAddDialog.saveHandler(t.event)}" style="${e=>e.topSiteAddDialogContainerPosition}">${(0,Bt.g)((e=>e.config.suggestedTopSiteList&&e.config.suggestedTopSiteList.length>0),Ft.dy`<div slot="subSection"><h3 class="suggestion-title">${e=>e.strings.addDialogSubHeading}</h3><div class="suggestion-body">${(0,Nt.rx)((e=>e.config.suggestedTopSiteList),Ft.dy`<div tabIndex="0" style="margin-inline-end: 12px"><msft-top-site href=${e=>e.url} title="${e=>e.title}" aria-label="${e=>e.title}" @click=${(e,t)=>t.parent.topSiteAddDialog.saveHandler&&t.parent.topSiteAddDialog.saveHandler(t.event,e)} @keydown=${(e,t)=>t.parent.topSiteAddDialog.saveHandler&&t.parent.topSiteAddDialog.saveHandler(t.event,e)} :anchorTelemetryTag="${e=>e.suggestedLinkTelemetryTag}" tabIndex="-1"><img slot="image" src="${e=>re(e.faviconId)}" alt="${e=>e.title}" />${e=>e.title}</msft-top-site></div>`)}</div></div>`)}</msn-top-site-dialog>`,pi=Ft.dy`<msn-top-site-dialog id="topSiteEditDialog" cancelText="${e=>e.topSiteEditDialog.cancelText}" headerTitle="${e=>e.topSiteEditDialog.headerTitle}" saveText="${e=>e.topSiteEditDialog.saveText}" closeText="${e=>e.topSiteEditDialog.closeText}" :nameInputData="${e=>e.topSiteEditDialog.nameInputBox}" :newOrUpdatedTopSite="${e=>e.topSiteEditDialog.newOrUpdatedTopSite}" :saveButtonTelemetryTag="${e=>e.topSiteEditDialog.saveButtonTelemetryTag}" :cancelButtonTelemetryTag="${e=>e.topSiteEditDialog.cancelButtonTelemetryTag}" :closeButtonTelemetryTag="${e=>e.topSiteEditDialog.closeButtonTelemetryTag}" @focus="${(e,t)=>e.topSiteEditDialog.addInputListener(t.event)}" @close="${(e,t)=>e.topSiteEditDialog.onClose(t.event)}" @save="${(e,t)=>e.topSiteEditDialog.saveHandler(t.event)}" style="${e=>e.topSiteEditDialogContainerPosition}"></msn-top-site-dialog>`,gi=Ft.dy`<msn-toast>${(0,Nt.rx)((e=>e.undoToast.removedText),Ft.dy`<span>${e=>e}</span>`)}<fluent-button ${(0,jt.i)("undoButton")} appearance="lightweight" slot="actions" class="toast-navigation-button" title=${e=>e.undoToast.undoButtonLabel} @click=${(e,t)=>e.undoToast.undoTopSiteHandler(t.event)} data-t="${e=>e.undoToast.undoButtonTelemetryTag}">${e=>e.undoToast.undoButtonLabel}</fluent-button><fluent-button apperance="stealth" slot="close-button" class="toast-close-button" title=${e=>e.undoToast.closeButtonLabel} @click=${(e,t)=>e.undoToast.closeHandler(t.event)} data-t="${e=>e.undoToast.closeButtonTelemetryTag}"><svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M6.84961 6L12 11.1504L11.1504 12L6 6.84961L0.849609 12L0 11.1504L5.15039 6L0 0.849609L0.849609 0L6 5.15039L11.1504 0L12 0.849609L6.84961 6Z"/></svg></fluent-button></msn-toast>`,hi=Ft.dy`<msn-toast>${(0,Nt.rx)((e=>e.pinToast.pinText),Ft.dy`<span>${e=>e}</span>`)}<fluent-button apperance="stealth" slot="close-button" class="toast-close-button" title=${e=>e.pinToast.closeButtonLabel} @click=${(e,t)=>e.pinToast.closeHandler(t.event)} data-t="${e=>e.pinToast.closeButtonTelemetryTag}"><svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M6.84961 6L12 11.1504L11.1504 12L6 6.84961L0.849609 12L0 11.1504L5.15039 6L0 0.849609L0.849609 0L6 5.15039L11.1504 0L12 0.849609L6.84961 6Z"/></svg></fluent-button></msn-toast>`,mi=e=>e.topSites,fi=e=>e.topSites.map((e=>Object.assign(Object.assign({},e),{displayPinIcon:!0}))),vi=e=>e.overflowItems,yi=e=>e.overflowItems&&e.overflowItems.length&&e.overflowItems.length>0,bi=e=>e.topSites&&e.topSites.length,Si=Ft.dy`<a class="pill-top-site ${(e,t)=>{var i;return(null===(i=t.parent.config)||void 0===i?void 0:i.enableTopsitesTopMiniMargin)?"mini-margin":""}}" href="${e=>e.url}" title="${e=>e.title===e.url?e.title:e.title+": "+e.url}" aria-label="${e=>e.title}" data-t="${e=>e.anchorTelemetryTag}"><div class="left-part"><img slot="image" src="${e=>e.faviconUrl}" /><span>${e=>e.title}</span>${(0,Bt.g)((e=>e.adLabelType&&e.isSponsored),ti)} ${(0,Bt.g)((e=>e.adLabelType&&e.isSponsored),ii)}</div>${(0,Bt.g)((e=>e.displayPinIcon),Ft.dy` ${(0,Bt.g)(((e,t)=>{var i;return!(null===(i=t.parent.config)||void 0===i?void 0:i.enableAllPin)}),Ft.dy`<div class="top-sites-responsive-pin-icon">${Ft.dy.partial(Jt())}</div>`)} ${(0,Bt.g)(((e,t)=>{var i;return null===(i=t.parent.config)||void 0===i?void 0:i.enableAllPin}),Ft.dy` ${(0,Bt.g)((e=>e.dragDropType===a.DragDrop),Ft.dy`<div class="top-sites-responsive-pin-icon">${Ft.dy.partial(Jt())}</div>`)} ${(0,Bt.g)(((e,t)=>{var i,n;return e.dragDropType!==a.DragDrop&&!(null===(n=null===(i=t.parent)||void 0===i?void 0:i.config)||void 0===n?void 0:n.enablePinIconUnclickable)}),Ft.dy`<div class="top-sites-responsive-pin-icon">${Ft.dy.partial(Kt())}</div>`)} `)} `)}<div class="right-part"><fluent-button class="end-button" appearance="stealth" title="${e=>e.contextMenuLabel}" aria-label="${e=>e.contextMenuLabel}" role="button" @click=${(e,t)=>e.toggleActionMenu&&e.toggleActionMenu(e,t.event)} data-t="${e=>e.toggleActionMenuButtonTelemetryTag}">${Ft.dy.partial(Ht())}</fluent-button></div></a>`,Ci=Ft.dy`<fluent-button type="button" id="allQuickLinksButtonId" ${(0,jt.i)("allQuickLinksButton")} appearance="stealth" aria-label="${e=>e.strings.quickLinksLabelText||""}" title="${e=>e.strings.quickLinksLabelText||""}" aria-haspopup="true" aria-expanded="${e=>e.showMenu?"true":null}" @click=${(e,t)=>e.toggleOverflowMenu(j.AllQuickLinksButton)} data-t="${e=>e.oneLinetopSitesAllQuickLinkButtonTelemetryTag}"><div class="all-links-btn ${e=>"start"===e.overflowMenuClass?"active":""}">${Ft.dy.partial($t.Z)} ${e=>e.strings.quickLinksLabelText}</div></fluent-button>`,wi=Ft.dy`<fluent-button type="button" id="seeMoreButtonId" ${(0,jt.i)("seeMoreButton")} aria-label="${e=>e.strings.quickLinksSeeMoreButton||""}" title="${e=>e.strings.quickLinksSeeMoreButton||""}" aria-haspopup="true" aria-expanded="${e=>e.showMenu?"true":null}" @click=${(e,t)=>e.toggleOverflowMenu(j.SeeMoreButton)} data-t="${e=>e.oneLinetopSitesSeeMoreButtonTelemetryTag}"><div class="all-links-btn ${e=>"end"===e.overflowMenuClass?"active":""}">${e=>e.strings.quickLinksSeeMoreButton} ${Ft.dy.partial($t.Z)}</div></fluent-button>`,Ti=Ft.dy`<div class="${e=>e.showMenu?"overflow-menu":"overflow-menu hidden"} ${e=>e.config.enableGridTopSites?"overflow-menu-grid ":""}${e=>e.overflowMenuClass}" ${(0,jt.i)("overflowPanelContainer")}>${(0,Bt.g)((e=>yi&&!e.config.enableGridTopSites),Ft.dy`<div class="topsite-list">${(0,Nt.rx)(vi,Si)}</div><div class="divider"></div>`)} ${(0,Bt.g)((e=>e.config.enableGridTopSites&&bi),Ft.dy`<div class="topsite-list">${(0,Nt.rx)((e=>e.topSites),si)}</div><div class="divider"></div>`)}<div class="topsite-list-footer">${(0,Nt.rx)((e=>e.topSitesPlaceHolders),di)} ${(0,Bt.g)((e=>!e.config.enbOnLineSetting),Ft.dy`<div title="${e=>{var t;return null===(t=e.strings)||void 0===t?void 0:t.quickLinksSetting}}" data-t="${e=>e.oneLinetopSitesSettingButtonTelemetryTag}" class="topsite-list-footer-setting" @click=${(e,t)=>e.openSettingDialog(t.event)}>${Ft.dy.partial(Yt())} ${e=>{var t;return null===(t=e.strings)||void 0===t?void 0:t.quickLinksSetting}}</div>`)} ${(0,Bt.g)((e=>e.config.enbOnLineSetting),ri)}</div></div>`,ki=Ft.dy`<div>${(0,Bt.g)((e=>e.userSelectedSetting===ae.Z3.top),Ft.dy`<div class="one-line-top-sites-container ${e=>{var t;return e.isOnImage||(null===(t=e.config)||void 0===t?void 0:t.enableOneLineTopSitesSoildBg)?"":"notonimg"}} ${e=>{var t;return(null===(t=e.config)||void 0===t?void 0:t.enableOneLineTopSitesSoildBg)?"solid":""}} ${e=>{var t;return(null===(t=e.config)||void 0===t?void 0:t.enableOneLineTopSitesPillShape)?"pill":""}}" id="oneLineTopSitesContainer" data-t="${e=>e.oneLinetopSitesCommonTelemetryTag}" ${(0,jt.i)("topSitesRoot")}>${(0,Bt.g)((e=>{var t;return null===(t=e.config)||void 0===t?void 0:t.enbOnLineQicLink}),Ft.dy`<div class="see-more-container start">${Ci}<div class="divider"></div></div>`)} ${(0,Bt.g)((e=>{var t,i;return!(null===(t=e.config)||void 0===t?void 0:t.enableGridTopSites)||(null===(i=e.config)||void 0===i?void 0:i.enableGridTopSites)&&!e.showMenu}),Ft.dy`<div class="oneline-top-sites settings" ${(0,jt.i)("oneLineTopSitesContainer")}>${(0,Nt.rx)(fi,Si)} ${(0,Bt.g)((e=>{var t,i;return(null===(t=e.config)||void 0===t?void 0:t.enableOneLineTopSitesPillShape)&&!(null===(i=e.config)||void 0===i?void 0:i.disableSeeMoreButton)}),Ft.dy`<div class="see-more-container" ${(0,jt.i)("oneLineTopSitesSeeMoreEle")}>${wi}</div>`)}</div>`)} ${(0,Bt.g)((e=>{var t,i;return!(null===(t=e.config)||void 0===t?void 0:t.enableOneLineTopSitesPillShape)&&!(null===(i=e.config)||void 0===i?void 0:i.disableSeeMoreButton)}),Ft.dy`<div class="see-more-container">${wi}</div>`)} ${Ti}</div>`)} ${(0,Bt.g)((e=>e.userSelectedSetting!==ae.Z3.top),Ft.dy`<div class="root ${e=>e.extraAddedSitesClassName} ${e=>e.className} ${e=>e.config.enableRiverZoom?"river-zoom":""}  ${e=>e.moveUpward?"move-upward":""}" id="${R.topSitesClassSelector}" style="${e=>e.informationalCollapsedStyle}" ${(0,jt.i)("topSitesRoot")}><div class="top-sites ${e=>e.twoRowSitesClassName}" role="status">${(0,Bt.g)((e=>e.showCollapsibleControl),oi)}<div id=${R.topSitesId} class="sites ${e=>e.sitesClassName} ${e=>e.topSitesResponsiveClassName} ${e=>e.topSitesClassName}" data-t="${e=>e.topSiteCommonTelemetryTag}" ${(0,jt.i)("topSitesContainer")}>${(0,Bt.g)((e=>!e.config.enableUnifiedTopSites),Ft.dy` ${(0,Nt.rx)(mi,si)} `)} ${(0,Bt.g)((e=>e.config.enableUnifiedTopSites),Ft.dy` ${(0,Nt.rx)(fi,Ft.dy`<div class="top-sites-responsive-item">${Si}</div>`)} `)} ${(0,Bt.g)((e=>!e.config.enableUnifiedTopSites),Ft.dy` ${(0,Nt.rx)((e=>e.topSitesPlaceHolders),di)} `)} ${(0,Bt.g)((e=>e.config.enableUnifiedTopSites),Ft.dy` ${(0,Nt.rx)((e=>e.topSitesPlaceHolders),li)} `)}</div></div></div>`)}<div ${(0,jt.i)("dialogRoot")}>${(0,Bt.g)((e=>e.isAddDialogOpen),ui)} ${(0,Bt.g)((e=>e.topSiteAddedSuccessfully),Ft.dy`<div class="top-site-add-success" aria-live="polite">${e=>e.lastAddedTopSite} added successfully</div>`)} ${(0,Bt.g)((e=>e.isEditDialogOpen),pi)} ${(0,Bt.g)((e=>e.isActionMenuOpen),Ft.dy`<msn-actions-menu id="actions-menu" :referrerButton=${e=>e.activeContextMenuButtonElement} class="${e=>e.config.enableAllPin?"long-width-menu":""}" :menuItems=${e=>e.actionsMenuProps.menuItems} ${(0,jt.i)("topSiteActionsMenu")} @dismiss-menu=${e=>e.isActionMenuOpen=!1}>x</msn-actions-menu>`)}<div ${(0,jt.i)("undoToastContainer")} class="toast-root">${(0,Bt.g)((e=>e.isUndoToastOpen),gi)} ${(0,Bt.g)((e=>e.isPinToastOpen&&!e.isUndoToastOpen),hi)}</div></div></div>`;class Ai{constructor(e,t){this.onTouchStart=()=>{this.sortableService&&this.sortableService.destroy(),this.sortableService=null,document.addEventListener("mousemove",this.onMouseMove)},this.onMouseMove=()=>{this.initializeService(),document.removeEventListener("mousemove",this.onMouseMove)},this.onUnloadPage=()=>{this.clearTopsiteByUnpinnedSites(),this.clearUnpinStorage()},this.component=e,this.container=t.container,this.disableDragDrop=t.disableDragDrop,this.webStorage=(0,z.$o)(),this.bindEvents()}bindEvents(){window.addEventListener("beforeunload",this.onUnloadPage),document.addEventListener("touchstart",this.onTouchStart),document.addEventListener("mousemove",this.onMouseMove)}unBindEvents(){window.removeEventListener("beforeunload",this.onUnloadPage),document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("mousemove",this.onMouseMove)}getDataFromStorage(e){try{const t=this.webStorage.getItem(e);if(t){return JSON.parse(t)}}catch(e){Ae.M0.sendAppErrorEvent(Object.assign(Object.assign({},q.C6c.StorageTopSitesError),{message:"Cannot read/write storage for topsite drag drop service",pb:Object.assign(Object.assign({},q.C6c.StorageTopSitesError.pb),{customMessage:`Cannot get drag drop service data, msg: ${e.message||JSON.stringify(e)}`})}))}}saveDataToStorage(e,t){try{this.webStorage.setItem(e,JSON.stringify(t))}catch(e){Ae.M0.sendAppErrorEvent(Object.assign(Object.assign({},q.C6c.StorageTopSitesError),{message:"Cannot read/write storage for topsite drag drop service",pb:Object.assign(Object.assign({},q.C6c.StorageTopSitesError.pb),{customMessage:`Cannot save data to topsites, msg: ${e.message||JSON.stringify(e)}`})}))}}reorderItems(e,t,i){Array.isArray(e)&&e.splice(t,0,e.splice(i,1)[0])}getValidTopSitesFromStorageData(){var e;const t=this.getDataFromStorage(O)||{},i=(null!==(e=t.data)&&void 0!==e?e:[]).filter((e=>e.slot>=0)).sort(((e,t)=>e.slot-t.slot)).reduce(((e,t)=>((0===e.length||e[e.length-1].slot!==t.slot)&&e.push(t),e)),[]);return Object.assign(Object.assign({},t),{data:i})}getFixedTopSites(){const{data:e}=this.getValidTopSitesFromStorageData();return e||[]}getTopSites(e,t){let i=e;const{data:n}=this.getValidTopSitesFromStorageData();if(!n)return e;const r=n.filter((e=>e.slot<t));return i=[...vt((0,Pt.Z)(e,r,"url"),r)],i=i.filter((e=>e)).slice(0,t),i}removeTopSiteFromStorage(e,t){const i=this.getDataFromStorage(e)||{},n=i.data;n&&(i.data=n.filter((e=>e.rid!==t.rid)),this.saveDataToStorage(e,i))}clearUnpinStorage(){this.saveDataToStorage(M,{})}clearTopsiteByUnpinnedSites(){const e=(this.getDataFromStorage(M)||{}).data;e&&e.forEach((e=>{this.removeTopSite(e)}))}addTopSite(e,t){let i=this.getValidTopSitesFromStorageData(),n=i.data;if(n||(n=[],i={data:n}),t){n.filter((t=>t.rid!==e.rid&&t.slot>=Math.min(e.fromIndex,e.toIndex)&&t.slot<=Math.max(e.fromIndex,e.toIndex))).forEach((t=>e.fromIndex>e.toIndex?t.slot++:t.slot--))}const r=n.find((t=>t.rid===e.rid));r?Object.assign(r,e):n.push(e),i.data=(0,Lt.Z)(n,"rid"),this.saveDataToStorage(O,i),this.removeUnpinnedTopSite(e)}removeTopSite(e){this.removeTopSiteFromStorage(O,e)}addUnpinnedTopSite(e){let t=this.getDataFromStorage(M)||{},i=t.data;i||(i=[],t={data:i}),i.push(e),this.saveDataToStorage(M,t)}removeUnpinnedTopSite(e){this.removeTopSiteFromStorage(M,e)}updateTopSites(e){const t=this.getValidTopSitesFromStorageData(),i=t.data;if(!i)return;const n=i.find((t=>t.rid===e.rid));n&&Object.assign(n,e),this.saveDataToStorage(O,t)}initializeService(){return(0,c.mG)(this,void 0,void 0,(function*(){if(this.sortableService||this.disableDragDrop)return;let e;if(e=this.container instanceof Promise?yield this.container:this.container,!e)return;const{Sortable:t}=yield i.e("node_modules_sortablejs_modular_sortable_esm_js").then(i.bind(i,54958)),n=new Image;n.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",this.sortableService=t.create(e,{animation:150,chosenClass:"drag-chosen",dragClass:"drag-dragged",delay:100,touchStartThreshold:5,delayOnTouchOnly:!0,filter:".drag-locked",setData:e=>{e.setDragImage(n,0,0)},onMove:e=>{if(e.related||e.dragged)return!e.related.classList.contains("drag-locked")&&!e.dragged.classList.contains("drag-locked")&&(e.related.classList.add("drag-chosen__no-hover"),!0)},onEnd:t=>{var i,n;const{oldIndex:r,newIndex:o}=t;null===(i=Array.from(e.children))||void 0===i||i.forEach((e=>{var t;null===(t=e.classList)||void 0===t||t.remove("drag-chosen__no-hover")}));const s=this.component.topSites;if(s&&0!==s.length&&-1!==r&&-1!==o&&r!==o){Ae.M0.addOrUpdateTmplProperty("tpsdrag","1");if(!this.component.getUserSelectedSetting())return;const e=s[r],i=Object.assign(Object.assign({},e),{slot:o,fromIndex:r,toIndex:o,dragDropType:a.DragDrop});this.addTopSite(i,!0);const c=null===(n=this.component.$fastController.subscribers)||void 0===n?void 0:n.topSites;if(c){const e=[...this.component.topSites];this.reorderItems(e,o,r);let i=[];if(c.spillover)i=c.spillover;else{const{sub1:e,sub2:t}=c;i=[e,t].filter((e=>e))}const n=i.filter((e=>e.subject===mi))[0];if(n){const e=n.sub1.views,i=e[r].firstChild.parentNode;if(o<r)i.insertBefore(e[o].firstChild,t.item.nextSibling),i.insertBefore(e[r].firstChild,t.item),i.insertBefore(e[r].lastChild,t.item.nextSibling);else{const n=e[o+1];n&&i.insertBefore(n.firstChild,t.item.nextSibling),i.insertBefore(e[r].firstChild,t.item),i.insertBefore(e[r].lastChild,t.item.nextSibling)}this.reorderItems(e,o,r),this.component.getOrUpdateTopSites()}}Ae.M0.sendActionEvent(t.item)}},onChange:e=>{this.component.setActiveTopSiteElement(e.item)}})}))}destroy(){this.sortableService&&this.sortableService.destroy(),this.sortableService=null,this.unBindEvents()}}var Ii=i(851),Pi=i.n(Ii),Ei=i(25158),Oi=i.n(Ei),Mi=i(91104),xi=i.n(Mi),Di=i(18536);const Ri="TopSitesSmartListsState";let Li=[];function Fi(e,t,i){const n=Ni(e);n&&(n.enabled=t,n.isUserSignedIn=i||!1,(0,z.$o)().setObject(Ri,Li))}function Ni(e){let t;return Li.forEach((i=>{i.experienceType===e&&(t=i)})),t}function Bi(e){const t=Ni(e);return!t||t.enabled}function ji(e){const t=Ni(e);return!!t&&t.isUserSignedIn}function $i(){const e=(0,z.$o)().getObject(Ri);return e?(Li&&Li.length||(Li=e),Li):null}function Ui(...e){return Li=[...e]}var Hi,_i=i(47680);!function(e){e[e.initialize=0]="initialize",e[e.render=1]="render",e[e.unmount=2]="unmount",e[e.updateSingInStatus=3]="updateSingInStatus"}(Hi||(Hi={}));var Wi=i(19809),zi=i(87298),Gi=i(58155),Vi=i(47903),qi=i(98429),Zi=i(12884),Ki=JSON.parse('[{"storeName":"Gap ","domain":"gap.com","cashbackInfo":{"value":"4","isPercentage":false,"schemaName":"Retail.CashbackValue","kifMajorVersion":1,"kifMinorVersion":0,"kifMinorVersion2":0}},{"storeName":"Amazon","domain":"amazon.com","cashbackInfo":{"value":"5","isPercentage":true,"schemaName":"Retail.CashbackValue","kifMajorVersion":1,"kifMinorVersion":0,"kifMinorVersion2":0}},{"storeName":"Macys","domain":"macys.com","cashbackInfo":{"value":"","isPercentage":false,"schemaName":"Retail.CashbackValue","kifMajorVersion":1,"kifMinorVersion":0,"kifMinorVersion2":0}}]'),Qi=JSON.parse('{"priceDrops":{"data":[{"clickUrl":"https://www.amazon.com/Dr-Squatch-Mens-Soap-Sampler/dp/B07BQBNV7C/ref=sr_1_22_sspa?crid=1O8A2MCWA9XY6&keywords=dr+squatch&qid=1649030218&sprefix=dr+squatch,aps,53&sr=8-22-spons&psc=1&smid=A2R651JBHM4ZCY&spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUExMjQ2MTJSM1gwNlFJJmVuY3J5cHRlZElkPUEwNzY5OTUwMjFPUDgxNlFSWUU3TiZlbmNyeXB0ZWRBZElkPUEwMTQ4ODk3MVZQV0FKSVdFTVQzMSZ3aWRnZXROYW1lPXNwX210ZiZhY3Rpb249Y2xpY2tSZWRpcmVjdCZkb05vdExvZ0NsaWNrPXRydWU=","storeInfo":{"storeId":"","storeName":"Amazon","storeImage":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://www.bing.com/th?id=OBO.6D49B76E24DD41E00E98B89E828DDF45","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"domain":"amazon.com"},"trendRank":"","id":"","title":"Dr. Squatch All Natural Bar Soap for Men, 5 Bar Variety Pack - Aloe, Alpine Sage, Spearmin, Bay Rum and Grapefruit IPA","description":"","dealPercentage":"","priceDropPercentage":"","annotation":"","seller":"","ratingInfo":{"rating":0,"maxRating":"","ratingLink":"","numberOfReviews":0},"imageInfo":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://images-na.ssl-images-amazon.com/images/I/41aJlevN4RS.jpg","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"priceInfo":{"originalPrice":"39.95","price":"32.99","priceCurrencySymbol":"$"},"productAdsScenarioType":0,"groupingId":"","globalOfferId":"","installmentInfo":{"amount":"","description":"","amountValue":0,"downPayment":"","downPaymentValue":0,"months":0,"schemaName":"Ads.InstallmentInfo","kifMajorVersion":0,"kifMinorVersion":0,"kifMinorVersion2":0},"images":[],"clickPingUrl":"","impressionToken":""},{"clickUrl":"https://www.amazon.com/Votatu-VRD501-Co-Witness-Low-Profile-Anti-Reflection/dp/B09MV1F1PV/ref=sr_1_14_sspa?crid=26O7KIBNHKC6I&keywords=airsoft+blue+dot+sight&qid=1647052224&refinements=p_72%3A1248957011&rnid=1248955011&s=sporting-goods&sprefix=airsoft+blue,aps,51&sr=1-14-spons&spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUEzQzFIUUI0R002WUREJmVuY3J5cHRlZElkPUEwMDU0NjY4MVZUVzJCMllFRlk3NyZlbmNyeXB0ZWRBZElkPUEwOTk3MjU2MTRXMFpWWTZYRTJUJndpZGdldE5hbWU9c3BfbXRmJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ&th=1","storeInfo":{"storeId":"","storeName":"Amazon","storeImage":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://www.bing.com/th?id=OBO.6D49B76E24DD41E00E98B89E828DDF45","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"domain":"amazon.com"},"trendRank":"","id":"","title":"Votatu Red Dot Sight, VRD501 2MOA Auto Off and Motion Awake Red Dot Site with Co-Witness and Low-Profile Mount, Anti-Reflection Device and Flip Up Lens Cover","description":"","dealPercentage":"","priceDropPercentage":"","annotation":"","seller":"","ratingInfo":{"rating":0,"maxRating":"","ratingLink":"","numberOfReviews":0},"imageInfo":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://images-na.ssl-images-amazon.com/images/I/41AbIfRCBCL.jpg","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"priceInfo":{"originalPrice":"79.99","price":"67.99","priceCurrencySymbol":"$"},"productAdsScenarioType":0,"groupingId":"","globalOfferId":"","installmentInfo":{"amount":"","description":"","amountValue":0,"downPayment":"","downPaymentValue":0,"months":0,"schemaName":"Ads.InstallmentInfo","kifMajorVersion":0,"kifMinorVersion":0,"kifMinorVersion2":0},"images":[],"clickPingUrl":"","impressionToken":""}],"rank":2},"abandonedCarts":{"data":[{"clickUrl":"https://amazon.com/gp/product/B07LD1NVY6/ref=ox_sc_act_image_1?smid=A115IJ93FOJ777&psc=1","storeInfo":{"storeId":"","storeName":"Amazon","storeImage":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://www.bing.com/th?id=OBO.6D49B76E24DD41E00E98B89E828DDF45","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"domain":"amazon.com","couponsCount":32},"trendRank":"","id":"","title":"Windproof Arc Lighter X Plasma Lighters Rechargeable USB Lighters Candle Lighter-with LED Display Power (Magic)","description":"","dealPercentage":"","priceDropPercentage":"","annotation":"","seller":"","ratingInfo":{"rating":0,"maxRating":"","ratingLink":"","numberOfReviews":0},"imageInfo":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://m.media-amazon.com/images/I/31tgF8bG2HS._AC_AA180_.jpg","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"priceInfo":{"originalPrice":"0","price":"14.89","priceCurrencySymbol":"$"},"productAdsScenarioType":0,"groupingId":"","globalOfferId":"","installmentInfo":{"amount":"","description":"","amountValue":0,"downPayment":"","downPaymentValue":0,"months":0,"schemaName":"Ads.InstallmentInfo","kifMajorVersion":0,"kifMinorVersion":0,"kifMinorVersion2":0},"images":[],"clickPingUrl":"","impressionToken":""},{"clickUrl":"https://amazon.com/gp/product/B07QCW3FXZ/ref=ox_sc_act_image_8?smid=ACF1CCU9ZUYCB&psc=1","storeInfo":{"storeId":"","storeName":"Amazon","storeImage":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://www.bing.com/th?id=OBO.6D49B76E24DD41E00E98B89E828DDF45","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"domain":"amazon.com","couponsCount":32},"trendRank":"","id":"","title":"DoppSk Waterproof & Leak-Proof Travel Toiletry Bag | Small, Black","description":"","dealPercentage":"","priceDropPercentage":"","annotation":"","seller":"","ratingInfo":{"rating":0,"maxRating":"","ratingLink":"","numberOfReviews":0},"imageInfo":{"altText":"","clickUrl":"","overlayTexts":{},"overlayImages":{},"sourceImageUrl":"https://m.media-amazon.com/images/I/A1BGJlWrx+L._AC_AA180_.jpg","imageTint":0,"backgroundColor":"","fontStyle":{},"cssStyle":{},"sourceImagesUrls":[]},"priceInfo":{"originalPrice":"0","price":"34.95","priceCurrencySymbol":"$"},"productAdsScenarioType":0,"groupingId":"","globalOfferId":"","installmentInfo":{"amount":"","description":"","amountValue":0,"downPayment":"","downPaymentValue":0,"months":0,"schemaName":"Ads.InstallmentInfo","kifMajorVersion":0,"kifMinorVersion":0,"kifMinorVersion2":0},"images":[],"clickPingUrl":"","impressionToken":""}],"rank":1}}');const Ji=1e4,Xi=!0,Yi={ocid:"anaheim-shopping-topsites",apiKey:"ogTIEkUJTNRKfuviV6imfOBW6i874Wsn2XeWZBW83k",$select:"BatchStoresCashbackWorkflow"};function en(){return"1"===Gi.c.getParamsObj((0,Zi.zp)()).vptest}function tn(e){var t,i;try{(null===(i=null===(t=null===window||void 0===window?void 0:window.chrome)||void 0===t?void 0:t.ntpSettingsPrivate)||void 0===i?void 0:i.recordShoppingUserEngagement)&&window.chrome.ntpSettingsPrivate.recordShoppingUserEngagement(e,(()=>{}))}catch(e){(0,V.OO)(e,q.alw.ShoppingTelemetryError,"Unable to send user engagement")}}function nn(){var e,t;(null===(t=null===(e=null===window||void 0===window?void 0:window.chrome)||void 0===e?void 0:e.ntpSettingsPrivate)||void 0===t?void 0:t.ShoppingEngagement)&&(window.chrome.ntpSettingsPrivate.ShoppingEngagement.NTP_TOP_SITES_CLICK?tn(window.chrome.ntpSettingsPrivate.ShoppingEngagement.NTP_TOP_SITES_CLICK):window.chrome.ntpSettingsPrivate.ShoppingEngagement.NTP_TOP_SITES_HOVER&&tn(window.chrome.ntpSettingsPrivate.ShoppingEngagement.NTP_TOP_SITES_HOVER))}function rn(e){return new Promise((t=>{var i,n;en()?t(!0):(null===(n=null===(i=null===window||void 0===window?void 0:window.chrome)||void 0===i?void 0:i.ntpSettingsPrivate)||void 0===n?void 0:n.getPref)?window.chrome.ntpSettingsPrivate.getPref(e,(i=>{t(i&&i.key===e?i.value:null)})):t(null)}))}function on(e){return new Promise((t=>{var i,n;if(null===(n=null===(i=null===window||void 0===window?void 0:window.chrome)||void 0===i?void 0:i.ntpSettingsPrivate)||void 0===n?void 0:n.getWebAssistEntities){const i=e.map((e=>e.clickUrl));window.chrome.ntpSettingsPrivate.getWebAssistEntities(i,(i=>{let n=[];if(i.success){const t=Object.keys(i.result);n=e.filter((e=>t.includes(e.clickUrl)))}t(n)}))}else t([])}))}function sn(e,t){var i,n,r,o;return(0,c.mG)(this,void 0,void 0,(function*(){const s=new Map;if(!en())if(t){const t=yield function(e){return(0,c.mG)(this,void 0,void 0,(function*(){try{const t={method:"GET",credentials:"include",headers:yield Wi.$.getOneServiceHeaders()},i=an(e),n=yield(0,zi.w)((()=>(0,c.mG)(this,void 0,void 0,(function*(){const e=yield fetch(i,t);if(!e)throw Error(`Null response. Url = ${i}`);if(!e.ok)throw Error(`Status:${e.status} Url = ${i}`);return e.json()}))),"getShoppingDataFromOneService",Ji,Xi);if(!(n&&n.length&&n[0]&&n[0].data))throw new Error(`Null, empty or invalid response Json. Url = ${i}`);const r={cashbackData:null,userData:null};return n.forEach((e=>{"BatchStoresCashback"===e.type?r.cashbackData=JSON.parse(e.data):"EdgeShoppingCard"===e.type&&(r.userData=JSON.parse(e.data))})),r}catch(e){return null}}))}(e),r=t.userData,o=t.cashbackData;let a=[],d=[];(null===(i=null==r?void 0:r.abandonedCarts)||void 0===i?void 0:i.data)&&r.abandonedCarts.data.length>0&&(a=yield on(r.abandonedCarts.data),0==a.length?Ae.M0.addOrUpdateTmplString("PruneAbandonedCarts:1;PruneAllAbandonedCarts:1"):r.abandonedCarts.data.length>a.length&&Ae.M0.addOrUpdateTmplString("PruneAbandonedCarts:1;PruneAllAbandonedCarts:0")),(null===(n=null==r?void 0:r.priceDrops)||void 0===n?void 0:n.data)&&r.priceDrops.data.length>0&&(d=yield on(r.priceDrops.data),0==d.length?Ae.M0.addOrUpdateTmplString("PrunePriceDrops:1;PruneAllPriceDrops:1"):r.priceDrops.data.length>d.length&&Ae.M0.addOrUpdateTmplString("PrunePriceDrops:1;PruneAllPriceDrops:0")),cn(a,d,o,s)}else{cn([],[],yield function(e){return(0,c.mG)(this,void 0,void 0,(function*(){try{const t={method:"GET",credentials:"include",headers:yield Wi.$.getOneServiceHeaders()},i=an(e),n=yield(0,zi.w)((()=>(0,c.mG)(this,void 0,void 0,(function*(){const e=yield fetch(i,t);if(!e)throw Error(`Null response. Url = ${i}`);if(!e.ok)throw Error(`Status:${e.status} Url = ${i}`);return e.json()}))),"getCashbackDataFromOneService",Ji,Xi);if(!(n&&n.length&&n[0]&&n[0].data))throw new Error(`Null, empty or invalid response Json. Url = ${i}`);return JSON.parse(n[0].data)}catch(e){return null}}))}(e),s)}return function(){const e=Gi.c.getParamsObj((0,Zi.zp)());return"1"===e.test||"1"===e.vptest}()&&cn(null===(r=null==Qi?void 0:Qi.abandonedCarts)||void 0===r?void 0:r.data,null===(o=null==Qi?void 0:Qi.priceDrops)||void 0===o?void 0:o.data,Ki,s),s}))}function an(e){const t=G.jG.CurrentMarket;if("en-us"!=t)throw new Error(`Unsuported market ${t}`);const i=new URL("https://assets.msn.com/service/segments/recoitems/shopping"),n=new Vi.h;for(const e in Yi){const t=Yi[e];n.set(e,t)}const r=(0,qi.pW)();return n.set("activityId",r),n.set(G.jG.OneServiceContentMarketQspKey,t),n.set("$filter",e.join(",")),i.search=n.toString(),i.href}function cn(e,t,i,n){return(null==e?void 0:e.length)>0&&function(e,t){t.forEach((t=>{const i=t.storeInfo.domain;let n=dn(i);if(e.has(i)&&(n=e.get(i)),""===n.abandonedCart.webLink){const e=new URL(`https://${i}`);n.abandonedCart.webLink=e.toString()}if(n.abandonedCart.numberOfItems=n.abandonedCart.numberOfItems+1,2==n.abandonedCart.cartItems.length)return void e.set(i,n);let r=t.priceInfo.priceCurrencySymbol;"%24"===r&&(r="$");const o=+t.priceInfo.price,s={imgSrc:t.imageInfo.sourceImageUrl,title:t.title,price:`${r}${o.toFixed(2)}`,webLink:t.clickUrl,cartItemAriaLabel:""};s.cartItemAriaLabel=`${s.title} ${s.price}`,n.abandonedCart.cartItems.push(s),e.set(i,n)}))}(n,e),(null==t?void 0:t.length)>0&&function(e,t){t.forEach((t=>{const i=t.storeInfo.domain;let n=dn(i);if(e.has(i)&&(n=e.get(i),2==n.priceDrops.priceDropItems.length))return;let r=t.priceInfo.priceCurrencySymbol;"%24"===r&&(r="$");const o=+t.priceInfo.price,s=+t.priceInfo.originalPrice,a=s-o,c={imgSrc:t.imageInfo.sourceImageUrl,title:t.title,newPrice:`${r}${o.toFixed(2)}`,oldPrice:`${r}${s.toFixed(2)}`,priceDropValue:`${r}${a.toFixed(2)}`,webLink:t.clickUrl,priceDropAriaLabel:""};n.priceDrops.priceDropItems.push(c),e.set(i,n)}))}(n,t),i&&i.length&&function(e,t){t.forEach((t=>{if(t.cashbackInfo.value.length>0){const i=t.domain;let n=dn(i);e.has(i)&&(n=e.get(i));const r=new URL(`https://www.bing.com/rebates/details?merchant=${t.storeName}&redref=amc`),o=parseFloat(t.cashbackInfo.value),s=1==t.cashbackInfo.isPercentage?`${o}%`:`$${o.toFixed(2)}`,a={retailer:t.storeName,cashbackValue:s,urlLink:r.toString(),cashbackTextStart:"",cashbackTextEnd:""};n.cashBackInfo=a,e.set(i,n)}}))}(n,i),n}function dn(e){return{domain:e,dialogBoxAriaLabel:"",abandonedCart:{heading:"",cartItems:[],numberOfItems:0,buttonText:"",webLink:""},priceDrops:{heading:"",priceDropItems:[]},cashBackInfo:{retailer:"",cashbackValue:"",urlLink:"",cashbackTextStart:"",cashbackTextEnd:""}}}var ln=i(93450),un=i(85663),pn=i(11974);function gn(e){if(!e)return;let t=hn(e=(0,pn.Z)(e).replace(/^[\b\n\r]*/,""));return t&&t.href.toLocaleUpperCase().startsWith(e.toLocaleUpperCase())||Q.test(e)||(t=hn("https://"+e)),t&&t.host&&Q.test(t.protocol)&&Gi.c.isValidUrl(t.href,!0)?t:void 0}function hn(e){try{return new URL(e)}catch(e){return}}var mn=i(64193),fn=i(31402),vn=i(38349),yn=i(65932),bn=i(82423),Sn=i(1584);const Cn="removedTopSiteUrls";class wn extends mn.l{constructor(){super(...arguments),this.eagerConnectTopsites=!1,this.className="",this.extraAddedSitesClassName="",this.currentNumberOfTopSitesReturnedByClient=0,this.topSitesEndMarginUsedPadding=0,this.enableSixteenTopSites=!1,this.enableThirtyTopSites=!1,this.enableNewCollapsedQuickLinksStyle=!1,this.updateInformationalCollapsedStyle="",this.enableOfficeComCurated=!1,this.isActionMenuOpen=!1,this.isEditDialogOpen=!1,this.isUndoToastOpen=!1,this.isPinToastOpen=!1,this.topSiteMapper=new Map,this.moveUpward=!1,this.topSiteAddedSuccessfully=!1,this.addTopSiteDialogListener=!1,this.editTopSiteDialogListener=!1,this.shouldAddSeeAllLinksInFavoritesHubButton=!1,this.numberPromotedSites=0,this.disablePromoteTopSites=!1,this.tilesxColxRowsMap={[ae.Z3.onerow]:{[he.K$.c1]:{default:{tile:6,class:L.sixSites}},[he.K$.c2]:{default:{tile:10,class:L.tenSites}},[he.K$.c3]:{always:{tile:8,class:L.eightSites},peek:{tile:8,class:L.eightSites},default:{tile:10,class:L.tenSites}},[he.K$.c4]:{default:{tile:10,class:L.tenSites}},[he.K$.c5]:{default:{tile:10,class:L.tenSites}}},[ae.Z3.tworows]:{[he.K$.c1]:{default:{tile:6,class:L.sixSites}},[he.K$.c2]:{default:{tile:10,class:L.tenSites}},[he.K$.c3]:{default:{tile:16,class:L.eightSites}},[he.K$.c4]:{default:{tile:16,class:L.eightSites}},[he.K$.c5]:{default:{tile:16,class:L.eightSites}}},[ae.Z3.threerows]:{[he.K$.c1]:{default:{tile:9,class:L.sixSites}},[he.K$.c2]:{default:{tile:15,class:L.tenSites}},[he.K$.c3]:{always:{tile:24,class:L.eightSites},default:{tile:24,class:L.eightSites}},[he.K$.c4]:{default:{tile:30,class:L.tenSites}},[he.K$.c5]:{default:{tile:30,class:L.tenSites}}},[ae.Z3.top]:{[he.K$.c1]:{default:{tile:100,class:""}},[he.K$.c2]:{default:{tile:100,class:""}},[he.K$.c3]:{default:{tile:100,class:""}},[he.K$.c4]:{default:{tile:100,class:""}},[he.K$.c5]:{default:{tile:100,class:""}}}},this.outlookTmplFired=!1,this.isDisableDefaultInProgress=!1,this.getUserSelectedSetting=()=>this.userSelectedSetting,this.setActiveTopSiteElement=e=>{this.activeTopSiteElement=e},this.overflowItems=[],this.showMenu=!1,this.isOverflowing=!1,this.isOnImage=!0,this.topSitesResponsiveClassName="",this.collapsedDelayFunctionTimer=null,this.expandedDelayFunctionTimer=null,this.closeFlyouts=(0,ce.k)((()=>{this.isActionMenuOpen&&this.toggleActionMenu(null),this.isAddDialogOpen&&this.toggleAddDialog(),this.isEditDialogOpen&&this.toggleEditDialog()}),400),this.onMostVisitedHandler=()=>{this.getOrUpdateTopSites()},this.updateSmartListStateHandler=(e,t)=>{t?this.topSitesSmartListManager.enableSmartList(e):this.topSitesSmartListManager.disableSmartList(e),function(e){e?mt.H.logEvent(mt.v.NTP_SMARTLIST_ENABLED):mt.H.logEvent(mt.v.NTP_SMARTLIST_DISABLED)}(t)},this.updateInformationalCollapsedStyleCallback=e=>{if(this.chromiumPageSettingState&&"always"!==this.chromiumPageSettingState.selectedFeedDisplaySetting||!this.currentCollapsedState)return;if(!this.config||!this.config.enableNewQuickLinksPositionInAlways)return;0===(document.documentElement?document.documentElement:document.body).scrollTop&&e.deltaY<0&&(this.informationalCollapsedStyle=this.updateInformationalCollapsedStyle,window.removeEventListener("wheel",this.updateInformationalCollapsedStyleCallback),this.enableNewCollapsedQuickLinksStyle=!1)},this.onBreakpointCallback=e=>{this.columnArrangement=e,this.reRenderTopsite()},this.getCurrentLayoutConfig=()=>{var e,t;const i=null===(e=null==this?void 0:this.chromiumPageSettingState)||void 0===e?void 0:e.selectedFeedDisplaySetting,{enableUnifiedTopSites:n,enableUnifiedTopSitesTwoLinesOption:r}=this.config;let o=this.userSelectedSetting&&this.userSelectedSetting!==ae.Z3.off?this.userSelectedSetting:ae.Z3.onerow;n&&r&&this.userSelectedSetting===ae.Z3.onerow&&(o=ae.Z3.tworows);let s=n?this.unifiedTopSitesTilesxColxRowsMap:this.tilesxColxRowsMap;this.config.hidableSearchBox&&this.moveUpward&&(this.searchBoxHiddenTilesxColxRowsMap||this.setUpSearchBoxHiddenTilesColxRowsMap(),s=this.searchBoxHiddenTilesxColxRowsMap);const a=s[o][this.columnArrangement];return null!==(t=a[i])&&void 0!==t?t:a.default},this.onResize=()=>{this.closeFlyouts.bind(this)(),this.updateInformationalCollapsedStyle="",this.setInformationalOnlyStyle.bind(this)(),this.userSelectedSetting===ae.Z3.top&&this.onOneLineTopSitesContainerResize.bind(this)()},this.toggleOverflowMenu=e=>{let t,i;switch(e){case j.AllQuickLinksButton:t=this.allQuickLinksButton,i="start";break;case j.SeeMoreButton:t=this.seeMoreButton,i="end";break;default:i="end"}if(!0===this.showMenu&&t!=this.toggleEle&&this.hideOverflowMenu(),!0===this.showMenu)this.toggleEle=null,this.overflowMenuClass="",this.hideOverflowMenu();else{if(this.toggleEle=t,this.overflowMenuClass=i,this.config.enableOneLineTopSitesPillShape&&this.overflowPanelContainer){const e=this.toggleEle&&this.oneLineTopSitesContainer?this.oneLineTopSitesContainer.offsetWidth-this.toggleEle.offsetLeft-this.toggleEle.offsetWidth:0;document.dir===Rt.N.ltr?this.overflowPanelContainer.style.right=e>8?e+"px":"8px":this.overflowPanelContainer.style.left=e>8?e+"px":"8px"}this.showOverflowMenu()}},this.onClickOutside=e=>{const t=e.composedPath();t&&t.includes(this.toggleEle)||this.isActionMenuOpen||t.includes(this.dialogRoot)||t.includes(this.oneLineTopSitesContainer)||t.includes(this.overflowPanelContainer)||this.hideOverflowMenu()},this.onScrollOutside=(0,It.Z)((()=>{this.hideOverflowMenu()}),200),this.onKeyDown=e=>{const{code:t}=e;"Escape"===t&&this.hideOverflowMenu()}}experienceConnected(){var e;if(this.eagerConnectTopsites=!!this.config.eagerConnectTopsites,this.config.enableWpoTopSitesConfigOverride){let e;e=this.config.enableWpoLocalStorageOptimization?(0,Sn.DU)():function(){try{const e=(0,_._)(G.jG.AppType,G.jG.CurrentRequestTargetScope),{treatments:t}=ne.getObject(e)||{};if(!t)return null;const i=t.filter((e=>(null==e?void 0:e.type)===W._h.topSitesPromotion||(null==e?void 0:e.type)===W._h.topSites));if((null==i?void 0:i.length)>0&&i[0].properties)return i[0].properties}catch(e){const t="Error in getting wpo topSites config";(0,V.H)(q.Od5,t,e)}return null}(),Ae.M0.addOrUpdateTmplProperty("wpotrmtdbg4",e?"1":"0"),e&&(this.config=Object.assign(Object.assign({},this.config),e))}this.topSitesContainerPromise=new Promise((e=>this.topSitesContainerPromiseResolver=e)),this.dragDropService||this.initializeDragDropService(),this.topSiteMenuItems=[{id:ae.Z3.off,title:this.strings.offOption||""},{id:ae.Z3.onerow,title:this.strings.quickLinks1Row||""},{id:ae.Z3.tworows,title:this.strings.quickLinks2Rows||""},{id:ae.Z3.top,title:this.strings.quickLinksTop||""}],this.enableThirtyTopSites&&this.topSiteMenuItems.splice(3,0,{id:ae.Z3.threerows,title:this.strings.quickLinks3Rows||""}),this.config.enableUnifiedTopSitesTwoLinesOption&&(this.strings.quickLinksMiddle&&(this.topSiteMenuItems[2].title=this.strings.quickLinksMiddle),this.topSiteMenuItems.splice(1,1)),(0,yn.Uo)(Se.z.ChromiumPageSettings,(e=>{this.chromiumPageSettingState=e;const t=e&&e.imageOfTheDayEnabled;e&&e.configData&&e.configData.enabledFeatures&&(this.enableOfficeComCurated=e.configData.enabledFeatures.includes("msNtpNoClientCuratedSites"),this.enableThirtyTopSites=e.configData.maxQuickLinks&&e.configData.maxQuickLinks>=29&&e.configData.enabledFeatures.includes("msNtpExp1")),this.enableSixteenTopSites=this.chromiumPageSettingState.ntpPrefOptionApiAvailability;let i=e&&e.selectedQuickLinksDisplaySetting;if(!i||i!==ae.Z3.threerows||e.configData.maxQuickLinks&&!(e.configData.maxQuickLinks<29)&&e.configData.enabledFeatures&&e.configData.enabledFeatures.includes("msNtpExp1")||(i=ae.Z3.onerow),(this.enableSixteenTopSites||this.enableThirtyTopSites)&&this.userSelectedSetting!==i&&(this.userSelectedSetting&&(this.userSelectedSettingCheck=!0,this.userSelectedSetting=i,this.userSelectedSetting===ae.Z3.tworows?this.config.maxTiles=h:this.userSelectedSetting===ae.Z3.threerows?this.config.maxTiles=v:this.userSelectedSetting===ae.Z3.top&&(this.config.maxTiles=100),this.config.enableUnifiedTopSites&&this.config.enableUnifiedTopSitesTwoLinesOption&&(this.userSelectedSetting===ae.Z3.tworows||this.userSelectedSetting===ae.Z3.onerow)&&(this.config.maxTiles=h),this.getOrUpdateTopSites()),this.userSelectedSetting=i),this.className=t?(0,me.Y)()?L.topSitesDarkOnBackgroundImage:L.topSitesLightOnBackgroundImage:(0,me.Y)()?L.topSitesDark:L.topSitesLight,this.config.hidableSearchBox){const t=e.hideSearchBox&&"always"===e.selectedFeedDisplaySetting;this.moveUpward!==t&&(this.moveUpward=t,this.setInformationalOnlyStyle())}this.chromiumPageSettingLayoutState&&this.chromiumPageSettingLayoutState!=e&&this.reRenderTopsite(),this.topSiteSelectedItem=this.topSiteMenuItems.find((e=>e.id===this.userSelectedSetting)),this.chromiumPageSettingLayoutState=e,this.isOnImage=e.imageOfTheDayEnabled,this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding&&this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding!=this.topSitesEndMarginUsedPadding&&(this.topSitesEndMarginUsedPadding=this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding,this.setInformationalOnlyStyle()),this.topSitesResponsiveClassName=this.getTopSitesResponsiveClassName(),Ae.M0.addOrUpdateTmplString("tsLayout:"+this.userSelectedSetting)})),this.columnArrangement=(0,fe.Bn)().currentColumnArrangement,this.numberPromotedSites=this.config.promoteCurated;const t=(0,z.$o)().getItem(E),i=Number(null==t?void 0:t);this.disablePromoteTopSites=!isNaN(i)&&0===i,!this.disablePromoteTopSites&&this.numberPromotedSites>i&&(this.numberPromotedSites=i),this.enableSixteenTopSites?(this.config.maxTiles=h,this.extraAddedSitesClassName=this.userSelectedSetting===ae.Z3.tworows&&this.columnArrangement>="c4"?null:L.tenSites):(this.config.maxTiles=g,this.extraAddedSitesClassName=L.eightSites),this.config.enableOneColumn&&this.columnArrangement===he.K$.c1&&(this.extraAddedSitesClassName=L.sixSites),this.enableThirtyTopSites&&(this.config.maxTiles=v),this.userSelectedSetting===ae.Z3.top&&(this.config.maxTiles=100),this.config.enableUnifiedTopSites&&this.config.enableUnifiedTopSitesTwoLinesOption&&(this.userSelectedSetting===ae.Z3.tworows||this.userSelectedSetting===ae.Z3.onerow)&&(this.config.maxTiles=h),this.topSitesLayoutDataConnector=(0,bn.K0)(Se.z.TopSitesLayoutData),this.topSitesLayoutDataConnector&&this.topSitesLayoutDataConnector.updateMaxTiles(this.config.maxTiles),this.pageSettingsConnector=(0,bn.K0)(Se.z.ChromiumPageSettings);const n=window;n.chrome&&n.chrome.embeddedSearch&&(this.ntpApiHandle=n.chrome.embeddedSearch.newTabPage);const r=this.config?this.config.smartListConfig:null;this.topSitesSmartListManager=class{constructor(e,t){this.$updateTopSitesHandler=t,this.$smartListConfig=e,this.validateConfigAndSetEnableState(),this.$enabled&&(this.$smartListStorageState=$i(),this.$smartListSharedConnector=this.getSmartListSharedConnector(),this.startSmartListObservers())}get shouldRenderSmartList(){return this.$enabled}get smartListBadgePropsMap(){return this.$smartListBadgePropsMap}static getInstance(e,t){return this.$instance||(this.$instance=new this(e,t))}static deInit(){this.$instance=void 0}disableSmartList(e){if(!this.$enabled||!e||!this.$topSiteSmartListMap)return;const t=this.$topSiteSmartListMap.get(e);t&&(t.enabled=!1,Fi(t.experienceType,!1),this.$updateTopSitesHandler())}enableSmartList(e){if(!(this.$enabled&&e&&this.$topSiteSmartListMap&&this.$topSiteSmartListMap.get(e)))return;const t=this.$topSiteSmartListMap.get(e);t&&!t.enabled&&(t.enabled=!0,Fi(t.experienceType,!0),t.experienceType===Ce.x.edgeShopping?this.initEdgeShoppingSmartlist():this.tryInitSmartList(t.experienceType),this.$updateTopSitesHandler())}getSmartListSignInStatus(e){if(!(this.$enabled&&e&&this.$topSiteSmartListMap&&this.$topSiteSmartListMap.get(e)))return;const t=this.$topSiteSmartListMap.get(e);return t?t.isUserSignedIn:void 0}hoverTopSite(e,t=!0,i){if(this.$enabled&&this.$topSiteSmartListMap&&this.$topSiteSmartListMap.has(e)){const n=this.$topSiteSmartListMap.get(e),r=i.currentTarget;n&&n.enabled&&(t?this.executeSmartListCallback(n.experienceType,Hi.render,r):this.executeSmartListCallback(n.experienceType,Hi.unmount,r))}}mapMostVisitedDataToSmartLists(e,t){var i;if(this.$enabled&&(this.$topSiteSmartListMap=new Map,e.forEach((e=>{const t=this.trimUrl(e.url);Object.values(this.$smartListConfig.smartLists).forEach((i=>{this.getSmartList(i.experienceType)||i.identifierHosts.every((n=>{if(0===t.indexOf(n)){const t=!this.$smartListStorageState||Bi(i.experienceType);return this.$topSiteSmartListMap.set(e.rid,{experienceType:i.experienceType,enabled:t,isSignInAvailable:!(0,un.isNullOrUndefined)(i.isSignInAvailable)&&i.isSignInAvailable,isUserSignedIn:!!this.$smartListStorageState&&ji(i.experienceType)}),this.tryInitSmartList(i.experienceType),!1}return!0}))}))})),this.$smartListStorageState=Ui(...this.$topSiteSmartListMap.values()),this.edgeShoppingSmartlistConfigEnabled()&&(Ae.M0.addOrUpdateTmplProperty("ShoppingSmartlistsHasConfigEnabled","1"),t||this.fetchShopingDataForTopSites(e),(null===(i=this.$shoppingSmartListData)||void 0===i?void 0:i.size)>0))){const t=Array.from(this.$shoppingSmartListData.keys()),i=e.filter((e=>{const i=gn(e.url).hostname.replace("www.","");return t.includes(i)}));if(i&&i.length>0){const e=!this.$smartListStorageState||Bi(Ce.x.edgeShopping),t={experienceType:Ce.x.edgeShopping,enabled:e,isSignInAvailable:!1,isUserSignedIn:!!this.$smartListStorageState&&ji(Ce.x.edgeShopping)};this.$smartListStorageState=Ui(...this.$topSiteSmartListMap.values(),t),i.forEach((e=>{e.hasEdgeShoppingSmartlist=!0,this.$topSiteSmartListMap.set(e.rid,t)})),this.initEdgeShoppingSmartlist()}}}moveFocusToSmartList(e,t){if(this.$enabled&&this.$topSiteSmartListMap){if(this.$topSiteSmartListMap.has(e)){const i=this.$topSiteSmartListMap.get(e);if(i&&i.enabled&&this.$smartListSharedConnector)return this.$smartListSharedConnector.moveFocusToSmartList(i.experienceType,t)}return!1}}signInSmartList(e){if(!(this.$enabled&&e&&this.$topSiteSmartListMap&&this.$topSiteSmartListMap.get(e)))return;const t=this.$topSiteSmartListMap.get(e);t&&t.isSignInAvailable&&!ji(t.experienceType)&&(t.isUserSignedIn=!0,Fi(t.experienceType,t.enabled,!0),this.executeSmartListCallback(t.experienceType,Hi.updateSingInStatus,!0))}signOutSmartList(e){if(!this.$enabled||!e||!this.$topSiteSmartListMap)return;const t=this.$topSiteSmartListMap.get(e);t&&t.isSignInAvailable&&ji(t.experienceType)&&(t.isUserSignedIn=!1,Fi(t.experienceType,t.enabled,!1),this.executeSmartListCallback(t.experienceType,Hi.updateSingInStatus,!1))}getEnabledSmartList(e){if(!(this.$enabled&&e&&this.$topSiteSmartListMap&&this.$topSiteSmartListMap.has(e)))return null;const t=this.$topSiteSmartListMap.get(e);return t.enabled?t:null}hasSignInAvailable(e){return!!(this.$enabled&&this.$topSiteSmartListMap&&this.$topSiteSmartListMap.get(e)&&this.$topSiteSmartListMap.get(e).isSignInAvailable)}hasSmartList(e){return!!(this.$enabled&&e&&this.$topSiteSmartListMap&&this.$topSiteSmartListMap.get(e))}executeSmartListCallback(e,t,i){if(this.$smartListSharedConnector)switch(t){case Hi.initialize:e===Ce.x.edgeShopping?this.$smartListSharedConnector.initSmartList(e,i):this.$smartListSharedConnector.initSmartList(e);break;case Hi.render:this.$smartListSharedConnector.renderSmartList(e,i);break;case Hi.unmount:this.$smartListSharedConnector.unmountSmartList(e,i);break;case Hi.updateSingInStatus:this.$smartListSharedConnector.updateSignInStatus(e,i)}}tryInitSmartList(e,t){if(!this.isSmartListEnabled(e)||!this.$smartListSharedConnector)return;const i=this.$smartListSharedConnector.getCurrentState().smartLists;i&&0!==i.size&&this.executeSmartListCallback(e,Hi.initialize,t)}getSmartListSharedConnector(){return ln._.getInstance().rootReducer.connector(Se.z.SmartListSharedData)}isSmartListEnabled(e){const t=this.getSmartList(e);return!(!t||!t.enabled)}getSmartList(e){for(const[t,i]of this.$topSiteSmartListMap)if(i.experienceType===e)return i;return null}validateConfigAndSetEnableState(){this.$smartListConfig&&this.$smartListConfig.enabled&&this.$smartListConfig.smartLists&&0!==Object.entries(this.$smartListConfig.smartLists).length?this.$enabled=!0:this.$enabled=!1}trimUrl(e){let t;try{t=new URL(e)}catch(e){return""}let i=t.host?t.host:"";return i=i.replace(/^(www\.)?/i,""),`${i}${t.pathname?t.pathname:""}`}updateSmartListBadgeProps(e,t){this.$smartListBadgePropsMap||(this.$smartListBadgePropsMap=new Map),this.$smartListBadgePropsMap.set(e,t)}observeSmartListRegistrations(){this.$smartListSharedConnector&&_i.j.registerSmartList.registerObserver((e=>{if(!e.params&&!e.params[0])return;const t=e.params[0];t.experienceType===Ce.x.edgeShopping?this.initEdgeShoppingSmartlist():this.tryInitSmartList(t.experienceType)}))}observeSmartListBadgePropUpdate(){this.$smartListSharedConnector&&_i.j.updateSmartListBadgeProps.registerObserver((e=>{if(!e.params||!e.params[0])return;const t=e.params[0],i=e.params[1];this.getSmartList(t)&&(this.updateSmartListBadgeProps(t,i),this.$updateTopSitesHandler())}))}observeSmartListDisable(){this.$smartListSharedConnector&&_i.j.disableSmartList.registerObserver((e=>{if(!e.params||!e.params[0])return;const t=e.params[0],i=this.getSmartList(t);if(i)for(const[e,t]of this.$topSiteSmartListMap)if(t===i)return void this.disableSmartList(e)}))}observeSmartListUpdateSignInState(){this.$smartListSharedConnector&&(_i.j.userSignInSignature.registerObserver((e=>{if(!e.params||!e.params[0])return;const t=e.params[0],i=this.getSmartList(t);if(i)for(const[e,t]of this.$topSiteSmartListMap)if(t===i)return void this.signInSmartList(e)})),_i.j.userSignOutSignature.registerObserver((e=>{if(!e.params||!e.params[0])return;const t=e.params[0],i=this.getSmartList(t);if(i)for(const[e,t]of this.$topSiteSmartListMap)if(t===i)return void this.signOutSmartList(e)})))}startSmartListObservers(){this.observeSmartListRegistrations(),this.observeSmartListBadgePropUpdate(),this.observeSmartListDisable(),this.observeSmartListUpdateSignInState()}initEdgeShoppingSmartlist(){var e;if((null===(e=this.$shoppingSmartListData)||void 0===e?void 0:e.size)>0){const e=Array.from(this.$shoppingSmartListData.values());this.tryInitSmartList(Ce.x.edgeShopping,JSON.stringify(e))}}edgeShoppingSmartlistConfigEnabled(){return!!this.$smartListConfig.smartLists.EdgeShopping}fetchShopingDataForTopSites(e){return(0,c.mG)(this,void 0,void 0,(function*(){if(!(yield rn("edge_shopping_assistant_enabled")))return;if(Ae.M0.addOrUpdateTmplProperty("HasShoppingPreference","1"),!(yield rn("shopping.allow_personalized_shopping")))return;Ae.M0.addOrUpdateTmplProperty("HasShoppingReminders","1");const t=e.reduce(((e,t)=>{const i=gn(t.url);return i&&e.push(i.toString()),e}),[]),i=yield(n=t,new Promise((e=>{var t,i;en()?e(["https://www.amazon.com"]):(null===(i=null===(t=null===window||void 0===window?void 0:window.chrome)||void 0===t?void 0:t.edgeShoppingPrivate)||void 0===i?void 0:i.getShoppingDomainsEligibility)?window.chrome.edgeShoppingPrivate.getShoppingDomainsEligibility(n,(t=>{t&&Object.keys(t).length>0?e(Object.keys(t)):e([])})):e(null)})));var n;if(!i||!Array.isArray(i)||0===i.length)return;Ae.M0.addOrUpdateTmplProperty("HasShoppingDomain","1");const r=i.map((e=>gn(e).hostname.replace("www.",""))),o=r.filter(((e,t)=>r.indexOf(e)===t)),s=yield sn(o,this.$smartListConfig.useNewShoppingApi);this.$shoppingSmartListData=s,s.size>0&&(Ae.M0.addOrUpdateTmplProperty("HasShoppingDataForTopSites","1"),this.mapMostVisitedDataToSmartLists(e,!0))}))}}.getInstance(r,this.getOrUpdateTopSites.bind(this)),this.ntpApiHandle&&(this.ntpApiHandle.onmostvisitedchange=this.onMostVisitedHandler);const o=this.getOverrideIconList();o&&o.length>0&&o.forEach((e=>{e.identifierHosts.forEach((t=>{var i;this.topSiteMapper.set(t,null!==(i=e.faviconUrl)&&void 0!==i?i:re(e.faviconId))}))})),this.config.suggestedTopSiteList&&this.config.suggestedTopSiteList.length>0&&(this.config.suggestedTopSiteList=((e,t)=>{if(!e)return t;for(const i of t){const t=e.addOrUpdateChild({name:`${Ye}_${Ze}_${Ve}`,behavior:Ie.wu.Save,content:{headline:lt.suggestedLink,type:Ie.uH.TopSites},overrideDestinationUrl:ut,type:Ie.c9.ActionButton});i.suggestedLinkTelemetryTag=t.getMetadataTag()}return t})(this.telemetryObject,this.config.suggestedTopSiteList)),this.currentCollapsedState=!1,this.initializeTopSitesState(),this.minimumTopSites=g-1,this.getOrUpdateTopSites(),this.topSiteAddDialog=this.generateTopSiteAddDialogProps(),this.topSiteAddedSuccessfully=!1,this.topSiteEditDialog=this.generateTopSiteEditDialogProps(),this.actionsMenuProps=this.generateActionsMenuProps(),this.isOnImage=null===(e=this.pageSettingsConnector)||void 0===e?void 0:e.getCurrentState().imageOfTheDayEnabled,(0,Ot.FY)(Mt._.topSites,this)}disconnectedCallback(){super.disconnectedCallback(),this.dragDropService&&this.dragDropService.destroy()}prerenderRefreshCritical(){return(0,c.mG)(this,void 0,void 0,(function*(){this.initializeTopSitesState()}))}shadowDomPopulated(){addEventListener("resize",this.onResize.bind(this)),addEventListener("mouseup",this.handleClick.bind(this),!1),addEventListener("recommendedSitesSelection",(()=>{setTimeout((()=>this.setInformationalOnlyStyle()),0)})),(0,fe.Bn)().subscribe(this.onBreakpointCallback),requestAnimationFrame((()=>{setTimeout((()=>{this.markVisuallyReady(),Ae.M0.observeSingleElement(this.topSitesRoot)}))})),this.columnArrangement=(0,fe.Bn)().currentColumnArrangement,this.reRenderTopsite();const e=this.shadowRoot.getElementById("clickAddTileButton");e&&(0,Ot.FY)(Mt._.addTopSiteButton,e);const t=this.shadowRoot.querySelector("msft-top-site");if(t&&(0,Ot.FY)(Mt._.topSitesFirstLink,t),(0,G.Yq)().ClarityEnabled||this.config.clarityEnabled){const e=this.shadowRoot.getElementById(R.topSitesId);e&&e.setAttribute("data-clarity-mask","true")}const i=this.shadowRoot.getElementById("seeAllLinksInFavoritesHubButton");i&&(0,Ot.FY)(Mt._.seeAllLinksButton,i),this.topSitesContainerPromiseResolver(this.userSelectedSetting===ae.Z3.top?this.oneLineTopSitesContainer:this.topSitesContainer),this.config.enablePromotionCoachMark&&this.registerCoachMark()}getExperienceType(){return Ce.x.topSitesEdgeNextWC}get quickLinkButtonAriaLabel(){return this.currentCollapsedState?this.strings.quickLinksExpandAriaLabelText:this.strings.quickLinksCollapseAriaLabelText}get twoRowSitesClassName(){var e;return this.selectedQuickLinksDisplaySetting&&this.selectedQuickLinksDisplaySetting==ae.Z3.tworows?(null===(e=this.topSites)||void 0===e?void 0:e.length)<=this.minimumTopSites?"":L.twoRowSites:""}get showCodexBingNudge(){return this.config&&this.config.showCodexBingNudge&&(0,de.L)()&&"0"===(0,de.L)().get("dsp")}get topSitesClassName(){return this.isInformationalLayout&&this.userSelectedSetting!==ae.Z3.top?"information-layout":""}get isInformationalLayout(){var e;return!("always"!=(null===(e=this.chromiumPageSettingState)||void 0===e?void 0:e.selectedFeedDisplaySetting))}changeCollapsedState(e){const t=this.currentCollapsedState?"0":"1";e&&Ae.M0.sendActionEvent(e.target);const i=P.toLowerCase(),n={setting:i,source:"ntp",timestamp:(new Date).getTime(),value:parseInt(t)};we.L.savePreferenceSetting(i,n),this.topSitesTelemetryContext&&(this.topSitesTelemetryContext.showOrHide=((e,t)=>{const i=`${Qe}_${t?Je:Xe}`,n=t?Ie.wu.Show:Ie.wu.Hide,r=t?lt.show:lt.collapse,o=e.showOrHide;return o.contract.name=i,o.contract.behavior=n,o.contract.content.headline=r,o})(this.topSitesTelemetryContext,!this.currentCollapsedState),this.quickLinkButtonTelemetryTag=this.topSitesTelemetryContext.showOrHide.getMetadataTag()),this.currentCollapsedState=!this.currentCollapsedState,this.setInformationalOnlyStyle(),(0,vn.ih)(Ce.x.topSitesEdgeNextWC),window.requestAnimationFrame((()=>{this.currentCollapsedState?(this.collapsedDelayFunctionTimer=window.setTimeout((()=>{this.actionButtonLabelClassName="collapsed-label"}),300),this.actionButtonSvgClassName="collapsed-svg",this.sitesClassName="collapsed-sites",null!==this.expandedDelayFunctionTimer&&(window.clearTimeout(this.expandedDelayFunctionTimer),this.expandedDelayFunctionTimer=null)):(this.actionButtonLabelClassName="expanded-label",this.actionButtonSvgClassName="expanded-svg",this.expandedDelayFunctionTimer=window.setTimeout((()=>{this.sitesClassName="expanded-sites"}),300),null!==this.collapsedDelayFunctionTimer&&(window.clearTimeout(this.collapsedDelayFunctionTimer),this.collapsedDelayFunctionTimer=null))})),this.topSitesLayoutDataConnector&&this.topSitesLayoutDataConnector.updateCollapsedStatus(this.currentCollapsedState)}closeUndoToast(e=!1){var t;this.isUndoToastOpen=!1,this.isPinToastOpen=!1,e&&(0,le.Gg)(le.tk.toast,!1),this.isAddDialogOpen&&this.toggleAddDialog(),this.isEditDialogOpen&&this.toggleEditDialog(),null===(t=this.activeContextMenuButtonElement)||void 0===t||t.focus()}generateActionsMenuProps(){return{menuItems:this.getActionMenuItem(),onDismiss:this.toggleActionMenu}}generateTopSiteAddDialogProps(){return{addInputListener:e=>{this.addTopSiteDialogElement=this.shadowRoot.getElementById("topSiteAddDialog"),this.addTopSiteDialogListener||(this.addTopSiteDialogListener=!0,this.addTopSiteDialogElement.addEventListener("keydown",(e=>{"Escape"===e.key&&this.addTopSiteDialogElement.closeTopSiteDialog()}))),this.addTopSiteDialogElement.nameInputControl.addEventListener("keydown",(e=>{"Tab"!==e.key&&"Shift"!==e.key||this.addTopSiteDialogElement.nameInputKeyHandler(e)}))},onClose:e=>{this.toggleAddDialog()},saveHandler:(e,t)=>{const i=t||e.detail,n=gn(i.url),r=t?t.title:i.name,o=function(e,t,i){if(e&&t){const n=e.fixupAndValidateUrl(t.href);if(n)return e.updateCustomLink(-1,n,i||t.hostname),mt.H.logEvent(mt.v.NTP_CUSTOMIZE_SHORTCUT_ADD),!0}return!1}(this.ntpApiHandle,n,r);this.lastAddedTopSite=r,o?(this.topSiteAddedSuccessfully=!0,this.toggleAddDialog()):(this.topSiteAddedSuccessfully=!1,this.lastAddedTopSite="")},headerTitle:this.strings.addDialogHeadingText,saveText:this.strings.addText,cancelText:this.strings.cancelText,closeText:this.strings.closeButtonText,dialogAnchor:this.activeTopSiteElement,nameInputBox:{name:this.strings.nameLabelText,value:"",ariaLabel:this.strings.ariaLabel_addNameInput||"",id:"nameInputControl"},urlInputBox:{name:this.strings.urlLabelText,value:"",ariaLabel:this.strings.ariaLabel_addUrlInput||"",id:"urlInputControl"},newOrUpdatedTopSite:{name:"",url:""},saveButtonTelemetryTag:this.topSitesTelemetryContext&&this.topSitesTelemetryContext.saveAdd&&this.topSitesTelemetryContext.saveAdd.getMetadataTag(),cancelButtonTelemetryTag:this.topSitesTelemetryContext&&this.topSitesTelemetryContext.cancelAdd&&this.topSitesTelemetryContext.cancelAdd.getMetadataTag(),closeButtonTelemetryTag:this.topSitesTelemetryContext&&this.topSitesTelemetryContext.closeAddDialog&&this.topSitesTelemetryContext.closeAddDialog.getMetadataTag()}}generateTopSiteEditDialogProps(){return{addInputListener:e=>{this.editTopSiteDialogElement=this.shadowRoot.getElementById("topSiteEditDialog"),this.editTopSiteDialogListener||(this.editTopSiteDialogListener=!0,this.editTopSiteDialogElement.addEventListener("keydown",(e=>{"Escape"===e.key&&this.editTopSiteDialogElement.closeTopSiteDialog()}))),this.editTopSiteDialogElement.nameInputControl.addEventListener("keydown",(e=>{"Tab"!==e.key&&"Shift"!==e.key||this.editTopSiteDialogElement.nameInputKeyHandler(e)}))},onClose:e=>{this.toggleEditDialog(e)},saveHandler:e=>{const t=e.detail,i=gn(t.url),n=t.name;if(this.dragDropService&&"slot"in this.activeTopSiteItem)return this.activeTopSiteItem.title=n,this.dragDropService.updateTopSites(this.activeTopSiteItem),this.toggleEditDialog(e),void this.getOrUpdateTopSites();const r=function(e,t,i,n,r,o){if(t&&n){let s=t.fixupAndValidateUrl(n.href);if(s&&r)return t.getMostVisitedItemData(r)?(s=t.getMostVisitedItemData(r).url!==s?s:"",t.updateCustomLink(r,s,o||n.hostname),t.logEvent(mt.v.NTP_CUSTOMIZE_SHORTCUT_UPDATE)):(t.onmostvisitedchange=i,t.updateCustomLink(-1,s,o||n.hostname),e()),!0}return!1}(this.getOrUpdateTopSites.bind(this),this.ntpApiHandle,this.onMostVisitedHandler.bind(this),i,this.activeTopSiteItem.rid,n);r&&this.toggleEditDialog(e)},headerTitle:this.strings.renameDialogHeadingText,saveText:this.strings.saveText,cancelText:this.strings.cancelText,closeText:this.strings.closeButtonText,dialogAnchor:this.activeTopSiteElement,nameInputBox:{name:this.strings.nameLabelText,value:"",ariaLabel:this.strings.ariaLabel_addNameInput||"",id:"nameInputControl"},saveButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.saveEdit&&this.topSiteActionTelemetryContext.saveEdit.getMetadataTag(),cancelButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.cancelEdit&&this.topSiteActionTelemetryContext.cancelEdit.getMetadataTag(),closeButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.closeEditDialog&&this.topSiteActionTelemetryContext.closeEditDialog.getMetadataTag()}}generateUndoTopSiteHandler(){return this.isDisableDefaultInProgress?(this.disableCurated(),void(this.isDisableDefaultInProgress=!1)):this.dragDropService&&"slot"in this.activeTopSiteItem?(this.dragDropService.addTopSite(this.activeTopSiteItem),this.toggleUndoToast(),void this.getOrUpdateTopSites()):(this.activeTopSiteItem.tileSource==s.PromotedCuratedTileSource&&(this.numberPromotedSites++,(0,z.$o)().setItem(E,this.numberPromotedSites.toString())),kt(this.getOrUpdateTopSites.bind(this),this.ntpApiHandle,this.activeTopSiteItem.rid,this.activeTopSiteItem.tileSource,this.activeTopSiteItem.url),void this.toggleUndoToast(!0))}generateUndoToastProps(){const e=this.activeTopSiteItem.title,t=e.length>20?`${e.substring(0,20)}`:e,i=this.strings.undoRemovedFormat;let n=(0,ue.Z)(i,t);return this.isDisableDefaultInProgress&&(n=[this.strings.undoDisableDefault]),{closeButtonLabel:this.strings.closeButtonText,closeButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.closeRemoveToast?this.topSiteActionTelemetryContext.closeRemoveToast.getMetadataTag():null,closeHandler:()=>{this.toggleUndoToast()},notificationDurationMs:this.config.undoToastNotificationDurationMs||C,removedText:n,undoButtonLabel:this.strings.undoLabelText,undoButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.undoRemoveTopSite?this.topSiteActionTelemetryContext.undoRemoveTopSite.getMetadataTag():null,undoTopSiteHandler:()=>{this.generateUndoTopSiteHandler()}}}generatePinToastProps(e){const{toastText:t,toastDisplayMs:i,tileTitle:n=this.activeTopSiteItem.title}=e,r=n.length>20?`${n.substring(0,20)}`:n,o=(0,ue.Z)(t,r);return{closeButtonLabel:this.strings.closeButtonText,closeButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.closeRemoveToast?this.topSiteActionTelemetryContext.closeRemoveToast.getMetadataTag():null,closeHandler:()=>{this.isPinToastOpen=!1},notificationDurationMs:i||this.config.undoToastNotificationDurationMs||C,pinText:o}}checkTopsitesTail(e){var t;const i=null===(t=this.topSites)||void 0===t?void 0:t.length;if(i)for(let t=i-1;t>e&&"slot"in this.topSites[t];t--)this.topSites[t].slot--,this.dragDropService.addTopSite(this.topSites[t])}getActionMenuItem(){var e,t;const i=[s.CuratedTileSource,s.PromotedCuratedTileSource],n=this.activeTopSiteItem&&i.includes(this.activeTopSiteItem.tileSource),r=this.activeTopSiteItem&&this.activeTopSiteItem.tileSource===s.SponsoredCuratedTileSource,o=G.jG.CurrentMarket===pe.I.ENUS,c={id:"Remove",title:this.strings.removeLabelText,glyph:Dt(),onClick:e=>{this.checkTopsitesTail(this.findActiveSiteIndex(this.activeTopSiteItem)),"https://www.office.com"==this.activeTopSiteItem.url&&(this.deletedUrlLookup[this.activeTopSiteItem.url]=!0,this.webStorage.setObject(Cn,this.deletedUrlLookup)),this.activeTopSiteItem.tileSource==s.PromotedCuratedTileSource&&(this.numberPromotedSites--,(0,z.$o)().setItem(E,this.numberPromotedSites.toString())),this.dragDropService&&"slot"in this.activeTopSiteItem&&this.dragDropService.removeTopSite(this.activeTopSiteItem),Tt(0,this.getOrUpdateTopSites.bind(this),this.activeTopSiteItem,this.ntpApiHandle,this.toggleUndoToast.bind(this,!0),!0),this.onMostVisitedHandler()},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.removeTopSite?this.topSiteActionTelemetryContext.removeTopSite.getMetadataTag():""},d={id:"Rename",title:this.strings.renameLabelText,glyph:Pi(),onClick:e=>{this.toggleEditDialog(e)},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.editDialog?this.topSiteActionTelemetryContext.editDialog.getMetadataTag():""},l={id:"Hide",title:o?this.strings.hidePromotedCuratedLabelText:this.strings.hideCuratedLabelText,glyph:Oi(),onClick:e=>{this.disableCurated()},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.removeCurated?this.topSiteActionTelemetryContext.removeCurated.getMetadataTag():""},u={id:"Hide",title:o?this.strings.hideSponsoredCuratedLabelText:this.strings.hideCuratedLabelText,glyph:Oi(),onClick:e=>{this.disableCurated()},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.removeCurated?this.topSiteActionTelemetryContext.removeCurated.getMetadataTag():""},p={id:"PinToTaskBar",title:this.strings.pinToTaskBar,glyph:xi(),onClick:e=>{this.pinToTaskBar(),this.togglePinToast()},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.pinningTopSite?this.topSiteActionTelemetryContext.pinningTopSite.getMetadataTag():""},g={id:"Pin",title:(null===(e=this.activeTopSiteItem)||void 0===e?void 0:e.dragDropType)===a.DragDrop?this.strings.unpinSite:this.strings.pinSite,glyph:(null===(t=this.activeTopSiteItem)||void 0===t?void 0:t.dragDropType)===a.DragDrop?Jt():Kt(),onClick:e=>{this.pinAction(this.activeTopSiteItem)},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.pinningTopSite?this.topSiteActionTelemetryContext.pinningTopSiteInQuickLinks.getMetadataTag():""},h=[d,c];n&&h.push(l),r&&h.push(u),this.config.enableAllPin&&h.push(g),this.config.enablePinningTopSite&&h.push(p);const m=this.getSmartListActionsMenuItem();return m&&h.push(m),h}getSmartListActionsMenuItem(){if(this.activeTopSiteItem&&this.topSitesSmartListManager.shouldRenderSmartList&&this.topSitesSmartListManager.hasSmartList(this.activeTopSiteItem.rid)){let e,t,i;return this.topSitesSmartListManager.getEnabledSmartList(this.activeTopSiteItem.rid)?(e=this.strings.disableSmartListText,i=this.updateSmartListStateHandler.bind(this,this.activeTopSiteItem.rid,!1),t=this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.turnOffPreview?this.topSiteActionTelemetryContext.turnOffPreview.getMetadataTag():""):(e=this.strings.enableSmartListText,i=this.updateSmartListStateHandler.bind(this,this.activeTopSiteItem.rid,!0),t=this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.turnOnPreview?this.topSiteActionTelemetryContext.turnOnPreview.getMetadataTag():""),{id:"SmartList",title:e,glyph:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M0 6v1h1V6H0Zm0 3v1h1V9H0Zm3 0v1h13V9H3Zm-3 3v1h1v-1H0Zm3 1h13v-1H3v1Zm0-7v1h13V6H3ZM0 3v1h1V3H0Zm3 0v1h13V3H3Z"/></svg>',onClick:e=>{i(),this.toggleActionMenu(null)},telemetryTag:t}}return null}getOrUpdateTopSites(){var e,t;this.topSites=this.getTopSites(),this.currentTilesNumber=null!==(t=null===(e=this.topSites)||void 0===e?void 0:e.length)&&void 0!==t?t:0,this.topSitesPlaceHolders=this.getTopSitesPlaceHolders(),this.userSelectedSetting===ae.Z3.top&&window.requestAnimationFrame((()=>{setTimeout((()=>{this.onOneLineTopSitesContainerResize()}),10)})),this.showCodexBingNudge&&this.setInformationalOnlyStyle()}getOrderedTopSites(){var e,t,i,n,r;let o=Ct(this.ntpApiHandle);var a,c,d;o=this.sliceMostVisitedSites(o),0!==this.currentNumberOfTopSitesReturnedByClient&&o&&o.length>this.currentNumberOfTopSitesReturnedByClient&&(a=this.chromiumPageSettingState,c=this.pageSettingsConnector,d=o.length,c&&a&&a.configData&&a.configData.maxQuickLinks&&a.selectedQuickLinksDisplaySetting&&a.configData.isQuickLinksFolderInFavoritesEnabled&&(20===d&&a.configData.enabledFeatures&&a.configData.enabledFeatures.includes("msNtpExp1")&&a.configData.maxQuickLinks>=29?a.selectedQuickLinksDisplaySetting===ae.Z3.tworows&&c.executeSettingsChange(ae._9.quickLinksDisplaySetting,ae.VE[ae.Z3.threerows]):10===d&&a.selectedQuickLinksDisplaySetting===ae.Z3.onerow&&c.executeSettingsChange(ae._9.quickLinksDisplaySetting,ae.VE[ae.Z3.tworows]))),o&&o.length!==this.currentNumberOfTopSitesReturnedByClient&&(this.currentNumberOfTopSitesReturnedByClient=o.length),o=this.removeBlockedSites(o);let l=1;const u=new Map,p=this.numberPromotedSites;let h=p>0&&!this.disablePromoteTopSites;const m=[];o||(o=[]),this.updateAffiliateAutoAppendTileSource(o);let f=this.config.maxTiles?this.config.maxTiles-1:g-1;const v=this.getCurrentLayoutConfig();f=v.tile-1;const y=null===(e=this.chromiumPageSettingState)||void 0===e?void 0:e.hideDefaultTopSites,b=null===(t=this.chromiumPageSettingState)||void 0===t?void 0:t.enableNewUserDefaultSettings;let S=o.length>=f;if(!y&&o&&this.config&&(o.length<f||h)&&this.config.curatedSites){!function(e,t){if(t&&t.forEach((e=>{const t=new J(e.url);te[t.domain]=!0,ie[e.url]=!0})),ee=[],!e.curatedSites)return;const i=e.curatedSites.map((e=>{const t=e.faviconId||oe(e.faviconUrl);return Object.assign(Object.assign({},e),{faviconUrl:t?re(t):e.faviconUrl})})),n={};(0,X.Z)(te,((e,t)=>{se(n,t)})),(0,X.Z)(ie,((e,t)=>{if(!t||n[t])return;const i=new J(t);se(n,i.domainAndPath),n[t]=!0})),ee=new Array,i.forEach((e=>{const i=new J(e.url);n[i.domain]||n[i.domainAndPath]||n[e.url]||ee.push(e),e.isSponsored&&t.forEach((t=>{if(t.url===e.url&&t.tileSource==s.AlgoGeneratedTileSource){const i=e.faviconId||oe(e.faviconUrl);return t.title=e.title,void(t.faviconUrl=i?re(i):e.faviconUrl)}}))}))}(this.config,o),o.length<f&&(h=!1,S=!1);const e=o.length;e>0&&(l=o[e-1].rid+1e3);const t=ee;let i=this.config.maxTiles-1-o.length;h&&(i=p);let n=t.slice(0,i).map((e=>{var t;return u.set(l,e),{rid:l++,dataGenerationTime:void 0,faviconUrl:null!==(t=e.faviconUrl)&&void 0!==t?t:re(e.faviconId),domain:void 0,title:e.title,tileSource:this.getTileSource(h,e.isSponsored),tileTitleSource:void 0,url:e.url,direction:e.direction,enforcement:void 0,isSponsored:e.isSponsored}}));if(b&&(n=n.filter((e=>e.tileSource!==s.SponsoredCuratedTileSource))),this.webStorage=(0,z.$o)(),this.deletedUrlLookup=this.webStorage.getObject(Cn)||{},this.enableOfficeComCurated&&!this.deletedUrlLookup["https://www.office.com"]){const e={rid:l++,dataGenerationTime:void 0,faviconUrl:re("BBMzZlJ"),domain:void 0,title:"Office",tileSource:s.CuratedTileSource,tileTitleSource:void 0,url:"https://www.office.com",direction:"ltr",enforcement:void 0};n.unshift(e)}h?m.push(...n):o.push(...n)}this.config.enableRecommendedSites&&!y&&(o=wt(this.config,o,u,m));const C=new Map;if(h&&m.length>0)for(let e=p,t=0;e>0&&t<m.length;e--,t++)C.set(f-e,m[t]);const w=[s.AlgoGeneratedTileSource,s.AffiliateAutoAppendTileSource,s.CuratedTileSource,s.SponsoredCuratedTileSource,s.WPOPromotedTileSource],T=new Set(w),k=new Set([s.UserAddedTileSource,s.UserAddedTileSourceNewVal]);let A=v.tile;const I=null!==(r=null===(n=null===(i=this.dragDropService)||void 0===i?void 0:i.getFixedTopSites)||void 0===n?void 0:n.call(i))&&void 0!==r?r:[];let P=I.filter((e=>e.slot<A)),E=(0,Pt.Z)(o,P,"url"),O=E.filter((e=>k.has(e.tileSource)));O.length+I.filter((e=>e.slot<v.tile)).length<v.tile&&(A=v.tile-1,P=I.filter((e=>e.slot<A)),E=(0,Pt.Z)(o,P,"url"),O=E.filter((e=>k.has(e.tileSource))));const M=P.length,x=Math.min(A-M,O.length),D=A-M-x;let R=0,L=0;const F=E.reduce(((e,t)=>(T.has(t.tileSource)&&L<D&&(e.push(t),L+=1),k.has(t.tileSource)&&R<x&&(e.push(t),R+=1),e)),[]);o=[...vt(F,P)],h&&0===x&&C.size>0&&C.forEach(((e,t)=>{o.splice(t,0,e),o.pop()}));const N=ge.Al.CurrentFlightSet;return(N.has("prg-prmt-crtdv2")||N.has("prg-prmt-ctrlv2"))&&S&&Ae.M0.addOrUpdateTmplString("promotedTopSites"),o}getTopSites(){let e=this.getOrderedTopSites();if(e&&e.length>0){this.userSelectedSettingCheck||this.topSitesSmartListManager.mapMostVisitedDataToSmartLists(e),this.userSelectedSettingCheck=!1,e=e.map(((e,t)=>{if(this.config.maxTiles-1<t)return;if(this.config.overrideIconsList&&this.config.overrideIconsList.length>0&&this.topSiteMapper.size>0){const t=new URL(e.url);this.topSiteMapper.get(e.url)?e.faviconUrl=this.topSiteMapper.get(e.url):this.topSiteMapper.get(t.hostname)&&(e.faviconUrl=this.topSiteMapper.get(t.hostname))}U&&U[e.url]&&(e.faviconUrl=re(U[e.url])),H&&H[e.url]&&(e.title=H[e.url]);const i=new J(e.url),{topSitesAffiliates:n,affiliateLinkOverrides:r}=this.config;n&&n[i.domainPathAndQuery]&&e.tileSource===(s.AlgoGeneratedTileSource||s.AffiliateAutoAppendTileSource)&&D.test(n[i.domainPathAndQuery])&&(e.url=e.url.replace(/\/$/,"")+n[i.domainPathAndQuery]),r&&this.handleAffiliateOverrides(i,e);const o=function(e,t){if(t.shouldRenderSmartList){const i=t.getEnabledSmartList(e.rid);if(i&&t.smartListBadgePropsMap&&t.smartListBadgePropsMap.size>0)return t.smartListBadgePropsMap.get(i.experienceType)}return null}(e,this.topSitesSmartListManager);return Object.assign(Object.assign({},e),{badge:o,adLabelType:this.config.adLabelType,onMouseEnter:this.handleTopSiteHover(e.rid,!0,e.hasEdgeShoppingSmartlist),onMouseLeave:this.handleTopSiteHover(e.rid,!1,e.hasEdgeShoppingSmartlist),onFocus:this.handleTopSiteHover(e.rid,!0,e.hasEdgeShoppingSmartlist),onBlur:this.handleTopSiteHover(e.rid,!1,e.hasEdgeShoppingSmartlist),onKeyDown:this.handleKeyDownPress(e.rid,e.hasEdgeShoppingSmartlist),onMouseUp:this.handleTopSiteClick(e.hasEdgeShoppingSmartlist)})}));const t=[];return e.forEach((e=>{if(!e)return;const i=((e,t)=>{if(!e)return;let i;switch(t.tileSource){case s.UserAddedTileSource:case s.UserAddedTileSourceNewVal:i=Oe;break;case s.CuratedTileSource:i=Ee;break;case s.PromotedCuratedTileSource:i=xe;break;case s.WPOPromotedTileSource:i=De;break;case s.SponsoredCuratedTileSource:i=Le;break;case s.AffiliateAutoAppendTileSource:i=Fe;break;default:i=Me}t.url===F&&(i=Re);const n=Ie.uH.TopSites,r=e.addOrUpdateChild({name:`${i}_${Ne}`,content:{type:n}});let o=lt.tsn;return t.hasEdgeShoppingSmartlist&&(o=lt.edgeShoppingTile),{topSiteTile:r,destination:e.addOrUpdateChild({name:`${i}_${Be}`,behavior:Ie.wu.Navigate,content:{headline:o,type:n},overrideDestinationUrl:ut}),moreOption:e.addOrUpdateChild({name:`${i}_${je}`,behavior:Ie.wu.More,content:{headline:lt.moreOption,type:n},overrideDestinationUrl:ut}),unpin:e.addOrUpdateChild({name:`${i}_${rt}`,behavior:Ie.wu.Unpin,content:{headline:lt.unpin,type:n},overrideDestinationUrl:ut}),pin:e.addOrUpdateChild({name:`${i}_${ot}`,behavior:Ie.wu.Pin,content:{headline:lt.pin,type:n},overrideDestinationUrl:ut})}})(this.telemetryObject,e);let n=e.tileSource===s.PromotedCuratedTileSource&&i&&i.unpin&&i.unpin.getMetadataTag();this.config.enableAllPin&&e.dragDropType===a.DragDrop&&(n=i&&i.pin&&i.pin.getMetadataTag()),t.push(Object.assign(Object.assign({},e),{contextMenuLabel:this.strings.contextMenuLabel,toggleActionMenu:this.toggleActionMenu.bind(this),contentViewTelemetryTag:i&&i.topSiteTile&&i.topSiteTile.getMetadataTag(),anchorTelemetryTag:i&&i.destination&&i.destination.getMetadataTag(),toggleActionMenuButtonTelemetryTag:i&&i.moreOption&&i.moreOption.getMetadataTag(),enablePinnedIndicator:this.config.enablePinnedIndicator,promote:e.dragDropType===a.DragDrop,pinLabel:e.dragDropType===a.DragDrop?this.strings.unpinSite:this.strings.pinSite,pinAction:this.pinAction.bind(this),pinActionButtonTelemetryTag:n,textShadowEnabled:this.config.enableBackPlateForPlaceholder,topSitesClassName:this.topSitesClassName}))})),t}return this.userSelectedSetting&&this.userSelectedSetting==ae.Z3.off||this.zeroTopSitesErrorHandler(),[]}handleAffiliateOverrides(e,t){const i=this.config.affiliateLinkOverrides;t.tileSource===s.AlgoGeneratedTileSource&&i[e.domainAndPath]&&this.config.enableAffiliateOverride&&!e.hasQuery&&(t.url=i[e.domain],t.tileSource=s.AffiliateAutoAppendTileSource,t.isSponsored=!0,Ae.M0.addOrUpdateTmplProperty("tsaffov","4"))}getTopSitesPlaceHolders(){const e=[];return this.shouldAddSeeAllLinksInFavoritesHubButton?(e.push({addTileSupported:!1,ariaLabel:this.strings.ariaLabel_seeAllTile,backPlateEnabled:this.config.enableBackPlateForPlaceholder||!1,onSeeAllTopSiteClick:this.toggleSeeAllLinksInFavoritesHubButton.bind(this),topSitesClassName:this.topSitesClassName,seeAllTileEnabled:!0}),this.currentTilesNumber++):this.currentTilesNumber<this.config.maxTiles&&(e.push({addTileSupported:!0,backPlateEnabled:this.config.enableBackPlateForPlaceholder||!1,onAddTopSiteClick:this.toggleAddDialog.bind(this),addTileLabel:this.strings.addTileLabel,ariaLabel:this.strings.ariaLabel_addTile,addTopSiteButtonTelemetryTag:this.topSitesTelemetryContext&&this.topSitesTelemetryContext.topSitePlaceHolderAddSite&&this.topSitesTelemetryContext.topSitePlaceHolderAddSite.getMetadataTag(),topSitesClassName:this.topSitesClassName,seeAllTileEnabled:!1}),this.currentTilesNumber++),e}handleClick(e){this.isActionMenuOpen&&(!this.topSiteActionsMenu||this.topSiteActionsMenu.contains(e.target)||this.activeContextMenuButtonElement.contains(e.target)||!e.composedPath()||e.composedPath().includes(this.activeContextMenuButtonElement)||this.toggleActionMenu(this.activeTopSiteItem,e)),this.topSites&&this.topSites.length>0&&this.ShowPinningWizardCampaign()}handleTopSiteHover(e,t=!0,i=!1){return n=>{if(this.topSitesSmartListManager.shouldRenderSmartList&&(this.topSitesSmartListManager.hoverTopSite(e,t,n),this.topSitesSmartListManager.hasSmartList(e)&&n.target&&"mouseleave"!==n.type)){const t=Di.u.get(n.target);if(t&&t.contract){const r=t.contract;r.overrideDestinationUrl=ut,r.content&&(r.content.headline=i?Ce.x.edgeShopping:e.toString()),Di.u.setAttribute(n.target,r),Ae.M0.sendActionEvent(n.target,Ie.Aw.Hover,Ie.wu.Show)}}}}handleTopSiteClick(e){return t=>{const i=t.target;i&&"MSFT-TOP-SITE"===i.tagName&&e&&2!==t.button&&nn()}}handleKeyDownPress(e,t){return i=>{"ArrowUp"===i.key?this.topSitesSmartListManager.moveFocusToSmartList(e,!1)&&i.preventDefault():"ArrowDown"===i.key?this.topSitesSmartListManager.moveFocusToSmartList(e,!0)&&i.preventDefault():!t||"Enter"!==i.key&&"NumpadEnter"!==i.key||nn()}}findActiveSiteIndex(e){var t;if(!e||!(null===(t=this.topSites)||void 0===t?void 0:t.length))return-1;let i=-1;for(let t=0;t<this.topSites.length;t++)if(e.rid===this.topSites[t].rid){i=t;break}return i}pinAction(e,t){var i,n;if(e.dragDropType===a.DragDrop&&((null===(i=this.config)||void 0===i?void 0:i.enableAllPin)||this.dragDropService&&"slot"in e))return e.dragDropType=a.DragDropUnpin,this.togglePinToast({toastText:this.strings.unpinConfirmationMessage,toastDisplayMs:w,tileTitle:e.title}),this.dragDropService.updateTopSites(e),this.getOrUpdateTopSites(),void this.dragDropService.addUnpinnedTopSite(e);if(this.activeTopSiteItem=e,null===(n=this.config)||void 0===n?void 0:n.enableAllPin){e.dragDropType=a.DragDrop;let t=Object.assign({},e);t=Object.assign(Object.assign({},e),{slot:this.findActiveSiteIndex(e)}),this.dragDropService.addTopSite(t),this.togglePinToast({toastText:this.strings.pinConfirmationMessage,toastDisplayMs:w,tileTitle:e.title}),this.getOrUpdateTopSites()}}disableCurated(){this.isDisableDefaultInProgress=!0;const e=this.chromiumPageSettingState,t={hideDefaultTopSites:!e.hideDefaultTopSites,currentBackgroundImageType:e.currentBackgroundImageType,originalLayout:e.currentLayout,currentLayout:ae.nP.custom,greetingEnabled:e.greetingEnabled,imageOfTheDayEnabled:e.imageOfTheDayEnabled,quickLinksEnabled:e.quickLinksEnabled,selectedQuickLinksDisplaySetting:e.selectedQuickLinksDisplaySetting,selectedFeedDisplaySetting:e.selectedFeedDisplaySetting};this.pageSettingsConnector&&(this.pageSettingsConnector.updateLayout(t),this.getOrUpdateTopSites(),this.toggleUndoToast(),this.isDisableDefaultInProgress=!1,(0,vn.ih)(Ce.x.topSitesEdgeNextWC))}toggleActionMenu(e,t){this.activeTopSiteElement=!this.isActionMenuOpen&&t?t.currentTarget.parentElement.parentElement:this.activeTopSiteElement,this.activeTopSiteItem=e,this.isActionMenuOpen?window.removeEventListener("scroll",this.closeFlyouts):(addEventListener("scroll",this.closeFlyouts),t&&t.currentTarget&&Di.u.addElement(t.currentTarget),this.topSiteActionTelemetryContext&&this.activeTopSiteItem&&(this.topSiteActionTelemetryContext=((e,t)=>{let i;switch(t.tileSource){case s.UserAddedTileSource:case s.UserAddedTileSourceNewVal:i=Oe;break;case s.CuratedTileSource:i=Ee;break;case s.PromotedCuratedTileSource:i=xe;break;case s.WPOPromotedTileSource:i=De;break;case s.SponsoredCuratedTileSource:i=Le;break;case s.AffiliateAutoAppendTileSource:i=Fe;break;default:i=Me}const{removeTopSite:n,editDialog:r,closeEditDialog:o,saveEdit:a,cancelEdit:c,turnOffPreview:d,turnOnPreview:l,pinningTopSiteInQuickLinks:u}=e;return n.contract.name=`${i}_${Ue}`,r.contract.name=`${i}_${ze}`,o.contract.name=`${i}_${qe}_${_e}`,a.contract.name=`${i}_${qe}_${Ge}`,c.contract.name=`${i}_${qe}_${We}`,d.contract.name=`${i}_${it}`,l.contract.name=`${i}_${tt}`,u.contract.name=`${i}_${ot}`,e})(this.topSiteActionTelemetryContext,this.activeTopSiteItem)),this.actionsMenuProps=this.generateActionsMenuProps(),this.activeContextMenuButtonElement=t.currentTarget),this.isActionMenuOpen=!this.isActionMenuOpen,(0,le.Gg)(le.tk.actionMenuOpen,this.isActionMenuOpen)}toggleAddDialog(e){if(this.activeTopSitePlaceholderElement=!this.isAddDialogOpen&&e?e.currentTarget.parentElement.parentElement:null,this.isAddDialogOpen)window.removeEventListener("scroll",this.closeFlyouts);else{addEventListener("scroll",this.closeFlyouts),e&&e.currentTarget&&Di.u.addElement(e.currentTarget);const t=document.dir===Rt.N.ltr,i=this.config.suggestedTopSiteList&&this.config.suggestedTopSiteList.length>0?l:d,n=this.userSelectedSetting===ae.Z3.top,r=n?this.oneLineTopSitesContainer:this.topSitesRoot,o=St(n?this.oneLineTopSitesContainer:this.activeTopSitePlaceholderElement,r,i,document.documentElement.clientWidth,document.documentElement.clientHeight,t,n);this.topSiteAddDialogContainerPosition=o}this.isAddDialogOpen=!this.isAddDialogOpen,this.isAddDialogOpen||(this.isEditDialogOpen&&this.toggleEditDialog(),this.isUndoToastOpen&&this.toggleUndoToast()),(0,le.Gg)(le.tk.addTopSite,this.isAddDialogOpen),this.topSiteAddDialog.newOrUpdatedTopSite={name:"",url:""}}pinToTaskBar(e){window&&window.chrome&&window.chrome.appPinningPrivate&&window.chrome.appPinningPrivate.pinPage("This attests that the user has agreed to pin this website",this.activeTopSiteItem.url,this.activeTopSiteItem.title)}toggleEditDialog(e){if(this.isEditDialogOpen)window.removeEventListener("scroll",this.closeFlyouts);else{addEventListener("scroll",this.closeFlyouts),e&&e.currentTarget&&Di.u.addElement(e.currentTarget),this.topSiteEditDialog.newOrUpdatedTopSite={name:this.activeTopSiteItem.title,url:this.activeTopSiteItem.url},this.topSiteEditDialog.nameInputBox.value=this.activeTopSiteItem.title;const t=document.dir===Rt.N.ltr,i=this.userSelectedSetting===ae.Z3.top,n=i?this.oneLineTopSitesContainer:this.topSitesRoot,r=St(this.activeTopSiteElement,n,S,document.documentElement.clientWidth,document.documentElement.clientHeight,t,i);this.topSiteEditDialogContainerPosition=r}this.isEditDialogOpen=!this.isEditDialogOpen,this.isEditDialogOpen||(this.isAddDialogOpen&&this.toggleAddDialog(),this.isUndoToastOpen&&this.toggleUndoToast()),(0,le.Gg)(le.tk.editTopSite,this.isEditDialogOpen)}toggleUndoToast(e){const t=this.userSelectedSetting===ae.Z3.top?this.oneLineTopSitesContainer:this.topSitesRoot;if((e||!this.isUndoToastOpen)&&t&&this.undoToastContainer){this.isActionMenuOpen=!1;const e=t.getBoundingClientRect(),i=`top: ${Math.ceil(e.bottom)+window.scrollY+x}px`;this.undoToastContainer.setAttribute("style",i),this.undoToast=this.generateUndoToastProps(),Di.u.addElement(this.undoToastContainer),this.isPinToastOpen=!1,this.isUndoToastOpen=!0,bt.bind(this)(this.undoToast.notificationDurationMs,this.closeUndoToast.bind(this)),setTimeout((()=>{this.undoButton.focus()}),100)}else this.closeUndoToast();(0,le.Gg)(le.tk.toast,this.isUndoToastOpen)}togglePinToast(e={toastText:this.strings.pinToTaskBarConfirmationMessage}){const t=this.userSelectedSetting===ae.Z3.top?this.oneLineTopSitesContainer:this.topSitesRoot;if(!this.isPinToastOpen&&t&&this.undoToastContainer){this.isActionMenuOpen=!1;const i=t.getBoundingClientRect(),n=`top: ${Math.ceil(i.bottom)+window.scrollY+x}px`;this.undoToastContainer.setAttribute("style",n),this.pinToast=this.generatePinToastProps(e),Di.u.addElement(this.undoToastContainer),this.isUndoToastOpen=!1,this.isPinToastOpen=!0,bt.bind(this)(this.pinToast.notificationDurationMs,this.closeUndoToast.bind(this))}else this.isPinToastOpen=!1;(0,le.Gg)(le.tk.toast,this.isPinToastOpen)}toggleSeeAllLinksInFavoritesHubButton(e){window&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.Hub&&window.chrome.ntpSettingsPrivate.openHub&&window.chrome.ntpSettingsPrivate.openHub(window.chrome.ntpSettingsPrivate.Hub.FAVORITES)}initializeTopSitesState(){if(this.eagerConnectTopsites){const e=(0,bn.K0)(Se.z.TopSitesLayoutData).getCurrentState();this.currentCollapsedState=e.isTopSitesCollapsed}else this.currentCollapsedState=this.defaultCollapsedState;this.currentCollapsedState&&this.userSelectedSetting!==ae.Z3.top?((0,pt.o_)(Ce.x.topSitesEdgeNextWC,!0),this.actionButtonLabelClassName="collapsed-label",this.actionButtonSvgClassName="collapsed-svg",this.sitesClassName="collapsed-sites"):(this.actionButtonLabelClassName="expanded-label",this.actionButtonSvgClassName="expanded-svg",this.sitesClassName="expanded-sites"),this.enableNewCollapsedQuickLinksStyle=this.config.enableNewQuickLinksPositionInAlways,this.setInformationalOnlyStyle(),this.topSitesTelemetryContext=((e,t)=>{if(!e)return;const i=Ie.uH.TopSites,n=e.addOrUpdateChild({name:`${Qe}_${t?Je:Xe}`,behavior:t?Ie.wu.Show:Ie.wu.Hide,content:{headline:t?lt.show:lt.collapse,type:Ie.uH.TopSites},overrideDestinationUrl:ut}),r=e.addOrUpdateChild({name:Ke,behavior:Ie.wu.Add,content:{headline:lt.addSite,type:i},overrideDestinationUrl:ut}),o={name:Ye,type:Ie.wu.View,content:{headline:lt.container,type:Ie.uH.TopSites},action:Ie.Aw.View,overrideDestinationUrl:ut};return{showOrHide:n,topSitePlaceHolderAddSite:r,topSiteCommon:new Pe.D(o),saveAdd:e.addOrUpdateChild({name:`${Ye}_${Ze}_${Ge}`,behavior:Ie.wu.Save,content:{headline:lt.add,type:i},overrideDestinationUrl:ut}),cancelAdd:e.addOrUpdateChild({name:`${Ye}_${Ze}_${We}`,behavior:Ie.wu.Cancel,content:{headline:lt.cancel,type:i},overrideDestinationUrl:ut}),closeAddDialog:e.addOrUpdateChild({name:`${Ye}_${Ze}_${_e}`,behavior:Ie.wu.Close,content:{headline:lt.close,type:i},overrideDestinationUrl:ut})}})(this.telemetryObject,this.currentCollapsedState),this.topSiteActionTelemetryContext=(e=>{if(!e)return;const t=Ie.uH.TopSites;return{removeTopSite:e.addOrUpdateChild({name:`${Ue}`,behavior:Ie.wu.Remove,content:{headline:`${lt.remove} ${lt.tsn}`,type:t},overrideDestinationUrl:ut}),undoRemoveTopSite:e.addOrUpdateChild({name:`${$e}_${He}`,behavior:Ie.wu.UndoRemove,content:{headline:`${lt.undoRemove} ${lt.tsn}`,type:t},overrideDestinationUrl:ut}),closeRemoveToast:e.addOrUpdateChild({name:`${$e}_${_e}`,behavior:Ie.wu.Close,content:{headline:lt.close,type:t},overrideDestinationUrl:ut}),editDialog:e.addOrUpdateChild({name:`${Ye}_${ze}`,behavior:Ie.wu.Rename,content:{headline:`${lt.rename} ${lt.tsn}`,type:t},overrideDestinationUrl:ut}),closeEditDialog:e.addOrUpdateChild({name:`${Ye}_${qe}_${_e}`,behavior:Ie.wu.Close,content:{headline:lt.close,type:t},overrideDestinationUrl:ut}),saveEdit:e.addOrUpdateChild({name:`${Ye}_${qe}_${Ge}`,behavior:Ie.wu.Save,content:{headline:lt.save,type:t},overrideDestinationUrl:ut}),cancelEdit:e.addOrUpdateChild({name:`${Ye}_${qe}_${We}`,behavior:Ie.wu.Cancel,content:{headline:lt.cancel,type:t},overrideDestinationUrl:ut}),turnOnPreview:e.addOrUpdateChild({name:`${Ye}_${tt}`,behavior:Ie.wu.TurnOn,content:{headline:lt.turnOnPreview,type:t},overrideDestinationUrl:ut}),turnOffPreview:e.addOrUpdateChild({name:`${Ye}_${it}`,behavior:Ie.wu.TurnOff,content:{headline:lt.turnOffPreview,type:t},overrideDestinationUrl:ut}),pinningTopSite:e.addOrUpdateChild({name:`${Ye}_${nt}`,behavior:Ie.wu.Pin,content:{headline:lt.topsiteTaskbarpin,type:t},overrideDestinationUrl:ut}),pinningTopSiteInQuickLinks:e.addOrUpdateChild({name:`${Ye}_${ot}`,behavior:Ie.wu.Pin,content:{headline:lt.pin,type:t},overrideDestinationUrl:ut})}})(this.telemetryObject),this.quickLinkButtonTelemetryTag=this.topSitesTelemetryContext&&this.topSitesTelemetryContext.showOrHide&&this.topSitesTelemetryContext.showOrHide.getMetadataTag(),this.topSiteCommonTelemetryTag=this.topSitesTelemetryContext&&this.topSitesTelemetryContext.topSiteCommon&&this.topSitesTelemetryContext.topSiteCommon.getMetadataTag();const e=(e=>{if(!e)return;const t=Ie.uH.TopSites,i={name:et,type:Ie.wu.View,content:{headline:lt.container,type:Ie.uH.TopSites},action:Ie.Aw.View,overrideDestinationUrl:ut};return{topSiteCommon:new Pe.D(i),allQuickLinkButton:e.addOrUpdateChild({name:`${et}_${st}`,behavior:Ie.wu.More,content:{headline:lt.allQuickLinkButton,type:t},overrideDestinationUrl:ut}),seeMoreButton:e.addOrUpdateChild({name:`${et}_${at}`,behavior:Ie.wu.More,content:{headline:lt.seeMoreButton,type:t},overrideDestinationUrl:ut}),settingButton:e.addOrUpdateChild({name:`${et}_${ct}`,behavior:Ie.wu.Open,content:{headline:lt.settingButton,type:t},overrideDestinationUrl:ut}),selector:e.addOrUpdateChild({name:`${et}_${dt}`,behavior:Ie.wu.Click,content:{headline:lt.selector,type:t},overrideDestinationUrl:ut})}})(this.telemetryObject);this.oneLinetopSitesCommonTelemetryTag=this.topSitesTelemetryContext&&e.topSiteCommon&&e.topSiteCommon.getMetadataTag(),this.oneLinetopSitesAllQuickLinkButtonTelemetryTag=this.topSitesTelemetryContext&&e.allQuickLinkButton&&e.allQuickLinkButton.getMetadataTag(),this.oneLinetopSitesSeeMoreButtonTelemetryTag=this.topSitesTelemetryContext&&e.seeMoreButton&&e.seeMoreButton.getMetadataTag(),this.oneLinetopSitesSettingButtonTelemetryTag=this.topSitesTelemetryContext&&e.settingButton&&e.settingButton.getMetadataTag(),this.oneLineTopSitesSelectorTelemetryTag=this.topSitesTelemetryContext&&e.selector&&e.selector.getMetadataTag()}calculateTopSitesHolderWidth(){let e;return e=10==this.config.maxTiles?this.columnArrangement>=he.K$.c3?10:5:this.columnArrangement>=he.K$.c3?8:4,this.showCodexBingNudge&&this.currentTilesNumber<e&&(e=this.currentTilesNumber),e*I}calculateCollapsibleButtonMarginString(){const e=this.calculateTopSitesHolderWidth(),t=Math.min(200,90+u-Math.round((document.documentElement.clientWidth-e)/2));return`${t<0?0:t}px`}calculateCollapsibleButtonMarginStringV2(){const e=this.calculateTopSitesHolderWidth(),t=this.topSitesEndMarginUsedPadding-Math.round((document.documentElement.clientWidth-e)/2);let i=Math.min(300,t);i<0&&(i=Math.min(200,90+u-Math.round((document.documentElement.clientWidth-e)/2)));return`${i<0?0:i}px`}setInformationalOnlyStyle(){return(0,c.mG)(this,void 0,void 0,(function*(){if(this.config.enableBespokeAds&&(yield fn.i.getBespokeAdEligibilityAync()))return this.collapsibleButtonMargin=this.calculateCollapsibleButtonMarginStringV2(),void(this.informationalCollapsedStyle=`--quicklink-end-margin: ${this.collapsibleButtonMargin}; transform: translateY(4px);`);if(this.chromiumPageSettingState&&"always"===this.chromiumPageSettingState.selectedFeedDisplaySetting&&this.currentCollapsedState){let e=4;this.moveUpward&&(e=36),this.enableNewCollapsedQuickLinksStyle?(this.collapsibleButtonMargin=this.calculateCollapsibleButtonMarginStringV2(),this.informationalCollapsedStyle=`--quicklink-end-margin: ${this.collapsibleButtonMargin}; transform: translateY(${this.moveUpward?e:-8}px);`,this.updateInformationalCollapsedStyle=`--quicklink-end-margin: ${this.calculateCollapsibleButtonMarginString()}; transform: translateY(${e}px);`,window.addEventListener("wheel",this.updateInformationalCollapsedStyleCallback)):(this.collapsibleButtonMargin=this.calculateCollapsibleButtonMarginString(),this.informationalCollapsedStyle=`--quicklink-end-margin: ${this.collapsibleButtonMargin}; transform: translateY(${e}px);`)}else this.informationalCollapsedStyle="";this.overwriteInformationalCollapsedStyleForCodexBingNudge()}))}overwriteInformationalCollapsedStyleForCodexBingNudge(){if(!this.showCodexBingNudge||this.columnArrangement<=he.K$.c2||!this.currentTilesNumber)return;const e=this.calculateTopSitesHolderWidth();if(e>900)return;let t=0;t=document.dir===Rt.N.rtl?(e-630)/2-150:(e-630)/2-145,this.informationalCollapsedStyle=`--quicklink-end-margin: ${t}px;`,this.updateInformationalCollapsedStyle=`--quicklink-end-margin: ${this.calculateCollapsibleButtonMarginString()};transform: translateY(24px)`}ShowPinningWizardCampaign(){Te.M.notifyTriggerEvent(Te.j.NTP_TOP_SITES_CLICK).then((e=>{e&&!e.success&&(0,V.H)(q.Qc1,"TopSitesEdgeNextWC: "+e.Message)})).catch((e=>{(0,V.OO)(e,q.Qc1,"TopSitesEdgeNextWC: Failed to call window.chrome.edgeNurturingPrivate.NotifyTriggerEvent chromium API")}))}reRenderTopsite(){const e=this.getCurrentLayoutConfig();this.config.maxTiles=e.tile,this.extraAddedSitesClassName=e.class,this.renderTopsite()}renderTopsite(){window.requestAnimationFrame((()=>{setTimeout((()=>{this.getOrUpdateTopSites()}),0)}))}zeroTopSitesErrorHandler(){Ae.M0.sendAppErrorEvent(Object.assign(Object.assign({},q.C6c.ZeroTopSitesError),{message:"Zero top sites returned"}))}initializeDragDropService(){this.dragDropService=new Ai(this,{container:this.topSitesContainerPromise,disableDragDrop:!this.config.draggable}),this.dragDropService.initializeService()}shouldDropTopSite(e){const t=0==e.url.indexOf("http://")?e.url.replace("http://","https://"):e.url,i=this.config.blockedDomains||$;if(i)for(let e=0;e<i.length;e++){const n=i[e];if(t.startsWith(n.url)&&(!n.exc||!n.exc.find((e=>t.includes(e)))))return!0}return!1}removeBlockedSites(e){return e?e.filter((e=>{if(e.tileSource==s.AlgoGeneratedTileSource){if(this.shouldDropTopSite(e))return Ae.M0.addOrUpdateTmplProperty("RemSE","1"),!1;if(this.config.enableAffiliateOverride&&this.config.affiliateLinkOverrides)return!Object.values(this.config.affiliateLinkOverrides).includes(e.url)}return!0})):null}getTileSource(e,t){return e?s.PromotedCuratedTileSource:t?s.SponsoredCuratedTileSource:s.CuratedTileSource}updateAffiliateAutoAppendTileSource(e){const{topSitesAffiliates:t}=this.config;e.forEach((e=>{const i=new J(e.url);t[i.domain]&&e.tileSource==s.AlgoGeneratedTileSource&&(e.tileSource=s.AffiliateAutoAppendTileSource,e.isSponsored=!0)}))}showOverflowMenu(){this.showMenu=!0,document.addEventListener("click",this.onClickOutside),document.addEventListener("scroll",this.onScrollOutside),document.addEventListener("keydown",this.onKeyDown),(0,le.Gg)(le.tk.topSiteOverflowPanel,!0)}hideOverflowMenu(){this.showMenu=!1,this.overflowMenuClass="",document.removeEventListener("click",this.onClickOutside),document.removeEventListener("scroll",this.onScrollOutside),document.removeEventListener("keydown",this.onKeyDown),(0,le.Gg)(le.tk.topSiteOverflowPanel,!1)}onOneLineTopSitesContainerResize(){if(!this.oneLineTopSitesContainer||!this.oneLineTopSitesContainer.offsetWidth)return;this.overflowItems=[],this.showMenu=!1;let e=0;const t=this.oneLineTopSitesContainer.offsetWidth;this.config.enableOneLineTopSitesPillShape&&(e=this.oneLineTopSitesSeeMoreEle?this.oneLineTopSitesSeeMoreEle.offsetWidth:0),Array.from(this.oneLineTopSitesContainer.children).filter((e=>"A"===e.tagName)).forEach(((i,n)=>{const r=this.topSites[n];if(!r)return;const o=this.config.enableTopsitesTopMiniMargin?4:7;i.classList.remove("hidden"),e+=i.offsetWidth+o,e>t-18?(this.overflowItems.push(r),i.classList.add("hidden")):i.classList.remove("hidden")})),this.isOverflowing=!!this.overflowItems.length}openSettingDialog(e){if(!e)return;e.preventDefault(),e.stopPropagation();const t=(0,Ot.b_)(Mt._.settingsButton);t&&(Ae.M0.sendActionEvent(e.target,Ie.Aw.Click,Ie.wu.Show),t.click())}registerCoachMark(){return(0,c.mG)(this,void 0,void 0,(function*(){yield(0,Ot.h_)(Mt._.superCoachMark),ye.W.getInstance().registerItemAnchorElement(this.config.enableTargetDismissCM?be.gz.TopSitesPromotionV2:be.gz.TopSitesPromotion,this.allQuickLinksButton?this.allQuickLinksButton:this.oneLineTopSitesContainer.querySelector(".pill-top-site"))}))}sliceMostVisitedSites(e){return this.shouldAddSeeAllLinksInFavoritesHubButton=!1,e?(this.chromiumPageSettingState&&this.chromiumPageSettingState.configData&&this.chromiumPageSettingState.configData.isQuickLinksFolderInFavoritesEnabled&&this.chromiumPageSettingState.selectedQuickLinksDisplaySetting&&(this.enableThirtyTopSites?this.chromiumPageSettingState.selectedQuickLinksDisplaySetting===ae.Z3.threerows&&e.length>=29&&(e=e.slice(0,29),this.shouldAddSeeAllLinksInFavoritesHubButton=!0):e.length>=15&&this.chromiumPageSettingState.selectedQuickLinksDisplaySetting===ae.Z3.tworows&&(e=e.slice(0,15),this.shouldAddSeeAllLinksInFavoritesHubButton=!0)),e):null}getOverrideIconList(){const e=[];if(this.config.overrideIconsList&&this.config.overrideIconsList.length>0)for(const t of this.config.overrideIconsList)e.push(t);return e}focusedAndNotAlways(){const{selectedFeedDisplaySetting:e,currentBackgroundImageType:t}=this.chromiumPageSettingState;return["peek","headingsonly","off"].includes(e)&&t===ae.HX.off}getTopSitesResponsiveClassName(){const{enableUnifiedTopSites:e,enableUnifiedRecommendedSites:t,enableRecommendedSitesFixHeight:i}=this.config;if(!e)return"";const n=["top-sites-responsive"],r=this.focusedAndNotAlways();return t&&n.push("top-sites-responsive-unified-recommended-sites"),t&&r?n.push("top-sites-responsive-c3-same-width"):n.push("top-sites-responsive-normal-width"),t&&i?n.push("top-sites-responsive-columns-res2"):t&&r?n.push("top-sites-responsive-columns-res"):n.push("top-sites-responsive-columns"),n.join(" ")}get unifiedTopSitesTilesxColxRowsMap(){const{enableUnifiedRecommendedSites:e,enableRecommendedSitesFixHeight:t}=this.config,i=[2,4,6,8,8],n=[2,4,6,6,6],r=[2,4,6,8,8];let o;o=e&&t?[2,6,8,8,8]:e?this.focusedAndNotAlways()?n:r:i;return{[ae.Z3.top]:{[he.K$.c1]:{default:{tile:100,class:""}},[he.K$.c2]:{default:{tile:100,class:""}},[he.K$.c3]:{default:{tile:100,class:""}},[he.K$.c4]:{default:{tile:100,class:""}},[he.K$.c5]:{default:{tile:100,class:""}}},[ae.Z3.onerow]:{[he.K$.c1]:{default:{tile:o[0],class:""}},[he.K$.c2]:{default:{tile:o[1],class:""}},[he.K$.c3]:{default:{tile:o[2],class:""}},[he.K$.c4]:{default:{tile:o[3],class:""}},[he.K$.c5]:{default:{tile:o[4],class:""}}},[ae.Z3.tworows]:{[he.K$.c1]:{default:{tile:2*o[0],class:""}},[he.K$.c2]:{default:{tile:2*o[1],class:""}},[he.K$.c3]:{default:{tile:2*o[2],class:""}},[he.K$.c4]:{default:{tile:2*o[3],class:""}},[he.K$.c5]:{default:{tile:2*o[4],class:""}}},[ae.Z3.threerows]:{[he.K$.c1]:{default:{tile:3*o[0],class:""}},[he.K$.c2]:{default:{tile:3*o[1],class:""}},[he.K$.c3]:{default:{tile:3*o[2],class:""}},[he.K$.c4]:{default:{tile:3*o[3],class:""}},[he.K$.c5]:{default:{tile:3*o[4],class:""}}}}}setUpSearchBoxHiddenTilesColxRowsMap(){const e=(0,Et.Z)(this.tilesxColxRowsMap);e[ae.Z3.onerow][he.K$.c2].default={tile:8,class:""},e[ae.Z3.onerow][he.K$.c3].always={tile:6,class:L.sixSites},e[ae.Z3.onerow][he.K$.c4].default={tile:9,class:L.nineSites},e[ae.Z3.tworows][he.K$.c2].default={tile:8,class:""},e[ae.Z3.tworows][he.K$.c3].default={tile:12,class:L.sixSites},e[ae.Z3.tworows][he.K$.c2].default={tile:12,class:""},e[ae.Z3.threerows][he.K$.c3].always={tile:18,class:L.sixSites},e[ae.Z3.threerows][he.K$.c4].default={tile:24,class:L.eightSites},e[ae.Z3.threerows][he.K$.c5].default={tile:24,class:L.eightSites},this.searchBoxHiddenTilesxColxRowsMap=e}onTopSiteOptions(e){let t=e&&e.target;t&&"FLUENT-OPTION"!=t.tagName&&"SPAN"==t.tagName&&(t=e.currentTarget)}updateTopSite(e){const t=e&&e.target;if(!t&&!t.selectedIndex)return;const i=t.selectedIndex;isNaN(i)||(this.topSiteSelectedItem=this.topSiteMenuItems[i],setTimeout((()=>{this.pageSettingsConnector.updateQuickLinksDisplayOption(this.topSiteSelectedItem.id),(0,ve.qi)(ke.nc.quick_links_options,this.topSiteSelectedItem.id)})),this.sitesSelectionToggleTelemetry(this.topSiteSelectedItem.id,t))}sitesSelectionToggleTelemetry(e,t){if(!t)return;const i=t;Di.u.addElement(i);const n=Di.u.get(i);n&&n.contract&&(e&&""!==e.toString()&&((n.contract.content=n.contract.content||{}).headline=e.toString()),n.contract.type=Ie.c9.ActionButton,n.contract.destinationUrl=location.href,i.setAttribute("data-customhandled","true"),Di.u.setAttribute(i,n.contract),Ae.M0.sendActionEvent(i,"click"))}}(0,c.gn)([gt.LO],wn.prototype,"eagerConnectTopsites",void 0),(0,c.gn)([gt.LO],wn.prototype,"actionButtonLabelClassName",void 0),(0,c.gn)([gt.LO],wn.prototype,"actionButtonSvgClassName",void 0),(0,c.gn)([gt.LO],wn.prototype,"actionsMenuProps",void 0),(0,c.gn)([gt.LO],wn.prototype,"activeTopSiteItem",void 0),(0,c.gn)([gt.LO],wn.prototype,"activeTopSiteElement",void 0),(0,c.gn)([gt.LO],wn.prototype,"activeTopSitePlaceholderElement",void 0),(0,c.gn)([gt.LO],wn.prototype,"activeContextMenuButtonElement",void 0),(0,c.gn)([gt.LO],wn.prototype,"className",void 0),(0,c.gn)([gt.LO],wn.prototype,"extraAddedSitesClassName",void 0),(0,c.gn)([gt.LO],wn.prototype,"collapsibleButtonMargin",void 0),(0,c.gn)([gt.LO],wn.prototype,"currentCollapsedState",void 0),(0,c.gn)([gt.LO],wn.prototype,"currentTilesNumber",void 0),(0,c.gn)([(0,ht.Lj)({mode:"boolean"})],wn.prototype,"defaultCollapsedState",void 0),(0,c.gn)([gt.LO],wn.prototype,"userSelectedSetting",void 0),(0,c.gn)([gt.LO],wn.prototype,"isAddDialogOpen",void 0),(0,c.gn)([gt.LO],wn.prototype,"isActionMenuOpen",void 0),(0,c.gn)([gt.LO],wn.prototype,"isEditDialogOpen",void 0),(0,c.gn)([gt.LO],wn.prototype,"isUndoToastOpen",void 0),(0,c.gn)([gt.LO],wn.prototype,"isPinToastOpen",void 0),(0,c.gn)([gt.LO],wn.prototype,"isLtr",void 0),(0,c.gn)([gt.LO],wn.prototype,"informationalCollapsedStyle",void 0),(0,c.gn)([gt.LO],wn.prototype,"ntpApiHandle",void 0),(0,c.gn)([gt.LO],wn.prototype,"quickLinkButtonTelemetryTag",void 0),(0,c.gn)([gt.LO],wn.prototype,"sitesClassName",void 0),(0,c.gn)([gt.LO],wn.prototype,"topSiteAddDialog",void 0),(0,c.gn)([gt.LO],wn.prototype,"topSiteEditDialog",void 0),(0,c.gn)([gt.LO],wn.prototype,"topSiteMapper",void 0),(0,c.gn)([gt.LO],wn.prototype,"topSites",void 0),(0,c.gn)([gt.LO],wn.prototype,"topSitesPlaceHolders",void 0),(0,c.gn)([gt.LO],wn.prototype,"undoToast",void 0),(0,c.gn)([gt.LO],wn.prototype,"pinToast",void 0),(0,c.gn)([ht.Lj],wn.prototype,"selectedQuickLinksDisplaySetting",void 0),(0,c.gn)([(0,ht.Lj)({mode:"boolean"})],wn.prototype,"quickLinksToggleSpacingForBanner",void 0),(0,c.gn)([gt.LO],wn.prototype,"moveUpward",void 0),(0,c.gn)([gt.LO],wn.prototype,"topSiteAddedSuccessfully",void 0),(0,c.gn)([gt.LO],wn.prototype,"lastAddedTopSite",void 0),(0,c.gn)([gt.LO],wn.prototype,"topSiteSelectedItem",void 0),(0,c.gn)([gt.lk],wn.prototype,"quickLinkButtonAriaLabel",null),(0,c.gn)([(0,ht.Lj)({mode:"boolean"})],wn.prototype,"showCollapsibleControl",void 0),(0,c.gn)([gt.LO],wn.prototype,"topSiteAddDialogContainerPosition",void 0),(0,c.gn)([gt.LO],wn.prototype,"topSiteEditDialogContainerPosition",void 0),(0,c.gn)([gt.LO],wn.prototype,"overflowItems",void 0),(0,c.gn)([gt.LO],wn.prototype,"showMenu",void 0),(0,c.gn)([gt.LO],wn.prototype,"isOverflowing",void 0),(0,c.gn)([gt.LO],wn.prototype,"overflowMenuClass",void 0),(0,c.gn)([gt.LO],wn.prototype,"isOnImage",void 0),(0,c.gn)([gt.LO],wn.prototype,"topSitesResponsiveClassName",void 0),(0,c.gn)([gt.lk],wn.prototype,"topSitesClassName",null),(0,c.gn)([gt.lk],wn.prototype,"isInformationalLayout",null);var Tn=i(18544),kn=i(14165),An=i(33442),In=i(56121),Pn=i(35680),En=i(27460),On=i(42689),Mn=i(80260),xn=i(71942),Dn=i(60184),Rn=i(27782),Ln=i(17993),Fn=i(38492),Nn=i(26738),Bn=i(22674),jn=i(67739),$n=i(81239),Un=i(78923),Hn=i(91608),_n=i(42166);const Wn=(e,t)=>t.replace(/\{([\s\S]+?)\}/g,(t=>`{ .${e} ${t} }`)),zn=(0,_n.a)(kn.xs),Gn=(0,_n.a)(kn._3),Vn=(0,_n.a)(kn.Xn),qn=(0,_n.a)(kn.xX),Zn=(0,_n.a)(kn.sc),Kn=`\n    ${(0,he.vW)(null,he.K$.c1)}{width:${zn};\n    }\n    ${(0,he.eH)(he.K$.c2)}{width:${Gn};\n    }\n    ${(0,he.eH)(he.K$.c3)}{width:${Vn};\n    }\n    ${(0,he.eH)(he.K$.c4)}{width:${qn};\n    }\n    ${(0,he.vW)(he.K$.c5,null)}{width:${Zn};\n    }\n`,Qn=`\n    ${(0,he.vW)(null,he.K$.c1)}{width:${zn};\n    }\n    ${(0,he.eH)(he.K$.c2)}{width:${Gn};\n    }\n    ${(0,he.eH)(he.K$.c3)}{width:${Vn};\n    }\n    ${(0,he.eH)(he.K$.c4)}{width:${Vn};\n    }\n    ${(0,he.vW)(he.K$.c5,null)}{width:${Vn};\n    }\n`,Jn="2, 50%",Xn="4, 25%",Yn=`6, ${(100/6).toFixed(2)}%`,er="8, 12.5%",tr=`\n    ${(0,he.vW)(null,he.K$.c1)}{grid-template-columns:repeat(${Jn});\n    }\n    ${(0,he.eH)(he.K$.c2)}{grid-template-columns:repeat(${Xn});\n    }\n    ${(0,he.eH)(he.K$.c3)}{grid-template-columns:repeat(${Yn});\n    }\n    ${(0,he.eH)(he.K$.c4)}{grid-template-columns:repeat(${er});\n    }\n    ${(0,he.vW)(he.K$.c5,null)}{grid-template-columns:repeat(${er});\n    }\n`,ir=`\n    ${(0,he.vW)(null,he.K$.c1)}{grid-template-columns:repeat(${Jn});\n    }\n    ${(0,he.eH)(he.K$.c2)}{grid-template-columns:repeat(${Xn});\n    }\n    ${(0,he.eH)(he.K$.c3)}{grid-template-columns:repeat(${Yn});\n    }\n    ${(0,he.eH)(he.K$.c4)}{grid-template-columns:repeat(${Yn});\n    }\n    ${(0,he.vW)(he.K$.c5,null)}{grid-template-columns:repeat(${Yn});\n    }\n`,nr=`\n    ${(0,he.vW)(null,he.K$.c1)}{grid-template-columns:repeat(${Jn});\n    }\n    ${(0,he.eH)(he.K$.c2)}{grid-template-columns:repeat(${Yn});\n    }\n    ${(0,he.eH)(he.K$.c3)}{grid-template-columns:repeat(${er});\n    }\n    ${(0,he.eH)(he.K$.c4)}{grid-template-columns:repeat(${er});\n    }\n    ${(0,he.vW)(he.K$.c5,null)}{grid-template-columns:repeat(${er});\n    }\n`,rr=Un.i` .action-button{left:auto;right:0}.topsite-info{float:right}.overflow-menu.start{left:8px}.overflow-menu-grid.start{left:0px}.overflow-menu.end{right:8px}.overflow-menu .dismiss-button{top:2px;right:2px}`,or=Un.i` .action-button{left:0;right:auto}.topsite-info{float:left}.overflow-menu.start{right:8px}.overflow-menu-grid.start{right:0px}.overflow-menu.end{left:8px}.overflow-menu .dismiss-button{top:2px;left:2px}`,sr=Un.i` #oneLineTopSitesContainer{max-width:100vw}:not(:defined){visibility:hidden}`,ar=Un.i`
.one-line-top-sites-container{width:100%;display:flex;height:${Hn.jb.toString()}px;background:rgba(255,255,255,0.1);position:relative}.one-line-top-sites-container.notonimg:not(.pill){background:${Pn.Gy}}.one-line-top-sites-container.solid{background:${En.s}}.one-line-top-sites-container.pill{background:none}.oneline-top-sites{display:flex;overflow:hidden;width:100%}.oneline-top-sites .pill-top-site .right-part{display:none}.oneline-top-sites.settings .pill-top-site{position:relative;max-width:unset;transition:background-color 0.5s ease-in-out 0.5s}.oneline-top-sites.settings .pill-top-site .left-part{max-width:150px}.oneline-top-sites.settings .pill-top-site .right-part{display:flex;visibility:hidden;width:0px;border-radius:50%;margin-inline:4px -6px;transition:all 0.5s ease-in-out 0.5s}.oneline-top-sites.settings .pill-top-site:hover .right-part{visibility:inherit;width:24px}.oneline-top-sites .pill-top-site .right-part>fluent-button{color:#FFFFFF;fill:#FFFFFF}.one-line-top-sites-container.notonimg .pill-top-site .right-part>fluent-button,.one-line-top-sites-container.solid .pill-top-site .right-part>fluent-button{color:${On.C};
    fill: ${On.C}}.oneline-top-sites .pill-top-site .right-part>fluent-button{background:rgba(255,255,255,0.32)}.notonimg .oneline-top-sites .pill-top-site .right-part>fluent-button,.solid .oneline-top-sites .pill-top-site .right-part>fluent-button{background:${Pn.wF}}.one-line-top-sites-container .pill-top-site{cursor:pointer;text-decoration:none;display:flex;max-width:150px;margin:6px 0 6px 7px;padding:6px 11px;align-items:center;box-sizing:border-box;justify-content:space-between;color:#FFFFFF;border-radius:2px}.one-line-top-sites-container.pill .pill-top-site{background:rgba(255,255,255,0.3);border-radius:16px;padding:4px 12px}.one-line-top-sites-container.notonimg.pill .pill-top-site{background:${Pn.Gy}}.one-line-top-sites-container.notonimg .pill-top-site,.one-line-top-sites-container.solid .pill-top-site{color:${On.C}}.one-line-top-sites-container .pill-top-site:hover{background:rgba(255,255,255,0.3)}.one-line-top-sites-container .pill-top-site.mini-margin{margin:6px 0px 6px 4px;padding:6px 8px}.one-line-top-sites-container .overflow-menu .pill-top-site{color:${On.C};margin:0 0 6px 0;padding:6px 4px}.one-line-top-sites-container .overflow-menu .pill-top-site:nth-child(odd){margin-inline-end:8px}.one-line-top-sites-container.pill .overflow-menu .pill-top-site{background:none;border-radius:2px}.one-line-top-sites-container .overflow-menu .pill-top-site:hover,.one-line-top-sites-container.pill .overflow-menu .pill-top-site:hover{background:${Pn.Xi}}.pill-top-site .left-part,.pill-top-site .right-part{display:flex;--base-height-multiplier:6;overflow:hidden}.pill-top-site .left-part{flex:1}.one-line-top-sites-container.notonimg:not(.pill) .pill-top-site:hover,.one-line-top-sites-container.solid .pill-top-site:hover{background:${Mn.sG}}.one-line-top-sites-container.solid .grid-top-sites{--top-site-fill-hover:${(0,me.Y)()?"rgba(66, 66, 66, 0.4)":"rgba(229, 229, 229, 0.3)"}}.one-line-top-sites-container.solid .grid-top-sites:hover{background:var(--top-site-fill-hover,var(--neutral-fill-hover))}.one-line-top-sites-container .pill-top-site img{width:16px;height:16px;image-rendering:-webkit-optimize-contrast}.one-line-top-sites-container .grid-top-sites img{width:30px;height:30px;max-width:30px !important}.one-line-top-sites-container .grid-top-sites .end{width:30px;height:30px;max-width:30px !important}.one-line-top-sites-container .pill-top-site span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;font-weight:400;font-size:12px;line-height:16px;margin-inline-start:6px}.hidden{visibility:hidden}.pill .hidden{display:none !important}.see-more-container{display:flex;align-items:center;margin:0 8px;border-radius:2px}.see-more-container .all-links-btn{display:flex;align-items:center;font-size:12px;vertical-align:middle}.see-more-container .all-links-btn svg{margin-inline-start:8px;margin-top:3px;width:12px;height:12px}.see-more-container .all-links-btn.active svg{transform:rotate(-180deg)}.see-more-container>fluent-button{background:none;color:#FFFFFF}.one-line-top-sites-container.pill .see-more-container>fluent-button{background:rgba(255,255,255,0.3);border-radius:16px;height:28px}.one-line-top-sites-container.notonimg.pill .see-more-container>fluent-button{background:${Pn.Gy}}.one-line-top-sites-container.notonimg .see-more-container>fluent-button,.one-line-top-sites-container.solid .see-more-container>fluent-button{color:${On.C};}.see-more-container>fluent-button:hover{background-color:rgba(255,255,255,0.07)}.one-line-top-sites-container.notonimg:not(.pill) .see-more-container>fluent-button:hover,.one-line-top-sites-container.solid .see-more-container>fluent-button:hover{background:${Mn.sG}}.overflow-menu{color:${On.C};
    fill: ${On.C};
    position: absolute;
    background: ${En.s};
    top: ${Hn.jb.toString()}px;width:320px;overflow:hidden;border-radius:4px;box-shadow:0 16px 32px rgba(0,0,0,0.14)}.overflow-menu-grid{width:100%;z-index:700}.overflow-menu.hidden{display:none}.overflow-menu .topsite-list{display:flex;flex-wrap:wrap;overflow-y:auto;max-height:200px;padding:12px 0 10px 0;padding-inline-start:10px}.overflow-menu msft-top-site-placeholder{width:100%;height:32px;overflow:hidden}.overflow-menu msft-top-site-placeholder,.overflow-menu msft-top-site-placeholder .add-button,.overflow-menu msft-top-site-placeholder:hover .add-button{background:none}.overflow-menu msft-top-site-placeholder .add-button .add-button-label{display:flex;align-items:center;height:100%}.overflow-menu msft-top-site-placeholder .add-button span{display:inline-block;font-size:14px;line-height:20px}.overflow-menu msft-top-site-placeholder .add-button svg{padding-inline-end:7px;width:15px;height:15px}.overflow-menu msft-top-site-placeholder fluent-button::part(control){justify-content:unset;padding-inline-start:14px}.overflow-menu msft-top-site-placeholder [slot="icon-action"]{display:flex}.overflow-menu .divider{border-top:1px solid ${xn.dt};margin-inline:4px}.topsite-list .pill-top-site{width:142px;height:28px}.topsite-list .grid-top-sites{height:85px;width:104px}.topsite-list .grid-top-sites .end-button{width:24px;height:24px;min-width:24px;display:flex;justify-content:center}.topsite-list .pill-top-site .right-part{visibility:hidden;width:1px;border-radius:50%}.topsite-list .pill-top-site:hover .right-part>fluent-button{background:${Pn.wF}}.topsite-list .pill-top-site:hover .right-part{visibility:inherit;width:unset}.topsite-list-footer{padding:10px 4px 12px 4px}.topsite-list-footer-setting{display:flex;font-size:14px;font-weight:400;line-height:20px;padding:6px 0;cursor:pointer}.topsite-list-footer-setting svg{padding-inline-start:14px;padding-inline-end:4px;width:20px;height:20px}.topsite-list-footer-setting.topsite-direct-settings{padding-inline:14px;justify-content:space-between;vertical-align:middle}.topsite-direct-settings label{line-height:32px;min-width:120px}.topsite-direct-settings fluent-select{min-width:150px;max-width:250px;margin-inline-end:auto;width:100%}.see-more-container.start .all-links-btn svg{margin-inline-end:4px;margin-inline-start:0px}.see-more-container .divider{height:20px;border-right:1px solid ${Dn.rU};
    margin-inline-start: 5px;
    margin-inline-end: -10px;
}`,cr=Un.i`
    ${Wn("top-sites-responsive-normal-width",Kn)}
    ${Wn("top-sites-responsive-c3-same-width",Qn)}
    ${Wn("top-sites-responsive-columns",tr)}
    ${Wn("top-sites-responsive-columns-res",ir)}
    ${Wn("top-sites-responsive-columns-res2",nr)} .top-sites .top-sites-responsive{box-sizing:border-box;padding:0 0 0 40px}.expanded-sites.top-sites-responsive{min-height:32px}.top-sites .top-sites-responsive-unified-recommended-sites{padding-left:15px;padding-right:37px}.top-sites .top-sites-responsive-item{padding-right:12px}.top-sites .top-sites-responsive .pill-top-site{margin-left:-4px;padding:4px;height:24px;border-radius:6px;cursor:pointer}.top-sites-responsive .pill-top-site:hover{background-color:var(--top-site-fill-hover,var(--neutral-fill-hover))}.top-sites-responsive .pill-top-site,.top-sites-responsive .left-part{display:flex;text-decoration:none}.top-sites .top-sites-responsive .left-part{flex-grow:1;align-items:center}.top-sites .top-sites-responsive .left-part .dot-separator{color:var(--top-site-color,var(--neutral-foreground-rest))}.top-sites .top-sites-responsive .left-part span:not(.dot-separator){font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--top-site-color,var(--neutral-foreground-rest))}.top-sites-responsive-icon{display:inline-block;line-height:21px;text-align:center}.top-sites .top-sites-responsive .left-part img,.top-sites-responsive-icon{width:16px;height:16px;margin-inline-start:initial;margin-inline-end:8px;transform:translate(0,1px)}.top-sites .top-sites-responsive.top-sites-responsive-unified-recommended-sites .left-part img,.top-sites-responsive-icon.top-sites-responsive-icon-size-20{width:20px;height:20px}.top-sites-responsive .top-sites-responsive-item .right-part{width:0;flex-shrink:0;border-radius:0}.top-sites-responsive .right-part fluent-button{visibility:hidden;border-radius:4px}.top-sites-responsive .pill-top-site:hover .right-part{width:auto}.top-sites-responsive .pill-top-site:hover .right-part fluent-button{visibility:visible}.top-sites .top-sites-responsive .top-sites-responsive-placeholder{width:100%;height:32px;padding:0}.top-sites-responsive-placeholder-add-button{padding:4px}.top-sites-responsive-pin-icon{flex-shrink:0;display:none;margin:0 5px}.top-sites .top-sites-responsive-pin-icon{line-height:26px}.one-line-top-sites-container .top-sites-responsive-pin-icon svg{width:12px;height:12px}.top-sites .top-sites-responsive-pin-icon svg{width:14px;height:14px}.top-sites-responsive .pill-top-site:hover .top-sites-responsive-pin-icon{display:block}`,dr=Un.i` :host{width:100%;--menu-max-width:210px;--menu-min-width:160px;--top-site-dialog-z-index:900}.long-width-menu{--menu-max-width:360px}msn-actions-menu::part(menu-region){z-index:700}.root{display:flex;background-color:transparent;flex-direction:row;justify-content:center;position:relative;transition:transform .3s ease-out;z-index:301;--top-site-margin:4px;--outline-width:2}.collapsed-sites{opacity:0;visibility:hidden;height:0}.collapsed-svg{transform:rotate(0deg)}.collapsed-label{opacity:1;visibility:inherit}.expanded-sites{opacity:1;visibility:inherit}.expanded-sites-large{opacity:1;visibility:inherit}.expanded-svg{transform:rotate(-180deg)}.expanded-label{opacity:0;visibility:hidden}.action-button{background:none;cursor:pointer;display:block;height:36px;position:absolute;padding:0;top:-44px;visibility:inherit;font-family:inherit;line-height:1;box-sizing:border-box;max-width:374px;justify-content:center;align-items:center;overflow:hidden;text-decoration:none;white-space:nowrap;font-size:${Rn.c};border:2px solid transparent;border-radius:2px;min-width:32px;margin-inline-end:var(--quicklink-end-margin,auto)}.banner-action-button{top:-50px}.action-button label{background:none;border:none;display:inline;height:auto;pointer-events:none;position:relative;text-decoration:none;top:-10px;transition:opacity .3s ease-out;visibility:inherit;margin-inline-start:16px;margin-inline-end:16px;padding:0;font-size:14px;line-height:20px;color:var(--top-site-color,${On.C})}.action-button label.expanded-label{display:none}.dot-separator{margin-left:2px;margin-right:2px;font-size:9px}.action-button svg{height:32px;width:32px;fill:${Mn.jq}}.action-button-rmbp svg{fill:none}.action-button path{fill:var(--top-site-color,${On.C})}.action-button:focus{outline:none}.action-button:${jn.b}{border:calc(var(--outline-width) * 1px) solid ${Ln.F7}}.action-button svg:focus{border:none;fill:${Mn.sG};outline:none}.action-button svg:hover{fill:${Mn.Qp}}.move-upward .action-button{top:-30px}msft-top-site-placeholder fluent-button::part(content){height:16px}.add-button{width:100%;height:100%}.add-button svg{width:16px;height:16px;pointer-events:none}.add-button span{display:none}.add-dialog-show{display:block}.add-dialog-hide{display:none}.see-all-button{width:100%;height:100%}.see-all-button svg{width:16px;height:16px;pointer-events:none}.see-all-button span{display:none}.sites{display:grid;grid-template-columns:repeat(var(--top-sites-grid-template-column,8),auto);transition:opacity 0.3s ease-out;row-gap:8px;overflow:hidden}.sites .start-button,.sites .end-button{width:24px;height:24px;min-width:24px;display:flex;justify-content:center}.sites .end-button-medium{width:24px;height:24px;min-width:24px;display:flex;justify-content:center;margin-right:7px}.sites .end-button-large{width:24px;height:24px;min-width:24px;display:flex;justify-content:center;margin-right:7px;--top-site-color:${(0,me.Y)()?"#FFFFFF":"#000000"}}.sites .start-button:hover,.sites .end-button:hover{background:var(--top-site-action-icon-hover,${Mn.Qp})}.sites .option-icon{width:14px;height:14px}.sites path{fill:var(--top-site-color,${On.C})}@media screen and (-ms-high-contrast:active){.sites path{fill:currentColor}}.sites fluent-button{background:transparent}.suggestion-title{font-weight:600;font-size:${Rn.c};line-height:20px}.suggestion-body{margin-top:16px;display:flex}.suggestion-body msft-top-site{transition:all 0.2s ease-in-out;border-radius:4px;background:${En.s};box-shadow:0px 1.6px 3.6px rgb(0 0 0 / 13%),0px 0px 2.9px rgb(0 0 0 / 11%)}.suggestion-body msft-top-site:hover{box-shadow:0px 3.2px 7.2px rgb(0 0 0 / 13%),0px 0px 3.8px rgb(0 0 0 / 11%)}.toast-root{position:absolute;left:50%;transform:translate(-50%,0);width:fit-content;max-width:95%;z-index:700;--fill-color:${(()=>{const e=(0,An.$B)((()=>Tn.m0))(In.ZP);return(0,me.Y)()?Tn.P5:e})()};
        --neutral-foreground-rest: ${(()=>{const e=(0,An.$B)((()=>Tn.m0))(In.ZP);return(0,me.Y)()?e:Tn.P5})()};
        --accent-foreground-rest: ${(0,me.Y)()?"#006CBE":"#63ADE5"};
        --toast-message-max-width: 287px;
    }
    
    msn-toast::part(toast-root){
        color: ${On.C};
        background: ${Fn.I}}.toast-close-button{background:transparent}.toast-navigation-button{margin-inline-start:4px;background:transparent;color:${Nn.go}}.top-sites{position:relative}.topSitesLightOnBackgroundImage{--top-site-fill-hover:rgba(229,229,229,0.3);--top-site-color:#FFFFFF;--top-site-action-icon-hover:rgba(234,234,234,0.42);--top-site-placeholder-backplate-fill:rgba(229,229,229,0.7);--neutral-foreground-hint:rgba(255,255,255,0.54)}.topSitesDarkOnBackgroundImage{--top-site-fill-hover:rgba(66,66,66,0.4);--top-site-color:#FFFFFF;--top-site-action-icon-hover:rgba(36,36,36,0.42);--neutral-foreground-hint:rgba(255,255,255,0.54)}.topSitesDark{--top-site-fill-hover:rgba(0,0,0,0.3);--top-site-color:#FFFFFF;--top-site-placeholder-backplate-fill:transparent}.topSitesLight{--top-site-fill-hover:rgba(229,229,229,0.3);--top-site-color:rgba(0,0,0,0.83);--top-site-placeholder-backplate-fill:transparent}.topSitesLightOnBackgroundImageLarge{--top-site-fill-hover:rgba(229,229,229,0);--top-site-color:#FFFFFF;--top-site-action-icon-hover:rgba(234,234,234,0.42);--top-site-placeholder-backplate-fill:rgba(229,229,229,0.7)}.topSitesDarkOnBackgroundImageLarge{--top-site-fill-hover:rgba(66,66,66,0);--top-site-color:#FFFFFF;--top-site-action-icon-hover:rgba(36,36,36,0.42)}.topSitesDarkLarge{--top-site-fill-hover:rgba(0,0,0,0);--top-site-color:#FFFFFF;--top-site-placeholder-backplate-fill:transparent}.topSitesLightLarge{--top-site-fill-hover:rgba(229,229,229,0);--top-site-color:rgba(0,0,0,0.83);--top-site-placeholder-backplate-fill:transparent}.with-back-plate path{fill:${On.C}}msft-top-site.drag-chosen{background:var(--top-site-fill-hover,var(--neutral-fill-hover))}msft-top-site.drag-chosen__no-hover{background:transparent !important}msft-top-site.drag-dragged{background:transparent}msft-top-site.small-top-sites{height:80px;width:104px}msft-top-site.small-top-sites.information-layout{height:75px;width:99px}msft-top-site.medium-top-sites{height:100px;width:116px}msft-top-site.large-top-sites{height:72.9px;width:112px;margin-bottom:4.1px;border-radius:5.3px}msft-top-site::part(image){background:${En.s};border-radius:4px}msft-top-site::part(imageMSB){background:#0078D4;border-radius:4px}msft-top-site.pill-top-site::part(image){box-shadow:0px 2px 4px rgb(0 0 0 / 10%);border-radius:12px}msft-top-site.grid-top-sites::part(image){box-shadow:unset;border-radius:unset;background:unset}msft-top-site.pill-top-site::part(imageMSB){border-radius:12px}msft-top-site.grid-top-sites::part(start){top:2px;left:0px}msft-top-site.grid-top-sites::part(end){top:5px;right:0px}msft-top-site.pill-top-site fluent-button{border-radius:4px}msft-top-site.grid-top-sites fluent-button{background:transparent}msft-top-site.grid-top-sites fluent-button.end-button:hover{background:var(--top-site-action-icon-hover,${Mn.Qp})}msft-top-site.pill-top-site{border-radius:6px}msft-top-site.pinned-top-site .start{pointer-events:none}msft-top-site fluent-button::part(control){padding:0;margin:0}msft-top-site .top-site-title{display:flex;justify-content:center;align-items:center}msft-top-site .top-site-title-large-tile{display:flex;justify-content:center;align-items:center;color:${(0,me.Y)()?"white":"black"};
        --top-site-color: ${(0,me.Y)()?"white":"black"}}msft-top-site .top-site-title a{overflow:hidden;text-overflow:ellipsis}msft-top-site .top-site-title-large-tile a{overflow:hidden;text-overflow:ellipsis}msft-top-site .badge{padding:1px 5px;border-radius:12px;flex:none;min-width:16px;background-color:#EDEDED;color:#0078D4;margin:0 0 0 4px;font-size:10px;line-height:13px;height:16px;font-weight:400;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:border-box;max-width:215px;transition:all 0.2s ease-in-out}msft-top-site-placeholder{height:88px}msft-top-site-placeholder.small-top-sites{height:84px}msft-top-site-placeholder.small-top-sites.information-layout{height:75px;width:99px}msft-top-site .top-site-shadow a{text-shadow:black 1px 1px 1px}@media (min-width:1012px) and (max-width:1097px){.river-zoom{--top-sites-grid-template-column:10 !important}}@media (max-width:1097px){:host{--top-sites-grid-template-column:4}.ten-sites{--top-sites-grid-template-column:5}.eight-sites{--top-sites-grid-template-column:8}.six-sites{--top-sites-grid-template-column:3}}@media (min-width:1098px){:host{--top-sites-grid-template-column:8}.ten-sites{--top-sites-grid-template-column:10}.expanded-sites{min-height:90px}.expanded-sites.information-layout{min-height:75px}.expanded-sites-large{min-height:72.9px}}${(0,he.vW)(he.K$.c3,null)}{.move-upward.nine-sites{--top-sites-grid-template-column:9}.move-upward.six-sites{--top-sites-grid-template-column:6}}.top-site-add-success{position:absolute;top:40px;left:-10000px}.pinned-indicator{width:12px;height:12px}#dismissButtonId{margin-top:1px}${ar}
    ${cr}
`.withBehaviors(new Bn.O(rr,or),new $n.w("eagerConnectTopsites",!0,sr)),lr={experienceConfigSchema:undefined};n.D.define(r.H.registry)},36399:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var n=i(33940);const r=["/ads-prebid.js","/istripper.js","/javascript/fropo.js","/nb/f_ls.js","/prebid-add.js","/prebid-ads/adsensebase.js","/prebid-article-ad-ad-300x250.js","/reclama/ads.js","/safu/safu.js","/wp-content/plugins/wp-banners/js/wp-banners.js","/zlk/zlk.js"],o=["/adex.js","/adgpt.js","/ados.js","/ads/stickyLb.js","/ane-popup-banner/ane-popup-banner.js","/ane-preroll/preroll.js","/arcads.js","/awe2.js","/clever_ads.js","/cnads.js","/dfp/dc.js","/doublepimp2.js","/eureka/eureka.js","/exopopunderdesktop.js","/expop.js","/fload.js","/fro_lo.js","/frontend_loader.js","/gpt.min.js","/invoke-2.js","/js/m/i-def.js","/js/youmuffpu.js","/js3caf.js","/kampyle.js","/keyade.js","/lib/ad.js","/markpop.js","/moatsdk.min.js","/nugg.min.js","/nwm-fcn.min.js","/nwm-pw2.min.js","/p8network.js","/popu.js","/popup2.js","/popup3.js","/punder.js","/pustrck.js","/scripts/chatur.js","/soralink.js","/suv4.js","/taboola_ads.js","/tardisrocinante/austin.js","/utep_ad.js","/weborama.js","/wp-content/plugins/bhcb/lock.js","/xpopup.js","/_adverts.js","/_rebid.js","/cmbdv2.js","/push-skin/skin.min.js","/pop2.js","/banger.js","/detroitchicago/anaheim.js","/detroitchicago/boise.js","/detroitchicago/houston.js","/detroitchicago/memphis.js","/detroitchicago/minneapolis.js","/detroitchicago/raleigh.js","/detroitchicago/rochester.js","/detroitchicago/tampa.js","/_js/prbd_6.19.0.js","/prebid14.js","/prebid_ver.js","/pubfig.js","/pubfig.min.js","/_prebid.js","/~Prebid.js","/datomata.widget.js","/abtest_ab.js","/adb.min.js","/adblock-relief.js","/blockblock/blockblock.jquery.js","/fuckadb.js"];var s=i(95651),a=i.n(s);class c{Impacts(){const e=this.GetConfig();return new Promise(function(t,i){const n=[this.CheckLoadStatus(e.EasyList),this.CheckLoadStatus(e.UboSpecial),this.CheckLoadStatus(e.Param)];Promise.all(n).then((e=>{t(e[0]||e[1]||e[2])})).catch((e=>{i(e)}))}.bind(this))}CheckLoadStatus(e){const t=document.createElement("script");t.src=e.urls,document.body.appendChild(t);const i=new Promise((function(i,n){t.onload=function(){document.getElementById(e.id)?i(!1):i(!0)},t.onerror=function(){i(!0)}}));return r=500,o=i,(0,n.mG)(void 0,void 0,void 0,(function*(){const e=new Promise(((e,t)=>{setTimeout(e,r,!1)}));return Promise.race([o,e])}));var r,o}GetConfig(){const e="https://assets.msn.com/staticsb/statics/latest/adboxes",t=this.Sample(o),i=this.Sample(r),n=this.Sample(o);return{UboSpecial:{urls:e+"/ubo"+i,id:btoa(i)},EasyList:{urls:e+"/egb"+t,id:btoa(t)},Param:{urls:e+"/general.js?"+n,id:btoa(n)}}}Sample(e){return e[Math.floor(Math.random()*e.length)]}}var d=new class{constructor(){this.getAdbStatus=()=>(this.hasAdbStatus||(this.adbStatus=this.checkAdbStatus(),this.hasAdbStatus=!0),this.adbStatus),this.executeDetector=()=>(0,n.mG)(this,void 0,void 0,(function*(){const e=new c,t=yield e.Impacts();this.setCookie(t)})),this.appendAdbStatusToUrl=e=>{if(!e||0===e.length||!this.getAdbStatus())return e;const t=new URL(e),i=t.searchParams.get("rlink");if(!i)return e;const n=decodeURIComponent(i);if(!(n.includes("www.bing.com/aclick?ld=")||n.includes("www.bing.com/ac?ld=")||n.includes("www.bing.com/ck?ld=")||n.includes("www.bing.com/ack?ld=")||n.includes("www.bing.com/clk?ld=")||n.includes("www.bing.com/aclk?ld=")||n.includes("www.bing.com/click?ld=")))return e;const r=i.concat("&adb=1");return t.searchParams.set("rlink",r),t.toString()},this.checkAdbStatus=()=>{const e=a().get("AlgoRes");return!(!e||"ABD=V=0"===e)},this.setCookie=e=>{if(e){const e=(new Date).getTime();a().set("AlgoRes",`ABD=V=${e}`,{expires:30})}else a().set("AlgoRes","ABD=V=0",{expires:30})}}}},18769:function(e,t,i){"use strict";i.d(t,{A:function(){return f}});var n=i(33940),r=(i(34757),i(73252));const o="undefined"!=typeof window?function(){const e={positions:[],beacons:{},clickBeacons:{},elements:{},timer:null,watch:null,paused:!1,supportsIO:!(window.location.search.indexOf("useLegacyTracking=1")>-1)&&"IntersectionObserver"in window,viewedBeaconHistory:new Set},t="background: #fff; border-radius: 2px; color: #5f6a96; padding: 4px;";let i=!1;window&&(i=window.location.search.toLowerCase().indexOf("debug=1",0)>-1);const n=function(e){"NOT_PROVIDED"!==e&&((new Image).src=e)},r=function(t){const i=e.clickBeacons[t]||[];if(i.length)for(let e=0,t=i.length;e<t;e++)n(i[e])},s=function(e,t){const i=(new Date).getTime()/1e3|0,n=Math.floor(9007199254740990*Math.random()),r=t&&t.index||0;return e.replace("$(AD_POSN)",encodeURIComponent("pp=m,pi="+r)).replace("{REQUEST_ID}",n).replace("[timestamp]",i).replace("[CACHEBUSTER]",i).replace("[RANDOM_NUMBER]",n)},a=function(e,t,i){const n=function(e,t){const i=t+1,n=Math.floor(e.width/i),r=Math.floor(e.height/i),o=Math.max(0,e.left),s=e.top,a=[];for(let e=1;e<i;e++){const t=o+n*e;for(let e=1;e<i;e++){const i=s+r*e;a[a.length]=[t,i]}}return a}(t,10);let r=0;for(let t=0,i=n.length;t<i;t++){const i=n[t][0],o=n[t][1];c(e,i,o)||r++}const o=100*i;return!(100-r/n.length*100>=o)},c=(e,t,i)=>{if(!!e.shadowRoot){const n=e.shadowRoot.elementFromPoint(t,i);return e.shadowRoot.contains(n)||e.contains(n)}const n=document.elementFromPoint(t,i);return!(!n||"MSFT-FEED-LAYOUT"!==n.tagName.toUpperCase()&&"VIEWS-NATIVE-AD"!==n.tagName.toUpperCase()&&"EDGE-CHROMIUM-PAGE"!==n.tagName.toUpperCase())},d=function(e,t){const i=function(){const e=document,t=window,i=e.body,n=e.documentElement;return{height:t.innerHeight||n.clientHeight||i&&i.clientHeight,width:t.innerWidth||n.clientWidth||i&&i.clientWidth}}(),n=e.getBoundingClientRect(),r=Math.max(0,Math.min(n.bottom,i.height)-Math.max(n.top,0)),o=Math.max(0,Math.min(n.right,i.width)-Math.max(n.left,0)),s=r/(n.height||e.offsetHeight)||0,c=o/(n.width||e.offsetWidth)||0;return!window.disableObstructionDetection&&window.addEventListener&&a(e,n,t)?0:Math.max(0,s+c-1)},l=function(e,t,i){return window.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)},u=function(){const n=e.positions.length;for(let o=0;o<n;o++){const n=e.positions[o];if(!e.paused&&n){const s=n.uid,a=n.node;if(!a)continue;if(e.elements[s]||(e.elements[s]=a,e.clickBeacons[s]&&l(a,"click",(function(){r(s)}))),d(a,n.threshold)<n.threshold)n.history=null;else{n.history||(n.history=Date.now(),i&&console.log("%c[ Gemini: Started - "+n.history+" ]",t));const r=(Date.now()-n.history)/1e3;if(i&&console.log("%c[ Gemini: Tracking - "+r+" ]",t),r>=n.duration&&(i&&console.log("%c[ Gemini: Tracking - "+r+" ]",t),n.timer&&(clearInterval(n.timer),n.timer=null),n.observer&&n.observer.unobserve(a),e.viewedBeaconHistory.has(n.uid)||(e.viewedBeaconHistory.add(n.uid),n.callback(n)),n.history=Date.now(),e.positions.splice(o,1),o-=1,!e.positions.length)){i&&console.log("%c[ Gemini: Finished - "+n.history+" ]","background: #eb2e2e; border-radius: 2px; color: #fff; padding: 4px;"),e.timer&&(clearInterval(e.timer),e.timer=null);break}}}}},p=function(e){const t=e.node;if(!e.observer){const i=new IntersectionObserver((function(t){return function(t){const i=t[t.length-1];i.isIntersecting?i.isIntersecting&&!e.timer&&(e.timer=setInterval(u,150)):(clearInterval(e.timer),e.timer=null,e.history=null)}(t)}),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]});i.observe(t),e.observer=i}},g=function(t,r,a,c,d,l){const u=a.a,g=a.c,h=a.d,m=a.p,f=a.t,v=e.beacons,y=e.positions,b=m/100;v[t]||(v[t]={});v[t][r]={urls:c,threshold:b,duration:h,type:f,consecutive:g,audio:u};const S={uid:t,threshold:b,duration:h,consecutive:g,audio:u,callback:function(){const e=v[t][r],a=e.urls,c=a.length,d=o.beaconCallback;for(let o=0;o<c;o++){const c=a[o];n(s(c,l)),"function"==typeof d&&d(v[t][r],t,r,c),i&&console.log("%c[ Gemini: $$$$ ]\n"+JSON.stringify({url:c,rule:r,threshold:e.threshold,duration:e.duration,consecutive:e.consecutive},null,2),"background: #5c71d9; border-radius: 2px; color: #fff; padding: 4px;")}},node:d,history:null};y.push(S),e.supportsIO&&p(S)},h=function(t,i,n){const r=i.rules,o=r.viewabilityDefStatic,s=r.viewabilityDefStatic3P,a=i.tag,c=a.clickTrackingUrl,d=a.imprTrackingUrl,l=a.imprTrackingUrls,u=i.actionUrls,p=i.beacon;if(u&&u.PARTIAL_VIEW){const e=u.PARTIAL_VIEW;g(t,"viewabilityDefStaticPartial",{p:.01,d:0,t:21},e,n,i)}if(o||p||u&&u.IMPR_INTERNAL){const e="viewabilityDefStatic",r=o||{c:1,d:1,p:50};let s=[];p&&p.length&&s.push(p),u&&u.IMPR_INTERNAL&&(s=s.concat(u.IMPR_INTERNAL)),l&&l.length?s=s.concat(l):d&&(d instanceof Array?s=s.concat(d):s.push(d)),g(t,e,r,s,n,i)}if(s&&u&&u.STATIC_VIEW_3P){const e=s.length;for(let r=0;r<e;r++){const e=u.STATIC_VIEW_3P.slice(),o=s[r],a="viewabilityDefStatic3P:"+r,c=s[r].t;for(let t=0,i=e.length;t<i;t++)e[t]=(h=e[t],m=c,h.replace("$(S_VIEW_TYPE)",m));g(t,a,o,e,n,i)}}var h,m;let f=[];u&&u.CLICK_INTERNAL&&(f=f.concat(u.CLICK_INTERNAL)),c&&c.length&&(f=f.concat(c)),e.clickBeacons[t]=f},m=function(e,t){const i=e.ads,n=e.section.id,r=i.length;for(let e=0;e<r;e++){const r=i[e],o=r.customId||"gemini-"+n+"-"+(r.creativeId||r.demandSourceCreativeId||r.dynamicProductAdId||0)+"-"+r.index,s=t;r.tag="string"==typeof r.tag?JSON.parse(r.tag):r.tag,r.beacon=r.beacon.replace("$(AD_POSN)",encodeURIComponent("pp=m,pi="+r.index)),h(o,r,s)}},f=function(t,n){const r=t instanceof Array;if(!t||r&&!t.length||t&&"object"!=typeof t)return;t&&!r&&(t=[t]);const o=t.length;for(let e=0;e<o;e++){const i=t[e],r=i.sectionads;if(r)for(let e=0;e<r.length;e++)m(r[e],n);else m(i,n)}return"IntersectionObserver"in window||e.timer||(i&&console.log("%c[ Gemini: Start Watching ]","background: #55ae3f; border-radius: 2px; color: #fff; padding: 4px;"),e.timer=setInterval(u,150)),this};return window.Gemini=f,"hidden"in document&&document.addEventListener("visibilitychange",(function(){return e.paused=document.hidden})),f.version="2.0",f}():null;var s=i(33954),a=i(68364),c=i(26415),d=i(81765),l=i(36159),u=i(743),p=i(33379),g=i(12884),h=i(65135),m=i(75559);class f{constructor(e){this.config=e,this.visiJsonTrackingData=new Map,this.userActionLog=new l.Km,this.beaconsProcessed=new Map,this.currentVideoDom=new Map,this.onObserve=(e,t)=>(i,n)=>{i&&i.forEach((i=>{s.k.logCallback((()=>"IntersectionRatio: "+i.intersectionRatio.toString())),i.intersectionRatio>=.5?this.timerId=window.setTimeout(((i,n)=>{this.fireVisibilityBeacon(i,n),this.userActionLog.fireImpressionLog(e,t,n)}),1e3,n,i.target):this.timerId&&clearTimeout(this.timerId)}))}}sendBeaconForAdServed(e){return(0,n.mG)(this,void 0,void 0,(function*(){const{beaconsJson:t,beaconsSupportHttpPOST:i}=e;this.fireAdServedTrackingCall(t,i)}))}fireAdServedTrackingCall(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){if(e&&e.length>0)try{const i=JSON.parse(e),n=i&&i.trb;if(n)for(let e=0;e<n.length;e++){const r=n[e];this.beaconsProcessed&&this.beaconsProcessed.has(r)&&this.beaconsProcessed.get(r)===d.hE.BeaconTypeAdServed||(this.config&&this.config.useNavigatorSendBeacon&&t?this.firePostTrackingBeacon(n[e],d.hE.BeaconTypeAdServed,i.e):this.fireTrackingBeacon(n[e],d.hE.BeaconTypeAdServed,i.e))}}catch(t){h.M0.sendAppErrorEvent((0,a.Tr)(c.Cy3,"Fail to fire ad served call",`Fail to parse beacon json tracking data: ${e}`))}}))}fireClickTrackingCall(e,t){if(e&&e.length>0)try{const i=JSON.parse(e),n=JSON.parse(t),r=i&&i.tcb,o=n&&n.e;if(r)for(let e=0;e<r.length;e++)this.fireTrackingBeacon(r[e],d.hE.BeaconTypeClick,o)}catch(t){h.M0.sendAppErrorEvent((0,a.Tr)(c.Cy3,"Fail to fire ad clicked call",`Fail to parse beacon click json: ${e}`))}}fireUserActionBeacon(e){this.fireTrackingBeacon(e,d.hE.UserActionEvent,!1)}visibilityObserver(e,t,i){const n=document.querySelector(e.replace(/\s/g,".")),r=e.slice(1,e.length);n&&this.elementVisibilityObserver(n,t,void 0,r,i)}visibilityCarouselObserver(e,t){e&&t&&this.elementVisibilityObserver(e,t)}elementVisibilityObserver(e,t,i,n,r,o,s,d){if(this.visiJsonTrackingData.set(e,t),i)try{!function(e,t){window.Gemini&&window.Gemini(e,t)}(JSON.parse(i),e)}catch(e){h.M0.sendAppErrorEvent((0,a.Tr)(c.Cy3,"Fail to invoke gemini caller",`Fail to parse beacon gemini json: ${i}`))}const l={root:null,rootMargin:"0px",threshold:.5};this.onObserve=this.onObserve.bind(this),this.fireVisibilityBeacon=this.fireVisibilityBeacon.bind(this),this.loadPolyfills().then((()=>{new IntersectionObserver(this.onObserve(s,d),l).observe(e),r&&r.length>0&&(this.trackBingViewability=this.trackBingViewability.bind(this),this.trackBingViewability(e,n,r,!0,this.beaconsProcessed,o,t))}))}checkVideoElementChanged(e,t,i){const n=e&&e.querySelector("native-ad-video-player")&&e.querySelector("native-ad-video-player").shadowRoot,r=n&&n.querySelector("content-video-player")&&n.querySelector("content-video-player").shadowRoot?n.querySelector("content-video-player").shadowRoot.querySelector("video"):null,o=i?i.get(e):null;i&&r!=o&&(t.element=r,t.videoParenentElement=n&&n.host&&n.host.parentElement,window&&window.MSANTracker&&window.MSANTracker.TrackElements&&(window.MSANTracker.PlayUtils.untrackElement(o),window.MSANTracker.TrackElements([t],window)),i.set(e,r))}trackBingViewability(e,t,i,n,r,o,s){var a,c;const l=null!==(a=this.config&&this.config.VideoAd&&this.config.VideoAd.view&&this.config.VideoAd.view.triggerType)&&void 0!==a?a:"play",u=null!==(c=this.config&&this.config.VideoAd&&this.config.VideoAd.view&&this.config.VideoAd.view.durationMs)&&void 0!==c?c:2e3,p=!!o,g=t?t.concat(" video"):"";let h=e,m=null;n&&p&&(null==this.currentVideoDom&&(this.currentVideoDom=new Map),h=e&&e.querySelector("native-ad-video-player")&&e.querySelector("native-ad-video-player").shadowRoot,m=h&&h.querySelector("content-video-player")&&h.querySelector("content-video-player").shadowRoot&&h.querySelector("content-video-player").shadowRoot.querySelector("video"),this.currentVideoDom.set(e,m));let f=[];const v=[];let y=[],b=[];if(i&&i.length>0)for(let e=0;e<i.length;e++){const t=i[e];r&&r.has(t)&&r.get(t)===d.hE.BeaconTypeVisibility||(p?y.push({type:"videoView",triggerType:l,url:t,percentage:50,duration:u}):v.push({type:"view",triggerType:"view",url:t,percentage:50,duration:1e3}),null!=r&&n&&r.set(t,d.hE.BeaconTypeVisibility),b.push({beaconUrl:t,type:d.hE.BeaconTypeVisibility}))}if(p){const{bingBeacons:i,servedBeacons:a,videoTrackedUrls:c}=this.getBeaconsForVideo(o,r,n,s);y=y.concat(i),b=b.concat(c),f=[{impid:t,element:n?e:null,beacons:a},{impid:n?t:g,element:n?m:null,videoParenentElement:n?h&&h.host&&h.host.parentElement:null,beacons:y}]}else f=[{impid:t,element:n?e:null,beacons:v}];if(window&&window.MSANTracker&&window.MSANTracker.TrackElements&&window.MSANTracker.TrackElements(f,window),n&&p){const i={impid:t,element:m,videoParenentElement:h&&h.host&&h.host.parentElement,beacons:y};setInterval(this.checkVideoElementChanged,100,e,i,this.currentVideoDom)}return b}getBeaconsForVideo(e,t,i,n){var o,s;const l=null===(o=this.config&&this.config.VideoAd&&this.config.VideoAd.mobileEnable)||void 0===o||o,u=null!==(s=this.config&&this.config.VideoAd&&this.config.VideoAd.impression&&this.config.VideoAd.impression.durationMs)&&void 0!==s?s:1e3;let p=[];const g=[],{bingBeacons:m,videoUrls:f}=this.generateVideoBeaconsFromVast(e,t,i);p=p.concat(f);const v=n,y=r.Al&&r.Al.ClientSettings||{},b=y.browser&&"true"===y.browser.ismobile||"phone"===y.deviceFormFactor;if(v&&v.length>0)try{const e=JSON.parse(v);if(e){const n=e.trb;if(n)for(let r=0;r<n.length;r++){const o=n[r];t&&t.has(o)&&t.get(o)===d.hE.BeaconTypeAdServed||(g.push({type:"videoImpression",triggerType:"view",url:e.e?o:decodeURIComponent(o),percentage:50,duration:l&&b?300:u}),null!=t&&i&&t.set(o,d.hE.BeaconTypeAdServed),p.push({beaconUrl:o,type:d.hE.BeaconTypeAdServed}))}}}catch(e){h.M0.sendAppErrorEvent((0,a.Tr)(c.Cy3,"Fail to fire video tracked beacon",`Fail to parse beacon json tracking data: ${v}`))}return{bingBeacons:m,servedBeacons:g,videoTrackedUrls:p}}getMilliseconds(e){const t=e.split(".");let i=0;const n=t[0];t.length>1&&(i+=Number(t[1]));const r=n.split(":");return i+1e3*(3600*Number(r[0])+60*Number(r[1])+Number(r[2]))}generateVideoBeaconsFromVast(e,t,i){const n=[],r=[],o=this.getMilliseconds(e.Duration);if(e.TrackingEvents)for(let s=0;s<e.TrackingEvents.length;s++)if(e.TrackingEvents[s]){const a=e.TrackingEvents[s].value;if(t&&t.has(a)&&t.get(a)===d.hE.BeaconTypeVideoProgress)continue;let c="";switch(e.TrackingEvents[s].event&&(c=e.TrackingEvents[s].event.toLowerCase()),c){case d.hE.StartEvent:n.push({type:"start",triggerType:"play",url:a,percentage:50,duration:0});break;case d.hE.FirstQuartileEvent:n.push({type:"quartile",triggerType:"play",url:a,percentage:50,duration:Math.ceil(o/4)});break;case d.hE.MidPointEvent:n.push({type:"quartile",triggerType:"play",url:a,percentage:50,duration:Math.ceil(o/2)});break;case d.hE.ThirdQuartileEvent:n.push({type:"quartile",triggerType:"play",url:a,percentage:50,duration:Math.ceil(o/4*3)});break;case d.hE.CompleteEvent:n.push({type:"complete",triggerType:"play",url:a,percentage:50,duration:o});break;case d.hE.ProgressEvent:e.TrackingEvents[s].offset&&n.push({type:"progress",triggerType:"play",url:a,percentage:50,duration:this.getMilliseconds(e.TrackingEvents[s].offset)})}null!=t&&i&&t.set(a,d.hE.BeaconTypeVideoProgress),r.push({beaconUrl:a,type:d.hE.BeaconTypeVideoProgress})}return{bingBeacons:n,videoUrls:r}}firePageMonetizedTelemetry(e){if(!(null==e?void 0:e.getAttribute))return;const t=e.getAttribute(m.qP);try{const i=JSON.parse(t);(null==i?void 0:i.ism)&&h.M0.sendContentViewEvent(e.parentElement,m.NS.Partial)}catch(e){h.M0.sendAppErrorEvent((0,a.Tr)(c.Cy3,"Fail to set isMonetized flag",`Fail to parse telemetryObject json: ${t}`))}}fireVisibilityBeacon(e,t){if(s.k.logCallback((()=>"ad visible for 1 second")),this.firePageMonetizedTelemetry(t),this.visiJsonTrackingData&&this.visiJsonTrackingData.get(t))try{const e=JSON.parse(this.visiJsonTrackingData.get(t)),i=e&&e.tvb;if(i)for(let t=0;t<i.length;t++){const n=i[t];this.beaconsProcessed&&this.beaconsProcessed.has(n)&&this.beaconsProcessed.get(n)===d.hE.BeaconTypeVisibility||(f.allVisiBeaconsFiredOnPage&&f.allVisiBeaconsFiredOnPage.has(n)||this.fireTrackingBeacon(n,d.hE.BeaconTypeVisibility,e.e))}}catch(e){h.M0.sendAppErrorEvent((0,a.Tr)(c.Cy3,"Fail to fire visibility beacon",`Fail to parse beacon json tracking data: ${this.visiJsonTrackingData.get(t)}`))}e&&e.unobserve(t)}fireRequestLevelBeacons(e){e&&e.forEach((e=>{e&&this.fireRequestLevelBeaconCall(e)}))}fireJSTrackers(e,t=!1){if(e&&e.length>0)try{const i=JSON.parse(e),n=i&&i.tjb;if(!Array.isArray(n))return;for(const e of n)e&&"string"==typeof e&&(this.beaconsProcessed&&this.beaconsProcessed.has(e)&&this.beaconsProcessed.get(e)===d.hE.BeaconTypeJsTracker||(t&&this.isXandrVisibilityTracker(e)?this.fireXandrJSTracker(e):this.fireJSTracker(e)))}catch(t){h.M0.sendAppErrorEvent((0,a.Tr)(c.Cy3,"Fail to fire jstrackers",`Fail to parse beacon json tracking data: ${e}`))}}fireJSTracker(e){return(0,n.mG)(this,void 0,void 0,(function*(){return new Promise(((t,i)=>{if(!(0,p.N)())return;const n=(0,g.b0)(e,void 0,!0,void 0);n.onload=()=>{s.k.logCallback((()=>"Added jsTracker url: "+e)),this.beaconsProcessed.set(e,d.hE.BeaconTypeJsTracker),t()},n.onerror=t=>{h.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.mNV.JsTrackerPartnerScriptLoadError),{message:"Failed to load partner jsTracker file",pb:Object.assign(Object.assign({},c.mNV.JsTrackerPartnerScriptLoadError.pb),{customMessage:`Error occurred while loading ad partner trackerJS file: ${e}`})})),i(t)},document.body.appendChild(n)}))}))}fireRequestLevelBeaconCall(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(e){s.k.logCallback((()=>"Firing encoded requestlevel beacon: "+e));let t=yield new Image(1,1);t.src=e,t=null}}))}firePostTrackingBeacon(e,t,i){let n=d.hE.BeaconFormatEncoded;i||(e=decodeURIComponent(e),n=d.hE.BeaconFormatDecoded),e&&(s.k.logCallback((()=>"Firing "+n+" "+t+" beacon, beaconUrl: "+e)),navigator.sendBeacon(e),this.beaconsProcessed.set(e,t))}fireTrackingBeacon(e,t,i){let n=d.hE.BeaconFormatEncoded;i||(e=decodeURIComponent(e),n=d.hE.BeaconFormatDecoded),e&&(s.k.logCallback((()=>"Firing "+n+" "+t+" beacon, beaconUrl: "+e)),this.fireBeaconCall(e,t))}fireBeaconCall(e,t){let i;try{i=new URL(e)}catch(t){return void h.M0.sendAppErrorEvent((0,a.Tr)(c.AIp,"Invalid beacon URL",`Fail to parse beacon json tracking data: ${e}`))}const n=i.hostname.toLowerCase(),r=n.indexOf("am-api.taboola.com")>=0||n.indexOf("ch-api.taboola.com")>=0||n.indexOf("hk-api.taboola.com")>=0||n.indexOf("il-api.taboola.com")>=0||n.indexOf("la-api.taboola.com")>=0||n.indexOf("sg-api.taboola.com")>=0||n.indexOf("us-api.taboola.com")>=0||n.indexOf("srtb.msn.com")>=0||n.indexOf("www.bing.com")>=0;if(this.config&&this.config.useFetchSendBeacon&&r)fetch(e,{method:"GET",keepalive:!0,mode:"no-cors"}).catch((e=>null));else{let t=new Image(1,1);t.src=e,t=null}this.beaconsProcessed.set(e,t),t===d.hE.BeaconTypeVisibility&&f.allVisiBeaconsFiredOnPage.add(e)}supportsIntersectionObserver(){return"IntersectionObserver"in i.g&&"IntersectionObserverEntry"in i.g&&"intersectionRatio"in IntersectionObserverEntry.prototype}loadPolyfills(){const e=[];return this.supportsIntersectionObserver()||e.push(i.e("node_modules_intersection-observer_intersection-observer_js").then(i.t.bind(i,76583,23))),Promise.all(e)}isXandrVisibilityTracker(e){return e.includes("trk.js")}fireXandrJSTracker(e){document.addEventListener(u.gL,(t=>{const i=this.extractAdIdFromXandrTrackerUrl(e);t.detail.adUniqueIds.includes(i)&&this.fireJSTracker(this.replaceXandrVisibilityTrackerParam(i,e))}))}replaceXandrVisibilityTrackerParam(e,t){const i=`dom_id=${e};`,n=`dom_elt_var=${e};`;return t.replace(i,n)}extractAdIdFromXandrTrackerUrl(e){var t;const i=null===(t=e.match(/dom_id=([a-zA-Z0-9_-]+);/))||void 0===t?void 0:t[1];return i||(0,a.H)(c.mNV.XandrViewabilityTrackerMalformed,"Xandr visibility tracker URL doesn't have ad id","dom_id parameter is empty",{trackerUrl:e}),i}get intersectionObserver(){return this.loadPolyfills()}}f.allVisiBeaconsFiredOnPage=new Set},17615:function(e,t,i){"use strict";i.d(t,{UF:function(){return l}});var n=i(33940),r=i(52144),o=i(72344),s=i(33379);let a,c=!1;const d=new Promise((e=>{a=e}));function l(){return(0,n.mG)(this,void 0,void 0,(function*(){switch(yield function(){return(0,n.mG)(this,void 0,void 0,(function*(){c||(r.A.subscribe(r.U.CookieConsentStatus,(e=>{e!==o._.Unknown&&a()})),c=!0);const e=r.A.get(r.U.CookieConsentStatus);return e!==o._.Unknown?e:((0,s.N)()&&(yield d),r.A.get(r.U.CookieConsentStatus))}))}()){case o._.Required:return!0;case o._.NotRequired:return!1;default:return}}))}},16257:function(e,t,i){"use strict";i.d(t,{N:function(){return o}});var n=i(81765),r=i(67462);class o{updateMsaOptOutCookie(e){if(!this.getMsaOptoutCookieData()&&e&&e.optout){const t=!0===e.optout.msaOptOut?"1":"0";this.setMsaOptoutCookie(t)}}getMsaOptoutCookieData(){const e=(0,r.ej)(n.yV.MSAOptOut);return e&&e.length>0?e:null}setMsaOptoutCookie(e){e&&e.length>0&&(0,r.sq)(n.yV.MSAOptOut,e,1,null,"/")}getBrowserOptoutStatus(){const e=(0,r.ej)(n.yV.BrowserOptOut);return!(!e||"1"!==e)}setUserOptOutSettings(){const e=this.getBrowserOptoutStatus(),t=this.getMsaOptoutCookieData(),i=!(!t||"1"!==t),r=(e||i).toString().toLowerCase();let o="";e&&(o="b|"),i&&(o+="m");const s=n.Lr.UserOptOut+":"+r+";"+n.Lr.UserOptOutOptions+":"+o;if(document.head.attributes["data-info"]){const e=document.head.attributes["data-info"].value.split(";");e.find((e=>e.indexOf(n.Lr.UserOptOut)>-1))?e.find((e=>e.indexOf(n.Lr.UserOptOut)>-1))!==n.Lr.UserOptOut+":"+r&&(document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(n.Lr.UserOptOut+":false",n.Lr.UserOptOut+":"+r).replace(n.Lr.UserOptOut+":true",n.Lr.UserOptOut+":"+r)):document.head.attributes["data-info"].value=document.head.attributes["data-info"].value+";"+n.Lr.UserOptOut+":"+r,e.find((e=>e.indexOf(n.Lr.UserOptOutOptions)>-1))?e.find((e=>e.indexOf(n.Lr.UserOptOutOptions)>-1))!==n.Lr.UserOptOutOptions+":"+o&&(e.includes(n.Lr.UserOptOutOptions+":")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(n.Lr.UserOptOutOptions+":",n.Lr.UserOptOutOptions+":"+o):e.includes(n.Lr.UserOptOutOptions+":b|")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(n.Lr.UserOptOutOptions+":b|",n.Lr.UserOptOutOptions+":"+o):e.includes(n.Lr.UserOptOutOptions+":b|m")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(n.Lr.UserOptOutOptions+":b|m",n.Lr.UserOptOutOptions+":"+o):e.includes(n.Lr.UserOptOutOptions+":m")&&(document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(n.Lr.UserOptOutOptions+":m",n.Lr.UserOptOutOptions+":"+o))):document.head.attributes["data-info"].value=document.head.attributes["data-info"].value+";"+n.Lr.UserOptOutOptions+":"+o}else document.head.setAttribute("data-info",s)}}},85013:function(e,t,i){"use strict";i.d(t,{c:function(){return B},d:function(){return $}});var n,r=i(33940),o=i(81765),s=i(15213),a=i(88875),c=i(68364),d=i(26415),l=i(19388),u=i(62676),p=i(22704),g=i(52965),h=i(26671),m=i(4935),f=i(90351),v=i(25156),y=i(95592),b=i(89696),S=i(18769),C=i(58155),w=i(78468),T=i(84169),k=i(53909);!function(e){e.SlideshowPreview="ss",e.ArticlePreview="ar",e.VideoPreview="vi"}(n||(n={}));var A=i(87298),I=i(65135);class P{constructor(){this.cmsProviderCache=new Map}getCMSList(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){if(e)try{const i={method:"GET",headers:{}},n=yield(0,A.w)((()=>(0,r.mG)(this,void 0,void 0,(function*(){const t=new URL(`${o.ZG.CMSListServiceUrl}${e}${this.getContentServiceUrlBase().search}`,`${this.getContentServiceUrlBase()}`),n=yield fetch(t.toString(),i);if(n.ok)return n.json();I.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Invalid response from CMS, ${n.statusText}, listId: ${e}`))}))),"getCMSList");if(!n)return void I.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Invalid response.json(), listId: ${e}`));const s=n;return this.translateToCMSItem(s,e,t,o.Lr.PrivacyUrl)}catch(t){return void I.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Error while fetching CMS Native Ad  ${t}, id: ${e}`))}else I.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`No backfill id found, listId: ${e}`))}))}translateToCMSItem(e,t,i,n){return(0,r.mG)(this,void 0,void 0,(function*(){if(!e||!e.list||0===e.list.length)return void I.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`No CMS Response returned from ${t}`));const r=[];for(const t of e.list){let e=!1;const s=t.extendedProperties;if(s)for(const t of s)if(t.key&&t.key.indexOf("is_content")>-1&&t.values&&t.values.indexOf("true")>-1){e=!0;break}let a;if(null!=t.link&&null!=t.link.title&&t.link.href&&null!=t.link.image&&null!=t.link.image.href){const i=this.getCMSContentId(t.link.image.href);let r,s;if(t.link.ad)if(t.link.ad.providerHref&&t.link.ad.providerHref.href){const e=this.getCMSContentId(t.link.ad.providerHref.href);e?r=yield this.fetchProviderName(e):t.link.ad.sponsorText&&(r=t.link.ad.sponsorText)}else t.link.ad.sponsorText&&(r=t.link.ad.sponsorText);s=r||(null!=t.link.kicker?t.link.kicker:o.ZG.DefaultProviderName),a={title:t.link.title,url:t.link.href,provider:{name:s},imageUrl:i?(0,k.zz)(i,{width:624,height:350,enableDpiScaling:!1}):t.link.image.href,isContent:e,privacyUrl:n}}else if(null!=t.reference&&null!=t.reference.href){const r=this.getCMSContentId(t.reference.href);if(null!=r){const t=yield this.getCMSContent(r);if(!t)continue;a={title:t.title,url:this.constructDestinationUrl(t,i),provider:this.constructProvider(t),imageUrl:this.constructImageUrl(t),isContent:e,privacyUrl:n}}}a&&a.title&&a.imageUrl&&a.url&&r.push(a)}return{id:e._id,items:r}}))}getCMSContent(e){return(0,r.mG)(this,void 0,void 0,(function*(){try{const t=new URL(this.getContentServiceUrlBase().search,`${this.getContentServiceUrlBase()}${o.ZG.CMSContentServiceURl}${e}/`),i=yield fetch(t.toString());if(!i||!i.ok)return void I.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Failed to fetch CMS content, cmsId: ${e}`));const n=yield i.json();return n||void I.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Invalid JSON response to get CMS content, cmsId: ${e}`))}catch(t){return void I.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Error while fetching CMS content ${t}, cmsId: ${e}`))}}))}constructDestinationUrl(e,t){const{category:i}=e,r=i&&i.product||"news",o=i&&i.label||"other",s=n[e.type]||"xx";return`https://www.msn.com/${t}/${C.c.encodeURIComponentForPrime(r||"")}/${C.c.encodeURIComponentForPrime(o||"")}/${C.c.encodeURIComponentForPrime(e.title||"")}/${s}-${e.id}`}constructProvider(e){const{name:t,logo:i}=e.provider;return{name:t,logo:i&&i.id?{src:`${w.E.prod}${i.id}?w=16&h=16`,alt:t}:void 0}}constructImageUrl(e){if(e.images&&!(e.images.length<1)&&e.images[0].id)return(0,k.zz)(e.images[0].id,{width:624,height:350,focalRegion:e.images[0].focalRegion,enableDpiScaling:!1})}getCMSContentId(e){return e&&e.indexOf("cms/api/amp")>-1?e.substring(e.lastIndexOf("/")+1):null}fetchProviderName(e){return(0,r.mG)(this,void 0,void 0,(function*(){try{if(this.cmsProviderCache.get(e))return this.cmsProviderCache.get(e);const t={method:"GET",headers:{}},i=yield(0,A.w)((()=>(0,r.mG)(this,void 0,void 0,(function*(){const i=new URL(`${o.ZG.CMSListServiceUrl}${e}${this.getContentServiceUrlBase().search}`,`${this.getContentServiceUrlBase()}`),n=yield fetch(i.toString(),t);if(n.ok)return n.json();I.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Invalid response from CMS. status: ${n.status}, statusText: ${n.statusText}, url: ${n.url}`))}))),"getProviderName");if(!i)return void I.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Invalid response.json(), cmsId: ${e}`));const n=i;return n?(this.cmsProviderCache.set(e,n.displayName),n.displayName):void I.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Failed to parse JSON response, cmsId: ${e}`))}catch(t){return void I.M0.sendAppErrorEvent((0,c.Tr)(d.Cfk,"Get CMSAd content failed",`Error while fetching Provider name  ${t}, cmsId: ${e}`))}}))}getContentServiceUrlBase(){let e=T.jG.ContentServiceUrlBase;return e&&!e.toString().includes("localhost")||(e=new URL(o.Lr.DefaultContentServiceBaseUrl)),e}}var E=i(14547),O=i(44563),M=i(73252),x=i(16908),D=i(92773),R=i(75384),L=i(33379),F=i(59049),N=i(27003);class B{constructor(e,t,i){this.adTemplateConfig=e,this.adServiceConfig=t,this.adBeaconServiceConfig=i,this.beaconService=new S.A(this.adBeaconServiceConfig),this.cmsService=new P,this.samService=new E.B(this.adServiceConfig),this.templateService=new O.E,this.cmsNativeAdsItemsMap=new Map,this.cmsRetryCount=0,this.backfillIndex=0,this.cmsAdsCounter=0,this.callbackFnPlacementList=[],this.callbackList=[]}resetNativeAdService(){this.backfillIndex=0,this.cmsAdsCounter=0,this.callbackFnPlacementList.length=0,this.callbackList.length=0,this.samService.clearPreviousInfo()}fetchNativeAds(e,t){var i;return(0,r.mG)(this,void 0,void 0,(function*(){if(!e||!e.placements||0===e.placements.length)return void I.M0.sendAppErrorEvent((0,c.Tr)(d.Zmj,"Fetch NativeAd failed","No placements found in the request"));if(e.locale||(e.locale=M.Al.Locale),"ru-xl"===e.locale&&(e.locale="en-xl"),!e.locale)return void I.M0.sendAppErrorEvent((0,c.Tr)(d.Zmj,"Fetch NativeAd failed",`No locale found, headData.Locale: ${M.Al.Locale}, adRequest.locale: ${e.locale}`));const n=this.buildAdResponse(e),r=this.samService.fetchSAMAds(e,!1,!0===(null===(i=this.adTemplateConfig)||void 0===i?void 0:i.useOpenRtb),null,null,t),s=e.locale,a=o.Wi[s];if(!this.cmsItems){const e=yield this.cmsService.getCMSList(a,s);e&&(this.cmsItems=e.items)}const l=yield r;return this.updateAdResponse(n,this.cmsItems,a,l),n}))}updateAdResponse(e,t,i,n){const r=!t||0==t.length,o=!n||!n.placements||0==n.placements.length;if(r&&o)return void I.M0.sendAppErrorEvent((0,c.Tr)(d.v73,"Fetch NativeAd failed",`Unable to retrieve backfill list id: ${i} and SAM response`));r&&I.M0.sendAppErrorEvent((0,c.Tr)(d.v73,"Unable to retrieve backfill list",`Backfill list id: ${i}`));const a=this.mapSAMPlacements(n);return e.pageViewId=n&&n.metaData&&n.metaData.pageViewId,e.placements.forEach((i=>{const n=i.region+i.regionIndex,o=a.get(n);if(o&&o.items&&o.items.length>0){o.items.forEach((e=>{const t={title:e.title,description:e.description,destinationUrl:e.url,imageUrl:e.imageUrl,providerName:e.sourceName,adChoiceIconUrl:e.adChoicesUrl,imageHeight:e.imageHeight,imageWidth:e.imageWidth,clickBeacons:e.clickBeacons,uniqueId:e.uniqueId,feedbackUrl:(0,y.Yf)(e.clickBeacons),verificationParameters:e.verificationParameters};B.updateAssetDataFields(t,e.assets),i.items.push(t)})),i.privacyUrl=o.privacyUrl,i.adServedUrls=o.adServedUrls,i.jsTrackerUrls=o.jsTrackerUrls,i.visibilityUrls=o.visibilityUrls,i.beaconsJson=o.beaconsJson,i.bingTrackerUrls=o.bingTrackerUrls,i.beaconsSupportHttpPOST=o.beaconsSupportHttpPOST,i.geminiViewabilityDataJson=o.geminiViewabilityDataJson,this.beaconService.sendBeaconForAdServed({beaconsJson:o.beaconsJson,beaconsSupportHttpPOST:o.beaconsSupportHttpPOST}),this.beaconService.fireJSTrackers(o.beaconsJson,e.shouldUseWindowVisibilityTrackingForXandr);const t=!0===M.Al.IsPrerender?performance.now()-(0,l.TZ)(u.DB):performance.now();(0,l.su)(s.q.TimeToServeAd,t)}else if(r)I.M0.sendAppErrorEvent((0,c.Tr)(d.m9g,"Unable to backfill invalid sam placement",`Placement key: ${n}`));else{const e=this.backfillIndex++%t.length,n=t[e],r={title:n.title,destinationUrl:n.url,imageUrl:this.updateImageUrl(i,n.imageUrl),providerName:n.provider?n.provider.name:""};i.items.push(r),i.privacyUrl=n.privacyUrl}this.updateTemplate(i)})),e}updateTemplate(e){var t;(null===(t=e.items)||void 0===t?void 0:t.length)>0&&this.templateService.updateTemplate(e,this.adTemplateConfig)}addToCallbackList(e){e&&e.length>0&&this.callbackList.push(...e)}fetchSamAds(e,t=!1,i,n){var o,s;return(0,r.mG)(this,void 0,void 0,(function*(){if(!e||!e.placements||0===e.placements.length)return void I.M0.sendAppErrorEvent((0,c.Tr)(d.Zmj,"Fetch NativeAd failed","No placements found in the request"));if(!(0,L.N)()&&this.adServiceConfig.disableAdsSSR)return void I.M0.sendAppErrorEvent((0,c.Tr)(d.Zmj,"Fetch NativeAd failed SSR","Should not call fetchSamAds in render-service if AdsSSR is not enabled"));if(e.locale||(e.locale=M.Al.Locale),"ru-xl"===e.locale&&(e.locale="en-xl"),!e.locale)return void I.M0.sendAppErrorEvent((0,c.Tr)(d.Zmj,"Fetch NativeAd failed",`No locale found, headData.Locale: ${M.Al.Locale}, adRequest.locale: ${e.locale}`));if(this.addToCallbackList(i),this.locale=e.locale,(0,L.N)()&&t&&window.ntpSSRData&&!this.adServiceConfig.disableAdsSSR){if(window.ntpSSRData.samAd)return window.ntpSSRData.samAd;I.M0.sendAppErrorEvent((0,c.Tr)(d.Zmj,"Fetch NativeAd failed SSR","No sam ad found in SSR Data"))}const r=this.samService.fetchSAMAds(e,t,!0===(null===(o=this.adTemplateConfig)||void 0===o?void 0:o.useOpenRtb),null===(s=this.adTemplateConfig)||void 0===s?void 0:s.msxServiceUrl,n),a=this.buildAdResponse(e),l=yield r;return(0,L.N)()||N.Gq.get("__nativeAdDataCache__",(()=>new F.v("nativeAdDataCache"))).set("native-ad-data",(0,g.Z)({placeHolderResponse:a,samResponse:l})),{placeHolderResponse:a,samResponse:l}}))}fetchCmsAds(e,t,i){return(0,r.mG)(this,void 0,void 0,(function*(){if(!e||!e.placements||0===e.placements.length)return void I.M0.sendAppErrorEvent((0,c.Tr)(d.Zmj,"Fetch NativeAd failed","No placements found in the request"));let n=M.Al.Locale;if("ru-xl"===n&&(n="en-xl"),!this.cmsNativeAdsItemsMap.has(t)){const e=yield this.cmsService.getCMSList(t,n);e&&e.id&&e.items&&this.cmsNativeAdsItemsMap.set(t,e.items)}const r=this.buildAdResponse(e),o=this.cmsNativeAdsItemsMap.has(t)?this.cmsNativeAdsItemsMap.get(t):[];for(const e of r.placements){const t=i.shift();let r,s;if(t){let e=parseInt(t,10);if(e)e=Math.max(e-1,0),e=e<o.length?e:e%o.length,r=o[e];else{if(!this.cmsNativeAdsItemsMap.has(t)){const e=yield this.cmsService.getCMSList(t,n);e&&e.id&&e.items&&this.cmsNativeAdsItemsMap.set(t,e.items)}const e=this.cmsNativeAdsItemsMap.has(t)?this.cmsNativeAdsItemsMap.get(t):[];r=(0,h.Z)(e)[0],r||(r=o[this.cmsAdsCounter%o.length])}}else r=o[this.cmsAdsCounter%o.length];r&&(s={title:r.title,destinationUrl:r.url,imageUrl:this.updateImageUrl(e,r.imageUrl),providerName:r.provider?r.provider.name:""},e.items.push(s),e.privacyUrl=r.privacyUrl),this.updateTemplate(e),this.cmsAdsCounter++}return r}))}updateSamAdResponse(e,t,i){const n=this.cmsItems,r=this.mapSAMPlacements(t),o=!n||0==n.length;return e.pageViewId=t&&t.metaData&&t.metaData.pageViewId,e.placements.forEach((e=>{const t=e.region+e.regionIndex,a=r.get(t);if(a&&a.items&&a.items.length>0){a.items.forEach((t=>{const i={title:t.title,adSelectionReason:t.adSelectionReason,description:t.description,destinationUrl:t.url,providerName:t.sourceName,adChoiceIconUrl:t.adChoicesUrl,imageUrl:t.imageUrl,imageHeight:t.imageHeight,imageWidth:t.imageWidth,images:t.images,clickBeacons:t.clickBeacons,uniqueId:t.uniqueId,beaconsJson:t.beaconsJson,feedbackUrl:(0,y.Yf)(t.clickBeacons),originalImageWidth:t.originalImageWidth,originalImageHeight:t.originalImageHeight,verificationParameters:t.verificationParameters,ext:t.ext};B.updateAssetVideoField(i,t.assets),B.updateAssetDataFields(i,t.assets),e.items.push(i)}));const t=(0,x.dQ)(e,0);e.videoViewabilityData=t?t.ViewabilityProps:null,e.privacyUrl=a.privacyUrl,e.adServedUrls=a.adServedUrls,e.jsTrackerUrls=a.jsTrackerUrls,e.visibilityUrls=a.visibilityUrls,e.beaconsJson=a.beaconsJson,e.bingTrackerUrls=a.bingTrackerUrls,e.beaconsSupportHttpPOST=a.beaconsSupportHttpPOST,e.geminiViewabilityDataJson=a.geminiViewabilityDataJson,e.providerId=a.providerId;const n=(0,b.v0)(M.Al.IsPrerender&&!i);i?((0,l.su)(s.q.TimeToServeAdBackground,n),(0,R.lr)().then((()=>{const e=(0,p.Ou)();(0,l.su)(s.q.TimeToServeAd,e.TTPR)}))):(0,l.su)(s.q.TimeToServeAd,n)}else if(o)this.handleCmsStandyPlacement(e);else{const t=this.backfillIndex++%n.length,i=n[t],r={title:i.title,destinationUrl:i.url,imageUrl:this.updateImageUrl(e,i.imageUrl),providerName:i.provider?i.provider.name:""};e.items.push(r),e.privacyUrl=i.privacyUrl,e.isBackfill=!0}this.updateTemplate(e)})),e}handleCmsStandyPlacement(e){if(this.cmsItems){const t=this.cmsItems;for(const i of this.callbackFnPlacementList){const n=t[this.backfillIndex++%t.length];if(n){const t={title:n.title,destinationUrl:n.url,imageUrl:this.updateImageUrl(e,n.imageUrl),providerName:n.provider?n.provider.name:""};i.items.push(t),i.privacyUrl=n.privacyUrl,i.isBackfill=!0,this.updateTemplate(i)}}this.callbackList.forEach((e=>{e(this)})),this.callbackList=[],this.callbackFnPlacementList=[]}else e&&this.callbackFnPlacementList.push(e)}loadCmsBackFillList(){let e=this.locale?this.locale:M.Al.Locale;"ru-xl"===e&&(e="en-xl");const t=o.Wi[e];t&&!this.cmsItems&&this.cmsService.getCMSList(t,e).then((e=>{e?(this.cmsItems=e.items,this.handleCmsStandyPlacement()):++this.cmsRetryCount<10&&this.loadCmsBackFillList()}))}tryGetCmsList(e=0){return(0,r.mG)(this,void 0,void 0,(function*(){let t=this.locale?this.locale:M.Al.Locale;"ru-xl"===t&&(t="en-xl");const i=o.Wi[t];if(!i||!t)return;const n=yield this.cmsService.getCMSList(i,t);return n||(e<5?yield this.tryGetCmsList(++e):void 0)}))}mapSAMPlacements(e){const t=new Map;return e&&e.placements&&e.placements.forEach((e=>{e.region&&e.index&&t.set(e.region+e.index,e)})),t}buildAdResponse(e){const t=[];e.placements.forEach((e=>{e.region&&e.indices&&e.indices.length&&e.indices.forEach((i=>{const n={region:e.region,regionIndex:i,imageHeight:e.img&&e.img.h&&e.img.h.toString(),imageWidth:e.img&&e.img.w&&e.img.w.toString(),items:[]};t.push(n)}))}));return{placements:t,adLabelText:(0,y.En)(e.locale),isGreyAdsLabelEnabled:o.Eg.includes(e.locale),shouldUseWindowVisibilityTrackingForXandr:Boolean(e.shouldUseWindowVisibilityTrackingForXandr),privacyUrl:o.Lr.PrivacyUrl}}updateImageUrl(e,t){return e&&e.imageWidth&&e.imageHeight&&t?t.replace("w=624","w="+e.imageWidth).replace("h=350","h="+e.imageHeight):t}static updateAssetDataFields(e,t){const i=(0,m.Z)(t,((e,t)=>{var i,n,r,o,s;if(null==t?void 0:t.data){const i=(0,f.Z)(t,"data.type"),n=(0,v.Z)(a.aT,(e=>e===`data-${i}`));if(n)if(a.xs.includes(n)){const i=(0,f.Z)(t,"data.value")||"{}";e[n]=JSON.parse(i)}else e[n]=(0,f.Z)(t,"data.value")}else if(null==t?void 0:t.image){const c=(0,f.Z)(t,"image.type"),d=(0,v.Z)(a.aT,(e=>e===`image-${c}`));d&&(e[d]={w:null===(i=t.image)||void 0===i?void 0:i.w,h:null===(n=t.image)||void 0===n?void 0:n.h,url:null===(r=t.image)||void 0===r?void 0:r.url,alt:null===(o=t.image)||void 0===o?void 0:o.alt,ext:null===(s=t.image)||void 0===s?void 0:s.ext})}return e}),{});e.assets=i}static updateAssetVideoField(e,t){t&&t.length>0&&t.forEach((t=>{const i=(0,f.Z)(t,"video.vasttag");i&&(e.video=i)}))}getAdTagStyleByLocale(e){let t=null!=e?e:M.Al.Locale;return"ru-xl"===t&&(t="en-xl"),{adLabelText:(0,y.En)(t),isGreyAdsLabelEnabled:o.Eg.includes(t)}}}let j;(0,r.gn)([(0,D.Et)(d.rEw,"fetchNativeAds")],B.prototype,"fetchNativeAds",null),(0,r.gn)([(0,D.Et)(d.rEw,"updateAdResponse")],B.prototype,"updateAdResponse",null),(0,r.gn)([(0,D.Et)(d.rEw,"updateTemplate")],B.prototype,"updateTemplate",null),(0,r.gn)([(0,D.Et)(d.rEw,"fetchSamAds")],B.prototype,"fetchSamAds",null),(0,r.gn)([(0,D.Et)(d.rEw,"fetchCmsAds")],B.prototype,"fetchCmsAds",null),(0,r.gn)([(0,D.Et)(d.rEw,"updateSamAdResponse")],B.prototype,"updateSamAdResponse",null),(0,r.gn)([(0,D.Et)(d.rEw,"handleCmsStandyPlacement")],B.prototype,"handleCmsStandyPlacement",null),(0,r.gn)([(0,D.Et)(d.rEw,"loadCmsBackFillList")],B.prototype,"loadCmsBackFillList",null),(0,r.gn)([(0,D.Et)(d.rEw,"tryGetCmsList")],B.prototype,"tryGetCmsList",null),(0,r.gn)([(0,D.Et)(d.rEw,"mapSAMPlacements")],B.prototype,"mapSAMPlacements",null),(0,r.gn)([(0,D.Et)(d.rEw,"buildAdResponse")],B.prototype,"buildAdResponse",null),(0,r.gn)([(0,D.Et)(d.rEw,"updateImageUrl")],B.prototype,"updateImageUrl",null),(0,r.gn)([(0,D.Et)(d.rEw,"getAdTagStyleByLocale")],B.prototype,"getAdTagStyleByLocale",null),(0,r.gn)([(0,D.Et)(d.rEw,"updateAssetDataFields")],B,"updateAssetDataFields",null),(0,r.gn)([(0,D.Et)(d.rEw,"updateAssetVideoField")],B,"updateAssetVideoField",null);const $=(0,D.Et)(d.Evv,"getNativeAdService")(((e,t)=>(j||(j=new B(e||{},t)),j.resetNativeAdService(),j)))},14547:function(e,t,i){"use strict";i.d(t,{B:function(){return se}});var n,r,o,s,a,c,d,l=i(33940),u=i(68364),p=i(26415),g=i(19388),h=i(62676),m=i(89696),f=i(22704),v=i(84169),y=i(28973),b=i(73252),S=i(2040),C=i(32050),w=i(67462);!function(e){e.AR="AR",e.GA="GA",e.VI="VI",e.EDGECHRNTP="edgechrntp",e.EDGECHRDHP="edgechrdhp",e.MSNEWS="msnews",e.FirstParty="firstparty",e.SAA="saa",e.SAI="sai",e.VerticalLandingPage="vlp",e.WINVLP="winvlp",e.WINAR="winar",e.WINGA="winga",e.WINVI="winvi",e.WEBCOMPAR="webcompar",e.WEBCOMPGA="webcompga",e.WEBCOMPVI="webcompvi",e.WATCH="watch",e.WINWEB="Winweb"}(n||(n={})),function(e){e[e.Sponsored=1]="Sponsored",e[e.Description=2]="Description",e[e.Rating=3]="Rating",e[e.Likes=4]="Likes",e[e.Downloads=5]="Downloads",e[e.Price=6]="Price",e[e.Saleprice=7]="Saleprice",e[e.Phone=8]="Phone",e[e.Address=9]="Address",e[e.Description2=10]="Description2",e[e.DisplayUrl=11]="DisplayUrl",e[e.CTAText=12]="CTAText",e[e.InstallmentPrice=500]="InstallmentPrice",e[e.PriceDrop=501]="PriceDrop",e[e.FreeShipping=502]="FreeShipping",e[e.TopViewed=503]="TopViewed",e[e.Sold=504]="Sold",e[e.SpecialOffer=505]="SpecialOffer",e[e.EliteBadge=506]="EliteBadge",e[e.Condition=507]="Condition",e[e.LIA=508]="LIA",e[e.CurbsidePickup=509]="CurbsidePickup",e[e.Review=510]="Review",e[e.ShortTitle=511]="ShortTitle",e[e.ReturnPolicy=512]="ReturnPolicy",e[e.DisclaimerText=513]="DisclaimerText",e[e.AdSelectionReason=514]="AdSelectionReason",e[e.Discount=600]="Discount"}(r||(r={})),function(e){e[e.Mobile=1]="Mobile",e[e.PC=2]="PC"}(o||(o={})),function(e){e[e.Large=3]="Large",e[e.MultipleImages=600]="MultipleImages"}(s||(s={})),function(e){e[e.TrackingAllowed=0]="TrackingAllowed",e[e.NoTrackingAllowed=1]="NoTrackingAllowed"}(a||(a={})),function(e){e[e.Impression=1]="Impression",e[e.Viewed=2]="Viewed"}(c||(c={})),function(e){e[e.Image=1]="Image",e[e.JavaScript=2]="JavaScript"}(d||(d={}));var T=i(81765),k=i(53076),A=i(12108),I=i(15213),P=i(65135),E=i(17615),O=i(18769),M=i(16257),x=i(93450),D=i(37574),R=i(62661),L=i(67893),F=i(65337);const N=(e,t,i,n,r,o,s,a)=>(0,l.mG)(void 0,void 0,void 0,(function*(){var e;if(r){const c=r.serverTiming&&(null===(e=r.serverTiming[0])||void 0===e?void 0:e.duration);if(c&&s(I.q.AdServerLatency,c),n>-1){const e=(0,m.v0)(t&&!i,r.requestStart),c=e-n;s(I.q.RequestSent,c>0?c:0),o||a(i?I.q.TimeToRequestAdBackground:I.q.TimeToRequestAd,0,e)}s(I.q.TimeToAdResponse,(0,m.v0)(t&&!i,r.responseEnd)),r.isApproximate||a(I.q.AdFetched,r.fetchStart,r.responseEnd),s(I.q.ApiDuration,null==r?void 0:r.duration)}}));function B(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)}))}var j=i(19809),$=i(87298),U=i(33379),H=i(36585),_=i(66588);var W,z=i(27003),G=i(99590),V=i(49972);!function(e){e.AdReturned="adAvailable",e.AdNotReturned="AdNotReturned"}(W||(W={}));class q{constructor(){this.groupedAdRequests={},this.adRequestsInfoById={},this.initialized=!1}initialize(e){this.initialized||(this.sdkWrapper=e,this.sdkWrapper.addEventListener(W.AdReturned,(e=>this.handleUpdate(e,!0))),this.sdkWrapper.addEventListener(W.AdNotReturned,(e=>this.handleUpdate(e,!1))),this.initialized=!0)}tryRegisterPlacements(e,t,i){const n=this.findValidPlacements(e);if(0===n.length)return!1;const r=[];let o=0;n.forEach((e=>{const{targetId:t}=e||{};o+=1,r.push(t)}));const s=B();return this.groupedAdRequests[s]={targetIds:r,pendingCount:o,onCompleteAll:t},n.forEach((e=>{const{targetId:t}=e;this.adRequestsInfoById[t]=Object.assign(Object.assign({},e),{_groupKey:s,_onAvailable:i})})),!0}unregisterPlacements(e){const t=this.findValidPlacements(e);if(0===t.length)return null;let i;return t.forEach((e=>{const{targetId:t}=e;this.sdkWrapper&&this.sdkWrapper.removeAllEventListeners(t),this.adRequestsInfoById[t]._cancelled=!0,i||(i=this.adRequestsInfoById[e.targetId]._groupKey)})),this.collectGroupResults(i)}findValidPlacements(e){return e&&0!==e.length?e.filter((e=>this.validatePlacement(e))):[]}validatePlacement(e){const{targetId:t}=e||{};return!!t||(P.M0.sendAppErrorEvent(Object.assign(Object.assign({},p.mNV.XandrMissingTargetId),{message:"Missing targetId in placement info"})),!1)}collectGroupResults(e){if(!e)return null;const t=this.groupedAdRequests[e];if(!t||!t.targetIds||0==t.targetIds.length)return null;const i=[];return t.targetIds.forEach((e=>{const t=this.adRequestsInfoById[e];if(t&&t._available){const e={};for(const i in t)"_"!==i[0]&&(e[i]=t[i]);i.push(e)}})),0===i.length&&P.M0.sendAppErrorEvent((0,u.Tr)(p.mNV.XandrNativeGetResponseEmpty,"No placements returned from Xandr SDK per request")),{data:i}}handleUpdate(e,t){const i=e.targetId||e.divid;if(!i||!this.adRequestsInfoById[i])return;const{_groupKey:n,_onAvailable:r,_cancelled:o}=this.adRequestsInfoById[i];if(o)return;if(t){const t=r&&r(e);this.adRequestsInfoById[i]=Object.assign(Object.assign(Object.assign({},this.adRequestsInfoById[i]),t||{}),{_available:!0}),this.sdkWrapper.fireServeBeacon(e)}const s=this.groupedAdRequests[n];s.pendingCount-=1,0===s.pendingCount&&s.onCompleteAll(this.collectGroupResults(n))}}var Z=i(12884);var K;!function(e){e.AdRequested="adRequested",e.AdReturned="adAvailable",e.AdRefreshed="adLoaded",e.AdError="adError",e.AdRequestFailure="adRequestFailure",e.AdCollapse="adCollapse",e.AdNoBid="adNoBid"}(K||(K={}));const Q=new class{constructor(){this.fetchCalled=!1,this.baseUrl="https://api.msn.com/segments/recoitems/LiveRampObjectStoreCaller",this.oneServiceOcid="peregrine",this.noEnvelopeIdConst="_"}fetchAndOutputEnvelopeId(){if(this.fetchCalled)return;this.fetchCalled=!0;if(!(0,w.ej)(T.yV.LiverampEnvelopeId)&&this.isCookieSetAllowed()){const e=this.fetchEnvelopeIdFromObjectStore();this.liverampCookieSetPromise=this.setCookie(T.yV.LiverampEnvelopeId,e)}}getEnvelopeIdFromCookie(){const e=(0,w.ej)(T.yV.LiverampEnvelopeId);return e===this.noEnvelopeIdConst?null:e}finishLiverampCookieSet(){return(0,l.mG)(this,void 0,void 0,(function*(){this.liverampCookieSetPromise&&(yield this.liverampCookieSetPromise)}))}fetchEnvelopeIdFromObjectStore(){return(0,l.mG)(this,void 0,void 0,(function*(){const e={method:"GET",headers:yield j.$.getOneServiceHeaders(),credentials:"include"},t=this.getServiceUrl();let i;try{i=yield(0,$.w)((()=>(0,l.mG)(this,void 0,void 0,(function*(){const i=yield fetch(t.href,e);if(200!=i.status)return 404==i.status||P.M0.sendAppErrorEvent(Object.assign(Object.assign({},p.mNV.UnexpectedOneServiceResponseError),{message:`Unexpected response from OneService call. Status: ${i.status}`})),null;try{const e=yield i.text();let t=JSON.parse(e)[0].data;return'"'===t.charAt(0)&&'"'===t.charAt(t.length-1)&&(t=t.substr(1,t.length-2)),t}catch(e){return P.M0.sendAppErrorEvent(Object.assign(Object.assign({},p.mNV.UnexpectedOneServiceResponseError),{message:"OneService response is not in expected format."})),null}}))),"liverampObjectStoreCall")}catch(e){return P.M0.sendAppErrorEvent(Object.assign(Object.assign({},p.mNV.UnexpectedOneServiceResponseError),{message:`Error sending OneService request. Error: ${e}`})),null}return i}))}setCookie(e,t){return(0,l.mG)(this,void 0,void 0,(function*(){let i=yield t;i||(i=this.noEnvelopeIdConst);(0,w.sq)(e,i,1,".msn.com","/",!0)||P.M0.sendAppErrorEvent(Object.assign(Object.assign({},p.mNV.LiverampCookieSetError),{message:"Unable to set LiverampEnvelopeId Cookie."}))}))}getServiceUrl(){const e=new URL(this.baseUrl);return[...j.$.getCommonParams2(this.oneServiceOcid,!0)].forEach((t=>{t.value&&e.searchParams.set(t.key,t.value)})),e.searchParams.set("ocid",this.oneServiceOcid),e}isCookieSetAllowed(){try{return(0,w.sq)(T.yV.LiverampEnvelopeId,this.noEnvelopeIdConst,1,".msn.com","/",!0)}catch(e){return!1}}};class J{constructor(){this.sdkUrl="https://acdn.adnxs.com/ast/ast.js",this.sdkPending=!1,this.externalUid=(0,w.jG)(),this.apnMemberId=this.getApnMemberId()}static getInstance(){return z.Gq.get("__XandrAdSdkWrapper__",(()=>new J))}loadSdkAsync(){return(0,l.mG)(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{if(!(0,U.N)())return P.M0.sendAppErrorEvent(Object.assign(Object.assign({},p.mNV.XandrLoadError),{message:"unexpected call to loadSdkAsync on server side"})),void t(new Error("unexpected call to loadSdkAsync on server side"));if(globalThis.apntag)return e();if(this.sdkPending)return void window.addEventListener("xandrAdSdkLoadedCustomEvent",(function(){e()}));const i=(0,Z.b0)(this.sdkUrl);this.sdkPending=!0,i.onload=()=>{const t=new CustomEvent("xandrAdSdkLoadedCustomEvent");window.dispatchEvent(t),e()},i.onerror=e=>{this.sdkPending=!1,P.M0.sendAppErrorEvent(Object.assign(Object.assign({},p.mNV.XandrLoadError),{message:JSON.stringify(e)})),t(e)},document.body.appendChild(i)}))}))}tryBuildPageOptions(e){var t;if(!globalThis.apntag){const e="Xandr SDK is not loaded";return P.M0.sendAppErrorEvent(Object.assign(Object.assign({},p.mNV.XandrLoadError),{message:e})),!1}const{prid:i,rid:n,pageType:r,locale:o,verticalName:s,audienceMode:a,ocid:c}=e||{};if(globalThis.apntag.debug=!0,this.pageType||(this.pageType=r||(null===(t=null===b.Al||void 0===b.Al?void 0:b.Al.ClientSettings)||void 0===t?void 0:t.pagetype)),!this.providerId){if(!i){this.providerId="EMPTYPIDAN";const e="ProviderId is empty for page type: "+this.pageType;return P.M0.sendAppErrorEvent(Object.assign(Object.assign({},p.mNV.XandrEmptyProvider),{message:e})),!1}this.providerId=i}const d=(new Date).getTime()+"|"+(9*Math.random()+1)*Math.pow(10,17);this.pageOptions=this.pageOptions||{member:this.apnMemberId,user:{externalUid:this.externalUid,externalImpId:d,userIds:[{type:"extendedIDs",eids:[{id:this.externalUid,source:"msft_muid"}]}]},keywords:{page_type:this.pageType,rid:n,provider_id:this.providerId,user_locale:o,vertical:s,audience_mode:a,ocid:c}};const l=Q.getEnvelopeIdFromCookie();return l&&(this.pageOptions.user.userIds=[{type:"liveramp",id:l}]),(0,Z.zw)().startsWith("localhost.")&&(this.pageOptions.test=!0),!0}clearEventHandlers(e){globalThis.apntag.offEvent(K.AdRequested,e),globalThis.apntag.offEvent(K.AdReturned,e),globalThis.apntag.offEvent(K.AdRefreshed,e),globalThis.apntag.offEvent(K.AdError,e),globalThis.apntag.offEvent(K.AdRequestFailure,e),globalThis.apntag.offEvent(K.AdCollapse,e),globalThis.apntag.offEvent(K.AdNoBid,e)}getApnMemberId(){return["en-au","en-nz"].includes(v.jG.CurrentMarket)?1705:280}}const X=(0,G.h)(J);var Y=i(33954);const ee=(e,t,i,n)=>{if(!t||!i)return;let r=5;t.divid=t.divid||t.divName,t.msnSdkName=n;const o=setInterval((()=>{if(i[e]&&i[e].length){for(let n=0;n<i[e].length;n++)i[e][n](t);clearInterval(o)}else r--||clearInterval(o)}),500)};class te{constructor(){this.userOptOutCookie="TOptOut",this.optoutStatus=(0,w.ej)(this.userOptOutCookie),this.events=[]}static getInstance(){return z.Gq.get("__NativeAdXandrWrapper__",(()=>new te))}loadSdkAsync(){return(0,l.mG)(this,void 0,void 0,(function*(){return X.loadSdkAsync().then((()=>!0)).catch((()=>!1))}))}tryConfigPlacements(e,t){return!!X.tryBuildPageOptions(t)&&(this.providerId=X.providerId,this.pageOptions=X.pageOptions,this.apnMemberId=X.apnMemberId,globalThis.apntag.setPageOpts(this.pageOptions),e.forEach((e=>{X.clearEventHandlers(e.targetId);const i=this.buildNativeAdPlacement(e,t);globalThis.apntag.defineTag(i),this.attachEventHandlers(e.targetId)})),!0)}startAdServerCalls(){globalThis.apntag.loadTags()}fireServeBeacon(e){globalThis.apntag.fireImpressionTrackers(e)}attachClickBeacon(e,t){globalThis.apntag.attachClickTrackers(e,t)}addEventListener(e,t){((e,t,i)=>{e&&"function"==typeof t&&i&&(Y.k.log(`DisplayAd: addEventListener eventName: ${e} callback: ${t} events: ${i}`),i[e]&&i[e][0].toString()!=t.toString()?i[e].push(t):i[e]=[t])})(e,t,this.events)}removeAllEventListeners(e){X.clearEventHandlers(e)}buildNativeAdPlacement(e,t){var i;this.countryCode||(this.countryCode=(null===(i=null===v.jG||void 0===v.jG?void 0:v.jG.LocaleContentMarket)||void 0===i?void 0:i.market)||"CO");const n=this.getPlacementTagCode(e,t),r={targetId:e.targetId,member:this.apnMemberId,invCode:n,native:{title:{required:!0,max_length:140},image:{required:!0,sizes:[{width:e.img.w,height:e.img.h}]},sponsoredBy:{required:!0},clickUrl:{required:!0},privacySupported:!0},extInvCode:this.countryCode,allowSmallerSizes:!1,nobidIfUnsold:(!1,!0),trafficSourceCode:"tg:"+n+";p:"+this.providerId+";r:"+t.rid,keywords:{rid:e.rid,provider_id:this.providerId,optout:this.optoutStatus,flight:e.flightKeywords?Object.keys(e.flightKeywords):[]}};return r}getPlacementTagCode(e,t){return`${t.pageType}-${e.region}-${e.regionIndex}`}attachEventHandlers(e){const t=this.events;globalThis.apntag.onEvent(K.AdRequested,e,(()=>{})),globalThis.apntag.onEvent(K.AdReturned,e,(e=>{ee(W.AdReturned,e,t,"xandr")})),globalThis.apntag.onEvent(K.AdError,e,(e=>{this.adNotReturned(e,t)})),globalThis.apntag.onEvent(K.AdRequestFailure,e,(e=>{this.adNotReturned(e,t)})),globalThis.apntag.onEvent(K.AdNoBid,e,(e=>{this.adNotReturned(e,t)}))}adNotReturned(e,t){ee(W.AdNotReturned,e,t,"xandr")}}const ie=(0,G.h)(te);class ne{static getInstance(){return z.Gq.get("__NativeAdSdkService__",(()=>new ne))}fetchAds(e,t){return(0,l.mG)(this,void 0,void 0,(function*(){return e&&e.placements&&0!==e.placements.length?ie.loadSdkAsync().then((i=>{if(!i)return null;const n=this.buildPlacementsToFetch(e,t);let r;if(this.tryRegisterPlacementsToEventHub(n,((...e)=>r(...e)))&&ie.tryConfigPlacements(n,t)){const e=!0===b.Al.IsPrerender?performance.now()-(0,g.TZ)(h.DB):performance.now();(0,g.su)(I.q.RequestInitiated,e),ie.startAdServerCalls();const t=this.calculateRequestTimeout();return(o=t,s=new Promise((e=>r=e)),(0,l.mG)(void 0,void 0,void 0,(function*(){const e=(0,_.rh)(o);return Promise.race([s,e])}))).then((e=>{if(!e){const e=this.eventHub.unregisterPlacements(n),i=(null==e?void 0:e.data)||[],r=n.filter((e=>!i.find((t=>t.targetId===e.targetId)))).map((e=>e.targetId));return P.M0.sendAppErrorEvent((0,u.Tr)(p.mNV.XandrNativeGetResponseTimeout,`Timeout to fetch native ads from Xandr SDK within ${t}ms`,`missing placements: (${r.join(",")})`)),this.formatAdRespons(e)}return this.formatAdRespons(e)}))}var o,s;return null})).catch((e=>(P.M0.sendAppErrorEvent((0,u.Tr)(p.mNV.XandrUnexpectedError,"Error while fetch native ads from Xandr SDK",`fetchAds reject: ${(0,V.n)(e)}`)),null))):(P.M0.sendAppErrorEvent((0,u.Tr)(p.mNV.XandrUnexpectedError,"Empty placements in ad request")),Promise.resolve(null))}))}formatAdRespons(e){return{placements:(null==e?void 0:e.data)||[]}}buildPlacementsToFetch(e,t){const i=[];return e.placements.forEach((n=>{const{indices:r,img:o,region:s,adContainerIds:a}=n;r&&r.length&&a&&a.length&&r.forEach(((n,r)=>{i.push({region:s,regionIndex:n,targetId:a[r],img:o,rid:t.rid,flightKeywords:e.xandrFlightKeywords,options:{rid:t.rid,prid:t.prid},locale:e.locale})}))})),i}tryRegisterPlacementsToEventHub(e,t){this.eventHub||(this.eventHub=new q);const i=this.buildPlacementsRegisteredToEventHub(e);return this.eventHub.initialize(ie),this.eventHub.tryRegisterPlacements(i,t,this.calculateUpdates)}buildPlacementsRegisteredToEventHub(e){const t=[];return e.forEach((e=>{t.push({targetId:e.targetId,region:e.region,index:e.regionIndex})})),t}calculateUpdates(e){return(e=>{var t,i,n;const r=null==e?void 0:e.native;return{imageWidth:null===(t=null==r?void 0:r.image)||void 0===t?void 0:t.width,imageHeight:null===(i=null==r?void 0:r.image)||void 0===i?void 0:i.height,items:[{url:null==r?void 0:r.clickUrl,sourceName:null==r?void 0:r.sponsoredBy,title:null==r?void 0:r.title,imageUrl:null===(n=null==r?void 0:r.image)||void 0===n?void 0:n.url,uniqueId:null==e?void 0:e.targetId,adChoicesUrl:null==r?void 0:r.privacyLink,clickBeacons:(null==r?void 0:r.clickTrackers)&&JSON.stringify({tcb:r.clickTrackers})}],privacyUrl:(o=null==e?void 0:e.buyerMemberId,12085===o?"https://account.microsoft.com/privacy/ad-settings":"https://monetize.xandr.com/privacy-center/captcha?next_page=/privacy-center/delete"),beaconsJson:JSON.stringify({e:!0})};var o})(e)}calculateRequestTimeout(){return T.il.Timeout}}const re=(0,G.h)(ne);let oe=!0;class se{constructor(e){this.config=e,this.riverNativeAdCount=0,this.reservedRiverNativeAdCount=0,this.dualWideRiverNativeAdCount=0,this.halfRiverNativeAdCount=0,this.beaconService=new O.A,this.cookieService=new M.N,this.ecasession=T.Lr.Ecasession;const t=x._.getInstance().rootReducer;if("edgeChromium"===v.jG.AppType){const e=t.connector(k.z.ChromiumPageSettings);e&&(this.anaheimPageLayout=e.getCurrentState().currentLayout)}const i=t.connector(k.z.SharedState);i&&i.getCurrentState().useHistory?(0,L.lY)().addSwitchListener(this.onPivotSwitch.bind(this),D.I.Monetization):(0,R.l)().addSwitchListener(this.onPivotSwitch.bind(this),D.I.Monetization)}get sourceUrl(){if(this._sourceUrl)return this._sourceUrl;this._sourceUrl=v.jG.HostPage.originalUrl;const e=v.jG.CurrentRequestTargetScope.pageType,t=v.jG.HostPage.verticalKey;if(e&&t){const i=e.toLowerCase();(i.indexOf(A.G.DHP)>-1||i.indexOf(A.G.NTP)>-1)&&(this._sourceUrl="https://"+v.jG.HostPage.hostName+"/"+t+"/"+e)}return this._sourceUrl}get pageType(){if(this._pageType)return this._pageType;const e=v.jG.CurrentRequestTargetScope.pageType,t=v.jG.CurrentRequestTargetScope.ocid;switch(v.jG.AppType){case"edgeChromium":this._pageType=n.EDGECHRNTP;break;case"views":if((0,y.wq)()&&["article","gallery"].includes(e)){const e=(0,H.v1)();this._pageType=e&&"iOS"===e.platform?n.SAI:n.SAA}else"article"===e?this._pageType=this.isWindowsViewsPage(t)?n.WINAR:n.WEBCOMPAR:"gallery"===e?this._pageType=this.isWindowsViewsPage(t)?n.WINGA:n.WEBCOMPGA:"video"===e&&(this._pageType=n.WATCH);break;case"sports":case"hub":this._pageType=n.VerticalLandingPage;break;case"windows":location.href.includes("feed/interest/following")?this._pageType=n.WINWEB:this._pageType=e;break;default:this._pageType=e}return this._pageType}fetchSAMAds(e,t=!1,i=!1,n=null,r,o){var s,a,c,d;return(0,l.mG)(this,void 0,void 0,(function*(){if(!e||!e.placements||e.placements.length<1)return void P.M0.sendAppErrorEvent((0,u.Tr)(p.rmC,"Invalid request to fetch native ads","No placements found in the request"));const l=e.pageType||this.pageType;if(!l)return void P.M0.sendAppErrorEvent((0,u.Tr)(p.rmC,"Invalid request to fetch native ads","No page type found"));const f="ru-xl"===e.locale?"en-xl":e.locale,y=null===(s=null===v.jG||void 0===v.jG?void 0:v.jG.HostPage)||void 0===s?void 0:s.verticalKey,S=null===(a=null===v.jG||void 0===v.jG?void 0:v.jG.CurrentRequestTargetScope)||void 0===a?void 0:a.audienceMode,C=null===(c=null===v.jG||void 0===v.jG?void 0:v.jG.CurrentRequestTargetScope)||void 0===c?void 0:c.ocid;if(e.useAdSdk)return re.fetchAds(e,{rid:this.getImpressionId(),prid:e.prid,pageType:l,locale:f,verticalName:y,audienceMode:S,ocid:C});this._isSuperAppPage=this.isSuperAppPage(l,e.appName),this._isChannelAppPage=this.isChannelAppPage(l,e.appName);const k=this.isNotMyFeed();oe=!1;const A=this.getImpressionId(),O=!this._isSuperAppPage&&this.cookieService.getBrowserOptoutStatus(),M=!this._isSuperAppPage&&(yield(0,E.UF)()),x=this.getMuid(e.muid),D=this.riverNativeAdCount,R=this.reservedRiverNativeAdCount,L=this.dualWideRiverNativeAdCount,N=this.halfRiverNativeAdCount,{anaheimColLayout:B}=e,j=!!window.__tcfapi;M||this._isSuperAppPage||!t||(this.ecasession=(0,w.ej)(T.yV.TaboolaSessionCookieName)||this.ecasession);const $=this._isSuperAppPage||this._isChannelAppPage||!(!b.Al.ClientSettings||!b.Al.ClientSettings.deviceFormFactor||"phone"!==b.Al.ClientSettings.deviceFormFactor);void 0===this.isAdBlock&&(this.config&&this.config.sendAdBlockDetection?this.isAdBlock=function(){if((0,F.$o)().supported){const e=(0,F.$o)().getObject("BT_AA_DETECTION",void 0);if(void 0!==e)return!1===e.acceptable}return!1}():this.isAdBlock=!1);const H={adRefreshVariant:null!==(d=e.adRefreshVariant)&&void 0!==d?d:"",locale:f,rid:(0,U.N)()?A:v.jG.ActivityIdLowerCaseNoHypens,partnerId:v.jG.CurrentRequestTargetScope.pageType,content:{sourceUrl:this.sourceUrl,pageType:l,previousReservedRiverNativeAdCount:R,previousRiverDualWideNativeAdCount:L,previousRiverHalfNativeAdCount:N,previousRiverNativeAdCount:D,verticalName:y,anaheimPageLayout:this.anaheimPageLayout,anaheimColLayout:B,isXfeed:k,audienceMode:S},user:{muid:x,browserOptOut:O,isAdblock:this.isAdBlock,gdpr:j},placements:this.getPlacements(e,l),extensions:this.getExtensions(this.lastResponseMetadata,this.ecasession),isCookieWallPresent:M,isPeregrine:!0,device:{isMobile:$}},_=this.config&&this.config.enablePrerenderAdsAuctionFlag&&(0,U.N)(),W=this.config&&this.config.enableSponsoredCollectionSSR&&!(0,U.N)();(_||W)&&(H.content.prerender=r?1:0);const z=(0,w.ej)(T.il.BCPCookieKey);"bingHomepage"===v.jG.AppType&&z&&(H.user.bcp=z),this._isSuperAppPage&&(H.app={adid:e.adid,anid:e.anid,muid:e.muid,sapphireid:e.sapphireid,version:e.clientVersion,bundle:e.packageName});const G=n||T.Lr.SamDomain,V=i?T.Lr.SamOpenRtbEndpoint:T.Lr.SamEndpoint,q=new URL(V,G),Z=i?this.createOpenRtbRequest(H):H,K=JSON.stringify(Z),Q=!0===b.Al.IsPrerender?performance.now()-(0,g.TZ)(h.DB):performance.now();return(0,U.N)()?((0,g.su)(I.q.RequestInitiated,Q),this.fetchSAMAdsCSR(K,f,x,q.href,l,Z,r,i,o)):((0,m.hf)(I.q.RequestInitiated,Q),this.fetchSAMAdsSSR(K,f,x,q.href,l,Z,r,i))}))}generateSourceUrl(){const e=v.jG.CurrentRequestTargetScope.pageType;let t=v.jG.HostPage.originalUrl;const i=v.jG.HostPage.verticalKey;if(e&&i){const n=e.toLowerCase();(n.indexOf(A.G.DHP)>-1||n.indexOf(A.G.NTP)>-1)&&(t="https://"+v.jG.HostPage.hostName+"/"+i+"/"+e)}return t}processAdResponse(e){if(200!==e.status)return 204===e.status?(P.M0.sendAppErrorEvent((0,u.Tr)(p.vvT,"No content received from SAMRTB Ajax",`Status: ${e.status}, StatusText: ${e.statusText}`)),this.config&&this.config.useEmptyPlacementsForNoContent?{placements:[]}:void 0):void P.M0.sendAppErrorEvent((0,u.Tr)(p.I2B,"Invalid response from SAMRTB Ajax",`Status: ${e.status}, StatusText: ${e.statusText}`));try{const t=JSON.parse(e.response);if(!t)return void P.M0.sendAppErrorEvent((0,u.Tr)(p.K8d,"Invalid json response from SAMRTB",`Status: ${e.status}, Invalid json: ${e.response}`));const i=t.metaData;return this.processMetaData(i),this.beaconService.fireRequestLevelBeacons(i.requestLevelBeaconUrls),(0,U.N)()||(0,m.hf)("samRTBResponseFinishedProcessing",(0,f.UE)()),t}catch(t){return void(0,u.OO)(t,p.ryt,"Failed to process SAMRTB response",`Status: ${e.status}, json: ${e.response}`)}}processOpenRtbAdResponse(e,t){if(200!==t.status)return 204===t.status?(P.M0.sendAppErrorEvent((0,u.Tr)(p.vvT,"No content received from SAMRTB Ajax",`Status: ${t.status}, StatusText: ${t.statusText}`)),this.config&&this.config.useEmptyPlacementsForNoContent?{placements:[]}:void 0):void P.M0.sendAppErrorEvent((0,u.Tr)(p.I2B,"Invalid response from SAMRTB Ajax",`Status: ${t.status}, StatusText: ${t.statusText}`));try{const i=JSON.parse(t.response);if(!i)return void P.M0.sendAppErrorEvent((0,u.Tr)(p.K8d,"Invalid json response from SAMRTB",`Status: ${t.status}, Invalid json: ${t.response}`));const n=this.convertOpenRtbResponseToNativeAdResponse(e,i),r=n.metaData;return this.processMetaData(r),this.beaconService.fireRequestLevelBeacons(r.requestLevelBeaconUrls),n}catch(e){return void(0,u.OO)(e,p.ryt,"Failed to process SAMRTB response",`Status: ${t.status}, json: ${t.response}`)}}createOpenRtbRequest(e){var t;const i={native:{assets:[{id:1,img:{type:s.Large}}]}},n=JSON.stringify(i);let r=1;const a=e.placements.flatMap((t=>t.indices.map((i=>({id:(r++).toString(),tagid:`${e.content.pageType}-${t.region}-${i}`,native:{request:n},ext:{msn:{index:i,region:t.region}}}))))),c={url:e.content.sourceUrl,ext:{locale:e.locale,msn:{pageType:e.content.pageType,verticalName:e.content.verticalName,anaheimPageLayout:e.content.anaheimPageLayout,isXfeed:e.content.isXfeed,audienceMode:e.content.audienceMode,isPeregrine:e.isPeregrine,previousReservedRiverNativeAdCount:e.content.previousReservedRiverNativeAdCount,previousRiverDualWideNativeAdCount:e.content.previousRiverDualWideNativeAdCount,previousRiverHalfNativeAdCount:e.content.previousRiverHalfNativeAdCount,previousRiverNativeAdCount:e.content.previousRiverNativeAdCount,partnerId:e.partnerId}}},d={id:T.Lr.PublisherId},l={id:B(),imp:a,user:{dnt:e.user.browserOptOut?1:0,ext:{anid:"",muid:null===(t=e.user)||void 0===t?void 0:t.muid,msn:{isCookieWallPresent:e.isCookieWallPresent,bcp:e.user.bcp}}},device:{devicetype:e.device.isMobile?o.Mobile:o.PC,ext:{isAdBlock:e.user.isAdblock}},ext:{sessionId:e.rid,admConfiguration:{useAdmObject:!0,useMultipleAdms:!0,maxAdmCount:999},msn:{adRefreshVariant:e.adRefreshVariant,metadata:e.extensions}}};return this._isSuperAppPage?l.app={id:T.Lr.AppId,bundle:e.app.bundle,ver:e.app.version,content:c,publisher:d,ext:{msn:{adid:e.app.adid,sapphireId:e.app.sapphireid}}}:l.site={content:c,publisher:d},l}createSamRtbFetchRequest(e,t,i){return(0,l.mG)(this,void 0,void 0,(function*(){const n=yield j.$.getBaseRequestData(T.il.Method);return n.credentials="include",n.body=e,n.headers[T.il.ContentTypeKey]=T.il.ContentType,n.headers[T.il.FlightIdKey]=b.Al.CurrentFlights,n.headers[T.il.CacheControlKey]=T.il.CacheControl,n.headers[T.il.MarketKey]=t,i&&(n.headers[T.il.ClientIdKey]=i),!this._isSuperAppPage&&(0,w.ej)(T.yV.AppAnonCookieExist)&&(n.headers[T.il.AuthCookieNameKey]=S.Ji),n}))}createSamRtbXmlHttpRequest(e,t,i){const n=new XMLHttpRequest;return n.open(T.il.Method,i,!0),n.withCredentials=!0,n.timeout=this.config&&this.config.auctionTimeoutOverride?this.config.auctionTimeoutOverride:T.il.Timeout,n.setRequestHeader(T.il.ContentTypeKey,T.il.ContentType),n.setRequestHeader(T.il.FlightIdKey,b.Al.CurrentFlights),n.setRequestHeader(T.il.CacheControlKey,T.il.CacheControl),n.setRequestHeader(T.il.MarketKey,e),t&&n.setRequestHeader(T.il.ClientIdKey,t),!this._isSuperAppPage&&(0,w.ej)(T.yV.AppAnonCookieExist)&&n.setRequestHeader(T.il.AuthCookieNameKey,S.Ji),n}fetchSAMAdsSSR(e,t,i,n,r,o,s,a){return(0,l.mG)(this,void 0,void 0,(function*(){let s,c,d,g,h;try{if(h=(0,f.UE)(),(0,m.hf)(I.q.TimeToRequestAd,h),s=yield this.createSamRtbFetchRequest(e,t,i),c=yield(0,$.w)((()=>(0,C.Sm)(n,T.il.Timeout,s)),"auction"),g=(0,f.UE)(),(0,m.hf)("samRTBResponseReturned",g),!c.ok)return void P.M0.sendAppErrorEvent((0,u.Tr)(p.I2B,"Error calling SAMRTB Ajax on SSR",`pageType: ${r}, status: ${c.status}, StatusText: ${c.statusText}`));((e,t,i)=>{(0,l.mG)(void 0,void 0,void 0,(function*(){var e;const n={requestStart:t,responseEnd:i,duration:i-t,isApproximate:!0},r=null===(e=(0,f.Ou)())||void 0===e?void 0:e[I.q.RequestInitiated];N(0,!1,!1,r,n,!0,((e,t)=>{(0,m.hf)(e,t)}),((e,t,i)=>{(0,m.hf)(e,i-t)}))}))})(0,h,g);const v=c.clone();return d=yield v.text(),v.response=d,a?this.processOpenRtbAdResponse(o,v):this.processAdResponse(v)}catch(e){return void(0,u.OO)(e,p.ryt,"Failed to get response from SAMRTB call on SSR",`pageType: ${r}, status: ${null==c?void 0:c.status}, response: ${d}`)}}))}fetchSAMAdsCSR(e,t,i,n,r,o,s,a,c){return(0,l.mG)(this,void 0,void 0,(function*(){return new Promise((d=>{try{const h=this.createSamRtbXmlHttpRequest(t,i,n);h.onload=()=>{((e,t,i=!1)=>{(0,l.mG)(void 0,void 0,void 0,(function*(){const n=performance.getEntriesByName&&performance.getEntriesByName(e)&&performance.getEntriesByName(e)[0],r=(0,g.O0)(I.q.RequestInitiated);N(0,t,i,r,n,!1,((e,t)=>{(0,g.su)(e,t)}),((e,t,i)=>{(0,g.O_)(e,t,i)}))}))})(n,b.Al.IsPrerender,s),d(a?this.processOpenRtbAdResponse(o,h):this.processAdResponse(h))},h.ontimeout=()=>{P.M0.sendAppErrorEvent((0,u.Tr)(p.vvT,"Timeout calling SAMRTB Ajax",`pageType: ${r}, status: ${h.status}, StatusText: ${h.statusText}, StartTime: ${m}, EndTime: ${(new Date).toISOString()}`)),d(void 0)},h.onerror=()=>{P.M0.sendAppErrorEvent((0,u.Tr)(p.I2B,"Error calling SAMRTB Ajax",`pageType: ${r}, status: ${h.status}, StatusText: ${h.statusText}, StartTime: ${m}, EndTime: ${(new Date).toISOString()}`)),d(void 0)};const m=(new Date).toISOString();h.send(e),c&&c()}catch(e){(0,u.OO)(e,p.ryt,"Failed to get response from SAMRTB call",`pageType: ${r}`),d(void 0)}}))}))}convertOpenRtbResponseToNativeAdResponse(e,t){var i,n,o,a,l;const u=null!==(o=null===(n=null===(i=t.seatbid)||void 0===i?void 0:i.flatMap((e=>e.bid)))||void 0===n?void 0:n.filter((e=>e.ext.admObjects.length>0)))&&void 0!==o?o:[],p=new Map;e.imp.forEach((e=>p.set(e.id,e)));const g=u.map((e=>{const t=e.ext.admObjects[0].native.ext.msn.mappedRegion,i=e.ext.admObjects.flatMap((e=>e.native.eventtrackers)),{geminiViewabilityDataJson:n,beaconsSupportHttpPOST:o}=e.ext.admObjects[0].native.ext.msn,a=e.ext.admObjects[0].native.privacy,l=[],u=[],g=[],h=[];null==i||i.forEach((e=>{var t,i;(null===(i=null===(t=e.ext)||void 0===t?void 0:t.msn)||void 0===i?void 0:i.isBingTracker)&&e.event==c.Viewed?h.push(e.url):e.method==d.JavaScript?g.push(e.url):e.event==c.Impression&&e.method==d.Image?l.push(e.url):e.event==c.Viewed&&e.method==d.Image&&u.push(e.url)}));const m=e.ext.admObjects.flatMap((e=>e.native.link.clicktrackers)),f=e.ext.admObjects[0].native.ext.msn.fireEncodedBeacons,v=JSON.stringify({tvb:u,trb:l,tcb:m,tjb:g,p:e.ext.bidderId,e:f}),y=e.ext.admObjects.map((e=>{const t=e.native,i={title:null,adSelectionReason:t.ext.msn.adSelectionReason,description:null,url:t.link.url,sourceName:null,adChoicesUrl:t.ext.adChoicesUrl,imageUrl:null,imageHeight:null,imageWidth:null,images:null,clickBeacons:null,uniqueId:t.ext.msn.uniqueId,beaconsJson:null,originalImageWidth:null,originalImageHeight:null,verificationParameters:t.ext.msn.verificationParameters,ext:t.ext.msn.ext,assets:[]};return i.clickBeacons=JSON.stringify({tcb:t.link.clicktrackers}),e.native.assets.forEach((e=>{if(e.ext.msn.isRtbAsset)e.img?i.assets.push({w:e.img.w,h:e.img.h,url:e.img.url,alt:e.img.ext.alt,ext:e.img.ext.msn}):i.assets.push(e);else if(e.data){const t=e.data.value;switch(e.data.type){case r.Sponsored:i.sourceName=t;break;case r.Description:i.description=t}}else if(e.img){const{url:t,w:n,h:r}=e.img;switch(e.img.type){case s.Large:i.imageUrl=t,i.imageWidth=n,i.imageHeight=r,i.originalImageHeight=e.img.ext.msn.originalImageHeight,i.originalImageWidth=e.img.ext.msn.originalImageWidth;break;case s.MultipleImages:i.images||(i.images=[]),i.images.push({url:t,alt:e.img.ext.alt,ext:e.img.ext.msn})}}else null!=e.title&&(i.title=e.title.text)})),i})),b=p.get(e.impid);return{items:y,privacyUrl:a,adServedUrls:l,jsTrackerUrls:g,visibilityUrls:u,beaconsJson:v,bingTrackerUrls:h,beaconsSupportHttpPOST:o,geminiViewabilityDataJson:n,region:t,index:b.ext.msn.index}}));return{placements:g,metaData:null===(l=null===(a=t.ext)||void 0===a?void 0:a.msn)||void 0===l?void 0:l.metadata}}getPlacements(e,t){const i=[];return e.placements.forEach((e=>{if(e.region&&e.indices&&e.indices.length){const{indices:r,img:o,extensions:s}=e,a=t==n.EDGECHRNTP&&T.d5[e.region]||e.region,c=o?{region:a,indices:r,img:o}:{region:a,indices:r};s&&(c.extensions=s),i.push(c);const d=e.region.toLocaleLowerCase();d===T.Lr.RiverRegion?this.riverNativeAdCount+=e.indices.length:d===T.Lr.ReservedRiver?this.reservedRiverNativeAdCount+=e.indices.length:d===T.Lr.RiverDoubleWide?this.dualWideRiverNativeAdCount+=e.indices.length:d!==T.Lr.RiverHalf&&d!==T.Lr.RiverHalfTextOnly||(this.halfRiverNativeAdCount+=e.indices.length)}})),i}processMetaData(e){if(this._isSuperAppPage||this._isChannelAppPage)return;const t=e&&e.taboola&&e.taboola.sessionId;!this.isCookieWallPresent&&t&&(0,w.sq)(T.yV.TaboolaSessionCookieName,t,.042),this.lastResponseMetadata=this.mergeMetadata(this.lastResponseMetadata,e),this.cookieService.updateMsaOptOutCookie(e)}mergeMetadata(e,t){return e?t?(t.taboola=this.mergePartnerMetadata(e.taboola,t.taboola),t):e:t}mergePartnerMetadata(e,t){return t=t||{},e&&e.sessionId&&!t.sessionId&&(t.sessionId=e.sessionId),t}getImpressionId(){return this.lastResponseMetadata&&this.lastResponseMetadata.pageViewId?this.lastResponseMetadata.pageViewId:P.M0.getRequestId()}clearPreviousInfo(){var e;this.riverNativeAdCount=0,this.reservedRiverNativeAdCount=0,this.dualWideRiverNativeAdCount=0,this.halfRiverNativeAdCount=0,(null===(e=this.lastResponseMetadata)||void 0===e?void 0:e.pageViewId)&&delete this.lastResponseMetadata.pageViewId}getExtensions(e,t){const i={taboola:(e=e||{taboola:{}}).taboola};return i.taboola.sessionId||(i.taboola.sessionId=t),i}getMuid(e){return this.isCookieWallPresent?null:e||(0,w.jG)()}onPivotSwitch(e){if(!e.oldSelection)return;const t=e.newSelection.pivotId;t&&t.toLowerCase()!==T.E7.EditInterestPivotId&&(this.pivotId=t)}isNotMyFeed(){return!!this.pivotId&&this.pivotId.toLowerCase()!==T.E7.MyFeedPivotId&&this.pivotId.toLowerCase()!==T.E7.StripeMyFeedPivotId}isWindowsViewsPage(e){return!!e&&("windirect"===(e=e.toLowerCase())||e.startsWith("winp"))}isSuperAppPage(e,t){return!!(e&&["saa","sai","mmx"].includes(e.toLowerCase())&&["SuperAppHP","SuperAppViews"].includes(t))}isChannelAppPage(e,t){return!(!e||!["skypefeed","outlookfeed"].includes(e.toLowerCase())||"Channel"!==t)}}},44563:function(e,t,i){"use strict";i.d(t,{E:function(){return hi}});var n=i(33940),r=i(88875),o=i(29666),s=i(26415),a=i(68364),c=i(90351),d=i(25193),l=i(52965),u=i(72554),p=i(13578),g=i(92170),h=i(13042),m=i(4935),f=i(40252),v=i(31011),y=i(99753);const b={configType:"prg-d-rating-n-y",region:[y.yp.river],template:(e,t)=>o.SI.RatingDefaultYellowNonDRStatic,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},S={configType:"prg-h-rating-n-r",region:[y.yp.river],template:(e,t)=>o.SI.RatingHighlightRedNonDR,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},C={configType:"prg-h-rating-n-y",region:[y.yp.river],template:(e,t)=>o.SI.RatingHighlightYellowNonDR,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},w={configType:"prg-h-rating-nys",region:[y.yp.river],template:(e,t)=>o.SI.RatingHighlightYellowNonDRStatic,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},T={configType:"prg-promo-ndr",region:[...y.Fg],template:(e,t)=>o.SI.SpecialOfferNonDR,requiredAssetsAll:[r.aT.specialOffer],supportedAssets:[r.aT.specialOffer]},k={configType:"prg-promo-ndr2",region:[...y.Fg],template:(e,t)=>o.SI.SpecialOfferNonDRWithExp,requiredAssetsAll:[r.aT.specialOffer],supportedAssets:[r.aT.specialOffer]},A={configType:"prg-ad-condition",region:[y.yp.river],template:o.SI.ConditionNonDR,requiredAssetsAll:[r.aT.condition]},I={configType:"prg-ad-return",region:[y.yp.river],template:o.SI.ReturnPolicyNonDR,requiredAssetsAll:[r.aT.returnPolicy]},P={configType:"prg-ad-sold",region:[y.yp.river],template:o.SI.SoldNonDR,requiredAssetsAll:[r.aT.sold]},E={configType:"prg-fship-in-b-n",region:[y.yp.river],template:o.SI.FreeShippingInlineNonDR,requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]},O={configType:"prg-fship-in-t-n",region:[y.yp.river],template:o.SI.FreeShippingPlainTextNonDR,requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]},M={configType:"prg-fship-tl-n",region:[y.yp.river],template:o.SI.FreeShippingTopLeftNonDR,requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]},x={configType:"prg-fship-tr-n",region:[y.yp.river],template:o.SI.FreeShippingTopRightNonDR,requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]};var D=i(9915);const R={name:"gamification-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...D.u,{name:"gradient-mask",paddingTop:"120",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2}},{name:"gamification",layout:{mode:"pixel",bottom:"35",width:"300",zIndex:4}}]}]},L=(e,t,i)=>({modifier:(e,t)=>{t.template.useClickInGamify=i},configType:e,region:[y.yp.river],template:o.SI.Gamification,discountThreshold:t,requiredAssetsAll:[r.aT.price,r.aT.salePrice],supportedAssets:[r.aT.price,r.aT.salePrice,r.aT.discount],dynamicRenderingConfig:()=>R}),F=L("prg-wpo-gamify-c",y.XP.gamification,!0),N=L("prg-wpo-gamify-h",y.XP.gamification,!1),B={name:"hotspot-single-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...D.u,{layout:{mode:"pixel",bottom:"0",zIndex:2},children:[{name:"gradient-mask",paddingTop:"30",children:[{name:"div-wrapper",marginBottom:"10",children:[{name:"animation-decorator",animationType:"scale-up",animationConfig:{scaleFrom:0,scaleTo:1,durationString:".3s",delayTimeMs:0},children:[{name:"hotspot-single"}]}]},{name:"ad-title"}]}]}]}]},j=(e,t)=>({configType:e,region:[y.yp.river],requiredAssetsAll:[r.aT.price,r.aT.salePrice],template:o.SI.HotspotSingle,supportedAssets:[r.aT.price,r.aT.salePrice,r.aT.discount],discountThreshold:t,dynamicRenderingConfig:()=>B}),$=j("prg-wpo-hs",y.XP.default),U=j("prg-wpo-hs10",y.XP.hotspotSingle10),H={configType:"prg-ad-ctav3",region:[...y.cE,...y.Fg],maxAdCount:3,template:(e,t)=>o.SI.CallToActionV3},_={configType:"prg-ad-cta-pa",region:[...y.Fg],requiredAssetsAll:[r.aT.price],maxAdCount:3,template:(e,t)=>o.SI.CallToActionV3PA};var W=i(18297),z=i(27679);const G={name:"feedv2-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"302",height:"157",zIndex:1}},{name:"color-mask",alwaysPresent:!0,feedV2:!0,layout:{mode:"pixel",left:"0",top:"157",width:"300",height:"147",zIndex:1}},{name:"ad-title",isFeedV2:!0,titleFontSize:18,layout:{mode:"pixel",top:"169",zIndex:1}},{name:"see-more",isFeedV2:!0,layout:{mode:"pixel",top:"8",height:"31",left:"260",zIndex:5}},(0,z.It)((0,z.ZV)(W.l,"end-action-part",2,[],1),["ad-label","provider-name","ad-choice"],[{isFeedV2:!0},{isFeedV2:!0},{isFeedV2:!0,layout:{zIndex:5,marginInlineEnd:10}}])]}]},V={configType:"prg-scards",region:[...y.Fg],template:o.SI.AdFeedV2,dynamicRenderingConfig:()=>G},q=(0,z.RM)(G,"ad-title",{name:"ad-title",isFeedV2:!0,titleFontSize:18,customStyleHovered:"text-decoration:underline;",layout:{mode:"pixel",top:"169",zIndex:1}}),Z={configType:"prg-scardsul",region:[...y.Fg],template:o.SI.AdFeedV2,dynamicRenderingConfig:()=>q},K=(0,z.RM)(G,"ad-title",{name:"ad-title",isFeedV2:!0,titleFontSize:20,customStyleHovered:"text-decoration:underline;",layout:{mode:"pixel",top:"169",zIndex:1}}),Q={configType:"prg-scardshov",region:[...y.Fg],template:o.SI.AdFeedV2,dynamicRenderingConfig:()=>K};var J,X,Y,ee,te,ie;!function(e){e.ROW="row",e.ROW_REVERSE="row-reverse",e.COLUMN="column",e.COLUMN_REVERSE="column-reverse"}(J||(J={})),function(e){e.FLEX="flex",e.INLINE_FLEX="inline-flex"}(X||(X={})),function(e){e.FLEX_START="flex-start",e.FLEX_END="flex-end",e.CENTER="center",e.SPACE_BETWEEN="space-between",e.SPACE_AROUND="space-around",e.SPACE_EVENLY="space-evenly"}(Y||(Y={})),function(e){e.FLEX_START="flex-start",e.FLEX_END="flex-end",e.CENTER="center",e.STRETCH="stretch",e.BASELINE="baseline"}(ee||(ee={})),function(e){e.NOWRAP="nowrap",e.WRAP="wrap",e.WRAP_REVERSE="wrap-reverse"}(te||(te={})),function(e){e.AUTO="auto",e.STRETCH="stretch",e.CENTER="center",e.FLEX_START="flex-start",e.FLEX_END="flex-end",e.BASELINE="baseline",e.INITIAL="initial",e.INHERIT="inherit"}(ie||(ie={}));const ne={name:"ad-slug-v3-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-label",layout:{mode:"pixel",top:"270",height:"31",zIndex:5,marginInlineStart:"16",marginInlineEnd:"8"}},{name:"ad-choice",layout:{mode:"pixel",top:"267",height:"31",zIndex:5,marginInlineStart:"231",marginInlineEnd:"8"}},{name:"see-more",layout:{mode:"pixel",top:"262",height:"31",zIndex:5,marginInlineStart:"256"}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"background-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:0}},{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"div-wrapper",marginBottom:"6",marginLeft:"16",marginRight:"16",width:"260",children:[{name:"favicon-provider-name",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-favicon",layout:{mode:"flex"}},{name:"provider-name",layout:{mode:"flex",flex:1,marginInline:"6",minWidth:"0"},customStyleClass:"white-12-flex-layout",keepOpacity:!0}]}]},{name:"ad-title",twoLine:!0}]}]}]},re={configType:"prg-wpo-ad-slug3",region:[y.yp.river,y.yp.rivercms,y.yp.resriver],template:o.SI.AdSlugV3,dynamicRenderingConfig:()=>ne},oe={configType:"prg-wpo-ad-slug4",region:[y.yp.river,y.yp.resriver,y.yp.rivercms],template:o.SI.AdSlugV4,dynamicRenderingConfig:()=>ne};var se=i(64553),ae=i(88087);const ce={maxAdCount:3,template:(e,t)=>y.cE.includes(t.region)?o.SI.InfopaneDynamicRendering:o.SI.DecorationDynamic,region:[...y.vn],dynamicRenderingConfig:e=>y.cE.includes(e.region)?se.v:ae.$},de=[Object.assign(Object.assign({},ce),{configType:"prg-ads-deco",supportedAssets:[r.aT.rating,r.aT.freeShipping,r.aT.review]}),Object.assign(Object.assign({},ce),{configType:"prg-ads-no-deco"})],le={name:"default-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"div-text",inlineStyle:"font-size:14px;line-height:16px;letter-spacing:0.7px",text:"nativeAdBingRewardsText",layout:{mode:"pixel",left:"16",top:"16",zIndex:2}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]},{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"footer-wrapper",layout:{mode:"pixel",top:"264",height:"31",width:"100%",zIndex:5},children:[{name:"footer",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,alignItems:ee.CENTER,height:"31"},children:[{name:"start-action-part",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"join-now",layout:{mode:"pixel",left:"16",zIndex:2}}]},{name:"end-action-part",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW_REVERSE,alignItems:ee.CENTER},children:[{name:"ad-choice",layout:{mode:"flex",paddingRight:"6"}},{name:"div-text",inlineStyle:"font-size:12px;color:rgba(255,255,255,0.7);padding-right:11px",text:"nativeAdPromotedByText",layout:{mode:"flex"}}]}]}]}]}]},ue={configType:"prg-amplify",region:[y.yp.riverAmplify,y.yp.rightRailAmplify],template:o.SI.Amplify,dynamicRenderingConfig:()=>le},pe=e=>({name:"animation-decorator",animationType:"scale-up",animationConfig:{scaleFrom:1.5,scaleTo:1,durationString:"1s",duration:1500,delayTimeMs:500},intersectionRootMargin:"0px 0px 0px 0px",children:[e]}),ge=e=>(0,z.BH)(e,z.Oz.byName("product-image"),pe),he=ge(ae.$),me=ge(se.v);var fe,ve,ye,be,Se,Ce,we;!function(e){e[e["Segoe UI"]=1]="Segoe UI",e[e.Tenorite=2]="Tenorite",e[e.Lora=3]="Lora"}(fe||(fe={})),function(e){e[e["scale-up"]=1]="scale-up",e[e["scale-down"]=2]="scale-down",e[e["scale-up-down"]=3]="scale-up-down"}(ve||(ve={})),function(e){e[e["#036AC4"]=1]="#036AC4",e[e["#B26200"]=2]="#B26200",e[e["#508128"]=3]="#508128",e[e["#158389"]=4]="#158389",e[e["#C84C56"]=5]="#C84C56",e[e["#12875E"]=6]="#12875E",e[e["#666666"]=7]="#666666"}(ye||(ye={})),function(e){e[e.cube=2]="cube",e[e.box=3]="box",e[e.truck=4]="truck"}(be||(be={})),function(e){e[e.normal=1]="normal",e[e.small=2]="small",e[e.large=3]="large"}(Se||(Se={})),function(e){e[e.default=1]="default",e[e["5-star-with-button"]=2]="5-star-with-button",e[e["1-star-with-button"]=3]="1-star-with-button",e[e["1-star-with-shadow"]=4]="1-star-with-shadow"}(Ce||(Ce={})),function(e){e.normal="265",e.small="270",e.large="255"}(we||(we={}));var Te=i(92773);const ke=(0,Te.Et)(s.Evv,"personalizedV2Override")((e=>{var t,i,n;(0,p.Z)(null===(n=null===(i=null===(t=e.items)||void 0===t?void 0:t[0])||void 0===i?void 0:i.ext)||void 0===n?void 0:n.adCreativeV2)||(e.items[0].ext.adCreative=JSON.parse(e.items[0].ext.adCreativeV2))})),Ae=(0,Te.Et)(s.Evv,"isPersonalizedAvailable")(((e,t)=>{var i,n,r,o,s,a,c,d;return(null===(o=null===(r=null===(n=null===(i=e.items)||void 0===i?void 0:i[0])||void 0===n?void 0:n.ext)||void 0===r?void 0:r.adCreative)||void 0===o?void 0:o.templateId)===t&&!!(null===(d=null===(c=null===(a=null===(s=e.items)||void 0===s?void 0:s[0])||void 0===a?void 0:a.ext)||void 0===c?void 0:c.adCreative)||void 0===d?void 0:d.templateConfig)})),Ie=(0,Te.Et)(s.Evv,"isShippingConfig")((e=>{var t,i,n,r,o,s,a,c,d,l,u,p,g;return!!(null===(i=null===(t=e.items[0])||void 0===t?void 0:t.assets)||void 0===i?void 0:i.freeShipping)&&!!(null===(a=null===(s=null===(o=null===(r=null===(n=e.items)||void 0===n?void 0:n[0])||void 0===r?void 0:r.ext)||void 0===o?void 0:o.adCreative)||void 0===s?void 0:s.templateConfig)||void 0===a?void 0:a.shipping)&&!(null===(g=null===(p=null===(u=null===(l=null===(d=null===(c=e.items)||void 0===c?void 0:c[0])||void 0===d?void 0:d.ext)||void 0===l?void 0:l.adCreative)||void 0===u?void 0:u.templateConfig)||void 0===p?void 0:p.shipping)||void 0===g?void 0:g.suppress)})),Pe=(0,Te.Et)(s.Evv,"isRatingConfig")((e=>{var t,i,n,r,o,s,a,c,d,l,u,p,g;return!!(null===(i=null===(t=e.items[0])||void 0===t?void 0:t.assets)||void 0===i?void 0:i.rating)&&!!(null===(a=null===(s=null===(o=null===(r=null===(n=e.items)||void 0===n?void 0:n[0])||void 0===r?void 0:r.ext)||void 0===o?void 0:o.adCreative)||void 0===s?void 0:s.templateConfig)||void 0===a?void 0:a.ratings)&&!(null===(g=null===(p=null===(u=null===(l=null===(d=null===(c=e.items)||void 0===c?void 0:c[0])||void 0===d?void 0:d.ext)||void 0===l?void 0:l.adCreative)||void 0===u?void 0:u.templateConfig)||void 0===p?void 0:p.ratings)||void 0===g?void 0:g.suppress)})),Ee=(0,Te.Et)(s.Evv,"getPersonalizedConfig")(((e,t)=>{if(Ae(e,t)){const[t]=e.items;return t.ext.adCreative.templateConfig}return null}));var Oe;!function(e){const t=(0,Te.Et)(s.Evv,"processDecorations");e.processDecorations=t(((e,t)=>{var i,n;return(0,z.Tb)(t,"ad-decoration",{fontSizes:{price:null===(i=e.price)||void 0===i?void 0:i.fontSize,salePrice:null===(n=e.saleprice)||void 0===n?void 0:n.fontSize},fontFamily:fe[e.font]})}));const i=(0,Te.Et)(s.Evv,"getAnimationDuration")((e=>e?{duration:e,durationString:e/1e3+"s"}:{})),n=(0,Te.Et)(s.Evv,"getAnimationScale")(((e,t)=>e&&t?{scaleFrom:e,scaleTo:e-t}:{})),r=(0,Te.Et)(s.Evv,"getLocationAlignRight")((e=>{if(2==e)return{mode:"flex",display:X.FLEX,flexDirection:J.ROW,justifyContent:Y.FLEX_END}})),o=(0,Te.Et)(s.Evv,"getLocation")(((e,t)=>3==e?{mode:"pixel",bottom:we[t||"normal"]}:4==e?{mode:"pixel",bottom:we[t||"normal"],right:"16"}:void 0)),a=(0,Te.Et)(s.Evv,"getDelayTime")((e=>e?{delayTimeMs:e}:{})),c=(0,Te.Et)(s.Evv,"processAnimationImage");e.processAnimationImage=c(((e,t)=>{if(!e.image)return t;return(0,z.BH)(t,z.Oz.byName("animation-decorator"),(t=>{if(e.image.suppress)return{};const{animation:r}=e.image,o=Object.assign(Object.assign({},t),{animationType:ve[null==r?void 0:r.type]||t.animationType,animationConfig:Object.assign(Object.assign(Object.assign(Object.assign({},t.animationConfig),n(null==r?void 0:r.scaleFrom,null==r?void 0:r.scaleBy)),i(null==r?void 0:r.duration)),a(null==r?void 0:r.delayTimeMS))});if(!(null==r?void 0:r.scaleFrom)&&"scale-down"===o.animationType){const e=t.animationConfig.scaleFrom;t.animationConfig.scaleFrom=t.animationConfig.scaleTo,t.animationConfig.scaleTo=e}return o}))}));const d=(0,Te.Et)(s.Evv,"processFreeShipping");e.processFreeShipping=d(((e,t)=>{if(!e.shipping||e.shipping.suppress)return t;const{color:i,location:n}=e.shipping,s=be[e.shipping.icon],a=(0,z.Tb)(t,"div-wrapper",{layout:Object.assign({},r(n))});return(0,z.Tb)(a,"free-shipping",{fontFamily:fe[e.font],color:ye[i||"1"],icon:s,layout:Object.assign({},o(n))})}));const l=(0,Te.Et)(s.Evv,"processRating");e.processRating=l(((e,t)=>{if(!e.ratings||e.ratings.suppress)return t;const{color:i,elementStyle:n,elementSize:s,location:a,displayReviewCount:c}=e.ratings,d=Se[s],l=(0,z.Tb)(t,"div-wrapper",{layout:Object.assign({},r(a))});return(0,z.Tb)(l,"rating",{fontFamily:fe[e.font],color:ye[i||"1"],elementStyle:Ce[n],elementSize:d,displayReviewCount:c,layout:Object.assign({},o(a,d))})}));const u=(0,Te.Et)(s.Evv,"processTitle");e.processTitle=u(((e,t)=>(0,z.Tb)(t,"ad-title",{fontFamily:fe[e.font]})))}(Oe||(Oe={}));const Me=[Oe.processDecorations,Oe.processTitle],xe=(0,Te.Et)(s.Evv,"processPersonalizedConfig")(((e,t,i,n=Me)=>{const r=Ee(e,t);return r?(0,m.Z)(n,((e,t)=>t(r,e)),i):i})),De=(0,Te.Et)(s.Evv,"removeAssets")((e=>{var t,i,n,r,o;for(const s of e.items){if(!e.enableNativeAdWC){null===(t=s.assets)||void 0===t||delete t.price,null===(i=s.assets)||void 0===i||delete i.salePrice;continue}const a=null===(r=null===(n=s.ext)||void 0===n?void 0:n.adCreative)||void 0===r?void 0:r.templateConfig;if(a){const{price:e,saleprice:t}=a;(null==e?void 0:e.suppress)&&(null===(o=s.assets)||void 0===o||delete o.price),(null==t?void 0:t.suppress)&&delete s.assets.salePrice}}return e})),Re=(0,Te.Et)(s.Evv,"processConfig")(((e,t,i)=>xe(e,t,i,[Oe.processTitle,Oe.processAnimationImage,Oe.processDecorations,Oe.processFreeShipping,Oe.processRating]))),Le={configType:"prg-ani-img",qualifier:(e,t)=>Ae(t,"animatedimageryinf")||Ae(t,"animatedimageryriver"),region:[y.yp.river,y.yp.resriver,y.yp.infopane,y.yp.resinfopane],template:o.SI.AnimatedImagery,supportedAssets:[r.aT.price,r.aT.salePrice],dynamicRenderingConfig:e=>"infopane"===e.region||"resinfopane"===e.region?Re(e,"animatedimageryinf",me):Re(e,"animatedimageryriver",he),modifier:(e,t)=>{De(t)}},Fe=(0,z.RM)(ae.$,"gradient-mask",{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"div",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-title",lineHeight:"28",titleFontSize:"20",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,flex:1,alignItems:ee.CENTER,bottom:"52",zIndex:2}},{name:"call-to-action",layout:{mode:"flex",display:X.FLEX,paddingRight:"16"}}]}]}),Ne={configType:"prg-ad-cta",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToAction,supportedAssets:[r.aT.price,r.aT.salePrice],dynamicRenderingConfig:()=>Fe},Be=(0,z.RM)(ae.$,"gradient-mask",{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:4},children:[{name:"div",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-title",lineHeight:"28",titleFontSize:"20",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,flex:1,alignItems:ee.CENTER,bottom:"52",zIndex:2}},{name:"ad-title-mask"},{name:"call-to-action",ctaMode:"arrow",backgroundColor:"#C6C0BA",color:"#000000;",layout:{mode:"flex",display:X.FLEX,paddingRight:"16"}}]}]}),je={configType:"prg-ad-cta-ic",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToActionIcon,dynamicRenderingConfig:()=>Be},$e={configType:"prg-ad-cta-lm",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToActionLearnMore,dynamicRenderingConfig:()=>Fe},Ue=(0,z.RM)(Fe,"call-to-action",{name:"call-to-action",backgroundColor:"#C6C0BA",color:"#000000;",layout:{mode:"flex",display:X.FLEX,paddingRight:"16"}}),He={configType:"prg-ad-cta-lmd",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToActionDarkMode,dynamicRenderingConfig:()=>Ue},_e=(0,z.As)(Fe,["call-to-action","product-image"],[{name:"call-to-action",ctaMode:"mask"},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!1}]),We={configType:"prg-ad-cta-m",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToActionMaskMode,supportedAssets:[r.aT.price,r.aT.salePrice],dynamicRenderingConfig:()=>_e},ze={configType:"prg-ad-cta-st",region:[...y.Fg],requiredAssetsAll:[r.aT.price,r.aT.shortTitle],template:o.SI.CallToActionShortTitle,dynamicRenderingConfig:()=>Ue},Ge={configType:"prg-ad-ctav2",region:[...y.Fg],template:o.SI.CallToActionV2,dynamicRenderingConfig:()=>Be},Ve=[{configType:"prg-ad-logo-c",template:o.SI.LogoControl,region:[...y.Fg],qualifier:(e,t)=>{var i,n,r,o;return!!(null===(o=null===(r=null===(n=null===(i=t.items)||void 0===i?void 0:i[0])||void 0===n?void 0:n.assets)||void 0===r?void 0:r.logo)||void 0===o?void 0:o.url)},requiredAssetsAll:[r.aT.logo]},{configType:"prg-ad-z-c",template:o.SI.ZIndexControl,region:[y.yp.river],qualifier:(e,t)=>(0,y.Ue)(t),requiredAssetsAll:[r.aT.transparentImage]},{configType:"prg-promo-ndr-c",template:o.SI.SpecialOfferControl,region:[...y.Fg],requiredAssetsAll:[r.aT.specialOffer]},{configType:"prg-fship-c",template:o.SI.FreeShippingControl,region:[y.yp.river],requiredAssetsAll:[r.aT.freeShipping]},{configType:"prg-rating-c",template:o.SI.RatingControl,region:[y.yp.river],requiredAssetsAll:[r.aT.rating]},{configType:"prg-trendingc",template:o.SI.TrendingControl,region:[...y.Fg],requiredAssetsAll:[r.aT.viewed]},{configType:"prg-ad-cta-c",template:o.SI.CallToActionControl,region:[...y.Fg],requiredAssetsAll:[r.aT.price]},{configType:"prg-ad-s-title-c",template:o.SI.ShortTitleControl,region:[y.yp.river],qualifier:(e,t)=>{var i,n,r;return!!(null===(r=null===(n=null===(i=t.items)||void 0===i?void 0:i[0])||void 0===n?void 0:n.assets)||void 0===r?void 0:r.shortTitle)},requiredAssetsAll:[r.aT.shortTitle]},{configType:"prg-ad-sh-v1-c",template:o.SI.SaleHighlightV1Control,region:[...y.Fg,...y.cE],requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount],discountThreshold:y.XP.saleHighlight15,maxAdCount:1},{configType:"prg-ad-sh-v3v4-c",template:o.SI.SaleHighlightV3V4Control,region:[...y.Fg],qualifier:(e,t)=>(0,y.Ue)(t),requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount,r.aT.transparentImage],discountThreshold:y.XP.saleHighlight15,maxAdCount:1},{configType:"prg-ad-combo-c",region:[...y.Fg],template:(e,t)=>(0,y.J2)(t),requiredAssetsAny:[r.aT.rating,r.aT.specialOffer,r.aT.freeShipping]},{configType:"prg-ad-condition-c",region:[y.yp.river],template:o.SI.ConditionNonDRControl,requiredAssetsAll:[r.aT.condition]},{configType:"prg-ad-return-c",region:[y.yp.river],template:o.SI.ReturnPolicyNonDRControl,requiredAssetsAll:[r.aT.returnPolicy]},{configType:"prg-ad-sold-c",region:[y.yp.river],template:o.SI.SoldNonDRControl,requiredAssetsAll:[r.aT.sold]},{configType:"prg-ad-combo-t-c",region:[...y.Fg],template:(e,t)=>(0,y.ZV)(t),requiredAssetsAny:[r.aT.sold,r.aT.returnPolicy,r.aT.condition]},{configType:"prg-ad-ris1-c",region:y.Fg,supportedAssets:[r.aT.price],modifier:(e,t)=>{(0,y.dj)(t,!0)}},{configType:"prg-ad-desc-c",region:y.Fg,template:(e,t)=>(0,y.PY)(t)},{configType:"prg-ad-gpt-title-c",region:[y.yp.infopane,y.yp.river],requiredAssetsAll:[r.aT.shortTitle],template:o.SI.GPTTitle},{configType:"prg-ad-desc-wide-c",region:[y.yp.infopane],template:(e,t)=>(0,y.PY)(t,2)},{configType:"prg-ad-align-rf",region:y.Fg,template:(e,t)=>o.SI.AlignmentRF}],qe={configType:"default",region:[y.yp.infopane,y.yp.resinfopane],maxAdCount:2,template:(e,t)=>t.enableNativeAdWC?o.SI.AnimatedImagery:o.SI.Default,supportedAssets:[],dynamicRenderingConfig:e=>{if(e.enableNativeAdWC)return Re(e,"animatedimageryinf",me)},modifier:(e,t)=>{De(t)}},Ze={configType:"default",region:[y.yp.river,y.yp.resriver],template:o.SI.Default},Ke={configType:"prg-dr-combined",region:y.vn,template:(e,t)=>y.cE.includes(t.region)?o.SI.InfopaneDynamicRendering:o.SI.DecorationDynamic,dynamicRenderingConfig:e=>y.cE.includes(e.region)?se.v:ae.$,modifier:(e,t)=>{t.enableNativeAdWC=!0}},Qe={configType:"prg-ad-combo",region:[y.yp.river],template:(e,t)=>(0,y.JU)(t),requiredAssetsAny:[r.aT.freeShipping,r.aT.rating,r.aT.specialOffer],dynamicRenderingConfig:e=>(0,y.R)(e),modifier:(e,t)=>(0,y.$u)(t,!0)},Je={configType:"prg-dr-infopane",region:[y.yp.infopane,y.yp.resinfopane],maxAdCount:3,template:o.SI.InfopaneDynamicRendering,supportedAssets:[r.aT.rating,r.aT.freeShipping,r.aT.review],dynamicRenderingConfig:()=>se.v},Xe=[{configType:"prg-ads-tel-i",region:y.cE,template:o.SI.DrPerf,dynamicRenderingConfig:()=>se.v},{configType:"prg-ads-tel-r",region:y.Fg,template:o.SI.DrPerf,dynamicRenderingConfig:()=>ae.$}],Ye={configType:"prg-ad-eb",region:[...y.Fg,...y.cE],template:o.SI.EliteBadge,requiredAssetsAll:[r.aT.eliteBadge],supportedAssets:[r.aT.eliteBadge],maxAdCount:3,dynamicRenderingConfig:e=>y.cE.includes(e.region)?se.v:ae.$},et=(0,z.ZV)(ae.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"free-shipping",color:"#036ac4",layout:{mode:"pixel",bottom:"265"}}]}]),tt={configType:"prg-dr-fship",qualifier:(e,t)=>Ae(t,"shippingriver"),region:[y.yp.river],template:o.SI.FreeShippingDR,requiredAssetsAll:[r.aT.freeShipping],dynamicRenderingConfig:e=>Re(e,"shippingriver",et)},it={name:"highlight-rating-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...D.u,{layout:{mode:"pixel",bottom:"0",zIndex:2},children:[{name:"gradient-mask",paddingTop:"30",children:[{name:"div-wrapper",marginBottom:"10",children:[{name:"highlight-rating"}]},{name:"ad-title",oneLineTitle:!0}]}]}]}]},nt={configType:"prg-wpo-h-rating",region:[y.yp.river],requiredAssetsAll:[r.aT.rating],template:o.SI.HighlightRating,supportedAssets:[r.aT.rating],dynamicRenderingConfig:()=>it},rt=(0,z.It)(se.v,["hover-mask","product-image"],[{layout:{mode:"pixel",filter:"contrast(115%)",left:"0",top:"0",width:"100%",height:"100%"}},{imageMaskOn:!1}]),ot=(0,z.It)(ae.$,["hover-mask","product-image"],[{layout:{mode:"pixel",filter:"contrast(115%)",left:"0",top:"0",width:"100%",height:"100%"}},{imageMaskOn:!1}]),st={configType:"prg-ad-hover",region:[...y.vn],template:o.SI.Default,dynamicRenderingConfig:e=>y.cE.includes(null==e?void 0:e.region)?rt:ot},at={name:"default-infopane-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:4}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",zIndex:1,width:"100%",height:"304"},imageMaskOn:!0,imageMaskOpacity:"0.1",trimBottom:!0},{name:"gradient-mask",paddingTop:"90",layout:{mode:"pixel",bottom:"0",width:"100%",zIndex:2},children:[{name:"ad-title",lineHeight:"36",titleFontSize:"28",oneLineTitle:!0}]},W.l]}]},ct={configType:"prg-infopaneDoubleCard19",region:y.cE,maxAdCount:3,template:o.SI.InfopaneDoubleCard_19by10,dynamicRenderingConfig:()=>at},dt=(0,z.It)(at,["footer","ad-title"],[{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"17",height:"31",width:"100%"}},{lineHeight:"44"}]),lt={configType:"prg-infopane-db",region:[y.yp.riverdb],maxAdCount:3,template:o.SI.InfopaneDoubleCard_19by10,dynamicRenderingConfig:()=>dt,modifier:(e,t)=>{t.enableNativeAdWC=!0}},ut=(0,z.FT)(ae.$,"end-action-part",0,[{name:"like-button",layout:{zIndex:5}}]),pt={configType:"prg-ad-like",region:[y.yp.river,y.yp.resriver],template:o.SI.LikeButton,dynamicRenderingConfig:()=>ut},gt={name:"logo-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...D.u,{name:"gradient-mask",paddingTop:"120",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2}},{name:"logo",width:"42",height:"42",layout:{mode:"pixel",left:"16",bottom:"49",zIndex:2}},{name:"logo-title-wrapper",layout:{mode:"pixel",left:"54",bottom:"54",zIndex:2},children:[{name:"logo-title-flex-wrapper",layout:{mode:"flex",height:"42",display:X.FLEX,flexDirection:J.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-title",titleFontSize:"20",twoLine:!0}]}]}]}]},ht={qualifier:(e,t)=>{var i,n,r,o;return!!(null===(o=null===(r=null===(n=null===(i=t.items)||void 0===i?void 0:i[0])||void 0===n?void 0:n.assets)||void 0===r?void 0:r.logo)||void 0===o?void 0:o.url)},configType:"prg-ad-logo",region:[...y.Fg],template:o.SI.Logo,requiredAssetsAll:[r.aT.logo],dynamicRenderingConfig:()=>gt,modifier:(e,t)=>{t.items&&t.items[0]}},mt=(0,z.RM)(gt,"logo",{name:"logo",width:"42",height:"42",borderRadius:"6",layout:{mode:"pixel",left:"16",bottom:"49",zIndex:2}}),ft={qualifier:(e,t)=>{var i,n,r,o;return!!(null===(o=null===(r=null===(n=null===(i=t.items)||void 0===i?void 0:i[0])||void 0===n?void 0:n.assets)||void 0===r?void 0:r.logo)||void 0===o?void 0:o.url)},configType:"prg-ad-logo-r",region:[...y.Fg],template:o.SI.LogoWithBorderRadius,requiredAssetsAll:[r.aT.logo],dynamicRenderingConfig:()=>mt},vt={configType:"prg-ad-combo2",region:y.Fg.concat(y.cE),template:(e,t)=>(0,y.uH)(t),requiredAssetsAny:[r.aT.rating,r.aT.specialOffer,r.aT.freeShipping,r.aT.discount],maxAdCount:1,modifier:(e,t)=>(0,y.$u)(t)},yt=(e,t)=>{const i=(0,z.As)(ae.$,["gradient-mask","provider-name","ad-label"],[{name:"gradient-mask",peSeasonalColorMode:`peSeasonalColorMode${e}`,layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]},{name:"provider-name",layout:{flex:1,minWidth:0,zIndex:5},customStyleClass:"white-12-flex-layout",adLabelTextOpacity:"1",isSeasonal:!0},{name:"ad-label",layout:{marginInlineStart:"16",marginInlineEnd:"6",zIndex:5},adLabelTextOpacity:"1",isSeasonal:!0}]);return(0,z.FT)(i,"default-template",3,[{name:"product-image",patternMode:`patternMode${t}`,useTransparentImage:!0,layout:{position:"absolute",bottom:0,width:"100%",height:121,zIndex:2,pointerEvents:"none"}}])},bt=(yt("1","1"),yt("2","1"),yt("3","1"),yt("4","1"),yt("1","2"),yt("2","2"),yt("3","2"),yt("4","2"),{configType:"prg-ads-seasonal",qualifier:(e,t)=>St(t),region:[...y.Fg],template:(e,t)=>o.SI.PESeasonalAds,dynamicRenderingConfig:e=>{const t=(0,c.Z)(e,"items[0].ext.adCreative.templateConfig.seasonal.color"),i=(0,c.Z)(e,"items[0].ext.adCreative.templateConfig.seasonal.elementStyle");return yt(t,i)}}),St=(0,Te.Et)(s.Evv,"isPersonalizedAvailable")((e=>{var t,i,n,r;return"seasonal"===(0,c.Z)(e,"items[0].ext.adCreative.templateId")&&!!(null===(r=null===(n=null===(i=null===(t=e.items)||void 0===t?void 0:t[0])||void 0===i?void 0:i.ext)||void 0===n?void 0:n.adCreative)||void 0===r?void 0:r.templateConfig)&&!1===(0,c.Z)(e,"items[0].ext.adCreative.templateConfig.seasonal.suppress")})),Ct={configType:"prg-ads-seav1",region:[...y.Fg],template:(e,t)=>o.SI.PESeasonalAdsV1,dynamicRenderingConfig:e=>yt("3","1")},wt={configType:"prg-ads-seav1-p",region:y.Fg,template:(e,t)=>o.SI.PESeasonalAdsV1P,qualifier:(e,t)=>t.providerId&&"bing"===t.providerId.toLowerCase(),dynamicRenderingConfig:e=>yt("3","1")},Tt=(0,z.FT)(ae.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"rating"}]}]),kt={name:"default-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...D.u.filter((e=>"product-image"!==e.name)),{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]}]},At=e=>Ae(e,"shippingriver"),It={configType:"prg-ads-personal",qualifier:(e,t)=>At(t)||Ae(t,"ratingsriver"),region:[y.yp.river],template:(e,t)=>At(t)?o.SI.FreeShippingDR:o.SI.RatingDR,supportedAssets:[r.aT.freeShipping,r.aT.rating,r.aT.review],dynamicRenderingConfig:e=>{const t=Ie(e)?et:kt,i=Pe(e)?Tt:kt;return At(e)?Re(e,"shippingriver",t):Re(e,"ratingsriver",i)}},Pt={configType:"prg-wpo-deco-dr",region:[y.yp.river,y.yp.infopane,y.yp.resriver,y.yp.resinfopane],template:o.SI.DecorationDynamic,requiredAssetsAny:[r.aT.rating,r.aT.freeShipping,r.aT.review],dynamicRenderingConfig:()=>ae.$},Et={configType:"prg-dr-rating",qualifier:(e,t)=>Ae(t,"ratingsriver"),region:[y.yp.river],template:o.SI.RatingDR,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating,r.aT.review],dynamicRenderingConfig:e=>Re(e,"ratingsriver",Tt)},Ot=e=>(0,z.FT)(e?se.v:ae.$,e?"default-infopane-template":"default-template",0,[{name:"sale-highlight-badge",layout:{mode:"pixel",top:"16",left:"16",zIndex:2}}]),Mt=Ot(!1),xt=Ot(!0),Dt={configType:"prg-ad-sh-v1",region:[...y.Fg,...y.cE],template:o.SI.SaleHighlightV1,requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount],discountThreshold:y.XP.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:e=>y.cE.includes(e.region)?xt:Mt},Rt={name:"sale-highlight-v3-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...D.u.filter((e=>"product-image"!==e.name&&"background-image"!==e.name)),{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"sh-content-wrapper",layout:{mode:"pixel",zIndex:1},children:[{name:"sale-highlight-flex-wrapper",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,width:"300",height:"304"},children:[{name:"sale-highlight-title",layout:{mode:"flex",display:X.FLEX,alignItems:ee.CENTER,width:"126",height:"183",marginInline:"8",marginTop:"10"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:"0",imageMaskTop:"0",layout:{width:"150",height:"183",marginTop:"10"}}]}]},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3},children:[{name:"ad-title"}]}]}]},Lt={name:"sale-highlight-v3-template",children:[...D.u.filter((e=>"product-image"!==e.name)),{name:"sale-highlight-horizontal-title",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,alignItems:ee.CENTER,justifyContent:Y.CENTER,width:"300",marginInline:"8",marginBottom:"10",zIndex:1,marginTop:19,position:"absolute"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:0,imageMaskTop:0,imageMaskHeight:304,imageMaskWidth:300,layout:{position:"absolute",width:"236",height:"118",left:"32",top:"77",zIndex:1}},{name:"color-mask",layout:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]},Ft={configType:"prg-ad-sh-v3",region:[...y.Fg],template:o.SI.SaleHighlightV3,qualifier:(e,t)=>(0,y.Ue)(t),requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount,r.aT.transparentImage],discountThreshold:y.XP.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:e=>(0,y.Up)(e)?Rt:Lt},Nt={name:"sale-highlight-v4-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"sh-content-wrapper",layout:{mode:"pixel",zIndex:1},children:[{name:"sale-highlight-flex-wrapper",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,width:"300",height:"304"},children:[{name:"sale-highlight-title",layout:{mode:"flex",display:X.FLEX,alignItems:ee.CENTER,width:"126",height:"183",marginInline:"8",marginTop:"10"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:"0",imageMaskTop:"0",layout:{adBackgroundColor:"#2E2E2E",width:"150",height:"183",marginTop:"10"}}]}]},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.7",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",background:"linear-gradient(var(--gradient-end-color) 0%, var(--gradient-mid-color) 20%, var(--ad-background-color) 30%, var(--ad-background-color) 100%)",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3,neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF",adBackgroundColor:"#2E2E2E",gradientMidColor:"rgba(46, 46, 46, 0.8)",gradientEndColor:"rgba(46, 46, 46, 0)"},children:[{name:"ad-title"}]},(0,z.Tb)(W.l,"footer",{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%",neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF"}})]}]},Bt={name:"sale-highlight-v4-template",children:[...D.u.filter((e=>"product-image"!==e.name)),{name:"sale-highlight-horizontal-title",layout:{mode:"flex",display:X.FLEX,flexDirection:J.ROW,alignItems:ee.CENTER,justifyContent:Y.CENTER,width:"300",marginInline:"8",marginBottom:"10",zIndex:1,marginTop:19,position:"absolute"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:0,imageMaskTop:0,imageMaskHeight:304,imageMaskWidth:300,layout:{position:"absolute",width:"236",height:"118",left:"32",top:"77",zIndex:1,adBackgroundColor:"#2E2E2E"}},{name:"color-mask",layout:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",background:"linear-gradient(var(--gradient-end-color) 0%, var(--gradient-mid-color) 20%, var(--ad-background-color) 30%, var(--ad-background-color) 100%)",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3,neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF",adBackgroundColor:"#2E2E2E",gradientMidColor:"rgba(46, 46, 46, 0.8)",gradientEndColor:"rgba(46, 46, 46, 0)"},children:[{name:"ad-title"}]},(0,z.Tb)(W.l,"footer",{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%",neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF"}})]},jt={configType:"prg-ad-sh-v4",region:[...y.Fg],template:o.SI.SaleHighlightV4,qualifier:(e,t)=>(0,y.Ue)(t),requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount,r.aT.transparentImage],discountThreshold:y.XP.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:e=>(0,y.Up)(e)?Nt:Bt},$t={qualifier:(e,t)=>{var i,n,r;return!!(null===(r=null===(n=null===(i=t.items)||void 0===i?void 0:i[0])||void 0===n?void 0:n.assets)||void 0===r?void 0:r.shortTitle)},configType:"prg-ad-gpt-title",region:[y.yp.infopane,y.yp.river],requiredAssetsAll:[r.aT.shortTitle],template:o.SI.GPTTitle,modifier:(e,t)=>{var i,n;t.items&&t.items[0]&&(null===(n=null===(i=t.items[0])||void 0===i?void 0:i.assets)||void 0===n?void 0:n.shortTitle)&&(t.items[0].title=t.items[0].assets.shortTitle)}},Ut={configType:"prg-wpo-ss",region:[y.yp.river],template:o.SI.Slideshow,modifier:(e,t)=>{t.slideshowProps=t.template.slideshowProps={autoScroll:!0,autoScrollIntervalMs:3e3,maxImageCount:5,enableSlideshowMediaControls:!0}},multiImage:!0},Ht={name:"spotlight-image-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...D.u.filter((e=>"product-image"!==e.name)),{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:1},imageMaskOn:!0},{name:"spotlight-background",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:0}},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},paddingBottom:"0"}]}]},_t={configType:"prg-wpo-sl",region:[y.yp.river],template:o.SI.Spotlight,supportedAssets:[],supportedImageRatios:[o.hb._1by1,o.hb._3by4,o.hb._4by3],targetImageRatio:o.hb._1by1,dynamicRenderingConfig:()=>Ht},Wt=Object.assign(Object.assign({},ae.$),{userActionLogger:"PrgTitle2"}),zt={configType:"prg-title-2",region:y.Fg,template:o.SI.TitleMaxLine2,dynamicRenderingConfig:()=>Wt},Gt=Object.assign(Object.assign({},ae.$),{userActionLogger:"PrgTitle2C"}),Vt={configType:"prg-title-2-c",region:y.Fg,template:o.SI.TitleMaxLine2C,dynamicRenderingConfig:()=>Gt},qt=(0,z.RM)(ae.$,"gradient-mask",{name:"gradient-mask",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"trending",layout:{position:"relative",zIndex:5}},{name:"ad-title"}]}),Zt={configType:"prg-trending",region:[...y.Fg],template:o.SI.Trending,requiredAssetsAll:[r.aT.viewed],dynamicRenderingConfig:()=>qt},Kt={name:"zindex-v2-original-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...D.u.filter((e=>"product-image"!==e.name&&"background-image"!==e.name)),{name:"product-image",layout:{mode:"pixel",left:"24",top:"20",width:"252",height:"150",zIndex:2},useTransparentImage:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",height:"304",zIndex:1},isFullGradient:!0},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:2},opacity:"0.3"},{name:"div",layout:{mode:"pixel",bottom:"45",width:"300",zIndex:2},children:[{name:"ad-title"}]}]}]},Qt={configType:"prg-ad-zv2-o",region:[y.yp.river],qualifier:(e,t)=>(0,y.Ue)(t),template:o.SI.ZIndexV2Original,requiredAssetsAll:[r.aT.transparentImage],dynamicRenderingConfig:()=>Kt},Jt={name:"zindex-v2-polygon-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...D.u.filter((e=>"product-image"!==e.name&&"background-image"!==e.name)),{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:1},opacity:"0.4",alwaysPresent:!0},{name:"product-image",layout:{mode:"pixel",left:"24",top:"20",width:"252",height:"150",zIndex:2},useTransparentImage:!0},{name:"polygon-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:2}},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:2},opacity:"0.3"},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}],isRadialMask:!0}]}]},Xt={configType:"prg-ad-zv2-p",region:[y.yp.river],qualifier:(e,t)=>(0,y.Ue)(t),template:o.SI.ZIndexV2Polygon,requiredAssetsAll:[r.aT.transparentImage],dynamicRenderingConfig:()=>Jt},Yt={configType:"prg-ad-combo-txt",region:[...y.Fg],template:(e,t)=>(0,y.xP)(t),requiredAssetsAny:[r.aT.sold,r.aT.returnPolicy,r.aT.condition],modifier:(e,t)=>(0,y.E5)(t)},ei={configType:"prg-ad-ris1",region:y.Fg,supportedAssets:[r.aT.price],modifier:(e,t)=>{(0,y.dj)(t)}},ti=[{configType:"prg-ad-desc-wide-1",region:y.cE,template:(e,t)=>(0,y.PY)(t,2)},{configType:"prg-ad-desc-wide-2",region:y.cE,template:(e,t)=>(0,y.PY)(t,2)}],ii=[o.SI.GeometricAdWaves1,o.SI.GeometricAdWaves3,o.SI.GeometricAdWaves4,o.SI.GeometricAdNature3,o.SI.GeometricAdSparkles1,o.SI.GeometricAdSparkles2,o.SI.GeometricAdSparkles3,o.SI.GeometricAdSparkles4,o.SI.GeometricAdSparkles5],ni=[{configType:"prg-ad-geometric",region:[...y.Fg],modifier:(e,t)=>{(0,y.rf)(t,ii,o.SI.Default,t.template.seasonalAdTemplateConfig.density)}}],ri=[F,N,$,U,qe,Ze,Pt,Le,Ut,zt,Vt,nt,ht,ft,$t,Ne,je,$e,He,ze,We,Ge,Je,ct,lt,Qt,Xt,_t,Z,Q,V,re,oe,ue,...de,...Xe,T,k,E,O,M,x,S,C,w,b,P,A,I,Ke,tt,Ye,Et,It,pt,st,Zt,Dt,Ft,jt,Qe,vt,H,_,bt,Ct,wt,Yt,ei,...ni,...ti,...Ve];var oi=i(87618),si=i(78931),ai=i(94921),ci=i(60260);class di{constructor(){this.filterConfigs=(e,t=[])=>(0,si.Z)([...ri,...t],(t=>(0,ai.Z)([...oi.Sj,t.qualifier],(i=>!i||i(t,e))))),this.fallbackConfig=e=>y.cE.includes(e.region)?qe:Ze,this.pickConfigByWeight=e=>{let t=0;(0,h.Z)(e,(e=>{t=t+e.weight||y.KB}));const i=Math.floor(Math.random()*t);let n=0;for(let t=0;t<e.length;++t)if(n+=e[t].weight||y.KB,i<n)return e[t]},this.preProcess=e=>{(0,h.Z)(e.items,(e=>{e.assets&&(this.calculateDiscount(e.assets),this.filterRatings(e.assets))})),(0,ci.dO)(e)},this.postProcess=(e,t)=>{(0,h.Z)([...oi.F8,e.modifier],(i=>null==i?void 0:i(e,t)))},this.calculateDiscount=e=>{const t=e.price,i=e.salePrice;if(t&&i){const n=Number(t.replace(/[^0-9.-]+/g,"")),r=Number(i.replace(/[^0-9.-]+/g,""));e.discount=Math.floor((n-r)/n*100)}},this.filterRatings=e=>{e&&e.rating&&(isNaN(parseInt(e.rating))||parseInt(e.rating)<=6)&&(e.rating=void 0)}}selectTemplate(e,t=[]){this.preProcess(e);const i=this.filterConfigs(e,t),n=i&&i.length>0?this.pickConfigByWeight(i):this.fallbackConfig(e);this.postProcess(n,e)}}var li=i(58155);class ui{}ui.concat=(e,t)=>`${e}.${t}`,ui.identity=e=>t=>ui.concat(e,t),ui.boolean=e=>t=>t?ui.concat(e,"1"):null;class pi{constructor(){this._availableAssets="",this._displayedAssets=""}get availableAssets(){return this._availableAssets}get displayedAssets(){return this._displayedAssets}setAvailableAssets(e){var t,i;((null===(i=null===(t=e.items)||void 0===t?void 0:t[0])||void 0===i?void 0:i.assets)||(0,c.Z)(e,"items[0].ext.adCreative.templateConfig"))&&(this._availableAssets=this.concatAssets(e))}setDisplayedAssets(e){var t,i;(null===(i=null===(t=e.items)||void 0===t?void 0:t[0])||void 0===i?void 0:i.assets)&&(this._displayedAssets=this.concatAssets(e))}concatAssets(e){let t="";(0,c.Z)(e,"items[0].assets")&&(t=(0,d.Z)(Object.keys(e.items[0].assets),(e=>{const t=r.aT[e].split("-");return"data"==(null==t?void 0:t[0])?t[1]:"image"==(null==t?void 0:t[0])?`i${t[1]}`:void 0})).join("_"));const i=(0,c.Z)(e,"items[0].ext.adCreative.templateConfig");if(!i)return t;let n="";i&&(n=(0,d.Z)(Object.keys(i),(e=>r.XY[e])).join("_"));return t+(t&&n?"_":"")+n}}(0,n.gn)([(0,Te.Et)(s.NMS,"setAvailableAssets")],pi.prototype,"setAvailableAssets",null),(0,n.gn)([(0,Te.Et)(s.NMS,"setDisplayedAssets")],pi.prototype,"setDisplayedAssets",null),(0,n.gn)([(0,Te.Et)(s.NMS,"concatAssets")],pi.prototype,"concatAssets",null);const gi={templateType:ui.identity("type"),animatedImage:ui.identity("ani"),flipZIndex:ui.boolean("fz"),landscapeOverlay:ui.boolean("lo")};class hi{constructor(){this.hasAnyInlineDecoration=e=>{if(e.items&&0!==e.items.length){if(e.items[0]&&e.items[0].assets){const t=e.items[0].assets;return!!(t.price||t.salePrice||t.installmentPrice||t.rating||t.review||t.priceDrop||t.viewed||t.freeShipping||t.discount)}return!1}return!1}}updateTemplate(e,t={}){const i=(0,l.Z)(e);try{this.updateTemplateInternal(e,t)}catch(t){(0,a.OO)(t,s.NMS,"Fail to apply template service on placement"),e=void 0,e=(0,l.Z)(i)}}updateTemplateInternal(e,t){var i;if(!e||!(null==t?void 0:t.configType)&&("resriver"===e.region||"resinfopane"===e.region))return;ke(e),this.decorationBeaconBuilder=new pi,this.decorationBeaconBuilder.setAvailableAssets(e);const n=(0,u.Z)({},t,o.j3);if(n.configType){e.template=n;(new di).selectTemplate(e)}else e.template=this.processConfig(e,n),this.resetTempateTypeForInfopaneInMultiAds(e),this.filterAssetByFlight(e),this.updatePlacementImageSize(e),this.updateTemplateTypeForPriceDiscount(e);this.updateBeacon(e),(null===(i=null==e?void 0:e.template)||void 0===i?void 0:i.templateType)&&e.template.templateType.endsWith("-c")&&(e.template.templateType=o.SI.Default,this.filterAssetByFlight(e))}processConfig(e,t){const i=t;if(this.updateAllowedAssetsAndTemplateForInfopane(e,i),this.updateTemplateInfoForDRInfopane(e,i),i.templateType!==o.SI.Slideshow&&i.templateType!==o.SI.PseudoVideo||this.updateSlideshowTemplateType(e,t,i),i.templateType===o.SI.PatternOverlay){"225"===this.getItemImageSize(e).height?i.landscapeOverlay=!1:i.templateType=o.SI.Default}return i.templateType===o.SI.Default&&e.items&&e.items.length>3&&i.adCarousel&&(i.templateType=o.SI.AdCarousel),this.updateTemplateInfoForBrandStory(e,i),i}updatePlacementImageSize(e){if(e.template.templateType===o.SI.PatternOverlay){const t=this.getItemImageSize(e);e.imageWidth=(0,c.Z)(e,"imageWidth",t.width),e.imageHeight=(0,c.Z)(e,"imageHeight",t.height)}}updateBeacon(e){const t=t=>{if(t.includes("srtb.msn.com")){const i=new URL(t);return li.c.appendSearchParam(i,"t",this.serializeTemplateConfig(e)),this.decorationBeaconBuilder.setDisplayedAssets(e),this.decorationBeaconBuilder.availableAssets&&li.c.appendSearchParam(i,"dec",this.decorationBeaconBuilder.availableAssets+"-"+this.decorationBeaconBuilder.displayedAssets),i.href}return t};if(!(0,p.Z)(e.beaconsJson)){const i=JSON.parse(e.beaconsJson);i&&((0,g.Z)(i.trb)&&(i.trb=i.trb.map((e=>t(e)))),(0,g.Z)(i.tvb)&&(i.tvb=i.tvb.map((e=>t(e)))),e.beaconsJson=JSON.stringify(i))}e&&(0,g.Z)(e.items)&&(0,h.Z)(e.items,(e=>{if(!(0,p.Z)(e.clickBeacons)){const i=JSON.parse(e.clickBeacons);i&&((0,g.Z)(i.tcb)&&(i.tcb=i.tcb.map((e=>t(e)))),e.clickBeacons=JSON.stringify(i))}}))}serializeTemplateConfig(e){return e.items&&e.items.length>0&&e.items[0].video?e.items[0].verificationParameters?o.SI.VideoIAS:o.SI.Video:(0,m.Z)(gi,((t,i,n)=>{const r=(0,c.Z)(e.template,n);if(r){const e=i(r);if(e)return""===t?e:`${t}_${e}`}return t}),"")}updateSlideshowTemplateType(e,t,i){e&&e.items&&e.items[0]&&e.items[0].images&&e.items[0].images.length>1?(i.templateType=t.templateType,e.slideshowProps=i.slideshowProps):(i.templateType=o.SI.Default,i.slideshowProps=void 0)}getItemImageSize(e){const t=(0,f.Z)(e.items);return(0,p.Z)(t)?{}:{width:`${(0,c.Z)(t,"imageWidth")}`,height:`${(0,c.Z)(t,"imageHeight")}`}}calculateDiscount(e){const t=e.price,i=e.salePrice;if(t&&i){const n=Number(t.replace(/[^0-9.-]+/g,"")),r=Number(i.replace(/[^0-9.-]+/g,""));e.discount=Math.floor((n-r)/n*100)}}filterAssetByFlight(e){var t;if(e&&e.items&&e.items[0]&&e.items[0].assets){this.calculateDiscount(e.items[0].assets);const i=(0,v.Z)((0,g.Z)(null===(t=e.template)||void 0===t?void 0:t.allowedAssets)?[...r.fs,...e.template.allowedAssets]:r.fs),n=(0,m.Z)(e.items[0].assets,((e,t,n)=>(i.includes(r.aT[n])&&(e[n]=t),e)),{});e.items[0].assets=n}}resetTempateTypeForInfopaneInMultiAds(e){"infopane"===e.region&&e.items&&e.items.length>1&&e.template.templateType!==o.SI.InfopaneDynamicRendering&&(e.template.templateType=o.SI.Default,e.template.animatedImage="")}isValidProviderNameForBrand(e){if(!(e&&e.items&&e.items[0]&&e.items[0].providerName))return!1;const t=e.items[0].providerName;return-1===t.indexOf("/")&&t.length<20}updateAllowedAssetsAndTemplateForInfopane(e,t){t.templateType!==o.SI.BrandStory&&t.templateType!==o.SI.BrandStoryNoDeco&&t.templateType!==o.SI.BrandStoryNoProgressiveDisplay&&t.templateType!==o.SI.HotspotSingle&&t.templateType!==o.SI.DiscountScribble&&t.templateType!==o.SI.ContentReveal&&t.templateType!==o.SI.Gamification||"infopane"===e.region&&(t.allowedAssets=void 0,t.templateType=o.SI.Default)}updateTemplateInfoForBrandStory(e,t){var i,n,r,s;t.templateType!==o.SI.BrandStory&&t.templateType!==o.SI.BrandStoryNoDeco&&t.templateType!==o.SI.BrandStoryNoProgressiveDisplay||((null===(n=null===(i=e.items)||void 0===i?void 0:i[0])||void 0===n?void 0:n.description)===(null===(s=null===(r=e.items)||void 0===r?void 0:r[0])||void 0===s?void 0:s.providerName)&&(e.items[0].description=null),this.isValidProviderNameForBrand(e)||(t.templateType=o.SI.Default,t.allowedAssets=void 0))}updateTemplateTypeForPriceDiscount(e){var t,i,n,r,s,a,c,d,l,u,p,g,h,m,f,v,y,b,S;const{Default:C,HotspotSingle:w,BrandStory:T,DiscountScribble:k,ContentReveal:A,Gamification:I}=o.SI;(null===(n=null===(i=null===(t=e.items)||void 0===t?void 0:t[0])||void 0===i?void 0:i.assets)||void 0===n?void 0:n.discount)>=(null===(r=e.template)||void 0===r?void 0:r.discountThreshold)||([w,k,I].includes(null===(s=e.template)||void 0===s?void 0:s.templateType)&&(e.template.templateType=C,e.template.allowedAssets=void 0,e.items[0].assets={}),(null===(a=e.template)||void 0===a?void 0:a.templateType)===A&&(null===(l=null===(d=null===(c=e.items)||void 0===c?void 0:c[0])||void 0===d?void 0:d.assets)||void 0===l||delete l.discount,(null===(p=null===(u=e.items)||void 0===u?void 0:u[0])||void 0===p?void 0:p.description)===(null===(h=null===(g=e.items)||void 0===g?void 0:g[0])||void 0===h?void 0:h.providerName)&&(e.items[0].description=null),(null===(f=null===(m=e.items)||void 0===m?void 0:m[0])||void 0===f?void 0:f.description)||this.hasAnyInlineDecoration(e)||(e.template.templateType=C,e.template.allowedAssets=void 0)),(null===(v=e.template)||void 0===v?void 0:v.templateType)===T&&(null===(S=null===(b=null===(y=e.items)||void 0===y?void 0:y[0])||void 0===b?void 0:b.assets)||void 0===S||delete S.discount))}updateTemplateInfoForDRInfopane(e,t){"river"===e.region||"infopane"==e.region&&t.templateType===o.SI.InfopaneDynamicRendering||(t.templateType=o.SI.Default),"river"===e.region&&t.templateType===o.SI.InfopaneDynamicRendering&&(t.templateType=o.SI.Default)}}(0,n.gn)([(0,Te.Et)(s.NMS,"updateTemplate")],hi.prototype,"updateTemplate",null),(0,n.gn)([(0,Te.Et)(s.NMS,"updateTemplateInternal")],hi.prototype,"updateTemplateInternal",null),(0,n.gn)([(0,Te.Et)(s.NMS,"processConfig")],hi.prototype,"processConfig",null),(0,n.gn)([(0,Te.Et)(s.NMS,"updatePlacementImageSize")],hi.prototype,"updatePlacementImageSize",null),(0,n.gn)([(0,Te.Et)(s.NMS,"updateBeacon")],hi.prototype,"updateBeacon",null),(0,n.gn)([(0,Te.Et)(s.NMS,"serializeTemplateConfig")],hi.prototype,"serializeTemplateConfig",null),(0,n.gn)([(0,Te.Et)(s.NMS,"updateSlideshowTemplateType")],hi.prototype,"updateSlideshowTemplateType",null),(0,n.gn)([(0,Te.Et)(s.NMS,"getItemImageSize")],hi.prototype,"getItemImageSize",null),(0,n.gn)([(0,Te.Et)(s.NMS,"calculateDiscount")],hi.prototype,"calculateDiscount",null),(0,n.gn)([(0,Te.Et)(s.NMS,"filterAssetByFlight")],hi.prototype,"filterAssetByFlight",null),(0,n.gn)([(0,Te.Et)(s.NMS,"resetTempateTypeForInfopaneInMultiAds")],hi.prototype,"resetTempateTypeForInfopaneInMultiAds",null),(0,n.gn)([(0,Te.Et)(s.NMS,"isValidProviderNameForBrand",(()=>!1))],hi.prototype,"isValidProviderNameForBrand",null),(0,n.gn)([(0,Te.Et)(s.NMS,"updateAllowedAssetsAndTemplateForInfopane")],hi.prototype,"updateAllowedAssetsAndTemplateForInfopane",null),(0,n.gn)([(0,Te.Et)(s.NMS,"updateTemplateInfoForBrandStory")],hi.prototype,"updateTemplateInfoForBrandStory",null),(0,n.gn)([(0,Te.Et)(s.NMS,"updateTemplateTypeForPriceDiscount")],hi.prototype,"updateTemplateTypeForPriceDiscount",null),(0,n.gn)([(0,Te.Et)(s.NMS,"hasAnyInlineDecoration")],hi.prototype,"hasAnyInlineDecoration",void 0),(0,n.gn)([(0,Te.Et)(s.NMS,"updateTemplateInfoForDRInfopane")],hi.prototype,"updateTemplateInfoForDRInfopane",null)},16908:function(e,t,i){"use strict";i.d(t,{dQ:function(){return g}});var n=i(33940),r=i(73252),o=i(65135),s=i(68364),a=i(26415),c=i(81765),d=i(33379);const l={180:"101",270:"102",360:"103",540:"104",720:"105",1080:"107"};function u(e,t,i,n,s,a){var d,l,u,p,g,h,m,f,v,y,b;if(!e||!t)return;const S=e.target.parentElement,C=e.target.querySelector("video"),w=JSON.parse(null===(d=S.attributes["data-t"])||void 0===d?void 0:d.value).n,T=e.target.player,k=function(e){const t={AdStart:"AdPlayStarted",AdComplete:"AdPlayCompleted",EventPause:"Pause",ContentResume:"Resume",seeked:"Seek",error:"ContentError",canplay:"Canplay",canplaythrough:"Canplaythrough"};return t[e]&&(e=t[e]),c.Bs[e]}(t.name),A=null!==(l=t.data)&&void 0!==l?l:{PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"},I="video/mp4"===(null==T?void 0:T.currentType()),P={type:61,name:"nativeAds_"+w,ext:{videoCs:i,eventType:k,timeElasped:C.currentTime,videoFormatCode:I?Number(null==a?void 0:a.format):1006,title:n,videoDuration:null==T?void 0:T.duration(),fr:(null===(u=null===r.Al||void 0===r.Al?void 0:r.Al.ClientSettings)||void 0===u?void 0:u.geo_country)+"_"+(null===(p=null===r.Al||void 0===r.Al?void 0:r.Al.ClientSettings)||void 0===p?void 0:p.geo_city)+"_"+(null===r.Al||void 0===r.Al?void 0:r.Al.Locale)+"_"+s,pageGroup:"",playerInstanceId:e.target.id,playType:"pb",playerTech:A.PlayerTechnology,pluginVersion:A.PlayerTechnology,size:C.clientWidth+"x"+C.clientHeight,videoPlayerType:A.VideoPlayerType,playerType:A.PlayerTechnology,playDuration:C.currentTime,inline:!1,videoUrl:null==T?void 0:T.src(),errorType:t.name===c.pt.Error?null===(g=null==T?void 0:T.error())||void 0===g?void 0:g.code:null,errorDescription:t.name===c.pt.Error?null===(h=null==T?void 0:T.error())||void 0===h?void 0:h.message:null,bandwidth:I?null:null===(f=null===(m=null==T?void 0:T.tech_)||void 0===m?void 0:m.hls)||void 0===f?void 0:f.bandwidth,throughput:I?null:null===(y=null===(v=null==T?void 0:T.tech_)||void 0===v?void 0:v.hls)||void 0===y?void 0:y.throughput,bufferWaitTime:null===(b=t.data)||void 0===b?void 0:b.bufferTime}};o.M0.sendVideoPlayEvent(P,S)}function p(e,t){e&&(e.bigPlayButton&&e.bigPlayButton.el_&&e.bigPlayButton.enabled_&&(e.bigPlayButton.el_.style.display="none"),e.loadingSpinner&&e.loadingSpinner.el_&&(e.loadingSpinner.el_.style.display="none"),t&&(t.style.display="none"))}function g(e,t,i=!0){if((0,d.N)()&&e&&e.items&&e.items.length>t&&e.items[t].video){const r=(new DOMParser).parseFromString(e.items[t].video,"application/xml"),o=e.region,d=r.getElementsByTagName("MediaFile"),g=Array.from(d).map((e=>{return{url:e.textContent,delivery:e.getAttribute("delivery"),id:e.getAttribute("id"),bitrate:Number(e.getAttribute("bitrate")),minBitrate:Number(e.getAttribute("minBitrate")),maxBitrate:Number(e.getAttribute("maxBitrate")),codec:e.getAttribute("codec"),scalable:!!Number(e.getAttribute("scalable")),maintainAspectRatio:!!Number(e.getAttribute("maintainAspectRatio")),width:Number(e.getAttribute("width")),height:Number(e.getAttribute("height")),contentType:e.getAttribute("type"),format:(t=e.getAttribute("type"),i=e.getAttribute("height"),"application/x-mpegURL"==t?"1006":l[i])};var t,i})),h=r.getElementsByTagName("Duration"),m=h.length>0?h[0].textContent:null,f=r.getElementsByTagName("Tracking"),v=Array.from(f).map((e=>({value:e.textContent,event:e.getAttribute("event"),offset:e.getAttribute("offset")}))),y=r.getElementsByTagName("Ad"),b=y.length>0?Number(y[0].getAttribute("id")):null,S=r.getElementsByTagName("AdTitle"),C=S.length>0?S[0].textContent:"",w=r.getElementsByTagName("AdServingId"),T=w.length>0?w[0].textContent:"",k=r.getElementsByTagName("ClickThrough"),A=k.length>0?k[0].textContent:"",I=r.getElementsByTagName("Impression"),P=I.length>0?I[0].textContent:"",E=r.getElementsByTagName("Pricing");let O=null,M=null,x=null;E.length>0&&(O=Number(E[0].textContent),M=E[0].getAttribute("model"),x=E[0].getAttribute("currency"));let D=null,R=null;const L=T+"_"+b,F=(e,t,i,r)=>(0,n.mG)(this,void 0,void 0,(function*(){var n;if(e.type===c.pt.Telemetry&&("ContentOpen"==t.name&&(D=Date.now(),R=D),u(e,t,L,C,o,r)),i===c.pt.Error)(0,s.H)(a.mFi,null===(n=t.error())||void 0===n?void 0:n.message),u(e,{name:c.pt.Error,data:{VideoDuration:m,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},L,C,o,r);else if(D&&i===c.pt.CanPlay){const t=Date.now()-D;D=null,u(e,{name:i,data:{VideoDuration:m,bufferTime:t,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},L,C,o,r)}else if(R&&i===c.pt.CanPlayThrough){const t=Date.now()-R;R=null,u(e,{name:i,data:{VideoDuration:m,bufferTime:t,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},L,C,o,r)}})),N=document.createElement("div");N.id="nativeAdVideoMask",N.className="nativeAdVideoMask-mask",N.style.cssText="position:absolute;inset:0px;background-image:var(--mask-gradient, linear-gradient(to top, rgba(0, 0, 0, 1), rgba(0,0,0,0) 176px));display:flex;";const B=(e,t)=>{let[n,r,s,a,d,l,u,g]=[null,null,null,null,null,null,null,null],[h,m,f]=[null,null,null];const v=!!e&&e.el_&&e.el_.querySelector("#nativeAdVideoMask");if(i?(h=!!e&&e.el_&&e.el_.getRootNode().host&&e.el_.getRootNode().host.getRootNode(),m=!!h&&h.host&&h.host.parentElement&&h.host.parentElement.querySelector("native-ad-video-controls")&&h.host.parentElement.querySelector("native-ad-video-controls").shadowRoot,f=!!h&&h.host&&h.host.parentElement&&h.host.parentElement.parentElement&&h.host.parentElement.parentElement.querySelector("native-ad-video-controls")&&h.host.parentElement.parentElement.querySelector("native-ad-video-controls").shadowRoot):(m=!!e&&e.el_&&e.el_.parentElement&&e.el_.parentElement.parentElement,f=!!m&&m.parentElement,h=m||f),h&&(u=h.querySelector(".video-ad-background-img-river"),g=h.querySelector(".video-ad-background-img-infopane")),m&&(a=m.querySelector("#nativead-video-replay-button-river"),d=m.querySelector("#nativead-video-learn-more-button-river")),f&&(n=f.querySelector("#nativead-video-play-button-infopane"),r=f.querySelector("#nativead-video-replay-button-infopane"),s=f.querySelector("#nativead-video-learn-more-button-infopane"),i?l=h.host.parentElement.parentElement.querySelector(".info-pane-slide-title"):"infopane"==o&&(l=f.nextElementSibling&&f.nextElementSibling.querySelector("h3"))),t&&t.toLowerCase()==c.pt.Ended&&(a&&(a.style.display="block"),r&&(r.style.display="block"),s&&(s.style.display="block"),d&&(d.style.display="block")),e&&e.errorDisplay&&e.errorDisplay.el_&&(e.errorDisplay.el_.style.display="none"),t&&t.toLowerCase()==c.pt.Play&&(a&&(a.style.display="none"),n&&(n.style.display="none"),r&&(r.style.display="none"),s&&(s.style.display="none"),d&&(d.style.display="none"),l&&(l.style.display="none"),v&&(v.style.display="none")),t&&t.toLowerCase()==c.pt.Error&&e&&"video/mp4"==e.currentType()&&p(e,n),t&&t.toLowerCase()==c.pt.Pause&&(l&&(l.style.display=null),v&&(v.style.display="flex")),t&&t.toLowerCase()==c.pt.Ready){if(u&&(u.style.display="none"),g&&(g.style.display="none"),n){n.style.display="block";const t=e&&e.posterImage&&e.posterImage.el_;if(t){const i=t.nextSibling;e.el_.insertBefore(N,i)}}e&&!e.currentSrc()&&p(e,n)}};return{VideoPlayerProps:{posterUrl:e.items[t].imageUrl,onMessage:(e,t,i,n)=>{B(t,i),F(e,t,i,n)},videoMetadataProps:{videoSources:g},playerConfigProps:{autoplay:"river"==o,inViewPlay:"river"==o,replayWhenInView:!1,outOfViewPause:!0,inViewPlayPercentage:.5,muted:!0,disableSeek:!0,useProgressiveVideoFallback:!0}},ViewabilityProps:{Duration:m,TrackingEvents:v},VideoAdProps:{AdId:b,AdTitle:C,AdServingId:T,ClickThrough:A,Impression:P,Price:O,PricingModel:M,Currency:x}}}return null}},60260:function(e,t,i){"use strict";i.d(t,{GM:function(){return d},dO:function(){return c}});var n=i(29666),r=i(26415),o=i(78931),s=i(92773);const a=[{ratio:n.hb._lowerBound,width:1,height:9999},{ratio:n.hb._1by191,width:1,height:1.91},{ratio:n.hb._9by16,width:9,height:16},{ratio:n.hb._3by4,width:3,height:4},{ratio:n.hb._1by1,width:1,height:1},{ratio:n.hb._4by3,width:4,height:3},{ratio:n.hb._16by9,width:16,height:9},{ratio:n.hb._191by1,width:1.91,height:1}],c=(0,s.Et)(r.Evv,"calculateRatio")((e=>{var t,i;const n=null===(t=null==e?void 0:e.items[0])||void 0===t?void 0:t.originalImageWidth,r=null===(i=null==e?void 0:e.items[0])||void 0===i?void 0:i.originalImageHeight;if(!n||!r)return;const o=u(e.items[0].imageUrl);if(!o)return;const s=o.searchParams.get("c");if(s&&"4"!==s)return;const c=Number(n),d=Number(r);let l=1;for(;l<a.length&&Math.ceil(c*a[l].height)!==Math.ceil(d*a[l].width);++l)if(!(Math.ceil(c*a[l].height)>Math.ceil(d*a[l].width))){if(1==l)break;const e=1*c/d;Math.abs(e-a[l].width/a[l].height)>=Math.abs(e-a[l-1].width/a[l-1].height)&&(l-=1);break}l==a.length&&(l-=1),e.template.desiredRatio=a[l].ratio})),d=(0,s.Et)(r.Evv,"reduceWidthOrHeightAndUpdateUrl")(((e,t,i,n)=>{const r=(0,o.Z)(a,(e=>e.ratio===t));if(1!==r.length)return;const s=r[0],c=i?e.ext.originalImageWidth:e.originalImageWidth,d=i?e.ext.originalImageHeight:e.originalImageHeight;if(!c||!d)return;const u=1*c/d,p=1*s.width/s.height,g={w:c,h:d};u>=p?g.w=Math.round(d*p):g.h=Math.round(c/p);const h={river:300,infopane:604};return g.w>h[n]?(g.h=Math.round(g.h*h[n]/g.w),g.w=h[n]):(g.h=h[n]*p,g.w=h[n]),l(g.h,g.w,e,i),g})),l=(0,s.Et)(r.Evv,"updateUrlWithDesiredSize")(((e,t,i,n)=>{const r=u(n?i.url:i.imageUrl);r&&(r.searchParams.set("h",e),r.searchParams.set("w",t),r.searchParams.set("c","4"),n?i.url=r.href:i.imageUrl=r.href)})),u=(0,s.Et)(r.Evv,"constructUrl")((e=>{let t;try{t=new URL(e)}catch(i){try{t=new URL(`https://${e}`)}catch(e){return}}return t}))},87618:function(e,t,i){"use strict";i.d(t,{F8:function(){return P},Sj:function(){return I},vy:function(){return k}});var n=i(88875),r=i(13578),o=i(31011),s=i(13042),a=i(4935),c=i(26415),d=i(99753),l=i(60260),u=i(92773);const p=(0,u.Et)(c.Evv,"checkConfigType")(((e,t)=>t.template.configType===e.configType)),g=(0,u.Et)(c.Evv,"checkRegion")(((e,t)=>e.region.includes(t.region))),h=(0,u.Et)(c.Evv,"checkAllAssets")(((e,t)=>!!(0,r.Z)(e.requiredAssetsAll)||e.requiredAssetsAll.every((e=>{var i,o;return!(0,r.Z)(null===(i=null==t?void 0:t.items[0])||void 0===i?void 0:i.assets)&&Object.keys(null===(o=null==t?void 0:t.items[0])||void 0===o?void 0:o.assets).some((t=>e===n.aT[t]))})))),m=(0,u.Et)(c.Evv,"checkAnyAssets")(((e,t)=>!!(0,r.Z)(e.requiredAssetsAny)||e.requiredAssetsAny.some((e=>{var i,o;return!(0,r.Z)(null===(i=null==t?void 0:t.items[0])||void 0===i?void 0:i.assets)&&Object.keys(null===(o=null==t?void 0:t.items[0])||void 0===o?void 0:o.assets).some((t=>e===n.aT[t]))})))),f=(0,u.Et)(c.Evv,"checkAdCount")(((e,t)=>t.items.length<=(e.maxAdCount||1))),v=(0,u.Et)(c.Evv,"checkMultiImage")(((e,t)=>{var i,n;return!e.multiImage||(null===(n=null===(i=t.items[0])||void 0===i?void 0:i.images)||void 0===n?void 0:n.length)>1})),y=(0,u.Et)(c.Evv,"checkDiscountThreshold")(((e,t)=>{var i;return!e.discountThreshold||!(null===(i=t.items[0])||void 0===i?void 0:i.assets)||e.discountThreshold<=t.items[0].assets.discount})),b=(0,u.Et)(c.Evv,"checkRatio")(((e,t)=>{var i,n;return!e.supportedImageRatios||(null===(i=e.supportedImageRatios)||void 0===i?void 0:i.includes(null===(n=null==t?void 0:t.template)||void 0===n?void 0:n.desiredRatio))})),S=(0,u.Et)(c.Evv,"setTemplate")(((e,t)=>{t.template.templateType=e.template instanceof Function?e.template(e,t):e.template,t.template.dynamicRenderingConfig=e.dynamicRenderingConfig&&e.dynamicRenderingConfig(t)})),C=(0,u.Et)(c.Evv,"filterAssets")(((e,t)=>{var i;const c=(0,o.Z)([...n.fs,...(null===(i=null==t?void 0:t.template)||void 0===i?void 0:i.allowedAssets)||[],...e.supportedAssets||[],...e.requiredAssetsAll||[],...e.requiredAssetsAny||[]]);(0,s.Z)(t.items,(e=>{if((0,r.Z)(c)||(0,r.Z)(null==e?void 0:e.assets))return void delete e.assets;const t=(0,a.Z)(e.assets,((e,t,i)=>(c.includes(n.aT[i])&&(e[i]=t),e)),{});e.assets=t}))})),w=(0,u.Et)(c.Evv,"updateImageRatio")(((e,t)=>{if(!e.supportedImageRatios||!e.targetImageRatio)return;let i;const n=d.cE.includes(t.region)?"infopane":"river";t.items.forEach((t=>{const r=(0,l.GM)(t,e.targetImageRatio,!1,n);i||(i=r),t.images&&(0,s.Z)(t.images,(t=>{t.ext&&t.ext.originalImageWidth&&t.ext.originalImageHeight&&(0,l.GM)(t,e.targetImageRatio,!0,n)}))})),(null==i?void 0:i.h)&&(null==i?void 0:i.w)&&(t.template.desiredHeight=i.h.toString(),t.template.desiredWidth=i.w.toString())})),T=(0,u.Et)(c.Evv,"trimProviderName")(((e,t)=>{t&&t.items&&t.items.forEach((e=>{e.providerName&&(e.providerName=k(e.providerName))}))})),k=(0,u.Et)(c.Evv,"trimProviderNameHelper")((e=>{if(!e)return"";const t=e.trim();try{let e=t;t.startsWith("http://")||t.startsWith("https://")||(e="https://"+t),new URL(e);const i=t.match(/^(www\.)?([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+)/);return i?t.length-i[2].length==1?t:i[2]:t}catch(e){return t}})),A=(0,u.Et)(c.Evv,"updateLayoutColor")(((e,t)=>{t&&t.items&&t.items.forEach((e=>{e.images&&e.images.forEach((e=>{e&&e.ext&&e.ext.layoutColor&&(e.ext.layoutColor.startsWith("#")||(e.ext.layoutColor="#"+e.ext.layoutColor))}))}))})),I=[p,g,h,m,f,y,v,b],P=[S,C,w,T,A]},99753:function(e,t,i){"use strict";i.d(t,{yp:function(){return d},vn:function(){return b},KB:function(){return w},XP:function(){return C},cE:function(){return v},Ue:function(){return T},PY:function(){return _},Up:function(){return k},dj:function(){return U},FH:function(){return y},FC:function(){return S},rf:function(){return W},Fg:function(){return f},R:function(){return O},JU:function(){return M},J2:function(){return R},uH:function(){return D},ZV:function(){return j},xP:function(){return B},$u:function(){return x},E5:function(){return $},n_:function(){return m}});var n=i(29666),r=i(27679),o=i(88087);const s=(0,r.ZV)(o.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"rating",displayReviewCount:!1}]}]),a=(0,r.RM)(o.$,"gradient-mask",{name:"gradient-mask",setClickBeacon:!0,layout:{mode:"pixel",bottom:"0",width:"300",zIndex:4},children:[{name:"special-offer",isDrConfig:!0,layout:{mode:"block",display:"inline-block",position:"relative",marginBottom:"8",marginInlineStart:"16",marginInlineEnd:"16",width:"150",zIndex:5}},{name:"ad-title",setClickBeacon:!0}]}),c=(0,r.ZV)(o.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"free-shipping",color:"#036ac4",layout:{mode:"pixel",bottom:"265"}}]}]);var d,l=i(90351),u=i(24526),p=i(26415),g=i(94792),h=i(92773);!function(e){e.river="river",e.infopane="infopane",e.resriver="resriver",e.rivercms="river_cms",e.riverdb="riverdb",e.riverAmplify="river_amp",e.restoday="restoday",e.todaystripe="todaystripe",e.newsstripe="News-Stripe",e.entertainmentstripe="Entertainment-Stripe",e.sportsstripe="Sports-Stripe",e.lifestylestripe="Lifestyle-Stripe",e.rightRail="rightRail",e.rightRailAmplify="rr_amp",e.resinfopane="resinfopane",e.infopanetab="infopane-tab",e.infopanecms="infopane_cms",e.sliver="sliver",e.rightrail="rightrail",e.eoab="eoab",e.rectangle="rectangle",e.inarticle="inarticle",e.WatchInFeed="intranative",e.eoabmsx="eoabmsx",e.interstitialgallery="interstitialgallery"}(d||(d={}));const m=[d.rightrail,d.eoab,d.rectangle,d.inarticle,d.eoabmsx,d.interstitialgallery,d.WatchInFeed],f=(d.riverdb,[d.river,d.resriver,d.rivercms,d.rightRail,d.rightrail]),v=[d.infopane,d.resinfopane,d.infopanetab,d.infopanecms],y=[d.restoday,d.todaystripe,d.newsstripe,d.entertainmentstripe,d.sportsstripe,d.lifestylestripe],b=[...f,...v],S=[...f,...y,d.riverdb,d.rightRail,d.rightrail,d.sliver,d.rectangle,d.eoab,d.inarticle],C={default:20,discScribble10:10,hotspotSingle10:10,saleHighlight15:15,gamification:5},w=10,T=e=>!!(e&&e.items&&e.items[0]&&e.items[0].assets&&e.items[0].assets.transparentImage&&e.items[0].assets.transparentImage.url&&e.items[0].images&&e.items[0].images[0]&&e.items[0].images[0].ext&&e.items[0].images[0].ext.layoutColor),k=e=>((e,t)=>{var i,n,r;const o=null===(r=null===(n=null===(i=null==e?void 0:e.items)||void 0===i?void 0:i[0])||void 0===n?void 0:n.assets)||void 0===r?void 0:r.transparentImage,s=null==o?void 0:o.w,a=null==o?void 0:o.h;return!!((null==o?void 0:o.url)&&null!=o&&a>0&&s>0)&&t(s,a)})(e,((e,t)=>e/t<1.4)),A=e=>(0,l.Z)(e,"items[0].assets.rating"),I=e=>(0,l.Z)(e,"items[0].assets.specialOffer"),P=e=>(0,l.Z)(e,"items[0].assets.freeShipping"),E=e=>(0,l.Z)(e,"items[0].assets.discount"),O=e=>A(e)?s:I(e)?a:P(e)?c:void 0,M=e=>A(e)?n.SI.ComboRating:I(e)?n.SI.ComboSpecialOffer:P(e)?n.SI.ComboFreeShipping:void 0,x=(e,t)=>{var i;t&&(e.enableNativeAdWC=!0);const n=null===(i=null==e?void 0:e.items[0])||void 0===i?void 0:i.assets;(null==n?void 0:n.rating)?e.items[0].assets=(0,u.Z)(n,["rating"]):(null==n?void 0:n.specialOffer)?e.items[0].assets=(0,u.Z)(n,["specialOffer"]):(null==n?void 0:n.discount)&&(null==n?void 0:n.discount)>=C.saleHighlight15?e.items[0].assets=(0,u.Z)(n,["discount"]):(null==n?void 0:n.freeShipping)&&(e.items[0].assets=(0,u.Z)(n,["freeShipping"]))},D=e=>A(e)?n.SI.ComboRatingNonDR:I(e)?n.SI.ComboSpecialOfferNonDR:E(e)&&E(e)>=C.saleHighlight15?n.SI.ComboSaleHighlightNonDR:P(e)?n.SI.ComboFreeShippingNonDR:n.SI.Default,R=e=>A(e)?n.SI.ComboRatingNonDRControl:I(e)?n.SI.ComboSpecialOfferNonDRControl:E(e)&&E(e)>=C.saleHighlight15?n.SI.ComboSaleHighlightNonDRControl:P(e)?n.SI.ComboFreeShippingNonDRControl:n.SI.Default,L=e=>(0,l.Z)(e,"items[0].assets.sold"),F=e=>(0,l.Z)(e,"items[0].assets.returnPolicy"),N=e=>(0,l.Z)(e,"items[0].assets.condition"),B=e=>L(e)?n.SI.ComboSoldNonDR:F(e)?n.SI.ComboReturnPolicyNonDR:N(e)?n.SI.ComboConditionNonDR:n.SI.Default,j=e=>L(e)?n.SI.ComboSoldNonDRControl:F(e)?n.SI.ComboReturnPolicyNonDRControl:N(e)?n.SI.ComboConditionNonDRControl:n.SI.Default,$=(e,t)=>{var i;t&&(e.enableNativeAdWC=!0);const n=null===(i=null==e?void 0:e.items[0])||void 0===i?void 0:i.assets;(null==n?void 0:n.sold)?e.items[0].assets=(0,u.Z)(n,["sold"]):(null==n?void 0:n.returnPolicy)?e.items[0].assets=(0,u.Z)(n,["returnPolicy"]):(null==n?void 0:n.condition)&&(e.items[0].assets=(0,u.Z)(n,["condition"]))},U=(0,h.Et)(p.Evv,"modifyImageUrlForResponsiveImageSizingTemplate")(((e,t)=>{var i,r,o,s,a;const c=null===(i=null==e?void 0:e.items)||void 0===i?void 0:i[0],d=null===(r=c.assets)||void 0===r?void 0:r.price;if(e.template.templateType=n.SI.Default,c&&!d){const i=G(parseFloat(c.originalImageHeight),parseFloat(c.originalImageWidth),c.imageUrl,e.template.responsiveImageSizingTemplateConfigs);i&&i.imageUrl!==c.imageUrl&&z(null===(o=null==i?void 0:i.responsiveImageSizingTemplateConfig)||void 0===o?void 0:o.maxHeight,(0,g.O1)(null===(a=null===(s=e.items)||void 0===s?void 0:s[0])||void 0===a?void 0:a.title))&&(e.enableResponsiveImageSize=!0,e.template.templateType=n.SI.ResponsiveImageSizing,t||(e.responsiveImageSizingTemplateConfig=i.responsiveImageSizingTemplateConfig,e.items[0].imageUrl=i.imageUrl))}})),H=(0,h.Et)(p.Evv,"isDescriptionShowingHelper")(((e,t)=>{var i,n,r,o;const s=null===(n=null===(i=e.items)||void 0===i?void 0:i[0])||void 0===n?void 0:n.description,a=null===(o=null===(r=e.items)||void 0===r?void 0:r[0])||void 0===o?void 0:o.title,c=(null==s?void 0:s.length)>1&&a!=s,l=d[e.region];return v.includes(l)?c:c&&(0,g.O1)(a)<=t})),_=(0,h.Et)(p.Evv,"isDescriptionShowing")(((e,t)=>H(e,t)?n.SI.ResponsiveDescription:n.SI.Default)),W=(0,h.Et)(p.Evv,"pickRandomTemplateWithDensity")(((e,t,i,n)=>{if(Math.random()>n)e.enablePattern=!1,e.template.templateType=i;else{const i=t.length,n=Math.floor(Math.random()*i);e.template.templateType=t[n],e.enablePattern=!0}})),z=(0,h.Et)(p.Evv,"isTitleLineMeetRequire")(((e,t)=>!(!e||!t)&&(225===e&&t<=1||200===e&&t<=2))),G=(0,h.Et)(p.Evv,"modifyImageUrl")(((e,t,i,n)=>{if(!(e&&t&&i&&i.startsWith("https://www.bing.com/th")))return{imageUrl:i};const r=V(i),o=i.split("?")[0];if(!n||0===n.length)return{imageUrl:i};for(let i=0;i<n.length;i++){const s=n[i],a=t/e;if(a>=s.lowerBound&&a<=s.placementRatio){return{imageUrl:`${o}?id=${r.id}${r.pid?`&pid=${r.pid}`:""}&w=${s.maxWidth}`,responsiveImageSizingTemplateConfig:s}}if(a>s.placementRatio&&a<=s.upperBound){return{imageUrl:`${o}?id=${r.id}${r.pid?`&pid=${r.pid}`:""}&h=${s.maxHeight}`,responsiveImageSizingTemplateConfig:s}}}return{imageUrl:i}})),V=(0,h.Et)(p.Evv,"parseImageUrl")((e=>{if(!e)return;const t=new URL(e),i=new URLSearchParams(t.searchParams),n={};return i.forEach(((e,t)=>{["id","pid"].includes(t)&&(n[t]=e)})),n}))},95592:function(e,t,i){"use strict";i.d(t,{Bi:function(){return l},En:function(){return o},IA:function(){return d},Yf:function(){return s},c5:function(){return u},lO:function(){return a}});var n=i(81765),r=i(18769);function o(e){return n.S7[e]||"Ad"}function s(e){let t="";if(!e)return t;try{const i=JSON.parse(e).tcb;i&&Array.isArray(i)&&i.forEach((e=>{e.includes("srtb")&&(t=e.replace("notify/clicked","notify/feedback"))}))}catch(e){t=""}return t}function a(e,t){if(!e.Promotions&&e.Promotions.length>0)return;const i={promotions:[]};return t?i.promotions[0]=c(e.Promotions[0]):i.promotions=e.Promotions.map((e=>c(e))),i}function c(e){const{images:t,longTitle:i,title:n,description:r,displayUrl:o,targetUrl:s,Beacons:a,brand:c,merchantCategory:d}=e,{imageUrl:l}=t&&t[0],u=a.map((e=>e.MIFeedbackurl)),p=a.map((e=>e.MVFeedbackurl)),g=a.map((e=>e.EventUrl.replace("{ACTION}","click")));return{region:"rr_amp",regionIndex:void 0,destinationUrl:s||"",imageUrl:l||"",tagLine:i||n,logoText:o||"",clickBeacons:JSON.stringify({tcb:g})||"",beaconsJson:JSON.stringify({tvb:p,trb:u,e:!0,tjb:[]})||"",images:t,brand:c,category:d}}function d(e,t){if(!function(e,t=0){return e.Promotions&&e.Promotions.length>t}(e))return;const i=e.Promotions[0],{images:n,longTitle:r,title:o,description:s,displayUrl:a,targetUrl:c,Beacons:d}=i,{height:l,width:u,imageUrl:p}=n[0];let g="",h="";g=l&&l.toString(),h=u&&u.toString();const m=d.map((e=>e.MIFeedbackurl)),f=d.map((e=>e.MVFeedbackurl)),v=d.map((e=>e.EventUrl.replace("{ACTION}","click"))),y=JSON.stringify({tcb:v}),b={region:"rr_amp",regionIndex:1,items:[],adServedUrls:m,visibilityUrls:f,beaconsJson:JSON.stringify({tvb:f,trb:m,e:!0,tjb:[]})},S={destinationUrl:c,imageHeight:g,imageUrl:p,imageWidth:h,title:r||o,description:s,prong2AmplifyBusinessName:a,clickBeacons:y};return b.items.push(S),b.imageHeight=g,b.imageWidth=h,b}function l(e,t){if(!e||!e.index||!e.region)return;const{adServedUrls:i,beaconsJson:r,index:a,items:c,jsTrackerUrls:d,locale:l,privacyUrl:u,providerId:p,region:g,visibilityUrls:h}=e,m={adServedUrls:i,beaconsJson:r,items:[],jsTrackerUrls:d,privacyUrl:u,providerId:p,region:g,regionIndex:a,visibilityUrls:h};m.adLabelText=o(l),m.isGreyAdsLabelEnabled=n.Eg.includes(l);let f="",v="";return c.forEach((e=>{const{adChoicesUrl:t,assets:i,clickBeacons:n,description:r,imageHeight:o,imageWidth:a,imageUrl:c,originalImageHeight:d,originalImageWidth:l,sourceName:u,title:p,uniqueId:g,url:h}=e;f=o&&o.toString(),v=a&&a.toString();const y={adChoiceIconUrl:t,assets:i,clickBeacons:n,destinationUrl:h,description:r,feedbackUrl:n&&s(n),imageHeight:f,imageUrl:c,imageWidth:v,originalImageHeight:d&&d.toString(),originalImageWidth:l&&l.toString(),providerName:u,title:p,uniqueId:g};m.items.push(y)})),m.imageHeight=f,m.imageWidth=v,m}function u(e,t){if(e.beaconsJson){new r.A(t).sendBeaconForAdServed({beaconsJson:e.beaconsJson,beaconsSupportHttpPOST:e.beaconsSupportHttpPOST})}}},94792:function(e,t,i){"use strict";i.d(t,{O1:function(){return s}});const n=2.255859375,r=(e,t=20)=>{if(!e||0===e.length)return 0;const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.13623046875,.3046875,.4375,.8,.6,.9,.8,.3,.4,.4328125,.5,.7,.4,.403125,.3,.6,.6,.403125,.6,.6,.7,.6,.6,.6,.6,.6,.3,.4,.6953125,.7,.6953125,.5,1,.8,.6046875,.7,.71875,.6,.503125,.7,.7359375,.3,.5,.7,.6,.925,.8,.8,.6,.9,.7,.6,.7,.703125,.8,1.1,.8,.8,.7,.4,.6,.3328125,.7,.6,.3,.5234375,.603125,.5,.603125,.6,.5,.603125,.6,.3,.5,.6,.3,.9,.6,.6,.603125,.603125,.4,.5,.5,.6,.7,.9,.7,.7,.6,.4,.3,.4,.7];return e.split("").map((e=>o(e,i,.5944274259868422,1.030769230769231))).reduce(((e,t)=>t+e))*t},o=(e,t,i,n)=>{const r=e.charCodeAt(0);return r<t.length?t[r]:a(e)?n:i},s=(e,t=260,i=20)=>{if(!e||0===e.length)return 0;const o=e.split(" ");let s=1,a=t;for(let e=0;e<o.length;e++){const c=r(o[e],i);c>a?(s+=1,a=t-c-n):c===a?(s+=1,a=t):a=a-c-n}return s},a=e=>/^[\u4e00-\u9fff\u3040-\u30ff\u1100-\u11ff\u3130-\u318f\uac00-\ud7af]$/.test(e)},68723:function(e,t,i){"use strict";i.d(t,{Ai:function(){return s},F8:function(){return a},GL:function(){return o},P$:function(){return n},mC:function(){return r},x7:function(){return c}});const n={id:"https://enterprisenews.microsoft.com",friendlyName:i(53578).Ak},r="https://ent-api.msn.com/news/companies/current/settings",o="Peregrine",s="AdminPortalSettings",a="AdminPortalUserLayoutCache",c="isContentFeedManagedByAdminPortal"},88087:function(e,t,i){"use strict";i.d(t,{$:function(){return s}});var n=i(9915),r=i(27679);const o={name:"default-template",children:[...n.u,{name:"gradient-mask",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]},s=(0,r.Tb)(o,"product-image",{imageMaskOn:!0})},27679:function(e,t,i){"use strict";i.d(t,{As:function(){return a},BH:function(){return o},FT:function(){return l},It:function(){return d},Oz:function(){return n},RM:function(){return s},Tb:function(){return c},ZV:function(){return u}});class n{}n.byName=e=>t=>(null==t?void 0:t.name)===e;class r{}function o(e,t,i=r.identity()){return p(e,[{condition:t,action:i}])}function s(e,t,i){return o(e,n.byName(t),r.replaceWith(i))}function a(e,t,i){const o=[];for(let e=0;e<t.length;e++)o.push({condition:n.byName(t[e]),action:r.replaceWith(i[e])});return p(e,o)}function c(e,t,i){return o(e,n.byName(t),r.extendFields(i))}function d(e,t,i){const o=[];for(let e=0;e<t.length;e++)o.push({condition:n.byName(t[e]),action:r.extendFields(i[e])});return p(e,o)}function l(e,t,i,s){return o(e,n.byName(t),r.spliceChildren(i,s))}function u(e,t,i,s=[],a){return o(e,n.byName(t),r.spliceChildren(i,s,a))}function p(e,t){if((e=t.reduce(((e,t,i,n)=>{const{condition:r,action:o}=t;return r(e)?(n[i]=null,o(e)):e}),e)).children){const i=e.children.map((e=>p(e,t.filter((e=>e)))));return Object.assign(Object.assign({},e),{children:i})}return e}r.identity=()=>e=>e,r.replaceWith=e=>()=>e,r.extendFields=e=>t=>Object.assign(Object.assign({},t),e),r.spliceChildren=(e,t=[],i)=>n=>{const r=[...n.children||[]];return r.splice(e,i,...t),Object.assign(Object.assign({},n),{children:r})}},9915:function(e,t,i){"use strict";i.d(t,{u:function(){return n}});const n=[{name:"product-image",layout:{position:"absolute",left:0,top:0,width:"300",height:"225",zIndex:1}},i(18297).l]},18297:function(e,t,i){"use strict";i.d(t,{l:function(){return n}});const n={name:"footer",layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%"},children:[{name:"start-action-part",children:[{name:"ad-label",layout:{marginInlineStart:"16",marginInlineEnd:"6",zIndex:5}},{name:"provider-name",layout:{flex:1,minWidth:0,zIndex:5},customStyleClass:"white-12-flex-layout"}]},{name:"end-action-part",children:[{name:"disclaimer",layout:{zIndex:5}},{name:"ad-choice",layout:{zIndex:5}},{name:"see-more",layout:{marginInlineEnd:"16",zIndex:5}}]}]}},64553:function(e,t,i){"use strict";i.d(t,{v:function(){return n}});const n={name:"default-infopane-template",children:[{name:"product-image",layout:{position:"absolute",left:"0",top:"0",zIndex:1,width:"100%",height:"304"},imageMaskOn:!0,imageMaskOpacity:"0.1"},{name:"gradient-mask",height:"176",paddingBottom:"0",paddingTop:"0",layout:{position:"absolute",bottom:"0",width:"100%",zIndex:2},useDynamicStyle:!0},{name:"ad-title",lineHeight:"36",titleFontSize:"28",layout:{position:"absolute",bottom:"53",width:"100%",zIndex:2}},i(18297).l]}},80163:function(e,t,i){"use strict";i.d(t,{q:function(){return o}});var n=i(70193);const r={DisplayAdsWC:(0,n.V8)("display-ads"),ViewsNativeAd:(0,n.V8)("views-native-ad")};function o(e){return r[e]}},743:function(e,t,i){"use strict";function n(e){for(const[t,i]of e)window[t]=i;const t=new CustomEvent(o,{detail:{adUniqueIds:Array.from(e.keys())}});document.dispatchEvent(t)}function r(e){for(const t of e)delete window[t]}i.d(t,{gL:function(){return o},gy:function(){return n},l$:function(){return r}});const o="nativeAdRendered"},70193:function(e,t,i){"use strict";i.d(t,{$H:function(){return l},V8:function(){return d},lj:function(){return c}});var n=i(36399);const r=/(a)(d)/gi,o=e=>String.fromCharCode(e+97),s=new Map,a=e=>{if(s.has(e))return s.get(e);const t=(e=>{let t,i="";for(t=Math.abs(e);t>26;t=t/26|0)i=o(t%26)+i;return(o(t%26)+i).replace(r,"$1-$2")})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,e)>>>0);return s.set(e,t),t},c=e=>`${p(e)}`,d=e=>`algo-${p(e)}`,l=(e,t)=>e&&(null===n.Z||void 0===n.Z?void 0:n.Z.getAdbStatus())?c(t):t,u=new Map,p=e=>{var t;return(t=e,u.has(t)||u.set(t,a(t)),u).get(e)}},33764:function(e,t,i){"use strict";i.d(t,{_t:function(){return o}});const n={neutralForegroundRestColor:"--neutral-foreground-rest",neutralFillHoverColor:"--neutral-fill-hover",neutralFillActiveColor:"--neutral-fill-active",adBackgroundColor:"--ad-background-color",gradientMidColor:"--gradient-mid-color",gradientEndColor:"--gradient-end-color"},r={"font-weight":"","z-index":"",flex:"","flex-grow":"","flex-shrink":"",order:""};function o(e,t){return null==t||"undefined"===t?"":(e=null!=n[i=e]?n[i]:i.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)),isNaN(Number(t))?`${e}:${t}`:`${e}:${t}${(e=>null!=r[e]?r[e]:"px")(e)}`);var i}},92773:function(e,t,i){"use strict";i.d(t,{Et:function(){return d},uj:function(){return l}});var n=i(68364),r=i(65135);function o(e){var t;return!(!/^.*{\s*return __awaiter/.test(String(e))&&!/^\([\w_$,\s]*?\) => __awaiter/.test(String(e)))||"AsyncFunction"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)}function s(e,t,i,s,a,c){if(r.M0.sendAppErrorEvent((0,n.Tr)(t,i||"",function(e,t){return`args: ${JSON.stringify(e)||""}\nerror: ${(null==t?void 0:t.stack)||(null==t?void 0:t.message)||""}`}(s,a))),!c)return;const d=c(...s,a);return o(e)?Promise.resolve(d):d}function a(e,t,i,n,r,a){try{return o(e)?e.call(this,...n).catch((o=>s(e,t,i,n,o,r))).finally((()=>{null==a||a(...n)})):e.call(this,...n)}catch(o){return s(e,t,i,n,o,r)}finally{o(e)||null==a||a(...n)}}function c(e,t){const i=Object.getOwnPropertyDescriptor(e.prototype,t);return i||{configurable:!0,enumerable:!0,writable:!0,value:e.prototype[t]}}const d=(e,t,i,n)=>(r,o,s)=>{const c=null==s?void 0:s.value;if("function"==typeof r)return function(...o){return a.call(this,r,e,t,o,i,n)};if("function"!=typeof c)return s;if(!e)throw Error("Parameter baseError is missed");return s&&(s.value=function(...r){return a.call(this,c,e,t,r,i,n)}),s},l=(e,t,i,n)=>r=>{var o;class s extends r{connectedCallback(){super.connectedCallback()}}const d=Object.assign(Object.assign({},Object.getOwnPropertyDescriptors(r.prototype)),Object.getOwnPropertyDescriptors(s.prototype));for(const r in d){if("constructor"===r||!(null===(o=d[r])||void 0===o?void 0:o.value))continue;if(!(s.prototype[r]instanceof Function))continue;const l=c(s,r),u=l.value;l.value=function(...r){return a.call(this,u,e,t,r,i,n)},Object.defineProperty(s.prototype,r,l)}return s}},36159:function(e,t,i){"use strict";i.d(t,{Cw:function(){return s},Km:function(){return a}});var n=i(33940),r=i(92773),o=i(26415);const s={EventType:"uat",Timestamp:"uats",Duration:"uad",Element:"uae",Message:"uam"};class a{fireImpressionLog(e,t,i){(null==e?void 0:e.id)&&!a.impressionNativeAdIdSet.has(null==e?void 0:e.id)&&a.impressionLog&&(a.impressionLog(e,t,i),a.impressionNativeAdIdSet.add(null==e?void 0:e.id))}fireClickLog(e,t,i){a.clickLog&&a.clickLog(e,t,i)}saveUserActionBeacon(e="",t="{}",i="srtb.msn.com"){const n=JSON.parse(t),r=n&&n.trb;if(e&&r)for(let t=0;t<r.length;t++){if(!r[t].includes(i))continue;const n=new URL(r[t]);n.pathname=n.pathname.replace("served","useraction"),a.userActionBeaconsMap.set(e,n),a.startTimestampMap.set(e,(new Date).getTime())}}getUserActionBeacon(e=""){return a.userActionBeaconsMap.get(e)}populateBeaconUrl(e,t,i,n,r,o){var c,d,l,u,p,g,h;const m=this.getUserActionBeacon(e);if(!m)return"";for(const e of Object.values(s))null===(c=m.searchParams)||void 0===c||c.delete(e);if(i){const c=a.startTimestampMap.get(e),f={m:n,f:t};null===(d=m.searchParams)||void 0===d||d.set(s.EventType,i),null===(l=m.searchParams)||void 0===l||l.set(s.Timestamp,String(c?(new Date).getTime()-c:0)),null===(u=m.searchParams)||void 0===u||u.set(s.Duration,r||0),null===(p=m.searchParams)||void 0===p||p.set(s.Message,JSON.stringify(f)),null===(g=m.searchParams)||void 0===g||g.set(s.Element,(null===(h=null==o?void 0:o.tagName)||void 0===h?void 0:h.toLowerCase())||"")}return m}}a.impressionNativeAdIdSet=new Set,a.userActionBeaconsMap=new Map,a.startTimestampMap=new Map,(0,n.gn)([(0,r.Et)(o.a4J,"UserActionLog.fireImpressionLog")],a.prototype,"fireImpressionLog",null),(0,n.gn)([(0,r.Et)(o.a4J,"UserActionLog.fireClickLog")],a.prototype,"fireClickLog",null),(0,n.gn)([(0,r.Et)(o.a4J,"UserActionLog.saveUserActionBeacon")],a.prototype,"saveUserActionBeacon",null),(0,n.gn)([(0,r.Et)(o.a4J,"UserActionLog.getUserActionBeacon")],a.prototype,"getUserActionBeacon",null),(0,n.gn)([(0,r.Et)(o.a4J,"UserActionLog.populateBeaconUrl")],a.prototype,"populateBeaconUrl",null)},87:function(e,t,i){"use strict";var n;i.d(t,{v:function(){return n}}),function(e){e.CacheMissing="authCacheMissing",e.CacheExpired="authCacheExpired",e.OtherCacheError="authCacheError"}(n||(n={}))},49982:function(e,t,i){"use strict";i.d(t,{y:function(){return o}});var n=i(33940),r=i(87);class o{constructor(){this.AuthDataMap={}}getAuthDataFromCache(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(null==e?void 0:e.id))return{authToken:void 0,resource:e,error:{message:"inMemoryAuthCacheStrategy Resource Id is missing",status:r.v.OtherCacheError}};const t=Math.round(performance.now()),i=this.AuthDataMap[e.id],n=Math.round(performance.now());return i?this.isJwtTokenExpired(i.authToken)?{authToken:void 0,resource:e,error:{message:"inMemoryAuthCacheStrategy Cache is expired",status:r.v.CacheExpired},performance:{startTime:t,endTime:n}}:{resource:e,authToken:i.authToken,performance:{startTime:t,endTime:n}}:{authToken:void 0,resource:e,error:{message:"inMemoryAuthCacheStrategy Cache is missing",status:r.v.CacheMissing},performance:{startTime:t,endTime:n}}}))}setAuthDataToCache(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(null==e?void 0:e.id))return{resource:e,error:{message:"setAuthDataToCache Resource Id is missing",status:r.v.OtherCacheError}};const{authToken:i}=t,n=Math.round(performance.now());this.AuthDataMap[e.id]={authToken:i};const o=Math.round(performance.now());return{resource:e,performance:{startTime:n,endTime:o}}}))}removeAuthDataFromCache(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(null==e?void 0:e.id))return{resource:e,error:{message:"removeAuthDataFromCache Resource Id is missing",status:r.v.OtherCacheError}};const t=Math.round(performance.now());delete this.AuthDataMap[e.id];const i=Math.round(performance.now());return{resource:e,performance:{startTime:t,endTime:i}}}))}isJwtTokenExpired(e){if(!e)return;let t;try{t=JSON.parse(atob(e.split(".")[1]))}catch(e){return}return(null==t?void 0:t.exp)?1e3*t.exp<Date.now():void 0}}},9332:function(e,t,i){"use strict";i.d(t,{o:function(){return o}});var n=i(33940),r=i(87);class o{getAuthDataFromCache(e){return(0,n.mG)(this,void 0,void 0,(function*(){return{resource:e,error:{message:"inMemoryAuthCacheStrategy Resource Id is missing",status:r.v.CacheMissing}}}))}setAuthDataToCache(e){return(0,n.mG)(this,void 0,void 0,(function*(){return{resource:e}}))}removeAuthDataFromCache(e){return(0,n.mG)(this,void 0,void 0,(function*(){return{resource:e}}))}}},29803:function(e,t,i){"use strict";var n;i.d(t,{H:function(){return n}}),function(e){e.InteractionRequired="userInteractionRequired",e.AuthProviderNotSupported="authProviderNotSupported",e.MaySucceedOnRetry="fetchRetryableError",e.OtherError="authFetchError"}(n||(n={}))},83490:function(e,t,i){"use strict";i.d(t,{w:function(){return o}});var n=i(33940),r=i(29803);const o=(e,t=3,i=1e3)=>(t<0&&(t=0),{fetchAuthData:(o,a)=>(0,n.mG)(void 0,void 0,void 0,(function*(){var n;let c={resource:o,error:{status:r.H.OtherError}};a&&(t=0);for(let d=0;d<t+1&&(c=yield e.fetchAuthData(o,a),(null===(n=null==c?void 0:c.error)||void 0===n?void 0:n.status)===r.H.MaySucceedOnRetry);d++)yield s(i);return c}))}),s=e=>(0,n.mG)(void 0,void 0,void 0,(function*(){return new Promise((function(t){setTimeout(t,e)}))}))},25777:function(e,t,i){"use strict";i.d(t,{a:function(){return a}});var n,r=i(33940),o=i(29803),s=i(59294);!function(e){e[e.kNoError=0]="kNoError",e[e.kTokenFetchUserInteractionRequired=13]="kTokenFetchUserInteractionRequired",e[e.kTokenFetchProviderError=15]="kTokenFetchProviderError",e[e.kInteractionRequired=24]="kInteractionRequired",e[e.kUnsupportedSovereignty=60]="kUnsupportedSovereignty",e[e.kSovereigntyDetectionFailed=61]="kSovereigntyDetectionFailed"}(n||(n={}));class a{constructor(e){if(this.authCallerValidator=e,!e)throw new Error("Auth Caller Validator is not provided in EdgeChromiumFetchStrategy")}fetchAuthData(e,t=!1){return(0,r.mG)(this,void 0,void 0,(function*(){const i=yield this.authCallerValidator.validateAuthCaller(),{account:a,client:c}=i,d=(0,r._T)(i,["account","client"]);if(!a||!c)return Object.assign(Object.assign({},d),{resource:e});if(!(null==e?void 0:e.id))return{resource:e,error:{message:"Resource Id not provided.",status:o.H.OtherError}};const l=t?window.chrome.authPrivate.acquireAccessTokenWithUserInteraction:window.chrome.authPrivate.acquireAccessTokenSilently,u=new s.o,p={account_id:a.account_id,account_type:a.account_type,client_id:c.id,scope_or_resource:e.id},g=Math.round(performance.now());let h=-1;l(p,(e=>{u.set(e),h=Math.round(performance.now())}));const m=yield u.getResultAsync(),{access_token:f,is_success:v,error_info:y,is_token_valid:b}=m||{};if(v&&b)return{authToken:f,resource:e,callerId:d.callerId,performance:{startTime:g,endTime:h}};let S=o.H.OtherError,C=(null==y?void 0:y.error_string)||"Unknown Error";return v&&!b?(S=o.H.MaySucceedOnRetry,C="Invalid Auth Token returned"):(null==y?void 0:y.secondary_error)===n.kTokenFetchUserInteractionRequired||(null==y?void 0:y.secondary_error)===n.kInteractionRequired?(S=o.H.InteractionRequired,C="User interaction Required"):(null==y?void 0:y.secondary_error)===n.kTokenFetchProviderError?(S=o.H.AuthProviderNotSupported,C="Authentication provider not supported"):this.isRetryableError(y)&&(S=o.H.MaySucceedOnRetry,C="Retryable fetch error"),{resource:e,error:{message:C,status:S,internalError:y},callerId:d.callerId,performance:{startTime:g,endTime:h}}}))}isRetryableError(e){if(!(null==e?void 0:e.platform_error_code))return!1;const t=(e.platform_error_code>>>0).toString(16).toUpperCase();return void 0!==["CAA3","CAA7","CAA8","CAAD"].find((e=>t.startsWith(e)))||!!["CAA20005","CAA20008","CAA10001"].includes(t)}}},75270:function(e,t,i){"use strict";i.d(t,{BV:function(){return a},Kf:function(){return c},U:function(){return o}});var n=i(33940),r=i(29803);class o{constructor(e,t,i=(()=>{})){if(this.authDataFetchStrategy=e,this.authDataCacheStrategy=t,this.logAuthEvent=i,!e)throw new Error("Fetch Strategy is not provided in ModularAuthManager");if(!t)throw new Error("Cache Strategy is not provided in ModularAuthManager")}getAuthData(e,t=!1){return(0,n.mG)(this,void 0,void 0,(function*(){const i=yield this.authDataCacheStrategy.getAuthDataFromCache(e),r=i||{},{authToken:o}=r,s=(0,n._T)(r,["authToken"]);if(this.logAuthEvent(s,t),null==i?void 0:i.authToken)return i;const a=yield this.authDataFetchStrategy.fetchAuthData(e,t),c=a||{},{authToken:d}=c,l=(0,n._T)(c,["authToken"]);return this.logAuthEvent(l,t),(null==a?void 0:a.error)||this.authDataCacheStrategy.setAuthDataToCache(e,a).then((e=>{this.logAuthEvent(e,t)})),a}))}}let s={getAuthData:e=>(0,n.mG)(void 0,void 0,void 0,(function*(){return{resource:e,error:{message:"Auth manager is not initialized",status:r.H.OtherError}}}))};function a(e){s=e}function c(){return s}},67267:function(e,t,i){"use strict";i.d(t,{W:function(){return a}});var n=i(33940),r=i(84169),o=i(38601),s=i(33799);class a{constructor(e){if(this.authCallerGetter=e,!e)throw new Error("Auth Caller Getter is not provided in AadEdgeChromiumAuthCallerValidator")}validateAuthCaller(){return(0,n.mG)(this,void 0,void 0,(function*(){const{authCallerGetter:e}=this,{account:t,client:i}=(yield e())||{};return t?t.account_type===s.Qm.UNSUPPORTED_SOVEREIGNTY?{callerId:t.tenant_id,error:{message:"Edge unsupported sovereignty",status:o.$.UnsupportedSovereignty}}:t.account_type!==s.Qm.AAD?{callerId:t.tenant_id,error:{message:"Not valid AAD account.",status:o.$.OtherValidationError}}:(null==i?void 0:i.id)?(0,r.Yq)().IsChinaCompliance?{callerId:t.tenant_id,error:{message:"CN domain unsupported",status:o.$.CnDomain}}:{client:i,account:t,callerId:t.tenant_id}:{callerId:t.tenant_id,error:{message:"Client Id not provided.",status:o.$.OtherValidationError}}:{error:{message:"Account info not available",status:o.$.AccountInfoUnavailable}}}))}}},38601:function(e,t,i){"use strict";var n;i.d(t,{$:function(){return n}}),function(e){e.AccountInfoUnavailable="accountInfoUnavailable",e.UnsupportedSovereignty="unsupportedSovereignty",e.CnDomain="cnDomainUnsupported",e.OtherValidationError="otherValidationError"}(n||(n={}))},21952:function(e,t,i){"use strict";i.d(t,{oc:function(){return c}});var n=i(26415),r=i(22704),o=i(65135),s=i(38601),a=i(29803);const c=(e,t)=>{((e,t)=>{var i,r,c;if(!e||!o.M0)return;let d;if(!e.error)return;switch(e.error.status){case a.H.InteractionRequired:case s.$.CnDomain:case s.$.UnsupportedSovereignty:case s.$.AccountInfoUnavailable:d=n.N1G;break;case s.$.OtherValidationError:case a.H.OtherError:d=n.etM;break;default:return}const l=Object.assign(Object.assign({},e.error),{authPrivateApi:t?"acquireAccessTokenWithUserInteraction":"acquireAccessTokenSilently",resource:null===(i=null==e?void 0:e.resource)||void 0===i?void 0:i.friendlyName}),u={id:e.callerId||"",status:!1,name:(null===(r=null==e?void 0:e.resource)||void 0===r?void 0:r.friendlyName)||"",info:Object.assign(Object.assign({},d),{message:null===(c=e.error)||void 0===c?void 0:c.message,pb:Object.assign(Object.assign({},d.pb),{customMessage:JSON.stringify(l)})})};o.M0.sendAuthEvent(u)})(e,t),((e,t)=>{var i,r;if(!e||!o.M0)return;if(!e.error)return;let c;switch(e.error.status){case a.H.InteractionRequired:case s.$.AccountInfoUnavailable:c=n.N1G;break;case s.$.OtherValidationError:case a.H.OtherError:c=n.etM;break;default:return}const d=Object.assign(Object.assign({},e.error),{authPrivateApi:t?"acquireAccessTokenWithUserInteraction":"acquireAccessTokenSilently",resource:null===(i=null==e?void 0:e.resource)||void 0===i?void 0:i.friendlyName});o.M0.sendAppErrorEvent(Object.assign(Object.assign({},c),{message:null===(r=e.error)||void 0===r?void 0:r.message,pb:Object.assign(Object.assign({},c.pb),{customMessage:JSON.stringify(d)})}))})(e,t),(e=>{var t,i;if(!e)return;const n=`Auth.AcquireAccessToken.${e.callerId}`,o=`${n}.Start`,s=`${n}.End`,{startTime:a,endTime:c}=e.performance||{},d=(0,r.Ou)();d&&(d[o]=(null===(t=e.performance)||void 0===t?void 0:t.startTime)||-1,d[s]=(null===(i=e.performance)||void 0===i?void 0:i.endTime)||-1,d[n]=c&&a?c-a:-1)})(e)}},4875:function(e,t,i){"use strict";i.d(t,{AN:function(){return c},VQ:function(){return d},bk:function(){return l},rZ:function(){return a}});var n=i(33940),r=i(53076),o=i(93450),s=i(84169);const a="stn",c="aad";function d(){const e=o._.getInstance().rootReducer.connector(r.z.SharedState);return!!e&&e.getCurrentState().useEnterpriseCompliance}function l(){return(0,n.mG)(this,void 0,void 0,(function*(){return(0,s.Yq)().AccountInfoPromise.then((e=>e&&e.tenant_id?e.oid?`Oid:${e.oid}@${e.tenant_id}`:`TID:${e.tenant_id}`:""))}))}},99347:function(e,t,i){"use strict";i.d(t,{$q:function(){return c},GL:function(){return d},I0:function(){return n},VT:function(){return o},X_:function(){return r},Yc:function(){return a},m2:function(){return s}});const n="at-bing",r="at-bing-dt",o="sign-in-active",s="initial-page-nav",a="sign-in-pending",c="sign-in-refreshed-page",d="authconstants-peregrine"},42821:function(e,t,i){"use strict";i.d(t,{Yb:function(){return s},Z6:function(){return o},w0:function(){return a}});var n=i(21050),r=i(89696);const o=(0,i(76323).p)((()=>(0,n.oA)("auth","auth"))),s=e=>(0,r.FF)(`Auth.${e}`,{logStart:!0,logDuration:!0,firstTimeOnly:!0}),a=(e,t)=>(0,r.hf)(`Auth.${e}`,t,!0)},88432:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var n=i(84169),r=i(90846),o=i(53079),s=i(33799),a=i(51671),c=i(31573);function d(e){n.jG.AuthCookieName=function(e){let t=n.jG.AuthCookieName;if(e)t=e.isAAD?"al_app_anon":"app_anon";else if((0,r.TJ)()){t=(0,o.XS)().accountType===s.Qm.AAD?"al_app_anon":"app_anon"}else t=(0,r.G5)()&&(0,a.xQ)()===s.Qm.AAD?"al_anon":"anon";return t}(e),(0,c.jW)(n.jG.AuthCookieName)}},98533:function(e,t,i){"use strict";i.d(t,{Gy:function(){return P},aH:function(){return C},cu:function(){return b},ks:function(){return S}});var n=i(33940),r=i(83097),o=i(12108),s=i(26415),a=i(2040),c=i(46336),d=i(84169),l=i(53079),u=i(93853),p=i(65337),g=i(67462),h=i(99347),m=i(65135),f=i(77162),v=i(87538);function y(){k(),A()}function b(e=null){const t=decodeURIComponent((0,g.ej)(r.IR.AppAnonCookieExists)),i=(0,g.ej)(a.nM),{child:n}=t&&(0,c.dW)(t)||{};if(("edgeChromium"!=d.jG.AppType||!t||0!=n)&&t&&(1===n||i)){const t=d.jG.CurrentRequestTargetScope;t&&t.audienceMode!==o.F.Kids&&(e&&e(),(0,v.Z)())}}function S(e,t=null,i=!1){return(0,n.mG)(this,void 0,void 0,(function*(){const n=(0,g.ej)(a.m$),r=!!(0,g.ej)(l.g8);if(i){if(n)return w(),void(yield O(t,!1,!0));yield O(t,r,!1)}else if(e){if(r||(0,g.sq)(l.g8,e,1,d.jG.HostPage.topDomain,"/",!0),!n)return void(yield O(t,!0,!1));y()}else{if(w(),n)return void(yield O(t,!1,!0));y()}}))}function C(){if(u.y7.getItem(h.Yc))return k(),void I();E()?x(h.$q):I(),x(h.Yc)}function w(){const e=d.jG.HostPage.topDomain;(0,g.sq)(l.g8,"",-1,e,"/",!0),(0,p.$o)().removeItem(h.I0)}function T(e){u.y7.removeItem(e)}function k(){T(h.VT)}function A(){T(h.Yc)}function I(){T(h.$q)}function P(){const e=parseInt(u.y7.getItem(h.m2));return T(h.m2),Number.isInteger(e)?e:0}function E(){return!!u.y7.getItem(h.VT)}function O(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){if(t!==i&&(yield(0,f.FI)()),E())return m.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.MCu.AuthRefreshBlockedError),{message:`Auth refresh blocked. TokenExists: ${t}, CookieExists: ${i}.`})),void y();u.y7.supported?(A(),M(),function(){const e=Date.now()-Math.round(window.performance.now());x(h.m2,e.toString())}(),m.M0.sendAppErrorEvent(s.XD),m.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.MCu.EstablishSignedInState),{message:`Sign In Refresh Required. TokenExists: ${t}, CookieExists: ${i}.`})),e&&e(),(0,v.Z)()):y()}))}function M(){x(h.VT)}function x(e,t="1"){u.y7.setItem(e,t)}},51671:function(e,t,i){"use strict";i.d(t,{KW:function(){return S},XJ:function(){return w},hC:function(){return C},rr:function(){return T},xQ:function(){return A}});var n=i(33940),r=i(53076),o=i(33799),s=i(73252),a=i(90846),c=i(53079),d=i(42821),l=i(93450),u=i(84754),p=i(72447),g=i(22704),h=i(96361),m=i(27003);const f="__SignInStateIsValid__",v="__SignInStatePromiseResolver__",y=()=>{m.Gq.set(f,new Promise((e=>{m.Gq.set(v,e)})))};y();let b=!1;function S(){const e=m.Gq.get(v);e&&e()}function C(){const e=(0,s.nP)().UserIsSignedIn;if(null!=e)return e;const t=l._.getInstance().rootReducer.connector(r.z.SharedState);return(t?t.getCurrentState().signedIn:o.Hy.NotSignedIn)===o.Hy.SignedIn}function w(){return k("getUserSignInState",(0,a.hk)())}function T(){return k("waitForSignInState",!0)}function k(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i=(0,s.nP)().UserIsSignedIn;if(null!=i)return i?o.Hy.SignedIn:o.Hy.NotSignedIn;const n=(0,d.Z6)(),a=n&&n.startMeasure(e).endMeasure;let c;if(t){if(c=(0,d.Yb)("GetSignInStateAsync"),(0,u.ZE)()||s.Al&&s.Al.CurrentFlightSet&&s.Al.CurrentFlightSet.has("prg-lowmemdhp")){const e=(0,g.Ou)();!b&&Object.prototype.hasOwnProperty.call(e,"Auth.GetSignInStateAsync-start")&&(e["Auth.GetSignInStateAsync-start"]-=(0,h.my)(),b=!0)}yield m.Gq.get(f)}const p=l._.getInstance().rootReducer.connector(r.z.SharedState),v=p?p.getCurrentState().signedIn:o.Hy.NotSignedIn;return a&&a(),c&&c(),v}))}function A(){if((0,a.TJ)()){const e=(0,c.XS)();return e.isSignedIn===o.Hy.SignedIn&&e.accountType}if((0,a.G5)())return(0,p.bW)()}},51403:function(e,t,i){"use strict";i.d(t,{a:function(){return a}});var n=i(33940),r=i(32050),o=i(33954),s=i(9791);const a=(0,s.Z)(((e,t)=>(0,n.mG)(void 0,void 0,void 0,(function*(){if(!e||!t||""===t.trim())return;const i={method:"GET",headers:c(e),mode:"cors",credentials:"omit"},n=`https://graph.microsoft.com/v1.0/users/${t}/photos/96x96/$value`;try{const e=yield(0,r.Sm)(decodeURIComponent(n),1e4,i);return e&&e.ok?URL.createObjectURL(yield e.blob()):(o.k.log(`dual-auth: ProfilePictureFetch: Fetch returned error.  Status: ${e.status} - ${e.statusText}`),null)}catch(e){return o.k.logError(`dual-auth: ProfilePictureFetch exception: ${e}`),null}}))),((e,t)=>t));function c(e){const t={};return e&&(t.Authorization=`Bearer ${e}`),t}},27002:function(e,t,i){"use strict";i.d(t,{OE:function(){return v}});var n=i(53076),r=i(83097),o=i(33799),s=i(26415),a=i(68364),c=i(41710),d=i(93450),l=i(51671),u=i(65135),p=i(90846),g=i(67462);function h(e){const t=d._.getInstance().rootReducer.connector(n.z.SharedState);if(!t)return void u.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.MCu.AuthSetupErrorInPage),{message:"finalizeSignInState called without using initSharedStateConnector to setup the ExperiencesSharedStateConnector for the page"}));const i=t.getCurrentState().signedIn;i!==e?(c.s.signedInStatus.getActionSender(t).send(e),u.M0.addOrUpdateTmplString(`auth-stateChange-${i}-${e}`)):c.s.signedInStatusConfirmed.getActionSender(t).send(),(0,l.KW)(),function(e){if((0,p.P8)()||(0,p.TJ)()||(0,p.qn)())return;const t=r.IR.AnonCookieExists,i=(0,g.ej)(t);e!==o.Hy.SignedIn||i?e===o.Hy.NotSignedIn&&i&&(0,a.H)(s.MCu.SignInStatusCookieMismatch,`Non signed in user still has ${t} cookie`):(0,a.H)(s.MCu.SignInStatusCookieMismatch,`Signed in user missing ${t} cookie`)}(e)}var m=i(42821);let f;f=f=[h];const v=e=>{f.forEach((t=>t(e))),(0,m.w0)("SetSignInState")}},10495:function(e,t,i){"use strict";i.d(t,{Jz:function(){return A},vr:function(){return T}});var n=i(33940),r=i(33799),o=i(33954),s=i(19388),a=i(26415),c=i(52144),d=i(90846),l=i(84169),u=i(53430),p=i(54297),g=i(72447),h=i(42821),m=i(79814),f=i(72344),v=i(59294),y=i(65135),b=i(3072),S=i(99347),C=i(27002);function w(e=!1){return(0,n.mG)(this,void 0,void 0,(function*(){const t=(0,h.Z6)(),i=t&&t.startMeasure("initiateSSOCore").endMeasure,n=(0,d.G5)(),r=n?"MSAL":"RPS";o.k.log(`dual-auth: initiateSSOCore: Starting ${r} auth flow ${e?"with timeout":""}`);const s=n?yield(0,p.pd)(e):yield k(),a=(0,p.T3)(s)?"Success":"Fail";return(0,b.Ov)(m.g4.singleSignOn,`initiateSSOCore: ${a} - SSO data from the ${r} auth flow ${e?"with timeout":""}`),i&&i({customSuffix:`${r}-${a}`}),s}))}function T(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=(0,h.Yb)("InitiateSSO"),i=yield w();if(t(),!e){const e=A(i);(0,C.OE)(e)}return i}))}const k=(0,i(9791).Z)((()=>(0,n.mG)(void 0,void 0,void 0,(function*(){if(c.A.get(c.U.CookieConsentStatus)!==f._.NotRequired)return Promise.resolve(null);const e=function(){const e=l.jG.CurrentMarket;let t=window.location.hostname;const i=window.location.origin;(t.toLowerCase().includes("localhost")||t.toLowerCase().includes("windows.msn.com")||t.toLowerCase().includes("ntp.msn.com"))&&(t="www.msn.com");const n=l.jG.UseOneServiceAnonAuthEndpoints?encodeURIComponent(`https://api.msn.${l.jG.IsChinaCompliance?"cn":"com"}/auth/cookie/silentpassport?apikey=${l.jG.OneServiceApiKey}&activityId=${l.jG.ActivityId}&scn=${l.jG.AuthCookieName}&ocid=${S.GL}&pwo=${encodeURIComponent(i)}&secure=true`):encodeURIComponent(`https://${t}/${e}/homepage/secure/silentpassport?secure=true`),r=l.jG.UseOneServiceAnonAuthEndpoints?"MBI_SSL":"lbi";return`https://login.live.com/login.srf?wa=wsignin1.0&checkda=1&wp=${r}&mkt=${e}&wreply=${n}`}(),t=(0,h.Yb)("SSOSilentRPS"),i=window.document.createElement("IFRAME");let n,p;i.id="sso_frame",i.style.width="1px",i.style.height="1px",i.style.position="absolute",i.style.display="none",i.src=e,window.document.body.appendChild(i);const m=new v.o,b=e=>{const t=e.data;o.k.log("dual-auth: Received ssoData from RPS auth flow: "+JSON.stringify(t,null,4)),t&&t.ssoStatus&&(t.accountType=r.Qm.MSA,p.call(window,n,b),window.document.body.removeChild(i),(0,d.jC)()&&Promise.all([(0,s.b1)(),(0,s.e3)()]).then((()=>{const e=t.ssoStatus==u.y&&t.memberName||void 0;(0,g.GQ)({userName:e}).then((t=>{e&&!t&&y.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.MCu.MsalSSOSilentRpsToMsal),{message:"ssoSilent failed when transitioning from RPS to MSAL auth flow"}))}))})),m.set(t))};window.addEventListener?(n="message",window.addEventListener(n,b,!1),p=window.removeEventListener):(n="onmessage",window.attachEvent(n,b),p=window.detachEvent);const C=yield m.getResultAsync();return t(),C}))));function A(e){return(0,p.T3)(e)?r.Hy.SignedIn:r.Hy.NotSignedIn}},53430:function(e,t,i){"use strict";i.d(t,{y:function(){return n}});const n="sso_completed"},11112:function(e,t,i){"use strict";i.d(t,{M:function(){return u}});var n=i(33940),r=i(33799),o=i(90846),s=i(53079),a=i(16854),c=i(392),d=i(73803),l=i(51671);function u(e){return(0,n.mG)(this,void 0,void 0,(function*(){let t,i,n;if(e)t=e.isMsa,i=e.isAAD,n=e.isSSO;else if((0,o.TJ)()){const e=(0,s.XS)();n=e.isSignedIn===r.Hy.SignedIn,n&&(t=e.accountType===r.Qm.MSA,i=e.accountType===r.Qm.AAD)}else if((0,o.G5)()){const e=(0,l.xQ)();t=e===r.Qm.MSA,i=e===r.Qm.AAD,n=!(0,a.YU)()}else t=(yield(0,l.XJ)())===r.Hy.SignedIn;const u={aadState:i?1:0,isSignedIn:t,isSso:n},p=function(e,t){let i;const n=(0,c.E)()===c.M.Web?"anon":"app_anon";let r=!1;t&&(r=(0,d.u6)(n));i=r?"AAD-AL":t?"AAD":e?"MSA":"NA";return i}(t,i),g=Object.assign(Object.assign({},u),{loginState:p});return Promise.resolve(g)}))}},77162:function(e,t,i){"use strict";i.d(t,{B0:function(){return P},B9:function(){return E},FA:function(){return k},FI:function(){return A},n2:function(){return O}});var n=i(33940),r=i(33799),o=i(53076),s=i(83097),a=i(84169),c=i(13110),d=i(94788),l=i(90846),u=i(73252),p=i(2040),g=i(53079),h=i(40504),m=i(41710),f=i(51671),v=i(72447),y=i(93450),b=i(65135),S=i(99347),C=i(67462),w=i(13578),T=i(42821);function k(e,t,i,r){return(0,n.mG)(this,void 0,void 0,(function*(){if(a.jG.IsChinaCompliance&&(0,c.Nv)("prg-no-auth-zhcn"))return;const n=(0,T.Z6)(),o=n&&n.startMeasure("updateAuthState").endMeasure;try{if(i||!d.yb&&!d.R0)yield A(r),yield I(t);else if((0,l.G5)())yield(0,v.GQ)(),yield I(t,!1);else{const e=yield(0,d.ot)({id:"appanoncookie"}),i=e&&e.payload&&e.payload.appAnonCookieExists;yield I(t,i)}}catch(t){yield I(),e(t)}o&&o()}))}function A(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){if((0,l.G5)())yield(0,v.GQ)();else if(function(){let e=!1;if(a.jG.UseOneServiceAuthEndpoints)e=!0;else if((0,l.TJ)()){const t=(0,g.XS)(),i=!!(0,C.ej)(s.IR.AppAnonCookieExists);e=t.accountType===r.Qm.MSA&&!i||t.accountType===r.Qm.AAD&&(0,h.vs)()}return e}()){const i=new URL(`https://api.msn.${a.jG.IsChinaCompliance?"cn":"com"}/auth/cookie/appanon`),n={credentials:"include"};e&&(n.headers=e),i.searchParams.set("apikey",a.jG.OneServiceApiKey),i.searchParams.set("ocid",t||S.GL),i.searchParams.set("activityId",a.jG.ActivityId),i.searchParams.set("scn","app_anon"),yield fetch(i.href,n)}else if("mmx"===a.jG.AppType){const e=(0,a.Yq)().HostPage,t=e&&e.hostName,i="int1.msn.com"===t||"int.msn.com"===t?t:"www.msn.com",n=(0,u.nP)().Locale;yield fetch(`https://${i}/spartan/${n}/getappanoncookie`,{credentials:"include"})}}))}function I(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){let i=!1;const n=(0,T.Z6)(),s=n&&n.startMeasure("handleSignInStateUpdateAsync").endMeasure;if((0,l.G5)()){const{accessToken:e}=((0,l.hk)()?yield(0,v.IY)():(0,l.aS)())||{},t=(0,l.me)(e);(0,w.Z)(t)||(i=!0,(0,d.mS)({id:"AuthHeaders",type:"command",payload:t}))}else if(i=null!=(0,C.ej)(p.m$),(0,l.TJ)()){(0,g.KO)();i=(0,g.XS)().isSignedIn===r.Hy.SignedIn}const a=i?r.Hy.SignedIn:r.Hy.NotSignedIn;!1===t&&a===r.Hy.SignedIn&&((0,d.mS)({id:"updatemyfeed"}),(0,d.mS)({id:"updatepdp"}),(0,d.mS)({id:"UpdateMyBriefing"}));const c=y._.getInstance().rootReducer.connector(o.z.SharedState);c.getCurrentState().signedIn!==a&&m.s.signedInStatus.getActionSender(c).send(a),(0,f.KW)(),void 0!==e&&e!==a&&b.M0.addOrUpdateTmplProperty("signInUpdate","1"),s&&s()}))}function P(){return(0,f.hC)()&&(!(0,l.G5)()||(0,f.xQ)()===r.Qm.MSA)}function E(){return(0,f.xQ)()===r.Qm.AAD}function O(){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(0,l.G5)())return!1;return(yield(0,f.rr)())===r.Hy.SignedIn&&(0,f.xQ)()===r.Qm.AAD}))}},62264:function(e,t,i){"use strict";i.d(t,{B:function(){return f}});var n=i(33940),r=i(7009),o=i(65337),s=i(73252),a=i(53079),c=i(67462),d=i(99347),l=i(98533),u=i(26415),p=i(65135),g=i(33379);const h="f3222e55-ab35-49de-81f3-88a3be08cf77",m="service::www.msn.com::mbi_ssl";function f(e,t,i=!1){return(0,n.mG)(this,void 0,void 0,(function*(){const f=window.chrome,y=f&&f.authPrivate,b=e&&e.accountType===r.l7.MSA;if(!y||!b)return yield(0,l.ks)(null,null,i),void(0,o.$o)().removeItem(d.I0);(0,g.N)()&&s.Al.IsPrerender&&"visible"!==document.visibilityState||(0,l.aH)();const S=yield function(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=(0,c.ej)(a.g8);return e?(yield(0,l.ks)(e),!0):(p.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.MCu.EdgeChromiumTokenNotPresentInLtCookie),{message:"MSA user, lt cookie not present.",pb:Object.assign(Object.assign({},u.MCu.EdgeChromiumTokenNotPresentInLtCookie.pb),{isPrerender:s.Al.IsPrerender,msnCookiePresent:e})})),!1)}))}(),C=function(){var e,t;const i=null===(e=(0,o.$o)())||void 0===e?void 0:e.getItem(d.I0),n=null===(t=(0,o.$o)())||void 0===t?void 0:t.getItem(d.X_);if(i&&n){const e=Number(n);if(e){const t=36e5,i=(new Date).getTime()-new Date(e).getTime();return Math.ceil(i/t)<12}}return p.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.MCu.BingTokenNotFoundInLocalStorage),{message:"MSA user, Bing token not found.",pb:Object.assign(Object.assign({},u.MCu.BingTokenNotFoundInLocalStorage.pb),{isPrerender:s.Al.IsPrerender,bingTokenFound:null!=i})})),!1}();if(!S){const r={account_id:e.accountId,account_type:e.accountType,client_id:t||h,scope_or_resource:m},o=yield v(r);if(o&&!o.is_success&&o.error_info&&0==o.error_info.primary_error&&0==o.error_info.platform_error_code&&""!=o.error_string&&(0,c.ej)(a.g8))return w=o.error_string,void p.M0.sendAppErrorEvent(Object.assign(Object.assign({},u.MCu.EdgeChromiumTokenAccessFailureLtCookieUsed),{message:"Access token fetch failed. Used LT cookie",pb:Object.assign(Object.assign({},u.MCu.EdgeChromiumTokenAccessFailureLtCookieUsed.pb),{errorMessage:w,isPrerender:s.Al.IsPrerender})}));yield function(e,t=!1){return(0,n.mG)(this,void 0,void 0,(function*(){yield(0,l.ks)(e&&e.is_success&&e.is_token_valid&&e.access_token,null,t)}))}(o,i)}var w,T;if(!C){const i={account_id:e.accountId,account_type:e.accountType,client_id:t||h,scope_or_resource:"service::bing.com::MBI_SSL"},n=yield v(i);(T=n)&&T.is_success&&T.is_token_valid&&T.access_token&&((0,o.$o)().setItem(d.I0,T.access_token),(0,o.$o)().setItem(d.X_,(new Date).getTime().toString()),(0,c.sq)(d.I0,"",-1,"msn.com","/",!0))}}))}function v(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=yield function(e){return new Promise((t=>{window.chrome.authPrivate.acquireAccessTokenSilently(e,(e=>{t(e)}))}))}(e);return t&&t.is_success||function(e,t){if(!e||!e.is_success){const i=t.scope_or_resource==m?u.MCu.EdgeChromiumTokenAccessFailure:u.MCu.EdgeChromiumBingTokenAccessFailure;p.M0.sendAppErrorEvent(Object.assign(Object.assign({},i),{message:"Failed to acquire MSA access token.",pb:Object.assign(Object.assign({},i.pb),{customMessage:e&&e.error_info})}))}}(t,e),t}))}},28803:function(e,t,i){"use strict";i.d(t,{h:function(){return u}});var n=i(49972),r=i(76323),o=i(49926),s=i(56786),a=i(65135),c=i(3072),d=i(82757);const l=(0,r.p)((()=>(0,d.vp)((0,o.AE)("MUID"),100)<2));function u(e,t,i=null){a.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:t,pb:Object.assign(Object.assign({},e.pb),{customMessage:(0,n.n)(i),authRecordTrail:l()&&(0,c.xI)()||void 0,tokenCacheState:(0,s.wX)()})}))}},82757:function(e,t,i){"use strict";i.d(t,{sm:function(){return w},lx:function(){return f},LT:function(){return y},Df:function(){return b},sA:function(){return S},nt:function(){return C},vp:function(){return T},nq:function(){return m},RH:function(){return v}});var n=i(33940),r=i(49926),o=i(46336);var s=i(37735),a=i(84169),c=i(90846),d=i(2040),l=i(79814),u=i(33799),p=i(76668),g=i(62281),h=i(67462);function m(e){const t=encodeURIComponent(JSON.stringify(e||{}));(0,h.sq)(s.sM,t,s.ac,a.jG.HostPage.topDomain,"/",!1,p.f.Strict),(0,c.yd)()}function f(e){if(e)return function(e){return e&&e.tenantId===l.bc}(e)?u.Qm.MSA:u.Qm.AAD}function v(e){return(0,n.mG)(this,void 0,void 0,(function*(){let t;if(e){t=(yield y()).find((t=>t.username===e))}else{const e=S();if(e){t=(yield y()).find((t=>b(t)===e))}}return t}))}function y(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=yield(0,g.Yu)();return yield e.handleRedirectPromise(),e.getAllAccounts()}))}function b(e){return e&&e.idTokenClaims&&e.idTokenClaims[l.an]}function S(){const e=(0,s.x6)();return e&&e.login_hint}function C(){const e=(()=>{const e=(0,r.AE)("lh",!0),t=e&&(0,o.dW)(e),{login_hint:i}=t||{};return i&&t})();return e&&e.login_hint}function w(){(0,h.sq)(d.cs,null,-1,a.jG.HostPage.topDomain,"/")}function T(e,t=1e3){let i=0;for(let t=0,n=e&&e.length;t<n;t++){i=(i<<5)-i+e.charCodeAt(t),i&=i}return i<0&&(i+=2147483647),i%t}},3072:function(e,t,i){"use strict";i.d(t,{Ov:function(){return A},pD:function(){return P},xI:function(){return I}});var n=i(33940),r=i(79814),o=i(53076),s=i(33799),a=i(65337),c=i(76323),d=i(46336),l=i(73252),u=i(37735),p=i(49926),g=i(2040),h=i(16854),m=i(55377),f=i(30323),v=i(16614),y=i(62515),b=i(82757),S=i(62281),C=i(93450),w=i(33954);let T;const k=(0,a.$o)();function A(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i={time:(new Date).toISOString(),action:e.toString(),result:t,state:yield O()};w.k.log(`dual-auth: authRecord entry - ${e}: ${t}`),function(e){if(!e)return void w.k.logError("dual-auth: authRecord is null or undefined");T||(T=E());T.push(e),P.cache.clear();const t=T.slice(-r.tk);k.setItem(r.tU,JSON.stringify(t))}(i)}))}function I(){return function(){if(T)return T;return T=E(),T}().slice(-r.tk)}const P=(0,c.p)((()=>(T||(T=E()),function(e){const t=";";let i={};if(!e)return i;return i={a:"",r:"",s:[],t:[]},e.forEach(((n,r)=>{i.a+=n.action+t,i.r+=function(e){if(!e)return null;if(e.match(/\bsuccess\b/i))return"S";if(e.match(/\bfailure\b/i))return"F";{let t=e.match(/tryInitiateEarlyAuth: Finalized sign in state (\w+) from auth-(\w+)/);return t?`EarlyAuth: ${t[1]} from ${t[2]}`:(t=e.match(/initiateSSOCore: (\w+) - SSO data from the (\w+) auth flow[^]*/),t?`SSO: ${t[1]} from ${t[2]}`:e.toString())}}(n.result)+t,i.s.push(function(e,t){if(!e)return{};if(e===t)return e;const i=(0,m.Z)((0,f.Z)(e),(0,f.Z)(t),v.Z);return(0,y.Z)(i)}(n.state,r>0?e[r-1].state:n.state)),i.t.push(function(e,t){if(!e)return;if(e===t)return e;const i=new Date(e),n=i&&i.getTime(),r=t&&new Date(t),o=r&&r.getTime();if(n&&o)return(n-o).toString()}(n.time,r>0?e[r-1].time:n.time))})),i}(T))));function E(){if(!k.supported)return void w.k.log("dual-auth: Local storage access is not supported");const e=k.getItem(r.tU);return(0,d.dW)(e)||[]}function O(){var e;return(0,n.mG)(this,void 0,void 0,(function*(){const t=l.Al.ClientSettings,i=(0,S.dn)(),n=i&&(0,b.lx)(yield(0,b.RH)())||(null===(e=(0,u.x6)())||void 0===e?void 0:e.account_type)||void 0,r=(0,p.AE)(u.sM),{login_hint:a}=r&&(0,d.dW)(r)||{},c=a&&0!==Object.keys(a).length;return{isSignedIn:(yield C._.getInstance().rootReducer.getDataConnector(o.z.SharedState)).getCurrentState().signedIn===s.Hy.SignedIn,accountType:n,signedInAccounts:i?yield M():void 0,storage:{aace:(0,p.AE)(g.m$),ace:(0,p.AE)(g.Li),als:(0,p.AE)(g.tX,!0),child:(0,p.AE)(g.nM),currentAccount:c,loginFlowMarker:(0,h.YU)(),logoutFlowMarker:(0,h.SY)(),editFlowMarker:(0,h.hU)(),osate:(0,p.AE)(g.cs)},appType:t&&t.apptype,pageType:t&&t.pagetype}}))}function M(){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(yield(0,S.Yu)()))return[-1];return(yield(0,b.LT)()).map((e=>(0,b.vp)(e.username)))}))}},79814:function(e,t,i){"use strict";i.d(t,{BS:function(){return c},Ic:function(){return r},QL:function(){return o},an:function(){return n},bc:function(){return u},g4:function(){return p},kQ:function(){return d},tU:function(){return s},tk:function(){return a},w6:function(){return l}});const n="login_hint",r=300,o=3600,s="authRecordTrail",a=10,c="InteractionRequiredAuthError",d="BrowserAuthError",l="no_tokens_found",u="9188040d-6c67-4c5b-b112-36a304b66dad";var p,g;!function(e){e.tryAcquire1STokenLite="ATL",e.acquireTokenSilent="ATS",e.tryAcquire1STokenProfileSwitch="ATP",e.clearAccountLinkingCookies="CAL",e.jwtSSOService="JWT",e.interactiveLogin="ILO",e.loginRedirect="LRD",e.loginPopup="LPP",e.logout="LGT",e.ssoSilent="SSL",e.singleSignOn="SSO",e.waitFor1SToken="W1S"}(p||(p={})),function(e){e[e.NotAttempted=0]="NotAttempted",e[e.Fail=1]="Fail",e[e.FailTrySSO=2]="FailTrySSO",e[e.Success=3]="Success"}(g||(g={}))},62281:function(e,t,i){"use strict";i.d(t,{Bj:function(){return M},Oo:function(){return D},Yu:function(){return x},dn:function(){return E},qW:function(){return O}});var n=i(33940),r=i(79814),o=i(33954),s=i(22704),a=i(19388),c=i(68364),d=i(26415),l=i(49972),u=i(59294),p=i(87711),g=i(53578),h=i(65337),m=i(84169),f=i(73252),v=i(90846),y=i(12884),b=i(33379),S=i(9791),C=i(13042),w=i(42821);const T="2.18.0";let k,A,I,P;function E(){return A}function O(e=!1){const t={scopes:["User.Read"],loginHint:"",redirectUri:R(e)};return e||Object.assign(t,Object.assign(Object.assign({},F()),{extraQueryParameters:{edge_suppress_profile_switch:"1"}})),t}function M(e){return{scopes:e,forceRefresh:!1,redirectUri:R(!0)}}k="localhost.msn.com"===(0,y.Td)(),P=(0,y.zw)().toLowerCase().endsWith(".cn"),I=((0,y.zp)().match(/\bpr=([\d]+)\b/)||{})[1];const x=(0,S.Z)((e=>(0,n.mG)(void 0,void 0,void 0,(function*(){yield function(){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(0,b.N)())return;let e;(0,v.lT)()&&(yield Promise.race([L.getResultAsync(),(0,a.b1)(),(0,p.Kb)(1e4).then((()=>e=!0))]),e&&(0,c.H)(d.MCu.DelayLoadTimeout,"Loading MSAL before TTVR in delay load"));const t=(0,w.Z6)(),i=t&&t.startMeasure("loadMsalScript").endMeasure;let n;const r=new Promise((e=>{n=e})),o=e=>{i&&i({customSuffix:e}),n()},s=U(`auth/msal-browser-${N()}.min.js`),u=(0,y.b0)(s);return u.onload=()=>o(),u.onerror=e=>{(0,c.H)(d.MCu.MsalFailedToLoadScript,"Error in loading MSAL script",(0,l.n)(e)),o("error")},document.head.appendChild(u),yield r}))}();const t=window.msal;A=!!t,t&&!B()&&function(e){const t=(0,h.$o)();t.keys().forEach((e=>{const i=e.match(/-[-]+/),n=i&&i[0].length;n>=2&&(2===n&&e.includes("accesstoken")||3===n&&e.includes("idtoken")||4===n&&e.includes("refreshtoken"))&&t.removeItem(e)}))}();const i=$()?{performanceTelemetryConfiguration:{samplingPrecentage:1}}:void 0;if(t&&t.PublicClientApplication){const n=new t.PublicClientApplication(function(e){const{tenantScope:t="Dual",tenantId:i}=e||{};let n;return n=i||("MSA"===t?"consumers":"AAD"===t?"organizations":"common"),{auth:{clientId:g.I4,authority:`https://login.microsoftonline.com/${n}`,redirectUri:R(),navigateToLoginRequestUrl:!0},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(e,t,i)=>{if(!i)switch(e){case"Error":return void o.k.logError("dual-auth: "+t.toString());case"Info":case"Verbose":case"Warning":return void o.k.log("dual-auth: "+t.toString())}}},tokenRenewalOffsetSeconds:r.Ic}}}(e),i);return function(e){if(!B()||!f.Al.CurrentFlightSet.has("prg-msal224-ts")&&!m.jG.IsDebug)return;let t=1;const i=(0,s.Ou)(),n=(e,n)=>i[`MSAL.${t}.${e}`]=n,r=e=>Math.round(10*e)/10;e.addPerformanceCallback((e=>{e.forEach((e=>{const i=e.name;n(`${i}-start`,r(e.startTimeMs-performance.timeOrigin)),n(i,r(e.durationMs)),n("meta",`c:${e.fromCache?1:0}-v:${e.startPageVisibility}-ok:${e.success?1:0}`),n("cv",e.correlationId);const o="DurationMs";(0,C.Z)(e,((e,t)=>{if(t.endsWith(o)){const i=t.substring(0,t.length-o.length);n(`fn.${i}`,e)}})),t++}))}))}(n),n}}))));function D(){L.set()}function R(e){return U(e?"auth/auth-redirect-blank.html":"0/auth/auth-redirect.html","https://"+(!!(0,y.Td)().match(/\.msn\.(com|cn)$/i)?(0,y.zw)():"www.msn."+(P?"cn":"com")),!1)}const L=new u.o;function F(){const e={appType:m.jG.AppType,authRedirJsVer:"2.14",buildVersion:m.jG.BuildVersion,debug:m.jG.IsDebug?1:void 0,msalJsVer:N(),pr:I,returnUrl:(0,y.l4)()};return{state:encodeURIComponent(JSON.stringify(e))}}function N(){return $()?"1p-2.24.0":j()?"2.24.0":T}function B(){return j()||$()}function j(){return f.Al.CurrentFlightSet.has("prg-msal224-b")}function $(){return f.Al.CurrentFlightSet.has("prg-msal224-1p")}function U(e,t="https://assets.msn."+(P?"cn":"com"),i=!0){let n="/latest",r=t;I&&i?n=`/pr-${I}`:k&&(n="",r=`https://${(0,y.zw)()}`);return`${r}/staticsb/statics${n}/${e}`}},72447:function(e,t,i){"use strict";i.d(t,{tE:function(){return V},bW:function(){return G},x4:function(){return q},GQ:function(){return $},vW:function(){return H},IY:function(){return z}});var n,r=i(33940),o=i(79814),s=i(21050),a=i(33954),c=i(49972),d=i(26415),l=i(59294),u=i(87711),p=i(76323),g=i(16854),h=i(40504),m=i(37735),f=i(90846),v=i(56786),y=i(82757),b=i(62281),S=i(42821),C=i(84169),w=i(2040),T=i(3072),k=i(99347),A=i(67462),I=i(28803);function P(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const i=t&&t.accessToken,n="Acquire"===e;if(!i&&n){const e="Invalid access token in jwtSSOCore";return(0,T.Ov)(o.g4.jwtSSOService,e),void(0,I.h)(d.MCu.Msal1SJwtSSOError,e)}let r,s;try{r=yield fetch(`https://api.msn.${C.jG.IsChinaCompliance?"cn":"com"}/auth/token/v2/jwtsso?apikey=${C.jG.OneServiceApiKey}&ocid=${k.GL}&activityId=${C.jG.ActivityId}`,{method:n?"POST":"DELETE",credentials:"include",body:JSON.stringify({userAccessToken:i})||void 0,headers:(0,f.me)(i)||void 0});n!==!!(0,A.ej)(w.cs)&&(s=new Error(`${n?"Expected":"Unexpected"} cookie ${w.cs} is ${n?"missing":"still present"} after ${e} JwtSSO call`))}catch(e){s=e}const a=!s&&r&&r.ok?null:`Error in ${e} mode in jwtSSO call. ${s||""}`;a&&(0,I.h)(d.MCu.Msal1SJwtSSOError,a),(0,T.Ov)(o.g4.jwtSSOService,`${a||"Success"}`)}))}!function(e){e.Acquire="Acquire",e.Delete="Delete"}(n||(n={}));var E=i(392),O=i(73803);const M=`apikey=${C.jG.OneServiceApiKey}&ocid=Peregrine&it=${(0,E.E)()}&activityId=${C.jG.ActivityId}`;function x(){return(0,s.fW)((()=>function(){return(0,r.mG)(this,void 0,void 0,(function*(){let e,t;try{e=yield fetch(`https://api.msn.${C.jG.IsChinaCompliance?"cn":"com"}/auth/cookie/clearALCookies?${M}`,{method:"DELETE",credentials:"include"}),(0,O.EX)();if((0,O.u6)()){const e=decodeURIComponent((0,A.ej)(w.tX));t=new Error(`Account linking cookie ${e} indicates account is still linked after clearALCookies call`)}}catch(e){t=e}const i=!t&&e&&e.ok&&200===e.status?null:`Error in clearALCookies call. ${t||""}`;i&&(0,I.h)(d.MCu.ErrorInClearALCookies,i),(0,T.Ov)(o.g4.clearAccountLinkingCookies,`${i||"Success"}`)}))}()),"tryDelete1SAcctLnkCookies",(0,S.Z6)())}var D=i(33799),R=i(33379),L=i(9791);let F=!1;const N={acquireTokenStatus:0,accessTokenResult1S:null,currentAccountInfo:null};let B=new l.o;const j=(0,p.p)((()=>(0,r.mG)(void 0,void 0,void 0,(function*(){const e=yield(0,b.Yu)(),t=yield(0,s.fW)((()=>e.handleRedirectPromise()),"handleRedirect",(0,S.Z6)());if(t)return a.k.log("dual-auth: Signing in through interactive login loginResponse: "+JSON.stringify(t,null,4)),H(t).finally((()=>{(0,g.dy)()})),(0,T.Ov)(o.g4.interactiveLogin,"Success"),t;(0,g.dy)()}))));function $(e){return(0,r.mG)(this,void 0,void 0,(function*(){const{userName:t,enforceTimeLimit:i}=e||{};F=!0;const n=yield j();if(n)return n;let r;return r=t?(0,y.Df)(yield(0,y.RH)(t))||t:(0,y.sA)()||(0,h.E1)()||(0,y.nt)(),!r&&(0,m.mb)()?(H(null,!0),void x()):yield Z((()=>U(r)),"ssoSilent",i?7e3:-1)}))}const U=(0,L.Z)((e=>(0,r.mG)(void 0,void 0,void 0,(function*(){let t;e||a.k.log("dual-auth: login_hint is not available. ssoSilent may not work!");const i=yield(0,b.Yu)(),n=(0,S.Yb)("SSOSilentCoreAndToken"),r=(0,S.Z6)(),s=r&&r.startMeasure("ssoSilentCore").endMeasure,l=Object.assign(Object.assign({},(0,b.qW)(!0)),{loginHint:e}),u=(0,R.N)()&&(null===history||void 0===history?void 0:history.length);try{t=yield i.ssoSilent(l)}catch(t){a.k.log(`dual-auth: ssoSilent failed! : ${t}`),(0,T.Ov)(o.g4.ssoSilent,(0,c.n)(t));const n=(0,m.x6)();if(t.name===o.BS&&n){if((0,g.m5)(),!(0,g.jG)()||!(0,f.P8)())return void(yield _(null,!0));{const t=Object.assign(Object.assign({},(0,b.qW)()),{loginHint:e});i.acquireTokenRedirect(t)}}(n||(0,f.iG)())&&t.name!==o.BS&&t.name!==o.kQ&&(0,I.h)(d.MCu.MsalSSOSilentException,"Error in ssoSilent call",t)}finally{a.k.log(`dual-auth: getAllAccounts AFTER ${t?"SUCCESSFUL":"UNSUCCESSFUL"} ssoSilent: ${JSON.stringify((0,y.LT)(),null,4)}`),t&&(a.k.log(`dual-auth: loginResponse AFTER SUCCESSFUL ssoSilent: ${JSON.stringify(t,null,4)}`),(0,T.Ov)(o.g4.ssoSilent,"Success. User: "+(0,y.vp)(t.account.username))),H(t).finally((()=>{n(),(0,g.bf)(),(0,g.bq)()})),s&&s({customSuffix:(t?t.fromCache&&"cache":"error")||void 0})}return u&&history.length===u+1&&dispatchEvent(new CustomEvent("ssoSilentHistChanged")),t}))));function H(e,t=!1){return(0,r.mG)(this,void 0,void 0,(function*(){const i=yield _(e,t);yield W(i)}))}function _(e,t=!1){return(0,r.mG)(this,void 0,void 0,(function*(){if(e){const t=N.currentAccountInfo=e.account,i=(0,y.Df)(t),n=(0,y.lx)(t);return(0,y.nq)({login_hint:i,account_type:n}),t}t&&((0,y.nq)(),(0,v.tx)(null),(0,g.bf)(),(0,g.bq)(),(0,g.hq)(),yield Promise.all([(0,s.fW)((()=>P("Delete")),"tryDelete1SJwtCookies",(0,S.Z6)()),x()]),(0,y.sm)())}))}function W(e,t=!1,i=!1,n=!1){return(0,r.mG)(this,void 0,void 0,(function*(){let l=N.accessTokenResult1S;const u=new Date(l&&l.expiresOn),p=u&&u.getTime()&&u>new Date;if(l&&3===N.acquireTokenStatus&&p)return void a.k.log(`dual-auth: tryAcquire1STokenSilently: token is still valid - expiry: ${new Date(l&&l.extExpiresOn)}`);const h=(0,y.lx)(e)===D.Qm.AAD?["https://enterprisenews.microsoft.com/User.Read"]:["https://oneservice.microsoft.com/OneService.Read"];try{if(l=yield function(e,t,i=!1,n=!1){return(0,r.mG)(this,void 0,void 0,(function*(){if(!t)return void a.k.log("dual-auth: tryAcquireTokenSilently received empty account -- API calls may not be authenticated!");const r=yield(0,b.Yu)(),s=Object.assign(Object.assign({},(0,b.Bj)(e)),{forceRefresh:n,account:t});let l;const u=(0,S.Z6)(),p=u&&u.startMeasure("tryAcquireTokenSilently").endMeasure;try{l=yield Z((()=>r.acquireTokenSilent(s)),"acquireTokenSilent",i?7e3:-1)}catch(e){throw a.k.log(`dual-auth: acquireTokenSilent failed! : ${e}`),(0,T.Ov)(o.g4.acquireTokenSilent,(0,c.n)(e)),(0,I.h)(d.MCu.MsalAcquireTokenSilentException,"acquireTokenSilent call failed",e),e.name===o.BS&&(0,g.jG)()&&r.acquireTokenRedirect(s),l=null,e}finally{p&&p({customSuffix:(l?l.fromCache&&"cache":"error")||void 0}),l&&(0,T.Ov)(o.g4.acquireTokenSilent,"Success"),a.k.log(`dual-auth: acquireTokenSilent for scopes: ${e} was ${l?"SUCCESSFUL":"UNSUCCESSFUL"} accessTokenResult: ${JSON.stringify(l,null,4)}`)}return l}))}(h,e,i,n),l){if(N.acquireTokenStatus=3,N.accessTokenResult1S=l,(0,v.tx)(l),!l.fromCache){const e=+new Date;(0,S.w0)("OSATExpMins",Math.floor((+l.expiresOn-e)/6e4))}m=l,(0,s.fW)((()=>P("Acquire",m)),"tryAcquire1SJwtCookies",(0,S.Z6)())}}catch(e){if(l=N.accessTokenResult1S=null,e.name===o.BS&&e.errorCode===o.w6&&t)return void(N.acquireTokenStatus=2);N.acquireTokenStatus=1}var m;B.set(l);const f=function(e){if(!e)return null;const t=e&&e.extExpiresOn,i=t&&new Date(t),n=i&&i.getTime(),r=(new Date).getTime();let s;const a=6e4,c=1e3*(o.QL-o.Ic),d=1e3*o.Ic;n&&n>r?(s=n-r,s<=d&&(s=0)):s=c;return s+a}(l);f&&setTimeout((()=>W(e)),f)}))}function z(){return(0,r.mG)(this,void 0,void 0,(function*(){if(N.accessTokenResult1S)return N.accessTokenResult1S;if(!F){const e="Wait for 1SToken failed because auth flow was not started";return a.k.logError(`dual-auth:  ${e} -- so returning early without the 1S access token`),(0,T.Ov)(o.g4.waitFor1SToken,e),(0,I.h)(d.MCu.AuthSetupErrorInPage,e),void B.set(null)}const e=(0,S.Yb)("Wait1SToken"),t=yield(0,s.fW)((()=>B.getResultAsync()),"waitFor1SToken",(0,S.Z6)());return e(),t}))}function G(){const{currentAccountInfo:e}=N;if(e)return(0,y.lx)(e);const t=(0,m.x6)();return t?t.account_type:void 0}function V(){return(0,y.lx)(N.currentAccountInfo)===D.Qm.AAD?N.currentAccountInfo.tenantId:""}function q(e){return(0,r.mG)(this,void 0,void 0,(function*(){(0,b.Oo)();const{loginHint:t,forceLoginPrompt:i,tenantOptions:n,redirectStartPage:r}=e||{},s=yield(0,b.Yu)(n);if(!s)return;const a=i?"login":"select_account",c=Object.assign(Object.assign({},(0,b.qW)()),{prompt:a}),{tenantScope:d,tenantId:l}=n||{},u=!(!t||!d&&!l);u&&Object.assign(c,{prompt:void 0,loginHint:t,extraQueryParameters:{domain_hint:"MSA"===d||l===o.bc?"consumers":"organizations"}}),r&&(c.redirectStartPage=r),(0,T.Ov)(o.g4.interactiveLogin,"Redirect start"+(u?" with login hint":"")),yield s.loginRedirect(c)}))}function Z(e,t,i){return(0,r.mG)(this,void 0,void 0,(function*(){let n,r=i,o=!1;return(0,R.N)()&&(location.search.includes(`${t}NoTimeout`)?r=999999999:location.search.includes(`${t}ForceDelay`)?(e=()=>(0,u.Kb)(1e4).then(e),r+=2e4):location.search.includes(`${t}ForceTimeout`)?(r=0,o=!0):i<0&&(r=-1)),r<0?yield e():(yield Promise.race([e().then((e=>n=e)),(0,u.Kb)(r).then((()=>Promise.reject(new Error(`Operation ${t} timed out after ${r}ms`))))]),o?void 0:n)}))}},54297:function(e,t,i){"use strict";i.d(t,{T3:function(){return u},pd:function(){return d},zj:function(){return l}});var n=i(33940),r=i(53430),o=i(51403),s=i(82757),a=i(33954),c=i(72447);function d(e=!1){return(0,n.mG)(this,void 0,void 0,(function*(){return(0,c.GQ)({enforceTimeLimit:e}).then(l)}))}function l(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=e&&e.account;if(!function(e){const t=e&&e.account;return!!(t&&t.username&&t.idTokenClaims&&e.accessToken)}(e))return void a.k.log("dual-auth: Auth Response doesn't have all the required fields. authResponse: , "+JSON.stringify(e));const{username:i,homeAccountId:n,idTokenClaims:c}=t,d=n&&n.split("."),l=d&&d.length>0&&d[0].replace("-","").replace("0000000000000000",""),u=yield(0,o.a)(e.accessToken,i),p=c.given_name,g=c.family_name;return{ssoStatus:r.y,memberName:i,firstName:p,lastName:g,cid:l,accountType:(0,s.lx)(t),profilePictureUrl:u}}))}function u(e){return e&&e.ssoStatus===r.y}},18333:function(e,t,i){"use strict";var n;i.d(t,{cN:function(){return o},cq:function(){return r},pb:function(){return n}}),function(e){e[e.Immediately=0]="Immediately",e[e.OnPageLoad=1]="OnPageLoad",e[e.OnUserInteraction=2]="OnUserInteraction",e[e.OnBusinessSearchResultsReady=3]="OnBusinessSearchResultsReady"}(n||(n={}));const r="Search-AutoSuggest",o="q"},2348:function(e,t,i){"use strict";i.d(t,{fF:function(){return m}});var n=i(18333),r=i(84169),o=i(58155),s=i(73252),a=i(33379),c=i(12884),d=i(67462),l=i(85663);class u{constructor(e,t,i,n,r){this.autoSuggestProperties=e,this.osMarket=t,this.osLanguage=i,this.requestId=n,this.isDarkMode=r}addAutoSuggest(e){if(!(0,a.N)())return!1;if(r.jG.CurrentRequestTargetScope&&"kids"===r.jG.CurrentRequestTargetScope.audienceMode)return!1;const t=this.isDisabled(),i=window[u.globalObjectName];if(i)return i.enable(!t),this.updateAutoSuggestSessionId(),!0;if(t)return!1;const n=this.getCompleteUrl(),o=(0,c.b0)(n,void 0,!0,"use-credentials");o.onload=e;return document.getElementsByTagName("head")[0].appendChild(o),!0}invokeCookieSharing(){p((0,d.ej)(u.sharedCookieName),5)||(0,d.sq)(u.sharedCookieName,"SID=00",365,u.cookieDomain,"/")}isDisabled(){return new RegExp("\\b"+u.cookieCrumb+"=0\\b","i").test((0,d.ej)(u.cookieName))}updateAutoSuggestSessionId(){const e=/SID=[\da-z]+/i;if(!this.partnerSessionId){const t=(0,d.ej)(u.sharedCookieName);if(p(t,4)){const i=t.match(e);i&&p(i[0],5)&&(this.partnerSessionId=i[0].substr(4))}}const t=window[u.globalObjectName];if(t){const e=t["sid"];"function"==typeof e&&e(this.partnerSessionId)}}getCompleteUrl(){let e="";const t=o.c.getParamsFromUrl(location.search);return t.find((e=>"autosuggest_hook"===e.key))?this.getHookUrl(t):(e=this.autoSuggestProperties.useMarketBasedUrl?this.getMarketBasedUrl():this.getUrl(),this.shouldInitializeAutoSuggestOnPageLoad()&&(e+="&onload=1"),this.isDarkMode&&(e+="&rt=1"),(0,l.isNullOrUndefined)(this.autoSuggestProperties.zeroInputItemCount)||(e+=`&zict=${this.autoSuggestProperties.zeroInputItemCount}`),this.autoSuggestProperties.disableSearchHistory&&(e+="&shdis=1"),(0,l.isNullOrUndefined)(this.autoSuggestProperties.maxItemCount)||(e+=`&itemCount=${this.autoSuggestProperties.maxItemCount}`),e)}shouldInitializeAutoSuggestOnPageLoad(){return this.autoSuggestProperties.delayBind===n.pb.Immediately||this.autoSuggestProperties.delayBind===n.pb.OnPageLoad||this.autoSuggestProperties.delayBind===n.pb.OnBusinessSearchResultsReady&&this.autoSuggestProperties.businessSearchResultsEnabled}getMarketBasedUrl(){const e=this.osMarket||"US",t=this.osLanguage||"en-US",i=this.autoSuggestProperties.partnerEndpoint||"msnedgentp",n=(0,s.nP)().Locale;let r=["https","://www.bing.com/as/init?","pt="+i,this.osLanguage?"&setlang="+t:"",this.osMarket?"&cc="+e:"","&refig="+this.requestId].join("");return"en-us"!==t.toLowerCase()&&(r+="&endpt=1"),r+=this.getFeatures(),r+=this.autoSuggestProperties.businessSearchResultsEnabled?"&msbqf=true":"&msbqf=false",this.autoSuggestProperties.disableSuggestionFetchOnEmpty&&n&&"en-us"!==n.toLowerCase()&&(r+="&dfoe=1"),r+=this.getAutosuggestWCMobile(),r}getHookUrl(e){const t="muidflt9-ismsft",i=(0,s.nP)().CurrentFlights,n=e.find((e=>"fdhead"===e.key)),r=n?n.value:"",o=e.find((e=>"asinturl"===e.key)),a=o&&o.value;if((i.indexOf(t)>-1||r.indexOf(t)>-1)&&a){return decodeURIComponent(a)}return this.getUrl()}getUrl(){const e=(0,s.nP)().Locale||"en-us";let t=["https","://www.bing.com/as/init?mkt=",e,"&pt=",this.autoSuggestProperties.partnerEndpoint,"&refig=",this.requestId].join("");return this.autoSuggestProperties.enableNewSnrUrl||"en-us"===e.toLowerCase()||(t+="&endpt=1"),t+=this.getAutosuggestWCMobile(),t}getFeatures(){return this.autoSuggestProperties.enableFeatures&&(this.autoSuggestProperties.features||""===this.autoSuggestProperties.features)?"&features="+this.autoSuggestProperties.features:""}getAutosuggestWCMobile(){return this.autoSuggestProperties.enableAutoSuggestforWCMobile?"&asrt=1":""}}function p(e,t){return"string"==typeof e&&(!t||e.length>=t)}u.cookieCrumb="AS",u.globalObjectName="sa_inst",u.cookieName="SRCHHPGUSR",u.sharedCookieName="_SS",u.cookieDomain="msn.com";var g=i(18536),h=i(38156);function m(e){if(!e||e.disableAutoSuggest)return;const{autoSuggestProperties:t,requestId:i,isDarkMode:r,searchBoxContext:o,startPerfMarkerHandler:s}=e,{osMarket:a,osLanguage:c,useMarketBasedUrl:d,delayBind:l,businessSearchResultsEnabled:p,cookieSharingDelayInSeconds:g}=t,h=new u(t,d&&a,d&&c,i,r);if(l===n.pb.OnUserInteraction||l===n.pb.OnBusinessSearchResultsReady&&!p){o.autoSuggestEventHandler=f.bind(o,h),o.registerAutoSuggestOnSearchEventHandler=v.bind(o,e);const t=b(o.inputRef);null==t||t.addEventListener("keyup",o.autoSuggestEventHandler),null==t||t.addEventListener("click",o.autoSuggestEventHandler)}else l!==n.pb.Immediately&&l!==n.pb.OnPageLoad&&l!==n.pb.OnBusinessSearchResultsReady||(s&&s(n.cq),o.registerAutoSuggestOnSearchEventHandler=v.bind(o,e),h.addAutoSuggest(o.registerAutoSuggestOnSearchEventHandler));1===g&&h.invokeCookieSharing()}function f(e,t){if("keyup"===t.type){const e=t.key;if("Tab"===e||"Escape"===e)return}if(e.addAutoSuggest(this.registerAutoSuggestOnSearchEventHandler)){const e=b(this.inputRef);e.removeEventListener("click",this.autoSuggestEventHandler),e.removeEventListener("keyup",this.autoSuggestEventHandler)}}function v(e){const{autoSuggestProperties:t,endPerfMarkerHandler:i,searchBoxContext:r,searchOpenInNewWindow:o,action:s,telemetryCallback:a}=e,{delayBind:c}=t;if(c!==n.pb.OnUserInteraction&&c!==n.pb.OnPageLoad&&c!==n.pb.OnBusinessSearchResultsReady||i&&i(n.cq),o)return;const d=window.sj_evt,l=d&&d.fire;l&&(d.fire=function(...e){const[t,i]=e||[];if("AS.Navigate"===t){if(!i)return;const e=b(r.formRef);if(e&&e.attributes&&e.attributes["data-t"]){const t=g.u.get(e);t.contract.content.type=function(e){if(!e)return h.uH.Undefined;const t=e.toLowerCase();if("hs"===t)return h.uH.SearchHistory;if("pn"===t)return h.uH.TrendingSearch;return h.uH.AutoSuggestSearch}(i.stype),g.u.setAttribute(e,t.contract)}}"onSearch"===t&&(r.onAutoSuggestSuggestionClickHandler=y.bind(r,s,a),r.onAutoSuggestSuggestionClickHandler()),l.apply(r,e)})}function y(e,t){let i=e;const n=b(this.formRef);if(i){const e=(-1!==i.indexOf("?")?"&":"?")+"msnst=AS";if(i+=e,n.attributes&&n.attributes["data-t"]){const e=g.u.get(n);e.contract.overrideDestinationUrl=i,g.u.setAttribute(n,e.contract)}}t(n,h.Aw.Submit,h.wu.TextSearch)}function b(e){return e&&e.current?e.current:e}},25964:function(e,t,i){"use strict";i.d(t,{Gb:function(){return a},Od:function(){return o},hv:function(){return d},qR:function(){return r},rM:function(){return c},wI:function(){return s}});var n=i(53899);const r="https://img-s-msn-com.akamaized.net/tenant/amp/entityid/",o="https://prod-streaming-video-msn-com.akamaized.net/";var s;!function(e){e.changeBackgroundDaily="changeBackgroundDaily",e.includeVideoBackgroundsInRotation="includeVideoBackgroundsInRotation",e.showImageSpotlightText="showImageSpotlightText",e.selectedVideoSetting="selectedVideoSetting",e.imageLikes="imageLikes",e.imageDislikes="imageDislikes",e.videoLikes="videoLikes",e.videoDislikes="videoDislikes",e.backgroundSelectionMetadata="backgroundSelectionMetadata"}(s||(s={}));const a=850,c=new Map([["BrowserLocal",n.HX.custom],["Iris",n.HX.bing],["Theme",n.HX.theme],["Video",n.HX.imageAndVideo],["CMSImage",n.HX.imageAndVideo]]),d=new Map([[n.HX.imageAndVideo,["Video","CMSImage","Iris"]],[n.HX.bing,["Iris"]],[n.HX.custom,["BrowserLocal"]],[n.HX.theme,["Theme"]]])},3931:function(e,t,i){"use strict";i.d(t,{D:function(){return o},f:function(){return r}});var n=i(55067);class r{}function o(){r.backgroundDataStateLoaded.unregisterObservers(),r.backgroundDispositionUpdated.unregisterObservers(),r.bespokeAdDisplayStatusUpdated.unregisterObservers(),r.hotSpotsDisplayStatusUpdated.unregisterObservers(),r.irisImageUpdated.unregisterObservers(),r.refreshBackgroundMetadata.unregisterObservers(),r.updateBackgroundGalleryDisplayed.unregisterObservers(),r.updateGallerySelectedBackground.unregisterObservers(),r.videoSettingsUpdated.unregisterObservers()}r.backgroundDataStateLoaded=new n.C("backgroundDataStateLoaded"),r.backgroundDispositionUpdated=new n.C("backgroundDispositionUpdated"),r.bespokeAdDisplayStatusUpdated=new n.C("bespokeAdDisplayStatusUpdated"),r.hotSpotsDisplayStatusUpdated=new n.C("hotSpotsDisplayStatusUpdated"),r.irisImageUpdated=new n.C("irisImageUpdated"),r.refreshBackgroundMetadata=new n.C("refreshBackgroundMetadata"),r.updateBackgroundGalleryDisplayed=new n.C("updateBackgroundGalleryDisplayed"),r.updateGallerySelectedBackground=new n.C("updateGallerySelectedBackground"),r.updateSelectionInGallery=new n.C("updateSelectionInGallery"),r.videoSettingsUpdated=new n.C("videoSettingsUpdated")},26068:function(e,t,i){"use strict";i.d(t,{z:function(){return u}});var n,r=i(33940);!function(e){e.backgroundImageType="backgroundImageType",e.backgroundSettingPreferences="backgroundSettingPreferences",e.irisPreferences="irisPreferences"}(n||(n={}));const o=new Set(["Video","CMSImage"]);var s=i(17440),a=i(3931),c=i(63439),d=i(7781),l=i(33379);class u extends c.e{constructor(e,t,i,n,r,o,s){super(e,t,i,n,r,o,s),this.config&&!this.config.disableBackgroundGallery&&(this.settingsAPI=(0,l.N)()&&window.chrome&&window.chrome.ntpSettingsPrivate,this.initializeBackgroundSettingPreferences(),this.initializeIrisSurfaceInfoPreferences(),this.registerOnPrefsChangeCallback())}backgroundDispositionUpdated(e){var t,i;null===(i=null===(t=null===a.f||void 0===a.f?void 0:a.f.backgroundDispositionUpdated)||void 0===t?void 0:t.getActionSender(this))||void 0===i||i.send(e)}bespokeAdDisplayStatusUpdated(e){var t,i;null===(i=null===(t=null===a.f||void 0===a.f?void 0:a.f.bespokeAdDisplayStatusUpdated)||void 0===t?void 0:t.getActionSender(this))||void 0===i||i.send(e)}hotSpotsDisplayStatusUpdated(e){var t,i;null===(i=null===(t=null===a.f||void 0===a.f?void 0:a.f.hotSpotsDisplayStatusUpdated)||void 0===t?void 0:t.getActionSender(this))||void 0===i||i.send(e)}updateBackgroundGalleryDisplayed(e){var t,i;null===(i=null===(t=null===a.f||void 0===a.f?void 0:a.f.updateBackgroundGalleryDisplayed)||void 0===t?void 0:t.getActionSender(this))||void 0===i||i.send(e)}updateGallerySelectedBackground(e){var t,i;null===(i=null===(t=null===a.f||void 0===a.f?void 0:a.f.updateGallerySelectedBackground)||void 0===t?void 0:t.getActionSender(this))||void 0===i||i.send(e)}videoSettingsUpdated(e){var t,i;null===(i=null===(t=null===a.f||void 0===a.f?void 0:a.f.videoSettingsUpdated)||void 0===t?void 0:t.getActionSender(this))||void 0===i||i.send(e)}initializeBackgroundSettingPreferences(){return(0,r.mG)(this,void 0,void 0,(function*(){if(!(yield s.U.isApiAvailableToUse()))return;const e=yield s.U.getPreferenceSetting("background_setting_preferences",!0);this.backgroundSettingPreferencesState=e&&e.value}))}initializeIrisSurfaceInfoPreferences(){return(0,r.mG)(this,void 0,void 0,(function*(){if(!(yield s.U.isApiAvailableToUse()))return;const e=yield s.U.getPreferenceSetting("campaigns");if(!e||!e.value||e.value.length<=0)return;const t=e.value;this.irisBackgroundSurfaceInfo=this.getIrisBackgroundSurfaceInfo(t)}))}registerOnPrefsChangeCallback(){return(0,r.mG)(this,void 0,void 0,(function*(){this.settingsAPI&&this.settingsAPI.onPrefsChanged.addListener((e=>(0,r.mG)(this,void 0,void 0,(function*(){var t,i,r,s,c,l,u;const p=e[0],g=this.getModifiedPreference(p);if(g)if(g===n.backgroundSettingPreferences){const e=p.value,n=this.getPreferenceKeyIndex(e,"background_setting_preferences");if(n<0)return;const u=this.backgroundSettingPreferencesState;if(this.backgroundSettingPreferencesState=e[n].value,d.p.setBackgroundSettingsPreferencesCache(this.backgroundSettingPreferencesState),!u||!this.backgroundSettingPreferencesState)return;const g=u.backgroundSelectionMetadata,h=this.backgroundSettingPreferencesState.backgroundSelectionMetadata;if(!d.p.getShouldRerender())return void d.p.setShouldRerender(!0);u.selectedVideoSetting!==this.backgroundSettingPreferencesState.selectedVideoSetting?(null===(t=a.f.videoSettingsUpdated.getActionSender(this))||void 0===t||t.send(this.backgroundSettingPreferencesState.selectedVideoSetting),null===(i=a.f.refreshBackgroundMetadata.getActionSender(this))||void 0===i||i.send()):!g&&h?null===(r=a.f.updateGallerySelectedBackground.getActionSender(this))||void 0===r||r.send(h):g&&!h?(null===(s=a.f.refreshBackgroundMetadata.getActionSender(this))||void 0===s||s.send(),null===(c=a.f.updateSelectionInGallery.getActionSender(this))||void 0===c||c.send()):g&&h&&JSON.stringify(g)!==JSON.stringify(h)&&(g.provider===h.provider||o.has(g.provider)&&o.has(h.provider))&&(null===(l=a.f.updateGallerySelectedBackground.getActionSender(this))||void 0===l||l.send(h))}else if(g===n.irisPreferences){const e=p.value,t=this.getPreferenceKeyIndex(e,"campaigns");if(t<0)return;const i=this.irisBackgroundSurfaceInfo,n=e[t].value;if(this.irisBackgroundSurfaceInfo=this.getIrisBackgroundSurfaceInfo(n),!i||!this.irisBackgroundSurfaceInfo)return;i.currentCreativeId!==this.irisBackgroundSurfaceInfo.currentCreativeId&&(null===(u=a.f.refreshBackgroundMetadata.getActionSender(this))||void 0===u||u.send())}}))))}))}getIrisBackgroundSurfaceInfo(e){if(e&&!(e.length<=0))return e.find((e=>"88000244"===e.placement))||void 0}getModifiedPreference(e){if("ntp.background_image_type"===e.key)return n.backgroundImageType;if("ntp.user_nurturing"===e.key){const t=e.value,i=this.getPreferenceByKey(t,"background_setting_preferences");if(JSON.stringify(this.backgroundSettingPreferencesState)!==JSON.stringify(i))return n.backgroundSettingPreferences}}getPreferenceByKey(e,t){const i=this.getPreferenceKeyIndex(e,t);return i>-1?e[i].value:{}}getPreferenceKeyIndex(e,t){return e.findIndex((e=>e.key===t))}}},24528:function(e,t,i){"use strict";i.d(t,{L:function(){return o}});var n=i(30856),r=i(3931);class o{reduce(e,t){if(!e)return{backgroundGalleryDisplayed:!1};if(!t)return e;let i;return n.G.handleAction(t,r.f.backgroundDataStateLoaded,(t=>{i=Object.assign(Object.assign({},e),t)})),n.G.handleAction(t,r.f.bespokeAdDisplayStatusUpdated,(t=>{i=Object.assign(Object.assign({},e),{isBespokeAdDisplayed:t})})),n.G.handleAction(t,r.f.updateBackgroundGalleryDisplayed,(t=>{i=Object.assign(Object.assign({},e),{backgroundGalleryDisplayed:t})})),n.G.handleAction(t,r.f.updateGallerySelectedBackground,(t=>{i=Object.assign(Object.assign({},e),{backgroundSelectionMetadata:t})})),n.G.handleAction(t,r.f.backgroundDispositionUpdated,(t=>{i=Object.assign(Object.assign({},e),{backgroundDispositionMetadata:t})})),n.G.handleAction(t,r.f.hotSpotsDisplayStatusUpdated,(t=>{i=Object.assign(Object.assign({},e),{shouldRenderHotSpots:t})})),n.G.handleAction(t,r.f.videoSettingsUpdated,(t=>{i=Object.assign(Object.assign({},e),{selectedVideoSetting:t})})),i||e}}},66243:function(e,t,i){"use strict";i.r(t),i.d(t,{BackgroundDataActions:function(){return n.f},BackgroundDataConnector:function(){return r.z},BackgroundDataReducer:function(){return o.L},ToolingInfo:function(){return s},resetBackgroundDataActions:function(){return n.D}});var n=i(3931),r=i(26068),o=i(24528);const s={experienceConfigSchema:{}}},23586:function(e,t,i){"use strict";i.d(t,{$F:function(){return g},$u:function(){return p},AZ:function(){return o},IG:function(){return c},LF:function(){return s},Nf:function(){return f},Th:function(){return l},fZ:function(){return a},gf:function(){return d},rO:function(){return u},x$:function(){return m}});var n=i(25964),r=i(53899);const o="background_setting_preferences",s="bespoke_ad_preferences",a="background_gallery_open_event",c="galleryToastCooldowns",d="irisBackgroundLiked",l=new Set(["overlay","positioning-region"]),u="https://assets.msn.com/staticsb/statics/latest/edgenext/bkgd/images/cms_images_20230301.json",p="https://assets.msn.com/staticsb/statics/latest/edgenext/bkgd/videos/cms_videos_20230301.json",g=new Map([["c5",70],["c4",40],["c3",50],["c2",26],["c1",34]]);var h;!function(e){e.reducedMotion="reducedMotion"}(h||(h={}));const m=[n.wI.imageLikes,n.wI.imageDislikes,n.wI.videoLikes,n.wI.videoDislikes],f=new Map([[n.wI.imageLikes,n.wI.imageDislikes],[n.wI.imageDislikes,n.wI.imageLikes],[n.wI.videoLikes,n.wI.videoDislikes],[n.wI.videoDislikes,n.wI.videoLikes]]);new Map([[r.HX.imageAndVideo,["Video","CMSImage","Iris"]],[r.HX.bing,["Iris"]],[r.HX.custom,["BrowserLocal"]],[r.HX.theme,["Theme"]]])},8783:function(e,t,i){"use strict";i.d(t,{k:function(){return u}});var n=i(68364),r=i(26415),o=i(43980),s=i(53899),a=i(4814),c=i(75192),d=i(53076),l=i(82423);const u=new class{get chromiumPageSettingsConnector(){return this._chromiumPageSettingsConnector||(this._chromiumPageSettingsConnector=(0,l.K0)(d.z.ChromiumPageSettings)),this._chromiumPageSettingsConnector}setLayoutFromPreset(e){if(!this.chromiumPageSettingsConnector)return void(0,n.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the setLayoutFromPreset method");const t=this.chromiumPageSettingsConnector.getCurrentState(),i=(0,o.j)(t.selectedFeedDisplaySetting,e,t.greetingEnabled,t.hideDefaultTopSites,t.dailyDiscoveryEnabled);if(t.currentLayout!==i){let e;if(i!==s.nP.custom){const n=s.Wi[i];e={currentBackgroundImageType:n.current_background_image_type,originalLayout:t.currentLayout,currentLayout:i,greetingEnabled:n.greeting,imageOfTheDayEnabled:n.current_background_image_type!==s.HX.off,quickLinksEnabled:n.quick_links,hideDefaultTopSites:n.hide_promoted_links,selectedFeedDisplaySetting:n.feeds_position,dailyDiscoveryEnabled:n.daily_discovery}}else{const t=this.chromiumPageSettingsConnector.getCurrentState();e=Object.assign(Object.assign({},t),{originalLayout:t.currentLayout,currentLayout:i})}this.chromiumPageSettingsConnector.updateLayout(e),(0,a.qi)(c.nc.layout_mode,s.Uq[e.currentLayout])}}updateLayoutAndBackgroundImageType(e,t){this.chromiumPageSettingsConnector?(t?this.updateToCustomLayoutMode():this.setLayoutFromPreset(e),this.chromiumPageSettingsConnector.updateBackgroundImageType(e)):(0,n.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the updateLayoutAndBackgroundImageType method")}updateToCustomLayoutMode(){if(!this.chromiumPageSettingsConnector)return void(0,n.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the updateToCustomLayoutMode method");const e=this.chromiumPageSettingsConnector.getCurrentState(),t=Object.assign(Object.assign({},e),{originalLayout:e.currentLayout,currentLayout:s.nP.custom});this.chromiumPageSettingsConnector.updateLayout(t),(0,a.qi)(c.nc.layout_mode,s.Uq[t.currentLayout])}isImageOfTheDayDisabled(){if(!this.chromiumPageSettingsConnector)return void(0,n.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the isImageOfTheDayDisabled method");const e=this.chromiumPageSettingsConnector.getCurrentState(),t=e.backgroundImageTypePolicy&&(e.backgroundImageTypePolicy===s.gZ.disableAll||e.backgroundImageTypePolicy===s.gZ.disableImageOfTheDay);return void 0!==t&&0!==t&&t}isCustomImageDisabled(){if(!this.chromiumPageSettingsConnector)return void(0,n.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the isCustomImageDisabled method");const e=this.chromiumPageSettingsConnector.getCurrentState(),t=e.backgroundImageTypePolicy&&(e.backgroundImageTypePolicy===s.gZ.disableAll||e.backgroundImageTypePolicy===s.gZ.disableCustomImage);return void 0!==t&&0!==t&&t}}},7781:function(e,t,i){"use strict";i.d(t,{p:function(){return y}});var n=i(33940),r=i(23586),o=i(33954),s=i(26415),a=i(53899),c=i(25964),d=i(58155),l=i(65337),u=i(17440),p=i(84754),g=i(53076),h=i(65135),m=i(8783),f=i(12884),v=i(82423);const y=new class{constructor(){this.imageDislikes=new Set,this.imageLikes=new Set,this.hasSimpleImages=!1,this.shouldRerender=!0,this.videoLikes=new Set,this.videoDislikes=new Set,this.stateInited=!1}getCMSImageData(){return this.cmsImageData||this.loadCMSImageData(),this.cmsImageData}loadCMSImageData(){return(0,n.mG)(this,void 0,void 0,(function*(){this.cmsImageData||(yield fetch(r.rO).then((e=>e.json())).then((e=>this.cmsImageData=null==e?void 0:e.cmsImage)))}))}getCMSVideoData(){return this.cmsVideoData||this.loadCMSVideoData(),this.cmsVideoData}loadCMSVideoData(){return(0,n.mG)(this,void 0,void 0,(function*(){this.cmsVideoData||(yield fetch(r.$u).then((e=>e.json())).then((e=>this.cmsVideoData=null==e?void 0:e.cmsVideo)))}))}initState(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.stateInited)return;this.stateInited=!0;if(yield this.getBackgroundGalleryEligibilityAsync()){const t=(0,v.K0)(g.z.ChromiumPageSettings);if(!t)return;const i=yield t.getPageSettingsStateAsync();yield this.initialBackgroundPSLSetup(i);const n=yield this.checkAndRemoveApplicableBackgrounds(!1,i),r=yield this.getBackgroundPreferences();if(r){const t={backgroundGalleryDisplayed:!1,shouldRenderHotSpots:r.showImageSpotlightText,selectedVideoSetting:r.selectedVideoSetting,backgroundSelectionMetadata:r.backgroundSelectionMetadata};null==e||e.send(t),this.populateLikeAndDislikeCaches();const o=m.k.isImageOfTheDayDisabled(),s=m.k.isCustomImageDisabled();if(yield this.resetGalleryStorageForPolicyCompliance(r,o,s),o||s)return;if(n&&i.currentBackgroundImageType!==a.HX.off){const e=this.getBackgroundImageTypeFromSettings(r.includeVideoBackgroundsInRotation);m.k.updateLayoutAndBackgroundImageType(e)}}}}))}getBackgroundGalleryEligibilityAsync(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=yield u.U.isApiAvailableToUse(),t=(0,p.I9)();return this.isEligibleForTreatment=e&&!t,this.isEligibleForTreatment}))}getBackgroundGalleryEligibility(){return this.isEligibleForTreatment}setBackgroundSettingsPreferencesCache(e){this.backgroundSettingsPreferences=e}getBackgroundSettingsPreferencesCache(){return this.backgroundSettingsPreferences}getPreferenceByKeyFromFromPreferencesCache(e){const t=this.backgroundSettingsPreferences;return t?t[e]:void 0}populateLikeAndDislikeCaches(){for(const e of r.x$){const t=this.backgroundSettingsPreferences[e]||[],i=this.getLikeAndDislikeCacheByType(e);for(const e of t)i.add(e)}}getComplimetaryCacheName(e){return r.Nf.get(e)}getLikeAndDislikeCacheByType(e){switch(e){case c.wI.imageLikes:return this.imageLikes;case c.wI.imageDislikes:return this.imageDislikes;case c.wI.videoLikes:return this.videoLikes;case c.wI.videoDislikes:return this.videoDislikes}}setLikesAndDislikesCache(e,t){const i=this.getLikeAndDislikeCacheByType(e);this.getLikeAndDislikeCacheByType(this.getComplimetaryCacheName(e)).delete(t),i.add(t)}getShouldRerender(){return this.shouldRerender}setShouldRerender(e){this.shouldRerender=e}setSimpleImagesandCMSSize(e,t){this.hasSimpleImages=e,this.cmsImageSize=t}getCMSImageSize(){return this.cmsImageSize}getBackgroundPreferences(){return(0,n.mG)(this,void 0,void 0,(function*(){return u.U.getPreferenceSetting(r.AZ,!0).then((e=>{const t=e&&e.value;if(t)return this.setBackgroundSettingsPreferencesCache(t),t;o.k.logError(`PSL: Preferences API does not have ${r.AZ}.`)})).catch((e=>{o.k.logError(`Exception ${e} occurred storing background setting preferences in persistent storage layer`)}))}))}getBackgroundPreferenceByKey(e){return(0,n.mG)(this,void 0,void 0,(function*(){return u.U.getPreferenceSetting(r.AZ,!0).then((t=>{const i=t&&t.value;if(i)return i[e];o.k.logError(`PSL: Preferences API does not have ${r.AZ}.`)})).catch((e=>{o.k.logError(`Exception ${e} occurred getting background setting preference by key in persistent storage layer`)}))}))}setBackgroundPreferences(e){return(0,n.mG)(this,void 0,void 0,(function*(){return u.U.savePreferenceSetting(r.AZ,e).then((t=>(t&&this.setBackgroundSettingsPreferencesCache(e),t))).catch((t=>(o.k.logError(`Exception ${t} occurred storing background settings preferences: ${e} in persistent storage layer`),!1)))}))}setBackgroundPreferenceByKey(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i=yield u.U.getPreferenceSetting(r.AZ,!0).catch((e=>(o.k.logError(`Exception ${e} occurred getting background settings preferences in persistent storage layer`),this.getNurturingErrorObject())));let n=i&&i.value;return n!==this.getNurturingErrorObject()&&(n||(n={key:r.AZ,value:{}}),n[e]=t,u.U.savePreferenceSetting(r.AZ,n).then((e=>(e&&this.setBackgroundSettingsPreferencesCache(n),e))).catch((i=>(o.k.logError(`Exception ${i} occurred storing background preference ${e} and value ${t} in persistent storage layer`),!1))))}))}getBespokeAdPreferences(){return(0,n.mG)(this,void 0,void 0,(function*(){return u.U.getPreferenceSetting(r.LF).then((e=>{const t=e&&e.value;if(t)return t;o.k.logError(`PSL: Preferences API does not have ${r.LF}.`)})).catch((e=>(o.k.logError(`Exception ${e} occurred storing background setting preferences in persistent storage layer`),null)))}))}getBespokeAdPreferencesByCampaign(e){return(0,n.mG)(this,void 0,void 0,(function*(){return u.U.getPreferenceSetting(r.LF,!0).then((t=>{const i=t&&t.value;if(i)return i.find((t=>t.name===e));o.k.logError(`PSL: Preferences API does not have ${r.LF}.`)})).catch((e=>(o.k.logError(`Exception ${e} occurred getting background setting preference by key in persistent storage layer`),null)))}))}setBespokeAdPreferencesByCampaign(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i=yield u.U.getPreferenceSetting(r.LF,!0).catch((e=>(o.k.logError(`Exception ${e} occurred getting background settings preferences in persistent storage layer`),this.getNurturingErrorObject()))),n=i&&i.value;if(n===this.getNurturingErrorObject())return!1;const s=n||[],a=s.find((t=>t&&t.name===e)),c=s.indexOf(a);return c>-1?s[c]=t:s.push(t),u.U.savePreferenceSetting(r.LF,s).then((e=>e)).catch((i=>(o.k.logError(`Exception ${i} occurred storing background preference ${e} and value ${t} in persistent storage layer`),!1)))}))}buildBespokeAdMetadata(e,t,i){return{name:e,numTimesSeen:t||0,isDismissed:!!i}}checkAndRemoveApplicableBackgrounds(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){const t=yield this.getBackgroundPreferences();if(!t)return!1;const n=this.overrideCacheAging(),r=t.changeBackgroundDaily||n||e,o=t.backgroundSelectionMetadata;if(!o)return!1;let s=-1;return n||i||(s=o.appliedTimestamp?o.appliedTimestamp+864e5:-1),!!(r&&s<Date.now())&&this.clearCachedBackground(t)}))}getBackgroundImageTypeFromSettings(e,t){return this.backgroundSettingsPreferences&&this.backgroundSettingsPreferences.backgroundSelectionMetadata?this.getProviderBackgroundType(this.backgroundSettingsPreferences.backgroundSelectionMetadata.provider):t?a.HX.off:e?a.HX.imageAndVideo:a.HX.bing}initialBackgroundPSLSetup(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(yield this.getBackgroundPreferences())return;if(!e)return;const t=this.createInitialStateFromChromiumPageSettings(e);if(!t)return void h.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.tvG),{message:"Initial state for background gallery is undefined",pb:Object.assign(Object.assign({},s.tvG.pb),{customMessage:`Initial state for background gallery is undefined. Current BackgroundImageType: ${e.currentBackgroundImageType}`})}));(yield this.setBackgroundPreferences(t))&&this.setBackgroundSettingsPreferencesCache(t)}))}createInitialStateFromChromiumPageSettings(e){switch(e.currentBackgroundImageType){case a.HX.off:case a.HX.custom:case a.HX.theme:return this.createInitialState(!1,!1,!1);case a.HX.bing:return this.createInitialState(!0,!1,!0);case a.HX.imageAndVideo:return e.enableNewUserDefaultSettings?this.createInitialState(!0,!1,!0):this.createInitialState(!0,!0,!0);default:return}}createInitialState(e,t,i){return{changeBackgroundDaily:e,includeVideoBackgroundsInRotation:t,showImageSpotlightText:i,selectedVideoSetting:this.shouldUseEnergySaverMode()?"energySaver":"balanced",imageLikes:[],imageDislikes:[],videoLikes:[],videoDislikes:[]}}shouldUseEnergySaverMode(){const e=window&&window.navigator;if(!e)return!0;const t=e?e.deviceMemory:-1;return!("4g"===e.connection.effectiveType)||!(t>=4)}getProviderBackgroundType(e){switch(e){case"BrowserLocal":return a.HX.custom;case"FREBackground":case"Iris":default:return a.HX.bing;case"Theme":return a.HX.theme;case"Video":case"CMSImage":return a.HX.imageAndVideo}}backgroundSelectionSet(){return(0,n.mG)(this,void 0,void 0,(function*(){return!!(yield this.getBackgroundPreferenceByKey(c.wI.backgroundSelectionMetadata))}))}overrideCacheAging(){return"true"===d.c.getQueryParameterByName("ageOutGalleryCache",(0,f.zp)())}handleRotationToggling(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return!!this.backgroundSettingsPreferences&&(e?(this.isCurrentAndCachedBackgroundIdentical()&&this.setShouldRerender(!1),this.checkAndRemoveApplicableBackgrounds(!0,t,!0)):!!this.backgroundSettingsPreferences.backgroundSelectionMetadata||this.getActiveBackgroundSelectionMetadata(t).then((e=>!!e&&(this.setShouldRerender(!1),this.setBackgroundPreferenceByKey(c.wI.backgroundSelectionMetadata,e)))).catch((e=>!1)))}))}isCurrentAndCachedBackgroundIdentical(){const e=this.getVideoBackgroundProviderInfo();if(!e||!this.backgroundSettingsPreferences||!this.backgroundSettingsPreferences.backgroundSelectionMetadata)return!1;const t=this.backgroundSettingsPreferences.backgroundSelectionMetadata;return e.provider===t.provider&&e.configIndex===t.configIndex}getActiveBackgroundSelectionMetadata(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!e)return;if(e.currentBackgroundImageType===a.HX.off)return this.buildBackgroundSelectionMetadata("Off");const t=yield this.getBackgroundPreferences();if(t){if(t.backgroundSelectionMetadata)return t.backgroundSelectionMetadata;switch(e.currentBackgroundImageType){case a.HX.bing:return this.buildBackgroundSelectionMetadata("Iris");case a.HX.imageAndVideo:return this.getVideoBackgroundProviderInfo();case a.HX.custom:return this.buildBackgroundSelectionMetadata("BrowserLocal");case a.HX.theme:return this.buildBackgroundSelectionMetadata("Theme");default:return this.buildBackgroundSelectionMetadata("Iris")}}}))}isVideoScheduled(){const e=(0,l.$o)().getObject("bkgdV");if(!e)return-1;const t=(new Date).getDay();return e&&e.schedule&&-1!==e.schedule[t]?e.schedule[t]:-1}getVideoBackgroundProviderInfo(){const e=this.isVideoScheduled()+(this.cmsImageSize?this.cmsImageSize:0);return e>-1?this.buildBackgroundSelectionMetadata(this.hasSimpleImages?"CMSImage":"Video",e.toString()):this.buildBackgroundSelectionMetadata("Iris")}buildBackgroundSelectionMetadata(e,t,i){return{provider:e,configIndex:t||"-1",appliedTimestamp:i||Date.now()}}shouldOverrideLayoutToCustom(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=yield this.getBackgroundPreferences();return!!e&&(!!e.backgroundSelectionMetadata||!e.changeBackgroundDaily)}))}resetAppliedBackgroundAndToggleStorage(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(e===a.nP.informational||e===a.nP.inspirational){const e=yield this.getBackgroundPreferences();e[c.wI.changeBackgroundDaily]=!0,e[c.wI.includeVideoBackgroundsInRotation]=!0,delete e[c.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(e)}}))}resetGalleryStorageForPolicyCompliance(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){return t&&i?this.resetStorageForImagesOff(e):t?this.resetStorageForImageOfTheDayDisabled(e):!i||this.resetStorageForCustomImageDisabled(e)}))}resetStorageForImagesOff(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!e)return!1;const t=Object.assign(Object.assign({},e),{changeBackgroundDaily:!1,includeVideoBackgroundsInRotation:!1,showImageSpotlightText:!1});return delete t[c.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(t)}))}resetStorageForImageOfTheDayDisabled(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!e)return!1;const t=Object.assign(Object.assign({},e),{changeBackgroundDaily:!1,includeVideoBackgroundsInRotation:!1,showImageSpotlightText:!1}),i=t.backgroundSelectionMetadata;return i&&"BrowserLocal"!==i.provider&&"Theme"!==i.provider&&delete t[c.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(t)}))}resetStorageForCustomImageDisabled(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!e)return!1;const t=e.backgroundSelectionMetadata;return!t||("Theme"===t.provider||"BrowserLocal"===t.provider?(delete e[c.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(e)):this.setBackgroundPreferences(e))}))}clearCachedBackground(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=e||(yield this.getBackgroundPreferences());return!!t&&(!t.backgroundSelectionMetadata||(delete t[c.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(t)))}))}setToastCooldown(e,t){let i=(0,l.$o)().getObject(r.IG);i||(i={reducedMotionNextAvailableTimestamp:0});const n=Date.now()+this.calculateToastCooldown(t);"reducedMotion"===e&&(i.reducedMotionNextAvailableTimestamp=Date.now()+n),(0,l.$o)().setObject(r.IG,i)}toastCooldownExpired(e){const t=(0,l.$o)().getObject(r.IG);return!t||"reducedMotion"===e&&t.reducedMotionNextAvailableTimestamp<Date.now()}calculateToastCooldown(e){return 864e5*e}getNurturingErrorObject(){return{key:r.AZ,value:{isError:!0}}}}},31402:function(e,t,i){"use strict";i.d(t,{i:function(){return l}});var n=i(33940),r=i(26415),o=i(68364),s=i(65135),a=i(7781),c=i(65337),d=i(92773);const l=new class{constructor(){this.bespokeAdPayload={},this.bespokeAdResponseProcessed=new Promise((e=>{this.bespokeAdPromiseResolver=e})),this.bespokeAdResponseHandled=!1,this.attachIasScriptWrapper=(0,d.Et)(r.qaE,"attachIasScript"),this.attachIasScript=this.attachIasScriptWrapper(((e,t,i)=>{if(!e||!t)return;const n=e.split(";"),a=n[0]&&n[0].split(":")[1],c=n[1]&&n[1].split(":")[1];if(a&&c){if(globalThis.isSingleIASInstance=!0,globalThis.__IntegralASAdPush)return void this.IASAdPush(i,a,c);const e=document.createElement("script");e.async=!0,e.src="https://assets.msn.com/staticsb/statics/latest/js/thirdparty/ias/fw.js",e.onload=()=>{this.IASAdPush(i,a,c)},e.onerror=()=>{s.M0.sendAppErrorEvent((0,o.Tr)(r.Sp0,"Failed to download IAS FW JS"))},document.head.appendChild(e)}})),this.IASAdPushWrapper=(0,d.Et)(r.qaE,"IASAdPush"),this.IASAdPush=this.IASAdPushWrapper(((e,t,i)=>{globalThis.__IntegralASAdPush([{adSelector:"%23"+e,iasParameters:JSON.stringify({host:"",config:"/rjss/st/"+t+"/"+i+"/skeleton.js?iasProxyPartnerId=2&ias_adpath=%23"+e,contentType:"application/json"})}])}))}handleBespokeAdResponse(){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.bespokeAdResponseHandled)return;this.bespokeAdResponseHandled=!0;const e=window._bespoke_ad_request,t=e&&e.bespokeAdPromise;if(this.screenWidth=e&&e.screenWidth,this.localStorageFrequencyCappingActive=e&&e.localStorageFrequencyCappingActive,!t||!this.screenWidth)return void this.bespokeAdPromiseResolver();let i,n,o;try{i=yield t}catch(e){n=e}if(!i||!i.body||!i.ok||200!==i.status)return 204===(null==i?void 0:i.status)?s.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.pnE),{message:"Bespoke Ad Request returned no content."})):s.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.k6Z),{message:"Bespoke Ad Request did not return the expected response."+(n||""),pb:Object.assign(Object.assign({},r.k6Z.pb),{customMessage:`bespokeAdResponse: ${i}, body: ${null==i?void 0:i.body}, ok: ${null==i?void 0:i.ok}, status code: ${null==i?void 0:i.status}`})})),void this.bespokeAdPromiseResolver();try{o=yield i.json()}catch(e){return void this.bespokeAdPromiseResolver()}this.bespokeAdPayload=this.mapResponseToPayload(o),this.bespokeAdEligibility=this.validateBespokeAdPayload(),this.bespokeAdPromiseResolver()}))}getBespokeAdPayload(){return this.bespokeAdPayload}getBespokeAdEligibilityAync(){return(0,n.mG)(this,void 0,void 0,(function*(){return yield this.bespokeAdResponseProcessed,this.bespokeAdEligibility}))}mapResponseToPayload(e){if(!e||!e.placements||!e.placements.length)return this.bespokeAdPayload;const t=e.placements[0],i=t.items,n=i&&i.length&&i[0];return t&&n?(this.bespokeAdPayload.adServedUrls=t.adServedUrls||[],this.bespokeAdPayload.adViewedUrls=t.visibilityUrls||[],this.bespokeAdPayload.adClickedUrls=n.clickUrls||[],this.bespokeAdPayload.imageUrl=n.images&&n.images.length&&n.images[0]&&n.images[0].url||"",this.bespokeAdPayload.clickthroughUrl=n.url||"",this.bespokeAdPayload.title=n.title||"",this.bespokeAdPayload.screenWidth=this.screenWidth,this.bespokeAdPayload.nativeAdId="bspk-ad-cta-container",this.bespokeAdPayload.verificationParameters=n.verificationParameters,this.bespokeAdPayload):this.bespokeAdPayload}validateBespokeAdPayload(){return!!this.bespokeAdPayload&&(!!this.bespokeAdPayload.imageUrl&&(!!this.bespokeAdPayload.clickthroughUrl&&(!!this.bespokeAdPayload.title&&!!this.bespokeAdPayload.screenWidth)))}sendBeacons(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(e&&e.length)for(let t=0;t<e.length;t++){let i=new Image(1,1);i.src=e[t],i=null}}))}setLocalStorageFrequencyCap(){if(!this.localStorageFrequencyCappingActive)return;const e=Number((0,c.$o)().getItem("bespokeAdFrequencyCap"))||0;(0,c.$o)().setItem("bespokeAdFrequencyCap",(e+1).toString())}incrementTimesViewedInPsl(e){return(0,n.mG)(this,void 0,void 0,(function*(){return a.p.getBespokeAdPreferencesByCampaign(e).then((t=>{const i=a.p.buildBespokeAdMetadata(e,t?t.numTimesSeen+1:1,!1);return a.p.setBespokeAdPreferencesByCampaign(e,i)}))}))}sendVerificationToIas(e){this.attachIasScript(this.bespokeAdPayload.verificationParameters,e,this.bespokeAdPayload.nativeAdId)}}},4429:function(e,t,i){"use strict";i.d(t,{hq:function(){return b},oM:function(){return S}});var n=i(33940),r=i(8228),o=i(49926),s=i(33379);const a="ntp.user_nurturing",c="ntp.record_user_choices",d="ntp.background_image_type",l="ntp.news_feed_display",u="ntp.layout_mode",p=new Set([a,c,d,l,u]),g={0:"focused",1:"inspirational",2:"informational",3:"custom"};let h=0,m="",f=!1;const v=new Set(["cs-cz","da-dk","de-at","de-ch","de-de","de-ch","el-gr","en-gb","en-ie","en-xl","es-es","fi-fi","fr-be","fr-ch","fr-fr","hu-hu","it-it","nb-no","nl-be","nl-nl","pl-pl","pt-pt","sv-se","tr-tr"]),y=new Map([["prg-ads-bspk1",2],["prg-ads-bspk2",2],["en-ca",2]]);function b(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(e&&t&&t.locale&&t.locale.language&&t.locale.market))return!1;const n=function(){if(h=screen&&screen.width,h)try{(0,r.U)().setItem("screen_width",h.toString())}catch(e){}else{const e=(0,r.U)().getItem("screen_width");h=e?parseInt(e):0}return h}();if(!n||n>2560)return!1;const a=(0,s.N)()&&window&&window.chrome&&window.chrome.ntpSettingsPrivate;if(!a)return!1;if(!t.locale||!t.locale.language||!t.locale.market)return!1;let c=0;return f=(0,s.N)()&&function(e){if(!v.has(e))return!1;return null===(0,o.AE)("eupubconsent-v2")}(t.locale.language+"-"+t.locale.market),f&&(c=Number((0,r.U)().getItem("bespokeAdFrequencyCap"))||0),!(c>=2)&&new Promise((n=>{a.getAllPrefs((r=>{if(!r)return void n(!1);const o=function(e){const t={};let i;for(i of e)p.has(i.key)&&(t[i.key]=i.value);return t}(r);m=g[o["ntp.layout_mode"]];const s=o["ntp.user_nurturing"]||[],a=s&&s.find((e=>e&&"bespoke_ad_preferences"===e.key)),c=a&&a.value&&a.value.find((t=>t&&t.name===e)),d=i?t.locale.language+"-"+t.locale.market:e,l=y.get(d),u=l&&l>0&&c&&c.numTimesSeen&&c.numTimesSeen>=l;if(c&&c.isDismissed||u)return void n(!1);const h=o["ntp.record_user_choices"]||[],f=h&&h.find((e=>e&&"enable_sponsored_content"===e.setting));if(f&&!0!==f.value)return void n(!1);const v=o["ntp.background_image_type"]||"";if("bing"!==v&&"imageAndVideo"!==v)return void n(!1);const b=o["ntp.news_feed_display"]||"";n("always"===b||"peek"===b)}))}))}))}function S(e,t){if(!e||!t)return;const i=function(e,t){if(!e||!t)return;const{locale:i,pagetype:n,audienceMode:s,fd_muid:a,aid:c}=e;if(!(i&&i.language&&i.market&&n&&"kids"!==s&&m))return;const d=i.language+"-"+i.market,l=f,u=!l&&a?a:null,p=function(){const e=(0,o.AE)("TOptOut");return!(!e||"1"!==e)}(),g=function(){const e=(0,r.U)().getItem("BT_AA_DETECTION");let t;try{t=e?JSON.parse(e):void 0}catch(e){}if(void 0!==t)return!1===t.acceptable;return!1}(),h=document.URL&&document.URL.includes("localhost")?"https://ntp.msn.com/edge/ntp":document.URL,v={locale:d,rid:c,partnerId:n,content:{anaheimPageLayout:m,sourceUrl:h,pageType:"edgechrntp",audienceMode:s},user:{muid:u,browserOptOut:p,isAdblock:g},placements:[{region:"bespoke",indices:[1],img:{w:311,h:120}}],isCookieWallPresent:l,isPeregrine:!0,device:{isMobile:!1}},y=new Headers;return y.append("x-ms-flightId",t),y.append("Content-Type","application/json; charset=utf-8"),y.append("User-Agent",navigator.userAgent),y.append("x-msedge-market",d),y.append("x-msedge-clientid",u),{headers:y,method:"POST",body:JSON.stringify(v)}}(e,t);if(!i)return;const n=new AbortController;window._bespoke_ad_request={bespokeAdPromise:fetch("https://srtb.msn.com/auction",i),bespokeAdPromiseAbortController:n,screenWidth:h,localStorageFrequencyCappingActive:f}}},74942:function(e,t,i){"use strict";i.d(t,{A:function(){return r}});var n=i(55067);class r{}r.updateEnabledState=new n.C("UpdateEnabled"),r.updateHeaderExpandedState=new n.C("UpdateHeaderExpanded"),r.updateStickyState=new n.C("UpdateSticky"),r.updateLayoutStatus=new n.C("UpdateLayoutStatus")},81171:function(e,t,i){"use strict";i.d(t,{i:function(){return o}});var n=i(63439),r=i(74942);class o extends n.e{updateEnabledStatus(e){r.A.updateEnabledState.getActionSender(this).send(e)}updateHeaderExpandedStatus(e){r.A.updateHeaderExpandedState.getActionSender(this).send(e)}updateLayoutStatus(e){r.A.updateLayoutStatus.getActionSender(this).send(e)}updateStickyStatus(e){r.A.updateStickyState.getActionSender(this).send(e)}}},69152:function(e,t,i){"use strict";i.d(t,{w:function(){return o}});var n=i(30856),r=i(74942);class o{reduce(e,t){if(!e)return{isEnabled:!1,isExpanded:!1,isHeaderSticky:!1};if(!t)return e;let i;return n.G.handleAction(t,r.A.updateHeaderExpandedState,(t=>{i=Object.assign(Object.assign({},e),{isExpanded:t})})),n.G.handleAction(t,r.A.updateStickyState,(t=>{i=Object.assign(Object.assign({},e),{isHeaderSticky:t})})),n.G.handleAction(t,r.A.updateEnabledState,(t=>{i=Object.assign(Object.assign({},e),{isEnabled:t})})),n.G.handleAction(t,r.A.updateLayoutStatus,(t=>{i=Object.assign(Object.assign({},e),{feedDisplaySetting:t})})),i||e}}},9500:function(e,t,i){"use strict";i.d(t,{i:function(){return o}});var n=i(58155),r=i(12884);class o{constructor(){this._registeredCampaign=null;const e=this.getDefaultRegisteredCampaign();e&&(this._registeredCampaign={name:e})}static getInstance(){return this._instance||(this._instance=new this)}static deInit(){this._instance=void 0}getDefaultRegisteredCampaign(){const e=(0,r.zp)();if(e){const t=n.c.getQueryParameterByName("defaultRegisteredCampaign",e);if(t)return t}return null}register(e){return!(!e||!e.name)&&(this._registeredCampaign&&this._registeredCampaign.name?this._registeredCampaign.name.toLocaleLowerCase()===e.name.toLocaleLowerCase():(this._registeredCampaign=e,!0))}}},41691:function(e,t,i){"use strict";i.d(t,{V:function(){return r}});var n=i(55067);class r{}r.loadLocalStorage=new n.C("loadLocalStorage"),r.marketUpdated=new n.C("marketUpdated"),r.pageLayoutStateLoaded=new n.C("PageLayoutStateLoaded"),r.readyToShowRecommendedLayoutAppliedCoachmark=new n.C("RecommendedLayoutApplied"),r.updateConfigData=new n.C("updateConfigData"),r.updateConfigDataChanged=new n.C("updateConfigDataChanged"),r.updateTopSitesQuickLinkEndMarginUsedPadding=new n.C("updateTopSitesQuickLinkEndMarginUsedPadding"),r.updateLocalStorage=new n.C("updateLocalStorage"),r.updateNtpTheme=new n.C("updateNtpTheme"),r.updatePrimaryAccountInfo=new n.C("updatePrimaryAccountInfo")},7009:function(e,t,i){"use strict";var n,r,o;i.d(t,{AL:function(){return a},Aq:function(){return p},BC:function(){return h},HT:function(){return r},WT:function(){return o},_H:function(){return m},dK:function(){return c},h0:function(){return n},l7:function(){return u},lA:function(){return s},pY:function(){return g},r2:function(){return l},vs:function(){return d}}),function(e){e[e.BOOLEAN_AND_STRING_ENUM=0]="BOOLEAN_AND_STRING_ENUM",e[e.BOOLEAN=1]="BOOLEAN",e[e.STRING_ENUM=2]="STRING_ENUM"}(n||(n={})),function(e){e.redirect="redirect",e.bing="bing"}(r||(r={})),function(e){e[e.user=0]="user",e[e.wpoPrerenderTab=1]="wpoPrerenderTab",e[e.wpoVisibleTab=2]="wpoVisibleTab",e[e.adminPortalVisibleTab=3]="adminPortalVisibleTab",e[e.ntpVisibleTab=4]="ntpVisibleTab"}(o||(o={}));const s={enabledFeatures:"enabledFeatures",IsDefaultSearchProviderLocked:"isInLockdownMode",isEducationEnvironment:"isEducationEnvironment",isInYandexRegions:"isInYandexRegions",isNewTabGreetingEnabled:"isNewTabGreetingEnabled",inPageSearchBoxType:"inPageSearchBoxType",profileCreationTime:"profileCreationTime",showFeedSwitcher:"showFeedSwitcher",isChromePrimaryBrowserAtFre:"isChromePrimaryBrowserAtFre",isEnrolledInProjectEqual:"isEnrolledInProjectEqual",irisAttributes:"irisAttributes",isEdgeSignInAllowed:"isEdgeSignInAllowed",isShowMicrosoftRewardsEnabled:"isShowMicrosoftRewardsEnabled",maxQuickLinks:"maxQuickLinks",isQuickLinksFolderInFavoritesEnabled:"isQuickLinksFolderInFavoritesEnabled",channel:"channel"},a={hasImage:"has_image",resourceUrl:"resource_url",timestamp:"last_modified_time"},c="msQuickLinksDefaultOneRow",d="msQuickLinksDefaultTwoRow",l={accountType:"account_type",accountId:"account_id",email:"email",firstName:"first_name",lastName:"last_name"};var u,p;!function(e){e.NO_ACCOUNT="NO_ACCOUNT",e.MSA="MSA",e.AAD="AAD"}(u||(u={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CHROME=1]="CHROME",e[e.FIREFOX=2]="FIREFOX",e[e.IEXPLORER=4]="IEXPLORER",e[e.SAFARI=11]="SAFARI",e[e.EDGE=12]="EDGE",e[e.MSEDGE=13]="MSEDGE"}(p||(p={}));const g="quick_links_options",h={selected:94608e3,promoted:2592e3},m={STABLE:"",DEV:"dev",BETA:"beta",CANARY:"canary"}},4814:function(e,t,i){"use strict";i.d(t,{$W:function(){return S},BA:function(){return I},F0:function(){return P},HG:function(){return k},I_:function(){return v},Mc:function(){return w},VT:function(){return E},WH:function(){return m},_g:function(){return y},_u:function(){return h},eD:function(){return f},k4:function(){return b},oB:function(){return A},qi:function(){return T},tv:function(){return O},zJ:function(){return C},zb:function(){return M}});var n=i(33940),r=i(33379),o=i(7009),s=i(53899),a=i(33954),c=i(65135),d=i(26415),l=i(65337),u=i(11765),p=i(17440),g=i(25964);function h(){return new Promise((e=>{const t=(0,r.N)()&&window.chrome&&window.chrome.ntpSettingsPrivate;t&&t.getConfigData?t.getConfigData((t=>{if(void 0!==t){const i={enabledFeatures:t[o.lA.enabledFeatures],IsDefaultSearchProviderLocked:t[o.lA.IsDefaultSearchProviderLocked],isEducationEnvironment:t[o.lA.isEducationEnvironment],isInYandexRegions:t[o.lA.isInYandexRegions],isNewTabGreetingEnabled:t[o.lA.isNewTabGreetingEnabled],inPageSearchBoxType:t[o.lA.inPageSearchBoxType],profileCreationTime:t[o.lA.profileCreationTime],showFeedSwitcher:t[o.lA.showFeedSwitcher],isChromePrimaryBrowserAtFre:t[o.lA.isChromePrimaryBrowserAtFre],isEnrolledInProjectEqual:t[o.lA.isEnrolledInProjectEqual],irisAttributes:new URLSearchParams(t[o.lA.irisAttributes]),isEdgeSignInAllowed:t[o.lA.isEdgeSignInAllowed],isShowMicrosoftRewardsEnabled:t[o.lA.isShowMicrosoftRewardsEnabled],maxQuickLinks:t[o.lA.maxQuickLinks],isQuickLinksFolderInFavoritesEnabled:t[o.lA.isQuickLinksFolderInFavoritesEnabled],channel:t[o.lA.channel]};e(i)}else a.k.logError("Failed to get config data from Chromium API."),e({})})):e({})}))}function m(e,t,i=!0){return(0,n.mG)(this,void 0,void 0,(function*(){try{if((yield w())&&t){const e=yield u.L.getPreferenceSetting(t);if(e&&void 0!==e.value)return JSON.parse(e.value.toString())}if(e){const t=(0,l.$o)().getObject(e,void 0);if(void 0!==t)return JSON.parse(t)}return i}catch(e){return a.k.logError("Failed to parse the key."),!1}}))}function f(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=yield(t=s._9.layout,new Promise((e=>{const i=window.chrome;if(i){const n=i.ntpSettingsPrivate;if(n&&"function"==typeof n.getPref)return void n.getPref(t,(i=>{e(i&&i.key===t?i.value:null)}))}e(null)})));var t;return null===e||isNaN(e)?null:s.F5[e]}))}function v(e,t,i,n){return{layoutPromotion:{renderSingleColumn:e,tmpl:t,control:i,reTargetRecommendedLayout:n}}}function y(e,t,i,n,r,o,a){let c=[];n&&(c=n.split(","));return{layoutPromotion:{recommendedLayoutOverride:{currentLayout:e},tmpl:t,control:i,enableWpoLayoutPromoMoreLayouts:r,fromLayoutsArray:c.length>0?c:[s.nP.inspirational],reTargetRecommendedLayout:o,selectedFeedDisplaySetting:a}}}function b(e,t){const i={message:e,type:"information",pb:Object.assign(Object.assign({},(0,d.mnt)()),{customMessage:t})};c.M0.sendClientLogEvent(i)}function S(e,t,i){c.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:t,pb:Object.assign(Object.assign({},e.pb),{customMessage:i})}))}function C(e,t,i,n,r,o){c.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:t,pb:Object.assign(Object.assign({},e.pb),{customMessage:i,customBackgroundImageInfo:JSON.stringify(n),ntpTheme:JSON.stringify(r),currentLayout:o})}))}function w(){return(0,n.mG)(this,void 0,void 0,(function*(){return yield u.L.isApiAvailableToUse()}))}function T(e,t){const i={setting:e,source:"ntp",timestamp:(new Date).getTime(),value:t};u.L.savePreferenceSetting(e,i)}function k(e,t){if(e===s.HX.off||!t||!t.provider)return!1;const i=t.provider,n=g.hv.get(e);return!(n&&n.some((e=>e===i)))}function A(e){var t;if(!e||!e.ntpTheme)return!1;const i=e.ntpTheme.usingDefaultTheme,n=(null===(t=e.ntpTheme.backgroundColorRgba)||void 0===t?void 0:t.length)>3,r=!!e.ntpTheme.imageUrl;return!i&&!r&&n}function I(e){if(!e||!e.ntpTheme)return!1;const t=e.ntpTheme.usingDefaultTheme,i=!!e.ntpTheme.imageUrl;return!t&&i}function P(e){if(!e||!e.length)return;const t=e.find((e=>e&&"background_setting_preferences"===e.key));return t&&t.value?t.value:void 0}function E(e){return g.rM.get(e.provider)}function O(e){return e&&e.includeVideoBackgroundsInRotation?function(){const e=(0,l.$o)().getObject("bkgdV");if(!e)return-1;const t=(new Date).getDay();return e&&e.schedule&&-1!==e.schedule[t]?e.schedule[t]:-1}():-1}function M(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){if(!e)return!1;if(!(yield p.U.isApiAvailableToUse()))return!1;const i=t>=0?"Video":"Iris",n=Object.assign(Object.assign({},e),{backgroundSelectionMetadata:{provider:i,configIndex:t,appliedTimestamp:Date.now()}});return p.U.savePreferenceSetting("background_setting_preferences",n)}))}},62526:function(e,t,i){"use strict";i.d(t,{A:function(){return c},z:function(){return a}});var n=i(53899),r=i(26415),o=i(65135);const s=new Map;function a(){const e=window&&window.chrome&&window.chrome.ntpSettingsPrivate;if(!e)return;if(!e.setPref)return;const t=e.setPref;e.setPref=function(e,i,n){if(t(e,i,n),u.has(e))return;let a="";const c=(new Error).stack,d="object"==typeof i?JSON.stringify(i):i;l.has(e)&&(a=function(e){if(!e)return"";const t=[],i=e.split(/\r?\n/);for(const e of i){const i=e.trim(),n=i.lastIndexOf(" ");if(!i||n<0||i.length<4)continue;const r=i.substring(3,n).split(".").slice(-1)[0];r&&p.has(r)&&t.push(r)}return t.slice(-1)[0]?t.slice(-1)[0]:""}(c)),function(e,t,i,n){if(!e||!n||!i)return;const r=s.get(t);if(!r)return;e(r,n+";"+i)}(t,e,i,a),o.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.a63),{message:"NTP Settings Private API set preference invocation detected.",pb:Object.assign(Object.assign({},r.a63.pb),{customMessage:`Key: ${e}, Value: ${d}`,stack:c||"No stacktrace available",functionName:a})}))}}function c(e){d.forEach(((t,i)=>{e[i]&&s.set(t,i)}))}const d=new Map([[n._9.layoutModeInstrumentation,n._9.layout],[n._9.newsFeedDsiplayInstrumentation,n._9.feeds]]),l=new Set(["ntp.layout_mode","ntp.background_image_type","ntp.show_image_of_day","ntp.news_feed_display"]),u=new Set(["ntp.record_user_choices","ntp.user_nurturing"]),p=new Set(["updateLayout","onUpdateFeedVisibility","onContentSelectChange","onLayoutModeSelectChange","updateToCustomLayoutMode","updateBackgroundImageType","updateLayoutAndBackgroundImageType","overrideLayoutPreferenceForPolicy","onCustomBackgroundRadioClick","migrateBackgroundPreference","wpoPromoteNewFeedDisplaySetting","wpoPromoteNewLayout"])},22388:function(e,t,i){"use strict";i.r(t),i.d(t,{BrowserType:function(){return r.Aq},ChromiumPageSettingsActions:function(){return s.V},ChromiumPageSettingsConnector:function(){return ee},ChromiumPageSettingsReducer:function(){return ie},EdgeChannel:function(){return r._H},EdgeFeatureFlag:function(){return n},InPageSearchBoxType:function(){return r.HT},LayoutChangeInitiator:function(){return r.WT},PrimaryAccountType:function(){return r.l7},ToolingInfo:function(){return ne},edgeNextLayoutOptimizer:function(){return W},getUserSetting:function(){return o.WH},isPersistentStorageAPIAvailable:function(){return o.Mc},overrideNtpSettingsPrivatePreferenceSetting:function(){return q.z},primaryAccountInfoStringMap:function(){return r.r2},recordUserChoice:function(){return o.qi},wpoLayoutManager:function(){return $}});var n,r=i(7009);!function(e){e.WinHPCustomBackButtonBehavior="msEnableWinHPNewTabBackButtonFocusAndClose"}(n||(n={}));var o=i(4814),s=i(41691),a=i(33940);const c={StructuredDataCardsUserPreference:{id:"scp",maxRawLength:250,useCookie:!0,jsonEncoded:!0},CoachmarkUserPreference:{id:"cmp",maxRawLength:1,useCookie:!1,jsonEncoded:!1},LayoutOptimization:{id:"wpolo",maxRawLength:250,useCookie:!1,jsonEncoded:!0}};var d,l;!function(e){e.DefaultShowContent="DefaultShowContent",e.DisplayedCoachMarkWizards="DisplayedCoachMarkWizards",e.DynamicFeedFilters="DynamicFeedFilters",e.FreDialogExistingUser="FreDialogExistingUser",e.HasMsa="HasMsa",e.MarketSelection="MarketSelection",e.OutlookOptIn="OutlookOptIn",e.ProActiveCanvasFRE="ProActiveCanvasFRE",e.StructuredDataCardsUserPreference="StructuredDataCardsUserPreference",e.TopicSelection="TopicSelection",e.Layout="Layout",e.DhpHideNewsFeed="DhpHideNewsFeed",e.HideBingImage="HideBingImage"}(d||(d={})),function(e){e.DefaultShowContent="dsc",e.CoachMarkWizard="cmwr",e.DynamicFeedFilters="dff",e.MarketReset="mktreset",e.HasMsa="msa",e.MarketSelection="ntps",e.OutlookOptIn="olopt",e.ProActiveCanvasFRE="spnewpcfre",e.StructuredDataCardsUserPreference="scp",e.TopicSelection="epnff",e.DhpHideNewsFeed="iedo",e.HideBingImage="bingimage"}(l||(l={}));var u=i(65337);class p{constructor(e=(0,u.$o)()){this.webStorage=e,this.loadSettingsFromStorage=()=>{},this.storage={}}fetchProperty(e){const t=c[e];return t&&this.storage[t.id]}clear(){Object.keys(c).forEach((e=>{const t=c[e];this.webStorage.removeItem(t.id),delete this.storage[t.id]}))}deleteProperty(e){const t=c[e];t&&(this.webStorage.removeItem(t.id),delete this.storage[t.id])}saveProperty(e,t){const i=c[e];if(i){const e=i.jsonEncoded,n=i.maxRawLength,r=typeof t,o=JSON.stringify(t),s=o.length;if(e?"object"===r&&s<=n:("string"===r||"number"===r)&&s<=n+2){const n=e?o:t;return this.webStorage.setItem(i.id,n),!0}}return!1}loadSynchronizedSettingsFromStorage(){Object.keys(c).forEach((e=>{const t=c[e].id,i=this.webStorage.getItem(t);i&&(this.storage[t]=JSON.parse(i))}))}}var g=i(63439),h=i(53899),m=i(35385),f=i(16614),v=i(68364),y=i(26415),b=i(33954),S=i(87538),C=i(51953),w=i(67462),T=i(58155),k=i(73252),A=i(84169),I=i(2040),P=i(17440),E=i(75192),O=i(9586),M=i(65135),x=i(27003),D=i(99590);class R{constructor(e){this.numberOfDaysToStoreTmpl=90,this.layoutTmplDataKey=E.Xm.wpoLytTmpl,this.userNurturingManager=e}static getInstance(){return x.Gq.get("__TmplManager__",(()=>new R(P.H.getInstance())))}persistTmplValueToNurturingPref(e){return(0,a.mG)(this,void 0,void 0,(function*(){if(e){const t=yield this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),i=t&&t.value||[];if(this.findTmpl(i,e))return;i.push({value:e,expiryDate:this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl)}),yield P.U.savePreferenceSetting(this.layoutTmplDataKey,i)}}))}persistTmplValueToNurturingPrefAndStampToTelemetry(e){return(0,a.mG)(this,void 0,void 0,(function*(){if(e){const t=yield this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),i=t&&t.value||[];this.findTmpl(i,e)||i.push({value:e,expiryDate:this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl)});const n=[...new Set(i)];yield this.userNurturingManager.savePreferenceSetting(this.layoutTmplDataKey,n),M.M0.addOrUpdateTmplProperty(e,"1")}}))}stampExistingTmplValueToTelemetry(){return(0,a.mG)(this,void 0,void 0,(function*(){const e=yield this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),t=e&&e.value||[];if(!t.length)return;let i=!1;const n=this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl),r=t.map((e=>"string"==typeof e?(i=!0,{value:e,expiryDate:n}):e)),o=(new Date).getTime(),s=r.filter((e=>e.expiryDate>o));s.forEach((e=>{e.value&&M.M0.addOrUpdateTmplProperty(e.value,"1")})),(i||r.length!=s.length)&&(yield this.userNurturingManager.savePreferenceSetting(this.layoutTmplDataKey,s))}))}findTmpl(e,t){return e&&-1!=e.findIndex((e=>e===t||e&&e.value===t))}getExpirationTimestamp(e){let t;try{t=(0,O.Z)(new Date,e)}catch(i){const n=new Date;t=n.setDate(n.getDate()+e)}return t.getTime()}}const L=(0,D.h)(R);var F,N=i(11765),B=i(75970),j=i(85799);!function(e){e[e.none=0]="none",e[e.noAds=1]="noAds"}(F||(F={}));const $=new class{tryToGetLocalStorageLayoutConfig(e){const t=A.jG&&A.jG.CurrentRequestTargetScope&&A.jG.CurrentRequestTargetScope.pageExperiments;let i,n;if(t&&t.includes("prg-wpolsopt"))i=j.k.getWpoTreatments(A.jG.AppType,A.jG.CurrentRequestTargetScope);else{const e=this.getWpoFromLocalStorage();i=e&&e.treatments||[]}return i.forEach((t=>{t&&t.properties&&"PageContentLayout"===t.properties.layoutType&&(e||t.properties.layoutRecommended===h.nP.informational)&&(this.properties=t.properties,n=(0,o._g)(this.properties.layoutRecommended,this.properties.tmpl,this.properties.isControl,this.properties.fromLayouts,e,this.properties.reTargetRecommendedLayout,this.properties.selectedFeedDisplaySetting))})),this.layoutPromotionType=F.none,this.properties&&this.properties.expirationPeriodInDays&&(this.layoutPromotionType=F.noAds),n||null}tryToGetLocalStorageFeedLayoutConfig(){const e=A.jG&&A.jG.CurrentRequestTargetScope&&A.jG.CurrentRequestTargetScope.pageExperiments;let t,i;if(e&&e.includes("prg-wpolsopt"))t=j.k.getWpoTreatments(A.jG.AppType,A.jG.CurrentRequestTargetScope);else{const e=this.getWpoFromLocalStorage();t=e&&e.treatments||[]}return t.forEach((e=>{e&&e.properties&&"PageFeedLayout"===e.properties.layoutType&&(i=(0,o.I_)(e.properties.renderSingleColumn,e.properties.tmpl,e.properties.isControl,e.properties.reTargetRecommendedLayout))})),i||null}promotionFollowUpAction(){return(0,a.mG)(this,void 0,void 0,(function*(){if(this.layoutPromotionType===F.noAds){const e="delayAds",t=(0,w.ej)(e);t?(0,o.$W)(y._Gv,"Tried to apply no-ads promotion more than once",`${t}`):this.properties&&this.properties.expirationPeriodInDays&&((0,w.sq)(e,"1",this.properties.expirationPeriodInDays,A.jG.IsChinaCompliance?".msn.cn":".msn.com","/"),(0,o.k4)(`User was promoted to no-ads, ${this.properties.expirationPeriodInDays} days template.`))}}))}getWpoFromLocalStorage(){try{this.wpoLocalStorageKey||(this.wpoLocalStorageKey=(0,B._)(A.jG.AppType,A.jG.CurrentRequestTargetScope));const e=(0,u.$o)().getItem(this.wpoLocalStorageKey);return e?JSON.parse(e):null}catch(e){const t=`Error in parsing JSON from local storage key: -${this.wpoLocalStorageKey}-`;return(0,o.$W)(y.Od5,t,e),null}}};var U=i(87230),H=i(86331);class _{}const W=new class{constructor(){this.recommendation=new _,this.getRecommendedLayout=(e,t,i)=>(0,a.mG)(this,void 0,void 0,(function*(){return new Promise((n=>(0,a.mG)(this,void 0,void 0,(function*(){try{if(this.recommendation.qualifyForPromotion)return this.recommendation.control?n(null):n(this.recommendation.pageSetting);const{enableWpoLayoutPromoMoreLayouts:r,enableWpoLayoutPromoCoolDown:s,coolDownTimeInSecondsPromoted:a,coolDownTimeInSecondsSelected:c}=e&&e.layoutPromotion||{},d=$.tryToGetLocalStorageLayoutConfig(r)||e,l=d&&d.layoutPromotion,u=l&&l.recommendedLayoutOverride;if(!u)return(0,o.k4)("There is no config to promote."),n(null);if(!(yield this.canBePromoted(d,t,i,s,a,c)))return n(null);return(l&&l.enterpriseContentOffPromotion||u.selectedFeedDisplaySetting&&u.currentLayout===h.nP.custom)&&(this.recommendation.pageSetting.recommendedFeedDisplaySetting=u.selectedFeedDisplaySetting),this.recommendation.promotionData.isRevertFlight||U.W.getInstance().registerItemTriggerMessage(H.gz.LayoutPromotion,!0),n(this.recommendation.pageSetting)}catch(e){return(0,o.$W)(y.nab,"Applying recommended layout failed",`Error:${e}`),n(null)}}))))})),this.recommendation.qualifyForPromotion=!1}followUpAction(){if(!this.recommendation.qualifyForPromotion)return;const e=this.recommendation&&this.recommendation.promotionData;if(!e)return;const t=this.recommendation.pageSetting&&this.recommendation.pageSetting.recommendedLayout;this.updateUserNurturing(e.nurturingPreferenceItemValue,e.previousLayout,t,e.shouldReTarget),$.promotionFollowUpAction()}doNotApplyRevertFlight(e,t,i,n,r){return(0,a.mG)(this,void 0,void 0,(function*(){if(!r&&e!==h.nP.informational)return(0,o.k4)(`Did not revert layout to ${t} since layout is ${e}. Chrome is FRE.`),!0;if(!i)return(0,o.k4)("User was not promoted to informational before. Revert flight is not applied."),!0;return!(!n||!n.layoutHistory)&&((0,o.k4)("Do not promote layout since user is categorized as highly engaged. User was not promoted with the October flight"),!0)}))}doNotApplyForwardFlight(e,t,i){return!t&&!i&&e!=h.nP.informational&&((0,o.k4)(`Did not promote ${e} layout since edge is at FRE. Promotion should only be infomrational`),!0)}isNurturingLimitsGood(e,t,i,n,s,a){if(s&&e&&e.recommendedLayoutAppliedTs){const t=(new Date).getTime(),i=null!=a?a:r.BC.promoted;if(t-e.recommendedLayoutAppliedTs>1e3*i)return(0,o.k4)("Promote again after a long gap"),!0}if(t&&!i){const t=`recommendedLayoutAppliedTs:${e&&e.recommendedLayoutAppliedTs}`;return(0,o.k4)("Recommended layout was already applied",t),!1}return!(i&&n>=1)||((0,o.k4)("Max retargeting threshold reached"),!1)}updateUserNurturing(e,t,i,n){return(0,a.mG)(this,void 0,void 0,(function*(){const r=(new Date).getTime(),s=e&&e.recommendedLayoutRetargetHistory||[];n&&s.push(r);const a=e&&e.layoutHistory||[];a.push({time:r,from:t,to:i,reTarget:n||!1});const c={recommendedLayoutAppliedTs:r,recommendedLayoutRetargetHistory:s,layoutHistory:a};yield P.U.savePreferenceSetting(E.Xm.wpo,c),(0,o.k4)("Recommended layout applied")}))}canBePromoted(e,t,i,n,r,s){var c;return(0,a.mG)(this,void 0,void 0,(function*(){t||(t=yield(0,o.eD)());const{layoutPromotion:a}=e||{},d=a.recommendedLayoutOverride&&a.recommendedLayoutOverride.currentLayout;if(t===d&&t!==h.nP.custom)return(0,o.k4)("Current layout is same as recommended layout"),!1;const{enterpriseContentOffPromotion:l}=a;if(l&&this.areFeedsDisabledByAdmin())return(0,o.k4)("No promotion since this is an enterprise content off promotion and feeds are disabled by admin settings."),!1;if(l&&t!==h.nP.custom&&"off"!==i)return(0,o.k4)(`No promotion since current layout is ${t} and this is an enterprise content off promotion`),!1;const{fromLayoutsArray:u,enableWpoLayoutPromoMoreLayouts:p,reTargetRecommendedLayout:g}=a;if(p){if(u&&-1===u.indexOf(t))return(0,o.k4)(`Current layout ${t} is not one of the fromLayouts ${u.toString()}`),!1}else if(!l&&(t===h.nP.focused||t===h.nP.custom))return(0,o.k4)(`No promotion since current layout is ${t}`),!1;if(!(yield P.U.isApiAvailableToUse()))return!1;if(yield this.isLayoutSelectedByUser(d,n,s))return!1;const m=yield P.U.getPreferenceSetting(E.Xm.wpo),f=m&&m.value,v=f&&f.recommendedLayoutAppliedTs,y=f&&f.recommendedLayoutRetargetHistory&&f.recommendedLayoutRetargetHistory.length;let b;const S=a.enableChromeFreCheck;if(S){const e=yield(0,o._u)();b=e&&e.isChromePrimaryBrowserAtFre}let C=!1;if(S&&b){if(yield this.doNotApplyRevertFlight(t,d,v,f,p))return!1;C=!0}else{if(this.doNotApplyForwardFlight(d,l,p))return!1}if(!this.isNurturingLimitsGood(f,v,g,y,n,r))return!1;if(this.recommendation={pageSetting:{recommendedLayout:d,postPromotionCallback:this.followUpAction.bind(this)},promotionData:{previousLayout:t,nurturingPreferenceItemValue:f,isRevertFlight:C||g,shouldReTarget:g,tmpl:a.tmpl},control:a.control,qualifyForPromotion:!0},g){const e=null===(c=f.layoutHistory)||void 0===c?void 0:c[0];e&&(this.recommendation.pageSetting.recommendedLayout=e.from||d)}return this.recommendation.pageSetting.recommendedLayout===h.nP.custom&&a.selectedFeedDisplaySetting&&(this.recommendation.pageSetting.recommendedFeedDisplaySetting=a.selectedFeedDisplaySetting),this.recommendation.promotionData.tmpl&&L.persistTmplValueToNurturingPref(this.recommendation.promotionData.tmpl),!this.recommendation.control||((0,o.k4)("About to promote, but did not since this is a control flight"),!1)}))}areFeedsDisabledByAdmin(){const e=(0,u.$o)().getObject("AdminPortalSettings");if(!e)return!1;const{isOfficeContentEnabled:t,isShowCompanyAndIndustry:i}=e;return!t&&!i}isLayoutSelectedByUser(e,t,i){return(0,a.mG)(this,void 0,void 0,(function*(){if(!(yield N.L.isApiAvailableToUse())){const e="ntp.record_user_choices pref is not present in this version of EDGE; Will try to promote user";return(0,o.k4)(e),!1}const n=yield N.L.getPreferenceSetting("layout_mode");if(n&&"ntp"===n.source){if(t&&n.timestamp){const e=(new Date).getTime(),t=null!=i?i:r.BC.selected;if(e-n.timestamp>1e3*t){const e="ntp.record_user_choices pref is present and can be promoted as selected time is larger than cooldowntime";return(0,o.k4)(e),!1}}return(0,o.k4)(`Did not promote layout to ${e} since user explicitly set layout to ${n.value}`),!0}return!1}))}};var z=i(12884),G=i(33379),V=i(84754),q=i(62526);const Z="myFeed",K=(e,t,i)=>{e===h._9.selectedFeedPivot&&""===t&&(t=Z),e===h._9.selectedFeedPivot&&""===i&&(i=Z),e===h._9.feeds&&"onscroll"===t&&"headingsonly"===i||t!==i&&M.M0.sendAppErrorEvent(Object.assign(Object.assign({},y.txQ.SsrEdgeHeaderMismatch),{message:"SSR - Edge header mismatch.",pb:Object.assign(Object.assign({},y.txQ.SsrEdgeHeaderMismatch.pb),{customMessage:`key: ${e}, header: ${t}, state: ${i}`,edgeHeader:`${k.Al.EdgeNTPHeader}`})}))};var Q=i(1584),J=i(77331);function X(e){const t=function(){var e,t;try{const i=A.jG&&A.jG.CurrentRequestTargetScope&&A.jG.CurrentRequestTargetScope.pageExperiments;let n;if(i&&i.includes("prg-wpolsopt"))n=j.k.getWpoTreatmentsWithType(A.jG.AppType,A.jG.CurrentRequestTargetScope,J._h.searchBoxCollapse);else{const e=(0,B._)(A.jG.AppType,A.jG.CurrentRequestTargetScope),{treatments:t}=(0,u.$o)().getObject(e)||{};if(!t)return null;n=t.filter((e=>(null==e?void 0:e.type)===J._h.searchBoxCollapse))}const r=(null==n?void 0:n.length)>0&&(null===(t=null===(e=n[0])||void 0===e?void 0:e.properties)||void 0===t?void 0:t.searchBoxCollapsibleControlConfig);if(r)return r}catch(e){const t="Error in getting wpo search box collapsible config";(0,v.H)(y.Od5,t,`error:${e}`)}return null}(),i=t&&!0===t.collapseSearchBox;M.M0.addOrUpdateTmplProperty("hidableSearchBox",i?"1":"0");let n=null;return e&&e.length&&(n=e.find((e=>"hide_search_box"===e.setting))),!i||n?!!n&&!!n.value:(M.M0.addOrUpdateTmplProperty("promotedSearchBoxCollapsed",t.collapseSearchBox?"1":"0"),!!t.collapseSearchBox)}const Y=()=>{window.chrome.runtime.lastError};class ee extends g.e{constructor(e,t,i,n,a,c,l){super(e,t,i,n,a,c,l),this.preferenceChangeCallbacks=[],this.marketCookieName="ntps",this.cookieExpireInDays=182,this.didLayoutModeChangeInCurrentTab=!1,this.layoutChangeInitiatorKey="lytupdtinitiator",this.meetDefaultFeedFlightCondition=!1,this.shouldPromoteTopsitesTop=!1,this.isPageLayoutStateReady=new Promise((e=>{this.resolvePageLayoutState=e})),this.getLayoutStateFromOverrideConfig=(e,t)=>{let i;if(e&&e!==h.nP.custom){const n=h.Wi[e];i={currentBackgroundImageType:n.current_background_image_type,originalLayout:t.currentLayout,currentLayout:e,greetingEnabled:n.greeting,imageOfTheDayEnabled:n.current_background_image_type!==h.HX.off,quickLinksEnabled:n.quick_links,hideDefaultTopSites:n.hide_promoted_links,selectedFeedDisplaySetting:n.feeds_position,dailyDiscoveryEnabled:n.daily_discovery}}else i=Object.assign(Object.assign({},t),{originalLayout:t.currentLayout,currentLayout:h.nP.custom});return i},this.settingsAPI="undefined"!=typeof window&&window&&window.chrome&&window.chrome.ntpSettingsPrivate,this._authPrivateApi="undefined"!=typeof window&&window&&window.chrome&&window.chrome.authPrivate,this.ntpApiHandle="undefined"!=typeof window&&window&&window.chrome&&window.chrome.embeddedSearch&&window.chrome.embeddedSearch.newTabPage,this.chromiumBackgroundPrefType=r.h0.BOOLEAN,this.registerOnConfigDataChangedCallback(),this.registerOnPrefsChangeCallback(),this.checkPromoteTopsitesTop().then((e=>{this.shouldPromoteTopsitesTop=e})),this.edgeChromiumStorageProvider=new p,s.V.updateLocalStorage.registerObserver((e=>{const t=e.params[0];this.edgeChromiumStorageProvider.saveProperty(d.StructuredDataCardsUserPreference,function(e){return{bsk:{v:e.bingShoppingVisible?1:0,p:null},wsk:{v:e.weatherVisible?1:0,p:null},ssk:{v:e.sportsVisible?1:0,p:null},msk:{v:e.moneyVisible?1:0,p:null},hsk:{v:e.horoscopeVisible?1:0,p:null},osk:{v:e.onThisDayVisible?1:0,p:null},esk:{v:e.electionsVisible?1:0,p:null},essk:{v:e.esportsVisible?1:0,p:null},lsk:{v:e.lotteryVisible?1:0,p:null},qsk:{v:e.qnaVisible?1:0,p:null},rsk:{v:e.qnaVisible?1:0,p:null},amsk:{v:e.autosMarketplaceVisible?1:0,p:null},bhsk:{v:e.healthCardVisible?1:0,p:null}}}(t))})),s.V.marketUpdated.registerObserver((e=>{const t=e.params[0];if(t&&""!==t)try{this.updateMarketandRefresh(t)}catch(e){(0,v.OO)(e,y.GVt.FailedToChangeTheMarket,"Failed to change the market, cookie doesn't drop from PCS")}})),this.getInitialState().then((e=>{s.V.loadLocalStorage.getActionSender(this).send(e)})),this.QSPLayoutOverride=T.c.getQueryParameterByName("setNTPLayout",(0,z.zp)()),this.getPageLayoutStateAsync().then((e=>{if(this.config&&this.config.isOnDefaultFeedFlight&&this.meetDefaultFeedFlightCondition&&this.updateLayout(e),this.config&&this.config.promoFormParamList){const t=new URLSearchParams((0,z.zp)()).get("form");if(t){if(this.config.promoFormParamList.includes(t.toUpperCase())&&"always"!==e.selectedFeedDisplaySetting){const t=Object.assign(Object.assign(Object.assign({},e),{originalLayout:e.currentLayout}),h.YZ);this.updateLayout(t),e=Object.assign({},t)}}}this.shouldPromoteTopsitesTop&&(this.saveTopSitesPromotionNurturing(e.selectedQuickLinksDisplaySetting,h.Z3.top),e.selectedQuickLinksDisplaySetting=h.Z3.top,U.W.getInstance().registerItemTriggerMessage(this.config.enableTargetDismissCM?H.gz.TopSitesPromotionV2:H.gz.TopSitesPromotion,!0)),W.getRecommendedLayout(c,e.currentLayout,e.selectedFeedDisplaySetting).then((t=>{if(this.config.forceRegisterLayoutPromotionCoachMark&&U.W.getInstance().registerItemTriggerMessage(H.gz.LayoutPromotion,!0),t){const{recommendedLayout:i,recommendedFeedDisplaySetting:n,postPromotionCallback:o}=t;if(i){const t=k.Al.IsPrerender?r.WT.wpoPrerenderTab:r.WT.wpoVisibleTab,s=this.getLayoutStateFromOverrideConfig(i,e);this.wpoPromoteNewLayout(s,t),n&&this.wpoPromoteNewFeedDisplaySetting(n),(0,u.$o)().setObject("previousLayoutState",{currentLayout:e.currentLayout,selectedFeedDisplaySetting:e.selectedFeedDisplaySetting,currentBackgroundImageType:e.currentBackgroundImageType,greetingEnabled:e.greetingEnabled,imageOfTheDayEnabled:e.imageOfTheDayEnabled,quickLinksEnabled:e.quickLinksEnabled,hideDefaultTopSites:e.hideDefaultTopSites,dailyDiscoveryEnabled:e.dailyDiscoveryEnabled}),e=Object.assign(Object.assign({},e),{currentLayout:i,selectedFeedDisplaySetting:n||s.selectedFeedDisplaySetting,currentBackgroundImageType:s.currentBackgroundImageType,greetingEnabled:s.greetingEnabled,imageOfTheDayEnabled:s.imageOfTheDayEnabled,quickLinksEnabled:s.quickLinksEnabled,hideDefaultTopSites:s.hideDefaultTopSites,dailyDiscoveryEnabled:s.dailyDiscoveryEnabled}),o&&o()}}(0,G.N)()&&L.stampExistingTmplValueToTelemetry(),e.isLoadCompleted=!0,s.V.pageLayoutStateLoaded.getActionSender(this).send(e),this.resolvePageLayoutState()}))})),this.getPrimaryAccountInfoAsync().then((e=>{s.V.updatePrimaryAccountInfo.getActionSender(this).send(e)})),this.getConfigDataAsync().then((e=>{s.V.updateConfigData.getActionSender(this).send(e)})),this.ntpApiHandle&&(this.ntpApiHandle.onthemechange=()=>{const e=this.ntpApiHandle.ntpTheme;s.V.updateNtpTheme.getActionSender(this).send(e),e||(0,o.$W)(y.BFw,"Missing theme information detected on theme change.",`ntpTheme: ${e}`)})}updateMarketandRefresh(e){return(0,a.mG)(this,void 0,void 0,(function*(){(0,w.sq)(this.marketCookieName,void 0,-1),(0,w.sq)(this.marketCookieName,void 0,-1,void 0,"/edge");const t=JSON.stringify({m:e});(0,w.sq)(this.marketCookieName,t,this.cookieExpireInDays,A.jG.HostPage.topDomain,"/"),yield N.L.savePreferenceSetting(this.marketCookieName,{setting:this.marketCookieName,source:"ntp",timestamp:(new Date).getTime(),value:t}),M.M0.addOrUpdateTmplProperty("marketSetToExplicitSelection","1");const i=`/${A.jG.CurrentMarket}/`;if(!location.pathname.startsWith(i))return void(0,S.Z)();const n=new URL(location.href);n.pathname=n.pathname.replace(i,`/${e}/`),(0,S.Z)({newUrl:n.href})}))}checkAuthApiIsAvailable(){return!!(window&&window.chrome&&window.chrome.authPrivate)&&!!window.chrome.authPrivate.startEdgeSignIn}getPrimaryAccountInfoAsync(e=!0){return new Promise((t=>{const i=this.getCurrentState();e&&i.primaryAccountInfo?t(i.primaryAccountInfo):this._authPrivateApi&&this._authPrivateApi.getPrimaryAccountInfo?this._authPrivateApi.getPrimaryAccountInfo((e=>{const i={accountId:e[r.r2.accountId],accountType:e[r.r2.accountType],firstName:e[r.r2.firstName],lastName:e[r.r2.lastName],email:e[r.r2.email]};t(i)})):(b.k.logError("Failed to get auth private api data from Chromium API."),t({}))}))}getConfigDataAsync(){return(0,a.mG)(this,void 0,void 0,(function*(){const e=this.getCurrentState();return e.configData?e.configData:(0,o._u)()}))}getPageSettingsStateAsync(){const e=this.getCurrentState(),t=this.config&&this.config.forceDisableContent;return t&&this.setContentDisabled(e),new Promise(((i,n)=>this.settingsAPI?e.isLoadCompleted?(t&&!e&&this.setContentDisabled(e),i(e)):void s.V.pageLayoutStateLoaded.registerObserver((e=>{const r=e&&e.params;if(!r||r.length<1)return n("Load action didn't send any params");const o=r[0];return t&&!o&&this.setContentDisabled(o),o?i(o):n("Chromium Load action params type does not match with expected state type")})):i(e)))}getThemeTextColor(){let e=null;const t=this.getThemeLayoutColor();if(t){const i={r:t[0],g:t[1],b:t[2],a:t[3]};e=C.g.rgbNumberToCssHexColor(C.g.parsedColorToNumber(i))}return e}getThemeLayoutColor(){const e=this.getCurrentState(),t=e.ntpTheme;if(e.currentBackgroundImageType!==h.HX.theme||!t||t.imageUrl||t.usingDefaultTheme||!t.backgroundColorRgba)return null;if(t&&!t.usingDefaultTheme){if(t&&t.isNtpBackgroundDark&&t.textColorRgba&&t.textColorRgba.length>3)return t.textColorRgba;if(t&&!t.isNtpBackgroundDark&&t.textColorLightRgba&&t.textColorLightRgba.length>3)return t.textColorLightRgba}return null}getLayoutStateAsync(){return this.getPageSettingsStateAsync()}addSettingChangeListener(e){this.preferenceChangeCallbacks.push(e)}updateLayout(e,t=r.WT.user,i=!0){var n;if(!(0,G.N)()||!this.settingsAPI||this.config&&this.config.forceDisableContent)return;const o=this.getCurrentState();let s=h.$B[o.selectedQuickLinksDisplaySetting];e.selectedQuickLinksDisplaySetting&&(s=h.$B[e.selectedQuickLinksDisplaySetting]),this.didLayoutModeChangeInCurrentTab=!0,(0,u.$o)().setObject(this.layoutChangeInitiatorKey,t);const a=T.c.getQueryParameterByName("isFREModalBackground",(0,z.zp)());this.meetDefaultFeedFlightCondition||!a?((0,V.LC)(t===r.WT.user?E.st.User:E.st.Wpo,h._9.layout,h.Uq[null!==(n=e.originalLayout)&&void 0!==n?n:e.currentLayout],h.Uq[e.currentLayout],(new Date).getTime()),i?this.executeSettingsChange(h._9.layout,h.Uq[e.currentLayout]):this.settingsAPI.setPref(h._9.layout,h.Uq[e.currentLayout],Y)):M.M0.addOrUpdateTmplString("FREModalBackgroundLayoutNotSaved:1"),e.isContentFeedManagedByAdminPortal&&this.updateContentFeedAdminPortalSetting(!0),s?this.settingsAPI.setPref(h._9.quickLinksDisplaySetting,s,Y):this.settingsAPI.setPref(h._9.quickLinks,e.quickLinksEnabled,Y),this.settingsAPI.setPref(h._9.hideDefaultTopSites,e.hideDefaultTopSites,Y),this.settingsAPI.setPref(h._9.imageOfTheDay,e.imageOfTheDayEnabled,Y),this.settingsAPI.setPref(h._9.currentBackgroundImageType,e.imageOfTheDayEnabled?h.HX.imageAndVideo:h.HX.off,Y),this.settingsAPI.setPref(h._9.greeting,e.greetingEnabled,Y),this.settingsAPI.setPref(h._9.feeds,e.selectedFeedDisplaySetting,Y),void 0!==e.selectedFeedPivot&&this.settingsAPI.setPref(h._9.selectedFeedPivot,e.selectedFeedPivot,Y),void 0!==e.dailyDiscoveryEnabled&&null!==e.dailyDiscoveryEnabled&&(this.updateDailyDiscovery(e.dailyDiscoveryEnabled),N.L.savePreferenceSetting(E.nc.daily_discovery,{setting:E.nc.daily_discovery,source:"ntp",timestamp:(new Date).getTime(),value:e.dailyDiscoveryEnabled})),e.enableNewUserDefaultSettings&&N.L.savePreferenceSetting(E.nc.enable_new_user_default_settings,{setting:E.nc.enable_new_user_default_settings,source:"ntp",timestamp:(new Date).getTime(),value:e.enableNewUserDefaultSettings})}updateQuickLinks(e){const t=this.getCurrentState();if(t&&t.selectedQuickLinksDisplaySetting){const t=e?h.VE.onerow:h.VE.off;this.executeSettingsChange(h._9.quickLinksDisplaySetting,t)}else this.executeSettingsChange(h._9.quickLinks,e)}updateQuickLinksDisplayOption(e){const t=this.getCurrentState();t&&t.configData&&t.configData.enabledFeatures&&(t.configData.enabledFeatures.includes(r.dK)||t.configData.enabledFeatures.includes(r.vs))&&this.executeSettingsChange(h._9.quickLinksDisplaySetting,h.VE[e]),this.shouldPromoteTopsitesTop&&t.selectedQuickLinksDisplaySetting===h.Z3.top&&e===h.Z3.onerow&&this.updateUIForSettingsChange(h._9.quickLinksDisplaySetting,h.VE[e])}updateHideDefaultLinksOption(e){this.executeSettingsChange(h._9.hideDefaultTopSites,e)}updateBackgroundImageType(e){this.executeSettingsChange(h._9.currentBackgroundImageType,e),this.executeSettingsChange(h._9.imageOfTheDay,e!==h.HX.off)}updateTopSitesQuickLinkEndMarginUsedPadding(e){s.V.updateTopSitesQuickLinkEndMarginUsedPadding.getActionSender(this).send(e)}updateGreeting(e){this.executeSettingsChange(h._9.greeting,e)}updateFeeds(e){this.executeSettingsChange(h._9.feeds,e)}updateOfficeLeftRail(e){(0,u.$o)().setItem(I.JJ,e.toString())}officeLeftRailEnabled(){return(0,u.$o)().getObject(I.JJ,!1)}isContentFeedManagedByAdminPortal(){return(0,u.$o)().getObject("isContentFeedManagedByAdminPortal",!1)}updateDailyDiscovery(e){(0,u.$o)().setItem(I.mG,e.toString())}updateContentFeedAdminPortalSetting(e){(0,u.$o)().setItem("isContentFeedManagedByAdminPortal",e.toString())}dailyDiscoveryEnabled(e=!1){return(0,a.mG)(this,void 0,void 0,(function*(){return yield(0,o.WH)(I.mG,E.nc.daily_discovery,e)}))}updatePageSetting(e,t){(0,u.$o)().setItem(e,t.toString())}isPageSettingEnabled(e,t){return(0,u.$o)().getObject(e,t)}executeSettingsChange(e,t){this.settingsAPI&&this.settingsAPI.setPref&&this.settingsAPI.setPref(e,t,Y)}getInitialState(){return(0,a.mG)(this,void 0,void 0,(function*(){this.edgeChromiumStorageProvider.loadSynchronizedSettingsFromStorage();const e=this.edgeChromiumStorageProvider.fetchProperty(d.StructuredDataCardsUserPreference)||{};if(e){return{weatherVisible:!e.wsk||!!e.wsk.v,sportsVisible:!e.ssk||!!e.ssk.v,moneyVisible:!e.msk||!!e.msk.v,bingShoppingVisible:!e.bsk||!!e.bsk.v,horoscopeVisible:!e.hsk||!!e.hsk.v,onThisDayVisible:!e.osk||!!e.osk.v,electionsVisible:!e.esk||!!e.esk.v,esportsVisible:!e.essk||!!e.essk.v,lotteryVisible:!e.lsk||!!e.lsk.v,qnaVisible:!e.qsk||!!e.qsk.v,recipesVisible:!e.rsk||!!e.rsk.v,autosMarketplaceVisible:!e.amsk||!!e.amsk.v,healthCardVisible:!e.bhsk||!!e.bhsk.v}}return null}))}getPageLayoutStateAsync(){const e=this.getCurrentState();return new Promise((t=>{this.ntpApiHandle&&(e.ntpTheme=this.ntpApiHandle.ntpTheme);const i=e;if(this.settingsAPI){let n,s=!1;window.chrome.ntpSettingsPrivate.getAllPrefs((c=>(0,a.mG)(this,void 0,void 0,(function*(){var a,d,l;if(void 0!==c){n=this.defineChromiumKeys(c),(0,q.A)(n),i.currentLayout=this.QSPLayoutOverride?this.QSPLayoutOverride:h.F5[n[h._9.layout]],k.Al.SelectedFeedPivot=n[h._9.selectedFeedPivot],i.prefDerivedBrowserFeatures={isCustomBackgroundImageFeatureFlightOn:h._9.customBackgroundImageInfo in n};const u=h._9.currentBackgroundImageType in n,p=h._9.imageOfTheDay in n;let g;if(u&&!this.config.disableBackgroundGallery&&!A.jG.IsFrePage){const e=n[h._9.userNurturingUpdated];g=(0,o.F0)(e)}if(u&&p){this.chromiumBackgroundPrefType=r.h0.BOOLEAN_AND_STRING_ENUM;const t=n[h._9.imageOfTheDay],o=n[h._9.currentBackgroundImageType];t||o===h.HX.off||o===h.HX.theme?t&&o===h.HX.off?(i.currentBackgroundImageType=h.HX.imageAndVideo,s=!0):n[h._9.currentBackgroundImageType]===h.HX.custom&&n[h._9.customBackgroundImageInfo]&&!n[h._9.customBackgroundImageInfo].has_image||n[h._9.currentBackgroundImageType]===h.HX.theme&&e.ntpTheme&&e.ntpTheme.usingDefaultTheme?i.currentBackgroundImageType=h.HX.imageAndVideo:i.currentBackgroundImageType=n[h._9.currentBackgroundImageType]:(i.currentBackgroundImageType=h.HX.off,s=!0)}else if(p){this.chromiumBackgroundPrefType=r.h0.BOOLEAN;const e=n[h._9.imageOfTheDay];i.currentBackgroundImageType=e?h.HX.imageAndVideo:h.HX.off}else u&&(this.chromiumBackgroundPrefType=r.h0.STRING_ENUM,i.currentBackgroundImageType=n[h._9.currentBackgroundImageType]);if(u&&h._9.customBackgroundImageInfo in n){const e=n[h._9.customBackgroundImageInfo],t={hasImage:e[r.AL.hasImage],resourceUrl:e[r.AL.resourceUrl],timestamp:e[r.AL.timestamp]};i.customBackgroundImageInfo=t}let m;const f=n[h._9.currentBackgroundImageType];f!==h.HX.off&&g&&g.backgroundSelectionMetadata&&(m=(0,o.VT)(g.backgroundSelectionMetadata)),!g||g.backgroundSelectionMetadata||g.changeBackgroundDaily||(0,o.$W)(y.LxB,"Rotate Image daily is off with no selection in the gallery cache",`Current background image type (pref): ${n[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}, current layout: ${h.F5[n[h._9.layout]]}`);const v=n[h._9.customBackgroundImageInfo];if((0,o.HG)(f,null==g?void 0:g.backgroundSelectionMetadata)&&(0,o.zJ)(y.DnN,"Preference for current background image type and gallery selection do not match.",`Current background image type (pref): ${n[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,v,e.ntpTheme,h.F5[n[h._9.layout]]),g&&f===h.HX.custom&&!v)(0,o.zJ)(y.qP4,"Current BackgroundImageType is custom and custom background information is missing.",`Current background image type (pref): ${n[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,v,e.ntpTheme,h.F5[n[h._9.layout]]);else if(g&&f===h.HX.custom&&v&&!v.has_image){(0,o.zJ)(y.qP4,"Current BackgroundImageType is custom and has image flag is false.",`Current background image type (pref): ${n[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,v,e.ntpTheme,h.F5[n[h._9.layout]]);const t=(0,o.tv)(g),r=t>=0?h.HX.imageAndVideo:h.HX.bing;i.currentBackgroundImageType=r,g.changeBackgroundDaily||"BrowserLocal"!==(null===(a=null==g?void 0:g.backgroundSelectionMetadata)||void 0===a?void 0:a.provider)||(0,o.zb)(g,t)}if(g&&f===h.HX.theme&&!e.ntpTheme)(0,o.zJ)(y.BFw,"Current Background Image type is theme and theme information is missing",`Current background image type (pref): ${n[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,v,e.ntpTheme,h.F5[n[h._9.layout]]);else if(g&&f===h.HX.theme&&e.ntpTheme&&e.ntpTheme.usingDefaultTheme){(0,o.zJ)(y.Ibk,"Current Background Image type is theme and theme is default. Switching to background in rotation in cache.",`Current background image type (pref): ${n[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,v,e.ntpTheme,h.F5[n[h._9.layout]]);const t=(0,o.tv)(g),r=t>=0?h.HX.imageAndVideo:h.HX.bing;i.currentBackgroundImageType=r,"Theme"===(null===(d=null==g?void 0:g.backgroundSelectionMetadata)||void 0===d?void 0:d.provider)&&(0,o.zb)(g,t)}i.currentBackgroundImageType===h.HX.theme&&(0,o.oB)(i)?(0,o.$W)(y.KY$,"RGB Theme background detected",`Current theme info: ${JSON.stringify(e.ntpTheme)}`):i.currentBackgroundImageType===h.HX.theme&&(0,o.BA)(i)&&(0,o.$W)(y.qkz,"Bundled Theme background detected",`Current theme info: ${JSON.stringify(e.ntpTheme)}`);const b=h._U[n[h._9.quickLinksDisplaySetting]];i.ntpPrefOptionApiAvailability=!!b;const S=this.config&&this.config.isOnDefaultFeedFlight,C=this.config&&this.config.isOnDefaultFeedControlFlight,I=k.Al.CurrentFlightSet.has("prg-ssrntpall");if(i.currentLayout!==h.nP.custom)i.quickLinksEnabled=b?b!==h.Z3.off:h.Wi[i.currentLayout].quick_links,i.selectedQuickLinksDisplaySetting=b,i.currentBackgroundImageType=h.Wi[i.currentLayout].current_background_image_type,i.selectedFeedDisplaySetting=h.Wi[i.currentLayout].feeds_position,i.hideDefaultTopSites=h.Wi[i.currentLayout].hide_promoted_links,S&&!I&&(yield N.L.getPreferenceSetting(E.nc.enable_new_user_default_settings).then((e=>{null!==e&&!0===e.value&&(i.greetingEnabled=n[h._9.greeting],i.enableNewUserDefaultSettings=!0)})));else{i.quickLinksEnabled=b?b!==h.Z3.off:n[h._9.quickLinks],i.selectedQuickLinksDisplaySetting=b,i.greetingEnabled=n[h._9.greeting];const e=n[h._9.feeds];i.selectedFeedDisplaySetting=e,i.hideDefaultTopSites=n[h._9.hideDefaultTopSites]}let P=!1;const O=this.getGroupPolicy(c,h._9.feeds);if((O.isEnabled&&"ENFORCED"===O.enforcement||this.isContentFeedManagedByAdminPortal())&&(i.isContentFeedManagedByPolicy=!0,P=!0,i.currentLayout!==h.nP.custom&&(i.selectedFeedDisplaySetting=n[h._9.feeds])),h._9.quickLinksDisplaySetting in n){const e=this.getGroupPolicy(c,h._9.quickLinksDisplaySetting);e.isEnabled&&"ENFORCED"===e.enforcement&&(i.isQuickLinksManagedByPolicy=!0,P=!0,i.currentLayout!==h.nP.custom&&(i.selectedQuickLinksDisplaySetting=b,i.quickLinksEnabled=b!==h.Z3.off))}if(h._9.defaultBrowserSettingEnabled in n){const e=this.getGroupPolicy(c,h._9.defaultBrowserSettingEnabled);i.defaultBrowserSettingPolicyEnforced="ENFORCED"===e.enforcement}if(h._9.backgroundImageTypePolicy in n){const e=this.getGroupPolicy(c,h._9.backgroundImageTypePolicy);i.backgroundImageTypePolicy=n[h._9.backgroundImageTypePolicy],"ENFORCED"!=e.enforcement&&(i.backgroundImageTypePolicy=h.gZ.allowAll),i.backgroundImageTypePolicy===h.gZ.disableAll&&i.currentBackgroundImageType!==h.HX.off?(i.currentBackgroundImageType=h.HX.off,s=!0):i.backgroundImageTypePolicy!==h.gZ.disableImageOfTheDay||i.currentBackgroundImageType!==h.HX.imageAndVideo&&i.currentBackgroundImageType!==h.HX.bing?i.backgroundImageTypePolicy===h.gZ.disableCustomImage&&i.currentBackgroundImageType===h.HX.custom&&(i.currentBackgroundImageType=h.HX.imageAndVideo,s=!0):(i.currentBackgroundImageType=h.HX.off,s=!0),P=P||i.backgroundImageTypePolicy!==h.gZ.allowAll}if(P&&i.currentLayout!==h.nP.custom&&(i.currentLayout=h.nP.custom,this.overrideLayoutPreferenceForPolicy()),i.imageOfTheDayEnabled=i.currentBackgroundImageType!==h.HX.off,i.currentBackgroundImageType===h.HX.theme&&e.ntpTheme){const t=e.ntpTheme;t.imageUrl||t.backgroundColorRgba||(i.imageOfTheDayEnabled=!1),!t.usingDefaultTheme&&t.isNtpBackgroundDark?i.isNtpThemeBackgroundDark=!0:i.isNtpThemeBackgroundDark=!1}if(s&&this.migrateBackgroundPreference(i.currentBackgroundImageType),i.contentGroupPolicySettings=this.getGroupPolicy(c,h._9.feedType),i.contentSource=n[h._9.feedType],this.storeFeedPolicy(i.contentSource,i.contentGroupPolicySettings),i.openSettingsDialogFlyout=n[h._9.showSettings],i.market=k.Al.Locale,i.isAppLauncherEnabledByPolicy=!(0,G.N)()||n[h._9.showAppLauncher],h._9.verticalTabsCollapsed in n&&(i.verticalTabsCollapsed=n[h._9.verticalTabsCollapsed]),h._9.verticalTabsOpened in n&&(i.verticalTabsOpened=n[h._9.verticalTabsOpened]),h._9.hideDefaultTopSites in n){i.hideDefaultTopSites=n[h._9.hideDefaultTopSites];const e=this.getGroupPolicy(c,h._9.hideDefaultTopSites);e.isEnabled&&"ENFORCED"===e.enforcement&&(i.hideDefaultTopSitesManagedByPolicy=!0)}let x;if("onscroll"===i.selectedFeedDisplaySetting&&(i.selectedFeedDisplaySetting="headingsonly",setTimeout((()=>{const e=window.chrome&&window.chrome.ntpSettingsPrivate;e&&e.setPref(h._9.feeds,i.selectedFeedDisplaySetting,(()=>{}))}))),h._9.userChoices in n){const e=n[h._9.userChoices];if(e&&e.length){const t=e.find((e=>"daily_discovery"===e.setting));t&&(x=t.value)}}i.dailyDiscoveryEnabled=null==x?yield this.dailyDiscoveryEnabled(i.currentLayout===h.nP.focused||i.currentLayout===h.nP.inspirational):x;const D=T.c.getQueryParameterByName("isFREModalBackground",(0,z.zp)());if((S||C)&&!I){const e=V.SB.checkMuidValidDateField((0,w.jG)()),t=!!(yield null===A.jG||void 0===A.jG?void 0:A.jG.AccountInfoPromise).account_id;this.meetDefaultFeedFlightCondition=e&&null!==D&&!t}if(D&&(!S||S&&!this.meetDefaultFeedFlightCondition)&&(i.selectedFeedDisplaySetting="headingsonly",M.M0.addOrUpdateTmplString("FREModalBackgroundLoaded:1")),this.config&&this.config.enableBespokeAds){const e=n[h._9.userChoices];if(e&&e.length){const t=e.find((e=>"enable_sponsored_content"===e.setting));i.sponsoredContentEnabled=!t||!!t.value}}if((0,G.N)()&&!window.isSSREnabled&&this.config&&this.config.promotedHidableSearchBox){const e=n[h._9.userChoices];if("always"===i.selectedFeedDisplaySetting&&"off"!==i.selectedQuickLinksDisplaySetting&&"top"!==i.selectedQuickLinksDisplaySetting&&!(0,Q.r4)(e,this.config.enableTopsitesTopWithWPO)){const t=X(e);this.config&&this.config.hidableSearchBox&&(i.hideSearchBox=t)}}if(this.config&&this.meetDefaultFeedFlightCondition&&!I){const e=this.config.layoutPromotion;e&&e.enableNewFreCheck&&(M.M0.addOrUpdateTmplProperty("kHasUserSeenNewFre","1"),M.M0.sendClientLogEvent({message:"User has seen new fre",type:"information"}),e.freRecommendedLayoutOverride&&(yield N.L.getPreferenceSetting(E.nc.layout_mode).then((t=>{null===t&&(i.currentLayout=e.freRecommendedLayoutOverride.currentLayout,i.selectedFeedDisplaySetting=e.freRecommendedLayoutOverride.selectedFeedDisplaySetting,i.greetingEnabled=!1,i.enableNewUserDefaultSettings=!0)}))))}const R=window.location&&(null===(l=window.location.search)||void 0===l?void 0:l.includes("mock-ntp-header=1"));(0,G.N)()||R||(e=>{const t=k.Al.EdgeNTPHeader;t?(K(h._9.selectedFeedPivot,t.selectedFeedPivot,e.selectedFeedPivot||Z),K(h._9.quickLinksDisplaySetting,h._U[t.quickLinkOption],e.selectedQuickLinksDisplaySetting),K(h._9.backgroundImageTypePolicy,h.MT[t.backgroundImageTypePolicy],h.MT[e.backgroundImageTypePolicy]),K(h._9.layout,h.F5[t.layoutMode],e.currentLayout),K(h._9.feedType,h.YT[t.feedType],h.YT[e.contentSource]),K(h._9.feeds,t.newsFeedDisplay,e.selectedFeedDisplaySetting)):M.M0.sendAppErrorEvent(Object.assign(Object.assign({},y.txQ.SsrEdgeHeaderEmpty),{message:"SSR - empty edge header.",pb:Object.assign({},y.txQ.SsrEdgeHeaderEmpty.pb)}))})(i),t(i)}else b.k.logError("Failed to get saved layout preferences."),t(e)}))))}else t(e)}))}registerOnConfigDataChangedCallback(){this.settingsAPI&&this.settingsAPI.onConfigDataChanged&&this.settingsAPI.onConfigDataChanged.addListener((e=>{if(e){const t=e[r.lA.inPageSearchBoxType];t!==r.HT.redirect&&t!==r.HT.bing||s.V.updateConfigDataChanged.getActionSender(this).send(t)}}))}registerOnPrefsChangeCallback(){this.settingsAPI&&this.settingsAPI.onPrefsChanged&&this.settingsAPI.onPrefsChanged.addListener((e=>{if(!this.didLayoutModeChangeInCurrentTab){const e=(0,u.$o)().getObject(this.layoutChangeInitiatorKey);if(e===r.WT.wpoPrerenderTab||e===r.WT.ntpVisibleTab)return}const t=e[0];this.updateUIForSettingsChange(t.key,t.value,e)}))}updateUIForSettingsChange(e,t,i){return(0,a.mG)(this,void 0,void 0,(function*(){const n=yield this.getPageSettingsStateAsync(),o=Object.assign({},n);if(e===h._9.backgroundImageTypePolicy&&(0,S.Z)(),e===h._9.feeds){const t=this.getGroupPolicy(i,e);t.isEnabled&&"ENFORCED"===t.enforcement||this.isContentFeedManagedByAdminPortal()?o.isContentFeedManagedByPolicy=!0:o.isContentFeedManagedByPolicy=!1}if(e===h._9.layout){const e=h.F5[t];if(o.currentLayout=e,t!==h.Uq.custom&&(o.quickLinksEnabled=h.Wi[e].quick_links,o.hideDefaultTopSites=!!o.hideDefaultTopSitesManagedByPolicy||h.Wi[e].hide_promoted_links,o.currentBackgroundImageType=h.Wi[e].current_background_image_type,o.dailyDiscoveryEnabled=h.Wi[e].daily_discovery,o.selectedFeedDisplaySetting=h.Wi[e].feeds_position,o.selectedQuickLinksDisplaySetting=n.selectedQuickLinksDisplaySetting,(yield this.checkPromoteTopsitesTop(o))&&(o.selectedQuickLinksDisplaySetting=h.Z3.top,U.W.getInstance().registerItemTriggerMessage(this.config.enableTargetDismissCM?H.gz.TopSitesPromotionV2:H.gz.TopSitesPromotion,!0)),o.imageOfTheDayEnabled=o.currentBackgroundImageType!==h.HX.off),"visible"===document.visibilityState&&i)for(const e of this.preferenceChangeCallbacks)e(i,o)}else{switch(e){case h._9.quickLinks:o.quickLinksEnabled=t;break;case h._9.userChoices:{const e=t.find((e=>e.setting===E.nc.daily_discovery));o.dailyDiscoveryEnabled=e&&e.value;break}case h._9.hideDefaultTopSites:{const e=this.getGroupPolicy(i,h._9.hideDefaultTopSites),n=e.isEnabled&&"ENFORCED"===e.enforcement;o.hideDefaultTopSites=t,o.hideDefaultTopSitesManagedByPolicy=n;break}case h._9.quickLinksDisplaySetting:o.selectedQuickLinksDisplaySetting=h._U[t],o.quickLinksEnabled=h._U[t]!==h.Z3.off;break;case h._9.imageOfTheDay:this.chromiumBackgroundPrefType===r.h0.BOOLEAN&&(o.currentBackgroundImageType=t?h.HX.imageAndVideo:h.HX.off,o.imageOfTheDayEnabled=o.currentBackgroundImageType!==h.HX.off);break;case h._9.currentBackgroundImageType:if(o.currentBackgroundImageType=t,o.imageOfTheDayEnabled=o.currentBackgroundImageType!==h.HX.off,o.isNtpThemeBackgroundDark=void 0,o.currentBackgroundImageType===h.HX.theme&&n.ntpTheme){const e=n.ntpTheme;e.imageUrl||e.backgroundColorRgba||(o.imageOfTheDayEnabled=!1),!e.usingDefaultTheme&&e.isNtpBackgroundDark?o.isNtpThemeBackgroundDark=!0:o.isNtpThemeBackgroundDark=!1}break;case h._9.customBackgroundImageInfo:{const e=t,i={hasImage:e[r.AL.hasImage],resourceUrl:e[r.AL.resourceUrl],timestamp:e[r.AL.timestamp]};o.customBackgroundImageInfo=i;break}case h._9.feeds:o.selectedFeedDisplaySetting=t;break;case h._9.greeting:o.greetingEnabled=t;break;case h._9.feedType:o.contentSource=t;break;case h._9.showSettings:o.openSettingsDialogFlyout=t;break;case h._9.showAppLauncher:o.isAppLauncherEnabledByPolicy=t}if("visible"===document.visibilityState&&i)for(const e of this.preferenceChangeCallbacks)e(i,o)}if(e===h._9.verticalTabsCollapsed&&(o.verticalTabsCollapsed=t),e===h._9.verticalTabsOpened&&(o.verticalTabsOpened=t),e===h._9.userChoices&&this.config.enableBespokeAds){const e=t.find((e=>"enable_sponsored_content"===e.setting));e&&(o.sponsoredContentEnabled=!!e.value)}if(e===h._9.userChoices&&this.config.hidableSearchBox){const e=t.find((e=>"hide_search_box"===e.setting));e&&(o.hideSearchBox=!!e.value)}e===h._9.quickLinksDisplaySetting&&(o.selectedQuickLinksDisplaySetting=h._U[t],o.quickLinksEnabled=h._U[t]!==h.Z3.off),(0,f.Z)(o,n)||m.J.updateLayout.getActionSender(this).send(o)}))}defineChromiumKeys(e){const t={};let i;for(i of e)t[i.key]=i.value;return t}getGroupPolicy(e,t){const i=e.find((e=>e.key===t)),n={key:i.key,value:i.value,type:i.type};return i&&i.controlledBy&&i.enforcement?(n.isEnabled=!0,n.enforcement=i.enforcement,n.controlledBy=i.controlledBy):n.isEnabled=!1,n}storeFeedPolicy(e,t){const i={contentSource:e,isEnforced:t.isEnabled&&t.enforcement==h.Py.Enforced};(0,u.$o)().supported?(0,u.$o)().setObject(h.RZ,i):i.isEnforced&&b.k.logError("Failed to save enforced admin policy for default feed.")}getPromoFormParamList(){return this.config&&this.config.promoFormParamList?this.config.promoFormParamList:null}setContentDisabled(e){e.greetingEnabled=!1,e.selectedFeedDisplaySetting="off",e.currentLayout=h.nP.custom,e.imageOfTheDayEnabled=!1,e.currentBackgroundImageType=h.HX.off}checkPromoteTopsitesTop(e){return(0,a.mG)(this,void 0,void 0,(function*(){if(!this.config.enableTopsitesTopOnlyInformational&&!this.config.enableTopsitesTopAsDefault&&!this.config.enableTopsitesTopWithWPO)return!1;const t=e||this.getCurrentState();if(this.config.enableTopsitesTopWithWPO)return(0,Q.VL)(t);if(t.selectedQuickLinksDisplaySetting===h.Z3.top||t.currentLayout===h.nP.custom)return!1;if(this.config.enableTopsitesTopOnlyInformational&&t.currentLayout!==h.nP.informational)return!1;return!!!(yield N.L.getPreferenceSetting(r.pY))}))}saveTopSitesPromotionNurturing(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){const i=yield P.U.isApiAvailableToUse();if(!this.shouldPromoteTopsitesTop||!i)return;const n={promotedTime:(new Date).getTime(),promotedFrom:e,promotedTo:t};P.U.savePreferenceSetting(E.Xm.topSites,n)}))}migrateBackgroundPreference(e){this.settingsAPI.setPref(h._9.imageOfTheDay,e!==h.HX.off,Y),this.settingsAPI.setPref(h._9.currentBackgroundImageType,e,Y)}overrideLayoutPreferenceForPolicy(){this.settingsAPI.setPref(h._9.layout,h.Uq.custom,Y)}wpoPromoteNewLayout(e,t){this.updateLayout(e,t)}wpoPromoteNewFeedDisplaySetting(e){this.updateFeeds(e)}}var te=i(30856);class ie{reduce(e,t){if(!e)return Object.assign(Object.assign({},h.L_),{contentSource:h.iz.MicrosoftNews,isLoadCompleted:!1,greetingEnabled:!0,openSettingsDialogFlyout:!1,inPageSearchBoxType:null,market:k.Al.Locale});if(!t)return e;let i;return te.G.handleAction(t,s.V.pageLayoutStateLoaded,(t=>{i=Object.assign(Object.assign(Object.assign({},e),t),{isLoadCompleted:!0})})),te.G.handleAction(t,m.J.updateLayout,(t=>{i=Object.assign(Object.assign({},e),t)})),te.G.handleAction(t,s.V.updateLocalStorage,(t=>{i=Object.assign(Object.assign({},e),{sdCardSettings:t})})),te.G.handleAction(t,s.V.loadLocalStorage,(t=>{i=Object.assign(Object.assign({},e),{sdCardSettings:t})})),te.G.handleAction(t,s.V.updatePrimaryAccountInfo,(t=>{i=Object.assign(Object.assign({},e),{primaryAccountInfo:t})})),te.G.handleAction(t,s.V.updateConfigData,(t=>{i=Object.assign(Object.assign({},e),{configData:t})})),te.G.handleAction(t,s.V.updateConfigDataChanged,(t=>{i=Object.assign(Object.assign({},e),{inPageSearchBoxType:t})})),te.G.handleAction(t,s.V.updateTopSitesQuickLinkEndMarginUsedPadding,(t=>{i=Object.assign(Object.assign({},e),{topSitesQuickLinkEndMarginUsedPadding:t})})),te.G.handleAction(t,s.V.marketUpdated,(t=>{i=Object.assign(Object.assign({},e),{market:t})})),te.G.handleAction(t,s.V.updateNtpTheme,(t=>{i=Object.assign(Object.assign({},e),{ntpTheme:t})})),i||e}}const ne={experienceConfigSchema:{}}},503:function(e,t,i){"use strict";i.d(t,{CR:function(){return n},Mx:function(){return r},_Y:function(){return o}});const n=8,r=2*n,o="coachmarks"},86331:function(e,t,i){"use strict";i.d(t,{Er:function(){return p},Jt:function(){return l},OD:function(){return u},RC:function(){return n},dm:function(){return o},gz:function(){return s},ln:function(){return c},no:function(){return d},p4:function(){return g},pY:function(){return r}});var n,r,o,s,a=i(503);!function(e){e.Above="Above",e.Below="Below",e.Left="Left",e.Right="Right"}(n||(n={})),function(e){e.TopStart="TopStart",e.TopEnd="TopEnd",e.BottomStart="BottomStart",e.BottomEnd="BottomEnd"}(r||(r={})),function(e){e.Mini="Mini",e.Small="Small",e.Medium="Medium",e.Large="Large"}(o||(o={})),function(e){e.BinaryReactionPromotion="binaryReactionPromotion",e.BinaryReactionControl="binaryReactionControl",e.ChinaLanguageMismatch="chinaLanguageMismatch",e.FollowingFeedPromotion="followingFeedPromotion",e.GamingFeedPromotion="gamingFeedPromotion",e.LayoutPromotion="layoutPromotion",e.LocationAccuracyRevIP="locationAccuracyRevIP",e.MarketLanguage="marketLanguage",e.multiLocationsCarousel="multiLocationsCarousel",e.multiLocationsCarouselV2="multiLocationsCarouselV2",e.NotificationBellPromotion="notificationBellPromotion",e.NotificationBellPromotionWinHP="notificationBellPromotionWinHP",e.OfficeApp="officeApp",e.PersonalizeFeedControl="personalizeFeedControl",e.PersonalizeFeedPromotion="personalizeFeedPromotion",e.recommendedSitesPromotionNewLine="recommendedSitesPromotionNewLine",e.recommendedSitesPromotionOff="recommendedSitesPromotionOff",e.RecommendedSitesSelection="recommendedSitesSelection",e.TopSitesPromotion="topSitesPromotion",e.informationalSwitchOffer="informationalSwitchOffer",e.informationalSwitchCompletion="informationalSwitchCompletion",e.informationalKeepCompletion="informationalKeepCompletion",e.OfficeCoachmarkO365Tab="OfficeCoachmarkO365Tab",e.OfficeCoachmarkO365Layout="OfficeCoachmarkO365Layout",e.WeatherPromotion="weatherPromotion",e.TopSitesPromotionV2="topSitesPromotionV2",e.prong1RotationSettingsButton="prong1RotationSettingsButton",e.Prong1SettingsButtonDialog="prong1SettingsButtonDialog",e.prong1ShuffleButton="prong1ShuffleButton",e.RefreshAnimationCoarchmarkKey="prong1RefreshButton",e.prong2RefreshButton="prong2RefreshButton",e.prong2ProfileMigration="prong2ProfileMigration",e.NurturingPlacementManagerTestKey="nurturingPlacementManagerTestKey",e.actionTrayComment="actionTrayComment",e.actionTrayCommentControl="actionTrayCommentControl"}(s||(s={}));const c={[s.FollowingFeedPromotion]:0,[s.GamingFeedPromotion]:1,[s.LayoutPromotion]:2,[s.LocationAccuracyRevIP]:6,[s.MarketLanguage]:7,[s.multiLocationsCarousel]:8,[s.multiLocationsCarouselV2]:9,[s.NotificationBellPromotion]:10,[s.NotificationBellPromotionWinHP]:11,[s.OfficeApp]:12,[s.recommendedSitesPromotionNewLine]:13,[s.recommendedSitesPromotionOff]:14,[s.RecommendedSitesSelection]:15,[s.TopSitesPromotion]:16,[s.informationalSwitchOffer]:17,[s.informationalSwitchCompletion]:18,[s.informationalKeepCompletion]:19,[s.prong1RotationSettingsButton]:20,[s.Prong1SettingsButtonDialog]:21,[s.prong1ShuffleButton]:22,[s.RefreshAnimationCoarchmarkKey]:23,[s.prong2RefreshButton]:24,[s.prong2ProfileMigration]:25,[s.NurturingPlacementManagerTestKey]:26,[s.WeatherPromotion]:27,[s.OfficeCoachmarkO365Tab]:28,[s.OfficeCoachmarkO365Layout]:29,[s.TopSitesPromotionV2]:30,[s.PersonalizeFeedPromotion]:31,[s.PersonalizeFeedControl]:32,[s.BinaryReactionPromotion]:33,[s.BinaryReactionControl]:34,[s.actionTrayComment]:35,[s.actionTrayCommentControl]:36,[s.ChinaLanguageMismatch]:37};function d(e){switch(e){case o.Mini:return 228;case o.Small:return 256;case o.Medium:return 288;case o.Large:return 312;default:return 288}}var l,u;function p(e,t=!0){const i=`0,0 ${a.CR},${a.CR} ${a.Mx},0`,r=`0,${a.CR} ${a.CR},0 ${a.Mx},${a.CR}`,o=`0,0 ${a.CR},${a.CR} 0,${a.Mx}`,s=`${a.CR},0 0,${a.CR} ${a.CR},${a.Mx}`;switch(e){case n.Above:return i;case n.Below:return r;case n.Left:return t?s:o;case n.Right:return t?o:s;default:return""}}function g(e,t=!0){const i="drop-shadow(2.2px 1px 1px rgba(0, 0, 0, 15%))",r="drop-shadow(-1.5px 2px 1px rgba(0, 0, 0, 15%))";switch(e){case n.Above:return"drop-shadow(-1px 4px 1px rgba(0, 0, 0, 15%))";case n.Below:return"drop-shadow(0px -1px 1px rgba(0, 0, 0, 15%))";case n.Left:return t?r:i;case n.Right:return t?i:r;default:return""}}!function(e){e.Adjacent="Adjacent",e.Center="Center",e.Opposite="Opposite"}(l||(l={})),function(e){e.Outside="Outside",e.Target="Target",e.OutsideAndTarget="OutsideAndTarget"}(u||(u={}))},87230:function(e,t,i){"use strict";i.d(t,{W:function(){return S}});var n=i(33940),r=i(86331),o=i(65135);function s(e){return window&&window.chrome&&window.chrome.ntpSettingsPrivate&&"function"==typeof window.chrome.ntpSettingsPrivate[e]}function a(e,t){const i=t.map((e=>e in r.ln?String(r.ln[e]):e));o.M0.addOrUpdateTmplProperty(e,i.join(","))}function c(e){const t=["coachMarkKey","latestShownTimestamp","showTimes","maxShowTimes","repeatHours"],i=Object.assign({},e);for(const e in i)t.includes(e)||delete i[e];return i}var d=i(65337),l=i(503),u=i(11765);class p{constructor(){this.coachmarksKey="coachmarks",this.webStorage=(0,d.$o)(),this.LSNAME=`${l._Y}`}fetchDataFromIris(){return[]}fetchDataFromWPO(){return[]}readLocalStorage(){return this.webStorage.getObject(this.LSNAME,[])}saveLocalStorage(e){this.webStorage.setObject(this.LSNAME,e)}savePSL(e){return(0,n.mG)(this,void 0,void 0,(function*(){return yield u.L.savePreferenceSetting(this.coachmarksKey,{setting:this.coachmarksKey,source:"ntp",timestamp:(new Date).getTime(),value:e})}))}fetchData(e=[],t=[],i=[]){let n;n=t&&t.length?t:i&&i.length?i:e,n=new Map(n.map((e=>[e.coachMarkKey,e])));const r=new Map(this.readLocalStorage().filter((e=>!!e)).map((e=>[e.coachMarkKey,e])));for(const[e,t]of n)r.has(e)&&r.get(e)&&Object.assign(t,r.get(e));return n}getMappedDataFromPSL(){return(0,n.mG)(this,void 0,void 0,(function*(){if(!s("getPref"))return null;const e=yield u.L.getPreferenceSetting(this.coachmarksKey,!1);if(e&&e.value){const t=e.value;return new Map(t.map((e=>[e.coachMarkKey,e])))}return null}))}localStorageValidation(e,t){const i=this.readLocalStorage(),n=i.find((t=>t.coachMarkKey==e)),r=t.find((t=>t.coachMarkKey==e));if(!n){if(!r)return[];i.push(r)}return i}pSLStorageValidation(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){let i=[];const n=yield u.L.getPreferenceSetting(this.coachmarksKey,!1);n&&n.value&&(i=n.value);const r=i.find((t=>t.coachMarkKey==e)),o=t.find((t=>t.coachMarkKey==e));if(!r){if(!o)return[];i.push(o)}return i}))}}class g{constructor(e,t){this._coachMarkKey=e,this._registrant=t||"targetElement"}get coachMarkKey(){return this._coachMarkKey}get item(){return this._item}get registrant(){return this._registrant}registerItemAnchorElement(e){return this._update({anchorElement:e})}registerItemTriggerMessage(e){return this._update({triggerMessageReceived:e})}registerDisplayCallback(e){return this._update({displayCallback:e})}registerHideCallback(e){return this._update({hideCallback:e})}registerConfirmCallback(e){return this._update({confirmCallback:e})}registerCancelCallback(e){return this._update({cancelCallback:e})}registerDismissCallback(e){return this._update({dismissCallback:e})}_update(e){if(e&&Object.keys(e).length)return this._item=Object.assign(Object.assign({},this._item||{}),e),this}}class h{constructor(){this._registeredCoachMarks=new Map}register(e,t){return this._registeredCoachMarks.has(e)||this._registeredCoachMarks.set(e,new g(e,t)),this._registeredCoachMarks.get(e)}getCoachMark(e){var t;return null===(t=this._interceptGettingCoachMark(e))||void 0===t?void 0:t.item}IsRegistered(e){return this._registeredCoachMarks.has(e)}IsTriggered(e){var t,i;return!!(null===(i=null===(t=this._interceptGettingCoachMark(e))||void 0===t?void 0:t.item)||void 0===i?void 0:i.triggerMessageReceived)}IsRegisteredByTargetElement(e){var t;return"targetElement"===(null===(t=this._interceptGettingCoachMark(e))||void 0===t?void 0:t.registrant)}IsRegisteredByNurturingFramework(e){var t;return"nurturingFrameWork"===(null===(t=this._interceptGettingCoachMark(e))||void 0===t?void 0:t.registrant)}_interceptGettingCoachMark(e){const t=this._registeredCoachMarks.get(e);if(t)return t.coachMarkKey===e?t:void 0}}var m=i(9500),f=i(58155),v=i(85663);class y{static IsConflictFree(e){const t={name:e};return!!m.i.getInstance().register(t)}static IsValidFormat(e){return"marketLanguage"==e.coachMarkKey?e.body&&e.head&&e.size&&e.coachMarkKey&&!(0,v.isNullOrUndefined)(e.repeatHours)&&(e.coachmarkFloatingPosition||e.coachmarkAnchoringPosition):e.body&&e.head&&e.size&&e.coachMarkKey&&e.maxShowTimes&&(!(0,v.isNullOrUndefined)(e.repeatHours)||1==e.maxShowTimes)&&(e.coachmarkFloatingPosition||e.coachmarkAnchoringPosition)}static IsCoolDownPeriodOver(e){const t=Date.now(),{startTimestamp:i,endTimestamp:n,latestShownTimestamp:r,repeatHours:o,showTimes:s,maxShowTimes:a}=e;return!(i&&t<i)&&(!(n&&t>n)&&(!(r&&o&&t-r<=3600*o*1e3)&&!(s&&a&&s>=a)))}static IsFilteredPlacement(e,t){const i=f.c.getQueryParameterByName("filterNurturingPlacements",window.location.search),n=i?i.split(",").map((e=>e.trim())):[];return!t&&!n.length||n.includes(e.coachMarkKey)}}var b=i(27003);class S{constructor(){this._initialized=!1,this.isInternal=!1,this._triggeredCoachMarkKeys=[],this.eligibleCoachMarks=[],this._winnerCoachMarkKeys=[],this.registerCallback=void 0,this._dataStorage=new p,this._registrations=new h}static getInstance(){return b.Gq.get("__Coachmark_SuperCoachMarkCollection__",(()=>new S))}get registrations(){return this._registrations}registerItemAnchorElement(e,t){var i;null===(i=this._registrations.register(e))||void 0===i||i.registerItemAnchorElement(t)}registerItemTriggerMessage(e,t,i){var n;if(null===(n=this._registrations.register(e))||void 0===n||n.registerItemTriggerMessage(t),t&&this.addTriggeredCoachMarks([{coachMarkKey:e}]),i){if(!this.IsWinnerCoachMark(e,i))return;this.registerCallback&&this.registerCallback(e,this._registrations.getCoachMark(e))}}registerConfirmCallback(e,t){var i;null===(i=this._registrations.register(e))||void 0===i||i.registerConfirmCallback(t)}registerCancelCallback(e,t){var i;null===(i=this._registrations.register(e))||void 0===i||i.registerCancelCallback(t)}registerDismissCallback(e,t){var i;null===(i=this._registrations.register(e))||void 0===i||i.registerDismissCallback(t)}triggerCoachMark(e,t){var i;if(null===(i=this._registrations.register(e))||void 0===i||i.registerItemTriggerMessage(!0),this.addTriggeredCoachMarks([{coachMarkKey:e}]),null==t?void 0:t.data){const e=t.data;this.IsEligibleCoachMark(e)&&this.addEligibleCoachMarks([e])}this.startShowProcess(e,null==t?void 0:t.parentCampaignId)}startShowProcess(e,t){if(!this._initialized)return;this.IsWinnerCoachMark(e,t)&&(this.setWinnerCoachMarkKeys([{coachMarkKey:e}]),this.registerCallback&&this.registerCallback(e,this._registrations.getCoachMark(e)))}addEligibleCoachMarks(e){e.forEach((e=>{const t=this.eligibleCoachMarks.findIndex((t=>t.coachMarkKey===e.coachMarkKey));t>=0&&this.eligibleCoachMarks.splice(t,1),this.eligibleCoachMarks.push(e)})),a("scm_eligible_candidates",this.eligibleCoachMarks.map((e=>e.coachMarkKey)))}addTriggeredCoachMarks(e){const t=[...this._triggeredCoachMarkKeys,...e.map((e=>e.coachMarkKey))];this._triggeredCoachMarkKeys=Array.from(new Set(t)),a("scm_triggered_candidates",this._triggeredCoachMarkKeys)}setWinnerCoachMarkKeys(e){this._winnerCoachMarkKeys=e.map((e=>e.coachMarkKey)),a("scm_non_conflict_candidates",this._winnerCoachMarkKeys)}getCollection(){return this._registrations}getTargetElementByKey(e){var t;return(null===(t=this._registrations.getCoachMark(e))||void 0===t?void 0:t.anchorElement)||null}getAvailableData(e=!1,t=[],i=[],n=[]){const r=this._dataStorage.fetchData(t,i,n);this.isInternal=e;const o=Array.from(r.values()),s=this.filterEligibleCoachMarks(o),a=this.filterConflictFreeCoachMarks(s);return this.addEligibleCoachMarks(s),this.setWinnerCoachMarkKeys(a),this._initialized=!0,a}getAvailableDataAsync(e=!1,t=[],i=[],r=[]){return(0,n.mG)(this,void 0,void 0,(function*(){const n=this._dataStorage.fetchData(t,i,r);this.isInternal=e;const o=yield this._dataStorage.getMappedDataFromPSL();if(o)for(const[e,t]of n)o.has(e)&&o.get(e)&&Object.assign(t,o.get(e));const s=Array.from(n.values()),a=this.filterEligibleCoachMarks(s),c=this.filterConflictFreeCoachMarks(a);return this.addEligibleCoachMarks(a),this.setWinnerCoachMarkKeys(c),this._initialized=!0,c}))}filterEligibleCoachMarks(e){return e&&e.length?e.filter((e=>this.IsEligibleCoachMark(e))):[]}filterConflictFreeCoachMarks(e){if(!e||!e.length)return[];for(let t=0;t<e.length;t++){const i=e[t];if(this.IsWinnerCoachMark(i.coachMarkKey,i.parentCampaignId))return i.parentCampaignId?e.filter((e=>e.parentCampaignId===i.parentCampaignId)):[i]}return[]}fetchCoachmarkFromEligibleCoachmarks(e){if(!e)return;const t=this.eligibleCoachMarks.find((t=>t.coachMarkKey===e));if(!t)return;return this.IsWinnerCoachMark(t.coachMarkKey,t.parentCampaignId)?t:void 0}setCoachMarkShown(e){if(this._registrations.IsRegisteredByNurturingFramework(e))return;const t=this._dataStorage.localStorageValidation(e,this.eligibleCoachMarks).map((t=>(t.coachMarkKey===e&&(t.latestShownTimestamp=Date.now(),t.showTimes=t.showTimes?t.showTimes+1:1),c(t))));this._dataStorage.saveLocalStorage(t)}setCoachMarkShownPreferenceSetting(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(this._registrations.IsRegisteredByNurturingFramework(e))return;if(!s("getPref")||!s("setPref"))return;const t=(yield this._dataStorage.pSLStorageValidation(e,this.eligibleCoachMarks)).map((t=>(t.coachMarkKey===e&&(t.latestShownTimestamp=Date.now(),t.showTimes=t.showTimes?t.showTimes+1:1),c(t))));return this._dataStorage.savePSL(t)}))}setCoachMarkClosed(e,t=!1){if(this._registrations.IsRegisteredByNurturingFramework(e))return;const i=this._dataStorage.localStorageValidation(e,this.eligibleCoachMarks).map((i=>(i.coachMarkKey===e&&(i.latestClosedTimestamp=Date.now(),t&&(i.showTimes=i.maxShowTimes)),c(i))));this._dataStorage.saveLocalStorage(i)}clearLocalStorage(e){const t=this._dataStorage.readLocalStorage();if(!t.length)return;const i=t.map((t=>(t.coachMarkKey===e&&(t.showTimes=0),t)));this._dataStorage.saveLocalStorage(i)}IsEligibleCoachMark(e){if(this._registrations.IsRegisteredByNurturingFramework(e.coachMarkKey))return!0;if(!y.IsValidFormat(e))return!1;if(this.isInternal)return e.autoDismiss&&(e.autoDismiss=0),!0;if(!y.IsCoolDownPeriodOver(e))return!1;const t="1"===f.c.getQueryParameterByName("vptest",window.location.search);return y.IsFilteredPlacement(e,t)}IsWinnerCoachMark(e,t){return!!this._registrations.IsRegistered(e)&&(!!this._registrations.IsTriggered(e)&&!!y.IsConflictFree(t||e))}}},29993:function(e,t,i){"use strict";i.d(t,{$:function(){return r}});var n=i(55067);class r{}r.addCoachmark=new n.C("AddCoachmark"),r.updateCoachmarkHeight=new n.C("UpdateCoachmarkHeight"),r.updateCoachmarkName=new n.C("UpdateCoachmarkName"),r.updateCoachmarkVisibleStatus=new n.C("UpdateCoachmarkVisibleStatus")},62257:function(e,t,i){"use strict";i.d(t,{y:function(){return H}});var n=i(33940),r=i(26415),o=i(73231),s=i(6660),a=i(81765),c=i(33954),d=i(68364),l=i(58155),u=i(84169),p=i(33799),g=i(18769),h=i(65135);function m(e){let t;try{t=JSON.parse(e)}catch(e){h.M0.sendAppErrorEvent((0,d.Tr)(r.Cy3,"Fail to parse beaconsJson in Coachmark AmplifyHandler"))}return!!(null==t?void 0:t.e)}function f(e){const t=new g.A;e.forEach((e=>{var i;(null===(i=null==e?void 0:e.beaconUrls)||void 0===i?void 0:i.length)&&e.beaconUrls.forEach((i=>{try{t.fireTrackingBeacon(i,e.beaconType,e.encoded)}catch(t){h.M0.sendAppErrorEvent((0,d.Tr)(r.Vpp,`Fail to send ${e.beaconType} beacon  in Coachmark AmplifyHandler`))}}))}))}var v=i(65337),y=i(17440);const b="amplify_campaigns",S="amplifyLocalStorage";class C{isStrategyAvailable(){return y.U.isApiAvailableToUse()}persistToCache(e){return y.U.savePreferenceSetting(b,e).catch((e=>(c.k.logError(`Exception ${e} occurred storing user nurturing campaigns in persistent storage layer`),!1)))}restoreFromCache(){return y.U.getPreferenceSetting(b).then((e=>{const t=e&&e.value;return t||c.k.logError("PSL: window.chrome.ntpSettingsPrivate.getPref does not have amplify_campaigns."),t})).catch((e=>{c.k.logError(`Exception ${e} occurred retrieving user nurturing campaigns from persistent storage layer`)}))}}class w{isStrategyAvailable(){return(0,n.mG)(this,void 0,void 0,(function*(){return(0,v.$o)().supported}))}persistToCache(e){return(0,n.mG)(this,void 0,void 0,(function*(){try{(0,v.$o)().setObject(S,e)}catch(e){return c.k.logError(`Exception ${e} occurred storing user nurturing campaigns in local storage`),!1}return!0}))}restoreFromCache(){return(0,n.mG)(this,void 0,void 0,(function*(){let e=null;try{e=(0,v.$o)().getObject(S)}catch(e){return void c.k.logError(`Exception ${e} occurred retrieving user nurturing campaigns from local storage`)}return e||c.k.logError("LocalStore: does not have amplifyLocalStorage."),e}))}}var T;!function(e){e[e.Viewed=0]="Viewed",e[e.Clicked=1]="Clicked",e[e.Dismissed=2]="Dismissed"}(T||(T={}));class k extends class{constructor(e,t,i=[]){this.data=e,this.serviceTimeStamp=t,this._interactionLog=i,this.isFresh=!1,t||(this.serviceTimeStamp=Date.now(),this.isFresh=!0)}get interactionLog(){return this._interactionLog}set interactionLog(e){e&&(this._interactionLog=e)}logInteraction(e){this._interactionLog.push({key:e,value:Date.now()})}}{get id(){var e,t,i;return(null===(t=null===(e=this.data)||void 0===e?void 0:e.items)||void 0===t?void 0:t.length)&&(null===(i=this.data)||void 0===i?void 0:i.items[0].createId)}isEligibleToShow(e,t){if(function(){const e=l.c.getQueryParameterByName("ignoreEligibilityRules",window.location.search);return!!e&&"true"===e.toLocaleLowerCase()}())return!0;const i=e=>Date.now()-e<this.serviceTimeStamp,n=()=>this.isFresh,r=(e,t)=>this.interactionLog.filter((t=>t.key===e)).length<t,o=(e,t)=>{const i=this.interactionLog.filter((t=>t.key===e)).sort((e=>e.value)).pop();return Date.now()-((null==i?void 0:i.value)||0)>t};return[()=>!t,()=>{return t=603e6,!!e&&Date.now()-e>t;var t},()=>i(36e5),()=>n(),()=>r(T.Viewed,2),()=>o(T.Viewed,12096e5),()=>r(T.Clicked,1)].every((e=>e()))}}var A=i(14547),I=i(73252);const P={w:320,h:166};class E{constructor(){this.samAdService=new A.B}getPlacementsFromService(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=this.createAdRequest(),t=yield this.samAdService.fetchSAMAds(e);if(!(null==t?void 0:t.placements))return[];return f(t.placements.map((e=>({beaconUrls:e.adServedUrls,beaconType:a.hE.BeaconTypeAdServed,encoded:m(e.beaconsJson)})))),t.placements}))}createAdRequest(){return{pageType:"edgechrntp",locale:I.Al.Locale,placements:[{region:"coachmark_amp",indices:[1],img:Object.assign({},P)}]}}}class O{constructor(){this.serviceClient=new E,this.schemaVersion=1,this.profileCreationTimeInMs=0,this.isAadAccount=!1}getPlacementItems(){return(0,n.mG)(this,void 0,void 0,(function*(){return this.itemsMap||(yield this.initStorage())?Object.values(this.itemsMap):[]}))}getPlacementItemByCreativeId(e){return(0,n.mG)(this,void 0,void 0,(function*(){return(yield this.getPlacementItems()).find((t=>{if(t.data.items.find((t=>t.createId===e)))return t}))}))}updateStorageItem(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(null==e?void 0:e.data)return this.itemsMap[e.id]=e,this.persistToCache()}))}initStorage(){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.cacheStrategy=[new C,new w].find((e=>e.isStrategyAvailable())),!this.cacheStrategy)return!1;if(this.profileCreationTimeInMs=yield function(){return new Promise((e=>(0,n.mG)(this,void 0,void 0,(function*(){var t,i;try{"function"==typeof(null===(i=null===(t=null===window||void 0===window?void 0:window.chrome)||void 0===t?void 0:t.ntpSettingsPrivate)||void 0===i?void 0:i.getConfigData)?window.chrome.ntpSettingsPrivate.getConfigData((t=>{e(t.profileCreationTime)})):e(0)}catch(t){c.k.logError(t),e(0)}}))))}(),this.isAadAccount=yield function(){return(0,n.mG)(this,void 0,void 0,(function*(){yield u.jG.AccountInfoPromise;const e=u.jG.ResolvedAccountInfo;return p.Qm.AAD===(e&&e.account_type)}))}(),(yield this.restoreFromCache())||(this.updateTime=-1,this.itemsMap={}),this.schemaVersion<1&&(this.updateTime=-1,this.itemsMap={}),!this.isStorageRequireUpdate())return!0;return(yield this.serviceClient.getPlacementsFromService()).map((e=>new k(e))).forEach((e=>{var t;e.interactionLog=null===(t=this.itemsMap[e.id])||void 0===t?void 0:t.interactionLog,this.itemsMap[e.id]=e})),this.updateTime=Date.now(),this.persistToCache(),!0}))}isStorageRequireUpdate(){return!!function(){const e=l.c.getQueryParameterByName("forceAmplifyStorageUpdate",window.location.search);return!!e&&"true"===e.toLocaleLowerCase()}()||this.updateTime+864e5<=Date.now()}persistToCache(){return this.cacheStrategy.persistToCache(this)}restoreFromCache(){return(0,n.mG)(this,void 0,void 0,(function*(){return!function(){const e=l.c.getQueryParameterByName("ignoreAmplifyCache",window.location.search);return!!e&&"true"===e.toLocaleLowerCase()}()&&this.cacheStrategy.restoreFromCache().then((e=>{if(!e)return!1;this.itemsMap={};for(const[t,i]of Object.entries(e.itemsMap))this.itemsMap[t]=new k(i.data,i.serviceTimeStamp,i._interactionLog);return this.updateTime=e.updateTime,this.schemaVersion=e.schemaVersion,!0}))}))}}var M=i(47903);class x{getCoachmarksFromDataConnector(e){return(0,n.mG)(this,void 0,void 0,(function*(){this.amplifyStorage||(this.amplifyStorage=new O);let t=yield this.amplifyStorage.getPlacementItems();e&&(t=t.filter((t=>e.includes(t.id))));const i=t.filter((e=>e.isEligibleToShow(this.amplifyStorage.profileCreationTimeInMs,this.amplifyStorage.isAadAccount))),n=i.length&&i[0].data;return this.validateAmplifyCoachmark(n)?this.extractCoachmarkCreativeMessages(n):null}))}fireBeacon(e,t,i,r,o){return(0,n.mG)(this,void 0,void 0,(function*(){const t=yield this.amplifyStorage.getPlacementItemByCreativeId(r),n=null==t?void 0:t.data,o=null==n?void 0:n.items.find((e=>e.createId===r)),c=[];if(o){if(e===s.R.Impression)c.push({beaconUrls:n.visibilityUrls,beaconType:a.hE.BeaconTypeVisibility,encoded:m(n.beaconsJson)}),t.logInteraction(T.Viewed),this.amplifyStorage.updateStorageItem(t);else if(i===s.M.Click)c.push({beaconUrls:o.clickUrls,beaconType:a.hE.BeaconTypeClick,encoded:m(n.beaconsJson)}),t.logInteraction(T.Clicked),this.amplifyStorage.updateStorageItem(t);else{if(!s.M.Dismiss)return;{const e=new M.h(o.url),i=null==e?void 0:e.get("rlink");c.push({beaconUrls:[`https://g.bing.com/neg/0?rlink=${i}`],beaconType:a.hE.UserActionEvent,encoded:!1}),t.logInteraction(T.Dismissed),this.amplifyStorage.updateStorageItem(t)}}f(c)}}))}validateAmplifyCoachmark(e){return!!e}extractCoachmarkCreativeMessages(e){var t;const i=[];if(!(null===(t=null==e?void 0:e.items)||void 0===t?void 0:t.length))return i;const{items:n,visibilityUrls:r}=e,{title:s,description:a,images:c,clickBeacons:d,url:l,createId:u}=n[0],p=(null==c?void 0:c.length)&&c[0]||null,g={coachmarkSource:o.jX.Amplify,creativeId:u,ctaList:[{ctaButtonText:"Learn More",ctaType:"Navigate",ctaButtonURL:l},{ctaButtonText:"Maybe Later",ctaType:"Close"}],displayDismissX:"true",displayType:o.dm.Medium,eventUrl:{actionUrl:d,impressionUrl:(null==r?void 0:r.length)?r[0]:""},headline:s,leadText:a,mainImage:p.url,mainImageAltText:p.alt,name:"Amplify",nonTargetPlacement:o.HJ.BottomEnd,positionId:"Coachmark",timeoutMilliseconds:1e4};return i.push(g),i}}var D=i(29993),R=i(63439),L=i(91881),F=i(62985),N=i(53076),B=i(93450),j=i(38130);class ${getCoachmarksFromDataConnector(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.irisDataConnector=yield B._.getInstance().rootReducer.getDataConnector(N.z.IrisData),!this.irisDataConnector)return j.i.trackAppErrorEvent(Object.assign(Object.assign({},r.qCO.IrisDataConnectorUndefined),{message:"No Iris data connector"})),null;const t=yield this.irisDataConnector.getPayload(L._l.MSNNewsCoachmark);if(!this.validateSurface(t,L._l.MSNNewsCoachmark))return null;let i=t.creatives;if((null==e?void 0:e.length)&&(i=i.filter((t=>e.includes(t.creativeId)))),!i||!i.length)return null;const n=i[Math.floor(Math.random()*i.length)];return this.extractCoachmarkCreativeMessages(n,t.placement)}))}fireBeacon(e,t,i,o,s){return(0,n.mG)(this,void 0,void 0,(function*(){this.irisDataConnector=yield B._.getInstance().rootReducer.getDataConnector(N.z.IrisData),this.irisDataConnector?this.irisDataConnector.sendActionUpdate(s,o,e,t,i):j.i.trackAppErrorEvent(Object.assign(Object.assign({},r.qCO.IrisDataConnectorUndefined),{message:"No Iris data connector",pb:Object.assign(Object.assign({},r.qCO.EventTypeUndefined.pb),{customMessage:`Error reporting iris beacons eventType: ${e}, telemetryInfo: ${t}, irisAction: ${i}, creativeId: ${o}, positionId:${s}`})}))}))}validateSurface(e,t){return e?!F.S.infoHasErrors(e)||(e.errors.forEach((e=>{2040!=(e&&e.code?e.code:e.errors&&e.errors.length>0&&e.errors[0].code)&&j.i.trackAppErrorEvent(Object.assign(Object.assign({},r.qCO.ErrorFoundForSurface),{message:"Surface errors discovered",pb:Object.assign(Object.assign({},r.qCO.ErrorFoundForSurface.pb),{customMessage:"Error with surface: "+L._l.MSNNewsCoachmark+" Code: "+e.code+" Message: "+e.msg})}))})),!1):(c.k.log(`IrisHandler: Iris surface not found for the campaign: ${e}`),!1)}extractCoachmarkCreativeMessages(e,t){const i=[];let n;return e&&e.content&&e.content.cm&&!e.content.rewards&&e.telemetry&&e.creativeId&&t&&e.content.cm.forEach((r=>{n=Object.assign(Object.assign({},r),{ctaList:r.cta,showPointer:!("true"===r.disablePointer),frequency:Number(e.content.frequency),frequencyInterval:Number(e.content.frequencyInterval),ecsFeatureFlags:e.content.ecsFeatureFlags,isEcsExperiment:"true"===e.content.isEcsExperiment,creativeId:e.creativeId,creativeName:e.creativeName,creativeNamespace:e.creativeNamespace,storageInfo:e.storageInfo,eventUrl:e.telemetry,positionId:t,coachmarkSource:o.jX.Iris}),i.push(n)})),i}}var U=i(12574);class H extends R.e{constructor(e,t,i,n,r,s,a){super(e,t,i,n,r,s,a),this.coachmarkServiceHandler=new $,this.coachmarkServiceHandler=(null==s?void 0:s.coachmarkDataSource)===o.jX.Amplify?new x:new $,this.campaignsIdFilter=null==s?void 0:s.campaignsIdFilter}addCoachmark(e,t=!1){return(0,n.mG)(this,void 0,void 0,(function*(){let i=!1;if(yield(0,U.XA)(t)){const t=o.kE.extractMessages(e);if(!t||0===t.length)return!1;const n=new Promise((e=>{D.$.updateCoachmarkVisibleStatus.registerObserver((()=>{i=this.getCurrentState().isCoachmarkOnScreen,e()}))}));D.$.addCoachmark.getActionSender(this).send(t),yield n}return i}))}reportEvent(e,t,i,n,o){e?t?e!==s.R.Action||i?this.coachmarkServiceHandler.fireBeacon(e,t,i,n,o):j.i.trackAppErrorEvent(Object.assign(Object.assign({},r.qCO.IrisActionUndefined),{message:"Iris action undefined",pb:Object.assign(Object.assign({},r.qCO.EventTypeUndefined.pb),{customMessage:`Error reporting iris beacons eventType: ${e}, telemetryInfo: ${JSON.stringify(t)}, irisAction: ${i}, creativeId: ${n}, positionId: ${o}`})})):j.i.trackAppErrorEvent(Object.assign(Object.assign({},r.qCO.TelemetryInfoUndefined),{message:"Iris telemetry info not found",pb:Object.assign(Object.assign({},r.qCO.EventTypeUndefined.pb),{customMessage:`Error reporting iris beacons eventType: ${e}, telemetryInfo: ${JSON.stringify(t)}, irisAction: ${i}, creativeId: ${n}, positionId: ${o}`})})):j.i.trackAppErrorEvent(Object.assign(Object.assign({},r.qCO.EventTypeUndefined),{message:"Event type is undefined",pb:Object.assign(Object.assign({},r.qCO.EventTypeUndefined.pb),{customMessage:`Error reporting iris beacons eventType: ${e}, telemetryInfo: ${JSON.stringify(t)}, irisAction: ${i}, creativeId: ${n}, positionId: ${o}`})}))}getCoachmarks(){return(0,n.mG)(this,void 0,void 0,(function*(){return yield this.coachmarkServiceHandler.getCoachmarksFromDataConnector(this.campaignsIdFilter)}))}}},21343:function(e,t,i){"use strict";i.d(t,{W:function(){return o}});var n=i(30856),r=i(29993);class o{reduce(e,t){if(!e)return{coachmarkMessages:void 0,isCoachmarkOnScreen:void 0,coachmarkHeight:void 0,coachmarkName:void 0};if(!t)return e;let i,o=!1;return o=o||n.G.handleAction(t,r.$.addCoachmark,(t=>{i=Object.assign(Object.assign({},e),{coachmarkMessages:t})})),o=o||n.G.handleAction(t,r.$.updateCoachmarkHeight,(t=>{i=Object.assign(Object.assign({},e),{coachmarkHeight:t})})),o=o||n.G.handleAction(t,r.$.updateCoachmarkName,(t=>{i=Object.assign(Object.assign({},e),{coachmarkName:t})})),o=o||n.G.handleAction(t,r.$.updateCoachmarkVisibleStatus,(t=>{i=Object.assign(Object.assign({},e),{isCoachmarkOnScreen:t})})),i||e}}},73231:function(e,t,i){"use strict";i.d(t,{HJ:function(){return o},M_:function(){return r},dm:function(){return a},jX:function(){return s},kE:function(){return l},ur:function(){return n}});var n,r,o,s,a,c=i(26415),d=i(38130);!function(e){e.Above="Above",e.Below="Below",e.Left="Left",e.Right="Right"}(n||(n={})),function(e){e.Adjacent="Adjacent",e.Center="Center",e.Opposite="Opposite"}(r||(r={})),function(e){e.TopStart="TopStart",e.TopEnd="TopEnd",e.BottomStart="BottomStart",e.BottomEnd="BottomEnd"}(o||(o={})),function(e){e.Iris="Iris",e.Amplify="Amplify",e.Experience="Experience"}(s||(s={})),function(e){e.Small="Small",e.Medium="Medium",e.Large="Large"}(a||(a={}));class l{static extractMessages(e){const t=new Array;let i;return e?(e.forEach((e=>{l.hasMessageData(e)?(i=l.mapMessageResponseForProps(e),t.push(i)):d.i.trackAppErrorEvent(Object.assign(Object.assign({},c.qCO.InvalidCoachmarkMessage),{message:`Coachmark message passed is invalid or malformed: coachmark: ${e.name}`,pb:Object.assign(Object.assign({},c.qCO.InvalidCoachmarkMessage.pb),{customMessage:`creativeId: ${e.creativeId} positionId: ${e.positionId} Malformed coachmark message: ${JSON.stringify(e)}`})}))})),t):t}static hasMessageData(e){return null!=(e&&(e.targetElement&&e.position||e.nonTargetPlacement)&&e.headline&&e.leadText&&e.timeoutMilliseconds&&e.coachmarkSource)}static mapMessageResponseForProps(e){if(!e)return null;return{actionPauseInMs:e.actionPauseInMs,body:e.leadText,cancelText:e.cancelText,ctaList:e.ctaList,showPointer:e.showPointer,coachmarkSize:l.getDisplayType(e.displayType),floatingPosition:e.nonTargetPlacement&&l.getNonTargetPlacement(e.nonTargetPlacement),head:e.headline,leadImage:e.leadImage,leadImageAltText:e.leadImageAltText,mainImage:e.mainImage,mainImageAltText:e.mainImageAltText,name:e.name,pointerPosition:e.pointerPlacement&&l.getPointerPosition(e.pointerPlacement),coachmarkPosition:e.position&&l.getPlacement(e.position),showDismissalX:e.displayDismissX,targetElement:e.targetElement,timeoutInMs:e.timeoutMilliseconds,zIndex:1,ecsFeatureFlags:e.ecsFeatureFlags,isEcsExperiment:e.isEcsExperiment,creativeId:e.creativeId,creativeNamespace:e.creativeNamespace,rewardsInfo:e.rewardsInfo,eventUrl:e.eventUrl?e.eventUrl:void 0,positionId:e.positionId,coachmarkSource:e.coachmarkSource,edgeNurturingAPICampaignName:e.edgeNurturingAPICampaignName}}static getPointerPosition(e){switch(r[e]){case r.Adjacent:return r.Adjacent;case r.Center:return r.Center;case r.Opposite:return r.Opposite;default:return null}}static getPlacement(e){switch(n[e]){case n.Above:return n.Above;case n.Below:return n.Below;case n.Left:return n.Left;case n.Right:return n.Right;default:return null}}static getDisplayType(e){switch(a[e]){case a.Small:return a.Small;case a.Medium:return a.Medium;case a.Large:return a.Large;default:return a.Medium}}static getNonTargetPlacement(e){switch(e){case o.TopStart:return o.TopStart;case o.TopEnd:return o.TopEnd;case o.BottomStart:return o.BottomStart;case o.BottomEnd:return o.BottomEnd;default:return null}}}},38130:function(e,t,i){"use strict";i.d(t,{i:function(){return r}});var n=i(65135);class r{static registerTrackAppErrorEventCallback(e){e&&(this.trackAppErrorEventCallback=e)}static trackAppErrorEvent(e){this.trackAppErrorEventCallback&&this.trackAppErrorEventCallback(e)}}r.trackAppErrorEventCallback=e=>{n.M0.sendAppErrorEvent(e)}},61366:function(e,t,i){"use strict";var n;i.d(t,{F:function(){return n}}),function(e){e.Adult="adult",e.Enterprise="enterprise",e.Kids="kids"}(n||(n={}))},20126:function(e,t,i){"use strict";var n;i.d(t,{Q:function(){return n}}),function(e){e.Android="android",e.Ios="ios",e.Linux="linux",e.Macos="macos",e.Windows="windows",e.Xbox="xbox"}(n||(n={}))},57967:function(e,t,i){"use strict";i.d(t,{Fe:function(){return p},Sp:function(){return u},W1:function(){return a},Wc:function(){return c},cm:function(){return l},r7:function(){return s},yL:function(){return d}});var n=i(79664);const r=n.z.Alert,o={build:""};function s(e){Object.assign(o,e)}const a={IndexedDbWriteFailed:{id:22010,severity:r,pb:o},IndexedDbReadFailed:{id:22011,severity:r,pb:o},CrsFetchError:{id:22012,severity:r,pb:o},ReceivedConfigFromCdnAsCrsFetchFailed:{id:22013,severity:r,pb:o},GetConfigException:{id:22014,severity:n.z.Critical,pb:o},IndexedDbBulkReadFailed:{id:22015,severity:r,pb:o},IndexedDbFailedToRemoveCachedConfig:{id:22016,severity:r,pb:o},IndexedDbFailedToClearAllCachedConfigs:{id:22017,severity:r,pb:o},RenderCachePurgedDueToChangesInConfig:{id:22018,severity:n.z.NoAlert,pb:o},FailedToPurgeRenderCache:{id:22019,severity:r,pb:o},RefreshConfigCacheFailed:{id:22020,severity:r,pb:o},IndexedDbInitFailed:{id:22021,severity:r,pb:o},DifferentCbid:{id:22022,severity:n.z.NoAlert,pb:o},PrgFlightLsWriteError:{id:22023,severity:n.z.NoAlert,pb:o},PrgFlightLsReadError:{id:22024,severity:n.z.NoAlert,pb:o}},c=(n.z.NoAlert,n.z.NoAlert,{id:22027,severity:n.z.Critical,pb:o}),d=(n.z.Critical,n.z.Critical,{id:22031,severity:r,pb:o}),l={id:22032,severity:r,pb:o},u={id:22033,severity:r,pb:o},p={RecursiveGetFailed:{id:22050,severity:r,pb:o},BlobFetchReturnedNull:{id:22051,severity:n.z.NoAlert,pb:o}};n.z.NoAlert,n.z.NoAlert,n.z.HighImpact},21712:function(e,t,i){"use strict";i.d(t,{id:function(){return n},ks:function(){return o},pA:function(){return r}});const n="MSCC",r="MUID",o="eupubconsent-v2"},37299:function(e,t,i){"use strict";i.d(t,{e:function(){return r},n:function(){return n}});const n="consent-banner-container",r="onetrust-sdk"},71443:function(e,t,i){"use strict";i.d(t,{C:function(){return n},H:function(){return r}});const n="consent.onetrust",r="widgetHost.cookieConsent"},29815:function(e,t,i){"use strict";var n;i.d(t,{i:function(){return n}}),function(e){e.MSCCBanner="mscc",e.OneTrustBanner="onetrust",e.WidgetHost="widgethost",e.None="none"}(n||(n={}))},72344:function(e,t,i){"use strict";var n;i.d(t,{_:function(){return n}}),function(e){e[e.Unknown=0]="Unknown",e[e.Required=1]="Required",e[e.NotRequired=2]="NotRequired"}(n||(n={}))},85497:function(e,t,i){"use strict";var n;i.d(t,{o:function(){return n}}),function(e){e.Essential="ES",e.Advertising="AD",e.SocialMedia="SM",e.ThirdPartyAnalytics="AL"}(n||(n={}))},42640:function(e,t,i){"use strict";var n;i.d(t,{Q:function(){return n}}),function(e){e.C0001="C0001",e.C0002="C0002",e.C0003="C0003",e.C0004="C0004"}(n||(n={}))},76668:function(e,t,i){"use strict";var n;i.d(t,{f:function(){return n}}),function(e){e.Lax="lax",e.Strict="strict",e.None="none"}(n||(n={}))},35357:function(e,t,i){"use strict";i.d(t,{hI:function(){return l},iF:function(){return d},o4:function(){return a},rv:function(){return c}});var n=i(37299),r=i(21712),o=i(33379),s=i(67462);function a(){return(0,o.N)()&&null!=document.getElementById(n.n)}function c(){return a()&&null===(0,s.ej)(r.id)}function d(){return(0,o.N)()&&null!=document.getElementById(n.e)}function l(){return d()&&null===(0,s.ej)(r.ks)}},52144:function(e,t,i){"use strict";i.d(t,{A:function(){return s},U:function(){return n}});var n,r=i(72344),o=i(59049);!function(e){e[e.Initialized=1]="Initialized",e[e.CookieConsentProvider=2]="CookieConsentProvider",e[e.CookieConsentStatus=3]="CookieConsentStatus",e[e.ActiveCookieCategories=4]="ActiveCookieCategories"}(n||(n={}));const s=new o.v("CookieManagementStateKey");s.set(n.Initialized,!1),s.set(n.CookieConsentStatus,r._.Unknown)},36478:function(e,t,i){"use strict";i.d(t,{Q:function(){return p}});var n=i(42640),r=i(85497);const o={[n.Q.C0001]:r.o.Essential,[n.Q.C0002]:r.o.Advertising,[n.Q.C0003]:r.o.SocialMedia,[n.Q.C0004]:r.o.ThirdPartyAnalytics};var s=i(29815),a=i(72344),c=i(71443),d=i(52144),l=i(35357),u=i(33379);function p(e){if(d.A.get(d.U.Initialized))return;let t=s.i.None,i=a._.NotRequired;(0,u.N)()&&(e&&e.required?(t=s.i.WidgetHost,i=e.categories?a._.NotRequired:a._.Required,g(e.categories),window.addEventListener(c.H,(e=>g(e.detail)))):(0,l.o4)()?(t=s.i.MSCCBanner,i=(0,l.rv)()?a._.Required:a._.NotRequired,i===a._.Required?d.A.set(d.U.ActiveCookieCategories,[r.o.Essential]):d.A.set(d.U.ActiveCookieCategories,[...Object.values(r.o)])):(0,l.iF)()&&(t=s.i.OneTrustBanner,i=(0,l.hI)()?a._.Required:a._.NotRequired,h(),window.addEventListener(c.C,h))),d.A.set(d.U.CookieConsentStatus,i),d.A.set(d.U.CookieConsentProvider,t),d.A.set(d.U.Initialized,!0)}function g(e){const t=e&&Object.keys(e).filter((t=>Object.values(r.o).includes(t)&&1===e[t]))||new Array;t.includes(r.o.Essential)||t.unshift(r.o.Essential),d.A.set(d.U.ActiveCookieCategories,t)}function h(){const e=window.OnetrustActiveGroups,t=e&&e.trim().split(",").filter((e=>{const t=e&&e.trim();return Object.values(n.Q).includes(t)})).map((e=>{const t=e.trim();return o[t]}))||new Array;t.includes(r.o.Essential)||t.unshift(r.o.Essential),d.A.set(d.U.ActiveCookieCategories,t)}},67462:function(e,t,i){"use strict";i.d(t,{ej:function(){return f},jG:function(){return v},aW:function(){return y},sq:function(){return b}});var n=i(85497);const r={[n.o.Essential]:["AL","ALS","AL_ANON","AL_APP_ANNON","AL_STATE","ANON","ANONCKNM","APP_ANON","BFB","BFBUSR","DefaultLocation","Edgecac","FreWv","GalleryMode","MC1","MS0","MSCC","MSFPC","MSNRPSAuth","MSNRPSSecAuth","MSPRequ","MUID","MUIDB","MicrosoftApplicationsTelemetryDeviceId","OSAT","OSATE","OptanonAlertBoxClosed","OptanonConsent","OvrlyTrf","PreferencesMsn","RC","RUM","RecentStocks","SRCHD","SRCHHPGUSR","SRCHUID","SRCHUSR","Sample","TOptOut","UMH2E","WLMMAC","_EDGE_S","_EDGE_V","_SS","_U","_cb","_cb_ls","_cb_svref","aace","ace","ahs-dismissed","ahs-installed","ahs-showings","ai_session","aqp","at","at-bing","bcookie","bingimage","bwssoc","cac","cb","cbypass","cfrecnt","child","cmdisp","cmwr","currentaccount","ddlcur","df","ecasession","eub","eupubconsent","eupubconsent-v2","gfrecnt","hidebn","i18next","ipt","ipv6","isdomainmigrated","lh","lt","marketPref","mktreset","mniotd","mnmarket","msaOptout","msaoptout","nactk","no_read_more","ntps","numac","orfc_feeds","pbmi","pglt-edgeChromium-dhp","pglt-edgeChromium-ntp","pglt-microsoftNews-msnews","pglt-microsoftNews-startpage","pop","refresh-reason","sbc-dismissed","sbc-installed","sbc-showings","smd","sptmarket","theme","timeZoneOffsetInMins","uaid","videoCookiesLastCategory","videoerrorcount","vjsusrpref","w10rp","w10rpls"],[n.o.Advertising]:["BizoID","adslrid","dub_downlevel","eAPID","ecadprovider","ecisession","ecmsession","ecsession"],[n.o.SocialMedia]:["promptDisplayCount"],[n.o.ThirdPartyAnalytics]:[]};var o=i(21712),s=i(29815),a=i(72344),c=i(76668),d=i(26415),l=i(52144),u=i(12884),p=i(33379);const g=["at","at-bing","eupubconsent-v2","lt","AL","ALS","MSNRPSSecAuth","OSAT"],h=[";",","," "];var m=i(65135);function f(e){const t=(0,u.G8)();if(t){const i=new RegExp("\\b"+e+"\\s*=\\s*([^;]*)","i").exec(t);return i&&i.length>1?i[1]:null}return null}function v(){return f(o.pA)}function y(){return f(o.ks)}function b(e,t,i,o,u,f,v){try{if(!l.A.get(l.U.Initialized))return(0,p.N)()&&m.M0.sendAppErrorEvent(d.lIV),!1;if(void 0===i||i>0){if(!function(e){if(!(0,p.N)())return!1;const t=l.A.get(l.U.CookieConsentStatus),i=l.A.get(l.U.CookieConsentProvider),o=l.A.get(l.U.ActiveCookieCategories);let c=!1;switch(i){case s.i.MSCCBanner:case s.i.OneTrustBanner:case s.i.WidgetHost:return function(e,t){for(const i of t){if(r[i].includes(e))return!0}let i=!1;const o=Object.keys(r).filter((e=>!t.includes(n.o[e])));for(const t of o){if(r[t].includes(e)){i=!0;break}}i||m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.sGX),{message:`Attempting to write a cookie: "${e}" not present in the cookie category mapping.`}));return!1}(e,o);default:c=t===a._.NotRequired,c||m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.fU5),{message:`Consent status should be '2' (NotRequired), but is set to '${t}'`}))}return c}(e))return!1;if(null==t)return m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.AvP),{message:`Cookie value is being set to either 'undefined' or 'null'. cookie name: "${e}", cookie value: "${t}"`})),!1;const o=typeof t;"string"!==o&&(t=JSON.stringify(t),m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.bAs),{message:`Cookie value is not of string type. observed type: "${o}". cookie name: "${e}"`})));for(const i of h)if(e.includes(i)||t.includes(i))return m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.AvP),{message:`Cookie name and/or value contains invalid character: '${i}'. cookie name: "${e}"`})),!1;i>365&&m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.Vwf),{message:`Cookie expiration time: ${i} days is greater than suggested max duration of 365 days (1 year). cookie name: "${e}"`}));const c=e.length+(t&&t.length||0);c>1e3&&!g.includes(e)&&m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.HFn),{message:`Cookie size: "${c} Bytes" is too big (> 1000 Bytes). cookie name: "${e}"`}))}return function(e,t,i,n,r,o,s){let a;const d=[e,"=",t];if(i<0)a="Fri, 31 Dec 1999 23:59:59 GMT";else if(i){const e=new Date;e.setTime(e.getTime()+864e5*i),a=e.toUTCString()}a&&d.push(";expires=",a);n&&d.push(";domain=",n);r&&d.push(";path=",r);o&&d.push(";secure");s&&s!==c.f.Lax&&(d.push(";samesite=",s.toString()),s!==c.f.None||o||d.push(";secure"));document&&(document.cookie=d.join(""))}(e,t,i,o,u,f,v),!0}catch(t){return m.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.sX$),{message:`trySetCookie() failed with error: "${t.message}". cookie name: "${e}"`})),!1}}},68679:function(e,t,i){"use strict";var n;i.d(t,{C:function(){return n}}),function(e){e[e.Exceptional=0]="Exceptional",e[e.Fallback=1]="Fallback"}(n||(n={}))},79664:function(e,t,i){"use strict";var n;i.d(t,{z:function(){return n}}),function(e){e[e.Alert=0]="Alert",e[e.NoAlert=1]="NoAlert",e[e.HighImpact=2]="HighImpact",e[e.Critical=3]="Critical"}(n||(n={}))},63045:function(e,t,i){"use strict";var n;i.d(t,{w:function(){return n}}),function(e){e[e.Production=0]="Production",e[e.Local=1]="Local"}(n||(n={}))},49972:function(e,t,i){"use strict";function n(e,t){if(e instanceof Error){const i=e.toString();return t&&e.stack?`${i}, Stack: ${e.stack}`:i}return"string"==typeof e?e:function(e){try{return JSON.stringify(e)}catch(e){return""}}(e)}i.d(t,{n:function(){return n}})},76323:function(e,t,i){"use strict";function n(e){let t,i=!1;const n=function(){return i||(i=!0,t=e()),t};return n.cache={clear:()=>{i=!1,t=void 0}},n}i.d(t,{p:function(){return n}})},83130:function(e,t,i){"use strict";function n(e,t,i=!1){return!e||r(e,t)&&o(e,t)&&s(e,t)&&a(e,t)&&c(e,t)&&l(e,t,i)&&u(e,t)&&p(e,t)&&g(e,t)&&h(e,t)}function r(e,t){return!e.audienceMode||t.audienceMode===e.audienceMode}function o(e,t){if(!e.browser)return!0;if(!t.browser)return!1;const{browserType:i,version:n}=t.browser,{browserType:r,version:o}=e.browser;if(r&&r!==i)return!1;if(!o)return!0;if("string"==typeof o)return n===o;if("object"==typeof o){const e=parseInt(n);let t;for(t in o){const i=o[t];if(null!=i)switch(t){case"equals":if(e!==i)return!1;break;case"greaterThan":if(!(e>i))return!1;break;case"lessThan":if(!(e<i))return!1;break;case"notEquals":if(e===i)return!1;break;case"oneOf":if(-1===i.indexOf(e))return!1;break;default:return!1}}return!0}return!1}function s(e,t){return!e.deviceFormFactor||t.deviceFormFactor===e.deviceFormFactor}function a(e,t){return!e.domain||t.domain===e.domain}function c(e,t){return t.pageExperiments=t.pageExperiments||[],"string"!=typeof e.experimentId||0===Object.keys(e.experimentId).length||t.pageExperiments.indexOf(e.experimentId)>=0}function d(e,t){return 0===(e||"").localeCompare(t||"",void 0,{sensitivity:"accent"})}function l(e,t,i){const n=e.locale;if(!n)return!0;let r;return t.locale&&(r=i?t.locale.display:t.locale.content),!!r&&!(n.language&&!d(n.language,r.language)||n.market&&!d(n.market,r.market)||n.script&&!d(n.script,r.script))}function u(e,t){return function(e,t){if(!e)return!0;if(!t)return!1;if("string"==typeof e&&d(e,t))return!0;if("object"!=typeof e)return!1;const i=t.toLowerCase();if(e.startsWith&&!i.startsWith(e.startsWith.toLowerCase()))return!1;if(e.endsWith&&!i.endsWith(e.endsWith.toLowerCase()))return!1;if(e.equals&&!d(e.equals,t))return!1;if(e.notEquals&&d(e.notEquals,t))return!1;if(e.contains&&!i.includes(e.contains.toLowerCase()))return!1;if(e.oneOf&&-1===e.oneOf.indexOf(t))return!1;return!0}(e.ocid,t.ocid)}function p(e,t){return!e.os||t.os===e.os}function g(e,t){const i=e.pageType;if(!i)return!0;const n=t.pageType;if(!n)return!1;if("string"==typeof i)return i===n;if(i.exact&&i.exact.toUpperCase()===n.toUpperCase())return!0;if(i.segments){const e=i.segments,t=n.split("::");if(t&&t.length>0){let i=0;for(const n in e){const r=e[n];if(!r||"string"!=typeof r||i>=t.length||r.toUpperCase()!==t[i].toUpperCase())return!1;i++}return Object.keys(e).length===i}}return!1}function h(e,t){return!e.platform||t.platform===e.platform}i.d(t,{Ev:function(){return s},J4:function(){return n},K3:function(){return u},K4:function(){return o},Sh:function(){return d},Uc:function(){return r},W9:function(){return c},fb:function(){return l},hI:function(){return a},jF:function(){return h},oM:function(){return g},zu:function(){return p}})},84169:function(e,t,i){"use strict";i.d(t,{Vh:function(){return L},jG:function(){return N},Yq:function(){return F}});var n,r=i(12108),o=i(33799),s=i(38895),a=i(83097),c=i(26415),d=i(22704),l=i(68848),u=i(31573),p=i(2040),g=i(5633);!function(e){e.getHostPageFromUrl=function(e){if(!e)return;const t=new URL(e),i=t.hostname,n=t.pathname.split("/"),r=(i.match(/[^.]+\.[^.\d]+$/)||{})[0]||"";if(n.length<=p.Qw)return{originalUrl:e,categoryKey:null,verticalKey:null,hostName:i,topDomain:r};const o=5===n[1].length&&2===n[1].split("-").length?1:0,s={originalUrl:e,categoryKey:n[2+o],verticalKey:n[1+o],hostName:i,topDomain:r};return n.length>=p.Qw&&(s.subcategoryKey=n[3+o]),s}}(n||(n={}));var h,m,f,v=i(75970),y=i(33379),b=i(12884),S=i(27003),C=i(99590),w=i(53578),T=i(58155),k=i(88352),A=i(73252),I=i(79022),P=i(46336),E=i(82855),O=i(63045),M=i(57967),x=i(67462);!function(e){e.WWW="www",e.MicrosoftStart="microsoftstart",e.INT="int",e.INT1="int1",e.MicrosoftStartINT="microsoftstart-int",e.MicrosoftStartINT1="microsoftstart-int1"}(h||(h={})),function(e){e.MSN="msn",e.MicrosoftStart="microsoftstart"}(m||(m={})),function(e){e.COM="com",e.CN="cn"}(f||(f={}));var D=i(82530);const R="__AppEnvironmentInstance__";class L{constructor(e,t,i,n,r){this.marketMismatchDetails={type:"",mismatchItem1:"",mismatchItem2:""},this.initializeAppEnvironment(e,t,i,n,r)}get ShouldUseFdheadQsp(){return this.shouldUseFdheadQsp}get OneServiceContentMarketQspKey(){return this.oneServiceContentMarketQspKey}get Ecasession(){return void 0===this.ecasession&&(this.ecasession=(0,x.ej)("ecasession")||"init"),this.ecasession}get BrowserOptOut(){return void 0===this.browserOptOut&&(this.browserOptOut="1"===(0,x.ej)("TOptOut")),this.browserOptOut}get WpoData(){return this.wpoData}set WpoData(e){this.wpoData=e,this.addWpoFlights()}get isMobile(){var e,t;const i=(null===(e=null===A.Al||void 0===A.Al?void 0:A.Al.ClientSettings)||void 0===e?void 0:e.ocid)||"",n=(null===(t=null===A.Al||void 0===A.Al?void 0:A.Al.ClientSettings)||void 0===t?void 0:t.deviceFormFactor)||"";return i.startsWith("msnaroverlay")||"phone"===n}get isMiniProgram(){const e=A.Al.ClientSettings||{ocid:"",deviceFormFactor:""},t=(0,y.N)()?"weatherminiprogram"===e.ocid||((null===navigator||void 0===navigator?void 0:navigator.userAgent)||"").indexOf("miniProgram")>-1:"weatherminiprogram"===e.ocid;return"phone"===e.deviceFormFactor&&t}get isOverlayFrame(){var e;return((null===(e=null===A.Al||void 0===A.Al?void 0:A.Al.ClientSettings)||void 0===e?void 0:e.ocid)||"").startsWith("msnaroverlay")}get ActivityId(){return this.activityId}set ActivityId(e){this.activityId=e,A.Al.ClientSettings=Object.assign(Object.assign({},A.Al.ClientSettings),{aid:e})}get FrontDoorMuid(){return this.frontDoorMuid}get EnvironmentConfigUrl(){const e=new URL("",this.environmentConfigUrl);"dev"===new URLSearchParams((0,b.zp)()).get("env")&&e.searchParams.set("env.config","dev");const t=new URLSearchParams((0,b.zp)()).get("env.config");return t&&e.searchParams.set("env.config",t),e}get ContentServiceUrlBase(){const e=new URL("",this.contentServiceUrlBase);"dev"===new URLSearchParams((0,b.zp)()).get("env")&&e.searchParams.set("env.content","dev");const t=new URLSearchParams((0,b.zp)()).get("env.content");return t&&e.searchParams.set("env.content",t),e}get CurrentRequestTargetScope(){return this.currentRequestTargetScope}set CurrentRequestTargetScope(e){this.currentRequestTargetScope=e}get LocaleContentMarket(){var e,t,i;return(0,l.H)(A.Al.ClientSettings&&A.Al.ClientSettings.locale)||(null===(t=null===(e=this.currentRequestTargetScope)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.content)||(null===(i=this.currentRequestTargetScope)||void 0===i?void 0:i.locale)}get LocaleDisplayLanguage(){return(0,l.H)(A.Al.ClientSettings&&A.Al.ClientSettings.locale,!0)||this.LocaleContentMarket}get LocaleContentMarketString(){const e=this.LocaleContentMarket;return e&&e.language&&e.market?(0,l.p)(e):""}get LocaleDisplayLanguageString(){const e=this.LocaleDisplayLanguage;return e&&e.language&&e.market?(0,l.p)(e):""}get CurrentMarket(){return this.currentMarket}set CurrentMarket(e){this.currentMarket=e}get EnableFiveColLayout(){return this.enableFiveColLayout}set EnableFiveColLayout(e){this.enableFiveColLayout=e}get Environment(){return this.environment}set Environment(e){this.environment=e}get StaticDomain(){return this.staticDomain}get HostPage(){return this.hostPage}set HostPage(e){this.hostPage=e}get AppType(){return this.appType}get AuthCookieName(){return this.authCookieName}set AuthCookieName(e){this.authCookieName=e}get UseOneServiceAuthEndpoints(){return this.useOneServiceAuthEndpoints}set UseOneServiceAuthEndpoints(e){this.useOneServiceAuthEndpoints=e}get UseOneServiceAnonAuthEndpoints(){return this.useOneServiceAnonAuthEndpoints}set UseOneServiceAnonAuthEndpoints(e){this.useOneServiceAnonAuthEndpoints=e}get UseAuthFetch(){return this.useAuthFetch}set UseAuthFetch(e){this.useAuthFetch=e}get AccountInfoPromise(){return this.accountInfoPromise}set AccountInfoPromise(e){this.accountInfoPromise=e}get ResolvedAccountInfo(){return this.resolvedAccountInfo}set ResolvedAccountInfo(e){this.resolvedAccountInfo=e}get BuildVersion(){return this.buildVersion||""}get ClarityEnabled(){return this.clarityEnabled}set ClarityEnabled(e){this.clarityEnabled=e}get IsWinAADUser(){return this.isWinAADUser}set IsWinAADUser(e){this.isWinAADUser=e}get RootTelemetryId(){return this.rootTelemetryId}set RootTelemetryId(e){this.rootTelemetryId=e}get TrackInfo(){return this.trackInfo}set TrackInfo(e){this.trackInfo=e}get UserId(){return this.getUserMuid()||this.userId}set UserId(e){this.userId=e}get OneServiceApiKey(){return this.oneServiceApiKey}set OneServiceApiKey(e){this.oneServiceApiKey=e}get OneServiceOverride(){return this.oneServiceOverride}set OneServiceOverride(e){this.oneServiceOverride=e}get IsDebug(){return this.isDebug}get ShowMnsCreatorDashboard(){return this.showMnsCreatorDashboard}get NavTargetHostName(){return this.navTargetHost}get NavTargetUrlWithLocale(){return`https://${this.NavTargetHostName}/${this.CurrentMarket}`}get IsChinaCompliance(){return this.isChinaCompliance}get IsCaliforniaRegion(){return this.isCaliforniaRegion}get topDomain(){return this.isChinaCompliance?f.CN:f.COM}get isGccModUser(){if(this.AccountInfoPromise)return this.AccountInfoPromise.then((e=>(null==e?void 0:e.region_scope)===w.iN.GCC_MODERATE))}get WidgetAttributes(){return this.widgetAttributes}get ServiceUrlBase(){const e=new URL("",this.serviceUrlBase);"dev"===new URLSearchParams((0,b.zp)()).get("env")&&e.searchParams.set("env.service","dev");const t=new URLSearchParams((0,b.zp)()).get("env.service");return t&&e.searchParams.set("env.service",t),e}get FeedServiceUrlBase(){if(!this.feedServiceUrlBase)return null;const e=new URL("",this.feedServiceUrlBase);"dev"===new URLSearchParams((0,b.zp)()).get("env")&&e.searchParams.set("env.service","dev");const t=new URLSearchParams((0,b.zp)()).get("env.service");return t&&e.searchParams.set("env.service",t),e}get EnterpriseServiceUrlBase(){if(!this.enterpriseServiceDomainUrl)return;const e=new URL("",this.enterpriseServiceDomainUrl);"dev"===new URLSearchParams((0,b.zp)()).get("env")&&e.searchParams.set("env.service","dev");const t=new URLSearchParams((0,b.zp)()).get("env.service");return t&&e.searchParams.set("env.service",t),e}get isAadAccountUser(){return this.CurrentRequestTargetScope&&this.CurrentRequestTargetScope.audienceMode===r.F.Enterprise&&this.ResolvedAccountInfo&&this.ResolvedAccountInfo.account_type&&this.ResolvedAccountInfo.account_type===o.Qm.AAD}get IsFrePage(){return this.isFrePage}get DisableCachingConfigs(){return this.disableCachingConfigs}get EnableConfigService(){const e=T.c.getQueryParameterByName("enableConfigService",(0,b.zp)());return e?"true"===e.toLocaleLowerCase():this.enableConfigService}get EnableCMSPPEConfigs(){return A.Al&&A.Al.EnableCMSPPEConfigs}get IsMultiConfigRetrievalEnabled(){return this.isMultiConfigRetrievalEnabled}get SendFeedCallActivityIdInHeader(){return this.sendFeedCallActivityIdInHeader}get ConfigServiceBaseUrl(){return this.configServiceBaseUrl}get CrsRetryBaseUrl(){return this.crsRetryBaseUrl}get FeatureFlags(){return this.featureFlags}get HostHeaderOverride(){return this.hostHeaderOverride}get ConfigRootUrl(){if(!this.configRootUrl)return null;const e=new URL("",this.configRootUrl);"dev"===new URLSearchParams((0,b.zp)()).get("env")&&e.searchParams.set("env.config","dev");const t=new URLSearchParams((0,b.zp)()).get("env.config");return t&&e.searchParams.set("env.config",t),e}get CacheBustingIdentifier(){return this.cacheBustingIdentifier}get IsGitConfigs(){return this.isGitConfigs}get CountryCode(){return this.countryCode}set CountryCode(e){this.countryCode=e}get ActivityIdLowerCaseNoHypens(){return(A.Al&&A.Al.ClientSettings&&A.Al.ClientSettings.aid||"").toLowerCase()}get Latitude(){return this.latitude}get Longitude(){return this.longitude}get ConfigOrigins(){return this.configOrigins}get CrsVersion(){return this.crsVersion}get CrsPath(){return this.crsPath}get CrsDisableServerCache(){return this.crsDisableServerCache}set CrsDisableServerCache(e){this.crsDisableServerCache=e}get LanguageRegionMismatch(){return this.findLanguageRegionMismatch()?"marketmismatch":""}get MarketRequestInputLanguage(){return this.marketRequestInputLanguage}get MarketRequestInputRegion(){return this.marketRequestInputRegion}get MarketRequestInputGeoCountry(){return this.marketRequestInputGeoCountry}get MarketDetectionType(){return this.marketDetectionType}findLanguageRegionMismatch(){var e,t,i,n,r,o,s,a,c;if(A.Al.ClientSettings&&"true"===A.Al.ClientSettings.static_page)return!1;const d=A.Al.ClientSettings&&(null===(e=A.Al.ClientSettings)||void 0===e?void 0:e.market)&&(null===(i=null===(t=A.Al.ClientSettings)||void 0===t?void 0:t.market)||void 0===i?void 0:i.detection),u=A.Al.ClientSettings&&(null===(n=A.Al.ClientSettings)||void 0===n?void 0:n.market)&&(null===(o=null===(r=A.Al.ClientSettings)||void 0===r?void 0:r.market)||void 0===o?void 0:o.requestInput),p=(0,l.H)(A.Al.ClientSettings&&(null===(s=A.Al.ClientSettings)||void 0===s?void 0:s.locale)&&(null===(c=null===(a=A.Al.ClientSettings)||void 0===a?void 0:a.locale)||void 0===c?void 0:c.content));if(d&&("implicitExisting"===d.type||"implicitNew"===d.type||"cm"===d.type)&&u){if(p){if(u.language.toLowerCase()!==p.language.toLowerCase())return this.marketMismatchDetails.type="language",this.marketMismatchDetails.mismatchItem1=u.language.toLowerCase(),this.marketMismatchDetails.mismatchItem2=p.language.toLowerCase(),!0;if(u.region&&u.region.toLowerCase()!==p.market.toLowerCase())return this.marketMismatchDetails.type="region",this.marketMismatchDetails.mismatchItem1=u.region.toLowerCase(),this.marketMismatchDetails.mismatchItem2=p.market.toLowerCase(),!0}if("implicitExisting"===d.type&&u.geo_country.toLowerCase()!==d.geo_country.toLowerCase())return this.marketMismatchDetails.type="geo_country",this.marketMismatchDetails.mismatchItem1=u.geo_country.toLowerCase(),this.marketMismatchDetails.mismatchItem2=d.geo_country.toLowerCase(),!0}return!1}get MarketMismatchDetail(){return this.findLanguageRegionMismatch()?this.marketMismatchDetails:null}setConfigOrigin(){const e={feature:O.w.Production,loc:O.w.Production};return this.IsGitConfigs&&!this.EnableConfigService||(e.feature=O.w.Production,e.loc=O.w.Production),e}static getInstance(e=null,t=null,i=null,n=null,r=null){return S.Gq.get(R,(()=>new L(e,t,i,n,r)))}static resetInstance(e=null,t=null,i=null,n=null,r=null){const o=new L(e,t,i,n,r);return S.Gq.set(R,o),N=(0,C.h)(L),N}initializeAppEnvironment(e,t,i,r,o){const a=(0,b.Td)(),d=(0,y.N)()?(0,b.$w)(p.Xs):null,l=(0,b.l4)(),h=(0,b.Dp)(),m=(0,b.zp)();let f=null;const v=A.Al&&A.Al.ClientSettings,S=T.c.getParamsWithItems(m,!0);if(v){const e=S&&S.find((e=>"revip"===e.key));this.isCaliforniaRegion=v.geo_subdivision&&"california"==v.geo_subdivision.toLocaleLowerCase(),this.isChinaCompliance=a.toLowerCase().endsWith(".cn")||v.isChinaCompliance||v.useCnDomain||e&&e.value&&"cn"===e.value.toLocaleLowerCase()||!1,(0,u.sV)(this.isChinaCompliance),this.activityId=this.tryReformatGuid(v.aid),this.currentMarket=this.LocaleContentMarketString||v.apps_locale,this.countryCode=v.geo_country,this.frontDoorMuid=v.fd_muid,this.latitude=v.geo_lat,this.longitude=v.geo_long,this.configRootUrl=v.configRootUrl?new URL("",v.configRootUrl):null,f=(0,g.s)(v.pcsInfo&&v.pcsInfo.env||"prod"),this.setAccountInfoPromise(),this.appType=v.apptype||"",this.authCookieName=this.getAuthCookieName(),this.useOneServiceAuthEndpoints=!1,this.useOneServiceAnonAuthEndpoints=!1,this.useAuthFetch=!1,this.featureFlags=v.featureFlags,this.disableCachingConfigs=!(!this.featureFlags||!this.featureFlags.disableCachingConfigs)&&"true"===this.featureFlags.disableCachingConfigs,this.enableConfigService=!this.featureFlags||!this.featureFlags.enableConfigService||"true"===this.featureFlags.enableConfigService,this.sendFeedCallActivityIdInHeader=(!this.featureFlags||!this.featureFlags.disableActivityIdInHeader||"true"!==this.featureFlags.disableActivityIdInHeader)&&("edge"===this.appType||"hub"===this.appType),this.cacheBustingIdentifier=v.cbid;const{bundleInfo:t,pcsInfo:i}=v||{},n=this.getRunTimePropertyBag(t,i);(0,c.GQ)(n),(0,M.r7)(n),this.configIndexDocId=v.configIndexDocId,this.widgetAttributes=v.widgetAttributes}const C=(0,g.s)(T.c.getQueryParameterByName("env",l));this.environment=C||f||g.q.prod;const w=v&&v.servicesEndpoints,k=w&&w.feedService&&w.feedService.domain||h;this.serviceDomainUrl=i||k,this.oneServiceOverride=o,this.staticDomain=new URL(k).host,this.enterpriseServiceDomainUrl=w&&w.enterpriseFeedService&&w.enterpriseFeedService.domain;const{crs:I={}}=w||{},{v:P,domain:O,path:x}=I;this.crsVersion=P,this.crsDomain=O,this.crsPath=x||s.mX;const{requestInput:D={},detection:R={}}=v&&v.market||{},{language:L="",region:F="",geo_country:N=""}=D||{},{type:B=""}=R||{};this.marketRequestInputLanguage=L,this.marketRequestInputRegion=F,this.marketRequestInputGeoCountry=N,this.marketDetectionType=B,this.serviceUrlBase=e||d&&d.getAttribute(p.X8)&&new URL("",d.getAttribute(p.X8))||new URL("/service/",this.serviceDomainUrl),this.feedServiceUrlBase=this.serviceDomainUrl&&new URL("/service/",this.serviceDomainUrl)||void 0,this.hostPage=n.getHostPageFromUrl(l),this.isFrePage="1"===T.c.getQueryParameterByName("fre",l),this.userId=this.getUserMuid(),this.rootTelemetryId=d?Number(d.getAttribute(p.DB)):0;const j=d&&d.getAttribute(p.uw),$=d&&d.getAttribute(p.Kz);if(this.trackInfo={sitePage:{page_product:j,page_type:$}},this.setNavTargetHostName(),this.setTargetScope(),this.crsVersion=(0,E.W_)(this.crsVersion||"",this.currentRequestTargetScope&&this.currentRequestTargetScope.pageExperiments,this.appType||""),this.isGitConfigs=this.useGitConfigs(),this.configOrigins=this.setConfigOrigin(),"mmx"===this.appType&&A.Al&&!A.Al.IsMmxWwwContentRequest){const e=(0,b.Td)().endsWith(".cn")?"https://assets.msn.cn":"https://assets.msn.com";this.contentServiceUrlBase=new URL("/content/",e)}else this.contentServiceUrlBase=this.serviceDomainUrl?new URL("/content/",this.serviceDomainUrl):void 0;this.isMultiConfigRetrievalEnabled=this.useMultiConfigsRetrieval();const U=this.getConfigServiceBaseUrl(this.isMultiConfigRetrievalEnabled,t);this.configServiceBaseUrl=U?new URL("",U):null,this.environmentConfigUrl=this.serviceDomainUrl?new URL("/config/v1/",this.serviceDomainUrl):void 0,this.isDebug=(T.c.getQueryParameterByName("debug",l)||"").toLowerCase()in{1:1,true:1}||(T.c.getQueryParameterByName("item",l)||"").toLowerCase().indexOf("/debug")>0||a.includes("localhost"),this.showMnsCreatorDashboard=null!=T.c.getQueryParameterByName("mnsDash",l),this.oneServiceApiKey=this.getOneServiceApiKey(),this.enableFiveColLayout=!1,r&&(this.hostHeaderOverride=r);const H={appType:this.appType,flights:A.Al.CurrentFlights,itemOverrides:S},_=m&&(m.includes("vptest=1")||m.includes("reqsrc=vp")),W="edgeChromium"===this.appType&&!(0,y.N)();this.shouldUseFdheadQsp=_||(0,E.Bc)(H,W),this.oneServiceContentMarketQspKey=this.shouldUseFdheadQsp?"market":"cm"}getOneServiceApiKey(){var e;if(this.widgetAttributes&&this.widgetAttributes.feed&&this.widgetAttributes.feed.apiKey)return this.widgetAttributes.feed.apiKey;const t="0QfOX3Vn51YCzitbLaRkTTBadtWpgTN8NZLW0C1SEM";let i;switch(this.appType){case"windowsShell":case"windowsShellV2":i="pWw5OmQehOA0XNfgcgrTrwEJZJJJzE83ovtTQx6JRG";break;case"newsAndInterests":case"windowsNewsPlus":case"winWidgets":i="AEbyVYqTQAPvg4lWwMSFHaLkDzl3weRKKIDDInLQUj";break;case"edgeChromium":i="1hYoJsIRvPEnSkk0hlnJF2092mHqiz7xFenIFKa9uc";break;case"bingHomepage":case"distribution":i=A.Al.ClientSettings.pagetype===r.G.Lenovo?"OrorOEMX3w4Hsk49OXMM6YayCYQw3OHcpzqiXEk9xd":A.Al.ClientSettings.pagetype===r.G.EdgeWelcome?"oPFhbDSAghltCuG6UvQCcxmngSVye65eXQHHu3voxZ":"QMmdky7jrTlM4mWJmMYQTi71lp678KyZJBKHCAyKCg";break;case"sharedWidgets":i="hFWgtnoLG1BXruRRhEVJo5ACP8414XUG0Ric6JbyND";break;case"gaming":i="play"===(null===(e=this.currentRequestTargetScope)||void 0===e?void 0:e.pageType)?t:"Uj7u7bqBgMhDGBUVPSbcHUe0pU7X8TbVRviCO2fojo";break;case"travel":i="8RwD77wJgNQmmVBdGmZsK6vvPCrG58iRCQRoPsE4JJ";break;case"health":i="FywQv6H345wNCU4yKWraF2esI9qiMQFx90v53mMHrm";break;default:i=t}return i}getUserMuid(){let e;const t=(0,x.jG)();return(0,I.Z)(t)&&(e="m-"+t),e}getConfigServiceBaseUrl(e=!0,t=null){const i=this.currentRequestTargetScope&&this.currentRequestTargetScope.pageExperiments,n=(0,E.sW)(i,this.isChinaCompliance,this.appType),r=this.isGitConfigs?`${this.crsPath}${this.crsVersion||s.PQ}/config/`:`${this.crsPath}${e?"v2/":""}configindex/`;return t?t+r:(D&&D.env,(0,y.N)()&&(this.renderWidgets()||"sharedWidgets"===this.appType||"bingHomepage"===this.appType||"distribution"===this.appType||"gaming"===this.appType)?n?`${n}`+r:(this.crsDomain||"https://www.msn."+(this.IsChinaCompliance?"cn":"com"))+r:(n&&(this.crsRetryBaseUrl=(0,b.Dp)()?(0,b.Dp)()+r:null),n||(0,b.Dp)()?(n||(0,b.Dp)())+r:null))}useMultiConfigsRetrieval(){const e=(0,b.zp)();if(e){const t=T.c.getQueryParameterByName("isMultiConfigRetrievalEnabled",e);if(t)return"true"===t.toLocaleLowerCase()}return!this.featureFlags||!this.featureFlags.isMultiConfigRetrievalEnabled||"true"===this.featureFlags.isMultiConfigRetrievalEnabled}useGitConfigs(){const e=(0,b.zp)();if(e){const t=T.c.getQueryParameterByName("isGitConfig",e);if(t)return"true"===t.toLocaleLowerCase()}return(0,E.LB)(this.crsVersion,this.configIndexDocId,this.appType)}renderWidgets(){const e=(0,b.zp)();if(e){const t=T.c.getQueryParameterByName("renderWidget",e);if(t)return"true"===t.toLocaleLowerCase()}return!1}getAuthCookieName(){if(this.authCookieName)return this.authCookieName;let e;switch((A.Al&&A.Al.ClientSettings).apptype||""){case"windows":e=A.Al.ClientSettings.pagetype===r.G.Windows?"anon":"app_anon";break;case"aicharacter":case"bingHomepage":case"community":case"contentTools":case"finance":case"firstParty":case"gaming":case"health":case"homePage":case"hub":case"hybrid":case"microsoftNews":case"personalize":case"recipes":case"sharedWidgets":case"shopping":case"sports":case"traffic":case"travel":case"ugc":case"views":case"weather":default:e="anon";break;case"edge":case"edgeChromium":case"distribution":case"mmx":case"newsAndInterests":case"windowsNewsbar":case"windowsNewsPlus":case"winWidgets":case"windowsShell":case"windowsShellV2":case"office":case"channel":e="app_anon"}return e}setAccountInfoPromise(){this.ResolvedAccountInfo=null,this.AccountInfoPromise=new Promise((e=>{if(!((0,y.N)()&&window.chrome&&window.chrome.authPrivate&&window.chrome.authPrivate.getPrimaryAccountInfo))return e(null);const t=Math.round(performance.now());window.chrome.authPrivate.getPrimaryAccountInfo((i=>{const n=Math.round(performance.now());return(0,d.Ou)()["Auth.GetPrimaryAccountInfo"]=n-t,this.ResolvedAccountInfo=i,e(i)}))})),this.AccountInfoPromise}tryReformatGuid(e){if(e&&32===e.length){const t=e.match(/(\w{8})(\w{4})(\w{4})(\w{4})(\w{12})/i);t&&(e=t.slice(1).join("-"))}return e}setTargetScope(){if(!A.Al||!A.Al.ClientSettings)return;let e;const t=decodeURIComponent((0,x.ej)(a.IR.AppAnonCookieExists)),i=(0,x.ej)(p.nM),{child:n}=t&&(0,P.dW)(t)||{};e=t&&(1===n||i)?r.F.Kids:A.Al.ClientSettings.audienceMode||r.F.Adult;const{browser:o,deviceFormFactor:s,domain:c,ocid:d,os:l,pagetype:u}=A.Al.ClientSettings,g=A.Al.CurrentFlights.split(",");if(this.currentRequestTargetScope={audienceMode:e,browser:o,deviceFormFactor:s,domain:c,locale:{content:this.LocaleContentMarket,display:this.LocaleDisplayLanguage},ocid:d,os:l,platform:"web",pageType:u,pageExperiments:g},!this.currentRequestTargetScope.locale&&k.b.stringHasData(this.LocaleContentMarketString)){const e=this.LocaleContentMarketString.split("-");e.length>1&&(this.currentRequestTargetScope.locale={language:e[0],market:e[e.length-1],content:{language:e[0],market:e[e.length-1]},display:{language:e[0],market:e[e.length-1]}})}this.addWpoFlights()}setNavTargetHostName(){let{subDomain:e,domainName:t,topLevelDomain:i}={subDomain:h.WWW,domainName:m.MSN,topLevelDomain:f.COM};const n="homePage"!==this.appType&&A.Al&&A.Al.CurrentFlightSet&&A.Al.CurrentFlightSet.has("1s-viewurldomain");switch(this.environment){case g.q.prod:case g.q.staging:e=n?h.MicrosoftStart:h.WWW;break;case g.q.int1:e=n?h.MicrosoftStartINT1:h.INT1;break;case g.q.int:case g.q.intpr:case g.q.intperf:e=n?h.MicrosoftStartINT:h.INT}this.isChinaCompliance&&(i=f.CN),this.navTargetHost=`${e}.${t}.${i}`}getWpoModel(e){let t;return null!=e&&(t=(0,P.dW)(e)),t}addWpoFlights(){var e;if(!this.FeatureFlags||!this.FeatureFlags.wpoEnabled)return;const{pageExperiments:t}=this.currentRequestTargetScope;if(t&&t.includes("prg-wpo-stopwpocrs"))return;const i=this.getWpoModel(this.wpoData),n=(0,v.U)(i);if(!n||!n.length)return;const r=n.map((e=>e.toLowerCase()));((e=this.currentRequestTargetScope).pageExperiments||(e.pageExperiments=[])).push(...r)}getRunTimePropertyBag(e,t){const i={appType:this.appType};t&&(i.pcsVersion=t.v,i.pcsEnv=t.env);const{alias:n,v:r}=e||{};this.buildVersion=r||"",i.build=this.buildVersion,n&&(i.buildAlias=n);const o=A.Al.CurrentFlights;return o&&(o.includes("reduceapperror")||o.includes("reduceerrors"))&&(i.shouldDelayUntilLoadTime=!0,i.shouldSupressWarnings=!0),i}}const F=L.getInstance;let N=(0,C.h)(L)},64508:function(e,t,i){"use strict";i.d(t,{Qe:function(){return a},_Y:function(){return c}});var n=i(95527),r=i(46336),o=i(33379),s=i(2040);function a(){var e;return(0,o.N)()?(0,r.dW)(document.head.dataset.clientSettings||(null===(e=document.getElementsByClassName(n.fw)[0])||void 0===e?void 0:e.getAttribute(s.nr))):null}function c(e){if(!(0,o.N)()||!e)return;const t=(0,r.Vm)(e);t&&document.head.setAttribute(s.nr,t)}},53578:function(e,t,i){"use strict";var n;i.d(t,{Ak:function(){return s},I4:function(){return r},d3:function(){return o},iN:function(){return n},oD:function(){return a}}),function(e){e.GLOBAL="GLOBAL",e.GCC_MODERATE="GCC_MODERATE"}(n||(n={}));const r="d7b530a4-7680-4c23-a8bf-c52c121d2e87",o="https://enterprisenews.microsoft.com",s="EnterpriseOneService",a=87},5633:function(e,t,i){"use strict";var n;function r(e){switch(e){case n.prod:case n.staging:return n.prod;case n.int1:return n.int1;case n.int:case n.intpr:case n.intperf:return n.int;default:return null}}i.d(t,{q:function(){return n},s:function(){return r}}),function(e){e.prod="prod",e.staging="staging",e.int1="int1",e.int="int",e.intpr="intPR",e.intperf="intPerf"}(n||(n={}))},73252:function(e,t,i){"use strict";i.d(t,{nP:function(){return k},Al:function(){return A}});var n=i(81765),r=i(12108),o=i(27003),s=i(99590),a=i(12884),c=i(33379),d=i(2040),l=i(68848),u=i(58155),p=i(65337),g=i(93853),h=i(46336),m=i(26415),f=i(33954),v=i(53525);function y(e){return"shd_"+e}var b=i(53578),S=i(95527),C=i(65135);const w="__HeadDataInstance__";class T{constructor(e){this.enableCMSPPEConfigs=!1,this.initializeHeadData(e)}get Locale(){return this.locale}get MarketDir(){return this.marketDir}set MarketDir(e){this.marketDir=e}get CurrentFlights(){return this.currentFlights||""}set CurrentFlights(e){this.currentFlights=e,this.currentFlightSet=new Set((e||"").split(",")),this.setSweeperStoredHeadData(n.il.FlightIdKey,this.currentFlights)}get CurrentFlightSet(){return this.currentFlightSet}get ClientSettings(){return this.clientSettings}set ClientSettings(e){this.clientSettings=e}get Diagnostics(){return this.diagnostics}set Diagnostics(e){this.diagnostics=e}get EnableCMSPPEConfigs(){return this.enableCMSPPEConfigs}get EdgeNTPHeader(){return this.edgeNTPHeader}set EdgeNTPHeader(e){this.edgeNTPHeader=e}get UserIsSignedIn(){return this.userIsSignedIn}get IsPreload(){return this.isPreload}set IsPreload(e){this.isPreload=e}get IsPrerender(){return this.isPrerender}set IsPrerender(e){this.isPrerender=e}get IsBlendedEnterprise(){return this.isBlendedEnterprise}set IsBlendedEnterprise(e){this.isBlendedEnterprise=e}get IsMmxWwwContentRequest(){return this.isMmxWwwContentRequest}set IsMmxWwwContentRequest(e){this.isMmxWwwContentRequest=e}get IsServiceWorkerCache(){return this.isServiceWorkerCache}get LastKnownAppVersion(){return this.lastKnownAppVersion}get AnonCookieName(){return this.anonCookieName}set AnonCookieName(e){this.anonCookieName=e}get SsoComplete(){return this.ssoComplete}get AadState(){return this.aadState}set AadState(e){this.aadState=e}set LocaleName(e){this.locale=e}get SelectedFeedPivot(){return this.selectedFeedPivot}set SelectedFeedPivot(e){this.selectedFeedPivot=e}static getInstance(){return o.Gq.get(w,(()=>new T))}static resetInstance(e){const t=new T(e);return o.Gq.set(w,t),A=(0,s.h)(T),A}initializeHeadData(e){if(e)return void this.initializeFromData(e);if(this.newRidNeeded=void 0,this.lastUsedActivityIdBacking=void 0,this.locationSearch=(0,a.zp)(),this.htmlElement=(0,c.N)()?(0,a.SV)(d.x$.html)[0]:null,this.headElement=(0,c.N)()?(0,a.SV)(d.x$.head)[0]:null,this.applicationCache=(0,c.N)()?window.applicationCache:null,this.selectedFeedPivot=(0,c.N)()?(0,p.$o)().getItem(d.pv):null,this.widgetSettingsElement=(0,c.N)()?(0,a.ZI)(S.fw)[0]:null,!this.htmlElement||!this.headElement)return;this.initializeFromDom(),window&&window.navigator&&window.navigator.serviceWorker&&window.navigator.serviceWorker.controller&&(this.isServiceWorkerCache=!0),this.isServiceWorkerCache&&(this.initializeFromStorage(),this.initializeLastUsedActivityId());const t=(0,l.H)(this.clientSettings&&this.clientSettings.locale),i=this.clientSettings&&t&&t.language&&t.market;this.locale=i?(0,l.p)(t):"";const n=this.htmlElement.getAttribute(d.cp);this.marketDir=n&&n.toLocaleLowerCase()||"",this.setQueryItemProvidedValues();const r=(this.widgetSettingsElement||this.headElement).getAttribute(d.js);if(r){const e=(0,h.dW)(r);this.anonCookieName=e.anonckname,this.userIsSignedIn=1===e.signedin}u.c.getQueryParameterByName("backgroundpreload",this.locationSearch)&&"hidden"===document.visibilityState&&(this.isPreload=!0,this.logDocumentVisibility()),u.c.getQueryParameterByName("prerender",this.locationSearch)&&"hidden"===document.visibilityState&&(this.isPrerender=!0,this.logDocumentVisibility()),(0,c.N)()&&window.ShellFeedsApp&&window.ShellFeedsApp.shellFeedsExperienceInfo&&!window.ShellFeedsApp.shellFeedsExperienceInfo.isWebviewVisible&&0===window.ShellFeedsApp.shellFeedsExperienceInfo.buttonInteraction&&(this.isPreload=!0),this.setIsBlendedEnterprise(),this.setIsMmxWwwContentRequest()}get lastUsedActivityId(){if(this.lastUsedActivityIdBacking)return this.lastUsedActivityIdBacking;const e=this.getStoredActivityIdKey(),t=(0,p.$o)().getItem(e);return t&&(this.lastUsedActivityIdBacking=(0,h.dW)(t)),this.lastUsedActivityIdBacking}set lastUsedActivityId(e){const t=this.getStoredActivityIdKey();if(e){if(e.id&&e.ts){try{(0,p.$o)().setItem(t,JSON.stringify(e),!1)}catch(e){const t=e&&e.message;(0,C.dK)().then((()=>{C.M0.sendAppErrorEvent(Object.assign(Object.assign({},m.dw4),{message:t}))}))}this.lastUsedActivityIdBacking=e}}else(0,p.$o)().removeItem(t)}get storedHeadData(){return function(e){const t=y(e),i=(0,p.$o)().getItem(t);return i?(0,h.dW)(i):null}(this.clientSettings.pagetype)}set storedHeadData(e){!function(e,t){const i=y(e);t?(0,p.$o)().setItem(i,JSON.stringify(t)):(0,p.$o)().removeItem(i)}(this.clientSettings.pagetype,e)}initializeFromData(e){var t,i;this.clientSettings=e.clientSettings,this.edgeNTPHeader=e.edgeNTPHeader,this.selectedFeedPivot=null===(t=e.edgeNTPHeader)||void 0===t?void 0:t.selectedFeedPivot,this.setFlights(e.clientInfo),this.setQueryItemProvidedValues();const n=(0,l.H)(this.clientSettings&&(null===(i=this.clientSettings)||void 0===i?void 0:i.locale)),r=this.clientSettings&&n&&n.language&&n.market;this.locale=r?(0,l.p)(n):"",this.marketDir=e.marketDir&&e.marketDir.toLocaleLowerCase()||"",this.setIsBlendedEnterprise(),this.setIsMmxWwwContentRequest()}initializeFromDom(){this.setFlights((this.widgetSettingsElement||this.headElement).getAttribute(d.um));const e=(this.widgetSettingsElement||this.headElement).getAttribute(d.IX);this.diagnostics=(0,h.dW)(e);const t=(this.widgetSettingsElement||this.headElement).getAttribute(d.nr);if(!t)return;if(this.clientSettings=(0,h.dW)(t),!this.clientSettings)return;this.calculateForwardableParams();const{pagetype:i}=this.clientSettings;if(!i){const e=(this.widgetSettingsElement||this.headElement).getAttribute(d.AU);this.clientSettings.pagetype=null==e?void 0:e}if(i)try{const e=(0,p.$o)().getObject(d.It.pageVersions)||{};this.lastKnownAppVersion=e[i];const{bundleInfo:t}=this.clientSettings;t&&this.lastKnownAppVersion!==t.v&&(e[i]=t.v,(0,p.$o)().setObject(d.It.pageVersions,e))}catch(e){f.k.log(`${this.logPrefix()} couldn't complete local storage related operation.`)}}initializeFromStorage(){const e=this.storedHeadData;e&&this.populateFromApiResponse(e)}populateFromApiResponse(e){if(!e)return;const t=e.clientSettings,i=e.info;if(!t||!i)return;if(this.clientSettings.pageGenTime>=t.pageGenTime)return void(this.storedHeadData=null);const n=this.clientSettings.queryparams,r=this.clientSettings&&this.clientSettings.bundleInfo&&this.clientSettings.bundleInfo.v;this.clientSettings=t,this.clientSettings.bundleInfo=Object.assign(this.clientSettings.bundleInfo||{},{v:r}),this.clientSettings.queryparams=n,this.calculateForwardableParams(),this.setFlights(i)}calculateForwardableParams(){const e=this.clientSettings?this.clientSettings.queryparams:"";if(!e)return;const t=e.toLocaleLowerCase(),i=["fdhead","item"].map((e=>{const i=u.c.getQueryParameterByName(e,t);return i?`${e}=${encodeURIComponent(i)}`:null})).filter((e=>e));this.clientSettings.forwardablequeryparams=i.join("&")}initializeLastUsedActivityId(){const e=this.lastUsedActivityId,t=this.clientSettings.aid,i=(0,v.Z)(this.clientSettings.pageGenTime).getTime();this.newRidNeeded=!(!e||!i||e.id!==t),i&&(!e||i>e.ts)&&(this.lastUsedActivityId={id:t,ts:i})}setFlights(e){this.CurrentFlights=((/f:\s*([^;]+)/i.exec(e)||{})[1]||"").toLowerCase(),this.currentFlightSet=new Set(this.currentFlights.split(","))}setSweeperStoredHeadData(e,t){if(!e)return;const i=y("sweeper"),n=g.y7.getObject(i)||{};t?n[e]=t:delete n[e],g.y7.setObject(i,n)}setIsBlendedEnterprise(){this.IsBlendedEnterprise=this.clientSettings&&this.clientSettings.audienceMode===r.F.Enterprise&&this.clientSettings.browser&&"edgeChromium"===this.clientSettings.browser.browserType&&parseInt(this.clientSettings.browser.version)>=b.oD}setIsMmxWwwContentRequest(){this.isMmxWwwContentRequest=this.currentFlights&&this.currentFlights.includes("prg-mmxcontent-t")}setQueryItemProvidedValues(){const e=u.c.getParamsWithItems((0,a.zp)(),!0),t=e.find((e=>"cms"===e.key));this.enableCMSPPEConfigs=t&&"ppe"===t.value,this.setCurrentFlightsTestOverride(e)}setCurrentFlightsTestOverride(e){if((0,a.Td)().toLowerCase().includes("localhost")&&e){const t=e.find((e=>"flights"===e.key));t&&(this.currentFlights=t.value,this.currentFlightSet=new Set(this.currentFlights.split(",")))}}getStoredActivityIdKey(){return"sai_"+this.clientSettings.pagetype}logPrefix(){return"HeadData:"+((0,c.N)()?"":` [Head:${this.widgetSettingsElement||this.headElement}] and [Html:${this.htmlElement}]`)}logDocumentVisibility(){(0,c.N)()&&((0,m.GQ)({isVisible:"visible"===document.visibilityState}),document.addEventListener("visibilitychange",(()=>{(0,m.GQ)({isVisible:"visible"===document.visibilityState})})))}}const k=T.getInstance;let A=(0,s.h)(T)},23401:function(e,t,i){"use strict";var n;i.d(t,{I:function(){return n}}),function(e){e.BR="pt-br",e.DEDE="de-de",e.ENAU="en-au",e.ENCA="en-ca",e.ENGB="en-gb",e.ENIN="en-in",e.ENUS="en-us",e.ENIE="en-ie",e.ESES="es-es",e.ESMX="es-mx",e.FRCA="fr-ca",e.FRFR="fr-fr",e.ITIT="it-it",e.IN="en-in",e.HUHU="hu-hu",e.KOKR="ko-kr",e.JAJP="ja-jp",e.PLPL="pl-pl",e.PTBR="pt-br",e.RURU="ru-ru",e.RUXL="ru-xl",e.ZHCN="zh-cn"}(n||(n={}))},90846:function(e,t,i){"use strict";i.d(t,{G5:function(){return T},P8:function(){return I},TJ:function(){return R},aS:function(){return F},hk:function(){return M},iA:function(){return x},iG:function(){return O},jC:function(){return P},lT:function(){return E},me:function(){return N},o1:function(){return j},qn:function(){return k},tx:function(){return B},yd:function(){return H}});var n=i(2040),r=i(64508),o=i(56786),s=i(37735),a=i(33379),c=i(12884),d=i(16854),l=i(95527),u=i(61366),p=i(49926),g=i(13110),h=i(33954),m=i(76323),f=i(28973);const v=(0,r.Qe)()||{},y={newsAndInterests:1,windowsNewsbar:1,windowsNewsPlus:1,winWidgets:1,windowsShell:1,windowsShellV2:1,distribution:1,superApp:1,channel:1},b={edgeChromium:1},S={winWidgets:1},C={shopping:1,ugc:1},w=(0,m.p)((()=>v&&v.apptype)),T=(0,m.p)((()=>!!(I()&&((0,s.x6)()||!O())))),k=(0,m.p)((()=>(0,a.N)()&&w()in S)),A=(0,m.p)((()=>(0,a.N)()&&!(0,f.pE)()&&!(w()in y)&&!R()&&!L())),I=(0,m.p)((()=>A()&&!(w()in b))),P=(0,m.p)((()=>A()&&(!(w()in b)||!(0,s.mb)()))),E=(0,m.p)((()=>A()&&!$()&&!U()));function O(){return!!(0,p.AE)(n.Li)}function M(){return U()||$()}function x(e){return D(e)&&((0,g.Nv)("prg-ntp-uat")||(0,g.Nv)("prg-ntp-uat-w")||(0,g.Nv)("prg-ntp-uat-nf"))}function D(e){return!("edgeChromium"!=w()||e!=u.F.Adult&&e!=u.F.Kids||!(0,p.AE)(n.d_)&&!(0,p.AE)(n.OJ))}(0,m.p)((()=>{const e=(0,c.zw)().toLowerCase().endsWith(".cn");return A()&&(!e||e&&!(0,g.Nv)("prg-no-auth-zhcn"))}));const R=(0,m.p)((()=>"edgeChromium"!==w()&&!(w()in C)&&function(){const{browser:e}=v,{browserType:t=""}=e||{};return!!/edgeChromium/i.test(t)}()&&function(){const e=new URLSearchParams((0,c.zp)()).get("ocid")||(null==v?void 0:v.ocid),t=null==e?void 0:e.toLowerCase();return!(n.Oj.has(t)&&"windows"!==w()||n.up.has(t))}())),L=()=>(0,a.N)()&&document&&document.body&&document.body.getElementsByClassName(l.Di).length>0;function F(){const e=(0,o.nh)();if(e)return h.k.log("dual-auth: tryGet1SAuthToken returned live tokens"),e;const t=(0,o.Wl)();if(t)return h.k.log(`dual-auth: tryGet1SAuthToken returned cached tokens that are ${(0,o.wX)()}`),t;h.k.log("dual-auth: tryGet1SAuthToken returned empty tokens")}function N(e){const t={};return e&&(t[n.Yu.authorization]=`Bearer ${e}`),t}function B(e){const t={};return e&&(t[n.Yu.entAuthorization]=e),t}function j(e){const t={};return e&&(t[n.Yu.rpsToken]=e),t}function $(){return I()&&(0,d.YU)()||T()&&(T()&&!(0,d.YU)()&&(0,s.x6)()&&("expired"==(0,o.wX)()||(0,d.hU)())||(0,d.SY)()||(0,d.jG)())}function U(){return I()&&!(0,s.x6)()&&(0,d.KK)()}function H(){(0,s.$v)(),T.cache.clear()}},56786:function(e,t,i){"use strict";i.d(t,{Wl:function(){return p},nh:function(){return f},tx:function(){return m},wX:function(){return g}});var n=i(33799),r=i(37735),o=i(65337),s=i(13110);const a="1s-tokens",c=12096e5;var d;let l,u;function p(){return l=h(),l&&l.accessToken?l:void 0}function g(){if(l=h(),!l)return"notAvailable";const e=l.expiresOn,t=new Date(e),i="expired";if(!t.getTime())return i;const o=new Date,a="valid";if(t>o)return a;if((0,s.Nv)("prg-noext"))return i;{const e=(0,r.x6)();if(e&&e.account_type===n.Qm.MSA){if(new Date(t.getTime()+c)>o)return a}}return i}function h(){return l=l||void 0===l&&(0,o.$o)().getObject(a)||null,l}function m(e){l=void 0,u=e;const{accessToken:t,expiresOn:i}=e||{};t&&i?(0,o.$o)().setObject(a,{accessToken:t,expiresOn:i}):(0,o.$o)().removeItem(a)}function f(){return u}!function(e){e.NotAvailable="notAvailable",e.Expired="expired",e.Valid="valid"}(d||(d={}))},37735:function(e,t,i){"use strict";i.d(t,{$v:function(){return l},ac:function(){return a},mb:function(){return d},sM:function(){return s},x6:function(){return c}});var n=i(49926),r=i(76323),o=i(46336);const s="currentaccount",a=365,c=(0,r.p)((()=>{const e=(0,n.AE)(s,!0),t=e&&(0,o.dW)(e),{login_hint:i}=t||{};return i&&t})),d=(0,r.p)((()=>!!(0,n.AE)(s)));function l(){d.cache.clear(),c.cache.clear()}},53079:function(e,t,i){"use strict";i.d(t,{KO:function(){return p},XS:function(){return u},g8:function(){return l}});var n=i(33799),r=i(83097),o=i(49926),s=i(46336);const a=()=>{const e=(()=>{const e=(0,o.AE)("els",!0),t=e&&(0,s.dW)(e);return t&&Object.prototype.hasOwnProperty.call(t,"account_type")&&t})();if(e){if("MSA"===e.account_type)return n.Qm.MSA;if("AAD"===e.account_type)return n.Qm.AAD}};var c=i(40504),d=i(76323);const l="lt",u=(0,d.p)((()=>{let e,t;return(0,c.vs)()?(e=n.Hy.SignedIn,t=(0,c.Yn)()):(0,o.AE)("els")?(t=a(),e=t?n.Hy.SignedIn:n.Hy.NotSignedIn):(0,o.AE)(l)||(0,o.AE)(r.IR.AppAnonCookieExists)?(t=n.Qm.MSA,e=n.Hy.SignedIn):e=n.Hy.NotSignedIn,{isSignedIn:e,accountType:t}}));function p(){u.cache.clear()}},40504:function(e,t,i){"use strict";i.d(t,{E1:function(){return c},Yn:function(){return a},vs:function(){return d}});var n=i(33799),r=i(49926),o=i(46336);const s=()=>{const e=(0,r.AE)("elt",!0),t=e&&(0,o.dW)(e),{access_token:i,account_type:n,login_hint:s}=t||{};return(i||n||s)&&t},a=()=>{const e=s();if(e){if("MSA"===e.account_type)return n.Qm.MSA;if("AAD"===e.account_type)return n.Qm.AAD}},c=()=>{const e=s();return e&&e.login_hint},d=()=>!!(0,r.AE)("elt")},13110:function(e,t,i){"use strict";i.d(t,{Nv:function(){return a}});var n=i(27003),r=i(33379);const o="__PageExperimentInstance__";function s(e){n.Gq.set(o,e)}function a(e){!n.Gq.has(o)&&(0,r.N)()&&s(c(document.head.dataset.info||""));const t=n.Gq.get(o);return t&&t.has(e)}function c(e){const t=(e||"").replace(/(^f:|;.*$)/g,"").split(",");return new Set(t)}},392:function(e,t,i){"use strict";i.d(t,{E:function(){return s},M:function(){return n}});var n,r=i(90846),o=i(76323);!function(e){e.App="app",e.UseEdgeId="edgeid",e.Web="web"}(n||(n={}));const s=(0,o.p)((()=>(0,r.TJ)()?n.UseEdgeId:(0,r.P8)()?n.Web:n.App))},73803:function(e,t,i){"use strict";i.d(t,{EX:function(){return g},YY:function(){return p},u6:function(){return l}});var n=i(2040),r=i(84169),o=i(31573),s=i(49926),a=i(76323),c=i(46336),d=i(67462);function l(e){const t=e||(0,o.g8)()||"al_app_anon",i=u();return!!(i&&(["anon","al_anon"].includes(t)&&i.AL_ANON||["app_anon","al_app_anon"].includes(t)&&i.AL_APP_ANON))}const u=(0,a.p)((()=>{const e=(0,s.AE)(n.tX,!0);return(0,c.dW)(e)}));function p(){(0,d.sq)(n.tX,"",-1,r.jG.HostPage.topDomain,"/"),g()}function g(){u.cache.clear()}},16854:function(e,t,i){"use strict";i.d(t,{KK:function(){return w},SY:function(){return m},YU:function(){return g},bf:function(){return f},bq:function(){return y},dy:function(){return h},hU:function(){return v},hq:function(){return S},jG:function(){return b},m5:function(){return C}});var n=i(8228),r=i(33379),o=i(13110),s=i(76323),a=i(46336);const c="uxlogin",d="uxlogout",l="uxedit",u="useRedirect",p="uxswitch",g=(0,s.p)((()=>{const e=(0,n.U)();return e&&"1"===e.getItem(c)||(0,r.N)()&&location.search&&location.search.includes("uxlogin=1")}));function h(){const e=(0,n.U)();e&&g()&&(e.removeItem(c),g.cache.clear(),console.log("dual-auth: Removing uxlogin marker"))}const m=(0,s.p)((()=>{const e=(0,n.N)();return e&&!!e.getItem(d)}));function f(){const e=(0,n.N)();e&&m()&&(e.removeItem(d),m.cache.clear(),console.log("dual-auth: Removing uxlogout marker"))}const v=(0,s.p)((()=>{const e=(0,n.U)();return e&&"1"===e.getItem(l)}));function y(){const e=(0,n.U)();e&&v()&&(e.removeItem(l),v.cache.clear(),console.log("dual-auth: Removing uxedit marker"))}const b=(0,s.p)((()=>{const e=(0,n.U)();return!(0,o.Nv)("prg-noredirect")&&e&&"1"===e.getItem(u)&&function(){const e=document.head.dataset.clientSettings||"",{browser:t}=(0,a.dW)(e)||{},{browserType:i=""}=t||{};return!!/safari/i.test(i)}()}));function S(){const e=(0,n.U)();e&&"1"===e.getItem(u)&&(e.removeItem(u),b.cache.clear(),console.log("dual-auth: Removing useRedirect API marker"))}function C(){const e=(0,n.U)();e&&e.setItem(u,"1"),b.cache.clear(),console.log("dual-auth: Setting useRedirect API marker")}const w=(0,s.p)((()=>{const e=(0,n.U)();return e&&"1"===e.getItem(p)}))},8158:function(e,t,i){"use strict";i.d(t,{n:function(){return n}});var n,r=i(33940);!function(e){const t={};e.loadExperience=e=>(0,r.mG)(this,void 0,void 0,(function*(){const i=t[e];if(!i)throw new Error(`Attempted to load unknown dynamic bundle "${e}". Make sure it's a registered dynamic experience bundle.`);return i()})),e.registerExperience=(e,i)=>{t[e]=i},e.hasExperienceRegistered=e=>!!t[e]}(n||(n={}))},89638:function(e,t,i){"use strict";i.d(t,{U:function(){return Te}});var n=i(33940),r=i(21050),o=i(33954),s=i(26415),a=i(68364),c=i(84169),d=i(5633),l=i(32181),u=i(94788),p=i(98878),g=i(58155),h=i(32050),m=i(88352),f=i(65337),v=i(27003),y=i(99590),b=i(12884),S=i(33379),C=i(30291),w=i(79022),T=i(13578),k=i(92170),A=i(82855);class I extends Error{constructor(e,t){super(e),this.isNetworkFailure=t}}var P=i(65135);const E="-start",O="-end",M={},x={};let D;function R(e){if(e.endsWith(E)){e=e.slice(0,e.length-E.length);const t={endMeasure:D&&D.startMeasure(e).endMeasure,startTime:performance.now()};M[e]=t}else if(e.endsWith(O)){if(e=e.slice(0,e.length-O.length),M[e]){const{endMeasure:t,startTime:i}=M[e],n=Math.round(performance.now()-i);return x[e]=n,t&&t(),{name:e,timeTaken:n}}}else;}var L=i(68848),F=i(63045),N=i(38895);const B="feature-manifests",j="loc-manifests",$="feature-configs",U="loc-configs",H="default";var _,W;!function(e){e.idbStoreName="Configurations_12",e.idbName="wwConfigs",e.configStalenessDuration=6048e5,e.serverLruConfigCacheMax=10240,e.idbInitPromiseNameKey="initializeIdbKey",e.idbReadPromiseNameKey="readConfigsFromIdbKey",e.idbWritePromiseNameKey="writeConfigsToIndexedDbKey"}(_||(_={})),function(e){e.fromInMemoryCache="config.memory",e.fromServerCache="config.server",e.fromNetwork="config.network"}(W||(W={}));const z=new class{constructor(){this._mocksEnabled=!1,this._shouldInitializeMockMgrConfig=!1,this._mockConfigDictionary={},this._mocksEnabled=this.areMocksEnabled(),this._shouldInitializeMockMgrConfig&&(this._mockConfigDictionary["MockManager/default"]="MockManager/default")}get mockConfigDictionary(){return this._mockConfigDictionary}get mocksEnabled(){return this._mocksEnabled}initialize(e){if(!e)return void this.addMockQspToDictionary();const t=[];if(new URLSearchParams((0,b.zp)()).getAll("mock").forEach((e=>{e.trim().split(",").forEach((e=>{t.indexOf(e)<0&&t.push(e)}))})),0===t.length)return;const i=e&&e.scenarios;for(const e in i)if(i[e]&&t.indexOf(e)>-1){i[e].forEach((e=>{const{experienceType:t,instanceSrc:i}=e.source.configLink,{experienceType:n,instanceSrc:r}=e.target.configRef;this._mockConfigDictionary[`${t}/${i}`]=`${n}/${r}`}))}this.addMockQspToDictionary()}areMocksEnabled(){const e=new URLSearchParams((0,b.zp)());return this._shouldInitializeMockMgrConfig=!!e.get("mock"),this._shouldInitializeMockMgrConfig||e.getAll("item").some((e=>/^mock:/.test(e)))}addMockQspToDictionary(){new URLSearchParams((0,b.zp)()).getAll("item").filter((e=>/^mock:/.test(e))).forEach((e=>{const[t,i]=e.split(":"),[n,r]=i.split("|");this._mockConfigDictionary[n]=r}))}},G=/^\d{8}\.\d+$/;function V(e,t){if(!e)return;const{experienceType:i,instanceSrc:n,sharedNs:r}=e,o=[t,i,n];return r&&o.push(r),o.map((e=>e||"")).join("/").toLowerCase()}function q(e){if(!e)return null;if(e.match("^shared/")){const[t,i,n,r]=e.split("/");return{experienceType:n,instanceSrc:r,sharedNs:i}}{const[t,i]=e.split("/");return{experienceType:t,instanceSrc:i}}}function Z(e){const t=new Set;if(e&&e.properties)try{K(e.properties,t)}catch(e){}return t}function K(e,t){const i=e.configRef;i&&i.experienceType&&t.add(i);for(const i of Object.values(e))"object"==typeof i&&i&&K(i,t)}function Q(e,t=!1){if(!e)return;const i=(t?H:e.instanceSrc)||H;return!e.sharedNs||t?`${e.experienceType}/${i}`:`shared/${e.sharedNs}/${e.experienceType}/${i}`}function J(e,t){e&&e(t)}function X(e,t){return function(e){return e===$||e===B}(e)?Y(t&&t.feature):Y(t&&t.loc)}function Y(e){return e===F.w.Local}function ee(e,t,i){let n=!1;const r=z.mocksEnabled&&z.mockConfigDictionary&&z.mockConfigDictionary[t];let o;r&&(t=r,n=!0),o=n?"mock":e===U?"dev/loc":"prod";return`${o}/${/^shared/.test(t)?t:`${i}/${t}`}`}function te(e,t){return e&&e.length>0&&e.includes(t)}var ie=i(57967);function ne(e,t,i){return Object.assign(Object.assign({},e),{message:t||e.message,pb:i?Object.assign(Object.assign({},e.pb),{customMessage:i}):e.pb})}class re{constructor(){this.idb=indexedDB}get supported(){return!!this.idb}get isGetAllAllowed(){return!(!IDBObjectStore.prototype||!IDBObjectStore.prototype.getAll)}_setIndexedDb(e){this.idb=e}_getIdbPromise(){return this.idbPromise}getObject(e){return(0,n.mG)(this,void 0,void 0,(function*(){let t;return yield this.withIdbStore("readonly","getObject",(i=>{t=i.get(e)})),t.result}))}getAll(){return(0,n.mG)(this,void 0,void 0,(function*(){let e;return yield this.withIdbStore("readonly","getAll",(t=>{e=t.getAll()})),e.result}))}getAllObjects(){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.isGetAllAllowed)return this.getAll();const e=[];return yield this.withIdbStore("readonly","getAllObjects",(t=>{t.openCursor().onsuccess=function(t){const i=t.target&&t.target.result?t.target.result:void 0;i&&i.value&&(e.push(i.value),i.continue())}})),e}))}setObject(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return yield this.withIdbStore("readwrite","setObject",(i=>{i.put(t,e)}))}))}removeObject(e){return(0,n.mG)(this,void 0,void 0,(function*(){return yield this.withIdbStore("readwrite","removeObject",(t=>{t.delete(e)}))}))}clearObjects(){return(0,n.mG)(this,void 0,void 0,(function*(){return yield this.withIdbStore("readwrite","clearObjects",(e=>{e.clear()}))}))}initializeIndexedDb(e=1,t="Default",i="MicrosoftNews",r=null){return(0,n.mG)(this,void 0,void 0,(function*(){this.storeName=t,this.idbPromise=r||new Promise(((n,r)=>{const o=this.idb.open(i,e);o.onerror=()=>{r(o.error)},o.onsuccess=()=>{n(o.result)},o.onupgradeneeded=()=>{o.result.createObjectStore(t)}}))}))}withIdbStore(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){return this.idbPromise.then((t=>new Promise(((n,r)=>{const o=t.transaction(this.storeName,e);o.oncomplete=()=>{n()},o.onabort=o.onerror=()=>r(o.error),i(o.objectStore(this.storeName))}))))}))}}var oe=i(9791);class se{constructor(e,t=!1){if(this.environment=e,this.enableConfigCaching=this.useConfigCaching(),this.stalenessCheckTimestamp=(new Date).getTime(),this.indexedDbMap=new Map,this.readConfigsFromIdb=(0,oe.Z)(this._readConfigsFromIdb),!e||!e.targetScope||!e.appType)throw new Error("ResolverEnvironment or targetScope or appType does not exist.");this.initializeIdb=(0,oe.Z)(this.initializeIdb),this.resolverEnvironment=e,this.indexedDb=new re,t&&this.initializeIdb()}useConfigCaching(){const e=this.resolverEnvironment&&this.resolverEnvironment.configServiceParameters&&this.resolverEnvironment.queryParams;return!e||!e.enableConfigCaching||"true"===e.enableConfigCaching}tryGetConfigSync(e){if(e){const t=V(e,this.resolverEnvironment.appType);return this.indexedDbMap.get(t)}}getConfig(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!e)return;const t=V(e,this.resolverEnvironment.appType);return this.indexedDbMap.has(t)||(yield this.readConfigsFromIdb()),this.indexedDbMap.get(t)}))}updateCache(e){return(0,n.mG)(this,void 0,void 0,(function*(){e&&(e.forEach(((e,t)=>{if(e){const i={storageTimestamp:this.stalenessCheckTimestamp,configRefCacheKey:t,properties:e.properties};this.indexedDbMap.set(t,i)}})),yield this.writeConfigMapToIdb())}))}initializeIdb(){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.enableConfigCaching)try{const e=this.resolverEnvironment.configCacheProperties&&this.resolverEnvironment.configCacheProperties.idbConfigOpenPromise;yield this.indexedDb.initializeIndexedDb(1,_.idbStoreName,_.idbName,e),this.indexedDbInitialized=!0,this.logMessage("IndexedDB initialized.")}catch(e){this.enableConfigCaching=!1,this.sendAppError(ne(ie.W1.IndexedDbInitFailed,"Failed to init configs IndexedDB",e))}}))}_readConfigsFromIdb(){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.enableConfigCaching){this.indexedDbInitialized||(yield this.initializeIdb());try{const e=this.generateIdbKey();let t,i;const{idbConfigLookup:n=null,idbConfigReadPromise:r=null}=this.resolverEnvironment.configCacheProperties||{};t=(n||{})[e],t?i="pre-initialized config cache":r?(i="pre-initialized IndexedDb read",yield r,t=(n||{})[e]):(i="IndexedDb bulk read",t=yield this.indexedDb.getObject(e)),t?(t.forEach((e=>{e.configRefCacheKey&&!this.isConfigStale(e.storageTimestamp)&&this.indexedDbMap.set(e.configRefCacheKey,e)})),this.logMessage(`readConfigsFromIdb: Configs in IndexedDB: ${t.size}. Configs in memory: ${this.indexedDbMap.size}. CacheSource: ${i}.`)):this.logMessage(`readConfigsFromIdb: Didn't find any config in IndexedDB. CacheSource: ${i}`)}catch(e){this.sendAppError(ne(ie.W1.IndexedDbReadFailed,"IndexedDb Configs read failed",e))}}}))}writeConfigMapToIdb(){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.enableConfigCaching&&this.indexedDbMap){this.indexedDbInitialized||(yield this.initializeIdb());try{const e=this.generateIdbKey();yield this.indexedDb.setObject(e,this.indexedDbMap),this.logMessage("writeConfigMapToIdb: completed")}catch(e){this.sendAppError(ne(ie.W1.IndexedDbWriteFailed,"Failed to write configMap to indexedDb",e))}}}))}generateIdbKey(){const{audienceMode:e="",locale:t={},pageType:i=""}=this.resolverEnvironment.targetScope||{},n=t.content||t,{language:r,market:o}=n;return[e,r,o,i,this.resolverEnvironment.appType||""].map((e=>e||"")).join("|").toLowerCase()}isConfigStale(e){return!e||this.stalenessCheckTimestamp-e>_.configStalenessDuration}sendAppError(e){this.resolverEnvironment.appErrorCallback&&this.resolverEnvironment.appErrorCallback(e)}logMessage(e){this.resolverEnvironment.loggerCallback&&this.resolverEnvironment.loggerCallback(e)}}var ae=i(68679);class ce{constructor(e){if(this.resolverEnvironment=e,this.configMap=new Map,this.enableConfigService=!0,this.skipBelowTheFold=!1,this.configPromiseMap=new Map,this._shouldTryFallbackResolver=!1,this._hadNetworkError=!1,this._shouldUseCdnFallback=!1,this._initialCrsFetch=!0,this._useAkamaiLogic=!1,this.getCacheKeyFromConfigRef=e=>V(e,this.resolverEnvironment.appType),!(e&&e.configServiceParameters&&e.appType&&e.configServiceParameters.configServiceBaseUrl&&e.targetScope))throw this.enableConfigService=!1,new Error("ResolverEnvironment or configServiceParameters or targetScope does not exist.");e.segmentPlugins&&e.segmentPlugins.skipBelowTheFold&&(this.skipBelowTheFold=!0)}get hadNetworkError(){return this._hadNetworkError}get shouldTryFallbackResolver(){return this._shouldTryFallbackResolver}get configServiceEnabled(){return this.enableConfigService}get configServiceQueryParams(){return this.configServiceParams}get crsActivityId(){return this._crsActivityId}initialize(){return(0,n.mG)(this,void 0,void 0,(function*(){this.shouldUseConfigService(),yield this.setConfigServiceParams()}))}setConfigServiceParams(){return(0,n.mG)(this,void 0,void 0,(function*(){const{appType:e,configServiceParameters:t,targetScope:i}=this.resolverEnvironment,{maxDepth:n}=t;let{buildVersion:r}=t,o=`apptype=${e}`;o+=`&v=${r}`;const s=function(e,t){try{if(e&&e.pageExperiments&&e.pageExperiments.includes("prg-crsfdheadrem")&&"weather"!==t&&"finance"!==t){const t=Object.assign({},e);return t.pageExperiments=[],t}}catch(e){}return e}(i,e);o+="&targetScope="+JSON.stringify(s),n&&(o+=`&maxDepth=${n}`),this.skipBelowTheFold&&(o+="&skipBelowTheFold=true"),this.containsDevOnlyQueryParameters()&&(o+="&citem=dev:true"),this.configServiceParams=o}))}sendPerfMarker(e){this.resolverEnvironment.perfMarkerCallback&&this.resolverEnvironment.perfMarkerCallback(e)}shouldUseConfigService(){const e=this.resolverEnvironment&&this.resolverEnvironment.configServiceParameters&&this.resolverEnvironment.queryParams;e&&e.enableConfigService&&(this.enableConfigService="true"===e.enableConfigService)}containsDevOnlyQueryParameters(){const e=this.resolverEnvironment.queryParams;if(!e)return!1;const t=e.item;if(t&&t.length>0)return!0;if(e.citem)return!0;return!!e.pcsonly}getConfigMap(){return this.configMap}tryGetConfigSync(e){if(e){const t=this.getCacheKeyFromConfigRef(e);return this.configMap.get(t)}}getConfig(e){return(0,n.mG)(this,void 0,void 0,(function*(){const{appType:t,configServiceParameters:i,targetScope:r}=this.resolverEnvironment;if(!i||!r||!e)return Promise.reject(Error("Either of configServiceParameters, targetScope or configRef is not set correctly."));if(!this.enableConfigService)return void(this._shouldTryFallbackResolver=!0);const o=this.getCacheKeyFromConfigRef(e);if(this.configMap.has(o))return this.configMap.get(o);if(this.configPromiseMap.has(o))return this.configPromiseMap.get(o);const s=new Promise(((i,s)=>(0,n.mG)(this,void 0,void 0,(function*(){try{this._useAkamaiLogic=function(e,t){const i="edgeChromium"===t,n="windowsShell"===t||"windowsShellV2"===t,r="newsAndInterests"===t||"windowsNewsPlus"===t||"winWidgets"===t,{pageExperiments:o,locale:s}=e||{},a=s&&s.market&&"cn"===s.market.toLowerCase();return!!(a&&i&&te(o,N.Js))||!a&&(i||n&&te(o,N.x7)||r&&te(o,N.cX))}(r,t),this._useAkamaiLogic&&this._initialCrsFetch&&this.sendPerfMarker("AkCrsConfig-start"),yield this.getConfigTreeFromCrs(e),this._useAkamaiLogic&&this._initialCrsFetch&&this.sendPerfMarker("AkCrsConfig-end"),this._shouldTryFallbackResolver&&this._useAkamaiLogic&&(this._shouldUseCdnFallback=!0,this._shouldTryFallbackResolver=!1,this._initialCrsFetch&&this.sendPerfMarker("FDCrsConfig-start"),yield this.getConfigTreeFromCrs(e),this._initialCrsFetch&&this.sendPerfMarker("FDCrsConfig-end"),this.sendAppError(ne(ie.Sp,"CRS-AFD Retry",`Retryring to call CRS-AFD with ConfigRef ${this.getCacheKeyFromConfigRef(e)} because Akamai call had an error.`))),this._initialCrsFetch=!1,i(this.configMap.get(o))}catch(e){this.sendAppError(ne(ie.W1.GetConfigException,`Exception in getConfig for ${o}`,e)),s(e)}finally{this.configPromiseMap.delete(o)}}))));return this.configPromiseMap.set(o,s),s}))}getConfigTreeFromCrs(e){return(0,n.mG)(this,void 0,void 0,(function*(){let t="";try{let i;const n=this.getCrsTimeout(),r=performance.now(),o=new Promise((o=>{i=setTimeout((()=>{const i=Object.assign(Object.assign({},ie.yL),{pb:Object.assign(Object.assign({},ie.yL.pb),{errorBehavior:ae.C.Fallback,isWebWorker:this.resolverEnvironment.isThisWebWorkerThread})});return this.sendAppError(ne(i,"CRS fetch timeout",`ConfigRef: ${this.getCacheKeyFromConfigRef(e)}. CrsUrl: ${t||""}, timeElapsed: ${performance.now()-r}`)),o(null)}),n)}));t=this.generateCrsUrl(e);const s=this.downloadFromCrs(t,n).then((e=>(i&&clearTimeout(i),e))),a=yield Promise.race([s,o]),c=a&&a.configs;if(!c||(0,T.Z)(c))return void(this._shouldTryFallbackResolver=!0);this._shouldTryFallbackResolver=!1;for(const e in c){const t=c[e];if(t&&t.properties){const i=this.getCacheKeyFromConfigRef(q(e));this.configMap.set(i,t)}}}catch(i){this._shouldTryFallbackResolver=!0,this.sendAppError(ne(ie.W1.CrsFetchError,"CRS fetch network error",`ConfigRef: ${this.getCacheKeyFromConfigRef(e)}. CrsFetchNetworkError: ${this._hadNetworkError}. Error: ${i}. CrsUrl: ${t||""}`))}}))}setDownloadFromCrsBeforeNetwork(e){this.downloadFromCrsBeforeNetwork=e}downloadFromCrs(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.downloadFromCrsBeforeNetwork){const t=yield this.downloadFromCrsBeforeNetwork(e);if(t)return t}const{abortableFetchCallback:i,hostHeaderOverride:n,isWebWorkerPresent:r,isThisWebWorkerThread:o}=this.resolverEnvironment,s=!(0,S.N)()&&n?{headers:{host:n}}:void 0;return(i?i(e,t,s):fetch(e)).then((t=>{if(this._crsActivityId=function(e){try{if(e&&"string"==typeof e)return e.match(/Ref A: [A-Z0-9]+/)[0].substring(7)}catch(e){}return""}(t.headers.get("x-msedge-ref")||""),t.ok)return t.json();const i=t.headers.get("X-Crs-BuildVersion")||"",n=t.headers.get("X-Crs-Env")||"",s=t.headers.get("x-msedge-ref")||"",a=`Url: ${e}, CRS Version: ${i}, CRS Env: ${n}, isWebWorkerPresent: ${r}`,c=Object.assign(Object.assign({},ie.Wc),{pb:Object.assign(Object.assign({},ie.Wc.pb),{userImpacting:!0,errorBehavior:ae.C.Fallback,isWebWorker:o,fetchNetworkResponse:{activityId:s,statusCode:t.status}})});return this.sendAppError(ne(c,"CRS returned non-200 response",a)),Promise.resolve()})).catch((e=>{throw this._shouldTryFallbackResolver=!1,this._hadNetworkError=!0,e}))}))}generateCrsUrl(e){const t=e.sharedNs?`&sharedNs=${e.sharedNs}`:"",i=`?${`expType=${e.experienceType}&expInstance=${e.instanceSrc}${t}`}&${this.configServiceParams}`;return(this._shouldUseCdnFallback?new URL(i,this.resolverEnvironment.crsRetryBaseUrl):new URL(i,this.resolverEnvironment.configServiceParameters.configServiceBaseUrl)).toString()}sendAppError(e){this.resolverEnvironment.appErrorCallback&&this.resolverEnvironment.appErrorCallback(e)}getCrsTimeout(){const e=[{flightId:N.x7,timeout:5e3},{flightId:N.cX,timeout:5e3}];if(!this._shouldUseCdnFallback){const t=this.resolverEnvironment&&this.resolverEnvironment.targetScope&&this.resolverEnvironment.targetScope.pageExperiments,{appType:i}=this.resolverEnvironment||{};if("edgeChromium"===i&&this._useAkamaiLogic&&(0,S.N)())return 5e3;for(const i of e){const{flightId:e,timeout:n}=i;if(te(t,e)&&this._useAkamaiLogic)return n}}return(0,S.N)()?1e4:2e3}}let de=(e,t,i)=>(0,n.mG)(void 0,void 0,void 0,(function*(){if(!e)throw new Error("BlobFetcher.ts: Fetch Error: Relative Url is null or undefined.");const n=X(t,i)?"https://localhost.msn.com:9000/"+e:"https://assets.msn.com/periconfigs/"+e.toLowerCase();return fetch(n).then((e=>{if(e.ok)return e.json();throw new Error(`Non-200 response, Status: ${e.status}, StatusText: ${e.statusText}, fetch url: ${n}`)})).catch((e=>{throw new Error(`BlobFetcher.ts: Fetch Error: fetch url: ${n}, error: ${e}.`)}))})),le=(0,oe.Z)(de);class ue{constructor(e,t){this.failedConfigIndexFetches=[],this.appType=e,this.configOrigins=t,this.fetchAndParseConfigIndex=(0,oe.Z)(this.fetchAndParseConfigIndex,((...e)=>e.join("/")))}fetchAndParseConfigIndex(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){const n=X(e,this.configOrigins);if(!i&&!n)return;const r=n?`${ee(e,t,this.appType)}/index.json`:`${e}/${t}/index.json/${i}`;try{return yield le(r,e,this.configOrigins)}catch(e){n||this.failedConfigIndexFetches.push(e)}}))}getFailedConfigIndexFetches(){return this.failedConfigIndexFetches}}class pe{constructor(e,t){this.failedConfigFetches=[],this.appType=e,this.configOrigins=t,this.fetchAndParseConfig=(0,oe.Z)(this.fetchAndParseConfig,((...e)=>e.join("/")))}fetchAndParseConfig(e,t,i,r){return(0,n.mG)(this,void 0,void 0,(function*(){const n=X(e,this.configOrigins);if(!r&&!n)return;const o=n?`${ee(e,t,this.appType)}/${i}`:`${e}/${t}/${i}/${r}`;try{return yield le(o,e,this.configOrigins)}catch(e){n||this.failedConfigFetches.push(e)}}))}getFailedConfigFetches(){return this.failedConfigFetches}}class ge{constructor(e,t){this.manifestsMap=new Map,this.appType=e,this.configOrigins=t}fetchAndParseManifest(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){if(X(e,this.configOrigins))return;const i=`${e}/${this.appType}/${t}.json`;if(!this.manifestsMap.has(e))try{const t=yield le(i);if(this.manifestsMap.set(e,t),(0,T.Z)(t))throw new Error(`Manifest response is ok but empty or undefined, relative url: ${i}`)}catch(t){throw this.manifestsMap.set(e,null),new Error(`ManifestService.ts: ${t}`)}return this.manifestsMap.get(e)}))}getConfigIndexHashedFileName(e,t){if(X(t,this.configOrigins))return;const i=`${e}/index.json`;return this.getFromManifest(i,t)}getConfigHashedFileName(e,t,i){if(X(i,this.configOrigins))return;const n=`${e}/${t}`;return this.getFromManifest(n,i)}getFromManifest(e,t){if(!this.manifestsMap||!this.manifestsMap.get(t))return;const i=this.manifestsMap.get(t);if(i&&i.fileHashes)return i.fileHashes[e.toLowerCase()];throw new Error(`ManifestService.ts: Manifest is defined but does not have fileHashes: ${e}: cacheKey snippet of manifest: ${JSON.stringify(i).substr(0,100)}`)}}function he(e,t){if((0,k.Z)(e))return t}var me=i(83130);class fe{constructor(e){if(!(e&&e.configServiceParameters&&e.appType&&e.configServiceParameters.configServiceBaseUrl&&e.targetScope))throw new Error("SingleConfigResolver.ts: ResolverEnvironment or configServiceParameters or targetScope does not exist.");this.appType=e.appType,this.targetScope=e.targetScope,this.buildVersion=e.configServiceParameters.buildVersion,this.configOrigins=e.configOrigins,this.manifestService=new ge(this.appType,this.configOrigins),this.configIndexService=new ue(this.appType,this.configOrigins),this.configService=new pe(this.appType,this.configOrigins)}resolveConfigAsync(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=Q(e),i=Q(e,!0);this.buildNumber=this.tryGetBuildNumber()||(yield function(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){let i;const n=new URLSearchParams((0,b.zp)()).getAll("item"),r=n?n.find((e=>e&&0===e.indexOf("spalink:"))):void 0;r&&(i=r.replace("spalink:","").replace("/debug",""));const o=i||e;if(!o||!t||"latest"!==o&&"rolling"!==o&&!G.test(o))throw new Error(`Arguments are incorrect. Check buildVersion: ${o} appType: ${t}`);const s=`https://assets.msn.com/bundles/v1/${t}/${o}/v?${(new Date).getTime()}`;let a;try{if(a=yield fetch(s),!a||!a.ok)throw new Error(`Response not OK, Status: ${a.status}, StatusText: ${a.statusText}`);return(yield a.text()).trim()}catch(e){throw new Error(`getBuildNumberAsync Fetch Url: ${s}, ${e}`)}}))}(this.buildVersion,this.appType));const r=this.manifestService.fetchAndParseManifest(B,this.buildNumber),o=this.manifestService.fetchAndParseManifest(j,this.buildNumber);yield Promise.all([r,o]);const s=this.manifestService.getConfigIndexHashedFileName(t,B),a=this.manifestService.getConfigIndexHashedFileName(i,j),c=this.configIndexService.fetchAndParseConfigIndex($,t,s),d=this.configIndexService.fetchAndParseConfigIndex(U,i,a),l=yield Promise.all([c,d]).then((e=>({featureIndex:e[0],localizationIndex:e[1]}))),u=l.featureIndex&&l.featureIndex.configs||void 0,p=l.localizationIndex&&l.localizationIndex.configs||void 0,g=[];if(this.fetchMathingConfigs(g,u,B,$,t),this.fetchMathingConfigs(g,p,j,U,i),this.fetchMathingConfigs(g,p,j,U,i,!0),0==g.length)return;return function(e){if(!e||e.length<1)return null;const t=e[0];for(let i=1;i<e.length;i++)t.properties=(0,C.Z)(t.properties,e[i].properties,he);return t}((yield Promise.all(g).then((e=>e))).filter((e=>null!=e)))}))}fetchMathingConfigs(e,t,i,n,r,o=!1){t&&0!=t.length&&t.forEach((t=>{if((0,me.J4)(t.targetScope,this.targetScope,o)){const o=t.src,s=this.manifestService.getConfigHashedFileName(r,o,i);e.push(this.configService.fetchAndParseConfig(n,r,o,s))}}))}getFailedFetches(){const e=[],t=this.configService.getFailedConfigFetches();t.length>0&&e.push(...t);const i=this.configIndexService.getFailedConfigIndexFetches();return i.length>0&&e.push(...i),e}get buildNumber(){return this._buildNumber}set buildNumber(e){this._buildNumber=e}tryGetBuildNumber(){return this.buildNumber?this.buildNumber:this.configOrigins.feature===F.w.Local&&this.configOrigins.loc===F.w.Production?null:this.buildVersion}}class ve{constructor(e){if(this.mergedConfigMap=new Map,this.mockManagerInitialized=!1,!(e&&e.configServiceParameters&&e.appType&&e.configServiceParameters.configServiceBaseUrl&&e.targetScope))throw new Error("Resolver.ts: ResolverEnvironment or configServiceParameters or targetScope does not exist.");this.resolverEnvironment=e,this.appType=e.appType,this.singleConfigResolver=new fe(e)}getConfig(e,t=!1){return(0,n.mG)(this,void 0,void 0,(function*(){const i=V(e,this.appType),{mockManager:n}=this.resolverEnvironment;if(n.mocksEnabled&&!this.mockManagerInitialized){this.mockManagerInitialized=!0;const e={scenarios:(yield this.getConfig({experienceType:"MockManager",instanceSrc:"default"})).properties.scenarios};n.initialize(e)}if(!this.mergedConfigMap.has(i)){yield this.getConfigRecursive(e,t);const i=this.singleConfigResolver.getFailedFetches();i.length>0&&i.forEach((e=>{J(this.resolverEnvironment.appErrorCallback,Object.assign(Object.assign({},ie.Fe.BlobFetchReturnedNull),{message:"Fetch failed for a config",pb:Object.assign(Object.assign({},ie.Fe.BlobFetchReturnedNull.pb),{customMessage:`Failed fetch url: ${e}`})}))}))}return this.mergedConfigMap.get(i)}))}getConfigMap(){return this.mergedConfigMap}getConfigRecursive(e,t=!1){return(0,n.mG)(this,void 0,void 0,(function*(){const i=V(e,this.appType);if(i&&!this.mergedConfigMap.has(i))try{const n=yield this.singleConfigResolver.resolveConfigAsync(e);if(this.mergedConfigMap.set(i,n),t){const e=Z(n);if(0==e.size)return;const i=[];e.forEach((e=>{i.push(this.getConfigRecursive(e,t))})),yield Promise.all(i)}}catch(e){J(this.resolverEnvironment.appErrorCallback,Object.assign(Object.assign({},ie.Fe.RecursiveGetFailed),{message:"Exception in getConfig.",pb:Object.assign(Object.assign({},ie.Fe.RecursiveGetFailed.pb),{customMessage:`CacheKey: ${i} / Error: ${e}`})}))}}))}}class ye{constructor(e){if(this.resolverEnvironment=e,this.fallbackResolverCalled=!1,this.crsInitComplete=!1,this.enableIdbCaching=!1,this.configResolverMap=new Map,this.configResolverMapSet=!1,!e||!e.targetScope)throw new Error("ResolverEnvironment or targetScope does not exist.");var t;this.configService=new ce(e),this.enableIdbCaching=(t=e.targetScope.pageExperiments)&&t.indexOf("prg-gitconfigs-t")>-1,this.configCache=new se(e,this.enableIdbCaching),this.fallbackResolver=new ve(e)}get crsHadNetworkError(){return this.configService.hadNetworkError}get crsActivityId(){return this.configService.crsActivityId}tryGetConfigSync(e){if(e)return this.configService.tryGetConfigSync(e)||this.tryToGetFromInMemory(e)||this.configCache.tryGetConfigSync(e)}getConfig(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.resolverEnvironment.configOrigins.feature===F.w.Local||this.resolverEnvironment.mockManager.mocksEnabled){const t="function"==typeof this.resolverEnvironment.loggerCallback;try{const i=yield this.fallbackResolver.getConfig(e);return i?Promise.resolve(i):(t&&this.resolverEnvironment.loggerCallback(`ConfigResolver: Failed to fetch configs from local configs. Config: ${V(e)}`),Promise.resolve(null))}catch(e){return t&&this.resolverEnvironment.loggerCallback(`${e.message}`),Promise.reject(e)}}if(this.configResolverMapSet||this.crsInitComplete||!(null==e?void 0:e.properties)){if(this.isPromise(this.resolverEnvironment.resolvedConfigsPromise)&&!this.configResolverMapSet&&!this.crsInitComplete){const e=yield this.awaitCrsConfigsPromise(this.resolverEnvironment.resolvedConfigsPromise);e&&e.configs&&(this.setConfigResolverMap(e.configs),this.configResolverMapSet=!0)}}else{const t=e.properties;t&&t.configs&&(this.setConfigResolverMap(t.configs),this.configResolverMapSet=!0)}const t=this.configResolverMapSet&&e?this.tryToGetFromInMemory(e):null;if(t)return t;this.crsInitComplete||(this.sendPerfMarker("CrsConfig-start"),yield this.initiateConfigService(),this.crsInitComplete=!0,this.sendPerfMarker("CrsConfig-end")),this.configResolverMapSet&&this.crsInitComplete&&this.sendAppError(ne(ie.cm,"Fallback to network call",`Config Ref ${this.getCacheKeyFromConfigRef(e)} not found in PCS-CRS configs. Network Fallback`));const i=e?this.configService.tryGetConfigSync(e):null;if(i)return i;const r=new Promise((t=>(0,n.mG)(this,void 0,void 0,(function*(){if(this.configService.shouldTryFallbackResolver){this.fallbackResolverCalled=!0;const i=yield this.fallbackResolver.getConfig(e);if(i)return t(i)}else{const i=yield this.configService.getConfig(e);if(i)return t(i)}return t(null)})))),o=new Promise((t=>(0,n.mG)(this,void 0,void 0,(function*(){if(this.enableIdbCaching){const i=yield this.configCache.getConfig(e);if(i)return t(i)}}))));return Promise.race([o,r])}))}getConfigServiceObject(){return this.configService}initiateConfigService(){return(0,n.mG)(this,void 0,void 0,(function*(){yield this.configService.initialize(),yield this.configService.getConfig({experienceType:"AppConfig",instanceSrc:"default"})}))}sendPerfMarker(e){this.resolverEnvironment.perfMarkerCallback&&this.resolverEnvironment.perfMarkerCallback(e)}setConfigResolverMap(e){for(const t in e){const i=e[t];if(i&&i.properties){const e=this.getCacheKeyFromConfigRef(q(t));this.configResolverMap.set(e,i)}}}tryToGetFromInMemory(e){const t=this.getCacheKeyFromConfigRef(e);return this.configResolverMap.get(t)}getCacheKeyFromConfigRef(e){return V(e,this.resolverEnvironment.appType)}awaitCrsConfigsPromise(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!e)return null;let t;const i=new Promise((e=>{t=setTimeout((()=>(this.sendAppError(ne(ie.cm,"Crs Configs from web worker are null","Did not recieve Crs Configs from Main Thread within 500 ms. Falling back to network call.")),e(null))),500)})),n=yield Promise.race([e,i]);return t&&clearTimeout(t),n&&(n.Url||n.Response||n.StatusCode)?(this.sendCrsFetchError(n),null):n}))}isPromise(e){return e&&"object"==typeof e&&"function"==typeof e.then}sendAppError(e){this.resolverEnvironment.appErrorCallback&&this.resolverEnvironment.appErrorCallback(e)}sendCrsFetchError(e){if(!e)return;const{Url:t,StatusCode:i,Response:n}=e||{};this.sendAppError(ne(ie.cm,"PCS failed to retrieve crs configs",`Url: ${t} with status code: ${i} and response ${n}`))}}const be=864e5,Se="__ResolverInstance__";class Ce{constructor(){this.currentTargetScope=c.jG.CurrentRequestTargetScope,this.configMap=new Map,this.env=c.jG.Environment||d.q.prod,this.promiseMap=new Map,this.refreshServerCachePromiseMap=new Map,this.stalenessCheckTimestamp=(new Date).getTime(),this.isMultiConfigRetrievalEnabled=!1,this.localOverrideMap={},this.peregrineFlightsKey="prgflights",this.isInitialized=!1,this.initializeCaching()}static getInstance(){return v.Gq.get(Se,(()=>new Ce))}static resetResolverInstance(){const e=new Ce;v.Gq.set(Se,e),we=(0,y.h)(Ce)}getConfigResolver(){return this.configResolver}initializeCaching(){this.cdnConfigBaseUrl=c.jG.ConfigRootUrl||c.jG.EnvironmentConfigUrl,this.configServiceBaseUrl=c.jG.ConfigServiceBaseUrl,this.resolverErrors=[],this.configTimings=[],this.useWebWorkerToCache=u.yb;const e=c.jG.EnableCMSPPEConfigs;this.useServerCache=null!==p.o&&!e,this.setTargetScopeAndConfigServiceParams()}setTargetScopeAndConfigServiceParams(){const e=c.jG.EnableCMSPPEConfigs;this.currentTargetScope=this.currentTargetScopeOverride||c.jG.CurrentRequestTargetScope,!c.jG.IsGitConfigs&&this.currentTargetScope&&(this.currentTargetScope.locale=c.jG.LocaleContentMarket);const{AppType:t,WidgetAttributes:i}=c.jG,n=i&&i.clientPerf&&i.clientPerf.shouldUsePWOnlyFlights||"distribution"===t,r=this.currentTargetScope&&(n?(0,A.Kd)(this.currentTargetScope.pageExperiments):(0,A.Mx)(this.currentTargetScope.pageExperiments));if(r&&r.length>0&&(this.peregrineFlights=r.join(",")),this.scopeWithPeregrineFlights=Object.assign(Object.assign({},this.currentTargetScope),{domain:i&&(0,b.Dp)()||this.currentTargetScope&&this.currentTargetScope.domain,pageExperiments:r}),this.enableConfigService=this.useConfigService(),this.enableConfigService){this.configServiceParameters="?targetScope="+JSON.stringify(this.scopeWithPeregrineFlights),this.configServiceParameters+=`&apptype=${t}`;const{IsMultiConfigRetrievalEnabled:i,CacheBustingIdentifier:n}=c.jG;this.isMultiConfigRetrievalEnabled=i,this.isMultiConfigRetrievalEnabled&&(this.configServiceParameters+=`&maxDepth=${this.getConfigRetrievalMaxDepth()}`);const r=(0,S.N)()&&window._cbid||n;r&&(this.configServiceParameters+=`&cbid=${r}`),this.containsDevOnlyQueryParameters()&&(this.configServiceParameters+="&item=dev:true"),e&&(this.configServiceParameters+="&item=cms:ppe")}this.storageKey=this.generateKey()}initialize(e,t){if(this.isInitialized)return;var i;if(this.perfTimeline=(0,r.oA)("Resolver","Resolver",!0),i=this.perfTimeline,D=i,!c.jG.IsGitConfigs)return;const{_idbConfigOpenPromise:n=null,_idbConfigReadPromise:s=null,_idbConfigLookup:a=null}=(0,S.N)()?window:{},d={idbConfigOpenPromise:n,idbConfigReadPromise:s,idbConfigLookup:a},l={buildVersion:c.jG.BuildVersion,configServiceBaseUrl:c.jG.ConfigServiceBaseUrl.toString()},u=c.jG.CrsRetryBaseUrl,p=(0,S.N)()?new Promise((e=>{e(window._crsConfigs)})):void 0,{pageExperiments:m}=this.currentTargetScope,f={appType:c.jG.AppType,configServiceParameters:l,targetScope:this.scopeWithPeregrineFlights,env:c.jG.Environment.toString(),featureFlags:c.jG.FeatureFlags,isThisWebWorkerThread:!1,isWebWorkerPresent:this.useWebWorkerToCache,queryParams:g.c.getParamsObj((0,b.zp)()),appErrorCallback:e,perfMarkerCallback:R,loggerCallback:o.k.log.bind(o.k),logObjectsCallback:o.k.logObjects.bind(o.k),isDebug:o.k.isDebug(),configCacheProperties:d,configOrigins:c.jG.ConfigOrigins,segmentPlugins:t,mockManager:z,resolvedConfigsPromise:p,crsRetryBaseUrl:u,crsDisableServerCache:c.jG.CrsDisableServerCache,abortableFetchCallback:m&&m.includes("useabortfetch")||!(0,S.N)()?h.Sm:void 0,hostHeaderOverride:c.jG.HostHeaderOverride};this.configResolver=new ye(f),this.isInitialized=!0}mergeConfig(e){if(!e||e.length<1)return null;const t=e[0];for(let i=1;i<e.length;i++)t.properties=(0,C.Z)(t.properties,e[i].properties,this.customizer);return t}resolveConfigIndex(e){if(!e)return null;const t=[];return e.configs.forEach((e=>{this.targetScopeMatched(e)&&t.push(e.href)})),e.overrideConfig&&m.b.stringHasData(e.overrideConfig.href)&&t.push(e.overrideConfig.href),t}targetScopeMatched(e){const t=e.targetScope;return!t||this.audienceModeMatched(t)&&this.browserTypeMatched(t)&&this.deviceTypeMatched(t)&&this.domainMatched(t)&&this.experimentMatched(t)&&this.marketMatched(t)&&this.osMatched(t)&&this.pageTypeMatched(t)&&this.platformMatched(t)}audienceModeMatched(e){return!e.audienceMode||this.currentTargetScope.audienceMode===e.audienceMode}browserTypeMatched(e){return!e.browser||!e.browser.browserType||!(!this.currentTargetScope.browser||this.currentTargetScope.browser.browserType!==e.browser.browserType||e.browser.version&&this.currentTargetScope.browser.version!==e.browser.version)}deviceTypeMatched(e){return!e.deviceFormFactor||this.currentTargetScope.deviceFormFactor===e.deviceFormFactor}domainMatched(e){return!e.domain||this.currentTargetScope.domain===e.domain}experimentMatched(e){return this.currentTargetScope.pageExperiments=this.currentTargetScope.pageExperiments||[],!!(!(0,w.Z)(e.experimentId)||(0,T.Z)(e.experimentId)||this.currentTargetScope.pageExperiments.indexOf(e.experimentId)>=0)}stringsEqualCaseInsensitive(e,t){return 0===(e||"").localeCompare(t||"",void 0,{sensitivity:"accent"})}marketMatched(e){const t=e.locale||e.locale;if(!t)return!0;const i=this.currentTargetScope.locale;return!(t.language&&!this.stringsEqualCaseInsensitive(t.language,i.language)||t.market&&!this.stringsEqualCaseInsensitive(t.market,i.market)||t.script&&!this.stringsEqualCaseInsensitive(t.script,i.script))}osMatched(e){return!e.os||this.currentTargetScope.os===e.os}pageTypeMatched(e){return!e.pageType||this.currentTargetScope.pageType===e.pageType}platformMatched(e){return!e.platform||this.currentTargetScope.platform===e.platform}customizer(e,t){if((0,k.Z)(e))return t}clearInternalState(){this.configMap.clear()}overrideCurrentRequestTargetScope(e){this.currentTargetScopeOverride=e,this.currentTargetScopeOverride&&(this.currentTargetScope=this.currentTargetScopeOverride)}overrideCurrentRequestEnvironment(e){this.env=e||d.q.prod}overrideConfig(e,t,i){if(this.env!==d.q.prod){const n="string"==typeof e?e:(0,l.B5)(e);this.localOverrideMap[n]={experienceType:t,properties:i,typeVersion:"1.0.0",_name:"index"}}}getRootConfig(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!c.jG.IsGitConfigs)return yield this.getConfig(e);const t=yield this.getEntryPointConfigRef();return yield this.getConfig(t.configRef)}))}getEntryPointConfigRef(){return(0,n.mG)(this,void 0,void 0,(function*(){return(yield this.getConfig({experienceType:"AppConfig",instanceSrc:"default"})).properties.rootExperience}))}getConfigSync(e){if(!e||!this.currentTargetScope||!c.jG.IsGitConfigs)return;const t=(0,l.B5)(e),i=t&&this.localOverrideMap[t];if(i)return i;const n=this.configResolver&&this.configResolver.tryGetConfigSync(e);return n?{experienceType:e.experienceType,properties:n.properties||{},typeVersion:"Git",_name:t}:void 0}getConfig(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!this.currentTargetScope)return Promise.reject(new Error(`getConfig: Invalid target scope when fetching config ${JSON.stringify(e)}`));const t=performance.now();if(c.jG.IsGitConfigs){if("string"==typeof e){const t="Invalid config Id for Git configs flight";return this.resolverErrors.push(Object.assign(Object.assign({},s.lu7),{message:t,pb:Object.assign(Object.assign({},s.lu7.pb),{userImpacting:!0,customMessage:e})})),Promise.reject(new Error(`${t}: ${e}`))}if(!this.configResolver){const t="Invalid configResolver object for Git configs flight";return this.resolverErrors.push(Object.assign(Object.assign({},s.ASE),{message:t,pb:Object.assign(Object.assign({},s.ASE.pb),{userImpacting:!0,customMessage:JSON.stringify(e)})})),Promise.reject(new Error(`${t}: ${JSON.stringify(e)}`))}const i=(0,l.B5)(e),n=this.localOverrideMap[i];if(n)return n;const r=this.perfTimeline&&this.perfTimeline.startMeasure("config",i).endMeasure;let o,a;try{a=this.configResolver.tryGetConfigSync(e);let n=a;if(!n){this.addConfigTiming(e.experienceType,t,"network"),n=yield this.configResolver.getConfig(e);const i=this.configResolver.crsActivityId;i&&P.M0.addOrUpdateCustomProperty("crsActivityId",i)}return n?o={experienceType:e.experienceType,properties:n.properties||{},typeVersion:"Git",_name:(0,l.B5)(e)}:Promise.reject(new I(`Could not fetch Git config id ${JSON.stringify(e)}`,this.configResolver.crsHadNetworkError))}finally{if(r){r({customSuffix:`${i}-${(a?"memory":o&&"network")||"error"}`})}}}const i=e;if(!i||!(0,w.Z)(i)||(0,T.Z)(i))throw new Error("getConfig: Invalid relativeUrl");const r=this.localOverrideMap[i];if(r)return r;const a=this.getCacheKey(i),d=this.configMap.get(a);if(d)return this.addConfigTiming(d.experienceType,t,"cache"),d;const u=this.promiseMap.get(a);if(u)return u;let g=!1;const h=this.perfTimeline&&this.perfTimeline.startMeasure("config",i).endMeasure;let m,f;const v=new Promise(((e,r)=>(0,n.mG)(this,void 0,void 0,(function*(){try{if(this.useServerCache){let n=!1,r=!1;const c=yield p.o.has(a);if(c){const s=yield p.o.get(a),c=s?JSON.parse(s):null;c?(this.configTimings.push({experienceType:c.experienceType,cacheFetchDuration:performance.now()-t}),r=!!c.relatedConfigIndexHref,g=!0,this.promiseMap.delete(a),e(c),this.isServerCacheConfigStale(c.storageTimestamp)&&(yield this.updateServerCache(i,c))):(o.k.log(`Resolver: cacheKey=${a} Undefined from server cache`),n=!0)}if(o.k.logObjects({serverCacheGetConfig:{cacheKey:a,isHeadConfig:r,isCached:c,hasCacheError:n}}),c&&n){const e="Sever Cache key exists but server cache is undefined. Usually due to timeout when server cache IPC is busy.",t=`cacheKey=${a}`,i=new Error(e);throw P.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.txQ.ServerCacheFetchFailed),{message:e,pb:Object.assign(Object.assign({},s.txQ.ServerCacheFetchFailed.pb),{customMessage:t})})),i}if(c)return;const d=this.getConfigFromNetwork(i),l=(yield d).get(a);m=l.experienceType,this.addConfigTiming(m,t,f="network"),e(l)}else{const n=(yield yield this.getConfigFromNetwork(i)).get(a);m=n.experienceType,this.addConfigTiming(m,t,f="network"),e(n)}}catch(e){this.resolverErrors.push(Object.assign(Object.assign({},s.W1d.GetConfigException),{message:"Exception in getConfig",pb:Object.assign(Object.assign({},s.W1d.GetConfigException.pb),{customMessage:`Relative Url: ${i}. Error ${e.message||e}`})})),r(e)}finally{g=!0,this.promiseMap.delete(a),h&&h({customSuffix:`${m}-${i}-${f}`})}}))));return g||this.promiseMap.set(a,v),v}))}getConfigFromNetwork(e,t=!1){return(0,n.mG)(this,void 0,void 0,(function*(){const i=this.getCacheKey(e),n=new Map;if(this.enableConfigService){const r=this.removeCmsPathFromRelativeUrl(e)+this.configServiceParameters;try{if(this.isMultiConfigRetrievalEnabled){const t=yield this.downloadFile(new URL(`${r}${this.configServiceBaseUrl.search}`,this.configServiceBaseUrl),!0);if(t&&t.rootConfigIndexId&&t.configs){const i=Object.keys(t.configs).map((e=>t.configs[e]));for(const t of i)if(t&&t.configIndexHref){const r=t.configIndexHref,s=r===e;yield this.addConfigToConfigMap(r,t,s?i:null),n.set(this.getCacheKey(r),t),(0,S.N)()&&o.k.log(`Resolver: ${r} config for ${t.experienceType} fetched from network using CRS url with multi config support.`)}return n}}else{const t=yield this.downloadFile(new URL(`${r}${this.configServiceBaseUrl.search}`,this.configServiceBaseUrl),!0);if(t)return yield this.addConfigToConfigMap(e,t),n.set(i,t),(0,S.N)()&&o.k.log(`Resolver: ${i} config for ${t.experienceType} fetched from network using CRS url.`),n}}catch(i){const n=`CRS fetch failed for ${e}.`,o=`CRS relative Url: ${r} Error: ${i}`;t?P.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.txQ.ServerCacheRefreshFailed),{message:n,pb:Object.assign(Object.assign({},s.txQ.ServerCacheRefreshFailed.pb),{customMessage:o})})):this.resolverErrors.push(Object.assign(Object.assign({},s.W1d.CrsFetchError),{message:n,pb:Object.assign(Object.assign({},s.W1d.CrsFetchError.pb),{customMessage:o})}))}}if(n&&!n.has(i)){const t=yield this.downloadMergeConfig(e);t&&(yield this.addConfigToConfigMap(e,t),n.set(i,t),(0,S.N)()&&o.k.log(`Resolver: ${i} config fetched from network using Akamai url.`),this.enableConfigService&&this.resolverErrors.push(Object.assign(Object.assign({},s.CS7),{message:"Configs served from CDN after CRS fetch failed",pb:Object.assign(Object.assign({},s.CS7.pb),{customMessage:`Relative Url: ${e} CRS Params: ${this.configServiceParameters}`})})))}return n}))}addConfigToConfigMap(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){t.storageTimestamp=this.stalenessCheckTimestamp,t.configIndexHref=e;const n=this.getCacheKey(e);if(this.useServerCache){i&&(t.relatedConfigIndexHref=i.map((e=>e.configIndexHref)));const e=JSON.stringify(t);yield p.o.set(n,e,be)}else this.configMap.set(n,t)}))}updateServerCache(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.useServerCache)try{if(!this.refreshServerCachePromiseMap.get(e)){if(t.relatedConfigIndexHref){yield Promise.all(t.relatedConfigIndexHref.map((i=>{const n=i===e?this.refreshConfigServerCache(e,t):this.refreshConfigServerCache(i);return this.refreshServerCachePromiseMap.set(i,n),n})));for(let e=0;e<t.relatedConfigIndexHref.length;e++)this.refreshServerCachePromiseMap.delete(t.relatedConfigIndexHref[e])}else{const i=this.refreshConfigServerCache(e,t);this.refreshServerCachePromiseMap.set(e,i),yield i,this.refreshServerCachePromiseMap.delete(e)}this.getConfigFromNetwork(e)}}catch(t){const i=`Update server cache failed for ${e}.`,n=`Error: ${t}`;P.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.txQ.ServerCacheRefreshFailed),{message:i,pb:Object.assign(Object.assign({},s.txQ.ServerCacheRefreshFailed.pb),{customMessage:n})}))}}))}refreshConfigServerCache(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){if(!this.useServerCache)return;const i=this.getCacheKey(e);if(!t){const e=yield p.o.get(i);t=e?JSON.parse(e):null}if(t){t.storageTimestamp=this.stalenessCheckTimestamp;const e=JSON.stringify(t);yield p.o.set(i,e,be)}}))}purgeRenderCacheUponConfigChanges(e){if(!e)try{(0,f.$o)().removeSubstringKeys("lastKnown_"),(0,f.$o)().removeSubstringKeys("timestamp_"),(0,f.$o)().removeSubstringKeys("keys_")}catch(e){this.resolverErrors.push(Object.assign(Object.assign({},s.W1d.FailedToPurgeRenderCache),{message:"Failed to purge render cache when cached config and network config is not same.",pb:Object.assign(Object.assign({},s.W1d.FailedToPurgeRenderCache.pb),{customMessage:e})}))}}downloadMergeConfig(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=yield this.downloadFile(new URL(`${e}${this.cdnConfigBaseUrl.search}`,this.cdnConfigBaseUrl),!1),i=this.resolveConfigIndex(t),n=yield this.downloadExperienceConfig(this.cdnConfigBaseUrl,i),r=this.mergeConfig(n);return r.experienceType=t.experienceType,r}))}downloadExperienceConfig(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i=[];return t.forEach((t=>{i.push(this.downloadFile(new URL(`${t}${e.search}`,e),!1))})),yield Promise.all(i)}))}downloadFile(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i=(0,S.N)()?1e4:900,n=e.toString();return(0,h.Sm)(n,i).then((e=>{if(e.ok)return e.json();let i="";if(t){const t=e.headers.get("X-Crs-BuildVersion")||"";i=`msedge ref: ${e.headers.get("x-msedge-ref")||""} Status: ${e.status}, Status Text: ${e.statusText}, Url: ${n} and CRS Version: ${t}`,this.resolverErrors.push((0,a.Tr)(s.Wct,"CRS sent non-200 response",i))}else i=`Status: ${e.status}, Status Text: ${e.statusText}, Url: ${n}`,this.resolverErrors.push((0,a.Tr)(s.h6w,"Cdn config fetch received non-200 response",i));return Promise.resolve()}))}))}generateKey(){if((0,S.N)()){const{audienceMode:e="",locale:t={},pageType:i=""}=this.currentTargetScope||{},n=t.content||t,r=n?(0,L.p)(n):"",o=t.display||n;return[e,r,o?(0,L.p)(o):"",i,c.jG.AppType||""].map((e=>e||"")).join("|").toLowerCase()}{let{audienceMode:e="",browser:t=null,deviceFormFactor:i="",locale:n={},os:r={},pageType:o="",platform:s="",pageExperiments:a=null}=this.currentTargetScope||{};const d=n.content||n,{language:l,market:u}=d,{browserType:p="",version:g=""}=t||{};a=(0,A.Mx)(a);return[e,p,g,i,l,u,r,o,s,a?a.join():"",c.jG.AppType||""].map((e=>e||"")).join("|").toLowerCase()}}useConfigService(){const e=(0,b.zp)();if(e){const t=g.c.getQueryParameterByName("enableConfigService",e);if(t)return"true"===t.toLocaleLowerCase()}return c.jG.EnableConfigService}getConfigRetrievalMaxDepth(){const e=g.c.getQueryParameterByName("maxDepth",(0,b.l4)());return e||(c.jG.FeatureFlags&&c.jG.FeatureFlags.crsMaxDepth?c.jG.FeatureFlags.crsMaxDepth:"10")}containsDevOnlyQueryParameters(){const e=(0,b.zp)(),t=g.c.getQueryParameterByName("item",e);if(t&&t.length>0)return!0;const i=g.c.getQueryParameterByName("pcsonly",e);return!!(i&&i.length>0)}getResolverErrors(){return this.resolverErrors}refreshConfigCache(){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.useWebWorkerToCache)try{const e=yield(0,u.ot)({id:"refreshconfigs"});if(e&&e.fetched&&void 0!==e.payload&&null!==e.payload){const t=e.payload;this.purgeRenderCacheUponConfigChanges(t.configsEqual);try{(0,f.$o)().setItem(this.peregrineFlightsKey,this.peregrineFlights)}catch(e){this.resolverErrors.push(Object.assign(Object.assign({},s.W1d.PrgFlightLsWriteError),{message:"Error writing prg flights to ",pb:Object.assign(Object.assign({},s.W1d.PrgFlightLsWriteError.pb),{customMessage:e})}))}if(t.liveCbId){const e=t.liveCbId.toString();this.writeCbidInLocalStorage(e);const i=c.jG.CacheBustingIdentifier||"",n=window._cbid||"";c.jG.IsGitConfigs||e===i&&e===n||this.resolverErrors.push(Object.assign(Object.assign({},s.W1d.DifferentCbid),{message:"Different Cbid detected than configured.",pb:Object.assign(Object.assign({},s.W1d.DifferentCbid.pb),{customMessage:`PcsCbid = ${i}. HighestCbid = ${n}. LiveCbid = ${e}.`})}))}}}catch(e){this.resolverErrors.push(Object.assign(Object.assign({},s.W1d.RefreshConfigCacheFailed),{message:"refreshConfigCache error",pb:Object.assign(Object.assign({},s.W1d.RefreshConfigCacheFailed.pb),{customMessage:e})}))}}))}isConfigStale(e){return!e||this.stalenessCheckTimestamp-e>2592e5}isServerCacheConfigStale(e){return!e||this.stalenessCheckTimestamp-e>3e5}removeCmsPathFromRelativeUrl(e){return e.replace("cms/api/amp/experienceConfigIndex/","")}getConfigServiceParameters(){return this.configServiceParameters}addConfigTiming(e,t,i){this.configTimings.push({experienceType:e,[i+"FetchDuration"]:performance.now()-t})}getConfigTimings(e={},t=!1){if(c.jG.IsGitConfigs)return void Object.assign(e,x);if(!this.configTimings)return;let i=0,n=0;for(const r of this.configTimings){const o=r.experienceType.toLowerCase(),s=r.cacheFetchDuration,a=r.networkFetchDuration;("entrypoint"===o||"river"===o||"contentpreview"===o||c.jG.IsDebug||t)&&(void 0!==a&&(e["ConfigFetch."+o]=Math.round(a)),void 0!==s&&(e["ConfigCache."+o]=Math.round(s))),void 0!==s&&(i+=s),void 0!==a&&(n+=a)}i&&(e["ConfigCache.All"]=Math.round(i)),n&&(e["ConfigFetch.All"]=Math.round(n))}setConfigTimingsObject(e){this.configTimings=e}getCacheKey(e){return null===e?null:this.removeCmsPathFromRelativeUrl(e)+"_"+this.storageKey}prgFlightsSameAsLocalStorage(){try{const e=(0,f.$o)().getItem(this.peregrineFlightsKey);return e&&this.peregrineFlights&&e===this.peregrineFlights}catch(e){this.resolverErrors.push(Object.assign(Object.assign({},s.W1d.PrgFlightLsReadError),{message:"Error reading prg flights from localStorage",pb:Object.assign(Object.assign({},s.W1d.PrgFlightLsReadError.pb),{customMessage:e})}))}return!1}getConfigsCacheLocalStorageKey(){const{audienceMode:e,pageType:t}=this.currentTargetScope||{},i=c.jG.LocaleContentMarket||{};return`config_hash_${e}_${i.language}_${i.market}_${t}_${c.jG.AppType}`}writeCbidInLocalStorage(e){const t=`cbid_${c.jG.AppType||""}`;try{(0,f.$o)().setItem(t,e)}catch(i){throw`Error writing cbid: ${e} to local storage with key ${t}. Error: ${i}`}}}let we=(0,y.h)(Ce);const Te={getRootConfig:e=>we.getRootConfig(e),getEntryPointConfigRef:()=>we.getEntryPointConfigRef(),getConfig:e=>we.getConfig(e),getConfigSync:e=>we.getConfigSync(e),mergeConfig:e=>we.mergeConfig(e),resolveConfigIndex:e=>we.resolveConfigIndex(e),targetScopeMatched:e=>we.targetScopeMatched(e),getConfigTimings:(e={},t=!1)=>we.getConfigTimings(e,t),getResolverErrors:()=>we.getResolverErrors(),refreshConfigCache:()=>we.refreshConfigCache(),getInstance:()=>we,setTargetScopeAndConfigServiceParams:()=>we.setTargetScopeAndConfigServiceParams(),initialize:(e,t)=>we.initialize(e,t),getUseConfigService:()=>we.useConfigService(),overrideConfig:(e,t,i)=>we.overrideConfig(e,t,i),overrideCurrentRequestTargetScope:e=>we.overrideCurrentRequestTargetScope(e),overrideCurrentRequestEnvironment:e=>we.overrideCurrentRequestEnvironment(e),generateKey:()=>we.generateKey(),clearInternalState:()=>we.clearInternalState(),initializeCaching:()=>we.initializeCaching(),getConfigServiceParameters:()=>we.getConfigServiceParameters(),setConfigTimingsObject:e=>we.setConfigTimingsObject(e),getCacheKey:e=>we.getCacheKey(e),updateServerCache:(e,t)=>we.updateServerCache(e,t)}},32181:function(e,t,i){"use strict";function n(e){return a(e,(e=>e.configRef.experienceType),(e=>e.experienceType),null)}function r(e){return a(e,(e=>e.configRef),(e=>e.href),(e=>e))}function o(e){return`${e.experienceType}_${e.instanceSrc}_${e.sharedNs||""}`}function s(e){return e&&null!=e.instanceId&&!!a(e,(e=>e.configRef&&e.configRef.experienceType&&e.configRef.instanceSrc),(e=>e.experienceType&&null!=e.href),null)}function a(e,t,i,n,r){if(void 0===r&&(r=null),null!=e){if("string"==typeof e)return n&&n(e)||r;const o=e;if(o.configRef)return t&&t(o)||r;const s=e;if(i)return i(s)||r}return r}i.d(t,{B5:function(){return o},Fr:function(){return r},M:function(){return n},oO:function(){return s}})},82683:function(e,t,i){"use strict";var n;i.d(t,{O:function(){return n}}),function(e){e.grid="grid",e.horizontalStack="horizontalStack",e.layout="layout",e.verticalStack="verticalStack",e.customExperience="customExperience"}(n||(n={}))},14816:function(e,t,i){"use strict";var n;i.d(t,{f:function(){return n}}),function(e){e.actionTrigger="ActionTrigger",e.button="Button",e.heading="Heading",e.peregrineExperience="PeregrineExperience",e.typography="Typography",e.webComponentExperience="WebComponentExperience"}(n||(n={}))},2040:function(e,t,i){"use strict";i.d(t,{AU:function(){return a},Cd:function(){return V},DB:function(){return p},Eo:function(){return $},IX:function(){return s},Ib:function(){return W},It:function(){return N},JJ:function(){return E},Ji:function(){return f},Kj:function(){return _},Kz:function(){return h},Li:function(){return S},Ny:function(){return k},OJ:function(){return y},Oj:function(){return Q},Qw:function(){return m},Rn:function(){return G},UL:function(){return I},V3:function(){return P},X8:function(){return u},Xs:function(){return n},YH:function(){return O},Yu:function(){return D},Z7:function(){return U},cp:function(){return l},cs:function(){return C},d_:function(){return b},gb:function(){return M},js:function(){return d},m$:function(){return v},mG:function(){return x},nM:function(){return w},nr:function(){return o},pv:function(){return H},rD:function(){return R},tX:function(){return T},uD:function(){return q},um:function(){return c},up:function(){return Z},uw:function(){return g},wG:function(){return A},x$:function(){return r},xG:function(){return z}});const n="msnewsroot",r={html:"html",head:"head",body:"body"},o="data-client-settings",s="data-diagnostics",a="data-pagetype",c="data-info",d="data-js",l="dir",u="data-service-url",p="data-telemetry-id",g="data-page-product",h="data-page-type",m=2,f="APP_ANON",v="aace",y="lt",b="at",S="ace",C="OSATE",w="child",T="AL_STATE",k="nurturingAccepted",A="search-history-enabled",I="news-headline-enabled",P="split-screen",E="left-rail-enabled",O="brand-zone-ads",M="no-search-history-expected-auth",x="daily-discovery-enabled",D={activityId:"x-client-activityid",adsReferer:"ads-referer",authorization:"Authorization",entAuthorization:"Ent-Authorization",muid:"MUID",rpsToken:"UserAuthToken",taboolaSessionId:"taboola-sessionId",xboxToken:"s-xbox-token",traceParent:"traceparent"},R={traceId:"ddd-activityid",debugId:"ddd-debugid",userType:"ddd-usertype"};var L,F;!function(e){e.Presentation="presentation"}(L||(L={})),function(e){e.Unknown="Unknown",e.Portrait="Portrait",e.Landscape="Landscape"}(F||(F={}));const N={pageVersions:"pageVersions"},B={instanceId:"InterestsWC",configRef:{experienceType:"InterestsWC",instanceSrc:"default"}},j={instanceId:"InterestsWC",configRef:{experienceType:"InterestsWC",instanceSrc:"default",sharedNs:"msn-ns"}},$=e=>{let t;switch(e){case"default":t=B;break;case"shared":t=j;break;default:t=void 0}return t},U="https://microsoftnews.msn.com/",H="selectedPivot",_="switchedPivot",W="pivotSelectionSource",z="userType",G="v3";var V,q;!function(e){e[e.Undefined=0]="Undefined",e[e.Basic=1]="Basic",e[e.Advanced=2]="Advanced",e[e.Premium=3]="Premium"}(V||(V={})),function(e){e.Init="init",e.Config="config",e.Targeted="targeted",e.Sticky="sticky",e.NoSticky="no_sticky",e.Admin="admin",e.Forced="forced",e.Manual="manual"}(q||(q={}));new Set(["winp0dash","winp1taskbar","winp1taskbarent","winp1taskbardirect","winp1taskbardirectent","winp1taskbarent","winp2juntaskbar","winp2juntaskbarent","winp2","winp2ent","winp2fp","winp2fpent","winp2fptaskbar","winp2fptaskbarent","winp2fptaskbarhover","winp2fptaskbarhoverent","winp2widget","winp2widgetent"]);const Z=new Set(["finance-app-win","weather-app-win"]);new Set(["msedgdhp","msedgdhphdr","msedgntphdr","msedgntp","msedgdhp","entnewsntp"]);var K;!function(e){e.outlookMobile="OnOOutlookMobile",e.officeMobile="OnOOfficeMobile",e.sapphire="OnOStartApp",e.skype="OnOSkype"}(K||(K={}));const Q=new Set(["hpmsn"])},970:function(e,t,i){"use strict";i.d(t,{L:function(){return s}});var n=i(33379),r=i(70493);let o;function s(){return o||(o=new URLSearchParams(window.location.search)),o}(0,n.N)()||(0,r.U)((()=>{o=null}))},66588:function(e,t,i){"use strict";function n(e){return new Promise((t=>setTimeout(t,e)))}i.d(t,{rh:function(){return n}})},26769:function(e,t,i){"use strict";i.d(t,{Uq:function(){return s},YO:function(){return r},ds:function(){return n},k6:function(){return o},vC:function(){return c},w5:function(){return a}});const n="csux_evt",r="csux_evt-",o=9e5,s=new Map([["BackgroundImageWC",864e5],["SuperNav",9e5]]),a=new Map([["BackgroundImageWC",12096e5],["SuperNav",12096e5]]),c={start_year:2023,start_month:1,start_day:31,end_year:2099,end_month:12,end_day:31}},83216:function(e,t,i){"use strict";i.d(t,{Q:function(){return u}});var n=i(26415),r=i(19388),o=i(68364),s=i(33954),a=i(26769),c=i(33379),d=i(65337),l=i(85663);class u{constructor(){(0,c.N)()&&(this.localstorage_get(null,n.J_l),(0,r.b1)().then((()=>{this.autoCleanup()})))}autoCleanup(){if(!(0,c.N)())return;if(!this.eventData)return;let e;for(e in this.eventData){const t=e;let i;for(i in this.eventData[t]){const e=i,n=this.eventData[t][e],r=(new Date).getTime();n.timestamp_EventStart+a.w5.get(t)<r&&delete this.eventData[t][e]}}this.localstorage_save(null)}dismissCreative(e,t,i,n){if((0,c.N)())if(e&&t&&i){for(const n in this.eventData[t][e].expiredCreatives)if(n===i)return;this.eventData[t][e].expiredCreatives.push(i),this.localstorage_save(e,n)}else{const r=`Missing data to save creative dismissal. Event ID: ${e}, Experience ID: ${t}, Creative ID: ${i}`;n?(0,o.H)(n,r):s.k.logError(r)}}getCMSContent(e,t,i,n){if(!(0,c.N)())return null;if(!e||!t||!i){const r=`Missing data to return current cms content. Event ID: ${e}, Experience ID: ${t}, Creative IDs: ${i}`;return n?(0,o.H)(n,r):s.k.logError(r),null}return this.eventData&&this.eventData[t]&&this.eventData[t][e]&&this.eventData[t][e].cmsData?this.eventData[t][e].cmsData:null}static getInstance(){return u.instance||(u.instance=new u),u.instance}getCurrentCreativeId(e,t,i,n,r,a){if(!(0,c.N)())return null;if(!e||!t||!i){const n=`Missing data to return current creative. Event ID: ${e}, Experience ID: ${t}, Creative IDs: ${i}`;return a?(0,o.H)(a,n):s.k.logError(n),null}let d;if(!(this.eventData&&this.eventData[t]&&this.eventData[t][e]))return null;d=this.eventData[t][e].currentCreative;return this.selectCreative(i,e,t,n,r,d,a)}localstorage_get(e,t){if((0,c.N)())try{this.eventData=(0,d.$o)().getObject(a.ds)}catch(i){t?(0,o.H)(t,`Get local storage operation failed for event - ${e}.`):s.k.logError(i)}}localstorage_save(e,t){if((0,c.N)())try{(0,d.$o)().setObject(a.ds,this.eventData)}catch(i){return void(t?(0,o.H)(t,`Save local storage operation failed for event - ${e}.`):s.k.logError(i))}}selectCreative(e,t,i,n,r,d,u){if(!(0,c.N)())return null;if(!e||0===e.length)return null;if(n){const e=new Date,t=new Date(n.start_year,n.start_month-1,n.start_day);t.setDate(t.getDate()-1);const i=new Date(n.end_year,n.end_month-1,n.end_day);if(i.setDate(i.getDate()+1),!(t<=e&&e<=i))return null}const p=(0,l.isNullOrUndefined)(this.eventData&&this.eventData[i]&&this.eventData[i][t]&&this.eventData[i][t].timestamp_EventStart);if(!d&&p&&!r)return e[0];if(r){const n=(new Date).getTime();if((this.eventData&&this.eventData[i]&&this.eventData[i][t]&&this.eventData[i][t].timestamp_EventLastUpdate?this.eventData[i][t].timestamp_EventLastUpdate:0)+a.k6<n&&(fetch(r).then((n=>{n.json().then((n=>{switch(i){case"BackgroundImageWC":this.eventData[i][t]={cmsData:{attribution:n.headlines[0].subtitle,imageSource:n.headlines[1].title,imageHref:n.headlines[2].title,title:n.headlines[0].title},currentCreative:e[0],expiredCreatives:[],timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(t,u);break;case"SuperNav":this.eventData[i][t]={cmsData:{display:n.headlines[1].title,iconId:n.headlines[2].title,id:n.headlines[0].title,url:n.headlines[1].subtitle},currentCreative:e[0],expiredCreatives:[],timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(t,u)}}))})).catch((e=>{u?(0,o.H)(u,`Failed to call CMS data - ${i} - ${t}. url ${r}`,e):s.k.logError(e)})),(0,l.isNullOrUndefined)(this.eventData&&this.eventData[i]&&this.eventData[i][t]&&this.eventData[i][t].cmsData)))return null}let g=-1;for(let t=0;t<e.length;t++)if(e[t]===d){g=t;break}if(-1===g)return g=0,this.eventData[i][t]={currentCreative:e[g],expiredCreatives:[],timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(t,u),e[g];const h=(new Date).getTime();if(this.eventData[i][t].timestamp_EventLastUpdate+a.Uq.get(i)<h&&!n){if(g<e.length-1){const n=e[g+1];return this.dismissCreative(t,i,d,u),this.eventData[i][t]=Object.assign(Object.assign({},this.eventData[i][t]),{currentCreative:n,timestamp_EventLastUpdate:h}),this.localstorage_save(t,u),n}return this.dismissCreative(t,i,e[g],u),null}for(let n=0;n<this.eventData[i][t].expiredCreatives.length;n++)if(this.eventData[i][t].expiredCreatives[n]===e[g])return null;return e[g]}shouldShowEvent(e,t,i,n,r,o){if(!(0,c.N)())return!1;const s=(0,l.isNullOrUndefined)(this.eventData),a=this.eventData&&(0,l.isNullOrUndefined)(this.eventData[t]),d=this.eventData&&this.eventData[t]&&(0,l.isNullOrUndefined)(this.eventData[t][e]);if(s||a||d)return s?(this.eventData={},this.eventData[t]={}):a&&(this.eventData[t]={}),this.eventData[t][e]={currentCreative:this.selectCreative(i,e,t,n,r),expiredCreatives:[],timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},!!this.eventData[t][e].currentCreative&&(this.localstorage_save(e,o),!0);const u=this.eventData[t][e].currentCreative;return!!this.selectCreative(i,e,t,n,r,u,o)}}},1334:function(e,t,i){"use strict";i.d(t,{Gg:function(){return a},St:function(){return d},WW:function(){return c},YN:function(){return l},tk:function(){return n}});var n,r=i(27003),o=i(52058);!function(e){e.actionMenuOpen="actionMenuOpen",e.addTopSite="addTopSite",e.coachmark="coachmark",e.dailyDiscovery="dailyDiscovery",e.editTopSite="editTopSite",e.editWelcomeGreeting="editWelcomeGreeting",e.hamburgerMenu="hamburgerMenu",e.imageSearch="imageSearch",e.locationMarkerCard="locationMarkerCard",e.mobileAppUpsell="mobileAppUpsell",e.msRewards="msRewards",e.museumCard="museumCard",e.navOverflow="navOverflow",e.notificationBell="notificationBell",e.pivot="pivot",e.search="search",e.searchHistoryMoreOptions="searchHistoryMoreOptions",e.settings="settings",e.signInControl="signInControl",e.toast="toast",e.topSiteOverflowPanel="topSiteOverflowPanel",e.voiceSearchWC="voiceSearchWC",e.waffle="waffle",e.recommendedSitesSetting="recommendedSitesSetting",e.newsHeadlineBelowSearchboxMoreOptions="newsHeadlineBelowSearchboxMoreOptions",e.ntpSearchSuggestions="ntpSearchSuggestions"}(n||(n={}));class s{constructor(){this.flyoutOpen=!1,this.openFlyouts=new Set,this.registeredCallbacks=[]}static getInstance(){return r.Gq.get("__FlyoutCoordinationInstance__",(()=>new s))}reportFlyoutOpen(e,t){t?this.openFlyouts.add(e):this.openFlyouts.delete(e),this.flyoutOpen=this.openFlyouts.size>0;for(const i of this.registeredCallbacks)i(e,t)}registerFlyoutListener(e){this.registeredCallbacks.push(e)}unregisterFlyoutListener(e){(0,o.Z)(this.registeredCallbacks,(t=>e===t))}isFlyoutOpen(){return this.flyoutOpen}}function a(e,t){return s.getInstance().reportFlyoutOpen(e,t)}function c(e){return s.getInstance().registerFlyoutListener(e)}function d(e){return s.getInstance().unregisterFlyoutListener(e)}function l(e){return s.getInstance().openFlyouts.has(e)}},2278:function(e,t,i){"use strict";i.d(t,{HB:function(){return v}});var n=i(47903),r=i(58155),o=i(33379),s=i(12884),a=i(84169),c=i(73252);const d="//assets.msn.com",l="//assets.msn.cn",u=e=>"localhost.msn.com"===e.split(":",1)[0];function p(e){if(/^\/[\w.-]+(\/[\w.-]+)*$/.test(e))return!(e.includes("/../")||e.includes("/./")||e.endsWith("/..")||e.endsWith("/."))}function g(e){return e.startsWith("/")?e:"/"+e}function h(e){return e.endsWith("/")?e:e+"/"}function m(e){return e.startsWith("/")?e.slice(1):e}const f=(e,t,i)=>{const s=new URLSearchParams(e),f="true"===s.get("renderWidget"),v="true"===s.get("useDeployedBundles"),y=((e,t)=>t?d:u(e)?`//${e}`:a.jG.IsChinaCompliance?l:d)(t,f||v);if(s.has("entry")){const e=g(s.get("entry").split("/").slice(0,-1).join("/"));return y&&p(e)&&(u(t)||e.startsWith("/bundles"))?h(y+e):h(y)}if(y&&u(t)&&!v){if((0,o.N)())return i?y+i:i;return y+__WEBPACK_LOCAL_STATICS_PATH__}if(y){const t=c.Al.ClientSettings&&c.Al.ClientSettings.queryparams,o=(e||"").substring(1),s=(t||"").substring(1);let a=o+"&"+s;a=decodeURIComponent(a);let d=new n.h(a).get("bundles");d&&(d=p(g(d))?m(d):null);const l=r.c.getParamsWithItems(a).find((e=>"spalink"===e.key));let u=l&&l.value;if(u&&(u=p(g(u))?m(u):null,u=u?u.split("/")[0]:null),i){const e=i.split("/");return e[4]=u||(d||"latest"),y+e.join("/")}}return i},v=()=>{i.p=f((0,s.zp)(),(0,s.zw)(),i.p)}},44979:function(e,t,i){"use strict";i.d(t,{DO:function(){return c},Nd:function(){return a},fH:function(){return s}});var n=i(84169),r=i(43488),o=i(70587);class s{constructor({params:e,qspPrefix:t,spec:i}={},n){this.requestData=new r.m4(i||o.j4,t||o.mx),e&&this.requestData.loadQueryParams(e),n&&(this.RequestId=n)}get requestId(){return this.RequestId||this.app.ActivityId}get app(){return n.jG}get data(){return this.requestData.data}}function a(e,t,i=!0){if("function"==typeof e){const t=e();if(t||0===t)return t}if(i)throw new Error("Expected "+t+" to return value. Possible invalid RequestContext spec used or the spec doesn't contain this data.")}function c(e){return a(e.data.locationHref,"locationHref",!1)}},78468:function(e,t,i){"use strict";i.d(t,{E:function(){return n}});const n={prod:"//img-s-msn-com.akamaized.net/tenant/amp/entityid/"}},17769:function(e,t,i){"use strict";i.d(t,{k:function(){return s}});var n,r=i(7124);const o=null===(n=i(73252).Al.CurrentFlightSet)||void 0===n?void 0:n.has("prg-scrolldbc");function s(e,t=50,i=!0){return o?i?(0,r.Z)(e,t):(0,r.Z)(e,t,{leading:!0,trailing:!1}):e}},40537:function(e,t){"use strict";t.Z=function(e,...t){if(e){const i=/{([\d]+)}/g,n=[];let r=i.exec(e),o=0,s=0;for(;null!==r;)s=r.index,n.push(e.substring(o,s)),n.push(t[r[1]]),o=i.lastIndex,r=i.exec(e);return n.push(e.substring(o)),n}}},32050:function(e,t,i){"use strict";i.d(t,{Sm:function(){return k},br:function(){return I},cb:function(){return A}});var n=i(33940),r=i(2140);function o(e){const t=(0,r.s)();return function(i,n){if(n||(n={}),!s(n,"Referer")){const e="string"==typeof i?i:i.url;!function(e,t,i,n){const r=(c[n]||c[a])(e,t);if(delete i.referrerPolicy,!r)return;i.headers=i.headers||{},i.headers.Referer=r}(t.url,e,n,n.referrerPolicy)}return s(n,"User-Agent")||function(e,t){e.headers=e.headers||{},e.headers["User-Agent"]=`${t} (via node-fetch)`}(n,t.userAgent),e(i,n)}}function s(e,t){return e.headers&&void 0!==e.headers[t]}const a="strict-origin-when-cross-origin",c={"no-referrer":(e,t)=>{},"no-referrer-when-downgrade":(e,t)=>d(e,t)?void 0:e.href,origin:(e,t)=>e.origin+"/","origin-when-cross-origin":(e,t)=>l(e,t)?e.href:e.origin+"/","same-origin":(e,t)=>l(e,t)?e.href:void 0,"strict-origin":(e,t)=>d(e,t)?void 0:e.origin+"/","strict-origin-when-cross-origin":(e,t)=>l(e,t)?e.href:c["strict-origin"](e,t),"unsafe-url":(e,t)=>e.href};function d(e,t){return"https:"===e.protocol&&t.startsWith("http:")}function l(e,t){return t.startsWith(e.origin+"/")}var u=i(33379),p=(i(73040),i(91898)),g=i(98878),h=i(58155);function m(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i=yield g.o.get(e);return i?Promise.resolve(i):t(e).then((e=>e.blob())).then((e=>e.text())).then((t=>(g.o.set(e,t),t)))}))}function f(e,t,i,r){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(e&&t&&i))return Promise.resolve();yield g.o.set(`${e}-${t}-${i}`,r)}))}const v="https://peregrinebaselines.blob.core.windows.net/baselines";function y(e,t,i,r,o,s){var a;return(0,n.mG)(this,void 0,void 0,(function*(){const c=yield m(`${v}/${t}`,s);let d;try{d=JSON.parse(c)}catch(e){return o()}const l=null===(a=null==d?void 0:d.interceptions)||void 0===a?void 0:a.find((({urlPattern:t})=>h.c.urlPatternToRegExp(t).test(e))),u=null==l?void 0:l.interceptionsHash,y=null==l?void 0:l.urlPattern;if(u){const e=`${d.fileNamePrefix}-interceptions-${u}.json`,t=yield m(`${v}/${e}`,s),o=JSON.parse(t),a=yield function(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(e&&t&&i))return Promise.resolve(void 0);const n=`${e}-${t}-${i}`,r=yield g.o.get(n);return Promise.resolve(r)}))}(r,y,i);o[i]&&void 0!==o[i].Times&&void 0===a&&(yield f(r,y,i,o[i].Times-1));const c=o&&0!==a?o[i]:null;if(a>0)yield f(r,y,i,a-1);else if(0===a)return null;return new p.Response(null==c?void 0:c.Body,{status:null==c?void 0:c.Status,headers:null==c?void 0:c.Headers,statusText:"OK"})}return o()}))}var b=i(33954);let S,C,w;class T{constructor(){"undefined"!=typeof AbortController&&(this.controller=new AbortController)}abort(){return!!this.controller&&(this.controller.abort(),!0)}setAbortSignal(e){this.controller&&(e.signal=this.controller.signal)}}function k(e,t,i,o,s,a,c=!1){var d;return(0,n.mG)(this,void 0,void 0,(function*(){s||(s=fetch);const l=()=>function(e,t,i,r,o,s,a=!1){return(0,n.mG)(this,void 0,void 0,(function*(){o||(o=fetch),r||(r=new T),(0,u.N)()&&(s=!1);let n=null;if(void 0===t?t=w:w>0&&(t=Math.min(t,w)),t>0&&(n=1e4,n=setTimeout((()=>{if(!r.abort())throw new Error(`Fetch for ${e} aborted due to timeout of ${t} ms. AbortController is not supported.`)}),t)),i||(i={method:"GET"}),!(0,u.N)()&&!i.agent&&S&&C){const e=function(e){return"http:"===e.protocol?S:C};i.agent=e}(0,u.N)()||i.headers&&i.headers.Connection||(i.headers=new Headers(i.headers),i.headers.set("Connection","keep-alive")),i.signal||r.setAbortSignal(i);const c=performance.now();let d,l=0;const p={};let g;const h=()=>{if(!(0,u.N)()){const i={abortableFetch:{url:e,statusCode:l,timestamp:(new Date).toISOString(),timeElapsed:(performance.now()-c).toFixed(2),timeOut:t.toFixed(2),oneWebServiceLatency:g,errorMessage:d&&d.message,errorName:d&&d.name,errorCode:d&&d.code,errorType:d&&d.type,cluster:p.cluster,afd:p.afd}};a||b.k.logSingleObject(i,!0)}n&&clearTimeout(n)};return o(e,i).then((e=>{var t,i,n;return l=e.status,g=null===(t=e.headers)||void 0===t?void 0:t.get("onewebservicelatency"),s&&(p.cluster=e.headers.get("x-fabric-cluster")||(null===(n=null===(i=e.headers.get("ddd-debugid"))||void 0===i?void 0:i.split("|"))||void 0===n?void 0:n[3]),p.afd=e.headers.get("x-msedge-ref")),e})).catch((i=>{if(d=i,"AbortError"===i.name)throw new Error(`Fetch for ${e} aborted due to timeout of ${t} ms.`);throw new Error(i)})).then((e=>(h(),e)),(e=>{throw h(),e}))}))}(e,t,i,o,s,a,c);if((0,u.N)())return l();const p=(0,r.s)(),g=null===(d=null==p?void 0:p.url)||void 0===d?void 0:d.searchParams,h=null==g?void 0:g.get("interceptions-config-file"),m=null==g?void 0:g.get("ssrTimestamp");return!(!h||!(null==i?void 0:i.method))?y(e,h,i.method,m,l,s):l()}))}function A(){return{abortToken:null,timeoutMs:900,fetchImpl:o(fetch)}}function I(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){return i||(i=A()),k(e,i.timeoutMs,t,i.abortToken,i.fetchImpl,i.trackApiClusterInServer)}))}},49926:function(e,t,i){"use strict";i.d(t,{AE:function(){return o}});var n=i(46336);let r;function o(e,t){if(!e)return null;if(t)return function(e){var t;const i=null===(t=document.cookie)||void 0===t?void 0:t.match(`\\b${e}=([^;]*)`);return i?(0,n.fB)(i[1]):null}(e);if(!r){const e="undefined"!=typeof document&&document.cookie.split("; ");r={};const t=e&&e.length;for(let i=0;i<t;i++){const t=e[i].indexOf("=");r[e[i].slice(0,t).toLocaleLowerCase()]=(0,n.fB)(e[i].slice(t+1))}}const i=e.toLocaleLowerCase();return r[i]||null}},41115:function(e,t,i){"use strict";i.d(t,{N6:function(){return a},j3:function(){return s}});var n=i(27003);const r=()=>n.Gq.get("__core_DisplayModeCoordination_displayModeMap__",(()=>({}))),o=()=>n.Gq.get("__core_DisplayModeCoordination_callbackMap__",(()=>({})));function s(e,t){const i=r();if(i[e]===t)return;i[e]=t;const n=o()[e];if(n)for(const e of n)e(t)}function a(e,t){const i=o(),n=r();let s=i[e];s||(s=[],i[e]=s),s.push(t);const a=n[e];a&&t(a)}},11326:function(e,t,i){"use strict";function n(e){return!(e&&e.length)}i.d(t,{x:function(){return n}})},82891:function(e,t,i){"use strict";i.d(t,{Xw:function(){return s},Z3:function(){return c},h_:function(){return d},rP:function(){return a}});var n=i(58155),r=i(84169);const o=/\{localeCode\}|\{0\}/;function s(e,t){const i=n.c.encodeURIComponentForPrime(t).toLowerCase(),{HostPage:o}=r.jG;if(o){const t=new URL(o.originalUrl);return t.origin+"/"+o.verticalKey+"/"+o.categoryKey+"/interests/"+i+"/"+r.jG.CurrentMarket+"/f-"+e+t.search}return"https://www.msn.com"}function a(){return`${r.jG.NavTargetUrlWithLocale}/feed/personalize/settings`}function c(){return`${r.jG.NavTargetUrlWithLocale}/news`}function d(e){return e&&(e=e.replace("{hostName}",r.jG.NavTargetHostName).replace(o,r.jG.CurrentMarket)),e}},8228:function(e,t,i){"use strict";function n(){try{return localStorage}catch(e){return null}}function r(){try{return sessionStorage}catch(e){return null}}i.d(t,{N:function(){return r},U:function(){return n}})},28973:function(e,t,i){"use strict";i.d(t,{H2:function(){return u},Rz:function(){return g},_3:function(){return h},pE:function(){return f},tr:function(){return l},wq:function(){return m},xs:function(){return p}});var n,r=i(33379),o=i(76323);!function(e){e.outlookMobile="OnOOutlookMobile",e.officeMobile="OnOOfficeMobile",e.sapphire="OnOStartApp",e.skype="OnOSkype",e.winWeatherApp="weather-app-win",e.winMoneyApp="finance-app-win"}(n||(n={}));let s=v("ocid"),a=v("chpltfm"),[c,d]=a.toLowerCase().split("-");function l(){if(!(0,r.N)())return!1;const e=window.sapphireWebViewBridge,t=window.webkit,i=e&&e.send,n=t&&t.messageHandlers&&t.messageHandlers.send&&t.messageHandlers.send.postMessage;return!(!i&&!n)}function u(){const e=a&&"outlook"===c&&["ios","android"].includes(d),t=s===n.outlookMobile;return e||t}function p(){const e=a&&"office"===c&&["ios","android"].includes(d),t=s===n.officeMobile;return e||t}function g(){return u()||p()}function h(){const e=s===n.skype||"skype"===c;return(0,r.N)()&&(null===(t=window.skypeWebviewBridge)||void 0===t?void 0:t.isSkype)||e;var t}function m(){return l()||s===n.sapphire||"superappdhp"===s}const f=(0,o.p)((()=>l()||h()||p()||u()||m()||s===n.winWeatherApp||s===n.winMoneyApp));function v(e){try{return new URL(location.href).searchParams.get(e)||""}catch(e){return""}}},70694:function(e,t,i){"use strict";i.d(t,{p:function(){return n}});var n,r=i(12108),o=i(84169),s=i(73252);!function(e){e.isDhpPage=function(){return s.Al.ClientSettings.pagetype===r.G.DHP},e.isNtpPage=function(){return s.Al.ClientSettings.pagetype===r.G.NTP},e.fiveColSupported=function(){return o.jG.EnableFiveColLayout}}(n||(n={}))},46336:function(e,t,i){"use strict";function n(e){try{if(e)return JSON.parse(e)}catch(e){}return null}function r(e,t){const i=parseInt(e);return isNaN(i)?t:i}function o(e){try{return JSON.stringify(e)}catch(e){return null}}function s(e){let t;return null!=e&&(t=n(e),null!=t)?t:null}function a(e){try{return decodeURIComponent(e)}catch(e){}}i.d(t,{Vm:function(){return o},dW:function(){return n},fB:function(){return a},hh:function(){return r},sF:function(){return s}})},17913:function(e,t,i){"use strict";i.d(t,{X:function(){return n}});class n{constructor(e){this.onSubscriptionCallbackError=e,this.eventLookup={}}publish(e,t){let i=this.eventLookup[e];if(void 0!==i){i=i.slice();let n=i.length;for(;n-- >0;)try{i[n](t)}catch(i){this.onSubscriptionCallbackError&&this.onSubscriptionCallbackError(i,e,n,t)}}}subscribe(e,t){void 0===this.eventLookup[e]&&(this.eventLookup[e]=[]);const i=this.eventLookup[e];return i.push(t),{dispose(){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}subscribeOnce(e,t){const i=this.subscribe(e,(function(e){i.dispose(),t(e)}));return i}}},31293:function(e,t,i){"use strict";i.d(t,{$z:function(){return l},Cv:function(){return u},NJ:function(){return g},Pz:function(){return d},Qq:function(){return S},Sq:function(){return b},bg:function(){return y},cD:function(){return m},cf:function(){return p},kJ:function(){return h},ll:function(){return f},nl:function(){return v}});var n=i(2040),r=i(33379),o=i(65337),s=i(73252);const a="ntp.selected_feed_pivot";function c(){return"undefined"!=typeof window&&window&&window.chrome&&window.chrome.ntpSettingsPrivate}function d(){const e=c();e&&e.setPref&&e.setPref(a,""),s.Al.SelectedFeedPivot="",(0,o.$o)().removeItem(n.pv)}function l(){const e=null===s.Al||void 0===s.Al?void 0:s.Al.SelectedFeedPivot;if((0,r.N)()){const e=c(),t=(0,o.$o)().getItem(n.pv);if(t)return e&&e.setPref&&(e.setPref(a,t),s.Al.SelectedFeedPivot=t,(0,o.$o)().removeItem(n.pv)),t}return e}function u(e){"1"===e.get("gaming")&&p("gaming")}function p(e){h(e);const t=c();t&&t.setPref?(t.setPref(a,e),s.Al.SelectedFeedPivot=e):(0,o.$o)().setItem(n.pv,e)}function g(){return(0,o.$o)().getItem(n.Kj)}function h(e){(0,o.$o)().setItem(n.Kj,e)}function m(){(0,o.$o)().removeItem(n.Kj)}function f(){var e;return null!==(e=(0,o.$o)().getItem(n.Ib))&&void 0!==e?e:n.uD.Init}function v(e){(0,o.$o)().setItem(n.Ib,e)}function y(){(0,o.$o)().removeItem(n.Ib)}function b(){return(0,o.$o)().getItem(n.xG)}function S(){(0,o.$o)().removeItem(n.xG)}},70493:function(e,t,i){"use strict";i.d(t,{U:function(){return r}});const n=[];function r(e){n.push(e)}},36803:function(e,t,i){"use strict";i.d(t,{R:function(){return n}});const n=e=>e&&"string"==typeof e&&e.trim&&!!e.trim()},9375:function(e,t,i){"use strict";i.d(t,{GI:function(){return c},ku:function(){return s},w_:function(){return a}});var n=i(65135),r=i(84169),o=i(2040);function s(){var e;if(!n.M0)return;const t=null===(e=n.M0.getPageMetadata)||void 0===e?void 0:e.call(n.M0);return t&&t.contract&&t.contract.page?t.contract.page.ocid:void 0}function a(e){if("windowsShell"===r.jG.AppType||"windowsShellV2"===r.jG.AppType)return function(e){if(!e)return e;try{const t=new URL(e),i=t.searchParams;return s()&&i.set("ocid",s()),i.set("cvid",n.M0.getRequestId()),t.toString()}catch(t){return e}}(e);const t=s(),i=e.toLowerCase();if(!t||-1!=i.indexOf("?ocid=")||-1!=i.indexOf("&ocid="))return e;const o=-1==e.indexOf("?")?"?":"&";return`${e}${o}ocid=${encodeURIComponent(t)}`}function c(e){if(!e)return null;const t=Object.assign({},e);return t[o.Yu.entAuthorization]&&(t[o.Yu.entAuthorization]="*****"),t[o.Yu.rpsToken]&&(t[o.Yu.rpsToken]="*****"),t[o.Yu.authorization]&&(t[o.Yu.authorization]="*****"),t}},47903:function(e,t,i){"use strict";i.d(t,{h:function(){return n}});class n{constructor(e){this.searchParams=Object.create(null),this.parseQueryString(e)}set(e,t){return null!=t&&(this.searchParams[e]=t),this}get(e){return this.searchParams[e]}delete(e){delete this.searchParams[e]}toString(){const e=Object.keys(this.searchParams);return e.length?e.sort().map((e=>`${e}=${this.searchParams[e]}`)).join("&"):""}parseQueryString(e){if(!e)return;const t=e.indexOf("?");t>-1&&(e=e.substring(t+1)),e.split("&").forEach((e=>{const t=e.split("="),i=t[0];this.get(i)||(this.searchParams[i]=t[1])}))}}},58155:function(e,t,i){"use strict";i.d(t,{c:function(){return n}});var n,r=i(88352),o=i(79022),s=i(54433),a=i(92170),c=i(13578),d=i(50769),l=i(37242),u=i(12884);!function(e){const t=/[^A-Za-z0-9]+/g;function i(e,t=!1){if(!(0,o.Z)(e))return null;return p((e||"").split("?")[1],t)}function n(e){return e=e.replace(/\+/g," "),e=decodeURIComponent(e)}function p(e,t=!1){const i=[];if(e&&e.startsWith("?")&&(e=e.substring(1)),e){const r=(e=e.split("#")[0]).split("&");for(let e=0;e<r.length;e++){const o=r[e].split("=");let a=o[0],c=o[1];t&&(a=n(a),c&&(c=n(c)));const d={key:a,value:c},l=(0,s.Z)(i,(e=>e.key===d.key));-1===l?i.push(d):i[l]=d}}return i}e.getParamsFromUrl=i,e.encodeURIComponentForPrime=function(e){return encodeURIComponent(e.replace(t,"-"))},e.getParams=p,e.getParamsWithItems=function(e,t=!1,i="item"){const r=[];if(e){e.startsWith("?")&&(e=e.substring(1));const o=(e=e.split("#")[0]).split("&");for(let e=0;e<o.length;e++){const s=o[e].split("=");let a=s[0],c=s[1];if(t&&(a=n(a),c&&(c=n(c))),a.toLowerCase()===i){c=c.replace("::::",";;;;");const e=c.split(":");if(2===e.length){a=e[0],c=e[1].replace(";;;;","::::");const t={key:a,value:c};-1===r.findIndex((e=>e.key===t.key))&&r.push(t)}}}}return r};const g={};function h(e){const t={},n=i(e,!0);return n&&n.length&&n.forEach((e=>t[e.key]=e.value)),t}e.getQueryParameterByName=function(e,t){g[t]||(g[t]=h(t));const i=g[t][e];return void 0!==i?i:null},e.isValidUrl=function(e,t){return(0,o.Z)(e)&&e.length>0&&(!t||t&&0===e.indexOf("http"))},e.keyValueArrayToQueryString=function(e){return!(0,a.Z)(e)||(0,c.Z)(e)?"":e.filter((e=>r.b.isKeyValuePair(e,(e=>"string"==typeof e),(e=>"string"==typeof e)))).map((e=>e.key+"="+e.value)).join("&")},e.getParamsObj=h,e.joinSubpathToURL=function(e,t){const i=e.href,n=(0,d.Z)(i,"/"),r=(0,l.Z)(t,"/");return new URL(`${n}/${r}`)},e.updateSearchParam=function(e,t,i){return e&&e.searchParams&&e.searchParams.get(t)&&e.searchParams.set(t,i),e},e.appendSearchParam=function(e,t,i,n){return e&&(e.searchParams||n?e.searchParams.append(t,i):e=new URL(e.href+(e.search.indexOf("?")>=0?"&":"?")+t+"="+i)),e},e.getAbsoluteUrl=function(e){return e.indexOf("://")>0||0===e.indexOf("//")?e:(0,u.Dp)()+e};const m=new Set(["/","$","^","+",".","(",")","=","!","|"]);e.urlPatternToRegExp=function(e){if(0==e.indexOf("/")&&e.lastIndexOf("/")>0){const t=e.slice(1,e.lastIndexOf("/")),i=e.substring(e.lastIndexOf("/")+1)||void 0;return new RegExp(t,i)}return function(e){const t=["^"];let i;for(let n=0;n<e.length;++n){const r=e[n];if(m.has(r))t.push("\\"+r);else if("*"!==r)switch(r){case"?":t.push(".");break;case"{":i=!0,t.push("(");break;case"}":i=!1,t.push(")");break;case",":if(i){t.push("|");break}t.push("\\"+r);break;default:t.push(r)}else{const i=e[n-1];let r=1;for(;"*"===e[n+1];)r++,n++;const o=e[n+1];!(r>1)||"/"!==i&&void 0!==i||"/"!==o&&void 0!==o?t.push("([^/]*)"):(t.push("((?:[^/]*(?:/|$))*)"),n++)}}return t.push("$"),new RegExp(t.join(""))}(e)},e.compareURLs=function(e,t){try{const i=new URL(e),n=new URL(t),r=i.searchParams,o=n.searchParams,s=[],a=[],c=[];return r.forEach(((e,t)=>{o.has(t)?o.get(t)!==r.get(t)&&c.push(t):a.push(t)})),o.forEach(((e,t)=>{r.has(t)||s.push(t)})),{hostMismatch:i.hostname!==n.hostname,pathMismatch:i.pathname!==n.pathname,paramsMissingLeft:s.join(","),paramsMissingRight:a.join(","),paramsDiff:c.join(",")}}catch(e){return{}}}}(n||(n={}))},88352:function(e,t,i){"use strict";i.d(t,{b:function(){return n}});var n,r=i(79022),o=i(43698);!function(e){function t(e){return null!=e}e.isNotNullOrUndefined=t,e.isDefined=function(e){return void 0!==e},e.isKeyValuePair=function(t,i,n){return e.isNonNullObject(t)&&i(t.key)&&n(t.value)},e.isNonNullObject=function(e){return e&&"object"==typeof e},e.isNotNull=function(e){return null!==e},e.isNullOrWhiteSpace=function(e){return!(0,r.Z)(e)||""===e.trim()},e.toNumber=function(e,t=-1){if(!e)return t;const i=(0,o.Z)(e);return isNaN(i)?t:i},e.arrayHasData=function(e){return!!t(e)&&(e.constructor===Array&&e.length>0)},e.stringHasData=function(e){return(0,r.Z)(e)&&e.trim().length>0},e.objectToString=function e(t){let i="",n=!0;if("object"!=typeof t)return i;for(const r in t)"object"==typeof t[r]?i+=n?`${e(t[r])}`:`-${e(t[r])}`:i+=n?`${t[r]}`:`-${t[r]}`,n=!1;return i},e.removeHyphens=function(e){if(e)return e.replace(/-/g,"")}}(n||(n={}))},94788:function(e,t,i){"use strict";i.d(t,{Fr:function(){return m},R0:function(){return l},mS:function(){return v},ot:function(){return f},rh:function(){return y},yb:function(){return d}});var n=i(21050),r=i(26415),o=i(33954),s=i(49972),a=i(33379),c=i(84169);let d,l;const u=new Map;let p;const g=(0,n.oA)("WebWorkerUtility","WebWorkerUtility",!0),h=new Map,m=e=>{if(!e)return;const t=h.get(e);return t?(h.delete(e),t):void 0};function f(e,t,i=!0,n=!0){const s={id:e&&e.id||"",fetched:!1,payload:null};if(!e||!e.id)return Promise.resolve(s);if(!d&&(!l||l&&"appanoncookie"!==e.id))return Promise.resolve(s);const a=g&&g.startMeasure(e.id).endMeasure,c=h.get(e.id);if(c)return n&&h.delete(e.id),a&&a({customSuffix:"standbymessage"}),Promise.resolve(c);let m,f;t&&(f=new Promise((n=>{m=setTimeout((()=>{u.delete(e.id);const c=`Web worker request timed out after ${t}ms for request id: [${e.id}]`;i&&(p?p(Object.assign(Object.assign({},r.ZaX.MessageTimeout),{message:"Web worker request timed out",pb:Object.assign(Object.assign({},r.ZaX.MessageTimeout.pb),{customMessage:c})})):o.k.logError(c)),a&&a({customSuffix:"timeout"}),n(Object.assign(Object.assign({},s),{timeout:!0}))}),t)})));const v=new Promise((t=>{u.set(e.id,{type:e.type||"data",callback:e=>{m&&clearTimeout(m),a&&a(),t(e)}})}));return window.webWorker.postMessage({id:e.id,type:e.type||"data",payload:e.payload}),t?Promise.race([v,f]):v}function v(e){d&&e&&e.id&&window.webWorker.postMessage({id:e.id,type:e.type||"command",payload:e.payload||null})}function y(e){if(!d||!e||"function"!=typeof e)return;p=function(t){try{e(t)}catch(e){o.k.logError(`Failed to log web worker AppError. Error: ${(0,s.n)(e)}`)}},window.webWorker.onerror=b;var t,i;t={id:"WebWorkerError",type:"subscription"},i=e=>{if(e.payload&&"object"==typeof e.payload){const t=e.payload;t.pb=Object.assign(Object.assign({},t.pb),(0,r.mnt)()),p(t)}else p(Object.assign(Object.assign({},r.ZaX.HandledError),{message:"Web worker error",pb:Object.assign(Object.assign({},r.ZaX.HandledError.pb),{customMessage:JSON.stringify(e.payload||"")})}))},d&&t&&"subscription"===t.type&&i&&(u.set(t.id,{type:"subscription",callback:i}),window.webWorker.postMessage(t)),setTimeout((()=>{window.webWorkerErrors&&Array.isArray(window.webWorkerErrors)&&(window.webWorkerErrors.forEach((e=>{b(e)})),delete window.webWorkerErrors)}))}function b(e){if(!e.filename)return d=!1,window._isWebWorkerPresent=d,window.webWorker.terminate(),void p(Object.assign(Object.assign({},r.ZaX.FileNotFound),{message:"Web worker script not found",pb:Object.assign(Object.assign({},r.ZaX.FileNotFound.pb),{customMessage:JSON.stringify(S(e))})}));p(Object.assign(Object.assign({},r.ZaX.RuntimeError),{message:"Web worker runtime error",pb:Object.assign(Object.assign({},r.ZaX.RuntimeError.pb),{customMessage:JSON.stringify(S(e))})}))}function S(e){return JSON.stringify({filename:e.filename,message:e.message,lineno:e.lineno})}var C;d=!1,l=!1,(0,a.N)()&&(d=void 0!==C?C:!!window.webWorker,window._isWebWorkerPresent=d,l=d),"edgeChromium"===c.jG.AppType&&(d=!1,c.jG.StaticDomain&&c.jG.StaticDomain.endsWith("cn")&&(l=!1)),(d||l)&&(window.webWorker.onmessage=e=>{const{data:t}=e,i=u.get(t.id);if(!i)return void h.set(t.id,t);"data"===i.type&&u.delete(t.id);const n=i.callback;n&&n(t)},setTimeout((()=>{window.webWorkerMessages&&Array.isArray(window.webWorkerMessages)&&(window.webWorkerMessages.forEach((e=>{e.id&&h.set(e.id,e)})),delete window.webWorkerMessages)})))},64434:function(e,t,i){"use strict";var n;i.d(t,{K:function(){return n}}),function(e){e[e.Banner=999999]="Banner",e[e.CookieWall=1100]="CookieWall",e[e.Dialog=900]="Dialog",e[e.Flyout=700]="Flyout",e[e.Overlay=600]="Overlay",e[e.Nav=500]="Nav",e[e.Over=300]="Over",e[e.Above=100]="Above",e[e.Default=0]="Default",e[e.Below=-1]="Below",e[e.Buried=-2]="Buried"}(n||(n={}))},36802:function(e,t,i){"use strict";i.d(t,{L:function(){return c}});var n=i(33379),r=i(85663);let o=!1,s=!1;function a(){!o&&document.hidden&&(s=!0)}function c(){return s}(0,n.N)()&&(window.addEventListener&&window.addEventListener("beforeunload",(function(){o=!0})),(0,r.isNullOrUndefined)(document.hidden)||document.addEventListener("visibilitychange",a),a())},65337:function(e,t,i){"use strict";i.d(t,{$o:function(){return s}});var n=i(77419),r=i(33379);class o extends n.C{constructor(){let e=null;if((0,r.N)())try{e=localStorage}catch(e){}super(e)}}function s(){return a}let a=new o},16078:function(e,t,i){"use strict";i.d(t,{D:function(){return o}});var n=i(26415),r=i(33379);function o(e){if((0,r.N)()){const t="storageTest";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){(e||"function"==typeof e)&&e(Object.assign(Object.assign({},n.mmU.LocalStorageDoesntExist),{message:`Local Storage is not defined ${t}`}))}}return!1}},93853:function(e,t,i){"use strict";i.d(t,{y7:function(){return s}});var n=i(77419),r=i(33379);class o extends n.C{constructor(){let e=null;if((0,r.N)())try{e="sessionStorage"in window&&window.sessionStorage}catch(e){}super(e)}}let s=new o},40715:function(e,t,i){"use strict";i.d(t,{g:function(){return o}});var n=i(26415),r=i(33379);function o(e){if((0,r.N)()){const t="storageTest";try{return window.sessionStorage.setItem(t,t),window.sessionStorage.removeItem(t),!0}catch(t){(e||"function"==typeof e)&&e(Object.assign(Object.assign({},n.mmU.SessionStorageDoesntExist),{message:`Session Storage is not defined: ${t}`}))}}return!1}},77419:function(e,t,i){"use strict";i.d(t,{C:function(){return o}});var n=i(46336),r=i(33954);class o{constructor(e){this.storage=e}get supported(){return!!this.storage}getItem(e){if(this.supported)return this.storage.getItem(e)}getObject(e,t){const i=this.getItem(e);if(null!=i){const e=(0,n.dW)(i);if(null!=e)return e}return t}key(e){if(this.supported&&e>=0)return this.storage.key(e)}keys(){return this.supported?Object.keys(this.storage):[]}setObject(e,t){void 0!==t?this.setItem(e,JSON.stringify(t)):this.removeItem(e)}removeObject(e){const t=this.removeItem(e);if(null!=t)return(0,n.dW)(t)}setItem(e,t,i=!0){if(this.supported)try{if(!t)throw"Attempted to store null/undefined value: "+t;this.storage.setItem(e,t)}catch(e){if(!i)throw e;r.k.logError(e)}else if(!i)throw new Error("WebStorage not supported")}get length(){if(this.supported)return this.storage.length}removeItem(e){if(this.supported){const t=this.getItem(e);return this.storage.removeItem(e),t}}clear(){this.supported&&this.storage.clear()}removeSubstringKeys(e){if(!this.supported||!e)return;const t=[];for(let i=0;i<this.storage.length;i++){const n=this.key(i);n&&n.includes(e)&&t.push(n)}for(let e=0;e<t.length;e++)this.removeItem(t[e])}}},24066:function(e,t,i){"use strict";i.d(t,{b:function(){return c}});var n=i(33940),r=i(65135),o=i(75384),s=i(73),a=i(33379);function c(e,t,c){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(0,a.N)())return;const n=yield i.e("diagnostic-web-vitals").then(i.bind(i,45436));(0,o.lr)().then((()=>{const i=c?{timeToPageReveal:e[s.Y5],timeToPageVisible:e[s.U4]}:void 0;n.initDiagnosticsWebVitals((e=>{r.M0.sendLoadTimeEvent({markers:e}),Object.entries(e).forEach((([e,i])=>{t[e]=i}))}),e&&e[s.dd]||-1,i)}))}))}},26415:function(e,t,i){"use strict";i.d(t,{$9$:function(){return zs},$AQ:function(){return So},$Ej:function(){return xr},$HJ:function(){return wr},$YQ:function(){return Fa},$eW:function(){return Rc},$mw:function(){return As},$qz:function(){return nd},$t:function(){return eu},A0i:function(){return ri},A49:function(){return Ys},A9I:function(){return Xd},A9S:function(){return Ie},ADY:function(){return Ot},AEH:function(){return Yu},AIp:function(){return bt},ASE:function(){return Pt},ATH:function(){return _e},AVH:function(){return mu},AWv:function(){return pt},AYT:function(){return E},Abn:function(){return bo},Aps:function(){return Us},AvP:function(){return K},Ay$:function(){return Ea},B0A:function(){return Gi},B5f:function(){return td},B70:function(){return Ti},BFw:function(){return Sd},BO7:function(){return C},BPe:function(){return Cl},BXO:function(){return co},BZ0:function(){return $},BfX:function(){return ml},BlE:function(){return g},C4I:function(){return wl},C6c:function(){return u},CBH:function(){return cn},CBf:function(){return Fn},CBr:function(){return Qs},CLx:function(){return Hu},CPU:function(){return rn},CPg:function(){return lr},CR1:function(){return Vu},CS7:function(){return Tt},Cab:function(){return Wn},Ceo:function(){return G},Cfk:function(){return Ze},CgS:function(){return id},ChW:function(){return pa},Cn7:function(){return ir},Cy3:function(){return lt},D2d:function(){return Xa},DKZ:function(){return Ba},DWC:function(){return Fs},Dag:function(){return Ll},DnH:function(){return Mt},DnN:function(){return vd},DxP:function(){return Jn},DyR:function(){return ei},Dzt:function(){return zd},E$N:function(){return ua},E0X:function(){return Ql},E7H:function(){return oo},EDA:function(){return d},EDN:function(){return tp},EF$:function(){return Ia},EW7:function(){return ks},EWv:function(){return Os},EXN:function(){return vn},EYv:function(){return wc},Ecq:function(){return Jr},Eh0:function(){return gt},EhB:function(){return un},Emt:function(){return dl},Eny:function(){return oa},EoX:function(){return rt},EuY:function(){return gd},Evv:function(){return ot},Ez4:function(){return Pn},F$$:function(){return Dd},FEC:function(){return ld},FLG:function(){return yc},FQ3:function(){return gn},Fb$:function(){return zu},Fe_:function(){return Ws},Fst:function(){return Dc},FtH:function(){return od},FwV:function(){return j},G0I:function(){return Mi},G1Z:function(){return A},G2o:function(){return cp},G7x:function(){return va},G9t:function(){return Yr},GAO:function(){return Br},GI7:function(){return Qn},GJQ:function(){return pc},GJW:function(){return Ta},GKo:function(){return Do},GQ:function(){return a},GU:function(){return V},GVt:function(){return N},GYz:function(){return Ja},GeL:function(){return Lr},Gm$:function(){return we},GrI:function(){return z},GyY:function(){return sl},H1V:function(){return Vd},H4x:function(){return O},H5g:function(){return Pe},H79:function(){return jo},H8e:function(){return be},HCR:function(){return hl},HFn:function(){return Q},HG5:function(){return $u},HKp:function(){return U},HN$:function(){return Ms},HOH:function(){return cu},HWG:function(){return Md},HYO:function(){return _n},HkJ:function(){return us},HpJ:function(){return ya},Hrk:function(){return vl},HuD:function(){return zo},Hx8:function(){return ol},I2B:function(){return Je},I8d:function(){return Nc},I9d:function(){return Qd},IA3:function(){return ie},IE6:function(){return No},IEE:function(){return tu},IIT:function(){return Rd},IIV:function(){return ud},ILq:function(){return qo},ITJ:function(){return Ur},IU$:function(){return Jt},IVG:function(){return po},Ia3:function(){return ll},Ibk:function(){return yd},IfP:function(){return Zn},IgS:function(){return zl},Ijl:function(){return _i},IrA:function(){return Mn},ItM:function(){return nc},Iye:function(){return dp},J5c:function(){return Co},JGn:function(){return nl},JIJ:function(){return Yt},J_3:function(){return Xr},J_L:function(){return Cs},J_l:function(){return ad},JaT:function(){return ys},Jap:function(){return xe},Jj8:function(){return Ts},Jus:function(){return qr},K73:function(){return $n},K8d:function(){return Xe},KKn:function(){return kr},KX1:function(){return Qo},KY$:function(){return Td},K_X:function(){return Zs},Kdk:function(){return Fi},Knl:function(){return _r},Kp5:function(){return Qa},Krs:function(){return Dt},KyA:function(){return Wc},Kz0:function(){return Ud},KzX:function(){return To},L90:function(){return Ir},L9E:function(){return is},LBG:function(){return se},LIN:function(){return en},LO8:function(){return qs},LP$:function(){return Ai},LPj:function(){return ql},LRf:function(){return An},LWq:function(){return rd},LXY:function(){return cd},L_x:function(){return xl},LnJ:function(){return pd},LwW:function(){return Kt},LxB:function(){return wd},M2Y:function(){return jl},M3l:function(){return Oi},MCu:function(){return Xi},MD5:function(){return Ar},MFQ:function(){return $s},ML7:function(){return lc},MMt:function(){return Rt},MOe:function(){return sr},MPp:function(){return Vt},MRH:function(){return on},MTg:function(){return Xu},MW5:function(){return bl},MWq:function(){return Tn},MYh:function(){return Pu},M_5:function(){return Zr},MaG:function(){return M},Me0:function(){return or},MmB:function(){return Xt},Mqi:function(){return Za},Ms:function(){return Ps},Mw:function(){return pl},N1G:function(){return Bn},N1Y:function(){return sd},N4n:function(){return Js},N6m:function(){return pn},NFm:function(){return Ra},NGC:function(){return Ee},NKp:function(){return Gn},NMS:function(){return nt},NNy:function(){return Nu},NYk:function(){return Pi},Nol:function(){return Oo},NqK:function(){return $a},NvH:function(){return ds},Nxj:function(){return Qt},O0T:function(){return he},O0V:function(){return $d},O3:function(){return Kr},O5R:function(){return Hr},OE6:function(){return vr},OFV:function(){return Qr},OHc:function(){return Un},OLX:function(){return eo},OLe:function(){return pi},OPi:function(){return T},OWM:function(){return qn},Oat:function(){return Au},OcW:function(){return xd},Od5:function(){return dr},OeS:function(){return D},OjJ:function(){return Lo},OnJ:function(){return br},OqK:function(){return to},OrY:function(){return Ui},OxM:function(){return rr},P2p:function(){return Ml},PBJ:function(){return au},PFH:function(){return Fo},PKn:function(){return Ol},PMq:function(){return el},PQq:function(){return Ht},PTG:function(){return ls},PUT:function(){return qd},Php:function(){return ue},Psw:function(){return ut},PwI:function(){return jd},Q3R:function(){return qi},Q48:function(){return Ho},QE_:function(){return El},QQk:function(){return er},QXe:function(){return os},Qc1:function(){return Yd},Qc7:function(){return Es},QcE:function(){return du},Qhc:function(){return Be},Qhy:function(){return On},Qv4:function(){return Eu},QyX:function(){return Pl},RD:function(){return Rs},RLb:function(){return Rn},RXg:function(){return Ac},ReU:function(){return $c},Rln:function(){return Ki},RzE:function(){return Gd},S2e:function(){return bn},S3q:function(){return za},S5R:function(){return Io},S6L:function(){return ci},SJe:function(){return xa},SNZ:function(){return jr},SSg:function(){return pe},STX:function(){return Tu},SWs:function(){return mc},SX$:function(){return De},SaE:function(){return Kn},ScI:function(){return sa},Sky:function(){return Sl},Sp0:function(){return ae},SpS:function(){return _o},SqC:function(){return hd},Sr_:function(){return Ue},SyQ:function(){return mo},SyX:function(){return ep},T5b:function(){return Bs},TBk:function(){return it},TGz:function(){return Vr},THd:function(){return Or},TTr:function(){return ar},TVf:function(){return wn},Tfi:function(){return Bl},TmC:function(){return ts},TyC:function(){return $r},TyD:function(){return mi},U:function(){return Wr},U7j:function(){return go},UBn:function(){return de},UDB:function(){return yl},UDr:function(){return ws},UOk:function(){return ec},UPS:function(){return Wl},US9:function(){return b},UVO:function(){return Yn},UWM:function(){return Jo},UX3:function(){return xn},Ukr:function(){return mr},Uqx:function(){return Wi},V$n:function(){return je},V3_:function(){return Pr},V9n:function(){return $t},VHu:function(){return Sc},VWS:function(){return so},Vak:function(){return xc},VdR:function(){return Lu},Vdp:function(){return al},ViJ:function(){return Zd},ViL:function(){return ic},VkE:function(){return Ga},Vl:function(){return $i},Vpp:function(){return ht},Vsq:function(){return fn},Vwf:function(){return J},VzI:function(){return Fl},W1d:function(){return wt},W7q:function(){return sc},W91:function(){return dd},WA8:function(){return hs},WBP:function(){return cr},WCL:function(){return ui},WD2:function(){return H},WJE:function(){return Su},WKi:function(){return Iu},WNM:function(){return Ua},WQV:function(){return Na},WXX:function(){return W},Wct:function(){return kt},WiH:function(){return il},WnH:function(){return He},X1V:function(){return fr},X66:function(){return Ks},X9E:function(){return uu},X9Z:function(){return Vc},XD:function(){return l},XFR:function(){return f},XI8:function(){return ti},Xr9:function(){return su},Xw0:function(){return $l},Y2u:function(){return Eo},Y8J:function(){return rc},Y9r:function(){return fl},YSG:function(){return mn},YVg:function(){return Ca},YVm:function(){return Gu},Yg3:function(){return Vo},YlS:function(){return Si},Yon:function(){return vc},Yr5:function(){return _d},Ytw:function(){return oe},Z$l:function(){return La},Z1G:function(){return xt},Z1l:function(){return Le},ZHI:function(){return an},ZIZ:function(){return hu},ZSB:function(){return Wt},ZZK:function(){return kl},ZaX:function(){return Zt},Zfy:function(){return ul},Zj1:function(){return zt},Zmj:function(){return Ve},Zt_:function(){return In},Zwk:function(){return Yl},_5e:function(){return Dl},_7Q:function(){return ka},_8J:function(){return Il},_Gv:function(){return fa},_I9:function(){return tc},_QI:function(){return Xl},_Rg:function(){return di},_Y2:function(){return P},_bN:function(){return En},_c7:function(){return L},_fX:function(){return op},_ig:function(){return tn},_lB:function(){return k},_ni:function(){return ge},_tv:function(){return fe},_vs:function(){return bs},_wC:function(){return yr},_yq:function(){return Hc},a2y:function(){return dn},a3w:function(){return Dr},a4J:function(){return at},a63:function(){return sp},a6r:function(){return Mc},a8F:function(){return yt},a8G:function(){return ta},aB8:function(){return _u},aFk:function(){return Zc},aKV:function(){return ke},aO:function(){return le},aPD:function(){return Te},ak3:function(){return ga},alw:function(){return Mu},arc:function(){return tr},bAs:function(){return ee},bH3:function(){return Pa},bKC:function(){return Fc},bUp:function(){return ln},bfG:function(){return ps},bid:function(){return q},bor:function(){return zn},c$g:function(){return Gc},c4Q:function(){return Wo},c5r:function(){return ne},c6N:function(){return Nl},c7c:function(){return ko},cFY:function(){return ki},cL8:function(){return hn},cRJ:function(){return $e},cS6:function(){return Ne},cZM:function(){return Dn},chk:function(){return Mo},cpH:function(){return gl},czH:function(){return Ru},d1d:function(){return mt},d7f:function(){return Kl},dAT:function(){return Jc},dLP:function(){return ca},dSm:function(){return Va},dTs:function(){return Gt},de3:function(){return Al},dlb:function(){return oi},dqy:function(){return gu},drd:function(){return R},dw4:function(){return qu},dxF:function(){return Ce},dyx:function(){return _a},e1u:function(){return hc},e8l:function(){return Ni},eBj:function(){return ms},eEQ:function(){return Yc},eL$:function(){return vt},eQj:function(){return bu},eqK:function(){return Xs},erD:function(){return Rl},etM:function(){return Nn},etb:function(){return Uo},eto:function(){return Mr},f$k:function(){return Bc},f3z:function(){return ba},f7W:function(){return Aa},f7t:function(){return hi},fCp:function(){return Ji},fDI:function(){return Ju},fG_:function(){return Kc},fLi:function(){return Jd},fLk:function(){return Ic},fU5:function(){return Y},fXc:function(){return yu},f_s:function(){return Ln},fcH:function(){return nr},fh:function(){return ft},fy8:function(){return Oc},fzU:function(){return qa},g$$:function(){return Qu},g2L:function(){return Re},gAu:function(){return sn},gJK:function(){return yi},gX7:function(){return fo},gZr:function(){return ia},gjV:function(){return bd},glY:function(){return vu},gsz:function(){return Nd},gvI:function(){return Ld},gyk:function(){return Tc},gzO:function(){return Oe},h$p:function(){return Me},h1Z:function(){return np},h3_:function(){return pu},h5L:function(){return Vs},h6w:function(){return At},h8f:function(){return io},hDP:function(){return _t},hFn:function(){return uc},hMS:function(){return Lc},hNw:function(){return fd},hT$:function(){return ai},hTy:function(){return rl},hgm:function(){return Ft},hhW:function(){return Kd},hj1:function(){return ra},hle:function(){return Uu},hnc:function(){return nn},hnd:function(){return cs},hq4:function(){return ju},huY:function(){return Du},huq:function(){return Er},hxo:function(){return tl},hy5:function(){return xu},i04:function(){return Fd},i29:function(){return Cn},i2W:function(){return fu},i8g:function(){return cc},iJb:function(){return dt},iM0:function(){return Qc},iNb:function(){return Ds},ib1:function(){return Cc},ic4:function(){return ro},ifI:function(){return Uc},j0J:function(){return Hi},j3p:function(){return Ae},j4V:function(){return ce},jA_:function(){return ou},jFr:function(){return Ko},jR0:function(){return Ul},jSE:function(){return x},jWk:function(){return kn},jfH:function(){return Pc},jhM:function(){return Wa},jj$:function(){return jn},jvv:function(){return ac},jzM:function(){return Sa},k28:function(){return Tr},k6Z:function(){return Ad},k8J:function(){return js},kI8:function(){return Ou},kKw:function(){return ii},kPC:function(){return ve},kgv:function(){return fi},kiM:function(){return ho},l$l:function(){return fs},l35:function(){return ye},lFV:function(){return Hn},lGs:function(){return Cr},lHZ:function(){return nu},lIV:function(){return X},lNW:function(){return me},lnl:function(){return _c},lou:function(){return $o},lpG:function(){return Is},lu7:function(){return It},lub:function(){return Da},lyH:function(){return Zo},m3w:function(){return zi},m96:function(){return oc},m9g:function(){return et},mBS:function(){return Cu},mFi:function(){return tt},mNV:function(){return Ge},mNl:function(){return Ha},m_L:function(){return Po},me0:function(){return _s},mfB:function(){return uo},mjE:function(){return yo},mkE:function(){return xs},mmU:function(){return St},mnt:function(){return c},n82:function(){return p},nCk:function(){return Hl},nDr:function(){return Bi},nFE:function(){return Zi},nIM:function(){return Ls},nPk:function(){return ze},nS9:function(){return Hs},nTL:function(){return I},nWA:function(){return Ii},n_L:function(){return qt},n_f:function(){return Xo},nab:function(){return ma},neE:function(){return lu},njr:function(){return Jl},nnD:function(){return Li},nsS:function(){return pr},nvX:function(){return Fr},oEq:function(){return ja},oYh:function(){return vs},oYr:function(){return Fe},od1:function(){return Ut},odB:function(){return ea},odm:function(){return Ct},olx:function(){return rp},om$:function(){return Ro},oo_:function(){return Wu},ovB:function(){return S},ox:function(){return Ya},ozy:function(){return gc},p3y:function(){return h},pBE:function(){return bi},pCD:function(){return Ns},pGg:function(){return Hd},pHN:function(){return jt},pIg:function(){return y},pL3:function(){return Bt},pOl:function(){return ur},pRv:function(){return kc},pbA:function(){return B},pf:function(){return Wd},piY:function(){return la},plI:function(){return Et},pnE:function(){return Id},ps7:function(){return Go},pzZ:function(){return Ci},q$m:function(){return wo},q4q:function(){return Ao},q8g:function(){return cl},qAf:function(){return Gl},qCO:function(){return _},qF2:function(){return Ss},qP4:function(){return Cd},qXI:function(){return wu},qaE:function(){return Pd},qkz:function(){return kd},qst:function(){return vo},qut:function(){return _l},rEw:function(){return st},rNk:function(){return wa},rUV:function(){return Sr},rVt:function(){return Tl},ra1:function(){return gr},rax:function(){return Rr},rbA:function(){return Nr},rey:function(){return Bu},rmC:function(){return Qe},rqG:function(){return da},ruE:function(){return gi},ryt:function(){return Ye},s$v:function(){return li},s22:function(){return ao},s51:function(){return Sn},s8f:function(){return re},sCZ:function(){return vi},sF7:function(){return aa},sFl:function(){return ku},sGX:function(){return Z},sHL:function(){return dc},sX$:function(){return te},s_e:function(){return Ku},sd_:function(){return F},sep:function(){return xi},sf$:function(){return Ec},sg4:function(){return ji},smA:function(){return Xn},sq0:function(){return bc},sqX:function(){return na},srQ:function(){return lo},t5z:function(){return Lt},tCQ:function(){return Ma},tFh:function(){return rs},tPj:function(){return iu},tjj:function(){return Zu},tkb:function(){return Vn},tpK:function(){return Bd},tvG:function(){return md},txQ:function(){return Yi},u$0:function(){return Di},u$4:function(){return zc},u45:function(){return m},u4l:function(){return Qi},uBh:function(){return Vi},uIb:function(){return Ei},uIr:function(){return Zl},uJt:function(){return ap},uSS:function(){return hr},uSd:function(){return gs},uY6:function(){return We},udk:function(){return Se},ujK:function(){return Bo},uth:function(){return Ri},uzv:function(){return Fu},v1x:function(){return wi},v3e:function(){return Yo},v71:function(){return lp},v73:function(){return qe},v8C:function(){return ct},vYO:function(){return Ed},vlt:function(){return Nt},vvT:function(){return Ke},w9g:function(){return ss},wAW:function(){return zr},wAt:function(){return as},wU1:function(){return ha},wke:function(){return xo},wxO:function(){return ru},xQV:function(){return no},xpu:function(){return Vl},xuo:function(){return qc},y7V:function(){return Ka},yB4:function(){return jc},yLG:function(){return Gs},yMR:function(){return fc},yOL:function(){return ns},yRR:function(){return Oa},yVj:function(){return ip},yWd:function(){return v},yb9:function(){return Xc},ybt:function(){return ed},yyJ:function(){return yn},z$F:function(){return w},z$g:function(){return Gr},zEz:function(){return ni},zl4:function(){return es},zpf:function(){return si},zwp:function(){return Od}});var n=i(79664),r=i(68679);const o=n.z.Alert,s={build:""};function a(e){Object.assign(s,e)}function c(){return s}const d={id:1399,severity:n.z.NoAlert,pb:s},l={id:1405,severity:n.z.NoAlert,pb:s},u=(n.z.NoAlert,{ComponentMountFailed:{id:8020,severity:o,pb:s},ZeroTopSitesError:{id:8021,severity:n.z.NoAlert,pb:s},StorageTopSitesError:{id:8022,severity:o,pb:s}}),p={id:8029,severity:o,pb:s},g={id:8030,severity:o,pb:s},h={id:8031,severity:o,pb:s},m={id:8032,severity:n.z.HighImpact,pb:s},f={id:8033,severity:n.z.HighImpact,pb:s},v={id:8034,severity:o,pb:s},y={id:8035,severity:o,pb:s},b={id:8036,severity:o,pb:s},S={id:8037,severity:o,pb:s},C={ErrorWhileFetchingContentPreviewContent:{id:8041,severity:n.z.NoAlert,pb:s},InvalidResponseFromContentPreviewFetch:{id:8042,severity:o,pb:s},InvalidResponseFromContentPreviewResponseJson:{id:8043,severity:o,pb:s},ErrorWhileInitializingAsyncContentPreviewContent:{id:8044,severity:o,pb:s},InvalidOrMissingContentId:{id:8045,severity:o,pb:s},MissingDataForExternalContent:{id:8046,severity:n.z.NoAlert,pb:s},MissingPartnerLink:{id:8047,severity:o,pb:s},ErrorWhileFetchingWindowsShellContentPreviewContent:{id:8048,severity:n.z.NoAlert,pb:s},ErrorLoadingImage:{id:8049,severity:o,pb:s}},w=(n.z.HighImpact,n.z.HighImpact,n.z.NoAlert,{id:8100,severity:n.z.HighImpact,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),T={id:8101,severity:n.z.NoAlert,pb:s},k={id:8102,severity:n.z.NoAlert,pb:s},A={id:8103,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},I={id:8104,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},P={id:8105,severity:n.z.NoAlert,pb:s},E=(n.z.NoAlert,{id:8107,severity:n.z.NoAlert,pb:s}),O={id:8109,severity:n.z.NoAlert,pb:s},M=(n.z.NoAlert,n.z.NoAlert,{id:8183,severity:o,pb:s}),x={id:8184,severity:o,pb:s},D={id:8185,severity:o,pb:s},R={id:8186,severity:o,pb:s},L={id:8187,severity:o,pb:s},F={id:8189,severity:o,pb:s},N={FailedToChangeTheMarket:{id:8190,severity:o,pb:s},PromiseFailure:{id:8191,severity:o,pb:s},ChromiumClientEmbededsearchAPIError:{id:8192,severity:o,pb:s}},B={FailedToGetFeedbackDataConnector:{id:8213,severity:o,pb:s},BadRequestReportingFeedback:{id:8214,severity:o,pb:s},ExceptionReportingFeedback:{id:8215,severity:o,pb:s}},j={ExceptionPowerliftStorage:{id:8219,severity:o,pb:s}},$={PoweredByLegendInvalidConfig:{id:8230,severity:o,pb:s}},U=(n.z.HighImpact,{InvalidResponse:{id:8290,severity:n.z.NoAlert,pb:s},FetchFailure:{id:8291,severity:n.z.NoAlert,pb:s}}),H={GeneralError:{id:8320,severity:o,pb:s},NotPlaceable:{id:8321,severity:n.z.NoAlert,pb:s},NotFoundComponent:{id:8322,severity:n.z.NoAlert,pb:s},CoachmarkDataConnectorUndefined:{id:8323,severity:o,pb:s},InvalidCTAType:{id:8324,severity:o,pb:s},CTATypeNotDefined:{id:8325,severity:o,pb:s},ConfigDataUndefined:{id:8326,severity:o,pb:s},FailedToFetchConfigData:{id:8327,severity:o,pb:s},ExceptionFetchingConfigData:{id:8328,severity:o,pb:s},EventNotDefined:{id:8329,severity:o,pb:s},CoachmarkStateNotDefined:{id:8330,severity:o,pb:s}},_={InvalidCoachmarkMessage:{id:8331,severity:o,pb:s},IrisDataConnectorUndefined:{id:8332,severity:o,pb:s},ErrorFoundForSurface:{id:8334,severity:o,pb:s},TelemetryInfoUndefined:{id:8335,severity:o,pb:s},EventTypeUndefined:{id:8336,severity:o,pb:s},IrisActionUndefined:{id:8337,severity:o,pb:s}},W={id:8380,severity:o,pb:s},z={id:8381,severity:o,pb:s},G={CardActionBaseExperienceError:{id:8600,severity:o,pb:s},CardActionPostActionError:{id:8601,severity:o,pb:s},CardActionDeleteActionError:{id:8602,severity:o,pb:s},CardActionGetActionError:{id:8603,severity:o,pb:s},CardActionBadRequestReportingToOcv:{id:8604,severity:o,pb:s},CardActionExceptionReportingToOcv:{id:8605,severity:o,pb:s}},V=(n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,{FailedToParseStaticsUrls:{id:8810,severity:n.z.HighImpact,pb:s},ScriptsNotFound:{id:8811,severity:n.z.HighImpact,pb:s},StyleSheetsNotFound:{id:8812,severity:n.z.HighImpact,pb:s},FailedToMountScript:{id:8813,severity:n.z.HighImpact,pb:s},FailedToMountStyleSheet:{id:8814,severity:n.z.HighImpact,pb:s}}),q={id:8815,severity:n.z.Critical,message:"Cookie Banner Element is missing",pb:s},Z=(n.z.NoAlert,{id:8841,severity:n.z.HighImpact,pb:s}),K={id:8842,severity:n.z.Critical,pb:s},Q={id:8843,severity:o,pb:s},J={id:8844,severity:o,pb:s},X={id:8845,severity:n.z.Critical,pb:s},Y={id:8846,severity:n.z.Critical,pb:s},ee={id:8847,severity:o,pb:s},te={id:8848,severity:n.z.HighImpact,pb:s},ie={LoadExperienceError:{id:8941,severity:o,pb:s}},ne={InvalidIntraArticleDataError:{id:9001,severity:o,pb:s},MainContentDataFetchError:{id:9002,severity:o,pb:s},InvalidDocumentContentError:{id:9003,severity:o,pb:s},ViewsPaddleDataLoadError:{id:9004,severity:o,pb:s},ViewsErrorPage:{id:9005,severity:o,pb:s},ProviderMapperError:{id:9006,severity:o,pb:s},InvalidContentId:{id:9007,severity:o,pb:s},ViewsPageFailedToRender:{id:9008,severity:o,pb:s},ViewsPageJSErrorPostTTVR:{id:9009,severity:o,pb:s},ViewsComponentFailedToRender:{id:9010,severity:o,pb:s},ViewsInfiniteReadingError:{id:9011,severity:o,pb:s},ViewsInfiniteReadingIFrameRenderError:{id:9012,severity:o,pb:s},ViewsInfiniteReadingHelperInitializationError:{id:9013,severity:o,pb:s},StaticFallbackError:{id:9014,severity:o,pb:s},ViewsInfiniteReadingDisplayAdError:{id:9015,severity:o,pb:s},ViewsMainContentRemovedFetchError:{id:9016,severity:o,pb:s},ViewsOtherContentRemovedFetchError:{id:9017,severity:o,pb:s},ViewsInfiniteReadingStyleValidationError:{id:9018,severity:o,pb:s},RelatedSlideshowCMSFetchError:{id:9019,severity:o,pb:s},InvalidContentIdFromFakePath:{id:9020,severity:o,pb:s},ViewsFatalRedirectError:{id:9021,severity:o,pb:s},ViewsFatalErrorHandled:{id:9022,severity:o,pb:s},ViewsGenericLowSevJSError:{id:9023,severity:n.z.NoAlert,pb:s},ViewsInfiniteReadingMissingPerfError:{id:9024,severity:o,pb:s},ViewsPartnerTrackError:{id:9025,severity:o,pb:s},ViewsMainContentRemovedBlockListedError:{id:9026,severity:n.z.NoAlert,pb:s},ViewsSapphirePageError:{id:9050,severity:o,pb:s},ViewsSapphireUserConfigError:{id:9051,severity:o,pb:s},ContentIdExtractError:{id:9052,severity:o,pb:s},ViewsDwellTimeMismatch:{id:9053,severity:o,pb:s},ViewsProviderDataMismatch:{id:9054,severity:o,pb:s},OtherContentDataFetchError:{id:9055,severity:o,pb:s},ViewsInvalidPageTypeError:{id:9056,severity:o,pb:s},ViewsLogContentViewDetailResponse:{id:9057,severity:n.z.NoAlert,pb:s},ViewsAiCommentsError:{id:9058,severity:o,pb:s}},re=(n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,{RewardsDataConnectorUndefined:{id:9400,severity:o,pb:s},CategoryKeyOrAppTypeUndefined:{id:9401,severity:n.z.NoAlert,pb:s},FailedToFetchCoachmarkUXConfig:{id:9402,severity:n.z.NoAlert,pb:s},ConfigDataUndefined:{id:9403,severity:o,pb:s},FailedToFetchConfigData:{id:9404,severity:o,pb:s},ExceptionFetchingConfigData:{id:9405,severity:o,pb:s},ChromiumPageSettingsDataConnectorUndefined:{id:9406,severity:o,pb:s},PageSettingsStateUndefined:{id:9407,severity:o,pb:s},RewardsFlyoutBodyHeightMissing:{id:9408,severity:o,pb:s},RewardsAutoFlyoutInternalError:{id:9409,severity:o,pb:s}}),oe={IrisDataConnectorUndefined:{id:9421,severity:o,pb:s},CoachmarkDataConnectorUndefined:{id:9424,severity:o,pb:s},ErrorFetchingUserProfile:{id:9425,severity:o,pb:s},ExceptionFetchingUserProfile:{id:9426,severity:o,pb:s},ExceptionReportingRewardActivity:{id:9427,severity:o,pb:s},BadRequestReportingRewardActivity:{id:9428,severity:o,pb:s},OfferIdNotDefined:{id:9429,severity:o,pb:s},ActionNameNotDefined:{id:9430,severity:o,pb:s},InvalidParameters:{id:9431,severity:o,pb:s},UnknownErrorsReportingRewardActivity:{id:9432,severity:o,pb:s},UnknownErrorOccurred:{id:9433,severity:o,pb:s},MaxRetryReachedForUpdatingRewardsPoints:{id:9434,severity:o,pb:s},PageSettingsUndefined:{id:9435,severity:o,pb:s},RewardsCoachmarkConnectorUndefined:{id:9436,severity:o,pb:s},VersionNotSupported:{id:9437,severity:o,pb:s},IncompleteOfferError:{id:9438,severity:o,pb:s}},se={id:9748,severity:o,pb:s},ae={id:11103,severity:o,pb:s},ce=(n.z.HighImpact,n.z.NoAlert,{ErrorResponseFromOneService:{id:13e3,severity:o,pb:s},ErrorResponseFromOneServiceIsInvalid:{id:13001,severity:o,pb:s},InvalidUrlFoundForElement:{id:13002,severity:o,pb:s},SelectedItemNotFoundInSuggestions:{id:13003,severity:o,pb:s},SelectedItemIsInvalid:{id:13004,severity:o,pb:s}}),de={InterestsRetrieveTopicsError:{id:13100,severity:o,pb:s},InterestsRetrieveFollowedTopicsError:{id:13101,severity:o,pb:s},InterestsRetrieveMutedPublishersError:{id:13102,severity:o,pb:s},InterestsUnMutePublisherError:{id:13103,severity:o,pb:s},InterestsFollowTopicError:{id:13104,severity:o,pb:s},InterestsUnfollowTopicError:{id:13105,severity:o,pb:s},InterestsTopicStateUndefined:{id:13106,severity:o,pb:s},InterestsShouldHaveRendered:{id:13107,severity:o,pb:s},InterestsRetrieveTopicError:{id:13108,severity:o,pb:s},InterestsRetrieveRecommendedTopicsError:{id:13114,severity:o,pb:s},UndefinedTopicDataConnector:{id:13115,severity:o,pb:s},InterestsRetrieveReadStoriesError:{id:13116,severity:o,pb:s},InterestsReadStoriesInvalidConfigError:{id:13117,severity:o,pb:s},InterestsReadStoriesChildLoadError:{id:13118,severity:o,pb:s},InterestsReadStoriesInvalidJsonError:{id:13119,severity:o,pb:s},InterestsReadStoriesInvalidListError:{id:13120,severity:o,pb:s},FailedRestoringDefaultTopicsError:{id:13121,severity:o,pb:s},FailedAccountLinkingSettingsInitialization:{id:13122,severity:n.z.HighImpact}},le={id:13125,severity:o,pb:s},ue={id:13126,severity:o,pb:s},pe={id:13127,severity:o,pb:s},ge={id:13128,severity:o,pb:s},he={id:13129,severity:o,pb:s},me={id:13131,severity:o,pb:s},fe={id:13132,severity:o,pb:s},ve={id:13133,severity:o,pb:s},ye={id:13134,severity:o,pb:s},be={id:13135,severity:o,pb:s},Se={id:13136,severity:o,pb:s},Ce={id:13137,severity:o,pb:s},we={id:13138,severity:o,pb:s},Te={id:13140,severity:o,pb:s},ke={id:13141,severity:o,pb:s},Ae={id:13142,severity:o,pb:s},Ie={id:13143,severity:n.z.NoAlert,pb:s},Pe={id:13144,severity:o,pb:s},Ee=(n.z.NoAlert,{id:14007,severity:o,pb:s}),Oe=(n.z.HighImpact,{id:14102,severity:o,pb:s}),Me=(n.z.HighImpact,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,{id:15020,severity:o,pb:s}),xe={id:15021,severity:o,pb:s},De={id:15023,severity:o,pb:s},Re={id:15024,severity:o,pb:s},Le={id:15025,severity:o,pb:s},Fe={id:15026,severity:o,pb:s},Ne={id:15027,severity:o,pb:s},Be={id:15029,severity:n.z.NoAlert,pb:s},je={id:15030,severity:n.z.NoAlert,pb:s},$e={id:15031,severity:n.z.NoAlert,pb:s},Ue=(n.z.HighImpact,{ResponseParsingFailed:{id:15200,severity:n.z.NoAlert,pb:s},InvalidJsonResponse:{id:15201,severity:n.z.NoAlert,pb:s},ServiceCallFailed:{id:15202,severity:n.z.NoAlert,pb:s},RenderFailed:{id:15203,severity:o,pb:s},Timeout:{id:15204,severity:n.z.NoAlert,pb:s},ContentFetchError:{id:15205,severity:o,pb:s}}),He=(n.z.Critical,{ContentFetchError:{id:15250,severity:o,pb:s},FailedToFetchConfig:{id:15251,severity:o,pb:s},FailedToLoadChildExperience:{id:15252,severity:o,pb:s},OCIDNotSetWarning:{id:15253,severity:n.z.NoAlert,pb:s},ContentURLFetchError:{id:15254,severity:o,pb:s},ContentError:{id:15255,severity:o,pb:s}}),_e=(n.z.NoAlert,{RenderFailed:{id:15300,severity:n.z.Critical,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},SearchBoxCommonVoiceSearchError:{id:15301,severity:o,pb:s},SearchBoxEdgeNextVoiceSearchError:{id:15302,severity:o,pb:s},CommunicationsError:{id:15303,severity:o,pb:s}}),We=(n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),{PollsWCDataInitError:{id:18100,severity:o,pb:s},PollsWCListFetchError:{id:18101,severity:o,pb:s},PollsWCDataFetchError:{id:18102,severity:o,pb:s},PollsWCCardInvalidPoll:{id:18103,severity:o,pb:s},PollsWCCardInvalidQuizPoll:{id:18104,severity:o,pb:s},PollsWCCardVoteError:{id:18105,severity:o,pb:s},PollsWCGetCookieFailed:{id:18106,severity:o,pb:s},PollsWCResultPercentageError:{id:18107,severity:o,pb:s},PollsWCAutoCuratedContentError:{id:18108,severity:o,pb:s},PollsWCAutoCuratedInvalid:{id:18109,severity:o,pb:s},PollsWCAutoCuratedResultsFetchError:{id:18110,severity:o,pb:s},PollsWCAutoCuratedResultsTransformError:{id:18111,severity:o,pb:s},PollsWCFailedUpdatingUserSettings:{id:18113,severity:o,pb:s}}),ze={EdgeNextErrorPage:{id:19e3,severity:o,pb:s},ErrorFetchingAppAnonCookie:{id:19001,severity:o,pb:s},EdgeNextLocalNTPPageShownSyntaxErrors:{id:19002,severity:o,pb:s},EdgeNextLocalNTPPageShownBundleFailureErrors:{id:19003,severity:o,pb:s},EdgeNextLocalNTPPageShownPageExceptionError:{id:19004,severity:n.z.Critical,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},EdgeNextLocalNTPPageShownJSSMismatchExceptionError:{id:19005,severity:n.z.Critical,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},EdgeNextLocalNtpDueToNetwork:{id:19006,severity:o,pb:s},EdgeNextPageReloadedPageExceptionError:{id:19010,severity:o,pb:s},EdgeChromiumPageMissingFormCode:{id:19012,severity:o,pb:s},EdgeNextPageReloadedDueToNetwork:{id:19013,severity:o,pb:s},EdgeNextPageRenderFailedDueToNetwork:{id:19014,severity:o,pb:s},EdgeNextSsrRootError:{id:19015,severity:o,pb:s},EdgeNextPageRefreshDueToMarketCookieMissing:{id:19016,severity:n.z.NoAlert,pb:s},EdgeNextSsrStreamingNotComplete:{id:19017,severity:o,pb:s}},Ge={PlacementManagerLoadError:{id:2e4,severity:o,pb:s},ArrangementPositionLoadError:{id:20001,severity:o,pb:s},GetCMSContentError:{id:20002,severity:o,pb:s},GetSAMRTBResponseError:{id:20003,severity:o,pb:s},MediaNetEOABError:{id:20005,severity:o,pb:s},InvalidPromoModuleConfig:{id:20006,severity:o,pb:s},CookieSyncDownloadExternalScriptError:{id:20007,severity:n.z.NoAlert,pb:s},CookieSyncMissingExternalScriptUrl:{id:20008,severity:o,pb:s},CookieSyncException:{id:20009,severity:o,pb:s},CookieSyncPartnerScriptError:{id:20010,severity:o,pb:s},CookieSyncPixelPartnerDownloadError:{id:20011,severity:n.z.NoAlert,pb:s},CMSOrBackfillNativeAdLoadError:{id:20012,severity:o,pb:s},PlacementPositionMismatchingError:{id:20013,severity:o,pb:s},MissingRequiredPropertyPlacementManagerConfig:{id:20014,severity:o,pb:s},NativeAdTargetScopeError:{id:20016,severity:o,pb:s},RiverVideoAdPartnerError:{id:20017,severity:o,pb:s},JsTrackerPartnerScriptLoadError:{id:20018,severity:o,pb:s},ViglinkError:{id:20019,severity:o,pb:s},MissingTopicId:{id:20020,severity:o,pb:s},TopicIdNotFound:{id:20021,severity:o,pb:s},GetSAMRTBResponseErrorNoAlert:{id:20022,severity:o,pb:s},DisplayAdsOathLoadError:{id:20050,severity:o,pb:s},DisplayAdsApnLoadError:{id:20051,severity:o,pb:s},DisplayAdsApnEmptyProvider:{id:20052,severity:n.z.Alert},DisplayAdsAdsDetectionNotInit:{id:20053,severity:n.z.Alert,pb:s},DisplayAdsMoatLoadError:{id:20054,severity:o,pb:s},DisplayAdsNoAdObjects:{id:20055,severity:o,pb:s},DisplayAdsProviderIdEncode:{id:20056,severity:o,pb:s},DisplayAdsJacLoadError:{id:20057,severity:o,pb:s},DisplayAdsInvalidSizeError:{id:20058,severity:o,pb:s},DisplayAdsInvalidParameterError:{id:20059,severity:o,pb:s},DisplayAdsPGCodeError:{id:20060,severity:o,pb:s},DisplayAdsSlowResponding:{id:20061,severity:o,pb:s},DisplayAdsNoBid:{id:20062,severity:o,pb:s},DisplayAdsResponseError:{id:20063,severity:o,pb:s},DisplayAdsTimeoutError:{id:20064,severity:n.z.NoAlert,pb:s},DisplayAdsIframeCrossOrigin:{id:20065,severity:o,pb:s},LiverampCookieSetError:{id:20066,severity:o,pb:s},EnvelopeIdNotFoundError:{id:20067,severity:n.z.NoAlert,pb:s},UnexpectedOneServiceResponseError:{id:20068,severity:o,pb:s},DisplayAdsNativeFallbackError:{id:20069,severity:n.z.NoAlert,pb:s},DisplayAdsNoProviderId:{id:20070,severity:o,pb:s},DisplayAdsRemovedByConfiant:{id:20071,severity:n.z.NoAlert,pb:s},DisplayAdsCookieFixMsanError:{id:20072,severity:n.z.NoAlert,pb:s},DisplayLongAdsResponseError:{id:20073,severity:o,pb:s},NativeAdsProviderIdEncode:{id:20074,severity:o,pb:s},XandrLoadError:{id:20075,severity:o,pb:s},XandrEmptyProvider:{id:20076,severity:n.z.Alert},UnexpectedContainerId:{id:20077,severity:o,pb:s},XandrMissingTargetId:{id:20078,severity:o,pb:s},XandrUnexpectedError:{id:20079,severity:o,pb:s},XandrNativeGetResponseTimeout:{id:20080,severity:o,pb:s},XandrNativeGetResponseEmpty:{id:20081,severity:o,pb:s},XandrViewabilityTrackerMalformed:{id:20082,severity:n.z.NoAlert,pb:s}},Ve={id:20150,severity:o,pb:s},qe={id:20151,severity:o,pb:s},Ze={id:20152,severity:o,pb:s},Ke={id:20153,severity:o,pb:s},Qe={id:20154,severity:o,pb:s},Je={id:20155,severity:o,pb:s},Xe={id:20156,severity:o,pb:s},Ye={id:20157,severity:o,pb:s},et={id:20158,severity:o,pb:s},tt={id:20159,severity:o,pb:s},it=(n.z.NoAlert,n.z.NoAlert,{id:20162,severity:n.z.HighImpact,pb:s}),nt=(n.z.NoAlert,n.z.NoAlert,{id:20171,severity:o,pb:s}),rt={id:20172,severity:o,pb:s},ot={id:20173,severity:o,pb:s},st={id:20174,severity:o,pb:s},at={id:20175,severity:o,pb:s},ct={id:20176,severity:o,pb:s},dt={id:20178,severity:o,pb:s},lt={id:20179,severity:o,pb:s},ut={id:20180,severity:o,pb:s},pt={id:20181,severity:o,pb:s},gt={id:20182,severity:o,pb:s},ht={id:20183,severity:n.z.NoAlert,pb:s},mt={id:20184,severity:o,pb:s},ft={id:20185,severity:o,pb:s},vt={id:20187,severity:o,pb:s},yt={id:20188,severity:o,pb:s},bt={id:20189,severity:o,pb:s},St={DeprecatedCompositionLayoutUsed:{id:20200,severity:n.z.NoAlert,pb:s},InvalidColumnInGridConfig:{id:20201,severity:o,pb:s},ErrorLoadingBundle:{id:20202,severity:n.z.HighImpact,pb:s},GenericJSException:{id:20203,severity:o,pb:s},LocalStorageDoesntExist:{id:20204,severity:n.z.NoAlert,pb:s},SessionStorageDoesntExist:{id:20205,severity:n.z.NoAlert,pb:s},ReactRenderException:{id:20206,severity:n.z.Critical,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},NetworkConnectionStatus:{id:20207,severity:n.z.NoAlert,pb:s},SubscriptionCallbackExecError:{id:20208,severity:o,pb:s},ServiceRequestRetryAttempted:{id:20209,message:"Service request failed",severity:n.z.NoAlert,pb:s},OneServiceAkamaiRequestFailed:{id:20210,message:"1S request (assets.msn.*) failed. Retrying using backup domain (assets2.msn.*)",severity:n.z.NoAlert,pb:s},OneServiceFlightsNotSameAsPageFlights:{id:20212,severity:n.z.Critical,pb:s},WebpackBundleObjectNullOrUndefined:{id:20213,severity:o,pb:s}},Ct={ErrorCodeReceived:{id:20302,severity:o,pb:s},CallFailed:{id:20303,severity:o,pb:s},EmptyJsonResponse:{id:20304,severity:o,pb:s}},wt={IndexedDbWriteFailed:{id:22010,severity:o,pb:s},IndexedDbReadFailed:{id:22011,severity:o,pb:s},CrsFetchError:{id:22012,severity:o,pb:s},ReceivedConfigFromCdnAsCrsFetchFailed:{id:22013,severity:o,pb:s},GetConfigException:{id:22014,severity:n.z.Critical,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},IndexedDbBulkReadFailed:{id:22015,severity:o,pb:s},IndexedDbFailedToRemoveCachedConfig:{id:22016,severity:o,pb:s},IndexedDbFailedToClearAllCachedConfigs:{id:22017,severity:o,pb:s},RenderCachePurgedDueToChangesInConfig:{id:22018,severity:n.z.NoAlert,pb:s},FailedToPurgeRenderCache:{id:22019,severity:o,pb:s},RefreshConfigCacheFailed:{id:22020,severity:o,pb:s},IndexedDbInitFailed:{id:22021,severity:o,pb:s},DifferentCbid:{id:22022,severity:n.z.NoAlert,pb:s},PrgFlightLsWriteError:{id:22023,severity:n.z.NoAlert,pb:s},PrgFlightLsReadError:{id:22024,severity:n.z.NoAlert,pb:s}},Tt={id:22025,severity:n.z.NoAlert,pb:s},kt=(n.z.NoAlert,{id:22027,severity:o,pb:s}),At={id:22028,severity:o,pb:s},It={id:22029,severity:n.z.Critical,pb:s},Pt={id:22030,severity:n.z.Critical,pb:s},Et=(n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,{id:24526,severity:o,pb:s}),Ot={id:24571,severity:o,pb:s},Mt=(n.z.NoAlert,{id:24601,severity:o,pb:s}),xt={id:24602,severity:o,pb:s},Dt={id:24603,severity:o,pb:s},Rt={id:24604,severity:o,pb:s},Lt={id:24606,severity:o,pb:s},Ft={id:24607,severity:o,pb:s},Nt={id:24611,severity:o,pb:s},Bt={id:24612,severity:o,pb:s},jt={id:24613,severity:o,pb:s},$t={NewsSegmentCarouselInvalidFeedResponse:{id:24660,severity:n.z.Critical,pb:s}},Ut={id:24700,severity:o,pb:s},Ht={id:24800,severity:o,pb:s},_t=(n.z.NoAlert,{CategoryDataGetCategoryDetail:{id:28100,severity:n.z.NoAlert,pb:s},CategoryDataIndexedDbInitializationFailed:{id:28101,severity:o,pb:s},CategoryDataIndexedDbWriteFailed:{id:28102,severity:o,pb:s},CategoryDataIndexedDbBulkReadFailed:{id:28103,severity:o,pb:s}}),Wt={id:28213,severity:n.z.NoAlert,pb:s},zt={id:28215,severity:o,pb:s},Gt={id:28216,severity:o,pb:s},Vt={DataFetchError:{id:28400,severity:o,pb:s},JsonParseError:{id:28401,severity:n.z.NoAlert,pb:s},WCDataFetchError:{id:28410,severity:o,pb:s},WCJsonParseError:{id:28411,severity:n.z.NoAlert,pb:s},WCNewsItemDataFetchError:{id:28412,severity:o,pb:s},WCSettingFetchError:{id:28414,severity:o,pb:s},WCSettingUpdateError:{id:28415,severity:o,pb:s},ImageLoadError:{id:28416,severity:o,pb:s}},qt={LayoutPreferenceDataGetFailed:{id:28500,severity:o,pb:s}},Zt={FileNotFound:{id:29e3,severity:o,pb:s},RuntimeError:{id:29001,severity:o,pb:s},MessageTimeout:{id:29002,severity:n.z.NoAlert,pb:s},HandledError:{id:29003,severity:o,pb:s}},Kt={id:29100,severity:n.z.Alert,pb:s},Qt={id:29101,severity:n.z.Alert,pb:s},Jt={id:29102,severity:n.z.Alert,pb:s},Xt={id:29103,severity:o,pb:s},Yt=(n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),{id:29503,severity:n.z.NoAlert,pb:s}),ei=(Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),{id:29507,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),ti=(Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.NoAlert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.NoAlert,Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.NoAlert,Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!1,errorBehavior:r.C.Fallback}),Object.assign(Object.assign({},s),{userImpacting:!1,errorBehavior:r.C.Fallback}),{id:29526,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),ii=(Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,n.z.NoAlert,{id:29530,severity:n.z.NoAlert,pb:s}),ni=(n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:29532,severity:n.z.NoAlert,pb:Object.assign(Object.assign({},s),{userImpacting:!1})}),ri={id:29533,severity:n.z.Alert,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},oi={id:29534,severity:n.z.NoAlert,pb:Object.assign(Object.assign({},s),{userImpacting:!1})},si={id:29535,severity:n.z.HighImpact,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},ai=(n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.NoAlert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:29541,severity:n.z.NoAlert,pb:Object.assign(Object.assign({},s),{userImpacting:!1})}),ci=(Object.assign(Object.assign({},s),{userImpacting:!0}),{id:29543,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),di={id:29544,severity:n.z.NoAlert,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},li={id:29545,severity:n.z.HighImpact,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},ui=(n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:29547,severity:n.z.Alert,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),pi=(n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.NoAlert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:29557,severity:n.z.Alert,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),gi=(n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!1}),{id:29580,severity:n.z.HighImpact,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),hi=(Object.assign(Object.assign({},s),{userImpacting:!0}),{id:29582,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),mi=(n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!1}),{id:29585,severity:n.z.NoAlert,pb:Object.assign(Object.assign({},s),{userImpacting:!1})}),fi=(n.z.NoAlert,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.NoAlert,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.NoAlert,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.NoAlert,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:29590,severity:n.z.NoAlert,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),vi={id:29591,severity:n.z.NoAlert,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},yi=(n.z.NoAlert,Object.assign(Object.assign({},s),{userImpacting:!1}),{id:29593,severity:n.z.NoAlert,pb:Object.assign(Object.assign({},s),{userImpacting:!1})}),bi=(n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.NoAlert,Object.assign(Object.assign({},s),{userImpacting:!1}),{id:29599,severity:n.z.NoAlert,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),Si=(n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:29603,severity:o,pb:s}),Ci={id:29604,severity:o,pb:s},wi={id:29605,severity:o,pb:s},Ti={id:29606,severity:n.z.NoAlert,pb:s},ki=(n.z.NoAlert,{id:29608,severity:n.z.NoAlert,pb:s}),Ai=(n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,{id:29690,severity:o,pb:s}),Ii=(n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,{id:29716,severity:o,pb:s}),Pi={id:29719,severity:o,pb:s},Ei=(n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,{id:29734,severity:n.z.NoAlert,pb:s}),Oi=(n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,{id:29744,severity:n.z.NoAlert,pb:s}),Mi=(n.z.NoAlert,{id:29751,severity:o,pb:s}),xi={id:29752,severity:o,pb:s},Di={id:29753,severity:o,pb:s},Ri={id:29754,severity:o,pb:s},Li=(n.z.NoAlert,{id:29756,severity:n.z.NoAlert,pb:s}),Fi=(n.z.NoAlert,n.z.NoAlert,{id:29854,severity:o,pb:s}),Ni={id:29855,severity:o,pb:s},Bi={id:29856,severity:o,pb:s},ji={id:29857,severity:o,pb:s},$i={id:29858,severity:o,pb:s},Ui={id:29859,severity:o,pb:s},Hi={id:29860,severity:o,pb:s},_i={id:29861,severity:o,pb:s},Wi={id:29862,severity:o,pb:s},zi={id:29863,severity:o,pb:s},Gi={id:29864,severity:o,pb:s},Vi={id:29865,severity:o,pb:s},qi={id:29866,severity:o,pb:s},Zi={id:29867,severity:o,pb:s},Ki={id:29901,severity:o,pb:s},Qi={id:29903,severity:o,pb:s},Ji=(n.z.NoAlert,{id:29923,severity:o,pb:s}),Xi=(Object.assign(Object.assign({},s),{userImpacting:!0}),{AuthRefreshBlockedError:{id:33e3,severity:n.z.NoAlert,pb:s},ErrorFetchingAppAnonCookie:{id:33001,severity:o,pb:s},EstablishMigrationConsent:{id:33010,severity:o,pb:s},MigrationConsentServiceClient:{id:33011,severity:o,pb:s},EstablishSignedInState:{id:33012,severity:o,pb:s},EdgeChromiumAuthPropertyNotAvailable:{id:33013,severity:n.z.NoAlert,pb:s},EdgeChromiumTokenAccessFailure:{id:33014,severity:o,pb:s},EdgeChromiumTokenAccessFailureLtCookieUsed:{id:33015,severity:n.z.NoAlert,pb:s},EdgeChromiumTokenNotPresentInLtCookie:{id:33016,severity:n.z.NoAlert,pb:s},BingTokenNotFoundInLocalStorage:{id:33017,severity:n.z.NoAlert,pb:s},LtCookieFoundUserNotAuthenticated:{id:33018,severity:n.z.NoAlert,pb:s},SignInStatusCookieMismatch:{id:33020,severity:o,pb:s},EdgeChromiumBingTokenAccessFailure:{id:33021,severity:o,pb:s},MsalSSOSilentException:{id:33100,severity:n.z.Alert,pb:s},MsalSSOSilentRpsToMsal:{id:33101,severity:n.z.NoAlert,pb:s},MsalAcquireTokenSilentException:{id:33102,severity:n.z.Alert,pb:s},MsalLoginPopupException:{id:33103,severity:n.z.Alert,pb:s},Msal1SJwtSSOError:{id:33105,severity:n.z.Alert,pb:s},MsalFailedToLoadScript:{id:33110,severity:n.z.Alert,pb:s},ProfilePictureFetchFailed:{id:33111,severity:n.z.NoAlert,pb:s},InitiateEarlySSOError:{id:33112,severity:n.z.Alert,pb:s},DelayLoadTimeout:{id:33113,severity:n.z.NoAlert,pb:s},AuthRedirectError:{id:33120,severity:n.z.Alert,pb:s},AuthSetupErrorInPage:{id:33130,severity:n.z.Critical,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},AuthCompressedRecordsNotFoundNTP:{id:33140,severity:n.z.Alert,pb:s},ErrorInAppAnonCall:{id:33150,severity:o,pb:s},ErrorInClearALCookies:{id:33151,severity:n.z.Alert,pb:s},InteractiveSignInButNotDualAuthEnabled:{id:33152,severity:n.z.Alert,pb:s}}),Yi=(n.z.NoAlert,{UntrackedClick:{id:34001,severity:n.z.NoAlert,pb:s},FragmentFetchFailed:{id:34002,severity:n.z.NoAlert,pb:s},DidUseBrowserCacheAPIError:{id:34003,severity:n.z.NoAlert,pb:s},DidUseBrowserCachePolyfillResponseHeaderInvalid:{id:34004,severity:n.z.NoAlert,pb:s},ServerCacheFetchFailed:{id:34005,severity:n.z.NoAlert,pb:s},ConnectorMapInvalid:{id:34006,severity:n.z.NoAlert,pb:s},FetchSSRPageFailed:{id:34007,severity:n.z.Alert,pb:s},FetchSSRPageFailedFromInvalidWindowInnerWidth:{id:34008,severity:n.z.NoAlert,pb:s},ServerCacheRefreshFailed:{id:34009,severity:n.z.NoAlert,pb:s},WebEntryFailed:{id:34010,severity:n.z.Alert,pb:s},SsrResolverReturnedNullConfig:{id:34011,severity:n.z.HighImpact,pb:s},SsrEdgeHeaderEmpty:{id:34012,severity:n.z.HighImpact,pb:s},SsrEdgeHeaderMismatch:{id:34013,severity:n.z.HighImpact,pb:s},SsrHydrationError:{id:34014,severity:n.z.HighImpact,pb:s},SsrIncompleteError:{id:34015,severity:n.z.HighImpact,pb:s},SsrColViewportMismatch:{id:34016,severity:n.z.NoAlert,pb:s},SsrResponseIncompleteOnUnload:{id:34017,severity:n.z.NoAlert,pb:s},SsrSearchFormElementNotFound:{id:34018,severity:n.z.NoAlert,pb:s}}),en={id:35001,severity:o,pb:s},tn={id:35003,severity:n.z.NoAlert,pb:s},nn={id:35004,severity:o,pb:s},rn={id:35006,severity:o,pb:s},on={id:35007,severity:o,pb:s},sn={id:35008,severity:o,pb:s},an={id:35009,severity:o,pb:s},cn={id:35010,severity:o,pb:s},dn={id:35013,severity:n.z.NoAlert,pb:s},ln={id:35014,severity:o,pb:s},un={id:35015,severity:o,pb:s},pn={id:35016,severity:o,pb:s},gn={id:35018,severity:o,pb:s},hn={id:35019,severity:o,pb:s},mn={id:35020,severity:o,pb:s},fn={id:35022,severity:n.z.NoAlert,pb:s},vn={id:35023,severity:o,pb:s},yn={id:35024,severity:n.z.NoAlert,pb:s},bn={id:35025,severity:n.z.NoAlert,pb:s},Sn={id:35026,severity:o,pb:s},Cn={id:35117,severity:o,pb:s},wn={id:35118,severity:o,pb:s},Tn={id:35119,severity:n.z.NoAlert,pb:s},kn={id:35120,severity:o,pb:s},An={id:35121,severity:o,pb:s},In={id:35122,severity:o,pb:s},Pn={id:35123,severity:o,pb:s},En={id:35124,severity:o,pb:s},On={id:35125,severity:o,pb:s},Mn={id:35128,severity:o,pb:s},xn={id:35129,severity:n.z.NoAlert,pb:s},Dn={id:35130,severity:o,pb:s},Rn={id:35131,severity:o,pb:s},Ln={id:35132,severity:o,pb:s},Fn={id:35133,severity:o,pb:s},Nn={id:35201,severity:o,pb:s},Bn={id:35203,severity:n.z.NoAlert,pb:s},jn=(n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.Alert,{id:35401,severity:n.z.NoAlert,pb:s}),$n={id:35402,severity:o,pb:s},Un={TtvrMissing:{id:35600,severity:n.z.NoAlert,pb:s},TfprMissing:{id:35601,severity:n.z.NoAlert,pb:s},TtvrSearchBoxMissing:{id:35602,severity:n.z.NoAlert,pb:s},TtfSearchBoxMissing:{id:35603,severity:n.z.NoAlert,pb:s}},Hn={id:35604,severity:n.z.NoAlert,pb:s},_n={id:35605,severity:n.z.NoAlert,pb:s},Wn={id:35606,severity:n.z.NoAlert,pb:s},zn={id:35607,severity:n.z.NoAlert,pb:s},Gn={id:35608,severity:n.z.NoAlert,pb:s},Vn={id:35609,severity:n.z.NoAlert,pb:s},qn={id:35610,severity:n.z.NoAlert,pb:s},Zn={id:35611,severity:n.z.NoAlert,pb:s},Kn={id:35612,severity:n.z.NoAlert,pb:s},Qn=(n.z.NoAlert,{id:35614,severity:n.z.NoAlert,pb:s}),Jn={id:35615,severity:n.z.NoAlert,pb:s},Xn={id:35616,severity:n.z.NoAlert,pb:s},Yn={FetchKeyError:{id:35700,severity:o,pb:s},SubscribeUnsubscribeError:{id:35701,severity:o,pb:s}},er={id:36105,severity:o,pb:s},tr={id:36106,severity:o,pb:s},ir={id:36107,severity:o,pb:s},nr={id:36108,severity:o,pb:s},rr={id:36109,severity:n.z.NoAlert,pb:s},or={id:36111,severity:o,pb:s},sr={id:36113,severity:o,pb:s},ar={id:36121,severity:n.z.NoAlert,pb:s},cr={id:36122,severity:o,pb:s},dr=(n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,{id:36300,severity:o,pb:s}),lr={id:36301,severity:o,pb:s},ur={id:36302,severity:o,pb:s},pr={id:36309,severity:o,pb:s},gr={id:36310,severity:o,pb:s},hr={id:36311,severity:o,pb:s},mr={id:36312,severity:o,pb:s},fr={id:36313,severity:o,pb:s},vr={id:36314,severity:n.z.NoAlert,pb:s},yr={id:36315,severity:o,pb:s},br={id:36317,severity:n.z.NoAlert,pb:s},Sr={id:36319,severity:n.z.NoAlert,pb:s},Cr={id:36320,severity:n.z.NoAlert,pb:s},wr={id:36321,severity:n.z.NoAlert,pb:s},Tr={id:36322,severity:o,pb:s},kr=(n.z.HighImpact,{id:36500,severity:o,pb:s}),Ar={id:36600,severity:o,pb:s},Ir={id:36601,severity:o,pb:s},Pr={id:36602,severity:o,pb:s},Er={id:36603,severity:o,pb:s},Or={id:36604,severity:o,pb:s},Mr={id:36605,severity:o,pb:s},xr={id:36606,severity:o,pb:s},Dr={id:36607,severity:o,pb:s},Rr=(n.z.NoAlert,n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:36705,severity:n.z.NoAlert,pb:s}),Lr=(n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:36904,severity:o,pb:s}),Fr={id:36905,severity:o,pb:s},Nr={id:36906,severity:o,pb:s},Br={id:36907,severity:o,pb:s},jr={id:36908,severity:o,pb:s},$r={id:36909,severity:o,pb:s},Ur={id:36910,severity:o,pb:s},Hr={id:36911,severity:o,pb:s},_r={id:36912,severity:o,pb:s},Wr={id:36913,severity:o,pb:s},zr={id:36914,severity:o,pb:s},Gr={id:36915,severity:o,pb:s},Vr={id:36916,severity:o,pb:s},qr={id:36917,severity:o,pb:s},Zr={id:36918,severity:o,pb:s},Kr={id:36919,severity:o,pb:s},Qr={id:36936,severity:o,pb:s},Jr=(n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:36962,severity:n.z.Critical,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),Xr=(n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:36990,severity:n.z.Alert,pb:Object.assign(Object.assign({},s),{userImpacting:!1})}),Yr={id:36991,severity:n.z.Alert,pb:Object.assign(Object.assign({},s),{userImpacting:!1})},eo=(n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:36995,severity:n.z.Critical,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),to=(n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:36997,severity:n.z.Alert,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),io=(Object.assign(Object.assign({},s),{userImpacting:!1,errorBehavior:r.C.Fallback}),Object.assign(Object.assign({},s),{userImpacting:!1,errorBehavior:r.C.Fallback}),{id:37001,severity:o,pb:s}),no={id:37020,severity:o,pb:s},ro={id:37021,severity:o,pb:s},oo={id:37022,severity:o,pb:s},so={id:37023,severity:o,pb:s},ao={id:37074,severity:o,pb:s},co={id:37075,severity:o,pb:s},lo={id:37300,severity:n.z.NoAlert,pb:s},uo={id:37550,severity:o,pb:s},po={id:37551,severity:o,pb:s},go={id:37552,severity:o,pb:s},ho={id:37553,severity:o,pb:s},mo={id:37560,severity:o,pb:s},fo={id:37561,severity:o,pb:s},vo={id:37562,severity:o,pb:s},yo={id:37563,severity:o,pb:s},bo={id:37566,severity:o,pb:s},So={id:37601,severity:o,pb:s},Co={id:37604,severity:o,pb:s},wo={id:37605,severity:o,pb:s},To={id:37609,severity:o,pb:s},ko={id:37610,severity:o,pb:s},Ao={id:37612,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},Io={id:37613,severity:o,pb:s},Po={id:37614,severity:o,pb:s},Eo={id:37629,severity:o,pb:s},Oo={id:37631,severity:o,pb:s},Mo={id:37632,severity:o,pb:s},xo={id:37634,severity:n.z.NoAlert,pb:s},Do={id:37635,severity:n.z.NoAlert,pb:s},Ro={id:37636,severity:n.z.NoAlert,pb:s},Lo={id:37637,severity:o,pb:s},Fo={id:37638,severity:o,pb:s},No={id:37639,severity:o,pb:s},Bo={id:37640,severity:o,pb:s},jo={id:37641,severity:o,pb:s},$o={id:37642,severity:o,pb:s},Uo={id:38e3,severity:o,pb:s},Ho={id:38001,severity:n.z.NoAlert,pb:s},_o={id:38005,severity:o,pb:s},Wo={id:38006,severity:o,pb:s},zo={id:38007,severity:n.z.NoAlert,pb:s},Go={id:38008,severity:n.z.NoAlert,pb:s},Vo=(n.z.NoAlert,n.z.Critical,{id:38046,severity:n.z.Critical,pb:s}),qo={id:38055,severity:o,pb:s},Zo={id:38105,severity:o,pb:s},Ko={id:38107,severity:o,pb:s},Qo={id:38116,severity:o,pb:s},Jo={id:38119,severity:o,pb:s},Xo={id:38120,severity:o,pb:s},Yo=(n.z.NoAlert,n.z.NoAlert,{id:38300,severity:n.z.HighImpact,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),es={id:38301,severity:n.z.HighImpact,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},ts={id:38302,severity:o,pb:s},is={id:38303,severity:o,pb:s},ns={id:38304,severity:o,pb:s},rs={id:38305,severity:o,pb:s},os={id:38306,severity:o,pb:s},ss={id:38307,severity:o,pb:s},as=(n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:38319,severity:n.z.HighImpact,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),cs={id:38320,severity:o,pb:s},ds={id:38321,severity:n.z.HighImpact,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},ls={id:38322,severity:n.z.HighImpact,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},us={id:38323,severity:n.z.Alert,pb:s},ps={id:38324,severity:n.z.Alert,pb:s},gs={id:38325,severity:n.z.Alert,pb:s},hs={id:38326,severity:n.z.HighImpact,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},ms={id:38327,severity:n.z.HighImpact,pb:s},fs={id:38328,severity:o,pb:s},vs={id:38329,severity:o,pb:s},ys={id:38331,severity:n.z.HighImpact,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},bs={id:38334,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},Ss={id:38335,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},Cs={id:38336,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},ws={id:38337,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},Ts={id:38340,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!1})},ks={id:38341,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!1})},As={id:38342,severity:n.z.Alert,pb:s},Is={id:38343,severity:o,pb:s},Ps={id:38344,severity:o,pb:s},Es={id:38345,severity:o,pb:s},Os={id:38346,severity:o,pb:s},Ms=(n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:38360,severity:o,pb:s}),xs={id:38362,severity:o,pb:s},Ds={id:38363,severity:o,pb:s},Rs={id:38364,severity:o,pb:s},Ls={id:38365,severity:n.z.Critical,pb:s},Fs={id:38366,severity:o,pb:s},Ns={id:38600,severity:o,pb:s},Bs={id:38601,severity:o,pb:s},js={id:38602,severity:o,pb:s},$s={id:38603,severity:o,pb:s},Us={id:38604,severity:o,pb:s},Hs={id:38605,severity:o,pb:s},_s={id:38606,severity:o,pb:s},Ws={id:38607,severity:n.z.NoAlert,pb:s},zs={id:38608,severity:n.z.NoAlert,pb:s},Gs={id:38800,severity:o,pb:s},Vs={id:38801,severity:o,pb:s},qs={id:38802,severity:o,pb:s},Zs={id:38803,severity:o,pb:s},Ks={id:38903,severity:o,pb:s},Qs={id:38904,severity:o,pb:s},Js={id:38905,severity:o,pb:s},Xs={id:38906,severity:o,pb:s},Ys={id:38907,severity:o,pb:s},ea={id:38908,severity:o,pb:s},ta={id:38909,severity:o,pb:s},ia={id:38910,severity:o,pb:s},na={id:38911,severity:o,pb:s},ra={id:38912,severity:o,pb:s},oa={id:38913,severity:o,pb:s},sa={CardFetch:{id:39e3,severity:o,pb:s},AuthWarning:{id:39001,severity:o,pb:s},APIError:{id:39002,severity:o,pb:s},MappingError:{id:39003,severity:o,pb:s},PrerenderTimeoutWarning:{id:39004,severity:n.z.NoAlert,pb:s},FetchAPIException:{id:39005,severity:o,pb:s}},aa={id:39102,severity:o,pb:s},ca={id:39104,severity:o,pb:s},da={id:39106,severity:o,pb:s},la={id:39107,severity:o,pb:s},ua={id:39109,severity:o,pb:s},pa={id:39110,severity:o,pb:s},ga={id:39111,severity:o,pb:s},ha={ShareDialogueError:{id:39200,severity:o,pb:s},UnknownFlagshipFeedMessageError:{id:39201,severity:o,pb:s},FlagshipFeedIFrameNotFoundError:{id:39202,severity:o,pb:s},FlagshipFeedPostMessageError:{id:39203,severity:o,pb:s},FeedbackDialogueError:{id:39204,severity:o,pb:s},ProdHubUIAuthInteractionFailed:{id:39205,severity:o,pb:s},UnknownFlagshipFeedMessageOrigin:{id:39206,severity:o,pb:s},RetrievingSubstrateAuthenticationTokenFailed:{id:39207,severity:o,pb:s},RetrievingLokiAuthenticationTokenFailed:{id:39208,severity:o,pb:s},RetrievingYammerAuthenticationTokenFailed:{id:39209,severity:o,pb:s},AuthErrorMessageShownForKnownErrorStatus:{id:39210,severity:o,pb:s},AuthErrorMessageShownForUnknownErrorStatus:{id:39211,severity:o,pb:s},RetrievingRefreshSubstrateAuthenticationTokenFailed:{id:39212,severity:o,pb:s},RetrievingRefreshLokiAuthenticationTokenFailed:{id:39213,severity:o,pb:s},RetrievingRefreshYammerAuthenticationTokenFailed:{id:39214,severity:o,pb:s}},ma={id:39300,severity:o,pb:s},fa={id:39350,severity:o,pb:s},va={id:39500,severity:o,pb:s},ya={id:39501,severity:o,pb:s},ba={id:39502,severity:o,pb:s},Sa={id:39508,severity:o,pb:s},Ca={id:39509,severity:o,pb:s},wa={id:39510,severity:o,pb:s},Ta={id:39511,severity:o,pb:s},ka={id:39512,severity:o,pb:s},Aa={id:39513,severity:o,pb:s},Ia={id:39514,severity:o,pb:s},Pa={id:39515,severity:o,pb:s},Ea={id:39517,severity:o,pb:s},Oa={id:39518,severity:o,pb:s},Ma={id:39519,severity:o,pb:s},xa={id:39520,severity:o,pb:s},Da={id:39521,severity:o,pb:s},Ra={id:39600,severity:o,pb:s},La={id:39601,severity:o,pb:s},Fa={id:39602,severity:o,pb:s},Na={id:39700,severity:o,pb:s},Ba={id:39701,severity:o,pb:s},ja={id:39702,severity:o,pb:s},$a={id:39703,severity:o,pb:s},Ua={id:39704,severity:o,pb:s},Ha={id:39705,severity:o,pb:s},_a={id:39706,severity:o,pb:s},Wa=(n.z.NoAlert,{id:39710,severity:n.z.NoAlert,pb:s}),za={id:39711,severity:n.z.NoAlert,pb:s},Ga={id:39712,severity:n.z.Alert,pb:s},Va={id:39713,severity:n.z.NoAlert,pb:s},qa={id:39714,severity:o,pb:s},Za={id:39715,severity:n.z.Alert,pb:s},Ka={id:39716,severity:n.z.NoAlert,pb:s},Qa={id:39717,severity:o,pb:s},Ja={id:39901,severity:o,pb:s},Xa={ServiceTimeout:{id:40301,severity:n.z.HighImpact,pb:s},RiverConfigurationIssue:{id:40302,severity:n.z.HighImpact,pb:s},WpoGetMuidFailure:{id:40303,severity:n.z.NoAlert,pb:s},StaticContentLoaded:{id:40304,severity:n.z.HighImpact,pb:s},WpoResponseNoContent:{id:40308,severity:o,pb:s},WpoServiceUrlAndWebWorkerUrlDifferent:{id:40310,severity:n.z.NoAlert,pb:s},WpoServiceErrorAtFirstPage:{id:40312,severity:n.z.HighImpact,pb:s},WpoResponseNoContentAtFirstPage:{id:40313,severity:n.z.HighImpact,pb:s},WpoServiceErrorAtSecondPage:{id:40314,severity:n.z.Alert,pb:s},WpoResponseNoContentAtSecondPage:{id:40315,severity:n.z.Alert,pb:s},ServiceTimeoutNonFirstPage:{id:40318,severity:n.z.Alert,pb:s},ServiceTimeoutPrerender:{id:40319,severity:n.z.NoAlert,pb:s},StaticContentLoadedPrerender:{id:40320,severity:n.z.NoAlert,pb:s},UpdateIdxidToDomFail:{id:40321,severity:n.z.NoAlert,pb:s},WpoServiceEmptySection:{id:40322,severity:n.z.HighImpact,pb:s},WpoServiceEmptySectionForStaticFallBack:{id:40323,severity:n.z.HighImpact,pb:s},TypeErrorIssueIsNotLastTry:{id:40324,severity:n.z.NoAlert,pb:s},OtherIssueIsNotLastTry:{id:40325,severity:n.z.NoAlert,pb:s},TypeErrorIssueIsLastTry:{id:40326,severity:n.z.HighImpact,pb:s},OtherIssueIsLastTry:{id:40327,severity:n.z.HighImpact,pb:s},WpoResponseReturnSlowAtFirstPage:{id:40328,severity:n.z.NoAlert,pb:s},WpoResponseReturnSlowAtSecondPage:{id:40329,severity:n.z.NoAlert,pb:s},ServiceTimeoutBeforeRetry:{id:40331,severity:o,pb:s},WpoResponseFetchNoContent:{id:40332,severity:o,pb:s},MismatchedActivityID:{id:40333,severity:n.z.NoAlert,pb:s},CacheStorageFallbackReturned:{id:40334,severity:n.z.NoAlert,pb:s},CacheStorageFallbackNotFound:{id:40335,severity:n.z.NoAlert,pb:s}},Ya=(n.z.NoAlert,{id:40520,severity:n.z.NoAlert,pb:s}),ec={SWCacheTriggered:{id:40600,severity:n.z.NoAlert,pb:s},SWTriggeredDueToFetchError:{id:40601,severity:n.z.NoAlert,pb:s},SWTriggeredDueToWpoServiceError:{id:40604,severity:n.z.NoAlert,pb:s},SWTriggeredDueToWpoReponseNoContent:{id:40605,severity:n.z.NoAlert,pb:s},SWTriggeredDueToStaticContentLoaded:{id:40606,severity:n.z.NoAlert,pb:s},SWTriggeredDueToEmptySection:{id:40607,severity:n.z.NoAlert,pb:s},SWTriggeredDueToEmptySectionForStaticFallBack:{id:40608,severity:n.z.NoAlert,pb:s}},tc={id:40700,severity:o,pb:s},ic={id:40701,severity:o,pb:s},nc={id:40702,severity:o,pb:s},rc={APIFetchTasksFailed:{id:41e3,severity:o,pb:s},APICreateTaskFailed:{id:41001,severity:o,pb:s},APIRetrieveFoldersFailed:{id:41002,severity:o,pb:s},APIUpdateTaskStatusFailed:{id:41003,severity:o,pb:s},APIUpdateTaskImportanceFailed:{id:41004,severity:o,pb:s},APICompleteTaskFailed:{id:41005,severity:o,pb:s},APISubjectChangeFailed:{id:41006,severity:o,pb:s},FailedToToggleList:{id:41007,severity:o,pb:s},FailedOnAuthentication:{id:41009,severity:o,pb:s},UserAuthInteractionRequired:{id:41010,severity:n.z.NoAlert,pb:s},AuthProviderNotSupported:{id:41011,severity:n.z.NoAlert,pb:s},ForbiddenAPIResponse:{id:41012,severity:n.z.NoAlert,pb:s},MailboxNotEnabledForRESTAPI:{id:41013,severity:n.z.NoAlert,pb:s},FetchAPIException:{id:41014,severity:o,pb:s}},oc=(n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!1,errorBehavior:r.C.Exceptional}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!1,errorBehavior:r.C.Fallback}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:41216,severity:o,pb:s}),sc={id:41217,severity:o,pb:s},ac={id:41218,severity:o,pb:s},cc=(n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.Critical,n.z.Critical,n.z.NoAlert,n.z.NoAlert,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.HighImpact,n.z.NoAlert,{id:41350,severity:o,pb:s}),dc=(n.z.NoAlert,{id:41402,severity:o,pb:s}),lc=(n.z.NoAlert,{id:41405,severity:o,pb:s}),uc={id:41415,severity:o,pb:s},pc={id:41416,severity:o,pb:s},gc={id:41417,severity:n.z.NoAlert,pb:s},hc={id:41420,severity:o,pb:s},mc={id:41421,severity:o,pb:s},fc=(n.z.NoAlert,{id:41601,severity:o,pb:s}),vc=(n.z.Critical,n.z.Critical,n.z.NoAlert,n.z.NoAlert,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.NoAlert,n.z.NoAlert,{id:41900,severity:o,pb:s}),yc={id:42601,severity:o,pb:s},bc={id:42602,severity:o,pb:s},Sc={id:42603,severity:o,pb:s},Cc={id:42604,severity:o,pb:s},wc={id:42701,severity:o,pb:s},Tc={id:42702,severity:n.z.NoAlert,pb:s},kc={id:42703,severity:o,pb:s},Ac={id:42705,severity:o,pb:s},Ic={id:42706,severity:o,pb:s},Pc={id:42710,severity:o,pb:s},Ec={id:42711,severity:o,pb:s},Oc={id:42712,severity:o,pb:s},Mc={id:43e3,severity:o,pb:s},xc=(n.z.Critical,{id:43011,severity:o,pb:s}),Dc={id:43012,severity:n.z.NoAlert,pb:s},Rc=(n.z.Alert,n.z.Alert,n.z.Alert,n.z.Alert,n.z.Alert,n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:43500,severity:o,pb:s}),Lc={id:43511,severity:o,pb:s},Fc={id:43600,severity:n.z.Alert,pb:s},Nc={id:43601,severity:n.z.Alert,pb:s},Bc={id:43602,severity:n.z.Alert,pb:s},jc={id:43603,severity:n.z.NoAlert,pb:s},$c={id:43604,severity:n.z.Critical,pb:s},Uc={id:43605,severity:n.z.Alert,pb:s},Hc=(n.z.NoAlert,n.z.NoAlert,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,{id:43968,severity:o,pb:s}),_c={id:43970,severity:o,pb:s},Wc={id:43985,severity:o,pb:s},zc={id:43991,severity:o,pb:s},Gc={id:44e3,severity:o,pb:s},Vc={id:44003,severity:o,pb:s},qc={id:44200,severity:o,pb:s},Zc={id:44201,severity:n.z.Critical,pb:s},Kc={id:44300,severity:o,pb:s},Qc={UnknownError:{id:44500,severity:o,pb:s},UnknownErrorWarning:{id:44501,severity:o,pb:s},FetchFeedDataFailed:{id:44502,severity:o,pb:s},FetchFeedDataFailedWarning:{id:44503,severity:o,pb:s},FetchVideoPreviewFailed:{id:44504,severity:o,pb:s},FetchVideoPreviewFailedWarning:{id:44505,severity:o,pb:s},FetchNewsPreviewFailed:{id:44506,severity:o,pb:s},FetchNewsPreviewFailedWarning:{id:44507,severity:o,pb:s},FetchDocumentPreviewFailed:{id:44508,severity:o,pb:s},FetchDocumentPreviewFailedWarning:{id:44509,severity:o,pb:s},FetchPeoplePhotoFailed:{id:44510,severity:o,pb:s},FetchPeoplePhotoFailedWarning:{id:44511,severity:o,pb:s},ItemRenderingFailed:{id:44512,severity:o,pb:s},ShareDialogFailed:{id:44513,severity:o,pb:s},AuthenticationFailedWarning:{id:44514,severity:o,pb:s},FastFeedSetupFailed:{id:44515,severity:o,pb:s},HideItemFailed:{id:44516,severity:o,pb:s},FeedbackCacheFailure:{id:44517,severity:o,pb:s},ChatMessageParsingWarning:{id:44518,severity:o,pb:s},PivotSwitchFailed:{id:44519,severity:o,pb:s},AccessDeniedForGCCMod:{id:44520,severity:o,pb:s},RefreshDataFailed:{id:44521,severity:o,pb:s},MissingRequiredFields:{id:44522,severity:o,pb:s},UserInteractionRequiredWarning:{id:44523,severity:n.z.NoAlert,pb:s},AuthProviderNotSupportedWarning:{id:44524,severity:n.z.NoAlert,pb:s},FetchFeedDataEmptyWarning:{id:44525,severity:o,pb:s}},Jc={UnknownError:{id:44530,severity:o,pb:s},UnknownErrorWarning:{id:44531,severity:n.z.NoAlert,pb:s},FetchFeedDataFailed:{id:44532,severity:o,pb:s},FetchFeedDataFailedWarning:{id:44533,severity:n.z.NoAlert,pb:s},FetchVideoPreviewFailed:{id:44534,severity:o,pb:s},FetchVideoPreviewFailedWarning:{id:44535,severity:n.z.NoAlert,pb:s},FetchNewsPreviewFailed:{id:44536,severity:o,pb:s},FetchNewsPreviewFailedWarning:{id:44537,severity:n.z.NoAlert,pb:s},FetchDocumentPreviewFailed:{id:44538,severity:o,pb:s},FetchDocumentPreviewFailedWarning:{id:44539,severity:n.z.NoAlert,pb:s},FetchPeoplePhotoFailed:{id:44540,severity:n.z.NoAlert,pb:s},FetchPeoplePhotoFailedWarning:{id:44541,severity:n.z.NoAlert,pb:s},ItemRenderingFailed:{id:44542,severity:o,pb:s},ShareDialogFailed:{id:44543,severity:o,pb:s},AuthenticationFailedWarning:{id:44544,severity:n.z.NoAlert,pb:s},FastFeedSetupFailed:{id:44545,severity:o,pb:s},HideItemFailed:{id:44546,severity:o,pb:s},FeedbackCacheFailure:{id:44547,severity:o,pb:s},ChatMessageParsingWarning:{id:44548,severity:n.z.NoAlert,pb:s},PivotSwitchFailed:{id:44549,severity:o,pb:s},AccessDeniedForGCCMod:{id:44550,severity:o,pb:s},RefreshDataFailed:{id:44551,severity:o,pb:s},MissingRequiredFields:{id:44552,severity:o,pb:s},UserInteractionRequiredWarning:{id:44553,severity:n.z.NoAlert,pb:s},AuthProviderNotSupportedWarning:{id:44554,severity:n.z.NoAlert,pb:s},FetchFeedDataEmptyWarning:{id:44555,severity:o,pb:s},MissingPivotSwitchConfig:{id:44556,severity:o,pb:s}},Xc=(n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.Critical,{id:44700,severity:o,pb:s}),Yc={id:44701,severity:o,pb:s},ed={id:44702,severity:o,pb:s},td={id:44703,severity:o,pb:s},id={id:44704,severity:o,pb:s},nd={id:44705,severity:o,pb:s},rd={id:44706,severity:o,pb:s},od={id:44707,severity:o,pb:s},sd={id:44708,severity:o,pb:s},ad={id:44709,severity:o,pb:s},cd={id:44710,severity:o,pb:s},dd={id:44711,severity:o,pb:s},ld={id:44712,severity:o,pb:s},ud={id:44720,severity:o,pb:s},pd={id:44721,severity:o,pb:s},gd={id:44722,severity:o,pb:s},hd={id:44724,severity:o,pb:s},md={id:44725,severity:o,pb:s},fd={id:44726,severity:o,pb:s},vd={id:44727,severity:n.z.NoAlert,pb:s},yd={id:44728,severity:n.z.NoAlert,pb:s},bd={id:44729,severity:n.z.NoAlert,pb:s},Sd={id:44730,severity:n.z.NoAlert,pb:s},Cd={id:44731,severity:n.z.NoAlert,pb:s},wd={id:44732,severity:n.z.NoAlert,pb:s},Td={id:44733,severity:n.z.NoAlert,pb:s},kd={id:44734,severity:n.z.NoAlert,pb:s},Ad={id:44750,severity:o,pb:s},Id={id:44751,severity:n.z.NoAlert,pb:s},Pd={id:44752,severity:o,pb:s},Ed=(n.z.NoAlert,n.z.Critical,{id:45700,severity:o,pb:s}),Od=(n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:46e3,severity:o,pb:s}),Md={id:46001,severity:o,pb:s},xd=(n.z.NoAlert,n.z.Critical,n.z.Alert,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,{id:46216,severity:n.z.Critical,pb:s}),Dd=(n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,{id:46222,severity:n.z.Critical,pb:s}),Rd=(n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.Critical,n.z.NoAlert,{id:47101,severity:o,pb:s}),Ld=(n.z.NoAlert,n.z.Critical,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.Critical,n.z.Critical,n.z.NoAlert,n.z.NoAlert,{id:50001,severity:o,pb:s}),Fd={id:50005,severity:o,pb:s},Nd={id:50008,severity:o,pb:s},Bd={id:50009,severity:o,pb:s},jd={id:50011,severity:n.z.Critical,pb:s},$d=(n.z.NoAlert,{id:50013,severity:o,pb:s}),Ud={id:50014,severity:o,pb:s},Hd=(n.z.NoAlert,{id:50017,severity:o,pb:s}),_d={id:50025,severity:n.z.Critical,pb:s},Wd={id:50027,severity:o,pb:s},zd=(n.z.Critical,n.z.Critical,{id:50030,severity:o,pb:s}),Gd={id:50031,severity:o,pb:s},Vd={id:50032,severity:o,pb:s},qd={id:50033,severity:o,pb:s},Zd={id:50041,severity:o,pb:s},Kd={id:50042,severity:o,pb:s},Qd={id:50043,severity:o,pb:s},Jd={id:50044,severity:o,pb:s},Xd={id:50045,severity:o,pb:s},Yd={id:50050,severity:o,pb:s},el={id:50100,severity:o,pb:s},tl={id:50101,severity:o,pb:s},il={id:50400,severity:n.z.NoAlert,pb:s},nl={id:50401,severity:o,pb:s},rl={id:50402,severity:o,pb:s},ol={id:50403,severity:o,pb:s},sl=(n.z.Critical,n.z.Critical,{id:52100,severity:o,pb:s}),al={id:52101,severity:o,pb:s},cl=(n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,{UnsuccessfulNudgeAPIResponse:{id:53100,severity:o,pb:s},UnsuccessfulSpotlightAPIResponse:{id:53101,severity:o,pb:s},NudgeSpotlightCardLastEmailError:{id:53102,severity:o,pb:s},NudgeSpotlightCardRecentEmailsError:{id:53103,severity:o,pb:s},NudgeSpotlightCardOCVFeedbackWarning:{id:53104,severity:o,pb:s},DisplayEmailFailure:{id:53105,severity:o,pb:s},EmptySpotlightAPIResponseWarning:{id:53106,severity:o,pb:s},NudgeSpotlightCardAuthWarning:{id:53107,severity:o,pb:s},DismissSpotlightAPIFailure:{id:53108,severity:o,pb:s},DismissNudgeAPIFailure:{id:53109,severity:o,pb:s},UnsuccessfullNudgeEmailAPIResponse:{id:53110,severity:o,pb:s},FetchAPIException:{id:53111,severity:o,pb:s}}),dl=(n.z.Critical,n.z.Critical,n.z.Critical,n.z.NoAlert,n.z.Critical,n.z.NoAlert,{id:53320,severity:o,pb:s}),ll={id:53321,severity:o,pb:s},ul={id:53322,severity:o,pb:s},pl={id:53323,severity:o,pb:s},gl={id:53324,severity:o,pb:s},hl={id:53325,severity:o,pb:s},ml={id:53326,severity:o,pb:s},fl=(n.z.NoAlert,n.z.NoAlert,n.z.Critical,{id:53700,severity:o,pb:s}),vl={id:53800,source:"libs/feed-layout/.../healthFitnessCardDataMapper.ts",severity:o,pb:s},yl={id:53801,severity:o,pb:s},bl={id:53802,severity:o,pb:s},Sl={id:53944,severity:o,pb:s},Cl={id:53952,severity:o,pb:s},wl={id:53972,severity:o,pb:s},Tl=(n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,{id:54401,severity:o,pb:s}),kl=(n.z.NoAlert,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,n.z.Critical,{id:60004,severity:o,pb:s}),Al=(n.z.NoAlert,{id:60020,severity:o,pb:s}),Il={id:60021,severity:o,pb:s},Pl=(n.z.NoAlert,{SuperFeedCMSAdFetchFailed:{id:60101,severity:o,pb:s},SuperFeedGetSamDataFailed:{id:60102,severity:o,pb:s},SuperFeedRiverFetchFailed:{id:60103,severity:o,pb:s},SuperFeedSDCardFetchFailed:{id:60104,severity:o,pb:s},SuperFeedEmptyResponsePrerender:{id:60105,severity:o,pb:s},SuperFeedEmptyResponseFirstPage:{id:60106,severity:o,pb:s},SuperFeedEmptyResponseRefresh:{id:60107,severity:o,pb:s},SuperFeedEmptyResponseSubsequent:{id:60108,severity:o,pb:s},SuperFeedWhyThisAdFailed:{id:60109,severity:o,pb:s},SuperFeedCardReplacementFetchFailed:{id:60110,severity:o,pb:s},SuperFeedEmptyResponseCardReplacement:{id:60111,severity:o,pb:s},SuperFeedStaticResponse:{id:60112,severity:o,pb:s},SuperFeedStaticResponsePrerender:{id:60113,severity:o,pb:s},SuperFeedUIForceUnblock:{id:60114,severity:o,pb:s},SuperFeedCardTypeNotFound:{id:60115,severity:o,pb:s},SuperFeedMappedCardThrowError:{id:60116,severity:o,pb:s},SuperFeedSamAdsMismatch:{id:60117,severity:n.z.NoAlert,pb:s},SuperFeedCmsAdsMismatch:{id:60118,severity:n.z.NoAlert,pb:s},SuperFeedEventExecutionFailed:{id:60119,severity:o,pb:s},SuperFeedMissingInfopane:{id:60120,severity:o,pb:s},SuperFeedUserEndBlankFeed:{id:60121,severity:n.z.NoAlert,pb:s},SuperFeedInvalidEmptyRiver:{id:60122,severity:n.z.Critical,pb:s},SuperFeedPageDataProviderNullOrErroneousResponse:{id:60123,severity:o,pb:s},SuperFeedPageDataProviderClientNetworkError:{id:60124,severity:o,pb:s},SuperFeedPageDataProviderStaticResponse:{id:60125,severity:o,pb:s},SuperFeedPageDataProviderNoContentResponse:{id:60126,severity:o,pb:s},SuperFeedPredictSectionsInFirstPageFailed:{id:60127,severity:o,pb:s},SuperFeedMetadataAndLayoutElementsMismatchForTtvrTracker:{id:60128,severity:o,pb:s},SuperFeedContentMissingException:{id:60129,severity:o,pb:s},SuperFeedFallbackException:{id:60130,severity:o,pb:s},SuperFeedAuthResponseMismatch:{id:60131,severity:n.z.NoAlert,pb:s},SuperFeedAuthRequestMismatch:{id:60132,severity:n.z.NoAlert,pb:s},SuperFeed2RowsTtvrException:{id:60133,severity:n.z.NoAlert,pb:s},SuperFeedEmptyCardException:{id:60134,severity:n.z.NoAlert,pb:s},SuperFeedDataProviderPrerenderTimeout:{id:60135,severity:n.z.NoAlert,pb:s},SuperFeedDataProviderTimeout:{id:60136,severity:n.z.NoAlert,pb:s},SuperFeedDataProviderNonFirstPageTimeout:{id:60137,severity:n.z.NoAlert,pb:s},SuperFeedMissingChannelCarousel:{id:60138,severity:n.z.Critical,pb:s},SuperFeedFlexibleAdsBackupRegionStatusParseError:{id:60139,severity:n.z.NoAlert,pb:s},SuperFeedFlexibleAdsEmptyBackfillRegion:{id:60140,severity:n.z.NoAlert,pb:s},SuperFeedFlexibleAdsNotEnoughBackfillContent:{id:60141,severity:n.z.NoAlert,pb:s},SuperFeedUXOverlapError:{id:60142,severity:o,pb:s},SuperFeedCardsOverlapError:{id:60143,severity:o,pb:s},Prong2SuperFeedWidgetBackfillError:{id:60231,severity:o,pb:s},Prong2SuperFeedFailedToResetFlyoutToDefaultState:{id:60232,severity:o,pb:s},Prong2SuperFeedRelatedCardIdUndefinedError:{id:60233,severity:o,pb:s},Prong2SuperFeedPreviewTypeUndefinedError:{id:60234,severity:o,pb:s},Prong2SuperFeedPreviewCardNotFoundError:{id:60235,severity:o,pb:s},Prong2SuperFeedSpotlightCardNotFoundError:{id:60236,severity:o,pb:s},Prong2SuperFeedFailedToSpotlightPreviewCard:{id:60237,severity:o,pb:s},Prong2SuperFeedInvalidSpotlightData:{id:60238,severity:o,pb:s},SuperFeedSDCardMissingException:{id:60239,severity:o,pb:s},SuperFeedDefaultLayoutTemplate:{id:60240,severity:o,pb:s},SuperFeedDataProviderTimeoutBeforeRetry:{id:60241,severity:n.z.NoAlert,pb:s},SuperFeedInvalidLayoutTemplate:{id:60242,severity:o,pb:s},SuperFeedResponseReturnSlowAtFirstPage:{id:60243,severity:o,pb:s},SuperFeedResponseReturnSlowAtSecondPage:{id:60244,severity:o,pb:s},SuperFeedUndefinedLayoutTemplate:{id:60245,severity:o,pb:s},SuperFeedSectionLayoutTemplateMissing:{id:60246,severity:o,pb:s},SuperFeedBundleLoadingError:{id:60247,severity:n.z.Critical,pb:s},SuperFeedLoadedSuccessfully:{id:60248,severity:n.z.NoAlert,pb:s}}),El=(n.z.Critical,{DataMapperError:{id:60400,severity:o,pb:s},EmptySubcardData:{id:60401,severity:o,pb:s},NoContent:{id:60402,severity:o,pb:s},InsufficientContent:{id:60403,severity:o,pb:s},InvalidContentType:{id:60404,severity:o,pb:s},FetchContentByLocationError:{id:60405,severity:n.z.NoAlert,pb:s},HideCardError:{id:60406,severity:o,pb:s},ContentImageError:{id:60407,severity:o,pb:s},ProviderImageError:{id:60408,severity:o,pb:s},FollowTopicError:{id:60409,severity:o,pb:s},UndefinedTopicDataConnector:{id:60410,severity:o,pb:s},NextdoorFetchContentFailed:{id:60411,severity:o,pb:s},NextdoorLocationManagerTimeout:{id:60412,severity:o,pb:s}}),Ol={id:60413,severity:o,pb:s},Ml={id:60414,severity:o,pb:s},xl={EmptyMiniArticleCardListError:{id:60420,severity:o,pb:s},UnsupportedCardSizeError:{id:60421,severity:o,pb:s},DismissSignalError:{id:60422,severity:o,pb:s}},Dl={id:60475,severity:o,pb:s},Rl={id:60500,severity:o,pb:s},Ll={ContentParseError:{id:60600,severity:o,pb:s}},Fl=(Object.assign(Object.assign({},s),{userImpacting:!0}),Object.assign(Object.assign({},s),{userImpacting:!0}),{id:60800,severity:o,pb:s}),Nl={id:60801,severity:o,pb:s},Bl={RelatedStoriesContentFetchError:{id:60900,severity:o,pb:s},RelatedStoriesContentParseError:{severity:o,pb:s}},jl={SuperSDHideCardError:{id:61e3,severity:o,pb:s}},$l=(n.z.NoAlert,{MsalAcquireAccountLinkingTokenException:{id:7e4,severity:n.z.HighImpact,pb:s},ApiCallException:{id:70001,severity:n.z.HighImpact,pb:s}}),Ul={FailedToFetchProfilesData:{id:70010,severity:o,pb:s},FailedToLinkAccounts:{id:70011,severity:o,pb:s},FailedToDeleteLink:{id:70012,severity:o,pb:s},FailedMsaLogin:{id:70013,severity:o,pb:s},FailedToMapAccountLinkingCardSettings:{id:70014,severity:n.z.Critical,pb:s},RewardsDataConnectorError:{id:70015,severity:n.z.Critical,pb:s}},Hl={id:70100,severity:o,pb:s},_l={id:70101,severity:o,pb:s},Wl=(n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),{EmptyResultFromTravelApi:{id:70201,severity:o,pb:s},ErrorResultFromTravelApi:{id:70202,severity:o,pb:s},FailedToFetchTravelArtciles:{id:70203,severity:o,pb:s},FailedToFetchDestinationDetails:{id:70204,severity:o,pb:s},InvalidResponseForDestinationDetails:{id:70205,severity:o,pb:s},RetriedErrorFromTravelApi:{id:70206,severity:o,pb:s},FailedToFetchTravelArticlePillData:{id:70207,severity:o,pb:s},InvalidResponseForTravelArticlePillData:{id:70208,severity:o,pb:s},InvalidResponseForAutoSuggest:{id:70209,severity:o,pb:s},FailedToFetchAutoSuggest:{id:70210,severity:o,pb:s},FailedToExecuteUserActions:{id:70211,severity:o,pb:s},InvalidResponseForUserActions:{id:70212,severity:o,pb:s},FailedToFetchTravelArticleEoabData:{id:70213,severity:o,pb:s},InvalidResponseForTravelArticleEoabData:{id:70214,severity:o,pb:s},InvalidResponseForHotelDataRequest:{id:70215,severity:o,pb:s},FailedToFetchHotelDataRequest:{id:70216,severity:o,pb:s},FailedToParseSegmentCardData:{id:70217,severity:o,pb:s},InvalidV2Data:{id:70218,severity:o,pb:s},ViewNotAvailableForV2Data:{id:70219,severity:o,pb:s},MissingCardTypeTelemetry:{id:70220,severity:o,pb:s},ErrorWhileParsingDate:{id:70221,severity:o,pb:s},ErrorWhileLoadingHotelPrices:{id:70222,severity:o,pb:s},ErrorWhileParsingPrice:{id:70223,severity:o,pb:s}}),zl={id:70300,severity:o,pb:s},Gl={id:70400,severity:o,pb:s},Vl={id:70401,severity:o,pb:s},ql={id:70402,severity:o,pb:s},Zl={id:70403,severity:o,pb:s},Kl={id:70404,severity:o,pb:s},Ql=(n.z.NoAlert,n.z.Critical,n.z.NoAlert,{NotSetOnScreenByDataConnector:{id:70600,severity:o,pb:s},ErrorGettingLocalCampaign:{id:70601,severity:o,pb:s}}),Jl={EmptyCardError:{id:70700,severity:o,pb:s},MapContentError:{id:70701,severity:o,pb:s},NoContentError:{id:70702,severity:o,pb:s},NotEnoughContentWarning:{id:70703,severity:o,pb:s},ContentFetchError:{id:70704,severity:o,pb:s},MissingHeadingLinkConfigGenericUrl:{id:70705,severity:o,pb:s},MissingHeadingLinkConfigSettings:{id:70706,severity:o,pb:s}},Xl={CoachmarkDataConnectorUndefined:{id:71e3,severity:o,pb:s},OffersUndefined:{id:71001,severity:o,pb:s},PageSettingsUndefined:{id:71002,severity:o,pb:s},ConfigNotPassed:{id:71003,severity:o,pb:s},RewardsWCElementNodFound:{id:71004,severity:n.z.NoAlert,pb:s}},Yl={id:72e3,severity:o,pb:s},eu={id:72100,severity:o,pb:s},tu={id:72101,severity:o,pb:s},iu=(n.z.NoAlert,{id:73011,severity:n.z.Alert,pb:s}),nu={id:73012,severity:n.z.Alert,pb:s},ru={id:73013,severity:n.z.Alert,pb:s},ou=(n.z.Alert,{id:73021,severity:n.z.Alert,pb:s}),su={id:73030,severity:n.z.Alert,pb:s},au=(n.z.Alert,{id:73032,severity:n.z.Alert,pb:s}),cu={id:73033,severity:n.z.Alert,pb:s},du={id:73034,severity:n.z.Alert,pb:s},lu={id:73040,severity:n.z.Alert,pb:Object.assign({},s)},uu={id:73050,severity:n.z.Alert,pb:Object.assign({},s)},pu={id:73051,severity:n.z.Alert,pb:Object.assign({},s)},gu={id:73052,severity:n.z.Alert,pb:s},hu={id:73053,severity:n.z.Alert,pb:s},mu={id:73054,severity:n.z.Alert,pb:s},fu=(n.z.Alert,{DataMapperError:{id:73100,severity:o,pb:s},EmptySubcardData:{id:73101,severity:o,pb:s},NoContent:{id:73102,severity:o,pb:s},InsufficientContent:{id:73103,severity:o,pb:s},FailedToHideCard:{id:73104,severity:o,pb:s},NoCanonicalNameReceived:{id:73105,severity:o,pb:s}}),vu=(n.z.Critical,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,n.z.Alert,n.z.Alert,n.z.Alert,n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,n.z.HighImpact,n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,n.z.Alert,n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.Alert,n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.Alert,n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,n.z.Alert,n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.Alert,n.z.Alert,Object.assign(Object.assign({},s),{userImpacting:!1}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),n.z.HighImpact,Object.assign(Object.assign({},s),{userImpacting:!0}),{id:77e3,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}),yu={id:77001,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},bu=(n.z.NoAlert,n.z.NoAlert,{id:80050,severity:o,pb:s}),Su={id:80051,severity:o,pb:s},Cu={id:80052,severity:o,pb:s},wu={id:80053,severity:o,pb:s},Tu={id:80054,severity:n.z.NoAlert,pb:s},ku={id:80055,severity:n.z.NoAlert,pb:s},Au={id:80056,severity:o,pb:s},Iu={id:80057,severity:o,pb:s},Pu={id:80058,severity:o,pb:s},Eu=(n.z.Critical,{id:80105,severity:o,pb:s}),Ou={EmptyContentData:{id:85e3,severity:o,pb:s},InsufficientContent:{id:85001,severity:o,pb:s},RewardsDataConnectorError:{id:85002,severity:o,pb:s},DataMapperError:{id:85003,severity:o,pb:s}},Mu={ShoppingDataMapperError:{id:90003,severity:o,pb:s},ShoppingTelemetryError:{id:90004,severity:o,pb:s},ShoppingInitializationError:{id:90005,severity:n.z.NoAlert,pb:s}},xu=(n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,n.z.NoAlert,{id:90300,severity:o,pb:s}),Du={id:90301,severity:o,pb:s},Ru=(n.z.NoAlert,{id:90303,severity:o,pb:s}),Lu={id:90304,severity:o,pb:s},Fu={id:90305,severity:o,pb:s},Nu={id:90306,severity:o,pb:s},Bu={id:90307,severity:o,pb:s},ju=(n.z.Critical,{id:95001,severity:o,pb:s}),$u={ChannelFailedToInitializeApp:{id:1e5,severity:o,pb:s},ChannelFailedToInitializeCookie:{id:100001,severity:o,pb:s},ChannelFailedToFetchFollowedChannels:{id:100002,severity:o,pb:s},ChannelFailedToFetchAllChannels:{id:100003,severity:o,pb:s},ChannelFailedToUpdateFollowStatus:{id:100004,severity:o,pb:s},UndefinedTopicDataConnector:{id:100005,severity:o,pb:s},UndefinedPublisherServiceClient:{id:100006,severity:o,pb:s},EmptyStoryResponseFromChannel:{id:100007,severity:o,pb:s},UndefinedChannelDataConnector:{id:100008,severity:o,pb:s},FailedToFetchWpoData:{id:100009,severity:o,pb:s},InvalidFullpageData:{id:100010,severity:o,pb:s},ChannelFailedToFetchRecommendedChannels:{id:100011,severity:o,pb:s},MismatchedActivityID:{id:100012,severity:o,pb:s},InvalidResponseData:{id:100013,severity:o,pb:s},UnsuccessfulResponseStatus:{id:100014,severity:o,pb:s},InvalidChannelDataTemplate:{id:100015,severity:o,pb:s},MissingRiverRegionData:{id:100016,severity:o,pb:s},FailedToFetchContentData:{id:100017,severity:o,pb:s},UnblockingBadFullpageData:{id:100018,severity:o,pb:s},UnblockingBadContentData:{id:100019,severity:o,pb:s},FailedToParseInterestSdCardData:{id:100020,severity:o,pb:s},InterestSdCardDataIsMissing:{id:100021,severity:o,pb:s},showingErrorPageInChannelList:{id:100022,severity:o,pb:s},FailedToInitSkypeSdkForViews:{id:100023,severity:o,pb:s},ImageLoadError:{id:100024,severity:o,pb:s},FailedInitFeedByCacheOrPrefetch:{id:100025,severity:o,pb:s},UnsupportedMarket:{id:100026,severity:o,pb:s},CacheDataInvalid:{id:100027,severity:o,pb:s},FailedToGetCacheData:{id:100028,severity:o,pb:s},PrefetchPromiseIsUndefined:{id:100029,severity:o,pb:s},ChannelsNewsFailedTTVR:{id:100030,severity:o,pb:s},PublisherImageLoadError:{id:100031,severity:o,pb:s}},Uu={PlacementError:{id:111001,severity:n.z.NoAlert,pb:s},PlacementMappingError:{id:111010,severity:n.z.NoAlert,pb:s},TelemetryError:{id:111020,severity:n.z.NoAlert,pb:s},PlacementManagerError:{id:111030,severity:n.z.NoAlert,pb:s},PlacementProviderError:{id:111040,severity:n.z.NoAlert,pb:s},IrisPlacementProviderError:{id:111041,severity:n.z.NoAlert,pb:s},AmplifyPlacementProviderError:{id:111042,severity:n.z.NoAlert,pb:s},InternalPlacementProviderError:{id:111043,severity:n.z.NoAlert,pb:s},InteractionsStorageError:{id:111050,severity:n.z.NoAlert,pb:s},InteractionsStorageCachingStrategyError:{id:111051,severity:n.z.NoAlert,pb:s},PlacementRulesError:{id:111060,severity:n.z.NoAlert,pb:s},PlacementRulesExceedInteractionsError:{id:111061,severity:n.z.NoAlert,pb:s}},Hu={id:111100,severity:o,pb:s},_u={id:111103,severity:o,pb:s},Wu=(n.z.NoAlert,{id:111106,severity:o,pb:s}),zu={DailyDiscoveryFetchError:{id:111200,severity:o,pb:s},DailyDiscoveryInvalidJsonError:{id:111201,severity:o,pb:s}},Gu={id:111300,severity:o,pb:s},Vu={id:111402,severity:o,pb:s},qu={id:112001,severity:n.z.NoAlert,pb:s},Zu={NoQueryError:{id:120001,severity:o,pb:s},FailedToHideCard:{id:120002,severity:o,pb:s},JSONParseError:{id:120003,severity:o,pb:s}},Ku={BadData:{id:120010,severity:o,pb:s},FailedRequest:{id:120011,severity:o,pb:s}},Qu=(n.z.NoAlert,{NotEnoughCardsError:{id:125001,severity:o,pb:s},JSONParseError:{id:125002,severity:o,pb:s}}),Ju={id:130002,severity:o,pb:s},Xu={id:130003,severity:o,pb:s},Yu=(n.z.NoAlert,{id:133100,severity:o,pb:s}),ep={GenerateMeasureDialogError:{id:135e3,severity:o,pb:s},GenerateDialogOnWigetError:{id:135001,severity:o,pb:s},GetWeatherLocationError:{id:135002,severity:o,pb:s},GenerateCSVError:{id:135003,severity:o,pb:s},TransformDataError:{id:135004,severity:o,pb:s},RateCheckingError:{id:135005,severity:o,pb:s},cardSizeInfoError:{id:135006,severity:o,pb:s}},tp={id:135020,severity:o,pb:s},ip={id:135021,severity:o,pb:s},np={id:135022,severity:o,pb:s},rp={FollowLocationFailed:{id:135100,severity:o,pb:s},UnfollowLocationFailed:{id:135101,severity:o,pb:s},ChangeHomeLocationFailed:{id:135102,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},DetectLocationFailed:{id:135103,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},ReceivedDataError:{id:135104,severity:n.z.HighImpact,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},DateFormatError:{id:135105,severity:o,pb:s},RefreshDataFrom1SError:{id:135106,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})},HideCardError:{id:135107,severity:o,pb:Object.assign(Object.assign({},s),{userImpacting:!0})}},op={NavResponseParsingFailed:{id:136e3,severity:o,pb:s},FeedResponseCachingFailed:{id:136001,severity:o,pb:s},FeedRequestURLGenerationFailed:{id:136002,severity:o,pb:s},UserIDNotAvailableForFeedFetch:{id:136003,severity:n.z.NoAlert,pb:s},FailedToReadNavResponseStream:{id:136004,severity:o,pb:s},NavResponseHandlerFailed:{id:136005,severity:o,pb:s},NavResponseErrorHandlerReturnedFallback:{id:136006,severity:o,pb:s},NavHandlerMarkersNotFound:{id:136007,severity:o,pb:s},UnhandledErrorInNavHandler:{id:136008,severity:o,pb:s},NavFeedRequestFailed:{id:136009,severity:o,pb:s},NavFeedHandlerExited:{id:136010,severity:n.z.NoAlert,pb:s},InMemoryHandlerCacheMissed:{id:136011,severity:n.z.NoAlert,pb:s},FeedFetchTimeOutWaitingForSW:{id:136012,severity:n.z.NoAlert,pb:s},FetchMsgHandlerCacheMissed:{id:136013,severity:n.z.NoAlert,pb:s},FeatureFlagMismatchOccured:{id:136014,severity:n.z.NoAlert,pb:s}},sp={id:14e4,severity:n.z.NoAlert,pb:s},ap=(n.z.NoAlert,{id:140007,severity:n.z.NoAlert,pb:s}),cp={id:140008,severity:n.z.NoAlert,pb:s},dp={id:140010,severity:n.z.NoAlert,pb:s},lp={NoContent:{id:140100,severity:o,pb:s},InsufficientContent:{id:140101,severity:o,pb:s},FollowTopicError:{id:140102,severity:o,pb:s},FollowPublisherError:{id:140103,severity:o,pb:s},UndefinedTopicDataConnector:{id:140104,severity:o,pb:s}}},20390:function(e,t,i){"use strict";i.d(t,{M:function(){return p}});var n=i(1970),r=i(84147),o=i(26482),s=i(95912),a=i(53723);class c extends a.i{constructor(e,t,i,n,r,o,s){super(t,i,n,r,o,s),this.RequestId=e}set isMetrics(e){this._isMetrics=e}get isMetrics(){return this._isMetrics}}var d=i(67509),l=i(33379),u=i(34449);class p{constructor(e,t=""){this.requestId=t,(0,l.N)()?(this.logger=o.e.getInstance("ExperienceLogger",r.i.Info,d.N.Browser),this.isDebugEnabled=((0,u._)(e,"debug")||"").toLowerCase()in{1:1,true:1},this.isDebugEnabled&&!i.g.TEST_ENV&&(window.webpackRequire=i)):(this.logger=o.e.getInstance("ExperienceLogger",r.i.Info,d.N.NodeJs),this.isDebugEnabled=!1),this.setupLogLevel()}getLoggingService(){return this.logger}isDebug(){return this.isDebugEnabled}setDebug(e){this.isDebugEnabled=e,this.setupLogLevel()}setTags(e){this.tags=e}log(e,t){if(!this.tags||!this.tags.length||t&&t.length&&t.filter((e=>this.tags.includes(e))).length>0){const t=new c(this.requestId,e);this.logger.info(t)}}logError(e){const t=new c(this.requestId,e);this.logger.error(t)}logCallback(e){this.logger.infoCallback(e)}logObjects(...e){const t=new c(this.requestId,null,e);this.logger.info(t)}logSingleObject(e,t=!1){const i=new c(this.requestId,null,e);i.isMetrics=t,this.logger.info(i)}setupLogLevel(){this.logger.setLevel(this.isDebug()?r.i.Info:r.i.Error),this.setupAppenders()}setupAppenders(){this.logger.removeAllAppenders(),(0,l.N)()?this.logger.addAppender(new n.N(this.logger.getLevel())):this.logger.addAppender(new s.m(this.logger.getLevel()))}}},68364:function(e,t,i){"use strict";i.d(t,{H:function(){return a},OO:function(){return s},Tr:function(){return c}});var n=i(65135),r=i(26415),o=i(49972);function s(e,t,i,r,s={}){const a=c(t,i,r||(0,o.n)(e),s);a.pb.stack=e&&e.stack,n.M0&&n.M0.sendAppErrorEvent(a)}function a(e,t,i,r={}){n.M0&&n.M0.sendAppErrorEvent(c(e,t,i,r))}function c(e,t,i,n={}){const o=(0,r.mnt)();return Object.assign(Object.assign({},e),{message:t||e.message,pb:i?Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),e.pb),{customMessage:i}),n),{w:1}):Object.assign(Object.assign(Object.assign(Object.assign({},o),e.pb),n),{w:1})})}},86969:function(e,t,i){"use strict";i.d(t,{C:function(){return o}});var n=i(34449),r=i(33379);class o{constructor(){(0,r.N)()?(this.isDebugEnabled=((0,n._)(window.location.href,"debug")||"").toLowerCase()in{1:1,true:1},this.isDebugEnabled&&!i.g.TEST_ENV&&(window.webpackRequire=i)):this.isDebugEnabled=!1}getLoggingService(){return null}isDebug(){return this.isDebugEnabled}setDebug(e){this.isDebugEnabled=e}setTags(e){}log(e,t){this.isDebug()&&console.info(e)}logError(e){console.error(e)}logCallback(e){this.isDebug()&&console.info(e())}logObjects(...e){this.isDebug()&&console.log(...e)}logSingleObject(e,t){this.isDebug()&&console.log(e)}}},33954:function(e,t,i){"use strict";function n(e){r=e}i.d(t,{E:function(){return n},k:function(){return r}});let r=new(i(86969).C)},34449:function(e,t,i){"use strict";function n(e,t){const i=t.replace(/[[\]]/g,"\\$&"),n=new RegExp("[?&]"+i+"(=([^&#]*)|&|#|$)").exec(e);if(!n)return null;const r=n[2];return decodeURIComponent(r.replace(/\+/g," "))||""}i.d(t,{_:function(){return n}})},30876:function(e,t,i){"use strict";i.d(t,{Y:function(){return n},c:function(){return o}});var n,r=i(33954);function o(e){try{const t=new URL(e).searchParams,i=t.get("expPerf"),r=t.get("expPerfSkip");if("all"==r)return{enablePerfTimeline:!1};if(!r&&!i)return{};const o={enablePerfTimeline:!0,uploadTrace:!1,sampleRate:1,uploadCriteria:{minimumTTVR:0}};if("all"===i)o.trackAllExp=!0,o.experiencesExcludedForPerf={};else if(i){const e=o.experiencesForPerf={};i.split(",").forEach((t=>e[t]=!0))}if(r){const e=o.experiencesExcludedForPerf={};r.split(",").forEach((t=>e[t]=!0))}"true"===t.get("expPerfMarks")&&(o.addPerformanceMarks=!0),"true"===t.get("expPerfTimings")&&(o.addPageTimings=!0);const s=parseInt(t.get("expPerfLevel"));return o.traceLevel=null!=n[s]?s:n.default,o}catch(e){return r.k.logError("Error parsing URL for detecting experience diagnostic switches: "+e),{}}}!function(e){e[e.default=0]="default",e[e.medium=1]="medium",e[e.high=2]="high"}(n||(n={}))},54533:function(e,t,i){"use strict";i.d(t,{Xn:function(){return O},dj:function(){return A},iG:function(){return E},g7:function(){return k},FH:function(){return I},Im:function(){return P}});var n=i(30876),r=i(21050),o=i(52575),s=i(59815),a=i(58281),c=i(22704),d=i(73898);const l=(0,c.Ou)(),u=new a.K,p="-start",g="-end";class h{constructor(e,t,i,n,r){this.timelineName=e,this.instanceId=t,this.addPerfMarks=i,this.addPageTimings=n,this.async=r,this.measures=new v,this.timeRange=[1/0,-1/0],this.timelineName=u.qualifyKey(e)}get timeSpan(){const[e,t]=this.timeRange;if(e!==1/0&&t!==-1/0)return[e,t-e]}startMeasure(e,t,i){const{async:n,startTime:r}=i||{},o=b(r);if(null==o)return{endMeasure:d.Z};const{timeRange:s}=this;o<s[0]&&(s[0]=o);const a=f(e,t),c=this.measures.add({coreName:a,from:o,async:null!=n?n:this.async,idSuffix:""},i);return{endMeasure:i=>{const{customSuffix:n,customData:r,endTime:a}=i||{},d=b(a);if(null==d||d<o)return;if(n&&t!==n){const t=f(e,n);this.measures.rename(c,t)}c.to=d,c.customData=r,d>s[1]&&(s[1]=d);!function(e,t,i,n){if(!i&&!n)return;const{from:r,to:o}=t;if(null!=r){const t=e+p;if(i&&(l[t]=r),n&&performance.mark(t,{startTime:r}),null!=o&&(i&&(l[e]=o-r),n)){const i=e+g;performance.mark(i,{startTime:o}),performance.measure(e,t,i)}}}(y(this.timelineName,c),c,this.addPageTimings,this.addPerfMarks)}}}rename(e){if(this.timelineName!==e){if(this.addPageTimings){const t=this.timelineName;this.measures.get().forEach((i=>{const n=y(t,i);delete l[n+p],delete l[n];const r=y(e,i);l[r+p]=i.from,l[r]=i.to-i.from}))}this.timelineName=e}}getPageMeasures(){return this.measures.get().map((e=>Object.assign(Object.assign({},e),{timelineName:this.timelineName})))}getMeasureValues(e){return this.measures.get(e)}instrumentFunc(e,t,i){return(...n)=>{const r=this.startMeasure(e).endMeasure;try{const o=t.apply(i,n);return o instanceof Promise?m(o,e,r):r(),o}catch(e){r({customSuffix:"error"})}}}instrumentPromise(e,t,i){const n=this.startMeasure(e,null,i).endMeasure;return m(t(),e,n)}}function m(e,t,i){return e.then((()=>i())).catch((()=>i({customSuffix:"error"}))),e}function f(e,t){return t?`${e}-${t}`:e}class v{constructor(){this.list=[],this.map=new Map,this.entIndices=[]}add(e,t){const{list:i}=this;return t&&t.entityMeasure&&this.entIndices.push(i.length),i.push(e),this.addToMap(e)}addToMap(e){const t=e.coreName;let i=this.map.get(t);return i||this.map.set(t,i=[]),e.idSuffix=(0,a.p)(i.length),i.push(e),e}get(e){const{list:t}=this;if(!e)return t;const{coreName:i}=e;let n=t;return i?n=this.map.get(i)||[]:e.entityMeasures&&(n=this.entIndices.map((e=>t[e]))),n}rename(e,t){const i=e.coreName;if(i==t)return;const n=this.map.get(i),r=n.indexOf(e);if(r>=0){n.splice(r,1);for(let e=r,t=n.length;e<t;e++)n[e].idSuffix=(0,a.p)(e);e.coreName=t,this.addToMap(e)}}}function y(e,t){return`${e}-${t.coreName}${t.idSuffix}`}function b(e){return"number"==typeof e?e>=0?e:null:null!=e?null:performance.now()}var S=i(33379),C=i(58796);let w;const T={};function k(e,t){(0,r.S4)(t),function(e){Object.assign(T,w=(0,n.c)(e))}(e)}function A(){return T}function I(e){T.enablePerfTimeline=e,T.trackAllExp=e,T.enableEntityMetricsTimeline=e,T.traceLevel=n.Y.default}const P=(e,t,i)=>function(e){if(!T.enablePerfTimeline)return!1;const{experiencesForPerf:t}=T;if(t&&t[e])return!0;const{experiencesExcludedForPerf:i}=T;if(i&&i[e])return!1;return T.trackAllExp}(e)?function(e,t,i){const n=M(e,t);return C.U[n]||(C.U[n]=(0,r.uk)(h,e,t,T.addPerformanceMarks,T.addPageTimings,i))}(e,t,i):void 0;function E(){const e=[];return Object.keys(C.U).forEach((t=>e.push(...C.U[t].getPageMeasures()))),e}function O(e){T.enableEntityMetricsTimeline&&(0,s.Yt)(e)}function M(e,t){return`${e}-${t||"0"}`}(0,S.N)()&&(window._getEntityMetricsCollection=e=>(0,s.HK)(Object.values(C.U),(0,o.At)(e)))},30874:function(e,t,i){"use strict";i.d(t,{z:function(){return T}});var n=i(22704),r=i(54533),o=i(11923);function s(e={}){const t=Object.assign(Object.assign({},(0,n.Ou)()),(0,n.Y9)()),i=[],o={WW:{pid:0},Resolver:{pid:1},Ads:{pid:2},Telemetry:{pid:3},"Content Preview":{pid:4},Images:{pid:5},JS:{pid:6},Statics:{pid:7},Configs:{pid:8},Services:{pid:9},nextPID:{pid:20}},s=100;!function(e,t,i){const n=[{name:"Ads",regex:/(\/srtb\.|taboola|outbrain)/i},{name:"Telemetry",regex:/(otf\.|\/c\.gif)/i},{name:"Content Preview",regex:/\/content\/view\/v[0-9]\/Preview\//i},{name:"Images",regex:/(img-s-msn-com|\.svg)/i},{name:"JS",regex:/\.js/i},{name:"Statics",regex:/statics/i},{name:"Configs",regex:/\/config/i},{name:"Services",regex:/(\/service\/|api|\/getappanoncookie|content|microsoftonline)/i}];let r=performance.getEntriesByType("resource").filter((t=>{const{duration:i,startTime:n}=t;return h(e,n,n+i)}));n.forEach((e=>{p(e.name,i);const n=[];r.filter((t=>{const i=t.name.match(e.regex);return i||n.push(t),i})).forEach(((i,n)=>{const r=new URL(i.name),o=r.pathname.length>1?r.pathname:r.hostname;t.push({async:!0,timelineName:e.name,coreName:o,idSuffix:`-${n}`,from:i.startTime,to:i.startTime+i.duration})})),r=n}))}(e,i,o),function(e,t,i,n){i.forEach((i=>{const{async:r,timelineName:o}=i;r&&p(o,n),h(e,i.from,i.to)&&t.push(i)}))}(e,i,(0,r.iG)(),o),u(e,i,t,o,/^WW\./,"WW");const m=Object.assign({},window._appTimings||{});u(e,i,m,o,/.*/);const f=[];f.push(c(e,"Global","NavStart",s,0,"g")),Object.keys(t).filter((i=>i.match(/TT/)&&h(e,t[i]))).sort(((e,i)=>t[e]-t[i])).forEach((i=>f.push(c(e,"Global",i,s,t[i],"g")))),Object.keys(t).filter((i=>i.match(/^WW\./i)&&h(e,t[i]))).sort(((e,i)=>t[e]-t[i])).forEach((i=>f.push(c(e,"WW",i,o.WW.pid,t[i],"p")))),f.push(a("process_name",s,{name:"Main"})),f.push(a("process_sort_index",s,{sort_index:s}));const{uploadTrace:v}=e;return l(e,i,!0).forEach(((t,i)=>{const{pid:n}=o[t.name];t.measures.forEach(((t,r)=>{const{timelineName:o,coreName:s,idSuffix:a,from:c,to:l,customData:u}=t,p=("000"+r).substr(-3,3),g=s+a,h=v?function(e){const t=e.lastIndexOf("/");return t>=0?e.substr(t+1):e}(g):g,m=`${p}-${h}`;f.push(...function(e,t,i,n,r,o,s,a,c,l){return[d(e,t,i,l?"B":"b",n,r,s,{id:o}),d(e,t,i,l?"E":"e",n,r,a,{id:o,args:JSON.stringify(c)})]}(e,o,m,n,i,r,c,l,u))})),f.push(a("process_name",n,{name:t.name})),f.push(a("process_sort_index",n,{sort_index:n})),f.push(a("thread_name",n,{name:t.name},i)),f.push(a("thread_sort_index",n,{sort_index:i},i))})),l(e,i,!1).forEach(((t,i)=>{t.measures.forEach((t=>{const{timelineName:n,coreName:r,idSuffix:o,from:s,to:a,customData:c}=t,l=r+o;f.push(function(e,t,i,n,r,o,s,a){const c=g(s-o);return d(e,t,i,"X",n,r,o,{dur:c,args:JSON.stringify(a)})}(e,n,l,100,i,s,a,c))})),f.push(a("thread_name",100,{name:t.name},i)),f.push(a("thread_sort_index",100,{sort_index:i},i))})),f}function a(e,t,i,n){const r={name:e,ph:"M",pid:t,args:i};return null!=n&&(r.tid=n),r}function c(e,t,i,n,r,o){return d(e,t,i,"i",n,null,r,{s:o})}function d(e,t,i,n,r,o=null,s,a){const c=Object.assign({cat:t,name:i,ph:n,pid:r,tid:o,ts:g(s)},a);return null!=o&&(c.tid=o),c}function l(e,t,i){const n=(0,o.Z)(t.filter((t=>!!t.async===i&&h(e,t.from,t.to))),(e=>e.timelineName)),r=[];let s=0;return Object.keys(n).forEach((e=>{const t=n[e].sort(((e,t)=>e.from-t.from));s=Math.max(s,t[t.length-1].to),r.push({name:e,measures:t})})),r.sort(((e,t)=>e.measures[0].from-t.measures[0].from))}function u(e,t,i,n,r,o){const s=/-?[Ss]tart$/,a={"-Start":"-End","-start":"-end",Start:"End",start:"end"},c=[];Object.keys(i).filter((e=>e.match(r))).forEach((r=>{const d=r.match(s);if(!d)return;let l=r.replace(s,"");const u=`${l}${a[d[0]]}`,p=d&&i[u];if(!p)return;c.push(r),c.push(u);let g=o;if(!g){const e=l.match(/(.+)\.(.+)/);if(!e)return;g=e[1],l=e[2]}const m=i[r];h(e,m,p)&&t.push({async:!!n[g],timelineName:g,coreName:l,idSuffix:"",from:m,to:p})}));for(const e of c)delete i[e]}function p(e,t){if(!t[e])return t[e]={pid:t.nextPID.pid++},!0}function g(e){return Math.round(1e3*e)}function h(e,t,i){return!e.uploadTrace||!e.maxTime||(!t||t<=e.maxTime)&&(!i||i<=e.maxTime)}var m=i(21050),f=i(33379),v=i(79278),y=i(30876),b=i(14675),S=i(59902),C=i(59815),w=i(61502);function T(e,t,i,n,o){(0,r.g7)(e,t),(0,v.n1)(),function(e,t,i,n,r){(0,C.TG)(e,i,t,n,r),(0,w.ny)((0,m.oA)("fetch","fetch",!0)),(0,S.DY)((0,m.oA)("custom-em","custom-em",!0))}(o,n,i,(()=>(0,r.FH)(!0)),(()=>(0,r.FH)(!1))),(0,r.dj)().traceLevel>=y.Y.high&&(k("RAF",requestAnimationFrame),k("RAFTimer",b.c)),(0,f.N)()&&(window._getAppPerfTrace=s)}function k(e,t){const i=(0,m.oA)(e,e);i&&function e(){const{endMeasure:n}=i.startMeasure("frame");t((()=>{n(),e()}))}()}},58281:function(e,t,i){"use strict";i.d(t,{K:function(){return n},p:function(){return r}});class n{constructor(){this.counts={}}qualifyKey(e){e||(e="NA");return e+this.qualifySuffix(e)}qualifySuffix(e){return r(this.addCount(e)-1)}reset(){this.counts={}}addCount(e){return this.counts[e]=(this.counts[e]||0)+1}}function r(e){return e<=0?"":"-"+(e+1)}},23163:function(e,t,i){"use strict";i.d(t,{Am:function(){return u},F$:function(){return l},Oq:function(){return o},bg:function(){return r},dw:function(){return a},iA:function(){return c},zV:function(){return s}});var n=i(33379);function r(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("resource").filter((e=>"script"===e.initiatorType)),i=["vendors","microsoft","common","experience"];for(const n of i){const i=t.find((e=>e.name.indexOf(n)>=0));i&&d(e,i,n+"JS")}}}function o(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("navigation");if(t&&t.length){const i=t[0];i&&d(e,i,"html")}}}function s(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("resource");if(t&&t.length){const i=t.find((e=>e.name.indexOf("/Feed/me")>=0));i&&d(e,i,"feed")}}}function a(e){if(!(0,n.N)()||!e)return;const t=navigator;if(t.connection){const i=t.connection;"rtt"in i&&(e.rtt=i.rtt),"downlink"in i&&(e.downlink=i.downlink)}"hardwareConcurrency"in navigator&&(e.hardwareConcurrency=navigator.hardwareConcurrency)}function c(e){e&&(e.isIDBSupported=window.indexedDB?1:0,e.isSWSupported=window.navigator.serviceWorker?1:0,e.isWWPresent=window._isWebWorkerPresent?1:0)}function d(e,t,i){const n=l(t);null!=n&&(e[i+"Cached"]=n?1:0)}function l(e){return void 0!==e.transferSize?!(0!==e.transferSize&&300!==e.transferSize):void 0!==e.nextHopProtocol?!(""!==e.nextHopProtocol):void 0}function u(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("navigation");if(t.length){const i=t[0],n="useragent_launch";"type"in i&&(e.isBrowserLaunch=i.type===n?1:0)}}}},22704:function(e,t,i){"use strict";i.d(t,{A1:function(){return l},O8:function(){return c},Ou:function(){return o},UE:function(){return d},WP:function(){return a},Y9:function(){return s}});var n=i(33379),r=i(27003);function o(){return(0,n.N)()?window._pageTimings||(window._pageTimings={}):r.Gq.get("__diagnostics_pageTimings",(()=>({})))}function s(){return(0,n.N)()?window._secondaryPageTimings||(window._secondaryPageTimings={}):r.Gq.get("__diagnostics_secondaryPageTimings",(()=>({})))}function a(){return(0,n.N)()?window._webVitalsPageTimings||(window._webVitalsPageTimings={}):r.Gq.get("__diagnostics_webVitalsPageTimings",(()=>({})))}function c(e,t=!0){const i=o();if(!e||!i||t&&i.TTVR)return;const n=i[e]||(i[e]=0);i[e]=n+1}function d(){return(0,n.N)()?performance.now():performance.now()-o().ssrTimeOrigin}function l(){if((0,n.N)()&&navigator)return{memory:navigator.deviceMemory,cpu:navigator.hardwareConcurrency,networkSpeed:navigator.connection&&navigator.connection.effectiveType}}},89696:function(e,t,i){"use strict";i.d(t,{FF:function(){return s},hf:function(){return a},v0:function(){return c}});var n=i(22704),r=i(19388),o=i(62676);function s(e,t){const i=performance.now(),n=t&&t.firstTimeOnly;t&&t.logStart&&a(`${e}-start`,i,n);const r=t&&t.perfTimeline,o=r&&r.startMeasure(e).endMeasure;return function(){const r=performance.now();t&&t.logEnd&&a(`${e}-end`,r,n),t&&!t.logDuration||a(e,r-i,n),o&&o()}}function a(e,t=performance.now(),i){const r=(0,n.Ou)();return i&&void 0!==r[e]?r[e]:(r[e]=Math.round(10*t)/10,t)}function c(e,t=performance.now()){const i=e&&(0,r.TZ)(o.DB)||0;return t+(i>0?-i:0)}},14752:function(e,t,i){"use strict";i.d(t,{A:function(){return a}});var n=i(33940),r=i(33954);const o="-start";class s{constructor(){this.endMarkSuffix="-end","undefined"!=typeof window&&this.initialize(window.performance)}static getInstance(){return s.instance||(s.instance=new s),s.instance}initialize(e){this.performance=e}startMark(e){this.singleMark(e+o)}endMark(e){this.singleMark(e+this.endMarkSuffix),this.measureStartEnd(e)}singleMark(e){const t=this.performance;t&&t.mark&&t.mark(e)}clearMark(e){const t=this.performance;t&&t.clearMarks&&t.clearMarks(e)}clearMeasures(e){const t=this.performance;t&&t.clearMeasures&&t.clearMeasures(e)}measurePromise(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){this.startMark(e);const i=yield t();return this.endMark(e),i}))}measurePerfMarker(e){if(!this.performance)return;const t={},i=this.performance.getEntriesByType("mark");if(!i)return t;for(let n=0;n<i.length;n++){let r=i[n].name;if(!r||null==i[n].startTime)continue;if(r=r.replace(/-(end|start)$/i,""),!r.startsWith(e))continue;const o=t[r]||new c(r);o.processPerfEntry(i[n]),o.isValid&&(t[r]=o)}return t}measureStartEnd(e){const t=this.performance;if(t&&t.measure)try{t.measure(e,e+o,e+this.endMarkSuffix)}catch(t){r.k.logError(`Error while attempting to measure start/end of '${e}'. Error: ${t}`)}}}const a=s.getInstance();class c{constructor(e){this.duration=0,this.markerName=e}get isValid(){return null!=this.startTime}processPerfEntry(e){e.name.endsWith(o)?(this.firstStartTime||(this.firstStartTime=e.startTime),this.startTime=e.startTime):null!=this.startTime&&(this.duration+=e.startTime-this.startTime,this.startTime=null)}}},62676:function(e,t,i){"use strict";i.d(t,{Ak:function(){return c},DB:function(){return d},Fz:function(){return f},Hm:function(){return m},IP:function(){return g},MV:function(){return o},O6:function(){return l},OM:function(){return u},P9:function(){return S},T8:function(){return n},U4:function(){return r},V4:function(){return C},Wk:function(){return b},fR:function(){return h},iL:function(){return v},kc:function(){return a},pJ:function(){return p},qh:function(){return s},w:function(){return y},zJ:function(){return w}});const n="E2E",r="TTPV",o="TTVR",s="TTVS",a="htmlCached",c="feedCached",d="pageRevealStart",l="pageRevealComplete",u="getTabTimingsTime",p="protocolLaunchStart",g="FromProtocolLaunchStart",h="userAgentStart",m="FromUserAgentStart",f="PCSToJSStart",v="JSStartToOnLoad",y="TTJSStart",b="timeToOnLoad",S="timeToFirstByte",C="prerender",w="FCP_Old"},19388:function(e,t,i){"use strict";i.d(t,{BW:function(){return _},EV:function(){return Z},Gb:function(){return H},IJ:function(){return q},IO:function(){return X},Nv:function(){return ne},O0:function(){return ve},OB:function(){return se},OZ:function(){return ye},O_:function(){return K},Sc:function(){return ue},TZ:function(){return fe},Xl:function(){return Y},YJ:function(){return te},a8:function(){return D},aR:function(){return Ce},b1:function(){return oe},bO:function(){return de},bP:function(){return ae},cd:function(){return G},e3:function(){return re},gh:function(){return ce},hy:function(){return we},l6:function(){return be},mb:function(){return z},ny:function(){return ie},nz:function(){return F},oN:function(){return n},o_:function(){return W},su:function(){return Q},tW:function(){return ee},v9:function(){return Se}});var n,r=i(62676),o=i(33379),s=i(59902),a=i(22704),c=i(85663),d=i(14752),l=i(14675);let u,p,g,h,m,f,v;!function(e){e.Primary="primary",e.Secondary="secondary"}(n||(n={}));const y=new Map,b=new Map,S=new Map;let C,w,T,k,A,I,P,E=new Map,O=new Map,M=[];const x="TTF.",D="TTVR.",R="TTVS.",L="TTPR.",F="TTSR.";let N=!1,B=!1,j="";const $={};let U;function H(){return $}function _(e="",t=!1,i){if((0,o.N)())return i=i||performance.now(),J(x,e,t,i)}function W(e="",t=!1,i){if((0,o.N)())return i=i||performance.now(),J(D,e,t,i),V(e),i}function z(e){M.push(e)}function G(e){M=M.filter((t=>t!==e))}function V(e){if(M.length)try{M.map((t=>t(e)))}catch(e){}}function q(e="",t=!1,i){(0,l.c)((()=>W(e,t,i)))}function Z(e=""){const t=fe(r.DB),i=-1===t?-1:performance.now()-t;J(L,e,!1,i)}function K(e,t,i){Q(e,i-t)&&(0,s.QP)({name:e,startTime:t,endTime:i})}function Q(e,t){if(O.get(e))return!1;const i=performance.getEntriesByName&&performance.getEntriesByName(e);let n;return Boolean(i&&i.length)?O.has(e)||(O.set(e,Math.round(i[0].startTime)),n=!0):(d.A.singleMark(e),O.set(e,(0,c.isNullOrUndefined)(t)?-1:Math.round(t)),n=!0),p&&p.delete(e)&&0===p.size&&I&&I(ce()),n}function J(e,t,i,n){if(!t||!t.length)return;if(!e||!e.length)return;const o=e+t;if(o.startsWith(D)&&(!m||!m.has(o))&&f&&f.has(o))return void Q(o,i?-1:n);if(S.has(o)&&S.get(o)(o),E.get(o))return;const s=performance.getEntriesByName&&performance.getEntriesByName(o);Boolean(s&&s.length)?E.set(o,Math.round(s[0].startTime)):(d.A.singleMark(o),i?E.set(o,-1):E.set(o,Math.round(n))),o.startsWith(D)&&($.marker=o,$.value=E.get(o)),g&&g.delete(o)&&0===g.size&&w&&w(ge()),u&&u.delete(o)&&0===u.size&&k&&k(se()),e===R&&P&&P(he(R,r.qh))}function X(e){u=le(e),g=le(e,"TTVR"),h=le(e,"TTPR"),m=new Set(me(e,"TTVR")),w&&0===g.size&&k(ge()),k&&0===u.size&&k(se()),N=!0}function Y(e){p||(p=new Set,f=new Set,e.forEach((e=>{O.get(e)||p.add(e),e.startsWith(D)&&f.add(e)})),0===p.size&&I&&I(ce()))}function ee(e){v||(v=e)}function te(e){e&&N&&u&&g&&(e.startsWith(D)||(e=D+e),u.add(e),g.add(e),m.add(e))}function ie(e){e&&N&&u&&g&&(e.startsWith(D)||(e=D+e),m.delete(e),g&&g.delete(e)&&0===g.size&&w&&w(ge()),u&&u.delete(e)&&0===u.size&&k&&k(se()))}function ne(){return(0,o.N)()?function(){if(!(0,o.N)())return null;if(T)return T;if(u&&0===u.size)return Promise.resolve(se());return T=new Promise((e=>{k=e})),T}():null}function re(){return(0,o.N)()?A||(p&&0!==p.size?(A=new Promise((e=>{I=e})),A):Promise.resolve(ce())):null}function oe(){return(0,o.N)()?C||(g&&0===g.size?Promise.resolve(ge()):(C=new Promise((e=>{w=e})),C)):Promise.resolve([])}function se(){return[...ge(),...pe()]}function ae(){return[...ge(!1),...pe()]}function ce(){return[...O]}function de(e){return e===n.Primary?Array.from(u||[]):Array.from(p||[])}function le(e,t){const i=new Set;for(const n of me(e,t))E.get(n)||i.add(n);return i}function ue(e){return(he(L).find((t=>t[0].includes(e)))||[])[1]}function pe(){return he(x)}function ge(e=!0){return e&&!1!==U?he(D,r.MV,!0):he(D)}function he(e,t,i){const n=[];let o=0;if(E.forEach(((t,i)=>{if(i.startsWith(e)){n.push([i,t]),t>o&&(!i.startsWith("TTVR")||m.has(i))&&(o=t);const e=y.get(i);(null==e?void 0:e.name)&&(b.get(e.name)<t&&b.set(e.name,t),e.preserve||n.pop())}})),b.forEach(((t,i)=>{i.startsWith(e)&&n.push([i,t])})),t&&n.push([t,o]),i&&t===r.MV){const e=(0,a.Ou)().refreshDelay||0;n.push(["TTVR.WithRefreshDelay",o+e])}return n}function me(e,t){let i=[],n=[],r=[];return!e||!e.TTVR||t&&"TTVR"!==t||(i=e.TTVR.map((e=>D+e))),!e||!e.TTF||t&&"TTF"!==t||(r=e.TTF.map((e=>x+e))),e&&e.TTPR&&"TTPR"===t&&(n=e.TTPR.map((e=>L+e))),[...i,...r,...n]}function fe(e){const t=performance.getEntriesByName(e);return t&&t[0]&&t[0].startTime?t[0].startTime:-1}function ve(e){const t=O.get(e);return null!=t?t:-1}function ye(){return v}function be(e="",t=!1,i){let n=e;n.startsWith(D)||(n=D+e),N&&(m.has(n)||B)&&""!==e?W(e,t,i):V(e)}function Se(e="",t=!1,i){let n=e;n.startsWith(D)||(n=D+e),N&&(m.has(n)||B)&&""!==e?q(e,t,i):V(e)}function Ce(e="",t="",i=!1,n){let r=e,o=t;N&&""!==e&&""!==t&&(B||t!==j)&&(r.startsWith(D)||(r=D+e),o.startsWith(D)||(o=D+t),u.has(r)||E.has(r)||m.has(r)||(te(r),y.set(r,{name:o,preserve:i}),b.set(o,-1),n&&S.set(r,n)))}function we(e=!1,t=""){B=e,j=t}},21050:function(e,t,i){"use strict";function n(e,t,i,n=!1,r=!1,o){return new e(t,i,n,r,o)}i.d(t,{S4:function(){return o},fW:function(){return a},oA:function(){return s},uk:function(){return n}});let r=null;function o(e){r=e}const s=(e,t,i)=>r?r(e,t,i):null;function a(e,t,i){return i?i.instrumentPromise(t,e):e()}},58796:function(e,t,i){"use strict";i.d(t,{U:function(){return n}});let n={}},14675:function(e,t,i){"use strict";i.d(t,{c:function(){return o},u:function(){return s}});var n=i(33940),r=i(33379);function o(e){(0,r.N)()&&requestAnimationFrame((()=>setTimeout((()=>e()),0)))}function s(){return(0,n.mG)(this,void 0,void 0,(function*(){return new Promise((e=>o(e)))}))}},79278:function(e,t,i){"use strict";i.d(t,{Dd:function(){return g},d0:function(){return h},n1:function(){return p}});var n=i(21050),r=i(14675),o=i(30876),s=i(33379),a=i(54533),c=i(22704),d=i(8114);const l={},u=new WeakMap;function p(){if(!(0,s.N)())return;const{enablePerfTimeline:e,traceLevel:t}=(0,a.dj)();if(!e||"undefined"==typeof customElements||t<o.Y.high)return;const i=customElements.define;customElements.define=function(...e){const[t,n]=e,r=n.prototype.connectedCallback;return"function"!=typeof r||"getExperienceType"in n.prototype||(n.prototype.connectedCallback=function(...e){const t=g(this.localName,this.instanceId),i=t&&t.startMeasure("init").endMeasure,n=r.apply(this,e);return i&&i(),h(this,t),(0,c.O8)("WC.Count"),n}),i.apply(customElements,e)}}function g(e,t){const i=1===(l[e]=(l[e]||0)+1)?t:(0,d.Z)(t);return(0,n.oA)(e,i)}function h(e,t,i=r.u){if(!e||!e.shadowRoot||!t)return;const n=new m("update",t);n.tryStartMeasure(),i().then((()=>n.tryEndMeasure()));const{traceLevel:o}=(0,a.dj)();o&&function(e,t,i){let n=u.get(e);if(n)return;let r=0;n=new MutationObserver((e=>{t.tryStartMeasure();const n=e.reduce(((e,t)=>(t.addedNodes.forEach((t=>e.added.push(t.nodeName))),t.removedNodes.forEach((t=>e.removed.push(t.nodeName))),t.attributeName&&e.attrs.push(t.attributeName),e)),{added:[],removed:[],attrs:[]}),o={added:n.added.length?n.added.join(","):void 0,removed:n.removed.length?n.removed.join(","):void 0,attrs:n.attrs.length?n.attrs.join(","):void 0};t.addCustomData("mutation"+ ++r,o),i().then((()=>t.tryEndMeasure()))})),n.observe(e.shadowRoot,{childList:!0,subtree:!0,attributes:!0}),n.observe(e,{attributes:!0}),u.set(e,n)}(e,n,i||v)}class m{constructor(e,t){this.measureName=e,this.perfTimeline=t,this.customData={}}tryStartMeasure(){if(!this.coreEndMeasure){const e=this.perfTimeline.startMeasure(this.measureName).endMeasure;this.coreEndMeasure=()=>e({customData:this.customData})}}addCustomData(e,t){this.customData[e]=t}tryEndMeasure(){this.coreEndMeasure&&(this.coreEndMeasure(),this.customData={},this.coreEndMeasure=null)}}let f;function v(){return f||(f=new Promise((e=>(0,r.c)((()=>{f=null,e()})))))}},13999:function(e,t,i){"use strict";i.d(t,{m:function(){return s}});var n=i(59902),r=i(22704),o=i(49972);function s(){const e=performance.now();return{end:t=>{const i=performance.now(),s="ClientInit";try{if(!t){(0,r.Ou)().ClientInit=Math.round(i-e)}(0,n.QP)({name:s,startTime:e,endTime:i,customSuffix:t?"error":void 0})}catch(e){console.error("ClientInit span error: "+(0,o.n)(e))}}}}},59902:function(e,t,i){"use strict";i.d(t,{DY:function(){return s},QP:function(){return a},ee:function(){return c},m8:function(){return l},zI:function(){return d}});var n=i(52575);let r,o;function s(e){o=[],r=e}function a(e){r&&r.startMeasure(e.name,null,{entityMeasure:!0,startTime:u(e.startTime,-1)}).endMeasure({endTime:u(e.endTime,-1)})}function c(e){return r?(0,n.fJ)(r.getMeasureValues({entityMeasures:!0}),e,"from",!1):[]}function d(e){o&&"number"==typeof e.duration&&e.duration>=0&&o.push({time:performance.now(),name:e.name,duration:e.duration})}function l(e){return o?(0,n.fJ)(o,e,"time",!0):[]}function u(e,t){return null!=e?e:t}},62325:function(e,t,i){"use strict";i.d(t,{j:function(){return c},o:function(){return a}});var n=i(82890),r=i(59902),o=i(22704),s=i(62676);function a(e){const t=(0,o.Ou)();for(const[i,n]of e)for(const e of n){const n=t[e];if(null!=n){t[i]=n;break}}}function c(){const e=`${s.MV}.${n.p.basicFeed}`;a([[e,["TTVR.River","TTVR.GridViewFeed","TTVR.StripeFeed"]]]);const t=(e,t,n)=>{const o=n&&t?n-t:-1;i[e]=o,(0,r.QP)({name:e,startTime:t,endTime:n})},i=(0,o.Ou)(),c=i[e],d=i[`${s.MV}.${n.p.searchBox}`],l=i[`${s.MV}.${n.p.sdCards}`],u=i[n.p.wpoResponseBack];t(n.p.searchBoxToFeed,d,c),t(n.p.feedSDRender,c,l),t(n.p.feedBasicRender,u,c)}},59815:function(e,t,i){"use strict";i.d(t,{TG:function(){return ie},Yt:function(){return re},HK:function(){return ne}});var n=i(52575),r=i(65135),o=i(44674),s=i(26415);const a=Object.freeze({experience:"e",page:"p",other:"o",script:"js",service:"s",container:"c",custom:"x"});var c;!function(e){e[e.keepPrevious=1]="keepPrevious",e[e.keepThis=2]="keepThis",e[e.keepAll=3]="keepAll"}(c||(c={}));var d=i(61502),l=i(59902),u=i(62676),p=i(58281),g=i(12884),h=i(22704),m=i(23163),f=i(33954);const v=new Map([["min",e=>e.length?e.reduce(((e,t)=>Math.min(e,t)),1/0):void 0],["max",e=>e.length?e.reduce(((e,t)=>Math.max(e,t)),-1/0):void 0],["first",e=>{for(const t of e)if(null!=t)return t}]]),y={clientrtt:"tcp",origin:"origin",cdntime:"self"},b=/\/\/([^/]+)\/([^?&#]+)/,S=/^assets\.msn\.(com|cn)/i,C=/^(ent-)?api\.msn\.(com|cn)/i,w="[cdn]/",T="[1s-cdn]/";let k;function A(e,t,i,r){const o=performance.now(),s=function(e){const t=new Map,i=e=>function(e,t){const{name:i}=t;let n=e.get(i);n||e.set(i,n=[]);n.push(t)}(t,e);performance.getEntriesByType("navigation").forEach(i);return(0,n.fJ)(performance.getEntriesByType("resource"),e,"startTime",true).forEach(i),t}(r),c={networkCounter:new p.K,networkMap:s,filterContext:r},g=function(e,t){const i={name:"experiences",data:{type:a.container}};return e&&e.forEach((e=>{const n=function(e,t){const{filterContext:i,networkMap:n}=t,r=$(e,["min",[["first","scripts","from"],["first","config","from"]]]),o=r&&$(e,["max",[["first","scripts","to"],["first","config","to"]]]),s=o&&R(r,o,null,i);let c=U(e,["first","render","to"]);H(c)||(c=U(e,["first","update","to"]),c&&f.k.log(`${e.timelineName} is missing 'render' mark`));const l=c&&$(e,["min",[["first","render","from"],["first","update","from"]]]),u=l&&R(l,c,null,i);if(!s&&!u)return;const p={name:e.timelineName,data:{type:a.experience}};D(p,"init",s),D(p,"render",u),s&&u&&D(p,"_self",R(r,c,null,i));e.getMeasureValues({coreName:d.JS}).forEach((e=>{const i=e.customData,r=i&&i.url,o=function(e,t,i){const n=e&&t.get(e),r=M(n,(e=>Math.abs(e.startTime-i.from)));if(r>=0){const i=n.splice(r,1)[0];return n.length||t.delete(e),i}}(r,n,e);E(P(e)||I(r)||d.JS,a.service,p,o,e,t)}));const g=e.getMeasureValues({entityMeasures:!0});if(g.length){const e=x(p,{name:"custom",data:{type:a.custom}});g.forEach((t=>{O(e,t,i)}))}return p}(e,t);n&&x(i,n)})),i}(t,c),m=function(e){const t={name:"scripts",data:{type:a.container}},i={name:"services",data:{type:a.container}},n={name:"other",data:{type:a.container}},{networkMap:r}=e;return r.forEach((o=>{o.forEach((o=>{const{initiatorType:s,name:c}=o;if("img"===s)return;let l,u,p,g;const h=I(c);if(h.endsWith(".js")){u=h.replace(/(\.[0-9a-f]{20})?\.js$/,"").replace(/bundles\/v1\/\w+\/[\w.]+\//,""),l=t,p=a.script}else if("css"===s||"iframe"===s||"other"===s||"beacon"===s)l=n,p=a.other;else{const e=d.ms&&d.ms.getMeasureValues({coreName:c});g=e&&e[M(e,(e=>Math.abs(e.from-o.startTime)))],l=i,p=a.service,u=g&&P(g,!1)}E((u||h).toLowerCase(),p,l,o,g,e),r.delete(c)}))})),[t,i,n]}(c),v=function(e){const t={name:"custom",data:{type:a.custom}};if((0,l.ee)(e).forEach((i=>{O(t,i,e)})),(0,l.m8)(e).forEach((({name:e,duration:i})=>{!function(e,t,i){L(e,t,i)}(t,e,i)})),e===n.d9){const i=(0,h.Ou)();F(t,u.P9,i[u.P9],e),F(t,u.MV,i[u.MV],e),1===i[u.V4]&&N(t,u.V4,i[u.V4])}else F(t,u.MV,e.timeFilter.end,e);return t}(r),y={name:"",data:{type:a.container}};D(y,"calc",R(o,performance.now(),null,n.d9));const b=Object.assign({metrics:y.data},e),S={_meta:b};let C=!1;if([v,g,...m].forEach((e=>{const{data:t}=e;(t.children||t.spans||t.durations||t.scalars||t.instants)&&(S[e.name]=t,C=!0)})),C)return i&&i.length&&(b.pivots=i.map((e=>e.key)),b.pivots64=i.map((e=>e.key64))),S}function I(e){if(e){const t=e.match(b);if(t){let[,e,i]=t;return i=i.toLowerCase(),e.match(S)?i=(i.startsWith("service")?T:w)+i:e.match(C)?i="[1s]/"+i:e===k&&(i="[self]/"+i),i}return e.toLowerCase()}}function P(e,t=!0){const i=e.customData;let{requestName:n,url:r}=i||{};return!n&&t&&r&&(n=I(r)),n}function E(e,t,i,n,r,o){const{networkCounter:s,filterContext:a}=o,c=s.qualifyKey(e),d={name:c,data:{type:t}},l=function(e,t){if(!t)return null;const{startTime:i,requestStart:n,responseEnd:r,transferSize:o,duration:s,serverTiming:a}=t,c=!!n,d={name:e,hasFullTimings:c,networkDur:s,networkStart:i};if(c){d.connectDur=n-i,d.requestDur=r-n;const e=(0,m.F$)(t);null!=e&&(d.cached=e?1:0,e||(d.transferSize=o))}if(!d.cached&&(e.startsWith(w)||e.startsWith(T))&&a&&a.length){const e=d.cdn={};a.forEach((({name:t,duration:i})=>{const n=y[t];n&&(e[n]=i)}))}return d}(c,n);if(l){const{cdn:e,networkStart:t,networkDur:i}=l;D(d,"network",R(t,null,i,a))&&(l.hasFullTimings&&(L(d,"connect",l.connectDur),L(d,"request",l.requestDur),N(d,"size",l.transferSize),N(d,"cache",l.cached)),e&&(L(d,"cdnTCP",e.tcp),L(d,"cdnSelf",e.self),L(d,"cdnOrigin",e.origin)))}if(r){const e=r.customData,{perfCritical:t,error:i}=e||{};D(d,"app",R(r.from,r.to,null,a))&&(t&&N(d,"critical",1),i&&N(d,"error",1))}d.data.spans&&x(i,d)}function O(e,t,i){const n=R(t.from,t.to,null,i);if(n){D(e,t.coreName+t.idSuffix,n)}}function M(e,t){if(!e||!e.length)return-1;let i=1/0,n=0;return e.length>1&&e.forEach(((e,r)=>{const o=t(e);o<i&&(i=o,n=r)})),n}function x(e,t){return j(e,"children",t.name,t.data),t}function D(e,t,i){return i?j(e,"spans",t,i):void 0}function R(e,t,i,{spanMapperFn:n}){return n(e,t,i)}function L(e,t,i){return B(e,t,i,"durations")}function F(e,t,i,{timeFilterFn:n,timeMapperFn:r}){if(n(i))return B(e,t,r(i),"instants")}function N(e,t,i){return B(e,t,i,"scalars")}function B(e,t,i,r){if(H(i)){return j(e,r,t,(0,n.NM)(i))}}function j(e,t,i,n){return(e.data[t]||(e.data[t]={}))[i]=n,n}function $(e,t){const[i,n]=t,r=[];for(const t of n){const i=U(e,t);null!=i&&r.push(i)}const o=v.get(i)(r);return H(o)?o:void 0}function U(e,t){const[i,n,r]=t,o=e.getMeasureValues({coreName:n});if(o&&o.length){const t=v.get(i),o=function(e,t,i){return e.getMeasureValues({coreName:t}).map((e=>e[i])).filter((e=>null!=e))}(e,n,r),s=t(o);if(H(s))return s}}function H(e){return null!=e&&!isNaN(e)}k=(0,g.zw)();var _=i(33379),W=i(13672),z=i(68364),G=i(58796);let V,q,Z,K,Q,J;const X=()=>{},Y=new Map,ee=new Map,te=new Map;function ie(e,t,i,n,r){if(Y.clear(),ee.clear(),te.clear(),V=X,q=J=Q=void 0,K=n,Z=r,!((0,_.N)()&&K&&Z&&t))return;const{ClientSettings:s,CurrentFlightSet:a}=t;if(!a||!a.has("prg-entityperf"))return;const{bundleInfo:c,pcsInfo:d}=s||{};J={buildAlias:null==c?void 0:c.alias,env:null==d?void 0:d.env},(0,o.MB)(e,t,i),Q=!0,q=!0,V=oe({props:{},dedupeBehavior:2,startTime:0,getMatches:()=>(0,o.aM)()})}function ne(e,t,i){if(Q)return i=i||(0,o.aM)(),A(J,e,i,t)}function re(e){if(V(!0),q=!1,e){ae(e,Object.values(G.U),(0,n.At)())}}function oe(e){0===Y.size&&(!q&&performance.clearResourceTimings(),K());const{props:t,dedupeBehavior:i,groupId:o,traceId:a}=e,c=(0,W.s)(t)+`|${a||""}|${o||""}`,d=Y.get(c);if(d&&d.size)if(i&&2!==i){if(1===i)return X}else{const e=te.get(o);e&&e.size&&d.forEach((t=>e.delete(t)));const t=a&&ee.get(a);t&&t.size&&d.forEach((e=>t.delete(e))),d.clear()}let l;return l=t=>{const i=Y.get(c);if(i&&i.delete(l)){const d=a&&ee.get(a);d&&d.delete(l);const u=o&&te.get(o);u&&(t?u.delete(l):(u.forEach((e=>e!==l&&e(!0))),u.clear())),i.size||!Y.delete(c)||Y.size||Z(),t||function(e){const t=(0,n.At)({start:e.startTime,end:performance.now()}),{spanFilterFn:i}=t,o=Object.values(G.U).filter((e=>{const{timeSpan:t}=e;return t&&i(t[0],null,t[1])})),a={},c=e.getMatches();if(!ae(a,o,t,c))return;try{r.M0.sendLoadTimeEvent({markers:a})}catch(e){(0,z.H)(s.GrI,"Failed to upload entity-metrics for manual trace",`Matches: ${c.map((e=>e.key)).join("|")}`)}}(e)}},se(Y,c,l),se(ee,a,l),se(te,o,l),setTimeout((()=>l(!0)),e.stopTimeout||6e4),l}function se(e,t,i){if(t){let n=e.get(t);return!n&&e.set(t,n=new Set),void 0!==i&&n.add(i),n}}function ae(e,t,i,n){if(Q&&e){const r=ne(t,i,n);if(r)return e.entityMetrics=r,!0}}},44674:function(e,t,i){"use strict";i.d(t,{MB:function(){return y},aM:function(){return b},nm:function(){return C}});var n=i(26415),r=i(83130),o=i(33379),s=i(13672),a=i(68364);const c=new Map,d=new Map,l=new Map,u=new Set,p=(0,o.N)()&&parseInt((location.href.match(/ems=([\d]+)/)||[null,"0"])[1])||100,g=null;let h,m,f,v=new Promise((e=>f=e));function y(e,t,i){const{pivots:n,manualPivots:s}=e||{},a={pivotsEnabled:m,pivotsFinalized:v};return(0,o.N)()&&e&&(n&&n.length||s&&s.length)&&t&&i?(a.pivotsEnabled=m=!0,P("audienceMode",(e=>(0,r.Uc)({audienceMode:e},i))),P("browser",(e=>(0,r.K4)({browser:e},i))),P("deviceFormFactor",(e=>(0,r.Ev)({deviceFormFactor:e},i))),P("displayLocale",(e=>(0,r.fb)({locale:e},i,!0))),P("domain",(e=>(0,r.hI)({domain:e},i))),P("experimentId",(e=>(0,r.W9)({experimentId:e},i))),P("locale",(e=>(0,r.fb)({locale:e},i,!1))),P("ocid",(e=>(0,r.K3)({ocid:e},i))),P("os",(e=>(0,r.zu)({os:e},i))),P("platform",(e=>(0,r.jF)({platform:e},i))),P("env",(e=>{var i;return(0,r.Sh)(e,null===(i=t.ClientSettings.pcsInfo)||void 0===i?void 0:i.env)})),P("buildAlias",(e=>{var i;return(0,r.Sh)(e,null===(i=t.ClientSettings.bundleInfo)||void 0===i?void 0:i.alias)})),I("pageType",((e,t)=>(0,r.oM)({pageType:t},{pageType:e}))),I("pageProduct",r.Sh),I("pageName",r.Sh),c="preRender",null!=(l=!!t.IsPrerender)&&(d.set(c,l),w(c)),h=function(e){const t=[],i=[],n=(e,t)=>{e&&e.forEach((e=>{e&&100*Math.random()<p&&t(e)}))},r=e=>{for(const{key:t,matcher:i}of k(e))i||E(t)};return n(e.pivots,(e=>{r(e);const i={config:e},n=S(i);(n||n===g)&&t.push(i)})),n(e.manualPivots,(e=>{r(e),i.push(e)})),{defaultPivots:t,manualPivotConfigs:i}}(e),T(),a):a;var c,l}function b(){if(!m)return[];const e=[];for(const t of h.defaultPivots)S(t)&&e.push(A(t.config));return u.size&&(0,a.H)(n.WXX,"Missing pivot field values",[...u].toString()),e}function S(e){let{success:t}=e;if(null!=t)return t;t=!0;for(const{key:i,value:n,matcher:r}of k(e.config)){const e=r.matchFn(n);if(e===g)t=g,u.add(i);else if(!e){t=!1;break}}return e.success=t}function C(e,t){l.set(e,t),w(e)}function w(e){m&&u.delete(e)&&T()}function T(){if(u.size<=0){for(const e of h.defaultPivots)S(e);f()}}function*k(e){for(const t in e){const i=c.get(t);yield{key:t,value:e[t],matcher:i}}}function A(e){const t=(0,s.s)(e);return{key:t,key64:btoa(t)}}function I(e,t){P(e,(i=>{const n=l.get(e);return n==g?g:t(n,i)}))}function P(e,t){O(e,(()=>t))}function E(e){O(e,(()=>function(e){return t=>{const i=d.get(e);return i==g?g:i===t}}(e)))}function O(e,t){c.get(e)||c.set(e,{matchFn:t()})}},61502:function(e,t,i){"use strict";i.d(t,{JS:function(){return a},Ud:function(){return c},ms:function(){return o},ny:function(){return s}});var n=i(33940),r=i(33379);let o;function s(e){o=e}const a="service";function c(e=o){return(t,i)=>(0,n.mG)(this,void 0,void 0,(function*(){let n;i&&(n={requestName:i.requestName,perfCritical:i.perfCritical},delete i.requestName,delete i.perfCritical);const s=(t.url||t).toString(),c=Object.assign({url:s},n||{}),d=e===o?s:a,l=e&&e.startMeasure(d).endMeasure;let u;try{const e=(0,r.N)()?window.fetch.bind(window):globalThis.fetch.bind(globalThis),n=yield e(t,i);return u=!n||!n.ok,n}catch(e){throw u=!0,e}finally{u&&(c.error=!0),l&&l({customData:c})}}))}},13672:function(e,t,i){"use strict";i.d(t,{s:function(){return r}});var n=i(33954);function r(e){const t=[];return e&&o(e,t),t.join(",")}function o(e,t,i=""){const r=Object.keys(e).sort();for(const s of r){const r=e[s];if(null==r)continue;const a=`${i}${i?".":""}${s}`;if("object"==typeof r)o(r,t,a);else{if(!(t.length<100)){n.k.logError("getSortedObjectKeyValuesDeep: circular reference suspect");break}t.push(`${a}=${r.toString().toLowerCase()}`)}}}},52575:function(e,t,i){"use strict";i.d(t,{At:function(){return p},NM:function(){return g},d9:function(){return a},fJ:function(){return d}});var n=i(51727),r=i(37641);const o=(e,t)=>i=>i>=e&&i<=t,s={start:-1/0,end:1/0},a={timeFilter:s,spanFilterFn:()=>!0,spanMapperFn:(e,t,i)=>l(e,t,i),timeMapperFn:e=>e,timeFilterFn:()=>!0},c={timeFilter:{start:1/0,end:-1/0},spanFilterFn:()=>!1,spanMapperFn:()=>{},timeMapperFn:()=>{},timeFilterFn:()=>!1};function d(e,{timeFilter:t},i,a){if(e&&i&&t!==s){const{start:s,end:c}=t;if(a){const t=(0,n.Z)(e,{[i]:s},i),o=(0,r.Z)(e,{[i]:c},i);e=e.slice(t,o)}else{const t=o(s,c);e=e.filter((e=>t(e[i])))}}return e}function l(e,t,i,n){if(null!=e)return null!=t&&(i=t-e),null!=i&&i>=0?[g(n?n(e):e),g(i)]:void 0}function u(e,t){return(i,n,r)=>{if(e(i,n,r))return l(i,n,r,t)}}function p(e){if(!e)return a;const{start:t,end:i}=e;if(null==t||null==i||t>i)return c;const n=o(e.start,e.end),r=t=>g(t-e.start),s=function(e){const{start:t,end:i}=e;return(e,n,r)=>{if(null==e)return!1;let o;if(null!=n)o=n;else{if(null==r)return!1;o=e+r}return!(o<e)&&e<=i&&o>=t}}(e),d=u(s,r);return{timeFilter:e,spanFilterFn:s,spanMapperFn:d,timeMapperFn:r,timeFilterFn:e=>n(e)}}const g=e=>e<5?Math.round(10*e)/10:Math.round(e)},28817:function(e,t,i){"use strict";i.d(t,{N:function(){return a}});var n=i(33940),r=i(26415),o=i(65135),s=i(33379);class a{constructor(e,t,i,n){this.chromiumApiRetryCount=5,this.isNtpPrivateApiAvailable=e=>window&&window.chrome&&window.chrome.ntpSettingsPrivate&&"function"==typeof window.chrome.ntpSettingsPrivate[e],this.prefSettingKey=e,this.searchForKeyName=t,this.targetKeyName=i,this.defaultItem=n}getPreferenceSetting(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){try{const i=yield this.getPreferenceSettingValueArray(t),n=i.findIndex((t=>t[this.searchForKeyName]===e));return n>-1?i[n]:null}catch(t){const i=`Failed to find user preference key: ${e}`;return this.logAppError(r.Aps,i,t),null}}))}savePreferenceSetting(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){try{const i=(yield this.getPreferenceSettingValueArray())||[],n=i.findIndex((t=>t[this.searchForKeyName]===e));if(n>-1){const e=Object.assign(Object.assign({},i[n]),t);i[n]=e}else{const n=Object.assign(Object.assign({},this.defaultItem),t);n[this.searchForKeyName]=e,i.push(n)}return this.setAndSavePreferenceSetting(i)}catch(t){const i="Failed to store user preference setting";return this.logAppError(r.nS9,i,`Key:${e}.Error:${t}`),!1}}))}isApiAvailableToUse(){return new Promise((e=>{const t="Error in isApiAvailableToUse";try{this.isGoodToUseNtpSettingsPrivate("getAllPrefs")?void 0===this.isPrefSettingKeyAvailable?window.chrome.ntpSettingsPrivate.getAllPrefs((i=>{if(this.isPrefSettingKeyAvailable=i&&i.findIndex((e=>e.key===this.prefSettingKey))>-1,!this.isPrefSettingKeyAvailable){let e="";try{i&&i.forEach((t=>e+=`${t.key}+`))}catch(e){this.logAppError(r.Aps,"Error: Can not log keylist from preference setting",e)}this.logAppError(r.me0,t,`missing preference key: ${this.prefSettingKey}, available keys: ${e}`)}e(this.isPrefSettingKeyAvailable)})):e(this.isPrefSettingKeyAvailable):(this.logAppError(r.MFQ,t,"getAllPrefs not present"),e(!1))}catch(t){this.logAppError(r.MFQ,"Error: Unexpected throw in isApiAvailableToUse",t),e(!1)}}))}logAppError(e,t,i){null===o.M0||void 0===o.M0||o.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:t,pb:Object.assign(Object.assign({},e.pb),{customMessage:i})}))}getPreferenceSettingValueArray(e){return(0,n.mG)(this,void 0,void 0,(function*(){try{if(this.settingValuesArray&&!e)return this.settingValuesArray;{const e=yield this.getPreferenceValueFromBrowser();return this.settingValuesArray=e||[],this.settingValuesArray}}catch(e){const t=`Failed to read ${this.prefSettingKey} preference setting`;return this.logAppError(r.k8J,t,e),[]}}))}setAndSavePreferenceSetting(e){if(!(0,s.N)())return!1;try{if(this.isGoodToUseNtpSettingsPrivate("setPref"))return this.settingValuesArray=e,window.chrome.ntpSettingsPrivate.setPref(this.prefSettingKey,this.settingValuesArray),!0;{const e="window.chrome.ntpSettingsPrivate.setPref does not exist.";return this.logAppError(r.T5b,e,`Key:${this.prefSettingKey}`),!1}}catch(e){return!1}}isGoodToUseNtpSettingsPrivate(e){let t=this.isNtpPrivateApiAvailable(e),i=0;for(;i<this.chromiumApiRetryCount&&!t;)i++,setTimeout((()=>{t=this.isNtpPrivateApiAvailable(e),t&&o.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.$9$),{message:`Chromium API retry succeed after ${i} retry`}))}),50);if(!t){const t=`functionName: ${e},\n            canUseDOM: ${(0,s.N)()},\n            windows: ${window},\n            document: ${window&&window.document},\n            createElement: ${window&&window.document&&window.document.createElement},\n            chrome: ${window&&window.chrome},\n            ntpSettingsPrivate: ${window&&window.chrome&&window.chrome.ntpSettingsPrivate},\n            ntpSettingsPrivate funtions: ${window&&window.chrome&&window.chrome.ntpSettingsPrivate&&Object.getOwnPropertyNames(window.chrome.ntpSettingsPrivate).toString()}\n            `;o.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.Fe_),{message:"Failed to get funtion from window.chrome.ntpSettingsPrivate.",pb:Object.assign(Object.assign({},r.Fe_.pb),{customMessage:t})}))}return t}getPreferenceValueFromBrowser(){return new Promise(((e,t)=>{if(this.isGoodToUseNtpSettingsPrivate("getPref"))window.chrome.ntpSettingsPrivate.getPref(this.prefSettingKey,(function(t){t&&t.value?e(t.value):e(null)}));else{const e="window.chrome.ntpSettingsPrivate.getPref does not exist.";this.logAppError(r.pCD,e,""),t(e)}}))}}},84754:function(e,t,i){"use strict";i.d(t,{D8:function(){return M},I9:function(){return S},LC:function(){return E},OM:function(){return b},SB:function(){return O},Tr:function(){return w},UU:function(){return T},VS:function(){return y},Vx:function(){return k},Wt:function(){return I},ZE:function(){return A},_W:function(){return v},a:function(){return m},aT:function(){return f},eq:function(){return P}});var n=i(33940),r=i(75192),o=i(75384),s=i(49786),a=i(65135),c=i(84169),d=i(17440),l=i(26415),u=i(11765);let p=!1;const g={msNtpExp2:null,msNtpExp3:5e3,msNtpExp4:1e4,msNtpExp5:15e3};function h(){return new Promise((e=>{const t=window.chrome;if(t){const i=t.ntpSettingsPrivate;if(i&&"function"==typeof i.getConfigData)return void i.getConfigData((t=>{e((null==t?void 0:t.enabledFeatures)||[])}))}e([])}))}function m(){return(0,n.mG)(this,void 0,void 0,(function*(){return(yield h()).filter((e=>e.includes("msNtpExp")))}))}function f(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=[];return e.forEach((e=>{if(e.startsWith("m")){const i=e.replace("msNtpExp",""),n=Number.parseInt(i);n>=0&&t.push(n)}})),t}))}function v(e){let t=0;return e.forEach((e=>{e<31&&(t|=1<<e)})),0===t?"":t.toString()}function y(){return(0,n.mG)(this,void 0,void 0,(function*(){return(yield h()).includes("msReducedNtpAdsForNewDevice_stage1")}))}function b(){return(0,n.mG)(this,void 0,void 0,(function*(){return(yield h()).includes("msReducedNtpAdsForNewDevice_stage2")}))}function S(){const e=window&&window.navigator;if(!e)return!1;const{hardwareConcurrency:t=-1,deviceMemory:i=-1}=e;return t<=2||i<4}function C(){return window&&window.navigator&&window.navigator.deviceMemory&&window.navigator.deviceMemory<=4}function w(){return"1"===new URLSearchParams(window.location.search).get("startpage")&&C()}function T(){let e=!1;const t="os-sku";if(!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv))try{if(window&&window.external&&window.external.getHostEnvironmentValue(t)){const i=JSON.parse(window.external.getHostEnvironmentValue(t));e=i&&"192"===i[t]}}catch(e){}return e}function k(e){p=e}function A(){return p}function I(e){window&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.onPrerenderConversionFromDhpToNtp&&window.chrome.ntpSettingsPrivate.onPrerenderConversionFromDhpToNtp.addListener(e)}function P(e){var t;return(0,n.mG)(this,void 0,void 0,(function*(){const i=null===(t=null===c.jG||void 0===c.jG?void 0:c.jG.CurrentRequestTargetScope)||void 0===t?void 0:t.pageExperiments,n=C()||i.includes("prg-lowmemdhp"),r=yield m();let a,d=0;if(r.forEach((e=>{e in g&&(a=g[e],d+=1)})),!n||!a||1!==d)return;const l=()=>{setTimeout((()=>{(0,o.oc)(),(0,s.Yc)(!1)}),a)};e?l():I(l)}))}function E(e,t,i,n,o,s=null){const c="layoutchange";if(i!==n)switch(t){case r.Xm.feedLayout:window&&window.chrome&&window.chrome.ntpSettingsPrivate.getPref(r._9.layout,(t=>{a.M0.addOrUpdateTmplProperty(c,`${e}|${null==t?void 0:t.value}_${i}|${null==t?void 0:t.value}_${n}|${o}`)}));break;case r._9.layout:s?a.M0.addOrUpdateTmplProperty(c,`${e}|${i}_${s}|${n}_${s}|${o}`):d.U.getPreferenceSetting(r.Xm.feedLayout).then((t=>{const s=t&&t.value&&t.value.type||r.sj.MultiColumn;a.M0.addOrUpdateTmplProperty(c,`${e}|${i}_${s}|${n}_${s}|${o}`)}))}}class O{static checkMuidValidDateField(e){if(null===e||32!=e.length)return a.M0.sendAppErrorEvent(Object.assign(Object.assign({},l.uJt),{message:"user MUID is null or less than 32 digits",pb:Object.assign(Object.assign({},l.uJt.pb),{customMessage:e})})),!1;const t=new Uint8Array(this.parseMuidString(e));if(t.forEach((e=>{if(isNaN(e))return!1})),this.SwapBytesForGuidEndianess(t),0!=(192&t[0]))return a.M0.sendAppErrorEvent(Object.assign(Object.assign({},l.G2o),{message:"user MUID is invalid",pb:Object.assign(Object.assign({},l.G2o.pb),{customMessage:e})})),!1;if((240&t[6])!=this.GUID_VERSION<<4)return a.M0.sendAppErrorEvent(Object.assign(Object.assign({},l.G2o),{message:"user MUID is invalid",pb:Object.assign(Object.assign({},l.G2o.pb),{customMessage:e})})),!1;if((192&t[8])!=this.GUID_SUB_VERSION<<6)return a.M0.sendAppErrorEvent(Object.assign(Object.assign({},l.G2o),{message:"user MUID is invalid",pb:Object.assign(Object.assign({},l.G2o.pb),{customMessage:e})})),!1;const i=new Uint8Array(t);this.Unobfuscate(i);if(this.GenerateChecksum(i)!=i[15])return a.M0.sendAppErrorEvent(Object.assign(Object.assign({},l.G2o),{message:"user MUID is invalid",pb:Object.assign(Object.assign({},l.G2o.pb),{customMessage:e})})),!1;let n=0;return n|=(63&i[10])<<8,n|=i[11],!(this.GetCurrentDate()-n>3)}static parseMuidString(e){const t=[],i=[6,4,2,0,10,8,14,12,16,18,20,22,24,26,28,30];for(const n of i){const i=e.slice(n,n+2);t.push(parseInt(i,16))}return new Uint8Array(t)}static SwapBytesForGuidEndianess(e){let t=e[0];e[0]=e[3],e[3]=t,t=e[1],e[1]=e[2],e[2]=t,t=e[4],e[4]=e[5],e[5]=t,t=e[6],e[6]=e[7],e[7]=t}static Obfuscate(e){const t=e.length>>1;for(let i=0;i<t;i++)e[i+t]^=e[i]}static Unobfuscate(e){this.Obfuscate(e)}static GenerateChecksum(e){const t=new Uint8Array([0]);for(let i=0;i<e.length-1;i++)t[0]+=e[i];return t[0]}static GetCurrentDate(){const e=this.MUID_START_UTC,t=new Date;let i=-1;return(t.getDay()!=e.getDay()||t.getMonth()!=e.getMonth()||t.getFullYear()!=e.getFullYear())&&(i=Math.floor(Math.abs(t.getTime()-e.getTime())/864e5),i>16383)?0:i}}function M(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=yield u.L.getPreferenceSetting(r.nc.enable_new_user_default_settings);return null!==e&&!0===e.value}))}O.GUID_VERSION=6,O.GUID_SUB_VERSION=0,O.MUID_START_UTC=new Date("2010-01-01Z")},82209:function(e,t,i){"use strict";i.d(t,{M:function(){return o},j:function(){return n}});var n,r=i(33379);!function(e){e.NTP_TOP_SITES_CLICK="NTP_TopSites_Click"}(n||(n={}));class o{static isEdgeNurturingAvailable(){var e;return(0,r.N)()&&(null===(e=window.chrome)||void 0===e?void 0:e.edgeNurturingPrivate)}static getToken(e){return new Promise((t=>{var i,n;(0,r.N)()?"function"==typeof(null===(n=null===(i=window.chrome)||void 0===i?void 0:i.edgeNurturingPrivate)||void 0===n?void 0:n.GetToken)?window.chrome.edgeNurturingPrivate.GetToken(e,(e=>{t(e)})):t({Message:"window.chrome.edgeNurturingPrivate.GetToken API Unavailable"}):t({Message:"Cannot use DOM"})}))}static updateCTA(e,t){var i,n;(0,r.N)()&&"function"==typeof(null===(n=null===(i=window.chrome)||void 0===i?void 0:i.edgeNurturingPrivate)||void 0===n?void 0:n.UpdateCTA)&&window.chrome.edgeNurturingPrivate.UpdateCTA(e,t)}static notifyTriggerEvent(e){return new Promise((t=>{var i,n;(0,r.N)()&&"function"==typeof(null===(n=null===(i=window.chrome)||void 0===i?void 0:i.edgeNurturingPrivate)||void 0===n?void 0:n.NotifyTriggerEvent)&&window.chrome.edgeNurturingPrivate.NotifyTriggerEvent(e,(e=>{t(e)}))}))}}},39439:function(e,t,i){"use strict";i.d(t,{F:function(){return c}});var n=i(65135),r=i(93853),o=i(84169);const s=`reloadCount_${"undefined"!=typeof window?window.location.href:""}`;function a(e,t,i){if(n.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:"Navigating to local ntp page on exception.",pb:Object.assign(Object.assign({},e.pb),{customMessage:t,stack:i&&i.stack})})),o.jG.IsDebug)return;const r=new URLSearchParams;e&&r.set("ntperror",e.id);const s=n.M0.getRequestId();s&&r.set("rid",s),n.M0.flush(!0,"AppError"),setTimeout((()=>{location.replace("chrome-search://local-ntp/local-ntp.html?"+r.toString())}),2e3)}const c={tryReloadNtpPage:function(e,t,i,o){if(!r.y7.supported)return void a(t,`sessionStorage is not supported. ${i}`);if(r.y7.getItem(s)){const e=r.y7.getItem(s),n=e&&parseInt(e)||0;if(!(n<2))return void a(t,`Max reload count (2) reached. ${i}`,o);r.y7.setItem(s,n+1+"")}else r.y7.setItem(s,"1");n.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:"Reloading NTP page on exception.",pb:Object.assign(Object.assign({},e.pb),{customMessage:i,stack:o&&o.stack})})),n.M0.flush(!0,"AppError"),setTimeout((()=>{location.reload()}),2e3)},redirectToLocalNtp:a}},34955:function(e,t,i){"use strict";var n;i.d(t,{H:function(){return r},v:function(){return n}}),function(e){e[e.NTP_ALL_TILES_LOADED=11]="NTP_ALL_TILES_LOADED",e[e.NTP_SHORTCUT_CUSTOMIZED=39]="NTP_SHORTCUT_CUSTOMIZED",e[e.NTP_CUSTOMIZE_ADD_SHORTCUT_CLICKED=44]="NTP_CUSTOMIZE_ADD_SHORTCUT_CLICKED",e[e.NTP_CUSTOMIZE_SHORTCUT_REMOVE=53]="NTP_CUSTOMIZE_SHORTCUT_REMOVE",e[e.NTP_CUSTOMIZE_SHORTCUT_CANCEL=54]="NTP_CUSTOMIZE_SHORTCUT_CANCEL",e[e.NTP_CUSTOMIZE_SHORTCUT_DONE=55]="NTP_CUSTOMIZE_SHORTCUT_DONE",e[e.NTP_CUSTOMIZE_SHORTCUT_ADD=58]="NTP_CUSTOMIZE_SHORTCUT_ADD",e[e.NTP_CUSTOMIZE_SHORTCUT_UPDATE=59]="NTP_CUSTOMIZE_SHORTCUT_UPDATE",e[e.NTP_BACKGROUND_IMAGE_LOADED=60]="NTP_BACKGROUND_IMAGE_LOADED",e[e.NTP_VISUALLY_READY=62]="NTP_VISUALLY_READY",e[e.NTP_SMARTLIST_ENABLED=63]="NTP_SMARTLIST_ENABLED",e[e.NTP_SMARTLIST_DISABLED=64]="NTP_SMARTLIST_DISABLED"}(n||(n={}));const r={logEvent:function(e){const t=window.chrome,i=t&&t.embeddedSearch&&t.embeddedSearch.newTabPage;i&&i.logEvent(e)}}},11765:function(e,t,i){"use strict";i.d(t,{L:function(){return a}});var n=i(27003),r=i(99590),o=i(28817);class s extends o.N{constructor(){super("ntp.record_user_choices","setting","value",{setting:"default",source:"default layout",timestamp:0,value:-1})}static getInstance(){return n.Gq.get("__RecordUserChoicesManager__",(()=>new s))}}const a=(0,r.h)(s)},17440:function(e,t,i){"use strict";i.d(t,{H:function(){return c},U:function(){return d}});var n=i(33940),r=i(28817),o=i(26415),s=i(27003),a=i(99590);class c extends r.N{constructor(){super("ntp.user_nurturing","key","value",{key:"default",value:"none"})}static getInstance(){return s.Gq.get("__UserNurturingManager__",(()=>new c))}savePreferenceSetting(e,t,i=!1,r){return(0,n.mG)(this,void 0,void 0,(function*(){try{let n=(yield this.getPreferenceSettingValueArray(r))||[];if(i)n=n.filter((t=>t&&t[this.searchForKeyName]!==e));else{const i=n.findIndex((t=>t[this.searchForKeyName]===e));if(i>-1)n[i].value=t;else{const i={key:e,value:t};n.push(i)}}return this.setAndSavePreferenceSetting(n)}catch(t){const i="Failed to store user nurturing preference";return this.logAppError(o.nS9,i,`Key:${e}.Error:${t}`),!1}}))}deleteKeyValueFromPSL(e){this.savePreferenceSetting(e,null,!0)}}const d=(0,a.h)(c)},75192:function(e,t,i){"use strict";i.d(t,{KW:function(){return c},Nn:function(){return u},Xm:function(){return n},_9:function(){return l},nc:function(){return a},rr:function(){return s},sj:function(){return o},st:function(){return d}});const n={campaigns:"campaigns",feedLayout:"feed_layout",renderSingleColumn:"render_single_column",wpo:"wpo",wpoLytTmpl:"wpo_lyt_tmpl",topSites:"top_sites",recommendedSites:"recommended_sites",viewport:"viewport"};var r,o,s;!function(e){e.Ntp="ntp",e.Wpo="wpo"}(r||(r={})),function(e){e.MultiColumn="multi",e.SingleColumn="single"}(o||(o={})),function(e){e.apiError="api_error"}(s||(s={}));const a={tscollapsed:"tscollapsed",layout_mode:"layout_mode",left_rail:"left_rail",quick_links_options:"quick_links_options",single_column:"single_column",recommended_sites:"recommended_sites",daily_discovery:"daily_discovery",news_below_searchbox:"news_below_searchbox",ntp_tips:"ntp_tips",search_history:"search_history",current_location_enabled:"current_location_enabled",enable_sponsored_content:"enable_sponsored_content",enable_split_screen:"enable_split_screen",hide_search_box:"hide_search_box",seen_interest_fre_count:"seen_interest_fre_count",visited_following_feed:"visited_following_feed",enable_new_user_default_settings:"enable_new_user_default_settings"},c=100;var d;!function(e){e.User="user",e.Wpo="wpo",e.Ntp="ntp"}(d||(d={}));const l={backgroundImageTypePolicy:"ntp.background_type_blocked_by_policy",currentBackgroundImageType:"ntp.background_image_type",hideDefaultTopSites:"ntp.hide_default_top_sites",customBackgroundImageInfo:"ntp.local_background_image",layout:"ntp.layout_mode",quickLinks:"ntp.show_top_sites",quickLinksDisplaySetting:"ntp.quick_links_options",imageOfTheDay:"ntp.show_image_of_day",feeds:"ntp.news_feed_display",feedType:"ntp.feed_type",greeting:"ntp.show_greeting",showSettings:"ntp.show_settings",verticalTabsCollapsed:"edge.vertical_tabs.collapsed",verticalTabsOpened:"edge.vertical_tabs.opened",singleColumnEnabled:"ntp.single_column.enabled",userNurturingUpdated:"ntp.user_nurturing",hasUserSeenNewFre:"new_device_fre.has_user_seen_new_fre",defaultBrowserSettingEnabled:"browser.default_browser_setting_enabled",showAppLauncher:"ntp.enable_app_launcher",userChoices:"ntp.record_user_choices",selectedFeedPivot:"ntp.selected_feed_pivot"},u="_ms_split_screen"},68793:function(e,t,i){"use strict";i.d(t,{P6:function(){return b},vT:function(){return S}});var n=i(33940),r=i(77331),o=i(75970),s=i(68364),a=i(26415),c=i(84169),d=i(65337),l=i(53899),u=i(65135),p=i(87230),g=i(86331),h=i(11765),m=i(75192),f=i(17440),v=i(85799);let y;function b(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){if(y)return y;if(y=l.yR.tworows,e){const e=yield function(){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(yield h.L.isApiAvailableToUse()))return null;const e=yield h.L.getPreferenceSetting(m.nc.recommended_sites);return e&&void 0!==e.value?l.$_[e.value]:null}))}();if(e)y=e;else{const e=function(){var e,t;try{const i=c.jG&&c.jG.CurrentRequestTargetScope&&c.jG.CurrentRequestTargetScope.pageExperiments;let n;if(i&&i.includes("prg-wpolsopt"))n=v.k.getWpoTreatmentsWithType(c.jG.AppType,c.jG.CurrentRequestTargetScope,r._h.recommendedsitesCollapse);else{const e=(0,o._)(c.jG.AppType,c.jG.CurrentRequestTargetScope),{treatments:t}=(0,d.$o)().getObject(e)||{};if(!t)return null;n=t.filter((e=>(null==e?void 0:e.type)===r._h.recommendedsitesCollapse))}const s=(null==n?void 0:n.length)>0&&(null===(t=null===(e=n[0])||void 0===e?void 0:e.properties)||void 0===t?void 0:t.recommendedSitesCollapsibleControlConfig);if(s)return s}catch(e){const t="Error in getting wpo recommended sites config";(0,s.H)(a.Od5,t,`error:${e}`)}return null}();u.M0.addOrUpdateTmplProperty("wpotrmtdbg1",e?"1":"0");const i=t?e:null;if(i&&i.recommendedSiteStatus){const e=yield function(){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(yield f.U.isApiAvailableToUse()))return null;const e=yield f.U.getPreferenceSetting(m.nc.recommended_sites);return e&&e.value&&void 0!==e.value.type?l.$_[e.value.type]:null}))}();e&&e===i.recommendedSiteStatus?y=e:(y=i.recommendedSiteStatus,u.M0.addOrUpdateTmplProperty("WpoPromRecSite","1"),y===l.yR.off?p.W.getInstance().registerItemTriggerMessage(g.gz.recommendedSitesPromotionOff,!0):p.W.getInstance().registerItemTriggerMessage(g.gz.recommendedSitesPromotionNewLine,!0),function(e){(0,n.mG)(this,void 0,void 0,(function*(){if(!(yield f.U.isApiAvailableToUse()))return;const t={source:"wpo",timestamp:(new Date).getTime(),type:l.$N[e]};f.U.savePreferenceSetting(m.Xm.recommendedSites,t)}))}(y))}}}return u.M0.addOrUpdateTmplProperty("RecommendedSites",y.toString()),y}))}function S(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(yield h.L.isApiAvailableToUse()))return;const t={setting:m.nc.recommended_sites,source:"ntp",timestamp:(new Date).getTime(),value:l.$N[e]};h.L.savePreferenceSetting(m.nc.recommended_sites,t)}))}},1584:function(e,t,i){"use strict";i.d(t,{DU:function(){return T},NU:function(){return k},R:function(){return w},VL:function(){return A},jt:function(){return C},r4:function(){return I}});var n=i(33940),r=i(27003),o=i(33379),s=i(53899),a=i(68364),c=i(26415),d=i(77331),l=i(75970),u=i(84169),p=i(65337),g=i(73252),h=i(65135),m=i(11765),f=i(75192),v=i(85799);const y="tscollapsed",b="__StoredTopSitesState__",S="__TopSitesCollapsibleControlConfig__";function C(e,t){if(t&&r.Gq.set(S,t),e){const e=w();h.M0.addOrUpdateTmplProperty("wpotrmtdbg2",e?"1":"0"),e&&r.Gq.set(S,e)}}function w(){var e,t;try{const i=u.jG&&u.jG.CurrentRequestTargetScope&&u.jG.CurrentRequestTargetScope.pageExperiments;let n;if(i&&i.includes("prg-wpolsopt")){const e=v.k.getWpoTreatmentsWithType(u.jG.AppType,u.jG.CurrentRequestTargetScope,d._h.topsitesCollapse),t=v.k.getWpoTreatmentsWithType(u.jG.AppType,u.jG.CurrentRequestTargetScope,d._h.topSites);n=[...e||[],...t||[]]}else{const e=(0,l._)(u.jG.AppType,u.jG.CurrentRequestTargetScope),{treatments:t}=(0,p.$o)().getObject(e)||{};if(!t)return null;n=t.filter((e=>(null==e?void 0:e.type)===d._h.topsitesCollapse||(null==e?void 0:e.type)===d._h.topSites))}const o=(null==n?void 0:n.length)>0&&(null===(t=null===(e=n[0])||void 0===e?void 0:e.properties)||void 0===t?void 0:t.topSitesCollapsibleControlConfig)||void 0;return(null==o?void 0:o.promoteTopSitesTop)&&window.isSSREnabled&&(o.promoteTopSitesTop=!1),r.Gq.set(S,o),o||null}catch(e){const t="Error in getting wpo topSites config";(0,a.H)(c.Od5,t,`error:${e}`)}return null}function T(){try{const e=u.jG&&u.jG.CurrentRequestTargetScope&&u.jG.CurrentRequestTargetScope.pageExperiments;let t;if(e&&e.includes("prg-wpolsopt")){const e=v.k.getWpoTreatmentsWithType(u.jG.AppType,u.jG.CurrentRequestTargetScope,d._h.topSitesPromotion),i=v.k.getWpoTreatmentsWithType(u.jG.AppType,u.jG.CurrentRequestTargetScope,d._h.topSites);t=[...e||[],...i||[]]}else{const e=(0,l._)(u.jG.AppType,u.jG.CurrentRequestTargetScope),{treatments:i}=(0,p.$o)().getObject(e)||{};if(!i)return null;t=i.filter((e=>(null==e?void 0:e.type)===d._h.topSitesPromotion||(null==e?void 0:e.type)===d._h.topSites))}if((null==t?void 0:t.length)>0&&t[0].properties)return t[0].properties}catch(e){const t="Error in getting wpo topSites config";(0,a.H)(c.Od5,t,`error:${e}`)}return null}function k(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=yield m.L.getPreferenceSetting(y),i=null==t?void 0:t.value;(0,o.N)()||function(e){var t;const i=null===(t=g.Al.EdgeNTPHeader)||void 0===t?void 0:t.tscollapsed;void 0!==i&&i!==e&&h.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.txQ.SsrEdgeHeaderMismatch),{message:"SSR - Edge header mismatch.",pb:Object.assign(Object.assign({},c.txQ.SsrEdgeHeaderMismatch.pb),{customMessage:`key: tsCollapsed, header: ${i}, state: ${e}`})}))}(i);const n=r.Gq.get(S);if(void 0!==i||!n)return 1===i;const a=r.Gq.get(b);if(void 0!==a)return a;let d=n.collapsibleControlIsDefaultCollapsed;return d&&n.collapseForDefaultInformational&&(d=e.currentLayout===s.nP.informational),r.Gq.set(b,!!d),!!d}))}function A(e){return(0,n.mG)(this,void 0,void 0,(function*(){if((null==e?void 0:e.selectedQuickLinksDisplaySetting)===s.Z3.top)return!1;const t=yield m.L.getPreferenceSetting(f.nc.quick_links_options);let i=!1,n="";if(!!(null==t?void 0:t.value))i=t.value===s.Z3.top,n="user";else{const e=r.Gq.get(S)||w();i=!!(null==e?void 0:e.promoteTopSitesTop),n="wpo"}return i&&h.M0.addOrUpdateTmplProperty("promoteTopsitesTopFrom",n),i}))}function I(e,t=!1){const i=r.Gq.get(S)||w();let n=null,o=null;if(e&&e.length)for(const t of e)t.setting===y?n=t:t.setting===f.nc.quick_links_options&&(o=t);return!(!n||1!==n.value)||(!(n||!i||!i.collapsibleControlIsDefaultCollapsed)||(!(!o||o.value!==s.Z3.top)||!(!t||o||!i||!i.promoteTopSitesTop)))}},85799:function(e,t,i){"use strict";i.d(t,{k:function(){return s}});var n=i(75970),r=i(77331),o=i(65337);const s=new class{constructor(){this.localStorage=new Map,this.wpoTreatmentTypeMap=new Map,this.isLoaded=new Map}getWpoTreatments(e,t){var i,s;const a=(0,n._)(e,t);if(!this.isLoaded.get(a)){this.wpoTreatmentTypeMap.set(a,new Map);const e=this.wpoTreatmentTypeMap.get(a);for(const t in r._h)isNaN(Number(t))&&(null==e||e.set(t,[]));const{treatments:t}=(0,o.$o)().getObject(a)||{};if(this.localStorage.set(a,t||[]),t)for(let n=0;n<t.length;n++){const o=null===(i=t[n])||void 0===i?void 0:i.type;o&&o in r._h&&(null===(s=null==e?void 0:e.get(o))||void 0===s||s.push(t[n]))}this.isLoaded.set(a,!0)}return this.localStorage.get(a)}getWpoTreatmentsWithType(e,t,i){var r;const o=(0,n._)(e,t);return this.isLoaded.get(o)||this.getWpoTreatments(e,t),null===(r=this.wpoTreatmentTypeMap.get(o))||void 0===r?void 0:r.get(i)}}},95084:function(e,t,i){"use strict";i.d(t,{h:function(){return N}});var n=i(88828),r=i(14989),o=i(29815),s=i(71443),a=i(52144),c=i(84169),d=i(73252),l=i(44979),u=i(65135),p=i(82357),g=i(93048),h=i(7282),m=i(75816),f=i(98429);f.kP&&(window.telemetryEventsClear=()=>{window.telemetryEvents=[]},window.telemetryEventsFlush=()=>{const e=Object.assign({},window.telemetryEvents);return window.telemetryEventsClear(),e});const v=function(e){f.kP&&(window.telemetryEvents=window.telemetryEvents||[],window.telemetryEvents.push(e))},y=[{type:m.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.msn.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:m.G.Debug,mapper:new h.k,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new p.P,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new g.O,transporterConfig:{callback:v}}],b=[{type:m.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.msn.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:m.G.Debug,mapper:new h.k,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new p.P,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new g.O,transporterConfig:{callback:v}}],S=[{type:m.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.microsoftstart.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:m.G.Debug,mapper:new h.k,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new p.P,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new g.O,transporterConfig:{callback:v}}],C=[{type:m.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.microsoftstart.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:m.G.Debug,mapper:new h.k,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new p.P,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new g.O,transporterConfig:{callback:v}}],w=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],T=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],k=[{type:m.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],A=[{type:m.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.msn.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],I=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.microsoftstart.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],P=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.microsoftstart.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],E=[{type:m.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.microsoftstart.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],O=[{type:m.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.microsoftstart.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],M=[{type:m.G.SuperApp,transporterConfig:{enableConsoleLog:!0}}],x=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}}],D={};D.enterprise=k,D.enterpriseCN=A,D.enterpriseMicrosoftStart=E,D.enterpriseCNMicrosoftStart=O,D.int=y,D.intCN=b,D.intMicrosoftStart=S,D.intCNMicrosoftStart=C,D.prod=w,D.prodCN=T,D.prodMicrosoftStart=I,D.prodCNMicrosoftStart=P,D.superApp=M,D.superAppWeb=x;var R=i(33379),L=i(82855),F=i(85663);class N{static initPage(e,t,i){u.M0.initPage(e,i||c.jG.ActivityIdLowerCaseNoHypens,c.jG.BuildVersion,c.jG.FrontDoorMuid,t),a.A.subscribe(a.U.Initialized,B)}static getAppTypeTelemetryContract(e,t,i,n){const r=d.Al&&d.Al.ClientSettings||{},o=r.browser&&"true"===r.browser.ismobile||"phone"===r.deviceFormFactor,s="true"===r.static_page,a=c.jG&&c.jG.CurrentRequestTargetScope&&c.jG.CurrentRequestTargetScope.pageExperiments&&c.jG.CurrentRequestTargetScope.pageExperiments.join(",");let u,p,g,h;u=n.pageType?n.pageType:r.pagetype,p=n.pageContentTitle?n.pageContentTitle:(0,R.N)()?document.title:"",g=n.pageUrl?n.pageUrl:(0,R.N)()?document.URL:(0,l.DO)(t),h=n.pageViewType?n.pageViewType:N.trackCallbacks(i);return Object.assign({browser:{isMobile:o},flight:{id:a},locale:{mkt:c.jG.CurrentMarket,lang:c.jG.MarketRequestInputLanguage,region:c.jG.MarketRequestInputRegion,geo_cc:c.jG.MarketRequestInputGeoCountry,mktReason:c.jG.MarketDetectionType},page:Object.assign(Object.assign({appType:c.jG.AppType,canvas:e.pageCanvas,config:e.pageConfiguration,content:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({title:p},!(0,F.isNullOrUndefined)(e.pageContentCategory)&&{category:e.pageContentCategory}),!(0,F.isNullOrUndefined)(e.pageContentSubCategory)&&{subcategory:e.pageContentSubCategory}),!(0,F.isNullOrUndefined)(e.pageContentDomainId)&&{domainId:e.pageContentDomainId}),!(0,F.isNullOrUndefined)(e.pageContentId)&&{id:e.pageContentId}),!(0,F.isNullOrUndefined)(e.pageContentVertical)&&{vertical:e.pageContentVertical}),isAdEnabled:!1,isAutoRefresh:!1,isJSEnabled:!0,isStatic:s,name:e.pageName,ocid:e.pageOcid,product:e.pageProduct,type:u,url:g,viewType:h},!(0,F.isNullOrUndefined)(e.pageTheme)&&{theme:e.pageTheme}),!(0,F.isNullOrUndefined)(e.pageHas3PSearch)&&{has3PSearch:e.pageHas3PSearch})},(!(0,F.isNullOrUndefined)(e.userSignInStatus)||!(0,F.isNullOrUndefined)(e.userSsoStatus)||!(0,F.isNullOrUndefined)(e.userAadState))&&{user:Object.assign(Object.assign(Object.assign({},!(0,F.isNullOrUndefined)(e.userSignInStatus)&&{isSignedIn:e.userSignInStatus}),!(0,F.isNullOrUndefined)(e.userSsoStatus)&&{isSso:e.userSsoStatus}),!(0,F.isNullOrUndefined)(e.userAadState)&&{aadState:e.userAadState})})}static getAppTypeTrackingSystemConfig(e){const t=c.jG.IsChinaCompliance||d.Al&&d.Al.Locale&&"zh-cn"===d.Al.Locale.toLowerCase();return function(e,t,i,n){const r=e&&e.includes("microsoftstart.com")?"MicrosoftStart":"";let o;return o="prod"===t?n?"enterprise":"prod":"int",D[`${o}${i?"CN":""}${r}`]}(d.Al&&d.Al.ClientSettings&&d.Al.ClientSettings.domain,c.jG.Environment,t,e)}static trackCallbacks(e){let t="";switch((0,n.Bn)().currentColumnArrangement){case e.singleColSupported&&r.K$.c1:t="size1column";break;case!e.singleColSupported&&r.K$.c1:case r.K$.c2:t="size2column";break;case r.K$.c3:t="size3column";break;case r.K$.c4:t="size4column";break;case e.fiveColSupported&&r.K$.c5:t="size5column"}return t}static hasFlight(e){const t=c.jG.CurrentRequestTargetScope&&c.jG.CurrentRequestTargetScope.pageExperiments,i=(0,L.Mx)(t);return i&&i.includes(e)}}function B(e){if(e){a.A.get(a.U.CookieConsentProvider)===o.i.OneTrustBanner&&window.addEventListener(s.C,(()=>{const e=u.M0.getPageMetadata();e&&e.contract&&e.contract.page&&(e.contract.page.consentChanged="occ")}))}}},93721:function(e,t,i){"use strict";i.d(t,{sG:function(){return x},ql:function(){return D},If:function(){return M}});var n=i(33940),r=i(62676),o=i(59902);function s(e){window.windowsPerfMarker&&window.windowsPerfMarker(e)}var a=i(19388),c=i(22704),d=i(26415),l=i(68364),u=i(23163),p=i(62325),g=i(4734),h=i(53301),m=i(36802),f=i(89638),v=i(94788),y=i(84169),b=i(6719),S=i(56698),C=i(70785),w=i(75384),T=i(82890),k=i(65135),A=i(89123),I=i(33379),P=i(63158),E=i(54533);function O(e,t){const i=Object.assign({},t?(0,c.Y9)():(0,c.Ou)());t&&(0,E.Xn)(i),Object.keys(i).length&&(t||(i.TimeToSendPrimaryPageTimings=Math.round(performance.now())),function n(){try{if(k.M0&&k.M0.getPageMetadata()){const e=(0,c.A1)()||{};k.M0.sendLoadTimeEvent({markers:i,deviceCapabilities:e});const n=(0,c.Ou)();n&&t&&(n.telemetryBeaconFireTime=Math.round(performance.now()))}else e.setTimeout(n,500)}catch(e){k.M0&&k.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.IU$),{message:"Unable to send load time event"}))}}())}function M(e,t,i){if(!(0,I.N)())return;const n=(0,g.S0)();n&&t===a.oN.Primary&&h.g.updateAboveTheFoldVisuallyReady.getActionSender(n).send(performance.now());const r=t===a.oN.Primary,o=(0,a.bO)(t);if((0,c.Ou)().IncompleteMarkers=null==o?void 0:o.join(","),(0,m.L)())return void e([]);let s=[];const u=r?d.LwW:d.Nxj;s=r?(0,a.bP)():(0,a.gh)();const p=(0,a.Gb)(),f=p.marker||"None",v=p.value||"None";let y=", Visual dependency callback was unavailable.";if(i){const e=i();y=e.length?`, Incomplete visual dependencies: ${JSON.stringify(e)}.`:", No pending visual dependencies."}(0,l.H)(u,"Missing perf markers",`Missing perf markers: ${JSON.stringify(o)}${y} Last Marked: ${f} ${v}`);const b=(0,a.OZ)();b&&r&&o.includes(`TTVR.${b}`)&&(0,l.H)(d.MmB,"Expected feed timed out while loading",`Expected feed timed out while loading: ${b}`),window.renderCacheEnabled&&r&&(0,P.cB)(),e(s)}function x(e,t,i,a){return(0,n.mG)(this,void 0,void 0,(function*(){const n=(0,c.Ou)(),a=performance&&performance.timing;if(a&&a.responseStart&&a.navigationStart&&a.domContentLoadedEventStart){const{domComplete:e,loadEventStart:t,navigationStart:i,responseStart:s}=a;n.timeToFirstByte=s-i,n.timeToDomComplete=e-i,n.timeToOnLoad=Math.max(t-i,0),function(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("navigation");if(t&&t.length>0){const i=t[0];if(i){const{domainLookupEnd:t,domainLookupStart:n,fetchStart:r,connectEnd:o,connectStart:s,workerStart:a,responseEnd:c,responseStart:d,requestStart:l}=i;e.domainLookupTime=Math.round(t-n),e.timeToFetchStart=Math.round(r),e.timeToWorkerStart=Math.round(a),e.connectStart=Math.round(s),e.connectTime=Math.round(o-s),e.requestStart=Math.round(l),e.requestTime=Math.round(d-l),e.responseStart=Math.round(d),e.responseTime=Math.round(c-d),e.requestResponseTime=Math.round(c-l),e.fetchTime=Math.round(c-r),e.swInitTime=Math.round(r-a)}}}}(n),function(e){e.buildVer=y.jG.BuildVersion||-1}(n),function(e){if(performance.getEntriesByType){const t=performance.getEntriesByType("paint").filter((e=>"first-contentful-paint"===e.name));t.length>0&&(e[r.zJ]=Math.round(t[0].startTime))}}(n),(0,u.Oq)(n),(0,u.bg)(n),(0,u.zV)(n),(0,u.Am)(n),(e=>{let t=-1;const i=e[r.w],n=e[r.P9];i&&n&&(t=i-n),e[r.Fz]=t,(0,o.QP)({name:r.Fz,startTime:n,endTime:i})})(n),(e=>{let t=-1;const i=e[r.w],n=e[r.Wk];n&&i&&(t=n-i),e[r.iL]=t,(0,o.QP)({name:r.iL,startTime:i,endTime:n})})(n)}(0,u.dw)(n),(0,u.iA)(n);for(const t of e){const e=t[0];n[e]||(n[e]=t[1])}const d=n[b.dd];d&&(s(b.jh),s(b.H$),(0,S.Eu)(d),function(e){if(performance&&performance.getEntriesByType&&e&&e[r.MV]){const t=performance.getEntriesByType("navigation");if(t.length){const i=t[0];let n=0,o=0;r.pJ in i&&r.fR in i&&(n=i[r.pJ],o=i[r.fR]),n<0&&o<0&&(e["TTVR."+r.IP]=Math.round(e[r.MV]-n),e["TTVR."+r.Hm]=Math.round(e[r.MV]-o))}}}(n)),f.U.getConfigTimings(n),(0,A.J)(n),n.wasBrowserHiddenAtLeastOnce=(0,m.L)(),(0,p.j)(),t&&t(),(0,w.wY)(),Promise.all([(0,C.o)(),(0,w.lr)()]).then((()=>{(0,S.fv)(n),i||O(window)})),f.U.refreshConfigCache().then((()=>{!function(){const e=f.U.getResolverErrors();e&&e.length>0&&e.forEach((e=>{k.M0.sendAppErrorEvent(e)}))}()})),(0,v.mS)({id:"PostTtvr",type:"command"})}))}function D(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){const n=(0,c.Ou)(),r=(0,c.Y9)();if((e=e.filter((e=>!(e[0]in n)))).forEach((e=>{const t=e[0];t in n||(r[t]=e[1],n[t]=e[1])})),v.yb){const e=yield(0,v.ot)({id:"perfmarkers"},4e3);if(e&&e.fetched){const t=e.payload;t&&t["WW.MyFeed"]&&(t[T.p.feedRequest]=t["WW.MyFeed"]),Object.assign(r,e.payload),Object.assign(n,e.payload)}}t&&t(),i||Promise.all([(0,C.o)(),(0,w.lr)()]).then((()=>{O(window,!0)}))}))}},63263:function(e,t,i){"use strict";i.d(t,{f:function(){return l}});var n=i(33940),r=i(93721),o=i(19388),s=i(65135),a=i(75559),c=i(59294),d=i(33379);function l(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(0,d.N)())return;e=e||{};let t=!1;const i=setTimeout((()=>{t=!0,(0,r.If)((e=>u(e)),o.oN.Primary,e.incompleteVisualDependencyCallback)}),e.timeoutOverride||2e4);(0,o.Nv)().then((e=>{t||u(e)}));const l=new c.o;return yield l.getResultAsync();function u(t){return(0,n.mG)(this,void 0,void 0,(function*(){i&&clearTimeout(i),s.M0.config.autoCaptureContentView=!0,s.M0.observeElementTree(document);const n=!!e.pageLoadEventsAvailableCallback&&!e.pageLoadEventsAvailableCallback();n||s.M0.scheduleContentViewEvent(a.NS.Load);const{contentViewTimeoutOverride:o,onBeforeNotifyCallback:c}=e;o&&s.M0.setContentViewTimeout(o),(0,r.sG)(t,c&&(()=>{c(t)}),n,e.enableNavFeedFetchTimings),l.set()}))}}))}},29904:function(e,t,i){"use strict";i.d(t,{S:function(){return l}});var n=i(33940),r=i(22704),o=i(19388),s=i(93721),a=i(33379),c=i(73252),d=i(6719);function l(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!(0,a.N)())return;if(e=e||{},c.Al.IsPrerender){(0,r.Y9)()[d.C7]=1}let t=!1;return new Promise((i=>{const r=setTimeout((()=>{i(),t=!0,(0,s.If)(a,o.oN.Secondary,e.incompleteVisualDependencyCallback)}),e.timeoutOverride||2e4);function a(t){return(0,n.mG)(this,void 0,void 0,(function*(){r&&clearTimeout(r);const i=!!e.pageLoadEventsAvailableCallback&&!e.pageLoadEventsAvailableCallback();(0,s.ql)(t,e.onBeforeNotifyCallback&&(()=>{e.onBeforeNotifyCallback(t)}),i)}))}(0,o.e3)().then((e=>{i(),t||a(e)}))}))}))}},94800:function(e,t,i){"use strict";i.d(t,{f:function(){return r}});var n=i(55067);class r{}r.voiceSearchLoaded=new n.C("VoiceSearchLoaded"),r.imageSearchLoaded=new n.C("ImageSearchLoaded")},22746:function(e,t,i){"use strict";i.d(t,{D:function(){return o}});var n=i(63439),r=i(94800);class o extends n.e{voiceSearchLoaded(){r.f.voiceSearchLoaded.getActionSender(this).send()}imageSearchLoaded(){r.f.imageSearchLoaded.getActionSender(this).send()}}},26540:function(e,t,i){"use strict";i.d(t,{d:function(){return o}});var n=i(30856),r=i(94800);class o{reduce(e,t){if(!e)return{voiceSearchIsLoaded:!1,imageSearchIsLoaded:!1};if(!t)return e;let i;return n.G.handleAction(t,r.f.voiceSearchLoaded,(()=>{i=Object.assign(Object.assign({},e),{voiceSearchIsLoaded:!0})})),n.G.handleAction(t,r.f.imageSearchLoaded,(()=>{i=Object.assign(Object.assign({},e),{imageSearchIsLoaded:!0})})),i||e}}},72358:function(e,t,i){"use strict";i.r(t),i.d(t,{ExperienceTrackerEdgeNextDataConnector:function(){return B},ExperienceTrackerEdgeNextDataReducer:function(){return $},ToolingInfo:function(){return U}});var n,r=i(33940),o=i(53899),s=i(53076),a=i(82890),c=i(83227),d=i(12108),l=i(68917),u=i(4734),p=i(53301),g=i(19388),h=i(2820);!function(e){e.VISUALLY_READY_WILL_FIRE="visuallyReadyWillFire",e.VISUALLY_READY_DID_FIRE="visuallyReadyDidFire",e.PAGE_REVEAL_START_WILL_FIRE="pageRevealStartWillFire",e.PAGE_REVEAL_START_DID_FIRE="pageRevealStartDidFire",e.PAGE_REVEAL_COMPLETE_WILL_FIRE="pageRevealCompleteWillFire",e.PAGE_REVEAL_COMPLETE_DID_FIRE="pageRevealCompleteDidFire"}(n||(n={}));var m=i(63439),f=i(55067);class v{}v.addVisuallyReadyDependencies=new f.C("AddVisuallyReadyDependencies"),v.markVisuallyReadyComplete=new f.C("MarkVisuallyReadyComplete");class y extends m.e{constructor(){super(...arguments),this.ttvrMarkers=[],this.getIncompleteVisualDependencies=()=>{const{visuallyReadyDependencies:e}=this.getCurrentState(),t=[];return e.forEach((e=>{e.visuallyReady||t.push(e.experienceType)})),t}}addVisuallyReadyDependencies(e){v.addVisuallyReadyDependencies.getActionSender(this).send(e),e.forEach((e=>{this.ttvrMarkers.push(e),(0,h.w)(e,!0)}))}registerVisuallyReadyObserver(){p.g.updateVisuallyReadyTiming.registerObserver((e=>{const t=e.params[0];if(!t)return;const{experienceType:i,endTime:n}=t;if(null!=n){this.getCurrentState().visuallyReadyDependencies.has(i)&&this.markVisuallyReadyComplete(i)}}))}registerMarkersIfNecessary(e,t,i=!1){if(!(this.ttvrMarkers&&0!==this.ttvrMarkers.length||e&&0!==e.length||t&&0!==t.length))return;const n={};n.TTVR=t?[...this.ttvrMarkers,...t]:this.ttvrMarkers,e&&(n.TTF=e),i&&(n.TTPR=[...this.ttvrMarkers],n.TTPR.push("OverlayRemoval")),(0,g.IO)(n)}registerSecondaryPerfMarkers(e){(0,g.Xl)(e)}registerFeedPerfMarker(e){(0,g.tW)(e)}markVisuallyReadyComplete(e){return(0,r.mG)(this,void 0,void 0,(function*(){const{visuallyReadyDependencies:t}=this.getCurrentState();if(t.get(e).visuallyReady)return;v.markVisuallyReadyComplete.getActionSender(this).send(e);for(const e of t.values())if(!e.visuallyReady)return;const i=(0,u.S0)();i&&(yield(0,u.FQ)(n.VISUALLY_READY_WILL_FIRE),performance.measure("VisuallyReady"),p.g.updateAboveTheFoldVisuallyReady.getActionSender(i).send(performance.now()),yield(0,u.FQ)(n.VISUALLY_READY_DID_FIRE))}))}}var b=i(93450);const S=()=>{const e=b._.getInstance().rootReducer.connectors().find((e=>e.namespace.indexOf("ExperienceTracker")>=0));if(!e)return null;const t=e.getCurrentState().visuallyReadyDependencies;return t&&0!==t.size?[...t.keys()]:null};var C=i(84754),w=i(23401),T=i(73252),k=i(84169),A=i(15213),I=i(91470),P=i(85663),E=i(95838),O=i(75384),M=i(82423),x=i(20126),D=i(33379);const R={eventType:l.Gg.aboveTheFoldVisuallyReady},L={eventType:l.Gg.belowTheFoldTransitionStart},F="prg-gamingfeed",N=[w.I.ENUS,w.I.ENGB,w.I.ENAU,w.I.ENCA,w.I.ENIN];class B extends y{constructor(e,t,i,n,r,o,s){super(e,t,i,n,r,o,s),this.initializePromise=this.initialize()}waitForInitialize(){return this.initializePromise}initialize(){var e,t;return(0,r.mG)(this,void 0,void 0,(function*(){const i=yield(0,M.oU)(s.z.ChromiumPageSettings),n=yield i.getLayoutStateAsync();this.milestoneDataConnector=(0,u.S0)();const r=[],g=[],h=[],m=[a.p.searchBox];let{renderCacheConfig:f,feedContentSourceMap:v}=this.config||{};f=f||{};const y=!(0,P.isNullOrUndefined)(n.customBackgroundImageInfo)&&n.customBackgroundImageInfo.hasImage,b=n.imageOfTheDayEnabled&&n.currentBackgroundImageType!==o.HX.custom||n.currentBackgroundImageType===o.HX.custom&&y,w={eventType:l.Gg.visuallyReady,experienceType:c.x.commonSearchBoxEdgeNext};g.push(c.x.edgeChromiumPageWC),g.push(c.x.commonSearchBoxEdgeNext),n.quickLinksEnabled&&g.push(c.x.topSitesEdgeNextWC),b&&g.push(c.x.backgroundImageWC),r.push((0,u.Qz)(w,c.x.topSitesEdgeNextWC)),r.push((0,u.Qz)(w,c.x.backgroundImageWC)),this.config.measureWatchTTVR&&g.push(c.x.watch);const B=(null===(e=null===T.Al||void 0===T.Al?void 0:T.Al.ClientSettings)||void 0===e?void 0:e.audienceMode)===d.F.Enterprise,j=(null===(t=null===T.Al||void 0===T.Al?void 0:T.Al.ClientSettings)||void 0===t?void 0:t.audienceMode)===d.F.Kids,$="always"===n.selectedFeedDisplaySetting||"peek"===n.selectedFeedDisplaySetting&&!B,U=v&&(0,I.f)(v)===o.iz.Office365,H=k.jG&&k.jG.CurrentRequestTargetScope&&k.jG.CurrentRequestTargetScope.os===x.Q.Xbox,_=(0,I.f)({gaming:o.iz.Gaming})===o.iz.Gaming,W=(0,I.f)({play:o.iz.Play})===o.iz.Play;if($&&!j)if(U){g.push(c.x.productivityHub),g.push(c.x.frequentSitesCardWC),g.push(c.x.calendarCard),g.push(c.x.todoCardWC),g.push(c.x.nudgeSpotlightCard);const e=yield k.jG.isGccModUser,t=this.isFlightActive("prg-ffstable-c");t||e?g.push(c.x.officeDocumentsTableWC):t||e||g.push("FlagshipFeed.render"),t&&!e&&g.push(c.x.microsoftFeedCard),e||r.push((0,u.Qz)(w,c.x.productivityHub))}else if(H&&_)this.isFlightActive(F)||N.includes(k.jG.CurrentMarket)?g.push(c.x.gridViewFeed):g.push(c.x.xboxFeedWC);else if(W);else{const e=c.x.gridViewFeed;g.push(e),this.registerFeedPerfMarker(e);const t=(0,D.N)()&&window.ntpSSRData&&window.ntpSSRData.samAd;this.config.disableAdsPerfMarkers||t||(h.push(A.q.TimeToRequestAd),h.push(A.q.TimeToServeAd),h.push(A.q.ApiDuration),h.push(A.q.RenderReady),h.push(A.q.TimeToRenderAd))}const z={eventType:l.Gg.visuallyReady,experienceType:c.x.gridViewFeed},G={eventType:l.Gg.visuallyReady,experienceType:c.x.xboxFeedWC},V={eventType:l.Gg.visuallyReady,experienceType:c.x.casualGamesLanding};let q,Z,K;switch(q=H&&_&&!this.isFlightActive(F)?G:W?V:z,n.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":r.push((0,u.Qz)(R,c.x.breakingNewsWC)),r.push((0,u.Qz)(R,c.x.superBreakingNews)),r.push((0,u.Qz)(L,c.x.cardActionWC));break;default:r.push((0,u.Qz)(R,c.x.breakingNewsWC)),r.push((0,u.Qz)(R,c.x.superBreakingNews)),r.push((0,u.Qz)(q,c.x.cardActionWC))}if($?(Z=w,K=U?R:q):(Z=R,K=R),this.config.delayLoadPoweredByLegend){const e=$?R:L;r.push((0,u.Qz)(e,c.x.poweredByLegendWC))}const Q=[c.x.articleFre,c.x.autosCarousel,c.x.autosMarketplaceCard,c.x.casualGamesCard,c.x.companyNewsCard,c.x.contentGroupCard,c.x.digestCard,c.x.esportsCard,c.x.esportsStreamsCard,c.x.gamingCompeteCard,c.x.gamingDiscoverStrip,c.x.gamingMatchCard,c.x.gamingMediaCarousel,c.x.gamingPersonalizationCard,c.x.gamingRecentlyPlayedCard,c.x.gamingRecommendedCard,c.x.gamingRedditCard,c.x.gamingRewardsCard,c.x.gamingStreamCard,c.x.gamingTournamentCard,c.x.gamingUpcomingCard,c.x.gamingVideoCard,c.x.generalElections,c.x.horoscopeAnswerCardWC,c.x.hotListCard,c.x.mangaCard,c.x.moneyInfoCardWC,c.x.newsGroupsCard,c.x.onThisDayCardWC,c.x.prayerTimesCard,c.x.prismCarouselCard,c.x.prismSdCard,c.x.qna,c.x.realEstateCard,c.x.recommendedSearchesCard,c.x.rewardsDailySetCard,c.x.shoppingCardWC,c.x.shoppingEdgeInsightsCard,c.x.shoppingEventsDealCard,c.x.shoppingSdCard,c.x.sportsCardWC,c.x.sportsOlympicCardWC,c.x.sportsWorldCupCardWC,c.x.spotlightCardWC,c.x.travelDestination,c.x.travelSdThemesCard,c.x.trendingNowWC,c.x.trendingSearchCard,c.x.videoShoppingCard,c.x.videoShoppingCarouselCard,c.x.weatherCardWC];for(const e of Q)r.push((0,u.Qz)(Z,e));const J=[c.x.articleRelatedStories,c.x.articleTopComment,c.x.backgroundGallery,c.x.coachmarkWC,c.x.conditionalBannerWC,c.x.devTools,c.x.dailyDiscovery,c.x.edgeShopping,c.x.feedbackLinkWC,c.x.languageMismatchBanner,c.x.locationMarker,c.x.signInControlWC,c.x.signInFlyoutWC,c.x.msRewardsWC,c.x.mobileAppUpsell,c.x.nextdoorCard,c.x.officeCoachmark,c.x.officeLeftRail,c.x.personalizeNavButton,c.x.pillWC,c.x.promoBanner,c.x.publisherSubscribeFollowButton,c.x.socialAvatar,c.x.socialBarWC,c.x.superCoachMarkWC,c.x.superNavCoachMark,c.x.waffleWC,c.x.welcomeGreetingWC,c.x.commonSettingsEdgeNext,c.x.marketLanguageToggleWC,c.x.testBingNudge,c.x.feedLevelFeedbackWC];this.config.disableDelayLoadNotification||J.push(c.x.notificationBellWC),this.config.disableDelayLoadRecommendedSites||J.push(c.x.recommendedSitesWC);for(const e of J)r.push((0,u.Qz)(K,e));if(this.config&&this.config.delayLoadStickyPeek){const e="off"===n.selectedFeedDisplaySetting?c.x.commonSettingsEdgeNext:c.x.feedToggleWC,t={eventType:l.Gg.rendered,experienceType:e};r.push((0,u.Qz)(t,c.x.stickyPeek))}r.push((0,u.Qz)(R,c.x.toastWC)),r.push((0,u.Qz)(R,c.x.voiceSearchWC)),r.push((0,u.Qz)(R,c.x.imageSearchWC)),r.push((0,u.Qz)(R,c.x.searchHistoryEdgeNextWC)),r.push((0,u.Qz)(R,c.x.newsHeadlineBelowSearchbox)),r.push((0,u.Qz)(R,c.x.recommendedSearchCarouselWC)),r.push((0,u.Qz)(R,c.x.coldStart)),this.addVisuallyReadyDependencies(g);const X=k.jG&&k.jG.CurrentRequestTargetScope&&k.jG.CurrentRequestTargetScope.pageType==d.G.DHP?this.config.entireRiverStaleMinutes:this.config.dhpEntireRiverStaleMinutes,Y=this.disableFeedPrerender();if((0,C.Vx)(Y),this.config.prerenderSuppressRender&&((0,E.dG)(!0),(0,E.EW)(),(0,E.rd)()),(0,O.Qc)(S(),this.config.prerenderForceRefresh,X,this.config.sdCardStaleMinutes,Y),this.registerSecondaryPerfMarkers(h),(0,D.N)()){const e=(null===window||void 0===window?void 0:window.isSSREnabled)?r.filter((e=>e.deferralInfo!==R&&e.deferralInfo!==w&&e.deferralInfo!==q)):r;p.g.updateExperienceLoadDeferralState.getActionSender(this.milestoneDataConnector).send(e)}this.registerVisuallyReadyObserver(),this.registerMarkersIfNecessary([a.p.searchBox],m,T.Al.IsPrerender)}))}isFlightActive(e){var t;return!!(null===(t=null===T.Al||void 0===T.Al?void 0:T.Al.CurrentFlightSet)||void 0===t?void 0:t.has(e))}disableFeedPrerender(){return!(!(null===T.Al||void 0===T.Al?void 0:T.Al.IsPrerender)||this.config.noDisablePrerenderFeed)&&((0,C.Tr)()||this.config.disableFeedPrerender)}}var j=i(30856);class ${reduce(e,t){if(!e)return{visuallyReadyDependencies:new Map};if(!t)return e;let i=!1;const n=Object.assign({},e);return i=i||j.G.handleAction(t,v.addVisuallyReadyDependencies,(e=>{e&&e.forEach((e=>{e&&!n.visuallyReadyDependencies.has(e)&&n.visuallyReadyDependencies.set(e,{experienceType:e,visuallyReady:!1})}))})),i=i||j.G.handleAction(t,v.markVisuallyReadyComplete,((e,t)=>{if(e){const t=n.visuallyReadyDependencies.get(e);t&&(t.visuallyReady=!0,"GridViewFeed"===e&&(0,O.Bj)())}})),i?n:e}}const U={experienceConfigSchema:{}}},58958:function(e,t,i){"use strict";function n(){if(!(null===window||void 0===window?void 0:window.matchMedia))return;const e=window.matchMedia("(prefers-color-scheme: dark)");return e?!!e.matches:void 0}function r(e){return!(!(null==e?void 0:e.useMobile)||!(null==e?void 0:e.isDarkModeForMobile))}i.d(t,{S:function(){return r},Y:function(){return n}})},18544:function(e,t,i){"use strict";i.d(t,{P5:function(){return d},Ve:function(){return c},Yw:function(){return a},dw:function(){return s},m0:function(){return o}});var n=i(33442),r=i(56121);const o="#000000",s="#FFFFFF",a=(0,n.l$)((()=>o))(r.ZP),c=(0,n.s5)((()=>o))(r.ZP),d=(0,n.$B)((()=>s))(r.ZP)},14989:function(e,t,i){"use strict";i.d(t,{K$:function(){return n},SX:function(){return u},eH:function(){return f},hg:function(){return d},q7:function(){return c},vW:function(){return m}});var n,r=i(14165),o=i(70694),s=i(42166);!function(e){e.c1="c1",e.c2="c2",e.c3="c3",e.c4="c4",e.c5="c5"}(n||(n={}));let a;function c(e){a=e}function d(){if(o.p.fiveColSupported()&&4===u.length){const e=new l(n.c5,r.sc);u.push(e),p[n.c5]=e}}class l{constructor(e,t,i){this.arrangement=e,this.contentSizePx=t,this.isFirstBreakpoint=i}get minViewportWidthPx(){if(this.isFirstBreakpoint)return 0;if(a){const e=a.get(this.arrangement);if(e)return e}return this.contentSizePx+g}}const u=[new l(n.c1,r.xs,!0),new l(n.c2,r._3),new l(n.c3,r.Xn),new l(n.c4,r.xX)];o.p.fiveColSupported()&&u.push(new l(n.c5,r.sc));const p={};for(const e of u)p[e.arrangement]=e;const g=32;!function(){var e;const t=[0];for(let i=1;i<u.length;i++)t.push(null===(e=u[i])||void 0===e?void 0:e.minViewportWidthPx)}();function h(e,t){var i;const n=[];if(e){const t=p[e],i=null==t?void 0:t.minViewportWidthPx;i>0&&n.push(`(min-width: ${(0,s.a)(i)})`)}if(t){const e=p[t],r=u.indexOf(e);r<u.length-1&&n.push(`(max-width: ${(0,s.a)((null===(i=u[r+1])||void 0===i?void 0:i.minViewportWidthPx)-1)})`)}return n.join(" and ")}function m(e,t){const i=h(e,t);return i?"@media "+i:""}function f(e){return m(e,e)}},51953:function(e,t,i){"use strict";i.d(t,{g:function(){return o}});const n=1<<24,r=/\s+/g;const o=new class{rgbNumberToCssHexColor(e){let t=null;return"number"==typeof e&&e>=0&&e<n&&(t=this.rgbNumberToCssHexColorCore(e)),t}parseColor(e){if(e)return this.parseHexColor(e)||this.parseRgbaColor(e)}parsedColorToNumber(e,t){return e&&e.r<<16|e.g<<8|e.b||t}grayScale(e){const t=e.r,i=e.g,n=e.b;return this.isValidColorValue(t)&&this.isValidColorValue(i)&&this.isValidColorValue(n)?Math.min(255,Math.round(.299*t+.587*i+.114*n)):255}isValidColorValue(e){return!isNaN(e)&&null!=e&&e>=0&&e<=255}rgbNumberToCssHexColorCore(e){return"#"+(n|e).toString(16).slice(1)}parseHexColor(e){const t=e&&e.replace("#",""),i=parseInt(t,16);if(isNaN(i))return null;const n=t.length;return 3===n?{r:17*(i>>8),g:17*(i>>4&15),b:17*(15&i),a:1}:6===n||8===n?{r:i>>16&255,g:i>>8&255,b:255&i,a:6===n?1:(i>>24&255)/255}:null}parseRgbaColor(e){if(!e)return null;const t=e.replace(r,"").match(/^(?:rgba?)\(((?:\d+\.)?\d+%?),((?:\d+\.)?\d+%?),((?:\d+\.)?\d+%?)(?:,((:?\d*\.)?\d+))?\)$/);if(t){const e=t[4];return{r:this.normalizeColor(t[1],255,!0),g:this.normalizeColor(t[2],255,!0),b:this.normalizeColor(t[3],255,!0),a:e?this.normalizeColor(e,1,!1):1}}return null}normalizeColor(e,t,i){let n=parseFloat(e);return isNaN(n)?0:(n=e.indexOf("%")>=0?Math.max(0,Math.min(100,n))*t/100:Math.max(0,Math.min(t,n)),i?Math.round(n):Math.round(100*n)/100)}}},14165:function(e,t,i){"use strict";i.d(t,{Xn:function(){return o},_3:function(){return r},iN:function(){return d},jU:function(){return l},lE:function(){return u},sc:function(){return a},xX:function(){return s},xs:function(){return n}});const n=300;let r=624,o=948,s=1272,a=1596,c=null,d=24;function l(e){d=e;const t=function(e){return{Size1ColumnWidth:n,Size2ColumnWidth:2*n+e,Size3ColumnWidth:3*n+2*e,Size4ColumnWidth:4*n+3*e,Size5ColumnWidth:5*n+4*e,Size6ColumnWidth:6*n+5*e}}(e);c=t.Size6ColumnWidth,a=t.Size5ColumnWidth,s=t.Size4ColumnWidth,o=t.Size3ColumnWidth,r=t.Size2ColumnWidth}function u(){d=24,r=624,o=948,s=1272,a=1596,c=1900}},88828:function(e,t,i){"use strict";i.d(t,{Bn:function(){return g},sZ:function(){return f},vi:function(){return m}});var n=i(14989),r=i(20654),o=i(80329),s=i(44979),a=i(73252),c=i(26415),d=i(27003),l=i(65135);const u="__FastBreakpointManager__";class p{constructor(e){this.callbackMap=new Map,this.refreshBreakpoints(e)}get currentColumnArrangement(){return this.indexToStandardConverter(r.Z.currentBreakpoint())}refreshBreakpoints(e){var t;const i=[0];(0,n.hg)();for(let e=1;e<n.SX.length;e++)i.push(null===(t=n.SX[e])||void 0===t?void 0:t.minViewportWidthPx);r.Z.breakpoints=i,r.Z.defaultBreakpoint=void 0!==e?(0,s.Nd)(e.data.breakpoint,"breakpoint"):0}set breakpoints(e){if(r.Z.breakpoints=e,o.R1&&Array.isArray(o.R1)){const t=o.R1.length;for(let e=0;e<t;e++)o.R1.pop();e.forEach((e=>o.R1.push(e)))}}get breakpoints(){return r.Z.breakpoints}updateBreakpointsBasedFromContainerWidth(e){if(e>=n.SX[3].contentSizePx)return;const t=[];for(let i=0;i<this.breakpoints.length;i++)(0===i||e>=n.SX[i].contentSizePx)&&t.push(n.SX[i].contentSizePx);this.breakpoints=t}subscribe(e){const t=t=>{e(this.indexToStandardConverter(t))};this.callbackMap.set(e,t),r.Z.subscribe(t)}unsubscribe(e){r.Z.unsubscribe(this.callbackMap.get(e)),this.callbackMap.delete(e)}indexToStandardConverter(e){return n.SX&&n.SX[e]?n.SX[e].arrangement:(l.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.rax),{message:"Cannot read property arrangement of undefined",pb:Object.assign(Object.assign({},c.rax.pb),{customMessage:"timestamp: "+performance.now()+". columnArrangements["+e+"] is undefined.columnArrangements: "+JSON.stringify(n.SX)+"; breakpoints: "+JSON.stringify(this.breakpoints),isPrerender:null===a.Al||void 0===a.Al?void 0:a.Al.IsPrerender})})),n.SX&&e>=n.SX.length&&n.SX[n.SX.length-1]?n.SX[n.SX.length-1].arrangement:n.K$.c1)}}const g=(e,t)=>(t&&d.Gq.set(u,new p(e)),d.Gq.get(u,(()=>new p(e)))),h="__FastBreakpointManager_viewType__",m=()=>{let e=null;switch(g().currentColumnArrangement){case n.K$.c1:e="size1column";break;case n.K$.c2:e="size2column";break;case n.K$.c3:e="size3column";break;case n.K$.c4:e="size4column";break;case n.K$.c5:e="size5column";break;default:return d.Gq.get(h,(()=>null))}return d.Gq.set(h,e),e};function f(e){var t;return e&&(null===(t=g())||void 0===t?void 0:t.breakpoints[e])||0}},92402:function(e,t,i){"use strict";i.d(t,{B7:function(){return r},ZH:function(){return s},l_:function(){return a},zb:function(){return c}});var n=i(59294);const r="defer-hydration",o=e=>t=>{if(!t.hasAttribute(e))return Promise.resolve();const i=new n.o;return new MutationObserver(((n,r)=>{t.hasAttribute(e)||(i.set(),r.disconnect())})).observe(t,{attributeFilter:[e]}),i.getResultAsync()},s=o(r),a=o("needs-hydration");function c(e){((e,t,i)=>{e.querySelectorAll(t).forEach(i),e.shadowRoot&&e.shadowRoot.querySelectorAll(t).forEach(i)})(e,`*[${r}]`,(e=>{a(e).then((()=>c(e))),e.removeAttribute(r)}))}},87538:function(e,t,i){"use strict";i.d(t,{Z:function(){return s},l:function(){return a}});var n=i(33940),r=i(33379);let o={};function s(e){e=e||{},(()=>{(0,n.mG)(this,void 0,void 0,(function*(){const{newUrl:t,invalidatePageCache:i=!0}=e;if(i){const{invalidatePageCacheHandler:e}=o;if(e){const t=e();t&&t.then&&(yield t)}}t?window.location.replace(t):window.location.reload(i)}))})()}const a={resetHandlers:function(){o={}},setHandlers:function(e){(0,r.N)()&&e&&(o=e)}}},59294:function(e,t,i){"use strict";i.d(t,{o:function(){return n}});class n{constructor(e){this.promise=new Promise(((e,t)=>{this.resolver=e})),e&&setTimeout((()=>this.set(void 0)),e)}set(e){this.resolver(e),this.valueSet=!0}wasSet(){return this.valueSet}getResultAsync(){return this.promise}}},87711:function(e,t,i){"use strict";i.d(t,{Kb:function(){return o}});var n=i(33940);setTimeout;let r=setTimeout;function o(e){return(0,n.mG)(this,void 0,void 0,(function*(){return new Promise(((t,i)=>{r(t,e)}))}))}},81765:function(e,t,i){"use strict";i.d(t,{Bs:function(){return h},E7:function(){return g},EH:function(){return m},Eg:function(){return p},Lr:function(){return n},S7:function(){return u},WX:function(){return f},Wi:function(){return l},ZG:function(){return a},d5:function(){return r},hE:function(){return o},il:function(){return c},kO:function(){return y},mw:function(){return v},pt:function(){return s},yV:function(){return d}});const n={PrivacyUrl:"https://go.microsoft.com/fwlink/?LinkID=286759",SamDomain:"https://srtb.msn.com/",SamEndpoint:"auction",SamOpenRtbEndpoint:"auctionopenrtb",AppId:"msnappid",PublisherId:"msn",Ecasession:"init",RiverRegion:"river",RiverDoubleWide:"river-dbl",RiverHalfTextOnly:"river-half-textonly",RiverHalf:"river-half",ReservedRiver:"resriver",UserOptOut:"userOptOut",UserOptOutOptions:"userOptOutOptions",DefaultPartnerCookieSyncTimeout:500,BulkCookieSyncTimeout:1e3,WaitForAdResponseAfterWPOResponseTimeout:1500,DefaultContentServiceBaseUrl:"https://assets.msn.com/content/"},r={river:"oneriver.main",infopane:"oneriver.spartan.infopane","infopane-tab":"oneriver.spartan.tabinfopane"},o={BeaconFormatDecoded:"decoded",BeaconFormatEncoded:"encoded",BeaconTypeAdServed:"adserved",BeaconTypeClick:"click",BeaconTypeJsTracker:"jsTracker",BeaconTypeVisibility:"visibility",BeaconTypeVideoProgress:"videoProgress",StartEvent:"start",FirstQuartileEvent:"firstquartile",ThirdQuartileEvent:"thirdquartile",MidPointEvent:"midpoint",CompleteEvent:"complete",ProgressEvent:"progress",UserActionEvent:"userAction"};var s;!function(e){e.Click="click",e.Ready="ready",e.Play="play",e.Pause="pause",e.Ended="ended",e.Telemetry="telemetry",e.VolumeChange="volumechange",e.TimeUpdate="timeupdate",e.Error="error",e.CanPlay="canplay",e.CanPlayThrough="canplaythrough"}(s||(s={}));const a={CMSListServiceUrl:"v1/cms/api/amp/Document/",CMSContentServiceURl:"view/v1/Preview/",DefaultProviderName:"Microsoft"},c={ContentType:"application/json",Method:"POST",CacheControl:"no-cache",Skipsessioncall:"false",ContentTypeKey:"Content-Type",FlightIdKey:"x-ms-flightId",CacheControlKey:"Cache-Control",ClientIdKey:"X-MSEdge-ClientID",MarketKey:"X-MSEdge-Market",AuthCookieNameKey:"x-ms-authCookieName",Timeout:3e3,BCPCookieKey:"BCP"},d={MSAOptOut:"msaoptout",BrowserOptOut:"TOptOut",AppAnonCookieExist:"aace",TaboolaSessionCookieName:"ecasession",CookieDomain:"msn.com",AnonCookieName:"ANON",LiverampEnvelopeId:"adslrid"},l={"de-de":"BBGgbuP","en-gb":"BBI4NMr","en-us":"BBI4MeJ","it-it":"BBH0fea","de-at":"BBIbKRf","de-ch":"BBH6mkD","pl-pl":"BBGgsgw","tr-tr":"BBH3vBx","es-es":"BBGdmuQ","en-au":"BBGfT6j","es-ar":"BBH69zf","es-cl":"BBH6qTU","es-co":"BBH3TQV","es-pe":"BBIbVzn","es-mx":"BBGg7xs","pt-br":"BBI4jJ6","en-ca":"BBI4FN9","he-il":"BBIbHNd","fr-ch":"BBIfDNl","nl-be":"BBH6zcN","fr-be":"BBIclrE","fr-fr":"BBI4XBF","nl-nl":"BBGgoUg","pt-pt":"BBH3qlj","zh-cn":"BBPRWnl","ja-jp":"AAvs5xw","ko-kr":"AAvrTXp","en-xl":"AAxzSQi","es-us":"AAuAfA8","fr-ca":"BBH6Awm","es-xl":"BBIfH5i","cs-cz":"BBPwecC","da-dk":"BBGKGmb","el-gr":"BBIc8WA","fi-fi":"BBH6Cse","hu-hu":"BBPw6XX","nb-no":"BBI4EVt","ru-ru":"BBH3gvW","sv-se":"BBH3vHp","ar-ae":"BBIf1cG","ar-eg":"BBIcggw","ar-sa":"BBIc6wN","en-ae":"BBIbBRO","en-ie":"BBIclgh","en-za":"BBIc5NR","en-in":"BBGeThK","en-sg":"BBIfqX9","en-nz":"BBIc483","zh-hk":"BBIbPBb","hi-in":"BBH85g2","mr-in":"BBU7J93","te-in":"BBU7JcP","bn-in":"BBU7Qw4","id-id":"BBIc9Ls","th-th":"BBIbPH4","vi-vn":"BBIcbQS","es-ve":"BBIcaTp","fr-xl":"AAD4nFo","en-my":"BBIclH7","en-ph":"BBIcbaP","zh-tw":"BBH3qpv"},u={"de-de":"Anzeige","en-gb":"Ad","en-us":"Ad","it-it":"Ann.","de-at":"Anzeige","de-ch":"Anzeige","pl-pl":"Reklama","tr-tr":"R","es-es":"Publicidad","en-au":"Ad","es-ar":"Patrocinado","es-cl":"Patrocinado","es-co":"Patrocinado","es-pe":"Patrocinado","es-mx":"Patrocinado","pt-br":"Publicidade","en-ca":"Ad","he-il":"","fr-ch":"Sponsoris","nl-be":"Advertentie","fr-be":"Sponsoris","fr-fr":"Sponsoris","nl-nl":"Advertentie","pt-pt":"Pub","zh-cn":"","ja-jp":"PR","ko-kr":"AD","en-xl":"Ad","es-us":"Patrocinado","fr-ca":"Pub","es-xl":"Patrocinado","cs-cz":"Reklama","da-dk":"Annonce","el-gr":"Ad","fi-fi":"Mainos","hu-hu":"Hird.","nb-no":"Annonse","ru-ru":"","sv-se":"Annons","ar-ae":"","ar-eg":"","ar-sa":"","en-ae":"Ad","en-ie":"Ad","en-za":"Ad","en-in":"Ad","en-sg":"Ad","en-nz":"Ad","zh-hk":"","hi-in":"","mr-in":"","te-in":"","bn-in":"","id-id":"Ad","th-th":"Ad","vi-vn":"Ad","es-ve":"Patrocinado","fr-xl":"Sponsoris","en-my":"Ad","en-ph":"Ad","zh-tw":""},p=["ja-jp","ko-kr","zh-cn"],g={MyFeedPivotId:"oneriver.myfeed",StripeMyFeedPivotId:"stripe.myfeed",EditInterestPivotId:"oneriver.editinterests"};var h;!function(e){e[e.AdBuffering=1]="AdBuffering",e[e.ContentBuffering=2]="ContentBuffering",e[e.AdError=10]="AdError",e[e.AdPlayStarted=11]="AdPlayStarted",e[e.AdPlayCompleted=13]="AdPlayCompleted",e[e.AdSkipped=15]="AdSkipped",e[e.AdTimeout=16]="AdTimeout",e[e.AdPause=17]="AdPause",e[e.AdResume=18]="AdResume",e[e.ContentError=20]="ContentError",e[e.ContentStart=21]="ContentStart",e[e.ContentContinue=22]="ContentContinue",e[e.ContentComplete=23]="ContentComplete",e[e.CC=30]="CC",e[e.Pause=31]="Pause",e[e.Seek=32]="Seek",e[e.Mute=33]="Mute",e[e.FullScreenEnter=34]="FullScreenEnter",e[e.Info=35]="Info",e[e.VideoQuality=36]="VideoQuality",e[e.Resume=37]="Resume",e[e.FullScreenExit=38]="FullScreenExit",e[e.Replay=39]="Replay",e[e.Unmute=40]="Unmute",e[e.ContentImpression3PP=41]="ContentImpression3PP",e[e.Facebook=51]="Facebook",e[e.Twitter=52]="Twitter",e[e.Email=53]="Email",e[e.CommonPlayerImpression=61]="CommonPlayerImpression",e[e.EndslateVideos=64]="EndslateVideos",e[e.EndslateContinuous=65]="EndslateContinuous",e[e.EndslateCancelCountdown=66]="EndslateCancelCountdown",e[e.EndslateShown=67]="EndslateShown",e[e.PlayerStarting=90]="PlayerStarting",e[e.AdLoading=91]="AdLoading",e[e.AdLoaded=92]="AdLoaded",e[e.VideoLoading=93]="VideoLoading",e[e.ContentOpen=101]="ContentOpen",e[e.Content25Percent=102]="Content25Percent",e[e.Content50Percent=103]="Content50Percent",e[e.Content75Percent=104]="Content75Percent",e[e.Canplay=105]="Canplay",e[e.Canplaythrough=106]="Canplaythrough"}(h||(h={}));const m=["en-it","de-at","fr-be","nl-be","cs-cz","da-dk","fi-fi","fr-fr","de-de","el-gr","hu-hu","it-it","nl-nl","no-no","pl-pl","pt-pt","es-es","sv-se","de-ch","de-fr","en-gb"],f=["cs-cz","da-dk","de-at","de-ch","de-de","en-gb","el-gr","fi-fi","fr-be","fr-ch","fr-fr","hu-hu","it-it","nb-no","nl-be","nl-nl","pl-pl","pt-br","pt-pt","ru-ru","sv-se","tr-tr","zh-cn"],v=["en-us","es-us"],y=["en-au","en-nz"]},29666:function(e,t,i){"use strict";i.d(t,{SI:function(){return o},di:function(){return r},hb:function(){return n},j3:function(){return a}});const n={_lowerBound:"invalid",_1by191:"1x1.91",_9by16:"9x16",_3by4:"3x4",_1by1:"1x1",_4by3:"4x3",_16by9:"16x9",_191by1:"1.91x1"};var r,o,s;!function(e){e.Adult="adult",e.Enterprise="enterprise"}(r||(r={})),function(e){e.AdFeedV2="feedv2-template",e.Default="msft-content-card",e.PatternOverlay="msn-pattern-overlay-card",e.PseudoVideo="msn-pseudo-video-card",e.Slideshow="msn-slideshow-card",e.ZIndex="msn-z-index-card",e.AdCarousel="msn-ad-carousel",e.AnimatedImagery="msn-animated-imagery",e.InfopaneHorizontal_1by1="msn-info-pane-horizontal-1-by-1",e.InfopaneHorizontal_3by4="msn-info-pane-horizontal-3-by-4",e.InfopaneHorizontal_4by3="msn-info-pane-horizontal-4-by-3",e.InfopaneHorizontal_9by16="msn-info-pane-horizontal-9-by-16",e.InfopanePatternOverlay_1by1="msn-info-pane-pattern-overlay-1-by-1",e.InfopanePatternOverlay_4by3="msn-info-pane-pattern-overlay-4-by-3",e.InfopaneDoubleCard_19by10="msn-card-19-by-10",e.RiverAnimatedImagery_9by16="msn-river-animated-imagery-9-by-16",e.RiverZIndex_9by16="msn-river-z-index-9-by-16",e.RiverZIndex_3by4="msn-river-z-index-3-by-4",e.HotspotSingle="msn-hotspot-single",e.BrandStory="msn-brand-story",e.CallToAction="msn-ad-cta",e.CallToActionLearnMore="msn-ad-cta-learn-more",e.CallToActionDarkMode="msn-ad-cta-learn-more-dark-mode",e.CallToActionIcon="msn-ad-cta-icon",e.CallToActionShortTitle="msn-ad-cta-short-title",e.CallToActionMaskMode="msn-ad-cta-mask-mode",e.ContentReveal="msn-content-reveal",e.DiscountScribble="msn-discount-scribble",e.BrandStoryNoDeco="msn-brand-story-no-deco",e.BrandStoryNoProgressiveDisplay="msn-brand-story-no-progressive-display",e.Gamification="msn-gamification",e.HighlightRating="msn-highlight-rating-card",e.DecorationDynamic="msn-decoration-dynamic",e.TitleMaxLine2="msn-title-max-line-2",e.TitleMaxLine2C="msn-title-max-line-2-c",e.InfopaneDynamicRendering="msn-info-pane-dynamic-rendering",e.Logo="msn-native-ad-logo",e.LogoWithBorderRadius="msn-native-ad-logo-radius",e.ShortTitle="msn-native-ad-short-title",e.Spotlight="msn-spotlight-image",e.Disclaimer="msn-ad-disclaimer",e.ZIndexV2Original="msn-ad-zindex-v2-original",e.ZIndexV2Polygon="msn-ad-zindex-v2-polygon",e.AdSlugV3="msn-ad-slug-v3",e.AdSlugV4="msn-ad-slug-v4",e.DrPerf="msn-ad-dr-perf",e.Video="msn-video",e.VideoIAS="msn-video-ias",e.Amplify="msn-amplify",e.SpecialOfferNonDR="msn-special-offer-nondr",e.SpecialOfferNonDRWithExp="msn-special-offer-nondr-with-exp",e.RatingHighlightRedNonDR="msn-highlight-rating-nondr-red",e.RatingHighlightYellowNonDR="msn-highlight-rating-nondr-yellow",e.RatingHighlightYellowNonDRStatic="msn-highlight-rating-nondr-yellow-static",e.RatingDefaultYellowNonDRStatic="msn-default-rating-nondr-yellow-static",e.FreeShippingPlainTextNonDR="msn-freeshipping-plain-text-nondr",e.FreeShippingInlineNonDR="msn-freeshipping-inline-nondr",e.FreeShippingTopLeftNonDR="msn-freeshipping-top-left-nondr",e.FreeShippingTopRightNonDR="msn-freeshipping-top-right-nondr",e.FreeShippingDR="msn-freeshipping-dr",e.ConditionNonDR="msn-condition-nondr",e.ConditionNonDRControl="msn-condition-nondr-c",e.ReturnPolicyNonDR="msn-return-policy-nondr",e.ReturnPolicyNonDRControl="msn-return-policy-nondr-c",e.SoldNonDR="msn-sold-nondr",e.SoldNonDRControl="msn-sold-nondr-c",e.EliteBadge="msn-elite-badge",e.RatingDR="msn-rating-dr",e.Trending="msn-trending",e.LikeButton="msn-like-button",e.SaleHighlightV1="msn-sale-highlight-v1",e.SaleHighlightV1Control="msn-sale-highlight-v1-c",e.SaleHighlightV3="msn-sale-highlight-v3",e.SaleHighlightV4="msn-sale-highlight-v4",e.SaleHighlightV3V4Control="msn-sale-highlight-v3v4-c",e.ShortTitleControl="msn-short-title-c",e.SpecialOfferControl="msn-special-offer-c",e.LogoControl="msn-logo-c",e.FreeShippingControl="msn-freeshipping-c",e.ZIndexControl="msn-z-index-c",e.RatingControl="msn-rating-c",e.TrendingControl="msn-trending-c",e.CallToActionControl="msn-cta-c",e.HoverEffectControl="msn-hover-effect-c",e.HoverEffect="msn-hover-effect",e.ComboRating="msn-combo-rating",e.ComboFreeShipping="msn-combo-freeshipping",e.ComboSpecialOffer="msn-combo-special-offer",e.ComboRatingNonDR="msn-combo-rating-nondr",e.ComboFreeShippingNonDR="msn-combo-freeshipping-nondr",e.ComboSpecialOfferNonDR="msn-combo-special-offer-nondr",e.ComboSaleHighlightNonDR="msn-combo-sale-highlight-nondr",e.ComboRatingNonDRControl="msn-combo-rating-nondr-c",e.ComboFreeShippingNonDRControl="msn-combo-freeshipping-nondr-c",e.ComboSpecialOfferNonDRControl="msn-combo-special-offer-nondr-c",e.ComboSaleHighlightNonDRControl="msn-combo-sale-highlight-nondr-c",e.CallToActionV2="msn-call-to-action-v2",e.CallToActionV3="msn-call-to-action-v3",e.CallToActionV3PA="msn-call-to-action-v3-pa",e.PESeasonalAds="msn-pe-seasonal",e.PESeasonalAdsV1="msn-pe-seasonal-v1",e.PESeasonalAdsV1P="msn-pe-seasonal-v1p",e.PESeasonalAdsControl="msn-pe-seasonal-control",e.ComboSoldNonDR="msn-combo-sold-nondr",e.ComboReturnPolicyNonDR="msn-combo-return-policy-nondr",e.ComboConditionNonDR="msn-combo-condition-nondr",e.ComboSoldNonDRControl="msn-combo-sold-nondr-c",e.ComboReturnPolicyNonDRControl="msn-combo-return-policy-nondr-c",e.ComboConditionNonDRControl="msn-combo-condition-nondr-c",e.ResponsiveImageSizing="msn-responsive-image-sizing",e.ResponsiveDescription="msn-responsive-description",e.GeometricAdWaves1="msn-geometric-ad-waves-1",e.GeometricAdWaves3="msn-geometric-ad-waves-3",e.GeometricAdWaves4="msn-geometric-ad-waves-4",e.GeometricAdNature3="msn-geometric-ad-nature-3",e.GeometricAdSparkles1="msn-geometric-ad-sparkles-1",e.GeometricAdSparkles2="msn-geometric-ad-sparkles-2",e.GeometricAdSparkles3="msn-geometric-ad-sparkles-3",e.GeometricAdSparkles4="msn-geometric-ad-sparkles-4",e.GeometricAdSparkles5="msn-geometric-ad-sparkles-5",e.GPTTitle="msn-native-ad-gpt-title",e.AlignmentRF="msn-native-ad-align-rf"}(o||(o={})),function(e){e.ScaleUp="scale-up",e.ScaleDown="scale-down",e.ScaleUpDown="scale-up-down"}(s||(s={}));const a={templateType:o.Default,animatedImage:"",landscapeOverlay:!1,allowedAssets:null,nativeAdMode:r.Adult,adCarousel:!1,progressiveDisplay:!1,discountThreshold:1,imageSizeConfig:{infopane:{w:604,h:296},river:{w:300,h:174}},badgeStyle:"blendedIn",useClickInGamify:!0,configType:void 0}},88875:function(e,t,i){"use strict";i.d(t,{XY:function(){return r},aT:function(){return n},fs:function(){return s},xs:function(){return o}});const n={rating:"data-3",likes:"data-4",price:"data-6",salePrice:"data-7",installmentPrice:"data-500",priceDrop:"data-501",freeShipping:"data-502",viewed:"data-503",sold:"data-504",specialOffer:"data-505",eliteBadge:"data-506",condition:"data-507",localInventory:"data-508",curbsidePickup:"data-509",review:"data-510",shortTitle:"data-511",returnPolicy:"data-512",disclaimer:"data-513",discount:"data-600",logo:"image-1",transparentImage:"image-500"},r={font:"p1",shipping:"p2",ratings:"p3"},o=["specialOffer"],s=[n.disclaimer]},83097:function(e,t,i){"use strict";var n,r;i.d(t,{IR:function(){return r}}),function(e){e.Anon="ANON",e.AppAnon="APP_ANON",e.Unknown=""}(n||(n={})),function(e){e.AnonCookieExists="ace",e.AppAnonCookieExists="aace"}(r||(r={}))},53076:function(e,t,i){"use strict";var n;i.d(t,{z:function(){return n}}),function(e){e.AdminPortalData="AdminPortalData",e.AdService="AdService",e.AdsManager="AdsManager",e.BackgroundData="BackgroundData",e.BingAdsManager="BingAdsManager",e.BingAdsService="BingAdsService",e.BingImageData="BingImageData",e.CasualGamesData="CasualGamesData",e.CategoryData="CategoryData",e.ChannelData="ChannelData",e.ChromiumPageSettings="ChromiumPageSettings",e.CoachmarkData="CoachmarkData",e.ConditionalBannerData="ConditionalBannerData",e.DailyBriefServiceClient="DailyBriefServiceClient",e.DisplayAdsManager="DisplayAdsManager",e.Esports="Esports",e.ExperienceLoadedData="ExperienceLoadedData",e.ExperienceLoadedDataConnector="ExperienceLoadedDataConnector",e.ExperienceTrackerCasualGamesLandingData="ExperienceTrackerCasualGamesLandingData",e.ExperienceTrackerChannelData="ExperienceTrackerChannelData",e.ExperienceTrackerCommunityData="ExperienceTrackerCommunityData",e.ExperienceTrackerContentToolsData="ExperienceTrackerContentToolsData",e.ExperienceTrackerData="ExperienceTrackerData",e.ExperienceTrackerEdgeData="ExperienceTrackerEdgeData",e.ExperienceTrackerEdgeNextData="ExperienceTrackerEdgeNextData",e.ExperienceTrackerFinanceData="ExperienceTrackerFinanceData",e.ExperienceTrackerFirstPartyData="ExperienceTrackerFirstPartyData",e.ExperienceTrackerGamingFeedData="ExperienceTrackerGamingFeedData",e.ExperienceTrackerHomePageData="ExperienceTrackerHomePageData",e.ExperienceTrackerHubData="ExperienceTrackerHubData",e.ExperienceTrackerMicrosoftNewsData="ExperienceTrackerMicrosoftNewsData",e.ExperienceTrackerMMXData="ExperienceTrackerMMXData",e.ExperienceTrackerPrismData="ExperienceTrackerPrismData",e.ExperienceTrackerQnaData="ExperienceTrackerQnaData",e.ExperienceTrackerRecipesData="ExperienceTrackerRecipesData",e.ExperienceTrackerWidgets="ExperienceTrackerWidgets",e.ExperienceTrackerShoppingData="ExperienceTrackerShoppingData",e.ExperienceTrackerSportsData="ExperienceTrackerSportsData",e.ExperienceTrackerSuperAppData="ExperienceTrackerSuperAppData",e.ExperienceTrackerTrafficData="ExperienceTrackerTrafficData",e.ExperienceTrackerTravelData="ExperienceTrackerTravelData",e.ExperienceTrackerHealthData="ExperienceTrackerHealthData",e.ExperienceTrackerUgcData="ExperienceTrackerUgcData",e.ExperienceTrackerViewsData="ExperienceTrackerViewsData",e.ExperienceTrackerWeatherData="ExperienceTrackerWeatherData",e.ExperienceTrackerWeatherDataConnector="ExperienceTrackerWeatherDataConnector",e.ExperienceTrackerWindowsNewsAndInterestsData="ExperienceTrackerWindowsNewsAndInterestsData",e.ExperienceTrackerWindowsData="ExperienceTrackerWindowsData",e.ExperienceTrackerSuperWindowsData="ExperienceTrackerSuperWindowsData",e.ExperienceTrackerWindowsShellData="ExperienceTrackerWindowsShellData",e.ExperienceTrackerWindowsShellV2Data="ExperienceTrackerWindowsShellV2Data",e.ExperienceTrackerWindowsWidgetsData="ExperienceTrackerWindowsWidgetsData",e.FeedbackData="FeedbackData",e.HubPageSettings="HubPageSettings",e.IrisData="IrisData",e.LanguageMismatchData="LanguageMismatchData",e.LayoutPreferenceData="LayoutPreferenceData",e.LocationFeed="LocationFeed",e.MarketSelector="MarketSelector",e.MilestoneData="MilestoneData",e.MsccCookieBannerData="MsccCookieBannerData",e.MsNewsPageSettings="MsNewsPageSettings",e.NavigationData="NavigationData",e.NurturingPlacementManager="NurturingPlacementManager",e.OfficeSharedData="OfficeSharedData",e.OneTrustCookieConsentData="OneTrustCookieConsentData",e.PageClickTrackerData="PageClickTrackerData",e.PageLayout="PageLayout",e.PageSettingsData="PageSettingsData",e.PlacementManager="PlacementManager",e.PollsService="PollsService",e.PoweredByData="PoweredByData",e.Preload="Preload",e.QnaFeedService="QnaFeedService",e.RewardsData="RewardsData",e.RewardsCoachmarkData="RewardsCoachmarkData",e.SearchHistoryEdgenextData="SearchHistoryEdgenextData",e.SharedState="SharedState",e.SignInData="SignInData",e.SocialPostData="SocialPostData",e.SportsAroundTheLeagueData="SportsAroundTheLeagueData",e.SportsData="SportsData",e.SportsDataUtils="SportsDataUtils",e.SportsGameSummaryData="SportsGameSummaryData",e.SportsInfoSharedState="SportsInfoSharedState",e.SportsOlympicData="SportsOlympicData",e.SportsPersonalizationData="SportsPersonalizationData",e.SportsPreviousMatchupsData="SportsPreviousMatchupsData",e.SportsWorldCupData="SportsWorldCupData",e.SuperComponentData="SuperComponentData",e.Telemetry="Telemetry",e.ShellNewTabData="ShellNewTabData",e.SmartListSharedData="SmartListSharedData",e.TelemetryData="TelemetryData",e.TelemetryDataEdgeChromium="TelemetryDataEdgeChromium",e.TelemetryEdgeChromium="TelemetryEdgeChromium",e.TopicData="TopicData",e.TopSitesLayoutData="TopSitesLayoutData",e.TravelData="TravelData",e.VerticalPropertyData="VerticalPropertyData",e.VideoDataManager="VideoDataManager",e.ViewsNativeAd="ViewsNativeAdConnector",e.ViewsFullPage="ViewsFullPage",e.WeatherActivityWatchlistData="WeatherActivityWatchlistData",e.WeatherData="WeatherData",e.WeatherCardData="WeatherCardData",e.WeatherFeedbackData="WeatherFeedbackData",e.WeatherPageMeta="WeatherPageMeta",e.WeatherPersonaData="WeatherPersonaData",e.WeatherMapData="WeatherMapData",e.FinanceData="FinanceData",e.MoneyInfoSharedState="MoneyInfoSharedState",e.SocialData="SocialData",e.WindowsNewsAndInterestsData="WindowsNewsAndInterestsData",e.WindowsShellData="WindowsShellData",e.WindowsPageSettings="WindowsPageSettings",e.HyperLocalPromotionCardClosedKey="weather-map-hyper-local-promotion-card-closed"}(n||(n={}))},8371:function(e,t,i){"use strict";var n;i.d(t,{g:function(){return n}}),function(e){e.backgroundThemeColorChange="backgroundThemeColorChange",e.trackValuesUpdated="trackvaluesupdated",e.desktopFeedFetchFailed="desktopFeedFetchFailed"}(n||(n={}))},83227:function(e,t,i){"use strict";var n;i.d(t,{$:function(){return r},x:function(){return n}}),function(e){e.ShoppingCategoryPage="ShoppingCategoryPage",e.actionTray="ActionTray",e.aiCharacterCard="AiCharacterCard",e.aicharacterLandingPage="AicharacterLandingPage",e.aicharacterPaintPage="AicharacterPaintPage",e.animator="Animator",e.articleCloseButton="ArticleCloseButton",e.articleFre="ArticleFre",e.articlePage="ArticlePage",e.articleRelatedStories="ArticleRelatedStories",e.articleTopComment="ArticleTopComment",e.autosCard="AutosCard",e.autosCarousel="AutosCarousel",e.autosEntityCardWC="AutosEntityCardWC",e.autosEntitySpan="AutosEntitySpan",e.autosMarketplaceCard="AutosMarketplaceCard",e.backToTopButton="BackToTopButton",e.backgroundGallery="BackgroundGallery",e.backgroundGradient="BackgroundGradient",e.backgroundImageCommon="BackgroundImageCommon",e.backgroundImageEdge="BackgroundImageEdge",e.backgroundImageWC="BackgroundImageWC",e.bannerManager="BannerManager",e.baseHeader="BaseHeader",e.bingAnswers="BingAnswers",e.bingCards="BingCardsExperience",e.bingHealthCard="BingHealthCard",e.bingHealthFitnessCard="BingHealthFitnessCard",e.bingHomepageFeed="BingHomepageFeed",e.bingMiniShopping="BingMiniShopping",e.bingShopping="BingShopping",e.bingShoppingLifestyleCard="BingShoppingLifestyleCard",e.bingShoppingMeStripe="BingShoppingMeStripe",e.bingWebSSO="BingWebSSO",e.boostAd="BoostAd",e.boostAdCard="BoostAdCard",e.brandZone="BrandZone",e.breakingNews="BreakingNews",e.breakingNewsWC="BreakingNewsWC",e.calendarCard="CalendarCard",e.cardAction="CardAction",e.cardActionV2="CardActionV2",e.cardActionWC="CardActionWC",e.cashbackCarouselCard="CashbackCarouselCard",e.casualGamesBanner="CasualGamesBanner",e.casualGamesCard="CasualGamesCard",e.casualGamesCarouselCard="CasualGamesCarouselCard",e.casualGamesFeed="CasualGamesFeed",e.casualGamesFrame="CasualGamesFrame",e.casualGamesHub="CasualGamesHub",e.casualGamesLanding="CasualGamesLanding",e.channelEntryPoint="ChannelEntryPoint",e.channelList="ChannelList",e.channelPage="ChannelPage",e.channelsNews="ChannelsNews",e.clarity="Clarity",e.cmsBaseExperience="CmsBaseExperience",e.cmsExperience="CmsExperience",e.coachmark="Coachmark",e.coachmarkWC="CoachmarkWC",e.coldStart="ColdStart",e.coldStartWC="ColdStartWC",e.comboCard="ComboCard",e.comments="Comments",e.commonHeader="CommonHeader",e.commonHeaderWC="CommonHeaderWC",e.commonSearchBoxEdgeNext="CommonSearchBoxEdgeNext",e.commonSettingsEdgeNext="CommonSettingsEdgeNext",e.commuteCard="CommuteCard",e.companyNewsCard="CompanyNewsCard",e.complexContentPreview="ComplexContentPreview",e.conditionalBanner="ConditionalBanner",e.conditionalBannerHpWC="ConditionalBannerHpWC",e.conditionalBannerWC="ConditionalBannerWC",e.consumptionFeed="ConsumptionFeed",e.consumptionPage="ConsumptionPage",e.contentActionsToolbar="ContentActionsToolbar",e.contentCarouselMultiple="ContentCarouselMultiple",e.contentFlexInfoPane="ContentFlexInfoPane",e.contentGroup="ContentGroup",e.contentGroupCard="ContentGroupCard",e.contentNavigationBar="ContentNavigationBar",e.contentPreview="ContentPreview",e.contentPreviewSlide="ContentPreviewSlide",e.contentProvider="ContentProvider",e.contentRelated="ContentRelated",e.contentSharingToolbar="ContentSharingToolbar",e.contentTts="ContentTts",e.contextualFeedback="ContextualFeedback",e.covidChatBot="CovidChatBot",e.cpcMonetizationDashboard="CpcMonetizationDashboard",e.dailyBrief="DailyBrief",e.dailyDiscovery="DailyDiscovery",e.dashboardFallback="DashboardFallback",e.dashboardSettings="DashboardSettings",e.denseCard="DenseCard",e.desktopFeed="DesktopFeed",e.desktopFeedHubWC="DesktopFeedHubWC",e.desktopFeedViewsWC="DesktopFeedViewsWC",e.desktopFeedWC="DesktopFeedWC",e.devTools="DevTools",e.didYouKnowImageWCExperience="DidYouKnowImageWCExperience",e.didYouKnowWCExperience="DidYouKnowWCExperience",e.digestCard="DigestCard",e.displayAds="DisplayAds",e.displayAdsWC="DisplayAdsWC",e.displayAdsWithContentFallback="DisplayAdsWithContentFallback",e.distributionFeed="DistributionFeed",e.distributionHeader="DistributionHeader",e.distributionPage="DistributionPage",e.distributionPivotsNav="DistributionPivotsNav",e.edgeChromiumPageWC="EdgeChromiumPageWC",e.edgeHeader="EdgeHeader",e.edgeNextPage="EdgeNextPage",e.edgePage="EdgePage",e.edgePageSettings="PageSettings",e.edgeShopping="EdgeShopping",e.editorsChoicePromoCard="EditorsChoicePromoCard",e.elections="Elections",e.enterpriseComplianceBanner="EnterpriseComplianceBanner",e.entertainmentCard="EntertainmentCard",e.entryPoint="EntryPoint",e.entryPointEdgeNext="EntryPointEdgeNext",e.entryPointHpMobile="EntryPointHpMobile",e.entryPointHpWC="EntryPointHpWC",e.entryPointMobileHub="EntryPointMobileHub",e.eoabViews="EoabViews",e.eoabViewsAutos="EoabViewsAutos",e.eoabViewsFinance="EoabViewsFinance",e.eoabViewsShopping="EoabViewsShopping",e.eoabViewsTravel="EoabViewsTravel",e.esportsCard="EsportsCard",e.esportsCasualGamesCard="EsportsCasualGamesCard",e.esportsLiveStreamCard="EsportsLiveStreamCard",e.esportsLivestreamCarouselWC="EsportsLivestreamCarouselWC",e.esportsStreamsCard="EsportsStreamsCard",e.eventHubHeroNav="EventHubHeroNav",e.eventHubPage="EventHubPage",e.experiencePreviewCta="ExperiencePreviewCta",e.externalContentPreview="ExternalContentPreview",e.externalNativeAd="ExternalNativeAd",e.familyCard="FamilyCard",e.feedContainer="FeedContainer",e.feedNavigationHp="FeedNavigationHp",e.feedToggle="FeedToggle",e.feedToggleWC="FeedToggleWC",e.feedbackCard="FeedbackCard",e.feedbackDialog="FeedbackDialog",e.feedbackDialogWC="FeedbackDialogWC",e.feedbackLink="FeedbackLink",e.feedbackLinkWC="FeedbackLinkWC",e.financeAnalysisPage="FinanceAnalysisPage",e.financeAskLandingPage="FinanceAskLandingPage",e.financeBingAds="FinanceBingAds",e.financeCardCommon="FinanceCardCommon",e.financeCarousel="FinanceCarousel",e.financeCollectionDetailTable="FinanceCollectionDetailTable",e.financeCollectionPerformanceCard="FinanceCollectionPerformanceCard",e.financeCompanyPage="FinanceCompanyPage",e.financeCompanyProfileCard="FinanceCompanyProfileCard",e.financeCompareAdd="FinanceCompareAdd",e.financeCompareChartView="FinanceCompareChartView",e.financeCompareHeader="FinanceCompareHeader",e.financeComparePage="FinanceComparePage",e.financeCompareTable="FinanceCompareTable",e.financeCompositionTemplate="FinanceCompositionTemplate",e.financeCrashCourseFeed="FinanceCrashCourseFeed",e.financeCrashCourseViewer="FinanceCrashCourseViewer",e.financeCryptoInsights="FinanceCryptoInsights",e.financeCryptoLearnCard="FinanceCryptoLearnCard",e.financeCryptoMarketHighlight="FinanceCryptoMarketHighlight",e.financeCryptoQnA="FinanceCryptoQnA",e.financeCryptoTable="FinanceCryptoTable",e.financeCurrencyConverter="FinanceCurrencyConverter",e.financeDetailComposition="FinanceDetailComposition",e.financeDetailHeader="FinanceDetailHeader",e.financeDetailNavigation="FinanceDetailNavigation",e.financeDetailPageV2="FinanceDetailPageV2",e.financeDetailsCard="FinanceDetailsCard",e.financeDetailsCardV2="FinanceDetailsCardV2",e.financeDianomiAds="FinanceDianomiAds",e.financeDiscoverySection="FinanceDiscoverySection",e.financeEarningChart="FinanceEarningChart",e.financeEarningGameCard="FinanceEarningGameCard",e.financeEarningsCalendarCard="FinanceEarningsCalendarCard",e.financeEarningsCard="FinanceEarningsCard",e.financeEarningsEventCard="FinanceEarningsEventCard",e.financeEarningsForecast="FinanceEarningsForecast",e.financeEarningsReport="FinanceEarningsReport",e.financeEconomicIndicator="FinanceEconomicIndicator",e.financeEtfInvestors="FinanceEtfInvestors",e.financeEtfL3Holdings="FinanceEtfL3Holdings",e.financeEtfProfile="FinanceEtfProfile",e.financeEventBrief="FinanceEventBrief",e.financeEventLandingPage="FinanceEventLandingPage",e.financeEventsCalendarCard="FinanceEventsCalendarCard",e.financeEventsComposition="FinanceEventsComposition",e.financeEventsTimeline="FinanceEventsTimeline",e.financeExploreCenter="FinanceExploreCenter",e.financeFeeds="FinanceFeeds",e.financeFeedsSection="FinanceFeedsSection",e.financeFinancialsCard="FinanceFinancialsCard",e.financeFinancialsChartCard="FinanceFinancialsChartCard",e.financeFinancialsKeyratiosComposition="FinanceFinancialsKeyratiosComposition",e.financeFinancialsLineChart="FinanceFinancialsLineChart",e.financeFollowButton="FinanceFollowButton",e.financeFundCard="FinanceFundCard",e.financeFundCardWrapper="FinanceFundCardWrapper",e.financeGamificationCard="FinanceGamificationCard",e.financeGradeChart="FinanceGradeChart",e.financeIndicesCard="FinanceIndicesCard",e.financeInsiderTrades="FinanceInsiderTrades",e.financeInsights="FinanceInsights",e.financeInvestorBioCard="FinanceInvestorBioCard",e.financeInvestorDetailPage="FinanceInvestorDetailPage",e.financeInvestorHoldingsHighlight="FinanceInvestorHoldingsHighlight",e.financeInvestorHoldingsTable="FinanceInvestorHoldingsTable",e.financeInvestorNavigationRail="FinanceInvestorNavigationRail",e.financeInvestorPerformanceCard="FinanceInvestorPerformanceCard",e.financeInvestorPerformanceGraph="FinanceInvestorPerformanceGraph",e.financeInvestorPortfolioSectors="FinanceInvestorPortfolioSectors",e.financeInvestorProfileHeader="FinanceInvestorProfileHeader",e.financeKeyFactsCard="FinanceKeyFactsCard",e.financeL1TopStories="FinanceL1TopStories",e.financeL3FinancialsNavigation="FinanceL3FinancialsNavigation",e.financeL3HistoryTab="FinanceL3HistoryTab",e.financeL3OptionsPage="FinanceL3OptionsPage",e.financeL3OwnershipBasic="FinanceL3OwnershipBasic",e.financeL3OwnershipEventsList="FinanceL3OwnershipEventsList",e.financeL3OwnershipGraph="FinanceL3OwnershipGraph",e.financeL3OwnershipHoldersTable="FinanceL3OwnershipHoldersTable",e.financeL3PageComposition="FinanceL3PageComposition",e.financeL3RelatedPage="FinanceL3RelatedPage",e.financeL4IncomeStatementTable="FinanceL4IncomeStatementTable",e.financeL4KeyRatiosTable="FinanceL4KeyRatiosTable",e.financeL4PageComposition="FinanceL4PageComposition",e.financeLandingPageV2="FinanceLandingPageV2",e.financeLearnPage="FinanceLearnPage",e.financeListDetailHeader="FinanceListDetailHeader",e.financeListDetailPage="FinanceListDetailPage",e.financeListLandingPage="FinanceListLandingPage",e.financeMarketCard="FinanceMarketCard",e.financeMarketDescription="FinanceMarketDescription",e.financeMarketMoversCard="FinanceMarketMoversCard",e.financeMarketStatus="FinanceMarketStatus",e.financeMarketSummaryTrend="FinanceMarketSummaryTrend",e.financeMarketsPageComposition="FinanceMarketsPageComposition",e.financeMergeWatchlist="FinanceMergeWatchlist",e.financeMiddleLayer="FinanceMiddleLayer",e.financeNewInvestorQuickStarter="FinanceNewInvestorQuickStarter",e.financeNewsCard="FinanceNewsCard",e.financeNewsContent="FinanceNewsContent",e.financeNewsLandingpage="FinanceNewsLandingpage",e.financeNotificationBar="FinanceNotificationBar",e.financePerfRankCard="FinancePerfRankCard",e.financePortfolioList="FinancePortfolioList",e.financePwaTip="FinancePwaTip",e.financeRecentlyViewedCard="FinanceRecentlyViewedCard",e.financeRecommendationCard="FinanceRecommendationCard",e.financeRecommendationCardV2="FinanceRecommendationCardV2",e.financeRedLine="FinanceRedLine",e.financeRelatedEarnings="FinanceRelatedEarnings",e.financeReturnCalculator="FinanceReturnCalculator",e.financeScreener="FinanceScreener",e.financeSearchBox="FinanceSearchBox",e.financeSentimentChart="FinanceSentimentChart",e.financeSentimentWizard="FinanceSentimentWizard",e.financeTitleCard="FinanceTitleCard",e.financeTopRated="FinanceTopRated",e.financeTrendCard="FinanceTrendCard",e.financeTrendingRelated="FinanceTrendingRelated",e.financeUserNavigation="FinanceUserNavigation",e.financeVideosFeed="FinanceVideosFeed",e.financeWalkthrough="FinanceWalkthrough",e.financeWatchlistCard="FinanceWatchlistCard",e.financeWatchlistListView="FinanceWatchlistListView",e.financeWatchlistManagement="FinanceWatchlistManagement",e.financeWatchlistMiniView="FinanceWatchlistMiniView",e.financeWatchlistPage="FinanceWatchlistPage",e.financeWatchlistPageV2="FinanceWatchlistPageV2",e.financeWatchlistStart="FinanceWatchlistStart",e.financeWatchlistSuggestion="FinanceWatchlistSuggestion",e.financeWatchlistSummary="FinanceWatchlistSummary",e.firstPartyPage="FirstPartyPage",e.fitnessCard="FitnessCard",e.fitnessSingleVideo="FitnessSingleVideo",e.fitnessSingleVideoHealthapp="FitnessSingleVideoHealthapp",e.flyoutCard="FlyoutCard",e.foodSimilarItems="FoodSimilarItems",e.forumDealsPage="ForumDealsPage",e.freMarketSelector="FreMarketSelector",e.frequentSitesCardWC="FrequentSitesCardWC",e.galleryPage="GalleryPage",e.gameCard="GameCard",e.gamingCompeteCard="GamingCompeteCard",e.gamingDiscoverStrip="GamingDiscoverStrip",e.gamingInterestGroupCard="GamingInterestGroupCard",e.gamingMatchCard="GamingMatchCard",e.gamingMediaCarousel="GamingMediaCarousel",e.gamingPage="GamingPage",e.gamingPersonalizationCard="GamingPersonalizationCard",e.gamingRecentlyPlayedCard="GamingRecentlyPlayedCard",e.gamingRecommendedCard="GamingRecommendedCard",e.gamingRedditCard="GamingRedditCard",e.gamingRewardsCard="GamingRewardsCard",e.gamingStreamCard="GamingStreamCard",e.gamingTournamentCard="GamingTournamentCard",e.gamingUpcomingCard="GamingUpcomingCard",e.gamingVideoCard="GamingVideoCard",e.generalElections="GeneralElections",e.gmailEmailPreview="GmailEmailPreview",e.goBig="GoBig",e.gridViewFeed="GridViewFeed",e.groceryCouponSdCard="GroceryCouponSdCard",e.headerMenuWindowsShell="HeaderMenuWindowsShell",e.headerNavigationLogo="HeaderNavigationLogo",e.headerWindowsShellV2="HeaderWindowsShellV2",e.headerWindowsShellWC="HeaderWindowsShellWC",e.healthDietPlanScheduleWC="HealthDietPlanScheduleWC",e.healthDietPlansPage="HealthDietPlansPage",e.healthExpertCommunity="HealthExpertCommunity",e.healthFeedbackWC="HealthFeedbackWC",e.healthFitnessCarousel="HealthFitnessCarousel",e.healthFitnessChallengePage="HealthFitnessChallengePage",e.healthFoodAtoz="HealthFoodAtoz",e.healthFoodHealtheffectsWC="HealthFoodHealtheffectsWC",e.healthFoodRecipesWC="HealthFoodRecipesWC",e.healthHub="HealthHub",e.healthHubAskProfessionals="HealthHubAskProfessionals",e.healthHubCondition="HealthHubCondition",e.healthHubDiagnostics="HealthHubDiagnostics",e.healthHubDrugs="HealthHubDrugs",e.healthHubHealthapp="HealthHubHealthapp",e.healthHubHealthappShell="HealthHubHealthappShell",e.healthHubPage="HealthHubPage",e.healthHubProcedures="HealthHubProcedures",e.healthHubSymptoms="HealthHubSymptoms",e.healthInterestsManager="HealthInterestsManager",e.healthInterestsManagerShell="HealthInterestsManagerShell",e.healthQnAWCExperience="HealthQnAWCExperience",e.healthTipReact="HealthTipReact",e.healthTipWC="HealthTipWC",e.healthTopSpan="HealthTopSpan",e.healthTranslationWC="HealthTranslationWC",e.healthWidget="HealthWidget",e.hiddenContent="HiddenContent",e.holidayEffects="HolidayEffects",e.homePage="HomePage",e.homepageFooter="HomepageFooter",e.homepageHeader="HomepageHeader",e.horoscopeAnswerCard="HoroscopeAnswerCard",e.horoscopeAnswerCardWC="HoroscopeAnswerCardWC",e.horoscopeCard="HoroscopeCard",e.hotListCard="HotListCard",e.iframe="IFrame",e.imageSearch="ImageSearch",e.imageSearchWC="ImageSearchWC",e.immersiveFullscreen="ImmersiveFullscreen",e.industryNewsCard="IndustryNewsCard",e.infopane="Infopane",e.inspirationCard="InspirationCard",e.interestFreCard="InterestFreCard",e.interestManagementCard="InterestManagementCard",e.interests="Interests",e.interestsLeftRail="InterestsLeftRail",e.interestsManager="InterestsManager",e.interestsSearch="InterestsSearch",e.interestsV1Wrapper="InterestsV1Wrapper",e.interestsV2="InterestsV2",e.interestsV3="InterestsV3",e.interestsWC="InterestsWC",e.languageMismatchBanner="LanguageMismatchBanner",e.languageToggle="LanguageToggle",e.languageToggleWC="LanguageToggleWC",e.layoutSwitcher="LayoutSwitcher",e.legacySharingToolbar="LegacySharingToolbar",e.linkedInCard="LinkedInCard",e.linkedInNewsCard="LinkedInNewsCard",e.localGuideCard="LocalGuideCard",e.localHubHeader="LocalHubHeader",e.localNews="LocalNews",e.localNewsViewCard="LocalNewsViewCard",e.localizeStringsTempExperience="LocalizeStringsTempExperience",e.locationContentCard="LocationContentCard",e.locationEditorDialog="LocationEditorDialog",e.locationMarker="LocationMarker",e.locationSelector="LocationSelector",e.locationTime="LocationTime",e.lottery="Lottery",e.mailSignoutBanner="MailSignoutBanner",e.mangaCard="MangaCard",e.mangaHub="MangaHub",e.mangaPage="MangaPage",e.mangaSlideShow="MangaSlideShow",e.marketAggregator="MarketAggregator",e.marketLanguageToggleWC="MarketLanguageToggleWC",e.marketSelector="MarketSelector",e.marketplaceCardWC="MarketplaceCardWC",e.meControl="MeControl",e.meControlWC="MeControlWC",e.meStripe="MeStripe",e.meStripeWC="MeStripeWC",e.mediaServices="MediaServices",e.meetNow="MeetNow",e.microsoftEdgeWidget="MicrosoftEdgeWidget",e.microsoftFeedCard="MicrosoftFeedCard",e.microsoftLogo="MicrosoftLogo",e.microsoftNewsPage="MicrosoftNewsPage",e.migrationConsent="MigrationConsent",e.miniHeader="MiniHeader",e.mmxPage="MMXPage",e.mns="Mns",e.mnsCreatorDashboard="MnsCreatorDashboard",e.mobileAppUpsell="MobileAppUpsell",e.mobileChannelSlider="MobileChannelSlider",e.mobileFeed="MobileFeed",e.mobileFeedHub="MobileFeedHub",e.mobileFeedWC="MobileFeedWC",e.mobileFooter="MobileFooter",e.mobileHeader="MobileHeader",e.mobileMarketSelector="MobileMarketSelector",e.mobileNotification="MobileNotification",e.mobileRewardsCard="MobileRewardsCard",e.mobileShoppingCard="MobileShoppingCard",e.mobileStoryViewer="MobileStoryViewer",e.mobileTip="MobileTip",e.mobileWidget="MobileWidget",e.modernRightRail="ModernRightRail",e.modernRightRailWC="ModernRightRailWC",e.moneyCard="MoneyCard",e.moneyInfo="MoneyInfo",e.moneyInfoCard="MoneyInfoCard",e.moneyInfoCardWC="MoneyInfoCardWC",e.moneyInfoSpan="MoneyInfoSpan",e.msRewards="MsRewards",e.msRewardsWC="MsRewardsWC",e.msaAddressForm="MsaAddressForm",e.msnSettingMenu="MsnSettingMenu",e.myBriefRiverCard="MyBriefRiverCard",e.nativeAd="NativeAd",e.nativeAdWC="NativeAdWC",e.navigationPageExperience="NavigationPageExperience",e.newsFlipperCard="NewsFlipperCard",e.newsGroupsCard="NewsGroupsCard",e.newsGuard="NewsGuard",e.newsHeadlineAutoSuggestion="NewsHeadlineAutoSuggestion",e.newsHeadlineBelowSearchbox="NewsHeadlineBelowSearchbox",e.newsSegmentCarousel="NewsSegmentCarousel",e.newsbarFeedFooter="NewsbarFeedFooter",e.newsbarFeedWC="NewsbarFeedWC",e.newsbarUpsell="NewsbarUpsell",e.newsbarUpsellWC="NewsbarUpsellWC",e.newsletterSignup="NewsletterSignup",e.newsletterSignupPage="NewsletterSignupPage",e.nextdoorCard="NextdoorCard",e.nextdoorPage="NextdoorPage",e.notificationBell="NotificationBell",e.notificationBellWC="NotificationBellWC",e.nudgeSpotlightCard="NudgeSpotlightCard",e.office="Office",e.officeCoachmark="OfficeCoachmark",e.officeDocumentsTableWC="OfficeDocumentsTableWC",e.officeLeftRail="OfficeLeftRail",e.onThisDayCard="OnThisDayCard",e.onThisDayCardSmall="OnThisDayCardSmall",e.onThisDayCardWC="OnThisDayCardWC",e.oneFooter="OneFooter",e.overlay="Overlay",e.overlayWC="OverlayWC",e.pageRefresh="PageRefresh",e.pageRefreshWC="PageRefreshWC",e.partnerUpsellCard="PartnerUpsellCard",e.partnerWidget="PartnerWidget",e.personalFinanceExpenseDistribution="PersonalFinanceExpenseDistribution",e.personalFinanceTransactionsCard="PersonalFinanceTransactionsCard",e.personalizeNavButton="PersonalizeNavButton",e.photoCard="PhotoCard",e.pillWC="PillWC",e.pivotContent="PivotContent",e.pivotContentV2="PivotContentV2",e.pivotsMobileWC="PivotsMobileWC",e.pivotsNav="PivotsNav",e.pollsCard="PollsCard",e.pollsCardWC="PollsCardWC",e.portugueseElectionExperience="PortugueseElectionExperience",e.poweredByLegend="PoweredbyLegend",e.poweredByLegendWC="PoweredbyLegendWC",e.prayerTimesCard="PrayerTimesCard",e.preconsumptionArticleCardWC="PreconsumptionArticleCardWC",e.premiumProfilePromoCard="PremiumProfilePromoCard",e.prideEventCard="PrideEventCard",e.prismCards="PrismCards",e.prismCarouselCard="PrismCarouselCard",e.prismFeed="PrismFeed",e.prismSdCard="PrismSdCard",e.proactiveCanvas="ProactiveCanvas",e.productivityHub="ProductivityHub",e.profilePromoCard="ProfilePromoCard",e.promoBanner="PromoBanner",e.promoBannerWC="PromoBannerWC",e.publisherCarousel="PublisherCarousel",e.publisherList="PublisherList",e.publisherSubscribeFollowButton="PublisherSubscribeFollowButton",e.publishersManagement="PublishersManagement",e.pullToRefresh="PullToRefresh",e.qna="Qna",e.qnaFeed404Page="QnaFeed404Page",e.qnaFeedCard="QnaFeedCard",e.qnaFeedCardMenu="QnaFeedCardMenu",e.qnaFeedCarousel="QnaFeedCarousel",e.qnaFeedCategoriesMenu="QnaFeedCategoriesMenu",e.qnaFeedExploreTopics="QnaFeedExploreTopics",e.qnaFeedList="QnaFeedList",e.qnaFeedMyTopics="QnaFeedMyTopics",e.qnaFeedPage="QnaFeedPage",e.qnaFeedRelatedQuestions="QnaFeedRelatedQuestions",e.qnaFeedReportCard="QnaFeedReportCard",e.qnaFeedSuggestedTopics="QnaFeedSuggestedTopics",e.qnaFeedTopicDetail="QnaFeedTopicDetail",e.qnaFeedTrendingQuestions="QnaFeedTrendingQuestions",e.quizCard="QuizCard",e.reactionBreakdownDialog="ReactionBreakdownDialog",e.realEstateCard="RealEstateCard",e.recipesCards="RecipesCards",e.recipesFeed="RecipesFeed",e.recipesSdCard="RecipesSdCard",e.recipesSearch="RecipesSearch",e.recipesSingleDetail="RecipesSingleDetail",e.recipesSingleVideo="RecipesSingleVideo",e.recommendedCardFeed="RecommendedCardFeed",e.recommendedCardWC="RecommendedCardWC",e.recommendedInterests="RecommendedInterests",e.recommendedSearch="RecommendedSearch",e.recommendedSearchBelowSearchBox="RecommendedSearchBelowSearchBox",e.recommendedSearchCarousel="RecommendedSearchCarousel",e.recommendedSearchCarouselWC="RecommendedSearchCarouselWC",e.recommendedSearchesCard="RecommendedSearchesCard",e.recommendedSites="RecommendedSites",e.recommendedSitesWC="RecommendedSitesWC",e.recommendedTopics="RecommendedTopics",e.relatedSearchesCard="RelatedSearchesCard",e.rewardsCardWC="RewardsCardWC",e.rewardsDailySetCard="RewardsDailySetCard",e.rightRailCarousel="RightRailCarousel",e.rightRailProviderCarousel="RightRailProviderCarousel",e.river="River",e.riverPlaceholder="RiverPlaceholder",e.scrollDownButton="ScrollDownButton",e.sdCardMaskWC="SdCardMaskWC",e.searchBoxCommon="SearchBoxCommon",e.searchBoxEdge="SearchBoxEdge",e.searchBoxWC="SearchBoxWC",e.searchBoxWindowsShell="SearchBoxWindowsShell",e.searchHistoryCommon="SearchHistoryCommon",e.searchHistoryEdge="SearchHistoryEdge",e.searchHistoryEdgeNextWC="SearchHistoryEdgeNextWC",e.seeMoreButtonWindowsShell="SeeMoreButtonWindowsShell",e.selectCarousel="SelectCarousel",e.settingsDialogMsNews="SettingsDialogMsNews",e.sharedLinks="SharedLinks",e.sharedState="SharedState",e.sharepointNewsCard="SharepointNewsCard",e.shopContentCarousel="ShopContentCarousel",e.shoppingAllStoresPage="ShoppingAllStoresPage",e.shoppingArticlePage="ShoppingArticlePage",e.shoppingBingProductDetails="ShoppingBingProductDetails",e.shoppingBlackjackDealPage="ShoppingBlackjackDealPage",e.shoppingBlackjackPage="ShoppingBlackjackPage",e.shoppingBuyingGuide="ShoppingBuyingGuide",e.shoppingCardWC="ShoppingCardWC",e.shoppingCarousel="ShoppingCarousel",e.shoppingCarouselProngWC="ShoppingCarouselProngWC",e.shoppingCarouselWC="ShoppingCarouselWC",e.shoppingCart="ShoppingCart",e.shoppingCashback="ShoppingCashback",e.shoppingCheckoutModal="ShoppingCheckoutModal",e.shoppingCheckoutPage="ShoppingCheckoutPage",e.shoppingColdStart="ShoppingColdStart",e.shoppingContentCard="ShoppingContentCard",e.shoppingCouponsPage="ShoppingCouponsPage",e.shoppingDealsHomePage="ShoppingDealsHomePage",e.shoppingEdgeInsightsCard="ShoppingEdgeInsightsCard",e.shoppingEntryBaseExperience="ShoppingEntryBaseExperience",e.shoppingEventsDealCard="ShoppingEventsDealCard",e.shoppingFeedCard="ShoppingFeedCard",e.shoppingForumFavorites="ShoppingForumFavorites",e.shoppingForumHome="ShoppingForumHome",e.shoppingForumLandingPage="ShoppingForumLandingPage",e.shoppingForumOrderCancelPage="ShoppingForumOrderCancelPage",e.shoppingForumOrderConfirmation="ShoppingForumOrderConfirmation",e.shoppingForumOrderDetails="ShoppingForumOrderDetails",e.shoppingForumOrdersPage="ShoppingForumOrdersPage",e.shoppingForumProductPage="ShoppingForumProductPage",e.shoppingForumRefundDetailsPage="ShoppingForumRefundDetailsPage",e.shoppingForumRefundOrderPage="ShoppingForumRefundOrderPage",e.shoppingForumReturnDetailsPage="ShoppingForumReturnDetailsPage",e.shoppingForumReturnOrderPage="ShoppingForumReturnOrderPage",e.shoppingForumSellerPage="ShoppingForumSellerPage",e.shoppingGrid="ShoppingGrid",e.shoppingHomepage="ShoppingHomepage",e.shoppingInspiration="ShoppingInspiration",e.shoppingLeaderboard="ShoppingLeaderboard",e.shoppingLiveBasePage="ShoppingLiveBasePage",e.shoppingLiveEmbedPage="ShoppingLiveEmbedPage",e.shoppingLiveFeedPage="ShoppingLiveFeedPage",e.shoppingLiveInmobiDetailsPage="ShoppingLiveInmobiDetailsPage",e.shoppingLiveProductDetailsPage="ShoppingLiveProductDetailsPage",e.shoppingLiveVideoPlayer="ShoppingLiveVideoPlayer",e.shoppingModal="ShoppingModal",e.shoppingModelOverlay="ShoppingModelOverlay",e.shoppingMomentInTimePage="ShoppingMomentInTimePage",e.shoppingMultiTabCarousel="ShoppingMultiTabCarousel",e.shoppingPage="ShoppingPage",e.shoppingPageBase="ShoppingPageBase",e.shoppingPageContent="ShoppingPageContent",e.shoppingProductDetailPage="ShoppingProductDetailPage",e.shoppingProductPage="ShoppingProductPage",e.shoppingSdCard="ShoppingSdCard",e.shoppingSearch="ShoppingSearch",e.shoppingSearchNav="ShoppingSearchNav",e.shoppingSearchResultPage="ShoppingSearchResultPage",e.shoppingShippingAddress="ShoppingShippingAddress",e.shoppingShopTheLookPage="ShoppingShopTheLookPage",e.shoppingSmartList="ShoppingSmartList",e.shoppingSpinWheel="ShoppingSpinWheel",e.shoppingTopSpan="ShoppingTopSpan",e.shoppingVideoShortsCarousel="ShoppingVideoShortsCarousel",e.shoppingViewsCarousel="ShoppingViewsCarousel",e.showFeed="ShowFeed",e.signInControlWC="SignInControlWC",e.signInFlyoutWC="SignInFlyoutWC",e.simpleBanner="SimpleBanner",e.slideShow="SlideShow",e.slideshowWC="SlideshowWC",e.smartList="SmartList",e.social="Social",e.socialAvatar="SocialAvatar",e.socialBar="SocialBar",e.socialBarV2="SocialBarV2",e.socialBarWC="SocialBarWC",e.socialComment="SocialComment",e.socialCommentWC="SocialCommentWC",e.socialGiveSupportButton="SocialGiveSupportButton",e.socialLeadGenInArticle="SocialLeadGenInArticle",e.socialNotification="SocialNotification",e.socialPost="SocialPost",e.socialPostCard="SocialPostCard",e.socialProfile="SocialProfile",e.socialProfileActionMenu="SocialProfileActionMenu",e.socialProfileCard="SocialProfileCard",e.socialProfilePromotion="SocialProfilePromotion",e.socialRelatedSources="SocialRelatedSources",e.socialReportMenu="SocialReportMenu",e.socialRewardsMedal="SocialRewardsMedal",e.socialRewardsPromotion="SocialRewardsPromotion",e.socialShareButton="SocialShareButton",e.socialStarRating="SocialStarRating",e.socialSubscriptionBanner="SocialSubscriptionBanner",e.socialSubscriptionNotification="SocialSubscriptionNotification",e.socialSubscriptionOverlay="SocialSubscriptionOverlay",e.socialSubscriptionOverlaySummary="SocialSubscriptionOverlaySummary",e.socialSubscriptionPaywall="SocialSubscriptionPaywall",e.socialSubscriptionUpsell="SocialSubscriptionUpsell",e.socialSupportResult="SocialSupportResult",e.socialTipHistory="SocialTipHistory",e.socialTipIntroduction="SocialTipIntroduction",e.socialTipPromotion="SocialTipPromotion",e.socialTipPromotionInArticle="SocialTipPromotionInArticle",e.socialTipSelection="SocialTipSelection",e.sportsAroundTheLeague="SportsAroundTheLeague",e.sportsBackgroundUx="SportsBackgroundUx",e.sportsBrackets="SportsBrackets",e.sportsCard="SportsCard",e.sportsCardWC="SportsCardWC",e.sportsCommentary="SportsCommentary",e.sportsCountdownTimer="SportsCountdownTimer",e.sportsCricketLayoutManager="SportsCricketLayoutManager",e.sportsCricketLeagueStats="SportsCricketLeagueStats",e.sportsCricketMatchRow="SportsCricketMatchRow",e.sportsCricketPartnerships="SportsCricketPartnerships",e.sportsCricketRankings="SportsCricketRankings",e.sportsCricketScorecard="SportsCricketScorecard",e.sportsCricketScoresAndSchedule="SportsCricketScoresAndSchedule",e.sportsEntityHeader="SportsEntityHeader",e.sportsFeaturedMatchesCard="SportsFeaturedMatchesCard",e.sportsFullStandings="SportsFullStandings",e.sportsGameSummary="SportsGameSummary",e.sportsGameSummaryFull="SportsGameSummaryFull",e.sportsGameTimeline="SportsGameTimeline",e.sportsGcPlayerStats="SportsGcPlayerStats",e.sportsGcTeamStats="SportsGcTeamStats",e.sportsInfo="SportsInfo",e.sportsInfoSpan="SportsInfoSpan",e.sportsLayoutRenderer="SportsLayoutRenderer",e.sportsMatchRow="SportsMatchRow",e.sportsMatchupCard="SportsMatchupCard",e.sportsOlympicCard="SportsOlympicCard",e.sportsOlympicCardWC="SportsOlympicCardWC",e.sportsPage="SportsPage",e.sportsPageContent="SportsPageContent",e.sportsPersonMatchRow="SportsPersonMatchRow",e.sportsPersonalizationStrip="SportsPersonalizationStrip",e.sportsPlayerInsights="SportsPlayerInsights",e.sportsPreviousMatchups="SportsPreviousMatchups",e.sportsRankingsFull="SportsRankingsFull",e.sportsScoresAndSchedule="SportsScoresAndSchedule",e.sportsScoresAndScheduleFull="SportsScoresAndScheduleFull",e.sportsSquad="SportsSquad",e.sportsStandings="SportsStandings",e.sportsStandingsList="SportsStandingsList",e.sportsStats="SportsStats",e.sportsTabLayout="SportsTabLayout",e.sportsTeamFormation="SportsTeamFormation",e.sportsTeamProbability="SportsTeamProbability",e.sportsTennisScoresAndScheduleFull="SportsTennisScoresAndScheduleFull",e.sportsTennisTournamentInfo="SportsTennisTournamentInfo",e.sportsTournamentInfo="SportsTournamentInfo",e.sportsTournamentLeaderboard="SportsTournamentLeaderboard",e.sportsTournamentMatchRow="SportsTournamentMatchRow",e.sportsTournamentResultsAndSchedule="SportsTournamentResultsAndSchedule",e.sportsTournamentSchedule="SportsTournamentSchedule",e.sportsTournamentStandings="SportsTournamentStandings",e.sportsUnavailablePlayers="SportsUnavailablePlayers",e.sportsVideoList="SportsVideoList",e.sportsWorldCupCard="SportsWorldCupCard",e.sportsWorldCupCardWC="SportsWorldCupCardWC",e.spotlightCard="SpotlightCard",e.spotlightCardWC="SpotlightCardWC",e.starterKit="StarterKit",e.starterKitWC="StarterKitWC",e.stickyPeek="StickyPeek",e.storyCarousel="StoryCarousel",e.storyPage="StoryPage",e.stripe="Stripe",e.stripeFeed="StripeFeed",e.stripeView="StripeView",e.stripeWC="StripeWC",e.summaryCardWC="SummaryCardWC",e.superAppPage="SuperAppHomepage",e.superBreakingNews="SuperBreakingNews",e.superCoachMark="SuperCoachMark",e.superCoachMarkWC="SuperCoachMarkWC",e.superListCard="SuperListCard",e.superNav="SuperNav",e.superNavCoachMark="SuperNavCoachMark",e.superappBannerWC="SuperappBannerWC",e.superappUpsellCardWC="SuperappUpsellCardWC",e.tabbedFeedWC="TabbedFeedWC",e.tabbedInfopane="TabbedInfopane",e.tabbedInfopaneTabPreview="TabbedInfopaneTabPreview",e.taboolaRiver="TaboolaRiver",e.testBingNudge="TestBingNudge",e.themePicker="ThemePicker",e.themePickerWC="ThemePickerWC",e.tipsCard="TipsCard",e.toast="Toast",e.toastWC="ToastWC",e.todoCardWC="TodoCardWC",e.topSites="TopSites",e.topSitesCommon="TopSitesCommon",e.topSitesEdge="TopSitesEdge",e.topSitesEdgeNextWC="TopSitesEdgeNextWC",e.topSitesNewsbar="TopSitesNewsbar",e.topicTags="TopicTags",e.topicsHub="TopicsHub",e.trafficCard="TrafficCard",e.trafficCardWC="TrafficCardWC",e.trafficMap="TrafficMap",e.trafficPage="TrafficPage",e.travelArticlePageCard="TravelArticlePageCard",e.travelArticlePill="TravelArticlePill",e.travelCard="TravelCard",e.travelCarousel="TravelCarousel",e.travelCollectionCard="TravelCollectionCard",e.travelDestination="TravelDestination",e.travelDestinationBanner="TravelDestinationBanner",e.travelDestinationDetailsBanner="TravelDestinationDetailsBanner",e.travelFeed="TravelFeed",e.travelInspirationCard="TravelInspirationCard",e.travelInspirationCardWC="TravelInspirationCardWC",e.travelLandingPage="TravelLandingPage",e.travelPage="TravelPage",e.travelSaveButton="TravelSaveButton",e.travelSdDestinationsCard="TravelSdDestinationsCard",e.travelSdFlightsCard="TravelSdFlightsCard",e.travelSdHotelsCard="TravelSdHotelsCard",e.travelSdThemesCard="TravelSdThemesCard",e.travelTabCarousel="TravelTabCarousel",e.travelTourActivityCard="TravelTourActivityCard",e.trendingNews="TrendingNews",e.trendingNow="TrendingNow",e.trendingNowWC="TrendingNowWC",e.trendingSearchCard="TrendingSearchCard",e.trendingTopics="TrendingTopics",e.tripleCard="TripleCard",e.ugcCreator="UgcCreator",e.ugcCreatorHomepage="UgcCreatorHomepage",e.upnextPaddle="UpnextPaddle",e.userInitiatedPageRefresh="UserInitiatedPageRefresh",e.userProfileDisplay="UserProfileDisplay";e.verticalLeftNav="VerticalLeftNav",e.videoCard="VideoCard",e.videoCardWC="VideoCardWC",e.videoDetails="VideoDetails",e.videoList="VideoList",e.videoShoppingCard="VideoShoppingCard",e.videoShoppingCarouselCard="VideoShoppingCarouselCard",e.videosFeed="VideosFeed",e.viewsArticle="ViewsArticle",e.viewsCoachmark="ViewsCoachmark",e.viewsGallery="ViewsGallery",e.viewsNativeAd="ViewsNativeAd",e.viewsRail="ViewsRail",e.voiceSearch="VoiceSearch",e.voiceSearchWC="VoiceSearchWC",e.waffleWC="WaffleWC",e.walletPersonalizedOfferSdCardWC="WalletPersonalizedOfferSdCardWC",e.watch="Watch",e.watchWC="WatchWC",e.watchlistCard="WatchlistCard",e.watchlistView="WatchlistView",e.waterTrackerCard="WaterTrackerCard",e.weatherActivityPlanner="WeatherActivityPlanner",e.weatherActivityWatchlist="WeatherActivityWatchlist",e.weatherAds="WeatherAds",e.weatherCard="WeatherCard",e.weatherCardData="WeatherCardData",e.weatherCardWC="WeatherCardWC",e.weatherCarousel="WeatherCarousel",e.weatherColdStartGuide="WeatherColdStartGuide",e.weatherCurrentWC="WeatherCurrentWC",e.weatherDailyTrendChart="WeatherDailyTrendChart",e.weatherData="WeatherData",e.weatherEplant="WeatherEplant",e.weatherEplantTasksPhone="WeatherEplantTasksPhone",e.weatherEventAlert="WeatherEventAlert",e.weatherEventBanner="WeatherEventBanner",e.weatherExtensionSection="WeatherExtensionSection",e.weatherFeedback="WeatherFeedback",e.weatherFloatButtons="WeatherFloatButtons",e.weatherForecast="WeatherForecast",e.weatherForecastDayNightWC="WeatherForecastDayNightWC",e.weatherForecastDayWC="WeatherForecastDayWC",e.weatherForecastHistoryWC="WeatherForecastHistoryWC",e.weatherForecastPerHourWC="WeatherForecastPerHourWC",e.weatherForecastSunMoonPhaseWC="WeatherForecastSunMoonPhaseWC",e.weatherForecastSunMoonWC="WeatherForecastSunMoonWC",e.weatherForecastTab="WeatherForecastTab",e.weatherForecastVideo="WeatherForecastVideo",e.weatherFunFact="WeatherFunFact",e.weatherHistoricalRecordWC="WeatherHistoricalRecordWC",e.weatherHistoricalTemperatureWC="WeatherHistoricalTemperatureWC",e.weatherHolidayEffects="WeatherHolidayEffects",e.weatherHourlyHistogramWC="WeatherHourlyHistogramWC",e.weatherHourlyTab="WeatherHourlyTab",e.weatherImmersiveForecastWC="WeatherImmersiveForecastWC",e.weatherInfoCard="WeatherInfoCard",e.weatherInfoMini="WeatherInfoMini",e.weatherInfoSpan="WeatherInfoSpan",e.weatherInsightsSection="WeatherInsightsSection",e.weatherLifeAllQuiz="WeatherLifeAllQuiz",e.weatherLifeCurrent="WeatherLifeCurrent",e.weatherLifeCurrentV2="WeatherLifeCurrentV2",e.weatherLifeDayHourPanel="WeatherLifeDayHourPanel",e.weatherLifeEntryWC="WeatherLifeEntryWC",e.weatherLifeFactsCard="WeatherLifeFactsCard",e.weatherLifeHolidayCard="WeatherLifeHolidayCard",e.weatherLifeIndexEntry="WeatherLifeIndexEntry",e.weatherLifeNews="WeatherLifeNews",e.weatherLifeQuizCard="WeatherLifeQuizCard",e.weatherLifeSpecialToday="WeatherLifeSpecialToday",e.weatherLocationCardWC="WeatherLocationCardWC",e.weatherLocationPanel="WeatherLocationPanel",e.weatherLocationPopup="WeatherLocationPopup",e.weatherLocationSearch="WeatherLocationSearch",e.weatherLocationSearchPhoneWC="WeatherLocationSearchPhoneWC",e.weatherLocationWC="WeatherLocationWC",e.weatherMapAlertCard="WeatherMapAlertCard",e.weatherMapAnimationBox="WeatherMapAnimationBox",e.weatherMapCarousel="WeatherMapCarousel",e.weatherMapContentModal="WeatherMapContentModal",e.weatherMapControlBox="WeatherMapControlBox",e.weatherMapDataFilter="WeatherMapDataFilter",e.weatherMapForecastCard="WeatherMapForecastCard",e.weatherMapGroupSwitcher="WeatherMapGroupSwitcher",e.weatherMapGroupSwitcherButtonWC="WeatherMapGroupSwitcherButtonWC",e.weatherMapHurricanePane="WeatherMapHurricanePane",e.weatherMapLayerChooser="WeatherMapLayerChooser",e.weatherMapLegendIndicator="WeatherMapLegendIndicator",e.weatherMapLegendWC="WeatherMapLegendWC",e.weatherMapLifeIndex="WeatherMapLifeIndex",e.weatherMapLifeTips="WeatherMapLifeTips",e.weatherMapMini="WeatherMapMini",e.weatherMapNaviCard="WeatherMapNaviCard",e.weatherMapNews="WeatherMapNews",e.weatherMapPopup="WeatherMapPopup",e.weatherMapPromotionCard="WeatherMapPromotionCard",e.weatherMapSidebar="WeatherMapSidebar",e.weatherMapTimeline="WeatherMapTimeline",e.weatherMapTimelineWC="WeatherMapTimelineWC",e.weatherMapV2="WeatherMapV2",e.weatherMapWC="WeatherMapWC",e.weatherMapWeatherCard="WeatherMapWeatherCard",e.weatherMinimapWC="WeatherMinimapWC",e.weatherMonthCalendar="WeatherMonthCalendar",e.weatherMonthlyForecastSummary="WeatherMonthlyForecastSummary",e.weatherMonthlySummaryWC="WeatherMonthlySummaryWC",e.weatherMonthlyTrendChart="WeatherMonthlyTrendChart",e.weatherNotification="WeatherNotification",e.weatherNowcastHistogram="WeatherNowcastHistogram",e.weatherNpsCard="WeatherNpsCard",e.weatherOverviewV2="WeatherOverviewV2",e.weatherOverviewWC="WeatherOverviewWC",e.weatherPageMeta="WeatherPageMeta",e.weatherPageV2="WeatherPageV2",e.weatherPageWC="WeatherPageWC",e.weatherPersonaCard="WeatherPersonaCard",e.weatherPersonaSummary="WeatherPersonaSummary",e.weatherPollenCityList="WeatherPollenCityList",e.weatherPollenDailyInfo="WeatherPollenDailyInfo",e.weatherPollenImages="WeatherPollenImages",e.weatherPollenNodata="WeatherPollenNodata",e.weatherPollenTeaser="WeatherPollenTeaser",e.weatherPollenWeatherForecast="WeatherPollenWeatherForecast",e.weatherRecommendation="WeatherRecommendation",e.weatherSettingCenter="WeatherSettingCenter",e.weatherSlideDrawer="WeatherSlideDrawer",e.weatherToast="WeatherToast",e.weatherTodayCard="WeatherTodayCard",e.weatherTodayHistoryWC="WeatherTodayHistoryWC",e.weatherTodayMini="WeatherTodayMini",e.weatherTodayMiniWC="WeatherTodayMiniWC",e.welcomeGreetingWC="WelcomeGreetingWC",e.feedLevelFeedbackWC="FeedLevelFeedbackWC",e.widgetPickerWC="WidgetPickerWC",e.widgets="Widgets",e.widgetsDynamicFeed="WidgetsDynamicFeed",e.widgetsHomePage="WidgetsHomePage",e.winAppWC="WinAppWC",e.windowsOfficeFeed="WindowsOfficeFeed",e.windowsShellAccountManager="WindowsShellAccountManager",e.windowsShellBannerManager="WindowsShellBannerManager",e.windowsShellColdStartBanner="WindowsShellColdStartBanner",e.windowsShellColdStartCard="WindowsShellColdStartCard",e.windowsShellContentPreview="WindowsShellContentPreview",e.windowsShellDialogBox="WindowsShellDialogBox",e.windowsShellEntry="WindowsShellEntry",e.windowsShellHeader="WindowsShellHeader",e.windowsShellHotList="WindowsShellHotList",e.windowsShellImportBrowserDataBanner="WindowsShellImportBrowserDataBanner",e.windowsShellInfopane="WindowsShellInfopane",e.windowsShellMarketMismatchBanner="WindowsShellMarketMismatchBanner",e.windowsShellNotificationBanner="WindowsShellNotificationBanner",e.windowsShellPinOverlay="WindowsShellPinOverlay",e.windowsShellRecommendedInterests="WindowsShellRecommendedInterests",e.windowsShellRefreshAnimationBanner="WindowsShellRefreshAnimationBanner",e.windowsShellRefreshDiscoveryBanner="WindowsShellRefreshDiscoveryBanner",e.windowsShellRiver="WindowsShellRiver",e.windowsShellShoppingBanner="WindowsShellShoppingBanner",e.windowsShellTrendingTopics="WindowsShellTrendingTopics",e.xboxFeedWC="XboxFeedWC",e.xfeed="Xfeed",e.xfeedWC="XfeedWC",e.yandexSearchBoxWC="YandexSearchBoxWC"}(n||(n={}));const r=[n.commonSearchBoxEdgeNext]},25845:function(e,t,i){"use strict";var n,r;i.d(t,{V:function(){return n}}),function(e){e[e.init=0]="init",e[e.subsequent=1]="subsequent",e[e.refresh=2]="refresh"}(n||(n={})),function(e){e.Long="long",e.Short="short"}(r||(r={}))},38895:function(e,t,i){"use strict";i.d(t,{Js:function(){return l},NH:function(){return p},PC:function(){return n},PQ:function(){return r},SL:function(){return o},cX:function(){return d},mX:function(){return s},my:function(){return a},pN:function(){return u},x7:function(){return c}});const n="prg-",r="v3",o="v3.1",s="/resolver/api/resolve/",a="prg-crsfdheadrem",c="prg-1sw-akp1crs",d="prg-1sw-akp2crs",l="prg-akntpcrscncl",u="https://assets.msn.com",p="https://assets.msn.cn"},82890:function(e,t,i){"use strict";var n;i.d(t,{X:function(){return r},p:function(){return n}}),function(e){e.basicFeed="BasicFeed",e.desktopFeedStart="DesktopFeedStart",e.discoverCarouselSection="FinanceDiscoverSection_carouselCard",e.discoverFirstSection="FinanceDiscoverSection_first",e.discoverFollowedSection="FinanceDiscoverSection_followedCard",e.discoverSecondSection="FinanceDiscoverSection_second",e.feed="Feed",e.feedBasicRender="FeedBasicRender",e.feedRequest="FeedRequest",e.feedRequestFG="FeedRequest.FG",e.feedSDRender="FeedSDRender",e.isPrerenderedAd="isPrerenderedAd",e.firstSectionRenderStart="FirstSectionRenderStart",e.riverFirstSection="RiverFirstSection",e.sdCards="SDCards",e.searchBox="SearchBox",e.searchBoxToFeed="SearchBoxToFeed",e.secondSectionRenderEnd="SecondSectionRenderEnd",e.secondSectionRenderStart="SecondSectionRenderStart",e.TTPR="TTPR",e.viewCards="ViewCards",e.wpoCallStart="WpoCallStart",e.wpoResponseBack="WpoResponseBack",e.feedCallStart="FeedCallStart",e.feedResponseBack="FeedResponseBack",e.feedParse="FeedParse",e.configEndToFeedStart="ConfigEndToFeedStart",e.feedResponseTo1SSectionProcessed="FeedResponseTo1SSectionProcessed",e.isSSREnabled="isSSREnabled",e.isSSRCompleted="isSSRCompleted",e.isSSRAborted="isSSRAborted",e.complete="Complete"}(n||(n={}));const r="WidgetsConfigsEnd"},32506:function(e,t,i){"use strict";var n;i.d(t,{d:function(){return n}}),function(e){e.InterestsNeedRefresh="interests-need-refresh",e.VideoGameInterestFollowed="video-game-interest-followed"}(n||(n={}))},15213:function(e,t,i){"use strict";var n,r;i.d(t,{q:function(){return n}}),function(e){e.TimeToRequestAd="TTNativeAd.Request",e.TimeToRequestAdBackground="TTNativeAd.Background.Request",e.TimeToServeAd="TTNativeAd.Serve",e.TimeToServeAdBackground="TTNativeAd.Background.Serve",e.TimeToRenderAd="TTVR.NativeAd",e.TimeToPrerenderAd="TTNativeAd.Prerender",e.TimeToAdResponse="TTNativeAd.Response",e.ApiDuration="NativeAd.ApiDuration",e.RenderReady="NativeAd.RenderReady",e.RequestInitiated="NAdInitiate",e.RequestSent="NAdInitiateToReq",e.AdFetched="NAdFetch",e.AdServerLatency="NAdServerLatency",e.AdProcessed="NAdProcess",e.RespToAdCallback="NAdRespToCallback",e.AdCallbackProcessed="NAdCallbackProcess",e.AdRendered="NAdRender",e.TimeToConsumeAds="TTNativeAd.Consume"}(n||(n={})),function(e){e.TimeToAdScriptRequest="TTDisplayAd.ScriptRequest",e.TimeToAdScriptLoaded="TTDisplayAd.ScriptLoaded",e.TimeToAdFetchStarted="TTDisplayAd.FetchStarted",e.TimeToAdFetchCompleted="TTDisplayAd.FetchCompleted",e.TimeToAdRenderCompleted="TTDisplayAd.RenderCompleted"}(r||(r={}))},12108:function(e,t,i){"use strict";var n,r;i.d(t,{F:function(){return r},G:function(){return n}}),function(e){e.Article="article",e.ArticleFullScreen="articlefullscreen",e.CmsExperience="shopping::cms",e.CmsBaseExperience="shopping::cmsbase",e.DHP="dhp",e.EdgeWelcome="edgewelcome",e.ForumDealsPage="shopping::buydirect::superdeals",e.Gallery="gallery",e.GalleryFullScreen="galleryfullscreen",e.Homepage="hp",e.Launcher="launcher",e.Lenovo="lenovo",e.MMX="mmx",e.NewsAndInterests="newsandinterestshp",e.Newsbar="newsbar",e.NewsbarUpsell="newsbarupsell",e.NewsCoronavirus="news::coronavirus",e.NewsVLP="news",e.NTP="ntp",e.Story="story",e.Shopping="shopping",e.ShoppingDealsCategory="shopping::deals-category",e.ShoppingProductDetails="shopping::product",e.ShoppingExpressCheckout="shopping::express-checkout",e.ShoppingForumCheckout="shopping::buydirect::checkout",e.ShoppingForumProductPage="shopping::buydirect::product",e.ShoppingForumProductDetails="shopping::buydirect::product1",e.ShoppingForumCancelOrder="shopping::buydirect::cancel-order",e.ShoppingForumReturnDetails="shopping::buydirect::return-details",e.ShoppingForumReturnOrder="shopping::buydirect::return-orders",e.ShoppingForumRefundDetails="shopping::buydirect::refund-details",e.ShoppingForumRefundOrder="shopping::buydirect::refund-orders",e.ShoppingLiveDetails="shoppinglivedetails",e.ShoppingLiveInmobiDetails="shoppingliveinmobidetails",e.ShoppingLiveEmbed="shopping::live::embed",e.ShoppingLiveFeed="shopping::live",e.ShoppingLiveBase="shopping::live",e.ShoppingMomentInTime="shopping::mit",e.ShoppingExplore="shopping::explore",e.ShoppingExploreHalloween="shopping::explore::halloween",e.ShoppingCouponsPage="shopping::coupons",e.ShoppingDealsHomePage="shopping::deals::coupons",e.ShoppingStoreCouponsPage="shopping::store-coupons",e.ShoppingStyles="shopping::styles",e.ShoppingStylesHomePage="shopping::style-ideas",e.ShoppingLanding="shopping::buydirect",e.ShoppingSearchResult="shopping::buydirect::search",e.ShoppingCart="shopping::buydirect::cart",e.ShoppingOrders="shopping::buydirect::orders",e.ShoppingForumOrderConfirmation="shopping::buydirect::order-confirmation",e.ShoppingForumOrderDetails="shopping::buydirect::order-details",e.ShoppingForumHome="shopping::buydirect::home",e.Sports="sports",e.Travel="travel",e.TravelPlaces="travel::places",e.TravelCollections="travel::collections",e.Video="video",e.WebContent="webcontent",e.Widget="widget",e.Windows="windowshp",e.WindowsShellHP="windowsshellhp",e.ShoppingAllStoresPage="shopping::stores::popular",e.ShoppingLiveProductDetailsPage="shopping::live::product",e.ShoppingForumSellerPage="shopping::buydirect::stores",e.ShoppingForumFavorites="shopping::buydirect::favorites",e.ShoppingBlackjackPage="shopping::deals",e.ShoppingBlackjackDealPage="shopping::deals::product",e.ShoppingSearch="shopping::search",e.ShoppingBingProductDetails="shopping::product-details",e.ShoppingInspiration="shopping::inspire",e.ShoppingBuyingGuide="shopping::buying-guide",e.ShoppingAssistant="shopping::ai",e.ShoppingShopDeals="shopping::shopdeals",e.ShoppingArticlePage="shopping::shop-article"}(n||(n={})),function(e){e.Adult="adult",e.Enterprise="enterprise",e.Kids="kids"}(r||(r={}))},33799:function(e,t,i){"use strict";var n,r,o;i.d(t,{Hy:function(){return n},Qm:function(){return r}}),function(e){e[e.Unknown=0]="Unknown",e[e.NotSignedIn=1]="NotSignedIn",e[e.SignedIn=2]="SignedIn"}(n||(n={})),function(e){e.MSA="MSA",e.AAD="AAD",e.UNSUPPORTED_SOVEREIGNTY="UNSUPPORTED_SOVEREIGNTY"}(r||(r={})),function(e){e[e.NonAadAccount=0]="NonAadAccount",e[e.AadAccount=1]="AadAccount",e[e.Unknown=2]="Unknown"}(o||(o={}))},64893:function(e,t,i){"use strict";i.d(t,{$n:function(){return n},bT:function(){return r},cN:function(){return o}});const n=[{id:"ar-ae",value:"ar-ae",displayString:"   ()",direction:"rtl"},{id:"ar-eg",value:"ar-eg",displayString:" ()",direction:"rtl"},{id:"ar-sa",value:"ar-sa",displayString:"   ()",direction:"rtl"},{id:"bn-in",value:"bn-in",displayString:"India ()",direction:"ltr"},{id:"cs-cz",value:"cs-cz",displayString:"esk republika (etina)",direction:"ltr"},{id:"da-dk",value:"da-dk",displayString:"Danmark (Dansk)",direction:"ltr"},{id:"de-at",value:"de-at",displayString:"sterreich (Deutsch)",direction:"ltr"},{id:"de-ch",value:"de-ch",displayString:"Schweiz (Deutsch)",direction:"ltr"},{id:"de-de",value:"de-de",displayString:"Deutschland (Deutsch)",direction:"ltr"},{id:"el-gr",value:"el-gr",displayString:" ()",direction:"ltr"},{id:"en-ae",value:"en-ae",displayString:"United Arab Emirates (English)",direction:"ltr"},{id:"en-au",value:"en-au",displayString:"Australia (English)",direction:"ltr"},{id:"en-ca",value:"en-ca",displayString:"Canada (English)",direction:"ltr"},{id:"en-gb",value:"en-gb",displayString:"United Kingdom (English)",direction:"ltr"},{id:"en-ie",value:"en-ie",displayString:"Ireland (English)",direction:"ltr"},{id:"en-in",value:"en-in",displayString:"India (English)",direction:"ltr"},{id:"en-my",value:"en-my",displayString:"Malaysia (English)",direction:"ltr"},{id:"en-nz",value:"en-nz",displayString:"New Zealand (English)",direction:"ltr"},{id:"en-ph",value:"en-ph",displayString:"Philippines (English)",direction:"ltr"},{id:"en-sg",value:"en-sg",displayString:"Singapore (English)",direction:"ltr"},{id:"en-us",value:"en-us",displayString:"United States (English)",direction:"ltr"},{id:"en-xl",value:"en-xl",displayString:"International Edition (English)",direction:"ltr"},{id:"en-za",value:"en-za",displayString:"South Africa (English)",direction:"ltr"},{id:"es-ar",value:"es-ar",displayString:"Argentina (espaol)",direction:"ltr"},{id:"es-cl",value:"es-cl",displayString:"Chile (espaol)",direction:"ltr"},{id:"es-co",value:"es-co",displayString:"Colombia (espaol)",direction:"ltr"},{id:"es-es",value:"es-es",displayString:"Espaa (espaol)",direction:"ltr"},{id:"es-mx",value:"es-mx",displayString:"Mxico (espaol)",direction:"ltr"},{id:"es-pe",value:"es-pe",displayString:"Per (espaol)",direction:"ltr"},{id:"es-us",value:"es-us",displayString:"United States (espaol)",direction:"ltr"},{id:"es-ve",value:"es-ve",displayString:"Venezuela (espaol)",direction:"ltr"},{id:"es-xl",value:"es-xl",displayString:"Amrica Latina (espaol)",direction:"ltr"},{id:"fi-fi",value:"fi-fi",displayString:"Suomi (suomi)",direction:"ltr"},{id:"fr-be",value:"fr-be",displayString:"Belgique (franais)",direction:"ltr"},{id:"fr-ca",value:"fr-ca",displayString:"Canada (franais)",direction:"ltr"},{id:"fr-ch",value:"fr-ch",displayString:"Suisse (franais)",direction:"ltr"},{id:"fr-fr",value:"fr-fr",displayString:"France (franais)",direction:"ltr"},{id:"fr-xl",value:"fr-xl",displayString:"Afrique francophone (franais)",direction:"ltr"},{id:"he-il",value:"he-il",displayString:" ()",direction:"rtl"},{id:"hi-in",value:"hi-in",displayString:"India ()",direction:"ltr"},{id:"hu-hu",value:"hu-hu",displayString:"Magyarorszg (magyar)",direction:"ltr"},{id:"id-id",value:"id-id",displayString:"Indonesia (Bahasa Indonesia)",direction:"ltr"},{id:"it-it",value:"it-it",displayString:"Italia (italiano)",direction:"ltr"},{id:"ja-jp",value:"ja-jp",displayString:" ()",direction:"ltr"},{id:"ko-kr",value:"ko-kr",displayString:" ()",direction:"ltr"},{id:"mr-in",value:"mr-in",displayString:"India ()",direction:"ltr"},{id:"nb-no",value:"nb-no",displayString:"Norge (norsk, bokml)",direction:"ltr"},{id:"nl-be",value:"nl-be",displayString:"Belgi (Nederlands)",direction:"ltr"},{id:"nl-nl",value:"nl-nl",displayString:"Nederland (Nederlands)",direction:"ltr"},{id:"pl-pl",value:"pl-pl",displayString:"Polska (polski)",direction:"ltr"},{id:"pt-br",value:"pt-br",displayString:"Brasil (portugus)",direction:"ltr"},{id:"pt-pt",value:"pt-pt",displayString:"Portugal (Portugus)",direction:"ltr"},{id:"ru-xl",value:"ru-xl",displayString:"  (P)",direction:"ltr"},{id:"ru-ru",value:"ru-ru",displayString:" (P)",direction:"ltr"},{id:"sv-se",value:"sv-se",displayString:"Sverige (svenska)",direction:"ltr"},{id:"te-in",value:"te-in",displayString:"India ()",direction:"ltr"},{id:"th-th",value:"th-th",displayString:" ()",direction:"ltr"},{id:"tr-tr",value:"tr-tr",displayString:"Trkiye (Trke)",direction:"ltr"},{id:"vi-vn",value:"vi-vn",displayString:"Vit Nam (Ting Vit)",direction:"ltr"},{id:"zh-cn",value:"zh-cn",displayString:" ()",direction:"ltr"},{id:"zh-hk",value:"zh-hk",displayString:" ()",direction:"ltr"},{id:"zh-tw",value:"zh-tw",displayString:" ()",direction:"ltr"}];function r(e,t){return e.displayString<t.displayString?-1:e.displayString>t.displayString?1:0}function o(e){if(""!==document.dir)return"rtl"===document.dir;const t=n.find((t=>t.id===e));return t&&"rtl"===t.direction}},95527:function(e,t,i){"use strict";i.d(t,{Di:function(){return n},SD:function(){return o},fw:function(){return r}});const n="peregrine-widgets",r="peregrine-widget-settings",o="prg-pw-"},25568:function(e,t,i){"use strict";i.d(t,{$s:function(){return g},$v:function(){return I},CO:function(){return E},GR:function(){return r},H0:function(){return p},I1:function(){return h},IA:function(){return O},J8:function(){return d},L3:function(){return c},LJ:function(){return w},Mo:function(){return s},Mt:function(){return y},P$:function(){return S},Qn:function(){return v},SO:function(){return T},UW:function(){return l},YU:function(){return C},_O:function(){return R},bx:function(){return f},di:function(){return A},gr:function(){return P},hE:function(){return n},hM:function(){return b},hZ:function(){return u},hk:function(){return a},lP:function(){return k},ly:function(){return m},m8:function(){return M},os:function(){return D},vy:function(){return x},xE:function(){return o}});const n={activityId:"activityId",apiKey:"apikey",audienceMode:"audienceMode",bypassTrigger:"bypass_trigger",cm:"cm",complexInfoPaneEnabled:"cipenabled",contentType:"contentType",delta:"delta",disableContent:"disablecontent",disableTypeSerialization:"DisableTypeSerialization",duotone:"duotone",infopaneCount:"infopaneCount",fdhead:"fdhead",feedLayoutRequestType:"t",filter:"$filter",ids:"ids",interestIds:"InterestIds",location:"location",market:"market",newsSkip:"newsSkip",newsTop:"newsTop",ocid:"ocid",pageConfiguration:"pgc",parentContentId:"parent-content-id",parentNamespace:"parent-ns",parentTitle:"parent-title",queryQ:"q",query:"query",queryType:"queryType",qScope:"qscope",requestId:"rid",responseSchema:"responseschema",select:"$select",session:"session",signInCookieName:"scn",skip:"$skip",source:"source",timeOut:"timeOut",top:"$top",type:"type",user:"user",wrapOData:"wrapodata",wpoitems:"wpoitems",wpoPageId:"wpopageid",wpoSchema:"wposchema",caller:"caller",dhp:"dhp",webWorker:"webWorker",edgeNoAds:"edgenoads",edgeReduceAds:"edgereduceads"},r="0QfOX3Vn51YCzitbLaRkTTBadtWpgTN8NZLW0C1SEM",o="Uj7u7bqBgMhDGBUVPSbcHUe0pU7X8TbVRviCO2fojo",s="service/news/feed/pages/",a="serviceak/news/feed/pages/",c="news/feed/pages/",d="ntpxfeed",l="wpoxfeed",u="news/feed/pages/",p="winxfeed",g="wpodhp",h="gamingfeed",m="ntpfollowfeed",f="ntp",v="ntpxfeed",y="news/feed/Segments",b="https://api.msn.com",S="wpo-usebasedomain",C="wpo-useintdomain",w="https://ppe-api.msn.com",T="news/feed/pages/ntpxfeed",k="news/feed/pages/",A=17,I="xbox-browser",P="jY4a3fYtgzb7PIcW0Kj6amp5k6LwDefg6RSnkmxjto",E="prg-useakmaipath",O="prg-ssr-ext1sdns",M="anaheim-ntp-feeds",x="msnkids",D="dy0rQcQaYj5cKZ2Cy0cdaRDJcC5maS5hPj9w2SbeRf";function R(e,t){t.set(n.wrapOData,"false").set(n.disableTypeSerialization,"true").set(n.queryType,e.queryType||"myfeed").set(n.timeOut,`${function(e){const{timeoutMs:t,query:i,customFeedTimeoutMs:n}=e;return i&&n?n:t}(e)}`).set(n.contentType,e.contentType).set(n.apiKey,r),(e.useDelta||e.sessionId)&&(t.set(n.delta,"true"),e.sessionId&&t.set(n.session,e.sessionId)),e.ocid&&t.set(n.ocid,e.ocid)}},65932:function(e,t,i){"use strict";i.d(t,{T3:function(){return c},Uo:function(){return s},q1:function(){return a},tz:function(){return o}});var n=i(27003);let r;function o(e){r=e}function s(e,t,i=!0){const n=d();let o=n[e];if(o||(o=[],n[e]=o),o.push(t),i){const i=r(e);if(i){const e=i.getCurrentState();e&&t(e)}}}function a(e,t){const i=d(),n=i[e];if(n&&n.length){for(let e=0;e<n.length;e++)if(n[e]===t){n.splice(e,1);break}i[e]=n}}function c(e,t){const i=d()[e];if(i&&t)for(const e of i)e(t)}function d(){return n.Gq.get("reducers__callbackMap",(()=>({})))}},93450:function(e,t,i){"use strict";i.d(t,{_:function(){return S}});var n=i(27670),r=i(93303),o=i(44446),s=i(90351),a=i(25514),c=i(46728),d=i(33379);const l=new Map;function u(e){return e+"."+r.B.connectorStateKey}const p={registerInjection:function(e,t){let i=l.get(t);i||(i=new Set,l.set(t,i)),i.add(u(e))},initializeExperience:function(e,t,i){const n=u(t),r=(0,s.Z)(e,n,void 0),o=(0,s.Z)(e,u(i),void 0),c=Object.assign(Object.assign({},r),{[i]:o});(0,a.Z)(e,n,c)},reportStateChange:function(e,t,i){const n=l.get(t);if(n)for(const r of n){const n=(0,s.Z)(e,r,void 0);n&&(0,a.Z)(e,r,Object.assign(Object.assign({},n),{[t]:i}))}}};var g=i(85663),h=i(65932);class m{constructor(){this._connectorMap={},this._globalConnectors=[],this._allConnectors=[],this._getDataConnectorPendingPromises=new Map,this.reduce=this.reduce.bind(this)}connectors(){return this._allConnectors}connector(e){return this._connectorMap[e]}globalConnectors(){return this._globalConnectors}getDataConnector(e){const t=this.connector(e);if(t)return Promise.resolve(t);const i=this._getDataConnectorPendingPromises.get(e);if(i)return i.promise;let n,r;const o=new Promise(((e,t)=>{n=e,r=t}));return this._getDataConnectorPendingPromises.set(e,{promise:o,resolve:n,reject:r}),o}reduce(e,t){(0,g.isNullOrUndefined)(e)&&(e={});let i=Object.assign({},e),n=!1;const l=t.key;if(void 0!==t&&void 0!==l){const u="string"==typeof t.type;if(u&&t.type.endsWith(r.B.renderAction)){const t=l+"."+r.B.connectorStateKey,c=(0,o.Z)({},(0,s.Z)(e,t,void 0));(0,a.Z)(i,t,c),n=!0}else if(u&&t.type.endsWith(r.B.dataConnectorMergeInitAction)){const e=l,r=t.params[0];r&&(p.initializeExperience(i,e,r),n=!0)}else{const e=this._connectorMap[l];if(e){e.isGlobal&&(i=(0,c.Z)({},i));const r=this.computeNextStateForConnector(i,l,t);n=r.stateChanged,n&&(p.reportStateChange(i,l,r.newState),(0,d.N)()&&(0,h.T3)(l,r.newState))}else if(!(0,d.N)())throw new Error("Reducer for: "+l+" must not return undefined.")}}else Object.keys(this._connectorMap).forEach((e=>{this.computeNextStateForConnector(i,e,t).stateChanged&&(n=!0)}));return n?i:e}addSubReducerForConnector(e){if(!e)throw new Error("The parameter 'connector' cannot be null.");const t=e.fullNamespace;if(this._connectorMap[t]=e,this._allConnectors.push(e),e.isGlobal&&this._globalConnectors.push(e),this._getDataConnectorPendingPromises.has(e.namespace)){const t=this._getDataConnectorPendingPromises.get(e.namespace);try{t.resolve(e)}catch(e){t.reject(e)}this._getDataConnectorPendingPromises.delete(e.namespace)}e.store.dispatch({key:t,type:"@@connector-view/INIT"})}computeNextStateForConnector(e,t,i){const n=this._connectorMap[t],o=t+"."+r.B.connectorStateKey,c=(0,s.Z)(e,o,void 0),d=this.subReduce(n.reducer,c,i);if(void 0===d)throw new Error("Reducer for: "+t+" must not return undefined.");const l=d!==c;return l&&(0,a.Z)(e,o,d),{newState:d,stateChanged:l}}subReduce(e,t,i){const n=e.reduce(t,i);return n!==t?n:t}}var f=i(11365),v=i(33954),y=i(27003);const b="__PageBaseInstance__";class S{constructor(e){let t;const i=[];if(void 0!==v.k&&v.k&&v.k.isDebug()){t=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25})||n.qC)((0,f.md)(...i))}else t=(0,f.md)(...i);this._rootReducer=new m,this._store=(0,n.MT)(this.rootReducer.reduce,e,t)}static resetPageBaseInstance(e){y.Gq.set(b,new S(e))}static deletePageBaseInstance(){y.Gq.delete(b)}get store(){return this._store}get rootReducer(){return this._rootReducer}static getInstance(e){return y.Gq.get(b,(()=>new S(e)))}start(){this.rootReducer.connectors().forEach((e=>e.onApplicationStart()))}}},93303:function(e,t,i){"use strict";var n;i.d(t,{B:function(){return n}}),function(e){e.connectorStateKey="_@STATE@_",e.renderAction="@@connector-view/RENDER",e.dataConnectorMergeInitAction="@@data-connector/MERGE-INIT"}(n||(n={}))},63439:function(e,t,i){"use strict";i.d(t,{e:function(){return l}});var n=i(93303),r=i(65932),o=i(61502),s=i(21050),a=i(11365),c=i(25514),d=i(82423);(0,r.tz)(d.K0);class l{constructor(e,t,i,n,r,s,c,d=!1){this.namespace=e,this.parentNamespace=t,this.rootReducer=i,this.reducer=n,this.config=s,this.requestContext=c,this.isGlobal=d,this._fullNamespace=void 0!==t&&""!==t?t+"."+e:e,this.selectState=this.selectState.bind(this),this._subspace=(0,a.Z)(this.selectState,this.namespace)(r);const l=this.perfTimeline=this.tryGetPerfTimeline(e);this.fetch=(0,o.Ud)(l),i.addSubReducerForConnector(this)}get store(){return this._subspace}get fullNamespace(){return this._fullNamespace}get configHref(){return this._configHref}set configHref(e){this._configHref=e}getCurrentState(){const e=this.store.getState()[n.B.connectorStateKey];if(!this.isGlobal){const t=this.rootReducer.globalConnectors();0!==t.length&&t.forEach((t=>{(0,c.Z)(e,t.namespace,t.getCurrentState())}))}return e}onApplicationStart(){}selectState(e){return e[this.namespace]}tryGetPerfTimeline(e){const t=e.split("_"),[i]=t,n=t[t.length-1];return(0,s.oA)(i,n)}}},30856:function(e,t,i){"use strict";i.d(t,{G:function(){return o}});var n=i(58043),r=i(32771);class o{static handleAction(e,t,i){return!!o.endsWith(e.type+"",t.type)&&(i.apply(i,e.params),!0)}static handleActions(e,t,i){const r=e.type+"";return!!(0,n.Z)(t,(e=>o.endsWith(r,e.type)))&&(i.apply(i,e.params),!0)}static safeHandleAction(e,t,i){if(!o.endsWith(e.type+"",t.type))throw"The action payload does not match the action type.";return i.apply(i,e.params),!0}}o.endsWith=String.prototype.endsWith?function(e,t){return e.endsWith(t)}:r.Z},55067:function(e,t,i){"use strict";i.d(t,{C:function(){return g}});var n=i(93450);function r(e,t,i,n){let r;return e&&(r=e.parentNamespace?e.parentNamespace+"."+e.namespace:e.namespace),{key:r,experienceInstanceId:n,type:t,params:i}}function o(e,t){return e?e.store.dispatch(t):n._.getInstance().store.dispatch(t)}var s=i(93303);class a{constructor(e,t,i){this.type=e,this.observers=t,this.connector=i}get send(){return this.dispatchAction()}dispatchAction(){return function(...e){const t=this.tryGetPerfTimeline(),i=t&&t.startMeasure("action",this.type).endMeasure,{payload:n,result:a}=this.getDispatchResult(e);return this.observers.forEach((e=>{try{e.filterConnector&&this.connector!==e.filterConnector||e.observer(n)}catch(t){console.log(`Error calling observer: ${JSON.stringify(e.observer)}, with error: ${t}`)}if(e.dispatchConnector){const t=r(e.dispatchConnector,s.B.renderAction,[],void 0);o(e.dispatchConnector,t)}})),i&&i(),a}}}class c extends a{constructor(e,t,i){super(e,t,i)}getDispatchResult(e){const t=r(this.connector,this.type,e,void 0);return{payload:t,result:o(this.connector,t)}}tryGetPerfTimeline(){return this.connector.perfTimeline}}var d=i(21050);class l extends a{constructor(e,t,i){super(e,t,null),this.experienceInstanceId=i}getDispatchResult(e){const t=r(void 0,this.type,e,this.experienceInstanceId);return{payload:t,result:o(void 0,t)}}tryGetPerfTimeline(){return(0,d.oA)("GlobalActionSender",this.experienceInstanceId||"unknown")}}var u=i(27003);let p=1;class g{constructor(e){this.type=e,this.observerKey=`__ActionMap_${e}_${p++}`}get observers(){return u.Gq.get(this.observerKey,(()=>[]))}set observers(e){u.Gq.set(this.observerKey,e)}getActionSender(e){let t;if(t="string"==typeof e?n._.getInstance().rootReducer.connector(e):e,t)return new c(this.type,this.observers,t)}getGlobalActionSender(e){return new l(this.type,this.observers,e)}registerObserver(e,t){const{dispatchConnector:i,filterConnector:n}=t||{};this.observers.push({observer:e,dispatchConnector:i,filterConnector:n})}unregisterObserver(e){const t=this.observers.findIndex((t=>t.observer===e));t>-1&&this.observers.splice(t,1)}unregisterObservers(){this.observers=[]}}},82423:function(e,t,i){"use strict";i.d(t,{K0:function(){return f},Ki:function(){return v},oU:function(){return m}});var n=i(33940),r=i(32181),o=i(89638),s=i(8158),a=i(44979),c=i(26415),d=i(68364),l=i(93450),u=i(27003),p=i(33379),g=i(65932);const h="GetDataConnector.skippedConnectors";function m(e){return(0,n.mG)(this,void 0,void 0,(function*(){return e?yield l._.getInstance().rootReducer.getDataConnector(e):null}))}function f(e){return l._.getInstance().rootReducer.connector(e)}function v(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=(0,r.M)(e);if(u.Gq.get(h,(()=>new Set)).has(t))return new Promise((e=>e()));const i=u.Gq.get("dataConnectorLoadPromiseMap",(()=>({})));let m=i[t];return m||(m=new Promise(((t,i)=>(0,n.mG)(this,void 0,void 0,(function*(){try{const t=(0,r.M)(e),i=(0,r.Fr)(e),n=o.U.getConfig(i),c=s.n.loadExperience(t),d=yield Promise.all([n,c]),u=d[0].properties,h=d[1],m=h[t+"Connector"],f=h[t+"Reducer"],v=l._.getInstance(),y=new m(t,"",v.rootReducer,new f(u),v.store,u,new a.fH);(0,p.N)()&&(0,g.T3)(t,y.getCurrentState())}catch(e){const t=Object.assign({},c.NGC);(0,d.OO)(e,t,"Loading data connector failed.")}t()})))),i[t]=m,m)}))}},41710:function(e,t,i){"use strict";i.d(t,{s:function(){return r}});var n=i(55067);class r{}r.signedInStatus=new n.C("SignedInStatus"),r.signedInStatusConfirmed=new n.C("SignedInStatusConfirmed"),r.useEnterpriseCompliance=new n.C("UseEnterpriseCompliance"),r.useHistory=new n.C("UseHistory"),r.updateLocation=new n.C("UpdateLocation")},16776:function(e,t,i){"use strict";i.d(t,{n:function(){return y}});var n=i(53076),r=i(63439),o=i(33799),s=i(83097),a=i(90846),c=i(53079),d=i(37735),l=i(84169),u=i(33379),p=i(2140),g=i(30856),h=i(41710),m=i(67462);class f{reduce(e,t){if(!e){return{signedIn:this.getSignInStatus(),useEnterpriseCompliance:!1,useHistory:!1}}if(!t)return e;let i,n=!1;return n=g.G.handleAction(t,h.s.signedInStatus,(t=>{i=Object.assign(Object.assign({},e),{signedIn:t})})),n=n||g.G.handleAction(t,h.s.useEnterpriseCompliance,(t=>{i=Object.assign(Object.assign({},e),{useEnterpriseCompliance:t})})),n=n||g.G.handleAction(t,h.s.useHistory,(t=>{i=Object.assign(Object.assign({},e),{useHistory:t})})),n=n||g.G.handleAction(t,h.s.updateLocation,(t=>{i=Object.assign(Object.assign({},e),{location:t})})),i||e}getSignInStatus(){if((0,a.TJ)()){return(0,c.XS)().isSignedIn}if(!(0,u.N)()){const{oneServiceHeaders:e}=(0,p.s)();if(e&&Object.keys(e).length>0&&e.authorization)return o.Hy.SignedIn}if((0,a.hk)())return o.Hy.Unknown;if((0,a.G5)())return(0,d.x6)()?o.Hy.SignedIn:o.Hy.NotSignedIn;const e=l.jG.AuthCookieName;if(""==e)return o.Hy.NotSignedIn;const t="app_anon"==e?s.IR.AppAnonCookieExists:s.IR.AnonCookieExists;return(0,m.ej)(t)?o.Hy.SignedIn:o.Hy.NotSignedIn}}class v extends r.e{constructor(e,t,i,n,r,o,s){super(e,t,i,n,r,o,s,!0)}static initialize(e,t,i){let r=e.connector(n.z.SharedState);return r||(r=new v(n.z.SharedState,"",e,new f,t,void 0,i)),r}}const y=v.initialize},82128:function(e,t,i){"use strict";i.d(t,{g:function(){return r}});var n=i(32181);function r(e){return"string"==typeof(t=(0,n.Fr)(e))?t:t.instanceSrc;var t}},76950:function(e,t,i){"use strict";i.d(t,{ITY:function(){return r}});const n={ActionTray:"action-tray",AicharacterPaintPage:"aicharacter-paint-page",ArticleCloseButton:"article-close-button",ArticleFre:"article-fre",ArticleRelatedStories:"article-related-stories",ArticleTopComment:"article-top-comment",AutosCarousel:"autos-carousel",AutosEntityCardWC:"autos-entity-card-wc",AutosEntitySpan:"autos-entity-span",AutosMarketplaceCard:"autos-marketplace-card",BackToTopButton:"back-to-top-button",BackgroundGallery:"background-gallery",BackgroundImageWC:"background-image",BingHealthCard:"bing-health-card",BingHealthFitnessCard:"bing-health-fitness-card",BingHomepageFeed:"bing-homepage-feed",BoostAdCard:"boost-ad-card",BrandZone:"brand-zone",BreakingNewsWC:"breaking-news-wc",CalendarCard:"calendar-card",CardActionWC:"card-action",CashbackCarouselCard:"cashback-carousel-card",CasualGamesBanner:"casual-games-banner",CasualGamesCard:"casual-games-card",CasualGamesCarouselCard:"casual-games-carousel-card",CasualGamesFeed:"casual-games-feed",CasualGamesFrame:"casual-games-frame",CasualGamesHub:"casual-games-hub",CasualGamesLanding:"casual-games-landing",ChannelEntryPoint:"channel-entry-point",ChannelList:"channel-list",ChannelPage:"channel-page",ChannelsNews:"channels-news",CmsBaseExperience:"cms-base-experience",CmsExperience:"shopping-cms",CoachmarkWC:"coachmark-elem",ColdStartWC:"cold-start",CommonHeaderWC:"common-header",CommonSearchBoxEdgeNext:"common-search-box-edgenext",CommonSettingsEdgeNext:"common-settings-edgenext",CommuteCard:"commute-card",CompanyNewsCard:"company-news-card",ConditionalBannerHpWC:"conditional-banner-hp-wc",ConditionalBannerWC:"conditional-banner-wc",ConsumptionPage:"consumption-page",ContentFlexInfoPane:"content-flex-info-pane",ContentGroup:"content-group",ContentGroupCard:"content-group-card",ContentTts:"content-tts",CpcMonetizationDashboard:"cpc-monetization-dashboard",DailyDiscovery:"daily-discovery",DashboardFallback:"dashboard-fallback",DashboardSettings:"dashboard-settings",DenseCard:"dense-card",DesktopFeedHubWC:"desktop-feed-hub",DesktopFeedViewsWC:"desktop-feed-views",DesktopFeedWC:"desktop-feed",DevTools:"dev-tools",DidYouKnowImageWCExperience:"did-you-know-image-wc-experience",DidYouKnowWCExperience:"did-you-know-wc-experience",DigestCard:"digest-card",DisplayAdsWC:"display-ads",DistributionFeed:"distribution-feed",DistributionHeader:"distribution-header",DistributionPage:"distribution-page",DistributionPivotsNav:"distribution-pivots-nav",EdgeChromiumPageWC:"edge-chromium-page",EdgeShopping:"edge-shopping",EntertainmentCard:"entertainment-card",EntryPointHpMobile:"entry-point-hp-mobile",EntryPointHpWC:"entry-point",EntryPointMobileHub:"entry-point-mobile-hub",EoabViews:"eoab-views",EoabViewsAutos:"eoab-views-autos",EoabViewsFinance:"eoab-views-finance",EoabViewsShopping:"eoab-views-shopping",EoabViewsTravel:"eoab-views-travel",EsportsCard:"esports-card",EsportsLivestreamCarouselWC:"esports-livestream-carousel-wc",EsportsStreamsCard:"esports-streams-card",ExperiencePreviewCta:"experience-preview-cta",FamilyCard:"family-card",FeedContainer:"feed-container",FeedNavigationHp:"feed-navigation-hp",FeedToggleWC:"feed-toggle",FeedbackCard:"feedback-card",FeedbackDialogWC:"feedback-dialog",FeedbackLinkWC:"feedback-link",FinanceCarousel:"finance-carousel",FoodSimilarItems:"food-similar-items",ForumDealsPage:"forum-deals-page",FrequentSitesCardWC:"frequent-sites-card",GameCard:"game-card",GamingCompeteCard:"gaming-compete-card",GamingDiscoverStrip:"gaming-discover-strip",GamingInterestGroupCard:"gaming-interest-group-card",GamingMatchCard:"gaming-match-card",GamingMediaCarousel:"gaming-media-carousel",GamingPage:"gaming-page",GamingPersonalizationCard:"gaming-personalization-card",GamingRecentlyPlayedCard:"gaming-recentlyplayed-card",GamingRecommendedCard:"gaming-recommended-card",GamingRedditCard:"gaming-reddit-card",GamingRewardsCard:"gaming-rewards-card",GamingStreamCard:"gaming-stream-card",GamingTournamentCard:"gaming-tournament-card",GamingUpcomingCard:"gaming-upcoming-card",GamingVideoCard:"gaming-video-card",GeneralElections:"general-elections",GoBig:"go-big",GridViewFeed:"grid-view-feed",GroceryCouponSdCard:"grocery-coupon-sd-card",HeaderWindowsShellWC:"header-windows-shell-wc",HealthDietPlanScheduleWC:"health-diet-plan-schedule",HealthFeedbackWC:"health-feedback",HealthFitnessCarousel:"health-fitness-carousel",HealthFoodHealtheffectsWC:"health-food-healtheffects",HealthFoodRecipesWC:"health-food-recipes",HealthHubHealthapp:"healthhub-healthapp",HealthInterestsManager:"health-interests-manager",HealthQnAWCExperience:"health-qna-card-wc",HealthTipWC:"health-tip-wc",HealthTopSpan:"health-top-span",HealthTranslationWC:"health-translation",HealthWidget:"health-widget",HolidayEffects:"holiday-effects",HomepageFooter:"homepage-footer",HomepageHeader:"homepage-header",HoroscopeAnswerCardWC:"horoscope-answer-card",HotListCard:"hot-list-card",ImageSearchWC:"image-search-wc",ImmersiveFullscreen:"immersive-fullscreen",IndustryNewsCard:"industry-news-card",InspirationCard:"inspiration-card",InterestFreCard:"interest-fre-card",InterestManagementCard:"interest-management-card",InterestsManager:"interests-manager",InterestsWC:"interests-wc",LanguageMismatchBanner:"language-mismatch-banner",LanguageToggleWC:"language-toggle",LinkedInCard:"linked-in-card",LocalHubHeader:"local-hub-header",LocalizeStringsTempExperience:"localize-strings-temp-experience",Lottery:"lottery-card",MailSignoutBanner:"mail-signout-banner",MangaCard:"manga-card",MarketLanguageToggleWC:"market-language-toggle",MarketplaceCardWC:"marketplace-card",MeControlWC:"me-control",MeStripeWC:"me-stripe",MicrosoftEdgeWidget:"microsoft-edge-widget",MicrosoftFeedCard:"microsoft-feed-card",MobileAppUpsell:"mobile-app-upsell",MobileChannelSlider:"mobile-channel-slider",MobileFeedHub:"mobile-feed-hub",MobileFeedWC:"mobile-feed-wc",MobileFooter:"mobile-footer",MobileHeader:"mobile-header",MobileMarketSelector:"mobile-market-selector",MobileNotification:"mobile-notification",MobileRewardsCard:"mobile-rewards-card",MobileShoppingCard:"mobile-shopping-card",MobileStoryViewer:"mobile-story-viewer",MobileTip:"mobile-tip",MobileWidget:"mobile-widget",ModernRightRailWC:"modern-right-rail",MoneyInfo:"money-info",MoneyInfoCardWC:"money-info-card",MoneyInfoSpan:"money-info-span",MsRewardsWC:"ms-rewards",MsaAddressForm:"msa-address-form",NativeAdWC:"native-ad-wc",NavigationPageExperience:"navigation-page-experience",NewsGroupsCard:"news-groups-card",NewsGuard:"news-guard",NewsHeadlineAutoSuggestion:"news-headline-auto-suggestion",NewsHeadlineBelowSearchbox:"news-headline-below-searchbox",NewsSegmentCarousel:"news-segment-carousel",NewsbarFeedFooter:"newsbar-feed-footer",NewsbarFeedWC:"newsbar-feed",NewsbarUpsellWC:"newsbar-upsell",NewsletterSignup:"newsletter-signup",NewsletterSignupPage:"newsletter-signup-page",NextdoorCard:"nextdoor-card",NextdoorPage:"nextdoor-page",NotificationBellWC:"notification-bell",NudgeSpotlightCard:"nudge-spotlight-card",OfficeCoachmark:"office-coachmark",OfficeDocumentsTableWC:"office-documents-table",OfficeLeftRail:"office-leftrail",OnThisDayCardSmall:"on-this-day-card-small",OnThisDayCardWC:"on-this-day-card",OverlayWC:"overlay-wc",PageRefreshWC:"page-refresh",PartnerUpsellCard:"partner-upsell-card",PersonalFinanceExpenseDistribution:"personal-finance-expense-distribution",PersonalFinanceTransactionsCard:"personal-finance-transactions-card",PersonalizeNavButton:"personalize-nav-button",PhotoCard:"photo-card",PillWC:"pill-wc",PivotsMobileWC:"pivots-mobile",PollsCardWC:"polls-card",PoweredbyLegendWC:"poweredby-legend",PrayerTimesCard:"prayer-times-card",PreconsumptionArticleCardWC:"preconsumption-article-card",PremiumProfilePromoCard:"premium-profile-promo-card",PrideEventCard:"pride-event-card",PrismCards:"prism-cards",PrismCarouselCard:"prism-carousel-card",PrismFeed:"prism-feed",PrismSdCard:"prism-sd-card",ProductivityHub:"productivity-hub",ProfilePromoCard:"profile-promo-card",PromoBannerWC:"promo-banner",PublisherCarousel:"publisher-carousel",PublisherList:"publisher-list",PublisherSubscribeFollowButton:"publisher-subscribe-follow-button",PullToRefresh:"pull-to-refresh",Qna:"qna-card",QnaFeed404Page:"qna-feed-404-page",QnaFeedCard:"qna-feed-card",QnaFeedCardMenu:"qna-feed-card-menu",QnaFeedCarousel:"qna-feed-carousel",QnaFeedCategoriesMenu:"qna-feed-categories-menu",QnaFeedExploreTopics:"qna-feed-explore-topics",QnaFeedList:"qna-feed-list",QnaFeedMyTopics:"qna-feed-my-topics",QnaFeedRelatedQuestions:"qna-feed-related-questions",QnaFeedReportCard:"qna-feed-report-card",QnaFeedSuggestedTopics:"qna-feed-suggested-topics",QnaFeedTopicDetail:"qna-feed-topic-detail",QnaFeedTrendingQuestions:"qna-feed-trending-questions",QuizCard:"quiz-card",ReactionBreakdownDialog:"reaction-breakdown-dialog",RealEstateCard:"real-estate-card",RecipesSdCard:"recipes-sd-card",RecommendedCardFeed:"recommended-card-feed",RecommendedCardWC:"recommended-card",RecommendedInterests:"recommended-interests",RecommendedSearchCarouselWC:"recommended-search-carousel",RecommendedSearchesCard:"recommended-searches-card",RecommendedSitesWC:"recommended-sites",RewardsCardWC:"rewards-card",RewardsDailySetCard:"rewards-daily-set-card",RightRailProviderCarousel:"right-rail-provider-carousel",ScrollDownButton:"scroll-down-button",SdCardMaskWC:"sd-card-mask",SearchBoxWC:"search-box-wc",SearchHistoryEdgeNextWC:"search-history-edgenext",SelectCarousel:"select-carousel",SharedLinks:"shared-links",SharepointNewsCard:"sharepoint-news-card",ShoppingAllStoresPage:"shopping-all-stores-page",ShoppingArticlePage:"shopping-article-page",ShoppingBingProductDetails:"shopping-bing-product-details",ShoppingBlackjackDealPage:"shopping-blackjack-deal-page",ShoppingBlackjackPage:"shopping-blackjack-page",ShoppingBuyingGuide:"shopping-buying-guide",ShoppingCardWC:"shopping-card-wc",ShoppingCarouselProngWC:"shopping-carousel-prong-wc",ShoppingCarouselWC:"shopping-carousel",ShoppingCart:"shopping-cart",ShoppingCashback:"shopping-cashback",ShoppingCategoryPage:"shopping-category-page",ShoppingCheckoutModal:"shopping-checkout-modal",ShoppingCheckoutPage:"shopping-checkout-page",ShoppingColdStart:"shopping-cold-start",ShoppingCouponsPage:"shopping-coupons-page",ShoppingDealsHomePage:"shopping-deals-home-page",ShoppingEdgeInsightsCard:"shopping-edge-insights-card",ShoppingEntryBaseExperience:"shopping-entry-base-experience",ShoppingEventsDealCard:"shopping-events-deal-card",ShoppingForumFavorites:"shopping-forum-favorites",ShoppingForumHome:"shopping-forum-home",ShoppingForumLandingPage:"shopping-forum-landing-page",ShoppingForumOrderCancelPage:"shopping-forum-order-cancel-page",ShoppingForumOrderConfirmation:"shopping-forum-order-confirmation",ShoppingForumOrderDetails:"shopping-forum-order-details",ShoppingForumOrdersPage:"shopping-forum-orders-page",ShoppingForumProductPage:"shopping-forum-product-page",ShoppingForumRefundDetailsPage:"shopping-forum-refund-details-page",ShoppingForumRefundOrderPage:"shopping-forum-refund-order-page",ShoppingForumReturnDetailsPage:"shopping-forum-return-details-page",ShoppingForumReturnOrderPage:"shopping-forum-return-order-page",ShoppingForumSellerPage:"shopping-forum-seller-page",ShoppingGrid:"shopping-grid",ShoppingHomepage:"shopping-homepage",ShoppingInspiration:"shopping-inspiration",ShoppingLeaderboard:"shopping-leaderboard",ShoppingLiveBasePage:"shopping-live-base-page",ShoppingLiveEmbedPage:"shopping-live-embed-page",ShoppingLiveFeedPage:"shopping-live-feed-page",ShoppingLiveInmobiDetailsPage:"shopping-live-inmobi-details-page",ShoppingLiveProductDetailsPage:"shopping-live-product-details-page",ShoppingLiveVideoPlayer:"shopping-live-video-player",ShoppingModal:"shopping-modal",ShoppingModelOverlay:"shopping-model-overlay",ShoppingMomentInTimePage:"shopping-moment-in-time-page",ShoppingMultiTabCarousel:"shopping-multi-tab-carousel",ShoppingPageBase:"shopping-page-base",ShoppingPageContent:"shopping-page-content",ShoppingProductDetailPage:"shopping-product-detail-page",ShoppingProductPage:"shopping-product-page",ShoppingSdCard:"shopping-sd-card",ShoppingSearch:"shopping-search",ShoppingSearchResultPage:"shopping-search-result-page",ShoppingShippingAddress:"shopping-shipping-address",ShoppingShopTheLookPage:"shopping-shopthelook-page",ShoppingTopSpan:"shopping-top-span",ShoppingVideoShortsCarousel:"shopping-video-shorts-carousel",ShoppingViewsCarousel:"shopping-views-carousel",SignInControlWC:"sign-in-control",SignInFlyoutWC:"sign-in-flyout",SlideshowWC:"slideshow-wc",SocialAvatar:"social-avatar",SocialBarWC:"social-bar-wc",SocialCommentWC:"social-comment-wc",SocialLeadGenInArticle:"social-lead-gen-in-article",SocialNotification:"social-notification",SocialProfileActionMenu:"social-profile-action-menu",SocialProfileCard:"social-profile-card",SocialProfilePromotion:"social-profile-promotion",SocialRelatedSources:"social-related-sources",SocialReportMenu:"social-report-menu",SocialRewardsMedal:"social-rewards-medal",SocialRewardsPromotion:"social-rewards-promotion",SocialStarRating:"social-star-rating",SocialSubscriptionBanner:"social-subscription-banner",SocialSubscriptionNotification:"social-subscription-notification",SocialSubscriptionOverlay:"social-subscription-overlay",SocialSubscriptionOverlaySummary:"social-subscription-overlay-summary",SocialSubscriptionPaywall:"social-subscription-paywall",SocialSubscriptionUpsell:"social-subscription-upsell",SocialSupportResult:"social-support-result",SocialTipHistory:"social-tip-history",SocialTipIntroduction:"social-tip-introduction",SocialTipPromotion:"social-tip-promotion",SocialTipPromotionInArticle:"social-tip-promotion-in-article",SocialTipSelection:"social-tip-selection",SportsAroundTheLeague:"sports-around-the-league",SportsBackgroundUx:"sports-background-ux",SportsBrackets:"sports-brackets",SportsCardWC:"sports-card",SportsCommentary:"sports-commentary",SportsCountdownTimer:"sports-countdown-timer",SportsCricketLayoutManager:"sports-cricket-layout-manager",SportsCricketLeagueStats:"sports-cricket-league-stats",SportsCricketMatchRow:"sports-cricket-match-row",SportsCricketPartnerships:"sports-cricket-partnerships",SportsCricketRankings:"sports-cricket-rankings",SportsCricketScorecard:"sports-cricket-scorecard",SportsCricketScoresAndSchedule:"sports-cricket-scores-and-schedule",SportsEntityHeader:"sports-entity-header",SportsFeaturedMatchesCard:"sports-featured-matches-card",SportsFullStandings:"sports-full-standings",SportsGameSummary:"sports-game-summary",SportsGameSummaryFull:"sports-game-summary-full",SportsGameTimeline:"sports-game-timeline",SportsGcPlayerStats:"sports-gc-player-stats",SportsGcTeamStats:"sports-gc-team-stats",SportsInfo:"sports-info",SportsInfoSpan:"sports-info-span",SportsLayoutRenderer:"sports-layout-renderer",SportsMatchRow:"sports-match-row",SportsOlympicCardWC:"sports-olympic-card",SportsPersonMatchRow:"sports-person-match-row",SportsPersonalizationStrip:"sports-personalization-strip",SportsPlayerInsights:"sports-player-insights",SportsPreviousMatchups:"sports-previous-matchups",SportsRankingsFull:"sports-rankings-full",SportsScoresAndSchedule:"sports-scores-and-schedule",SportsScoresAndScheduleFull:"sports-scores-and-schedule-full",SportsSquad:"sports-squad",SportsStandings:"sports-standings",SportsStandingsList:"sports-standings-list",SportsStats:"sports-stats",SportsTabLayout:"sports-tab-layout",SportsTeamFormation:"sports-team-formation",SportsTeamProbability:"sports-team-probability",SportsTennisScoresAndScheduleFull:"sports-tennis-scores-and-schedule-full",SportsTennisTournamentInfo:"sports-tennis-tournament-info",SportsTournamentInfo:"sports-tournament-info",SportsTournamentLeaderboard:"sports-tournament-leaderboard",SportsTournamentMatchRow:"sports-tournament-match-row",SportsTournamentResultsAndSchedule:"sports-tournament-result-and-schedule",SportsTournamentSchedule:"sports-tournament-schedule",SportsTournamentStandings:"sports-tournament-standings",SportsUnavailablePlayers:"sports-unavailable-players",SportsVideoList:"sports-video-list",SportsWorldCupCardWC:"sports-worldcup-card",SpotlightCardWC:"spotlight-card",StarterKitWC:"starter-kit",StickyPeek:"sticky-peek",StoryCarousel:"story-carousel",StripeWC:"stripe-wc",SummaryCardWC:"summary-card-wc",SuperBreakingNews:"super-breaking-news",SuperCoachMarkWC:"super-coach-mark",SuperListCard:"super-list-card",SuperNav:"super-nav",SuperNavCoachMark:"super-nav-coach-mark",SuperappBannerWC:"superapp-banner",SuperappUpsellCardWC:"superapp-upsell-card",TabbedFeedWC:"tabbed-feed-card",TestBingNudge:"test-bing-nudge",ThemePickerWC:"theme-picker",TipsCard:"tips-card",ToastWC:"ms-toast",TodoCardWC:"todo-card",TopSitesEdgeNextWC:"top-sites-edgenext",TopSitesNewsbar:"top-sites-newsbar",TopicTags:"topic-tags",TrafficCardWC:"traffic-card",TravelArticlePageCard:"travel-article-page-card",TravelArticlePill:"travel-article-pill",TravelCard:"travel-card",TravelCarousel:"travel-carousel",TravelCollectionCard:"travel-collection-card",TravelDestination:"travel-destination",TravelDestinationBanner:"travel-destination-banner",TravelDestinationDetailsBanner:"travel-destination-details-banner",TravelFeed:"travel-feed",TravelInspirationCardWC:"travel-inspiration-card-wc",TravelLandingPage:"travel-landing-page",TravelSaveButton:"travel-save-button",TravelSdDestinationsCard:"travel-sd-destinations-card",TravelSdFlightsCard:"travel-sd-flights-card",TravelSdHotelsCard:"travel-sd-hotels-card",TravelSdThemesCard:"travel-sd-themes-card",TravelTabCarousel:"travel-tab-carousel",TravelTourActivityCard:"travel-tour-activity-card",TrendingNowWC:"trending-now-card",TrendingSearchCard:"trending-search-card",TrendingTopics:"trending-topics-card",UgcCreatorHomepage:"ugc-creator-homepage",UpnextPaddle:"upnext-paddle",VerticalLeftNav:"vertical-left-nav",VideoCardWC:"video-card",VideoDetails:"video-details",VideoShoppingCard:"video-shopping-card",VideoShoppingCarouselCard:"video-shopping-carousel-card",ViewsCoachmark:"views-coachmark",ViewsNativeAd:"views-native-ad",ViewsRail:"views-rail",VoiceSearchWC:"voice-search-wc",WaffleWC:"waffle-wc",WalletPersonalizedOfferSdCardWC:"wallet-personalized-offer-sd-card-wc",WatchWC:"watch-wc",WaterTrackerCard:"water-tracker-card",WeatherCardWC:"weather-card",WeatherCurrentWC:"weather-current",WeatherForecastDayNightWC:"weather-forecast-day-night",WeatherForecastDayWC:"weather-forecast-day",WeatherForecastHistoryWC:"weather-forecast-history",WeatherForecastPerHourWC:"weather-forecast-per-hour",WeatherForecastSunMoonPhaseWC:"weather-forecast-sun-moon-phase",WeatherForecastSunMoonWC:"weather-forecast-sun-moon",WeatherHistoricalRecordWC:"weather-historical-record",WeatherHistoricalTemperatureWC:"weather-historical-temperature",WeatherHourlyHistogramWC:"weather-hourly-histogram",WeatherImmersiveForecastWC:"weather-immersive-forecast-wc",WeatherInfoSpan:"weather-info-span",WeatherLifeEntryWC:"weather-life-entry",WeatherLocationCardWC:"weather-location-card",WeatherLocationSearchPhoneWC:"weather-location-search-phone",WeatherLocationWC:"weather-location",WeatherMapGroupSwitcherButtonWC:"weather-map-group-switcher-button",WeatherMapLegendWC:"weather-map-legend",WeatherMapTimelineWC:"weather-map-timeline",WeatherMapWC:"weather-map",WeatherMinimapWC:"weather-minimap",WeatherMonthlySummaryWC:"weather-monthly-summary",WeatherOverviewWC:"weather-overview",WeatherPageWC:"weather-page",WeatherTodayHistoryWC:"weather-today-history",WeatherTodayMiniWC:"weather-today-mini",WelcomeGreetingWC:"welcome-greeting",FeedLevelFeedbackWC:"feed-level-feedback-wc",WidgetPickerWC:"widget-picker-wc",WidgetsDynamicFeed:"widgets-dynamic-feed",WidgetsHomePage:"widgets-home-page",WinAppWC:"win-app-wc",WindowsOfficeFeed:"windows-office-feed",WindowsShellEntry:"windows-shell-entry",WindowsShellHeader:"windows-shell-header",XboxFeedWC:"xbox-feed-wc",XfeedWC:"xfeed-wc",YandexSearchBoxWC:"yandex-search-box"};function r(e){return n[e]}},10209:function(e,t,i){"use strict";i.d(t,{Fg:function(){return M},pE:function(){return D},we:function(){return R}});var n,r=i(33940),o=i(21050),s=i(26415),a=i(68364),c=i(32181),d=i(8158),l=i(89638);!function(e){e.OneColumn="OneColumn",e.TwoColumn="TwoColumn",e.ThreeColumn="ThreeColumn",e.FourColumn="FourColumn",e.FiveColumn="FiveColumn",e.Any="Any"}(n||(n={}));var u,p=i(82683),g=i(14816);!function(e){e.riverGridChildren="riverGridChildren"}(u||(u={}));var h=i(88828),m=i(14989),f=i(52965),v=i(85663);class y{static registerAppValidator(e){this.expValidatorMap=e.getAllValidators()}static processConfig(e,t){if(!this.expValidatorMap||this.expValidatorMap.size<1||!e||!e.childExpValidatorMap)return e;const i=e.childExpValidatorMap;let n=null,r=null;for(const o in i){const s=i[o];if(this.expValidatorMap.has(o)){this.expValidatorMap.get(o)(s.validationArgs)&&(null===r&&(r=this.expConfigMap.get(t)||e),null===n&&(n=(0,f.Z)(r)),e=this.filterConfig(s,r))}}return n?this.expConfigMap.set(t,n):null===r&&this.expConfigMap.has(t)&&(e=this.expConfigMap.get(t)),e}static removeFromRiverGridChildren(e,t){const i=t.riverGridChildren;return i&&i.forEach((t=>{const i=t.children;if(i){const n=e.childExperienceConfigInfo,r=(0,c.M)(n);t.children=i.filter((e=>{const t=e.childExperienceConfigInfo;return!t||!n||n.instanceId!==t.instanceId||r!==(0,c.M)(t)}))}})),t}static getChildrenDataConnectorConfigInfos(e){const t=[];if(e&&e.dataConnectors&&e.dataConnectors.length>0){const i=y.getOrdinalObjectForCurrentBreakpoint(e.dataConnectors);i&&i.children&&i.children.length>0&&i.children.forEach((e=>{t.push(e)}))}return t}static getMetadataByScreenWidth(e,t){return t.find((t=>t.screenWidth===e))||t.find((e=>e.screenWidth===n.Any))}static getOrdinalObjectForCurrentBreakpoint(e){switch((0,h.Bn)().currentColumnArrangement){case m.K$.c1:return y.getMetadataByScreenWidth(n.OneColumn,e);case m.K$.c2:return y.getMetadataByScreenWidth(n.TwoColumn,e);case m.K$.c3:return y.getMetadataByScreenWidth(n.ThreeColumn,e);case m.K$.c4:return y.getMetadataByScreenWidth(n.FourColumn,e);case m.K$.c5:return y.getMetadataByScreenWidth(n.FiveColumn,e);default:return y.getMetadataByScreenWidth(n.Any,e)}}static compositionOverrideResolver(e,t){const{getCompositionIdOverride:i}=t||{},{composition:n,compositionOverrides:r}=e;return r&&(0,v.isFunction)(i)&&r[i()]||n}static getChildrenExperienceConfigInfos(e,t){const i=[];if(e&&e.composition){const n=y.compositionOverrideResolver(e,t);switch(n.type){case p.O.horizontalStack:case p.O.layout:n.page.children.forEach((e=>{void 0!==e.children&&e.children.forEach((e=>{if(!e.children)return;const{childType:t}=e.children;t?t===g.f.peregrineExperience&&i.push(e.children.child):i.push(e.children)}))}));break;case p.O.grid:n.grid.rows.forEach((e=>{void 0!==e.columns&&e.columns.forEach((e=>{const{itemType:t}=e.item;t&&t===g.f.peregrineExperience&&i.push(e.item.child)}))}));break;case p.O.customExperience:{const e=n;i.push(e.experience);break}}}return i}static filterConfig(e,t){return e&&"string"==typeof e.sectionName&&e.sectionName.toLowerCase()===u.riverGridChildren.toLowerCase()?this.removeFromRiverGridChildren(e,t):t}static resetValidatorMap(){this.expValidatorMap.clear()}static resetConfigMap(){this.expConfigMap.clear()}}y.expValidatorMap=new Map,y.expConfigMap=new Map;var b=i(4734),S=i(76950),C=i(82423),w=i(9791),T=i(80163),k=i(33379),A=i(27003);const I="WebComponentLoader.DefinedExprience",P="WebComponentLoader.SkippedExperience",E="WebComponentLoader.LoadedExperience",O="WebComponentLoader.ModuleLoadPromiseMap",M=(0,k.N)()?(0,w.Z)(x,(e=>(0,c.B5)(e.configRef))):x;function x(e){return(0,r.mG)(this,void 0,void 0,(function*(){try{const{configRef:t,configRef:{experienceType:n}}=e;if(A.Gq.get(P,(()=>new Set)).has(n))return;const s=(0,b.gy)(n);s&&s.shouldResolve&&(yield s.shouldResolve()),(0,k.N)()||A.Gq.get(E,(()=>[])).push(e);const a=(0,o.oA)(n,e.instanceId),c=R(t,a),l=function(e,t){const i=A.Gq.get(O,(()=>({})));let n=i[e];if(n)return n;return n=(0,o.fW)((()=>d.n.loadExperience(e)),"scripts",t),i[e]=n,n}(n,a),u=(yield Promise.all([c,l]))[1];yield function(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const n=A.Gq.get(I,(()=>new Set));n.has(e)||(n.add(e),yield function(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const n=t[e],r=t[e+"Template"],o=t[e+"Styles"],s=(0,S.ITY)(e),a=(0,T.q)(e),c=yield Promise.resolve().then(i.bind(i,27815));if(c.FASTElement.define(n,Object.assign({name:s,template:r,styles:o},n.definition)),a){class e extends n{}c.FASTElement.define(e,Object.assign({name:a,template:r,styles:o},n.definition))}}))}(e,t))}))}(n,u)}catch(t){const i=Object.assign({},s.gzO);(0,a.OO)(t,i,"Loading web component experience failed.",void 0,{configInfo:e})}}))}function D(e){return(0,r.mG)(this,void 0,void 0,(function*(){yield Promise.all(e.map((e=>M(e))))}))}function R(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const i=yield(0,o.fW)((()=>l.U.getConfig(e)),"config",t);if(!i)return;const n=i.properties;if(!n||!n.dataConnectors||n.dataConnectors.length<=0)return;const r=t&&t.startMeasure("loadDataConnectors").endMeasure,s=y.getChildrenDataConnectorConfigInfos(n).map((e=>(0,C.Ki)(e)));yield Promise.all(s),r&&r()}))}},28696:function(e,t,i){"use strict";i.d(t,{Y:function(){return s},w:function(){return o}});const n={};let r=1;function o(e){if(!e)return;for(const[t,i]of Object.entries(n))if(i===e)return t;const t=r.toString();return n[t]=e,r++,t}function s(e){const t=n[e];return delete n[e],t}},72462:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});var n=i(49218),r=i(73252),o=i(81563);function s(e,t){return r.Al.CurrentFlightSet.has("prg-ssreagerconnect")&&window.isSSREnabled?n.dy`${(0,o.Ot)(e,t)}${t=>window.isSSREnabled&&n.dy`<script nonce="${()=>window.NONCE_ID}">
    window.ssrLoadedExperience.publish(${n.dy.partial(JSON.stringify(e))})
    </script>`}`:(0,o.Ot)(e,t)}},64193:function(e,t,i){"use strict";i.d(t,{T:function(){return O},l:function(){return E}});var n=i(33940),r=i(89638),o=i(84169),s=i(82890),a=i(83227),c=i(28904),d=i(42590),l=i(68364),u=i(26415),p=i(79278),g=i(61502),h=i(22704),m=i(19388),f=i(14675),v=i(53301),y=i(4734),b=i(38156),S=i(92402);class C extends Event{constructor(e){super(C.type,{bubbles:!0,composed:!0}),this.complete=e}static isPendingTask(e){var t;return e.type===C.type&&"function"==typeof(null===(t=e.complete)||void 0===t?void 0:t.then)}}C.type="pending-task";var w=i(60483),T=i(33379),k=i(28696),A=i(49786),I=i(76858);const P="props-token";class E extends c.H{constructor(){super(...arguments),this.ensureObservableBeforeConnect=!1,this.hydratable=!1,this.isSSRRendered=!1,this.needPendingTask=!1}connectedCallback(){if((0,T.N)())this.hydratable=this.hasAttribute("defer-hydration")||this.hasAttribute("needs-hydration"),this.isSSRRendered=this.hasAttribute("needs-hydration"),this.initializeAsync();else{const e=this.initializeOnServerSide();this.needPendingTask&&this.dispatchEvent(new C(e))}}initializeOnServerSide(){const e=Object.create(null,{connectedCallback:{get:()=>super.connectedCallback}});return(0,n.mG)(this,void 0,void 0,(function*(){this.needPendingTask=!1;const t=this.getExperienceType();try{const t=this.getConfigRef();if(!this.config){let e;if("string"!=typeof t)try{e=r.U.getConfigSync(t)}catch(e){}e||(this.needPendingTask=!0,e=yield r.U.getConfig(t)),this.config=e.properties}if(this.strings=this.config.localizedStrings,!this.telemetryObject){const e=this.getTelemetryContract();this.telemetryObject=new w.D(e)}const i=this.experienceConnected();i&&(this.needPendingTask=!0,yield i),e.connectedCallback.call(this),this.shadowDomPopulated()}catch(e){(0,l.OO)(e,u.xuo,`Exception web component experience(${t}) initializeOnServerSide.`)}}))}initializeAsync(){const e=Object.create(null,{connectedCallback:{get:()=>super.connectedCallback}});return(0,n.mG)(this,void 0,void 0,(function*(){this.hydratable&&(yield(0,S.ZH)(this));const t=this.getExperienceType(),i=this.perfTimeline=(0,p.Dd)(t,this.instanceId),n=i&&i.startMeasure("init").endMeasure;this.fetch=(0,g.Ud)(i),(0,h.O8)("WCE.Count"),this.reportStartTimeToMilestoneConnector(v.g.updateVisuallyReadyTiming);try{const o=this.getConfigRef();if(!this.config){const e=yield r.U.getConfig(o);this.config=e.properties}if(this.strings=this.config.localizedStrings,!this.telemetryObject){const e=this.getTelemetryContract();this.telemetryObject=new w.D(e)}const{stalenessInfo:s}=this.config;s&&s.isStaleCheckRequired&&(0,A.MV)({experienceType:t,thresholdMinutes:s.staleThreshold,criticalCallback:()=>this.prerenderRefreshCritical(),delayCallback:()=>this.prerenderRefresh()}),this.ensureObservableBeforeConnect&&this.$fastController.bindObservables();const a=this.experienceConnected();a&&(yield a),this.hydratable&&(yield this.beforeHydration()),e.connectedCallback.call(this),this.shadowDomPopulated(),this.hydratable&&(yield this.afterHydration()),i&&(0,p.d0)(this,this.perfTimeline,I.y),n&&n()}catch(e){(0,l.OO)(e,u.xuo,`Exception web component experience initializeAsync. ExperienceType: ${t}`),this.logCriticalException(),n&&n({customSuffix:"error"})}finally{this.initToVisuallyReadyEndMeasure=i&&i.startMeasure("render").endMeasure}}))}experienceConnected(){}beforeHydration(){}afterHydration(){}shadowDomPopulated(){}prerenderRefreshCritical(){return Promise.resolve(void 0)}prerenderRefresh(){}logCriticalException(){}getConfigRef(){return o.jG.IsGitConfigs?{instanceSrc:this.instanceSrc,experienceType:this.getExperienceType(),sharedNs:this.sharedNs}:this.instanceSrc}getTelemetryContract(){return{type:b.c9.Module,name:this.getExperienceType()}}getApproxTTVRValue(e){let t;const i=(0,h.Ou)(),n=e||this.getExperienceType();return this.isSSRRendered&&i[s.p.isSSRCompleted]&&-1==a.$.indexOf(n)&&(t=i[m.nz+s.p.complete]),t}markVisuallyReady(e){e=this.getApproxTTVRValue()||e;const t=(0,m.o_)(this.getExperienceType(),!1,e);return this.reportEndTimeToMilestoneConnector(v.g.updateVisuallyReadyTiming,e),this.initToVisuallyReadyEndMeasure&&this.initToVisuallyReadyEndMeasure(),t}markVisuallyReadyRaf(e){(0,f.c)((()=>this.markVisuallyReady(e)))}reportStartTimeToMilestoneConnector(e){this.reportTimeToMilestoneConnector(e,performance.now())}reportEndTimeToMilestoneConnector(e,t){this.reportTimeToMilestoneConnector(e,void 0,t||performance.now())}reportTimeToMilestoneConnector(e,t,i){const n=(0,y.S0)();n&&e.getActionSender(n).send({experienceType:this.getExperienceType(),experienceInstance:this.instanceId,startTime:t,endTime:i})}attributeChangedCallback(e,t,i){if(super.attributeChangedCallback(e,t,i),e===P){const e=(0,k.Y)(i);Object.assign(this,e)}}}(0,n.gn)([(0,d.Lj)({attribute:"config-instance-src"})],E.prototype,"instanceSrc",void 0),(0,n.gn)([(0,d.Lj)({attribute:"config-shared-ns"})],E.prototype,"sharedNs",void 0),(0,n.gn)([(0,d.Lj)({attribute:"instance-id"})],E.prototype,"instanceId",void 0),(0,n.gn)([(0,d.Lj)({attribute:P})],E.prototype,"propsToken",void 0);class O extends E{afterHydration(){this.isSSRRendered&&(0,S.zb)(this)}}},81563:function(e,t,i){"use strict";i.d(t,{Ot:function(){return v}});var n=i(31699),r=i(85594),o=i(49218),s=i(32181),a=i(82128),c=i(76950),d=i(10209),l=i(38156),u=i(60483),p=i(19388),g=i(33379);const h={};function m(e,t){if(!t)return;const{properties:i,attributes:r}=t;if(i&&Object.assign(e,i),r)for(const[t,i]of Object.entries(r))"boolean"==typeof i?n.S.setBooleanAttribute(e,t,i):e.setAttribute(t,i)}class f extends r.Pq{bind(e){e.onUnbind(this);const t=e.targets[this.targetNodeId],{events:i,properties:n,instanceKey:r}=this.options||{};if(i)for(const[e,n]of Object.entries(i))t.addEventListener(e,n);let o;if(r&&(o=h[r]),o)return o.elements.push(t),!t.telemetryObject&&(null==n?void 0:n.telemetryObject)&&(t.telemetryObject=n.telemetryObject),void m(t,o.options);Object.assign(t,n)}unbind(e){var t,i,n;const r=e.targets[this.targetNodeId];if(null===(t=this.options)||void 0===t?void 0:t.events)for(const[e,t]of Object.entries(null===(i=this.options)||void 0===i?void 0:i.events))r.removeEventListener(e,t);const o=null===(n=this.options)||void 0===n?void 0:n.instanceKey;if(o){const e=h[o];if(e){const t=e.elements.indexOf(r);t>=0&&e.elements.splice(t,1)}}}}function v(e,t){if(!e)return;t&&t.ttvrMarkerAggregate&&e&&e.configRef&&e.configRef.experienceType&&(0,p.aR)(e.configRef.experienceType,t.ttvrMarkerAggregate,!0);const i=function(e,t){const{configRef:i}=e,n=function(e){const t=null==e?void 0:e.properties;return null==t?void 0:t.cardLayout}(t),r=function(e){const t=null==e?void 0:e.properties;return null==t?void 0:t.cardType}(t),o=r?`_${r}`:"";return`${i.experienceType}_${i.instanceSrc}_${i.sharedNs||""}_${e.instanceId}_${n||""}${o}`}(e,t);if(!1!==(null==t?void 0:t.memoize)&&(0,g.N)()){const n=h[i];let r;if(n){if(t)for(const e of n.elements)m(e,t);n.options=t,r=n.template}else r=y(e,i,t),h[i]={template:r,options:t,elements:[]};return r}return y(e,i,t)}function y(e,t,i){var n;let r=null==i?void 0:i.telemetryObject;if(!r){const t={type:l.c9.Module,name:e.configRef.experienceType};r=new u.D(t)}const p=Object.assign(Object.assign({},null==i?void 0:i.properties),{telemetryObject:r});let g;!1!==(null==i?void 0:i.includeTelemetryTag)&&(g=r.getMetadataTag());const h={instanceKey:t,events:null==i?void 0:i.events,properties:p},m=(0,s.M)(e),v=(0,a.g)(e),y=(0,c.ITY)(m);(0,d.Fg)(e);const b=Object.entries(null!==(n=null==i?void 0:i.attributes)&&void 0!==n?n:{}).map((([e,t])=>"boolean"==typeof t?t?e:"":`${e}=${t}`)).join(" ");return o.dy`<${o.dy.partial(y)} config-instance-src=${o.dy.partial(v)} config-shared-ns=${t=>{var i;return null===(i=e.configRef)||void 0===i?void 0:i.sharedNs}} instance-id=${o.dy.partial(e.instanceId)} data-t=${e=>g} ${function(e){return e?new f(e):""}(h)} ${o.dy.partial(b)}></${o.dy.partial(y)}>`}r.m0.define(f)},76858:function(e,t,i){"use strict";i.d(t,{y:function(){return r}});var n=i(31699);function r(){return new Promise((e=>n.S.queueUpdate((()=>e()))))}},82855:function(e,t,i){"use strict";i.d(t,{Bc:function(){return d},Kd:function(){return a},LB:function(){return s},Mx:function(){return o},W_:function(){return c},sW:function(){return l}});var n=i(38895),r=i(95527);function o(e){if(!e||0===e.length)return e;const t=[];return e.forEach((e=>{const i=e.toLocaleLowerCase().trim();i.startsWith(n.PC)&&t.push(i)})),t.sort()}function s(e,t,i){return!(!i||!e||e<n.PQ)&&!t}function a(e){if(!e||!e.length)return e;const t=[];return e.forEach((e=>{const i=e.trim();i.startsWith(r.SD)&&t.push(i)})),t.sort()}function c(e,t,i){try{return e&&t&&t.includes(n.my)&&"weather"!==i&&"finance"!==i?n.SL:e}catch(e){}return e}function d(e,t=!1){const{itemOverrides:i}=e||{},n=i&&i.find((e=>"should1sUseFdheadQsp"===e.key));if(n&&n.value)return"true"===n.value;if(t)return!1;const r=i&&i.find((e=>"flights"===e.key||"appendflights"===e.key.toLowerCase()));return!!(r&&r.value&&r.value.length>0)}function l(e,t,i){const r="edgeChromium"===i,o="windowsShell"===i||"windowsShellV2"===i,s="newsAndInterests"===i||"windowsNewsPlus"===i||"winWidgets"===i;return t&&u(e,n.Js,r)?n.NH:r||u(e,n.x7,o)||u(e,n.cX,s)?t?null:n.pN:null}function u(e,t,i){return i&&e&&e.length>0&&e.includes(t)}},77316:function(e,t,i){"use strict";i.d(t,{q:function(){return M}});var n=i(33940),r=i(25568),o=i(12108),s=i(33799),a=i(99704),c=i(84169),d=i(47903),l=i(73252),u=i(58155),p=i(19809),g=i(63535),h=i(15443),m=i(12884),f=i(33379),v=i(4875),y=i(51671),b=i(35357),S=i(65135),C=i(26415),w=i(51125),T=i(75384),k=i(84754),A=i(11765),I=i(75192);const P="gaming",E="following";function O(e){return!(null==e||""===e||"string"!=typeof e&&"number"!=typeof e||isNaN(e))}var M;!function(e){function t(e,t,i){var g;return(0,n.mG)(this,void 0,void 0,(function*(){const n=new d.h((0,m.zp)()),v=c.jG.UserId,{CurrentRequestTargetScope:M={},WidgetAttributes:x={},CurrentMarket:D}=c.jG;let R=t&&t.flightData;if(x.telemetry&&x.telemetry.tmpl&&x.telemetry.tmpl.includes("pwbingads2")){const e="prg-binghplite";R=R?`${R},${e}`:e}let L=new d.h(e);if(t.nextPageUrl){if(L=new d.h(new URL(t.nextPageUrl).search),!c.jG.SendFeedCallActivityIdInHeader&&c.jG.ActivityId){const e=l.Al.CurrentFlightSet.has("prg-prsw");"channel"===c.jG.AppType||e&&"edgeChromium"===c.jG.AppType&&L.get("activityId")||L.set("activityId",c.jG.ActivityId)}}else{const e=(yield(0,y.XJ)())===s.Hy.SignedIn;h.n.publish(h.j.userIsSignedIn,{isSignedIn:e,src:"main"});(e?p.$.getOneServiceParamsWithAuth(v,t.ocid,!1,R||null):p.$.getOneServiceParamsWithoutAuth(v||t.muidFallback&&`m-${c.jG.ActivityId}`,t.ocid,!1,R||null)).forEach((e=>e.value&&L.set(e.key,e.value))),L.set("contentType",t.contentType),t.requestType===a.xd.wpoService&&function(e,t,i,n){"startgg-feeds"===e.ocid?t.set("apikey",r.xE):t.set("apikey",r.GR);(e.useDelta||e.sessionId)&&(t.set("delta","true"),e.sessionId&&t.set("session",e.sessionId));t.get("newsTop")||t.set("newsTop",O(e.numberOfCards)?e.numberOfCards:"48");t.get("newsSkip")||t.set("newsSkip","0");e.feedId||t.get("infopaneCount")||t.set("infopaneCount",`${O(e.infopaneCount)?e.infopaneCount:r.di}`);if(!t.get("User")){const e=t.get("userid");e?t.set("User",`m-${e}`):(t.set("User",i),null===i&&function(e,t){S.M0.sendAppErrorEvent(Object.assign(Object.assign({},C.D2d.WpoGetMuidFailure),{message:"Cannot get MUID.",pb:Object.assign(Object.assign({},C.D2d.WpoGetMuidFailure.pb),{customMessage:`${e}; ProbableCause: cannot access cookie`,url:t,activityId:c.jG.ActivityId})}))}("Using OneServiceUrl",n))}t.delete("user")}(t,L,v,i),t.feedId&&L.set("InterestIds",t.feedId);if(t.feedName&&"default"!=t.feedName&&t.feedName===P){const e=n.get("gamingInterestId");if(e)L.set("query",e);else{const e=null!==(g=window.widget__query)&&void 0!==g?g:t.query;L.set("query","string"==typeof e?e:"core gaming");const{pageType:i}=x;"gamingfeed-widget"===i&&L.set("wpopageid","wponoads");const n=window.widget__satoriId;"string"==typeof n&&L.set("ids",n)}}}!0===t.disableContent&&L.set("disablecontent","true"),t.edgExpMask&&L.set("edgExpMask",t.edgExpMask),t.timeoutMs&&L.set("timeOut",t.timeoutMs.toString());const F=(0,w.Ee)();F>0&&L.set("cbypass",F.toString()),t.wpoPageId&&("wpoads"===t.wpoPageId.toLowerCase()&&"en-us"!==(null==D?void 0:D.toLowerCase())?L.set("wpopageid","wponoads"):L.set("wpopageid",t.wpoPageId)),t.wpoSchema&&L.set("wposchema",t.wpoSchema),t.newsTop&&L.set("newsTop",t.newsTop.toString()),t.newsSkip&&null==t.nextPageUrl&&L.set("newsSkip",t.newsSkip.toString()),(t.enableRightRailColumn||t.renderSingleColumn||t.renderEnterpriseSingleColumn)&&L.set("wpopageid",t.wpoPageId),t.installedWidgets&&t.installedWidgets.length&&L.set("installedWidgets",t.installedWidgets.join(",")),t.clientLayoutVersion&&L.set("clv",t.clientLayoutVersion),t.layout&&L.set("layout",t.layout),c.jG.SendFeedCallActivityIdInHeader&&L.delete("activityId"),(0,f.N)()?t.isRetry?L.set("caller","retryForTimeout"):t.refreshType&&L.set("caller",t.refreshType):L.set("caller","ssr"),t.isDhp&&L.set("dhp","1"),t.isXFeed&&L.set("rid",t.requestId),t.private&&L.set("private","1"),t.apiKey&&L.set("apikey",t.apiKey),t.audienceMode&&(L.set("audienceMode",(null==M?void 0:M.audienceMode)||t.audienceMode),t.audienceMode===o.F.Kids&&"channel"!==c.jG.AppType&&(L.set("apikey",r.os),L.set("ocid",r.vy)));const N=(0,k.UU)();if(t.feedName===P&&"anaheim-ntp-feeds"===t.ocid&&N&&(L.set("ocid",r.$v),L.set("apikey",r.gr)),t.enableWpoAdPlacements){const e=l.Al.ClientSettings.browser&&"true"===l.Al.ClientSettings.browser.ismobile||"phone"===l.Al.ClientSettings.deviceFormFactor?"true":"false";L.set("mobile",e);const t=(0,b.rv)()||(0,b.hI)();L.set("cookieWallPresent",t.toString())}const B=n.get("wpoitems");B&&L.set("wpoitems",B.toString());const j=n.get("bypass_trigger");j&&!t.feedId&&L.set("bypass_trigger",j.toString()),c.jG.ShouldUseFdheadQsp&&L.set("fdhead",t.fdhead),(0,T.TR)()&&L.set("prerender","1"),t.aver&&L.set("aver",t.aver),t.theme&&L.set("theme",t.theme),t.over&&L.set("over",t.over),t.oem&&L.set("oem",t.oem),t.devicetype&&L.set("devicetype",t.devicetype),t.smode&&L.set("smode",t.smode),t.usri&&L.set("usri",t.usri),t.duotone&&L.set("duotone",t.duotone.toString());const $=window&&window.navigator&&window.navigator.deviceMemory;$&&L.set("memory",$.toString());(l.Al.CurrentFlightSet.has("prg-forcenoads")||(yield(0,k.VS)()))&&L.set("edgenoads","1");(l.Al.CurrentFlightSet.has("prg-forceredads")||(yield(0,k.OM)()))&&L.set("edgereduceads","1");const U=l.Al.ClientSettings&&l.Al.ClientSettings.queryparams?l.Al.ClientSettings.queryparams:"",H=new d.h(U).get("canid");if(H&&L.set("triggerModules","promoxfeedupsell".concat(":",H)),"anaheim-ntp-feeds"===t.ocid&&(t.feedName===E||"default"===t.feedName)&&(yield A.L.isApiAvailableToUse())){const e=yield A.L.getPreferenceSetting(I.nc.seen_interest_fre_count);let i=!1;if((!e||!e.value||e&&"number"==typeof e.value&&e.value<3&&(new Date).getTime()-e.timestamp>2592e5)&&(i=!0),i){const e=yield A.L.getPreferenceSetting(I.nc.visited_following_feed),t="1"===u.c.getQueryParameterByName("firstlaunch",location.href);e&&e.value&&!t?L.set("overlay","true"):L.set("overlay","nfu")}else L.set("overlay","false");t.feedName===E&&(yield A.L.savePreferenceSetting(I.nc.visited_following_feed,{setting:I.nc.visited_following_feed,source:"ntp",timestamp:(new Date).getTime(),value:!0}))}const _=u.c.getParamsWithItems(location.search);if(_){const e=_.find((e=>e.key===a.VL));if(e){const i=t.contentType?t.contentType:"article,video,slideshow",n=[...new Set(`${i},${e.value}`.split(","))];L.set("contentType",n.join(","))}const i=_.find((e=>e.key===a.Ow));i&&i.value&&L.set("installedWidgets",i.value)}return L.toString()}))}e.requestInit=function(e){return(0,n.mG)(this,void 0,void 0,(function*(){e=e||{};const t={method:"GET"},i=yield p.$.getOneServiceFeedCallHeaders((0,v.VQ)(),e.feedName,e.useXboxAccessToken);t.headers=Object.assign(Object.assign({},i),e.additionalHeaders),e.credentialsOverride?t.credentials=e.credentialsOverride:t.credentials="include",e.enableWpoAdPlacements&&(t.headers["ads-referer"]=location.href,t.headers["taboola-sessionId"]=e.taboolaSessionId||"init");const n=c.jG.UserId;return e.requestType!==a.xd.wpoService||n||(t.headers.MUID=c.jG.ActivityId),t}))},e.buildRequestURLForOneService=function(e){return(0,n.mG)(this,void 0,void 0,(function*(){let i;e=e||{};const n=`${r.lP}${e.feedName===E?"ntpfollowfeed":e.pageScenario}`;return i=new d.h((0,m.zp)()).get(r.YU)?new URL(n,r.LJ):(0,g.fU)(n),i.search=yield t(i.search,e,i.href),i.searchParams.sort(),i}))},e.buildServiceRequestURL=function(e){var i;return(0,n.mG)(this,void 0,void 0,(function*(){let n;e=e||{};const{CurrentRequestTargetScope:s={},ConfigServiceBaseUrl:a}=c.jG,u=new d.h((0,m.zp)()),p=null!==(i=e.pageScenario)&&void 0!==i?i:e.shouldUseNewWpoEndpoint?r.bx:r.$s;let h=e.requestPathOverride?`${e.requestPathOverride}${p}`:`${r.Mo}${p}`;h=function(e){return e&&e===`${r.Mo}${r.bx}`&&l.Al&&l.Al.CurrentFlightSet&&l.Al.CurrentFlightSet.has(r.CO)&&"edgeChromium"===c.jG.AppType?`${r.hk}${r.bx}`:e}(h);const v=e.feedName&&"default"!=e.feedName;if(e.feedId||v)switch(e.feedName){case E:h=`${r.Mo}${r.ly}`;break;case P:h=`${r.Mo}${r.I1}`;break;case"sports":h=`${r.Mo}${r.Qn}`;break;default:h="work"===e.feedSource?`${r.Mo}${r.UW}`:`${r.Mo}${r.J8}`}e.isXFeed&&e.xFeedPageScenario&&(h=`${r.Mo}${e.xFeedPageScenario}`);const y=(0,f.N)();if(y&&["enabled","true"].includes(u.get(r.YU)))e.audienceMode===o.F.Kids||(null==s?void 0:s.audienceMode)===o.F.Kids||e.feedId?n=new URL(r.SO,r.LJ):(h=`${r.lP}${p}`,n=new URL(h,r.LJ));else if(y&&"enabled"===u.get(r.P$))n=new URL(h,a.origin);else if(function(e){return!e&&"edgeChromium"===c.jG.AppType&&c.jG.OneServiceOverride&&l.Al&&l.Al.CurrentFlightSet&&l.Al.CurrentFlightSet.has(r.IA)}(y))h=`${r.L3}${r.bx}`,n=new URL(h,c.jG.OneServiceOverride);else{const t=e.domainOverride?e.domainOverride:(0,g.qQ)().origin;n=new URL(h,t)}return n.search=yield t(n.search,e,n.href),n.searchParams.sort(),n}))}}(M||(M={}))},15443:function(e,t,i){"use strict";i.d(t,{j:function(){return a},n:function(){return s}});var n=i(17913),r=i(99590),o=i(27003);const s=(0,r.h)({getInstance:()=>o.Gq.get("__feed-card-provider__serviceRequestAuthSubscription__",(()=>new n.X))}),a={userIsSignedIn:"userIsSignedIn"}},99704:function(e,t,i){"use strict";var n,r,o,s;i.d(t,{Ow:function(){return c},Rx:function(){return s},VL:function(){return a},xd:function(){return o}}),function(e){e.activityId="x-client-activityid",e.authorization="Authorization",e.entAuthorization="Ent-Authorization",e.muid="MUID",e.adsReferer="ads-referer",e.taboolaSessionId="taboola-sessionId"}(n||(n={})),function(e){e.actionType="actionType",e.activityId="activityId",e.apiKey="apikey",e.audienceMode="audienceMode",e.aver="aver",e.bypassTrigger="bypass_trigger",e.cacheBypassQueryStringParamName="cbypass",e.channel="channel",e.cm="cm",e.complexInfoPaneEnabled="cipenabled",e.contentType="contentType",e.delta="delta",e.devicetype="devicetype",e.disableContent="disablecontent",e.dhp="dhp",e.disableTypeSerialization="DisableTypeSerialization",e.duotone="duotone",e.edgExpMask="edgExpMask",e.gamingInterestId="gamingInterestId",e.infopaneCount="infopaneCount",e.fdhead="fdhead",e.feedLayoutRequestType="t",e.filter="$filter",e.ids="ids",e.infoPaneItemCount="t =InfoPane.itemCount",e.location="location",e.market="market",e.memory="memory",e.newsTop="newsTop",e.newsSkip="newsSkip",e.ocid="ocid",e.oem="oem",e.over="over",e.overlay="overlay",e.parentContentId="parent-content-id",e.parentNamespace="parent-ns",e.parentTitle="parent-title",e.queryQ="q",e.query="query",e.queryType="queryType",e.qScope="qscope",e.responseSchema="responseSchema",e.satoriId="satoriId",e.select="$select",e.session="session",e.signInCookieName="scn",e.skip="$skip",e.smode="smode",e.source="source",e.targetType="targetType",e.theme="theme",e.timeOut="timeOut",e.top="$top",e.type="type",e.User="User",e.user="user",e.userid="userid",e.usri="usri",e.wpoitems="wpoitems",e.wpoPageId="wpopageid",e.wpoSchema="wposchema",e.wrapOData="wrapodata",e.cookieWallPresent="cookieWallPresent",e.caller="caller",e.installedWidgets="installedWidgets",e.clientLayoutVersion="clv",e.pageConfiguration="pgc",e.requestId="rid",e.interestIds="InterestIds",e.mobile="mobile",e.clientLocation="clientLocation",e.clientLocationProvider="clientLocationProvider",e.clientLocationAccuracy="clientLocationAccuracy",e.clientLocationTimeStamp="clientLocationTimeStamp",e.collectionIds="collectionIds",e.endTime="EndTime",e.eventType="EventType",e.exchangeCode="ExchangeCode",e.listIds="listIds",e.requireQuoteDetail="requireQuoteDetail",e.skipNum="skip",e.startTime="StartTime",e.topNum="top",e.prerender="prerender",e.layout="layout",e.triggerModules="triggerModules",e.promoXFeed="promoxfeedupsell",e.canid="canid",e.edgeNoAds="edgenoads",e.edgeReduceAds="edgereduceads",e.private="private"}(r||(r={})),function(e){e[e.oneService=0]="oneService",e[e.wpoService=1]="wpoService"}(o||(o={})),function(e){e.Bgtask="bgtask",e.Api="api",e.App="app",e.RetryFetch="retryFetch",e.Scroll="scroll"}(s||(s={}));const a="idxContentTypeOverride",c="installedWidgetsOverride"},81555:function(e,t,i){"use strict";i.d(t,{_:function(){return n}});const n={addTopSiteButton:"addTopSiteButton",backgroundInnerHolder:"backgroundInnerHolder",backgroundOuterHolder:"backgroundOuterHolder",cardAction:"cardAction",complianceHyperlink:"complianceHyperlink",feedToggle:"feedToggle",financeGreeting:"financeGreeting",following:"following",myInterests:"myInterests",gaming:"gaming",gridViewFeed:"gridViewFeed",headerSpaceHolder:"headerSpaceHolder",locationGreeting:"locationGreeting",marketSelector:"marketSelector",myFeed:"myFeed",navBar:"navBar",notificationBell:"notificationBell",office365:"office365",overlayArticleReader:"overlayArticleReader",personalizeButton:"personalizeButton",pillWC:"pillWC",recommendedSites:"recommendedSites",rewardsIcon:"rewardsIcon",rewardsButton:"rewardsButton",rightRailSectionKey:"rightRailSectionKey",scrollableContainer:"scrollableContainer",searchBox:"search-box-edgenext",searchBoxInput:"searchBoxInput",searchBoxVoiceButton:"searchBoxVoiceButton",searchHistory:"searchHistoryEdgeNext",seeAllLinksButton:"seeAllLinksButton",settingsButton:"SettingsButton",settingsCloseButton:"settingsCloseButton",settingsInformationalButton:"settingsInformationalButton",signInButton:"signInButton",singleColumnFeedRoot:"singleColumnFeedRoot",superCoachMark:"superCoachMark",topSitePlaceHolder:"topSitePlaceHolder",topSites:"topSites",topSitesFirstLink:"quicklinksFirstLink",waffle:"waffle",welcomeGreeting:"welcomeGreeting",navigationPage:"navigationPage"}},9533:function(e,t,i){"use strict";i.d(t,{FY:function(){return a},b_:function(){return c},h_:function(){return d}});var n=i(59294),r=i(27003);const o=()=>r.Gq.get("__global-element-map_elementMap__",(()=>new Map)),s=()=>r.Gq.get("__global-element-map_waitForElementMap__",(()=>new Map));function a(e,t){if(!t)return;o().set(e,t);const i=s().get(e);i&&i.set(t)}function c(e){return e?o().get(e):null}function d(e){if(!e)return Promise.reject(null);const t=c(e);if(c(e))return Promise.resolve(t);const i=s();if(i.has(e))return i.get(e).getResultAsync();const r=new n.o;return i.set(e,r),r.getResultAsync()}},10619:function(e,t,i){"use strict";i.d(t,{i:function(){return r}});var n=i(65135);class r{static registerTrackAppErrorEventCallback(e){e&&(this.trackAppErrorEventCallback=e)}static trackAppErrorEvent(e){this.trackAppErrorEventCallback&&this.trackAppErrorEventCallback(e)}}r.trackAppErrorEventCallback=e=>{n.M0&&n.M0.sendAppErrorEvent(e)}},22528:function(e,t,i){"use strict";i.r(t),i.d(t,{IrisDataConnector:function(){return B},IrisDataReducer:function(){return j},IrisImageHotSpotsDataValidator:function(){return U},IrisSurfaceName:function(){return p._l},RegisterErrorTrackingCallback:function(){return b.i},ToolingInfo:function(){return _},irisStorageUtility:function(){return n.Vv},isAadAccount:function(){return n.Jw},isNurturingAccepted:function(){return n.XA}});var n=i(12574),r=i(46065),o=i(33940),s=i(33954),a=i(26415),c=i(84169),d=i(65337),l=i(88352),u=i(58155),p=i(91881),g=i(6660),h=i(70260),m=i(6751),f=i(7781),v=i(23586),y=i(63439),b=i(10619),S=i(53076),C=i(12108),w=i(20126);const T={edge:"1",chrome:"2",internetExplorer:"3",firefox:"4",safari:"5",chromium:"6",edgeChromium:"6",[w.Q.Android]:"12",[w.Q.Ios]:"13"},k={homePage:"1",["edge"+C.G.DHP]:"2",["edgeChromium"+C.G.DHP]:"2",["edge"+C.G.NTP]:"3",["edgeChromium"+C.G.NTP]:"3",windows:"7",windowsShell:"7",finance:"8",hub:"8",weather:"8",views:"9",microsoftNews:"11",["mmx"+C.G.Launcher]:"12"},A={[w.Q.Windows]:"WIN10",[w.Q.Macos]:"MACOS",[w.Q.Linux]:"LINUX",[w.Q.Xbox]:"OTHER",[w.Q.Android]:"ANDROID",[w.Q.Ios]:"IOS"};var I=i(7009),P=i(73252),E=i(37180),O=i(90351),M=i(67462),x=i(85663),D=i(82423);class R{static runValidation(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){switch(e){case p._l.MSNAnaheimNewsNTPImages:case p._l.MSNAnaheimNewsNTPImages+p.Yq:{const i=!(0,x.isNullOrUndefined)(t)&&t,r=p.S5[e],o=n.Vv.hasUpdateTimeExpired(r,24),a=n.Vv.hasMarketChanged(r);if(!a&&!o&&!i||c.jG.IsFrePage)return void s.k.log(`IrisDataConnector: Image surface blocked: market changed - ${a}, has image expired - ${o}, dislike triggered - ${i}, FRE - ${c.jG.IsFrePage}.`);let d=null;const l=n.Vv.getImageInfo(r);if(i&&l){d={xSdkIaf:n.Vv.getDislikeList(l.dislikedCreatives)}}const u={addToCall:!0,headers:Object.assign({},d),parameters:Object.assign({},yield this.getCallParametersWithSessionContext(e,"1"))};return s.k.log(`IrisDataConnector: Image surface validated: market changed - ${a}, has image expired - ${o}, dislike triggered - ${i}, FRE - ${c.jG.IsFrePage}.`),u}case p._l.MSNNewsCoachmark:case p._l.MSNNewsCoachmark+p.Yq:{const t=n.Vv.hasUpdateTimeExpired(p.S5[e],24),i=n.Vv.hasMarketChanged(p.S5[e]);if(!t&&!i)return void s.k.log(`IrisDataConnector: Coachmark surface blocked: last update time expired - ${t}, market changed - ${i}.`);const r={addToCall:!0,parameters:Object.assign({},yield this.getCallParametersWithSessionContext(e,"0"))};return s.k.log(`IrisDataConnector: Coachmark surface validated: last update time expired - ${t}, market changed - ${i}.`),r}case p._l.WinHPCoachmark:case p._l.WinHPCoachmark+p.Yq:if(!e.endsWith(".int")){const t=n.Vv.hasUpdateTimeExpired(p.S5[e],24),i=n.Vv.hasMarketChanged(p.S5[e]);if(!t&&!i)return void s.k.log(`IrisDataConnector: WinHP Coachmark surface blocked: last update time expired - ${t}, market changed - ${i}.`)}return{addToCall:!0,parameters:Object.assign({},yield this.getCallParametersWithSessionContext(e,"0"))};case p._l.ConditionalBanner:case p._l.ConditionalBanner+p.Yq:{const t=n.Vv.hasUpdateTimeExpired(p.S5[e],24),i=n.Vv.hasMarketChanged(p.S5[e]);if(!t&&!i)return void s.k.log(`IrisDataConnector: Conditional Banner surface blocked: last update time expired - ${t}, market changed - ${i}.`);const r={addToCall:!0,parameters:Object.assign(Object.assign({},yield this.getCallParametersWithSessionContext(e,"0")),R.getConditionalBannerIrisCallParameters(e))};return s.k.log(`IrisDataConnector: Conditional Banner surface validated: last update time expired - ${t}, market changed - ${i}.`),r}case p._l.MSNewsRewards:case p._l.MSNewsRewards+p.Yq:{const t=n.Vv.hasUpdateTimeExpired(p.S5[e],24),i=n.Vv.hasMarketChanged(p.S5[e]);if(!t&&!i)return void s.k.log(`IrisDataConnector: Rewards surface blocked: last update time expired - ${t}, market changed - ${i}.`);const r={addToCall:!0,parameters:Object.assign({},yield this.getCallParametersWithSessionContext(e,"0"))};return s.k.log(`IrisDataConnector: Rewards surface validated: last update time expired - ${t}, market changed - ${i}.`),r}default:return void b.i.trackAppErrorEvent(Object.assign(Object.assign({},a.i29),{message:"Subscriber validation function not found.",pb:Object.assign(Object.assign({},a.i29.pb),{customMessage:"Subscriber: "+e})}))}}))}static getCallParametersWithSessionContext(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){const i={},r=[];i.nocookie="0"===t||"1"===t?t:"0";if("edgeChromium"===c.jG.AppType)for(const e in p.uS){const t=yield n.Vv.getIrisSessionContextAttribute(p.uS[e]);(0,x.isNullOrUndefined)(t)||""===t?p.uS[e]!==p.uS.AcquisitionPath&&p.uS[e]!==p.uS.ConsumerVsEnterprise&&p.uS[e]!==p.uS.PrimaryBrowser&&p.uS[e]!==p.uS.DefaultBrowser&&r.push(p.uS[e]):i[p.uS[e]]=t}const o=this.getPageConfiguration();return""!==o&&(i.pageConfig=o),c.jG&&"edgeChromium"===c.jG.AppType&&""===o&&r.push("pg.c"),r.length>0&&b.i.trackAppErrorEvent(Object.assign(Object.assign({},a.UX3),{message:"Missing parameters for subscriber",pb:Object.assign(Object.assign({},a.UX3.pb),{customMessage:`parameters ${r.toString()} for subscriber ${e}`})})),i}))}static getConditionalBannerIrisCallParameters(e){var t,i;const n={nocookie:"0"},r=(0,M.ej)(P.Al.AnonCookieName);n.ISSIGNEDIN=r?"1":"0";const o=(0,O.Z)(P.Al,"ClientSettings.apptype"),s=(0,O.Z)(P.Al,"ClientSettings.pagetype"),d=R.mapCanvasId(o,s),l=null===(t=null===c.jG||void 0===c.jG?void 0:c.jG.CurrentRequestTargetScope)||void 0===t?void 0:t.os;d&&(n.MSN_CANVAS=d),l&&("edge"===o&&l===w.Q.Windows?n.OPSYS="WIN10":"homePage"!==o&&"views"!==o||(n.OPSYS=A[l]));const u=(0,O.Z)(P.Al,"ClientSettings.browser"),p=(0,O.Z)(P.Al,"ClientSettings.deviceFormFactor"),g="TRUE"===(null===(i=null==u?void 0:u.ismobile)||void 0===i?void 0:i.toUpperCase())||"phone"===p?"1":"0";let h;n.ISMOBILE=g,!l||"1"!==g||"homePage"!==o&&"views"!==o?u&&(h=T[u.browserType]):h=T[l],h&&(n.BROWSER=h);const m=[];return"ISSIGNEDIN"in n||m.push("ISSIGNEDIN"),"MSN_CANVAS"in n||m.push("MSN_CANVAS"),"ISMOBILE"in n||m.push("ISMOBILE"),"BROWSER"in n||m.push("BROWSER"),m.length>0&&b.i.trackAppErrorEvent(Object.assign(Object.assign({},a.MWq),{message:"Missing parameters for subscriber",pb:Object.assign(Object.assign({},a.MWq.pb),{customMessage:`parameters ${m.toString()} for subscriber ${e}`})})),n}static getPageConfiguration(){var e;if(c.jG&&"edgeChromium"!==c.jG.AppType)return"";const t=(0,D.K0)(S.z.ChromiumPageSettings);if(!t)return"";const i=t.getCurrentState();if(!i)return"";let n=!1;"function"==typeof t.getPrimaryAccountInfoAsync&&t.getPrimaryAccountInfoAsync().then((e=>{n=e.accountType===I.l7.MSA}));const r=(0,D.K0)(S.z.TopSitesLayoutData),o=null===(e=null==r?void 0:r.getCurrentState())||void 0===e?void 0:e.isTopSitesCollapsed,s=(0,E.y)(i,n,o);return s&&!isNaN(s)?s.toString():void 0}static mapCanvasId(e,t){let i=null;switch(e){case"edge":case"edgeChromium":case"mmx":i=[e+t];break;default:i=e}return k[i]}}var L=i(65135),F=i(12884),N=i(84754);class B extends y.e{constructor(e,t,i,r,s,a,l){if(super(e,t,i,r,s,a,l),this.availableCreatives=new Map,this.headers=[void 0],this.queryParameters=[void 0],this.surfaceInfoMap=new Map,a.disableIrisCalls||!a.subscribers)return void(this.callWasMade=!1);this.irisDataPromise=new Promise((e=>(0,o.mG)(this,void 0,void 0,(function*(){yield n.Vv.configDataPromise,n.Vv.IrisDataConfig=a,this.appType=c.jG&&c.jG.AppType,this.internalPlacementUsed=this.config.isInternal||(0,p.cF)(),this.appType?(this.isBlackoutPeriodOver="edgeChromium"!==this.appType||(yield n.Vv.isBlackoutPeriodOver()),yield n.Vv.populateCachedSurfaceMap(),Object.keys(this.config.subscribers).forEach((e=>(0,o.mG)(this,void 0,void 0,(function*(){const t=this.internalPlacementUsed?e+p.Yq:e,i=p.S5[t],r=n.Vv.getCachedSurface(i);r&&r.placement&&this.surfaceInfoMap.set(i,r)})))),yield this.prepareCallData(),!this.queryParameters||this.queryParameters.length<1?this.callWasMade=!1:(this.callIris(),this.callWasMade=!0),e()):this.callWasMade=!1})))),this.irisDataPromise;const u=this.config.subscribers;Object.keys(u).forEach((e=>{const t=u[e].captureInitialStateOfCampaigns;if(t)for(const e in t)(0,d.$o)().getObject(e)&&L.M0.addOrUpdateTmplString(`userEligibleToSeeCoachmark_${e}:1`)}))}sendActionUpdate(e,t,i,r,o){let a;e&&t&&!this.isImagePlacement(e)&&(i===g.R.Impression?n.Vv.markCreativeAsSeenByUser(e,t):n.Vv.updateAction(e,t,o),n.Vv.persistAllSurfaces()),a=i===g.R.Impression?r.impressionUrl:h._.formatTelemetryActionUrl(r.actionUrl,o);try{m.c.sendActionUpdate(a)}catch(e){s.k.log(`IrisDataConnector: Failed to report iris action update beacon due to error: ${JSON.stringify(e)}`)}}getImagePayload(e){return(0,o.mG)(this,void 0,void 0,(function*(){return e&&(yield this.prepareCallData(!0),this.callIris(),this.callWasMade=!0),yield this.getPayload(p._l.MSNAnaheimNewsNTPImages)}))}getPayload(e){return(0,o.mG)(this,void 0,void 0,(function*(){yield this.irisDataPromise,this.callWasMade&&(yield this.callIrisPromise);let t=this.shouldUseRequestedIrisSurface();if(t&&t===e){this.internalPlacementUsed&&(t+=p.Yq);const e=p.S5[t];return yield this.tryGetSurfaceInfo(e)}const i=e&&this.internalPlacementUsed?e+p.Yq:e;if(!(0,x.isNullOrUndefined)(p.S5[i])){const e=p.S5[i];return yield this.tryGetSurfaceInfo(e)}return s.k.log(`IrisDataConnector: Surface requested ${i} was not found. `),null}))}tryGetSurfaceInfoInternal(e){return(0,o.mG)(this,void 0,void 0,(function*(){if(!this.surfaceInfoMap.has(e))return s.k.log(`IrisDataConnector: Placement: ${e} was not populated by local/persistent storage nor downloaded by network call.`),null;let t=this.surfaceInfoMap.get(e);return t=n.Vv.getSurfaceWithSelectedCreative(t),t}))}tryGetSurfaceInfo(e){return(0,o.mG)(this,void 0,void 0,(function*(){if(!this.surfaceInfoMap.has(e))return s.k.log(`IrisDataConnector: Placement: ${e} was not populated by local/persistent storage nor downloaded by network call.`),null;let t=this.surfaceInfoMap.get(e);return p.S5[p._l.MSNAnaheimNewsNTPImages]===e||p.S5[p._l.MSNAnaheimNewsNTPImages+p.Yq]===e||this.shouldBlockPsl()?t:(yield(0,n.Jw)())?(s.k.log(`IrisDataConnector: This is AAD user so not returning SurfaceInfo for: ${e} to experience.`),null):n.Vv.haveWeShownCurrentCreativeRecently(t)?(s.k.log(`IrisDataConnector: Already shown a campaign within 14 days so not returning SurfaceInfo for: ${e} to experience.`),null):n.Vv.haveWeShownCreativeTooManyTimes(t)?(s.k.log(`IrisDataConnector: Already shown a campaign too many times: ${e}.`),null):(t=n.Vv.getSurfaceWithSelectedCreative(t),t.creatives.length>0&&t.creatives[0].creativeId===this.creativeToShowUser?(s.k.log(`IrisDataConnector: Returning SurfaceInfo for: ${e} to experience.`),t):(s.k.log(`IrisDataConnector: Tried to return unselected campaign: ${e}.`),null))}))}prepareCallData(e){return(0,o.mG)(this,void 0,void 0,(function*(){this.queryParameters=[null],this.headers=[null];const t=[],i=[];let r,o,s=[];const c=yield(0,n.XA)();for(const n of Object.keys(this.config.subscribers)){let u;if(!this.config.subscribers[n].active)continue;const g=this.queryParameters.length,h=this.internalPlacementUsed?n+p.Yq:n,m=p.S5[h];if(!m){b.i.trackAppErrorEvent(Object.assign(Object.assign({},a.LRf),{message:"Subscriber not found in iris placement dictionary",pb:Object.assign(Object.assign({},a.LRf.pb),{customMessage:`Subscriber ${h} not found in dictionary`})}));continue}const y=this.isImagePlacement(m),S=!(0,x.isNullOrUndefined)(e)&&e;if(!y&&(S||this.appType&&"edgeChromium"===this.appType&&!c||!this.isBlackoutPeriodOver))continue;const{creativeCount:C,performValidation:w,staticQueryParams:T,aflights:k}=this.config.subscribers[n];let A,I,P;if(this.config.enableBackgroundGallery&&y&&!e&&(A=yield f.p.getBackgroundGalleryEligibilityAsync()),A){const e=yield f.p.getBackgroundPreferences();I=e&&e.changeBackgroundDaily,P=e&&e.backgroundSelectionMetadata}if(I&&P&&"Iris"===P.provider)continue;if(w&&(u=yield R.runValidation(h,S),!u||!u.addToCall))continue;this.config.enableBackgroundGallery&&y&&(0,d.$o)().removeItem(v.gf);let E=C||1;E=u&&u.parameters&&u.parameters.bcnt?u.parameters.bcnt:E,E<=0?b.i.trackAppErrorEvent(Object.assign(Object.assign({},a.TVf),{message:"Creative count value is negative or zero",pb:Object.assign(Object.assign({},a.TVf.pb),{customMessage:`Creative count value is negative or zero : ${h}`})})):(y?this.queryParameters[g]={bcnt:E,placement:m}:(i.push(E),t.push(m)),l.b.isNotNullOrUndefined(T)&&(y?this.queryParameters[g]=Object.assign(Object.assign({},this.queryParameters[g]),T):o=Object.assign(Object.assign({},o),T)),u&&u.parameters&&l.b.isNotNullOrUndefined(u.parameters)&&(y?this.queryParameters[g]=Object.assign(Object.assign({},this.queryParameters[g]),u.parameters):o=Object.assign(Object.assign({},o),u.parameters)),u&&u.headers&&l.b.isNotNullOrUndefined(u.headers)&&(y?this.headers[g]=u.headers:this.headers[0]=Object.assign(Object.assign({},this.headers[0]),u.headers)),l.b.isNotNullOrUndefined(k)&&"object"==typeof k&&(y?this.queryParameters[g].aflights=k.join(";"):s=k),p.S5[p._l.MSNNewsCoachmark+p.Yq]===m&&(r=(0,p.M1)()))}if(l.b.isNotNullOrUndefined(this.config.dynamicQueryParams)){o=Object.assign(Object.assign({},o),this.config.dynamicQueryParams);for(let e=1;e<this.queryParameters.length;e++)this.queryParameters[e]=Object.assign(Object.assign({},this.queryParameters[e]),this.config.dynamicQueryParams)}t.length>0&&(this.queryParameters[0]=o||{placement:void 0},this.queryParameters[0].placement=t.join("|"),this.queryParameters[0].bcnt=i.join("|"),this.queryParameters[0].aflights=s.join(";"),r&&parseInt(r)>-1&&(this.queryParameters[0].testingNum=r));const u=(yield(0,N.a)()).join(";");for(let e=0;e<this.queryParameters.length;e++)this.queryParameters[e]&&(this.queryParameters[e].SCS_msNtpExp=u||"");const g=(0,p.So)();if(g)for(let e=0;e<this.queryParameters.length;e++)this.queryParameters[e]&&(this.queryParameters[e].ocid=g)}))}callIris(){this.callIrisPromise=new Promise((e=>(0,o.mG)(this,void 0,void 0,(function*(){try{for(let e=0;e<this.queryParameters.length;e++){if((0,x.isNullOrUndefined)(this.queryParameters[e]))continue;this.surfaceCollectionContext=yield m.c.requestSurfaceInfo(this.queryParameters[e],this.headers[e]);const t=this.getSurfacesFromCollection();yield n.Vv.addSurfacesToStorage(t)}}catch(e){this.callWasMade=!1,L.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.IrA),{message:"IrisDataConnector: Exception requesting iris surfaces from data connector.",pb:Object.assign(Object.assign({},a.IrA.pb),{customMessage:`Error: ${JSON.stringify(e)} requestUrl: ${this.config.irisEndpoint} queryParameters: ${JSON.stringify(this.queryParameters)} headers: ${JSON.stringify(this.headers)}`})}))}e()})))),this.callIrisPromise}getSurfacesFromCollection(){const e=this.config.subscribers;if(!(e&&this.surfaceCollectionContext&&this.surfaceCollectionContext.collection&&this.surfaceCollectionContext.reqContext&&this.surfaceCollectionContext.reqContext.queryParams&&this.surfaceCollectionContext.reqContext.queryParams.placement))return L.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.cZM),{message:`Surface collection context missing parameters. Surface Context: ${JSON.stringify(this.surfaceCollectionContext)}`})),null;const t=[];Object.keys(e).forEach((i=>{const n=this.getSurfaceFromCollection(i);n&&n.placement&&(s.k.log(`IrisDataConnector: Parsed response for ${n.placement} from Iris network call. Now adding to map.`),t.push(n),this.surfaceInfoMap.set(n.placement,n),this.captureInitialEligibilityStateOfCampaigns(n,e[i].captureInitialStateOfCampaigns))}));const i=this.shouldUseRequestedIrisSurface(),n=this.internalPlacementUsed&&i?i+p.Yq:i;if((0,x.isNullOrUndefined)(n)){const e=Math.floor(Math.random()*(t.length-1));let i=0;this.availableCreatives.forEach(((t,n)=>{e!==i?i++:this.creativeToShowUser=this.availableCreatives.get(n)}))}else this.creativeToShowUser=this.availableCreatives.get(p.S5[n]);return t}getSurfaceFromCollection(e){const t=this.internalPlacementUsed?e+p.Yq:e,i=p.S5[t];if(this.surfaceCollectionContext.collection.hasUnclaimedErrors()){this.surfaceCollectionContext.collection.getUnclaimedErrors().forEach((e=>{2040!=(e&&e.code?e.code:e.errors&&e.errors.length>0&&e.errors[0].code)&&b.i.trackAppErrorEvent(Object.assign(Object.assign({},a.jWk),{message:"Surface errors discovered",pb:Object.assign(Object.assign({},a.jWk.pb),{customMessage:`Error with surface: ${t} Code: ${e.code} Message: ${e.msg} queryParams: ${JSON.stringify(this.surfaceCollectionContext.reqContext.queryParams)}`})}))}))}const n=this.surfaceCollectionContext.collection.get(i);return n&&n.placement&&n.creatives&&n.creatives.length>0&&!this.isImagePlacement(n.placement)&&this.availableCreatives.set(n.placement,n.creatives[0].creativeId),n}captureInitialEligibilityStateOfCampaigns(e,t){e.creatives&&t&&"object"==typeof t&&e.creatives.forEach((i=>{let n=!1;for(const r in t)if(e.placement===t[r]&&i.creativeId===r){n=!0;break}const r=(0,d.$o)().getObject(i.creativeId);(0,x.isNullOrUndefined)(r)&&(0,d.$o)().setObject(i.creativeId,n)}))}shouldUseRequestedIrisSurface(){const e=(0,F.zp)();if(e){const t=u.c.getQueryParameterByName("irisSurface",e);if(t)return t}return null}shouldBlockPsl(){const e=(0,F.zp)();if(e){const t=u.c.getQueryParameterByName("blockPsl",e);if(t)return"true"===t.toLocaleLowerCase()}return!1}isImagePlacement(e){return p.S5[p._l.MSNAnaheimNewsNTPImages]===e||p.S5[p._l.MSNAnaheimNewsNTPImages+p.Yq]===e}fetchedNewImage(){const e=this.internalPlacementUsed?p._l.MSNAnaheimNewsNTPImages+p.Yq:p._l.MSNAnaheimNewsNTPImages,t=p.S5[e],i=this.surfaceCollectionContext&&this.surfaceCollectionContext.collection&&this.surfaceCollectionContext.collection.get(t);return!(0,x.isNullOrUndefined)(i)}resetImageLastUpdateTime(){const e=this.internalPlacementUsed?p._l.MSNAnaheimNewsNTPImages+p.Yq:p._l.MSNAnaheimNewsNTPImages,t=p.S5[e];n.Vv.resetSurfaceLastUpdateTime(t)}}class j{reduce(){return null}}var $=i(83760);class U{static hasCTASupportData(e){return!(0,x.isNullOrUndefined)(e)&&this.stringHasLength(e.cta)}static hasHotSpotData(e){return!(0,x.isNullOrUndefined)(e)&&e.hs&&"object"==typeof e.hs&&e.hs.length>0}static hasImageData(e){return!(0,x.isNullOrUndefined)(e)&&this.stringHasLength(e.LANDSCAPE)&&this.stringHasLength(e.PORTRAIT)}static hasImageRefreshData(e){return!(0,x.isNullOrUndefined)(e)&&this.stringHasLength(e.update_period)}static hasMuseumData(e){return!(0,x.isNullOrUndefined)(e)&&this.stringHasLength(e.title)&&this.stringHasLength(e.copyright)}static hasPositionData(e){return this.stringHasLength(e.x_percent)&&this.stringHasLength(e.y_percent)&&e.x_percent.length<=this.MaxPositionLength&&e.y_percent.length<=this.MaxPositionLength&&/^0?\.\d{1,3}$/.test(e.x_percent)&&/^0?\.\d{1,3}$/.test(e.y_percent)}static hasPositions(e){return!(0,x.isNullOrUndefined)(e.landscape)&&this.hasPositionData(e.landscape)&&!(0,x.isNullOrUndefined)(e.portrait)&&this.hasPositionData(e.portrait)}static hasTelemetryIndex(e){return this.stringHasLength(e.hs)}static hasTextComponents(e){return this.stringHasLength(e.title)}static hasValidCTAType(e){return!((0,x.isNullOrUndefined)(e)||!this.stringHasLength(e.cta_type)||e.cta_type!==$.W.offPageNavigation)}static hotSpotIsValid(e){return!(0,x.isNullOrUndefined)(e)&&this.hasTelemetryIndex(e)&&this.hasTextComponents(e)&&this.hasPositions(e)}static isValidImageHotSpotsCreative(e){return U.hasImageData(e)&&U.hasImageRefreshData(e)}static isValidStoredData(e){return!(0,x.isNullOrUndefined)(e)&&!(0,x.isNullOrUndefined)(e.imgExpiration)&&this.stringHasLength(e.imgLandURL)&&this.stringHasLength(e.imgPortURL)&&this.stringHasLength(e.reqMarket)}static stringHasLength(e){return!(0,x.isNullOrUndefined)(e)&&"string"==typeof e&&e.length>0}static hasValidCTASupportData(e,t){return!(!e||!t)&&(e===$.W.offPageNavigation&&this.isValidOffPageNavData(t))}static isValidOffPageNavData(e){return/^((microsoft-edge:)?https:\/\/((www)|(cn)|(go))\.((msn)|(bing)|(skype)|(microsoft))\.com)|(edge:\/\/)/.test(e)}}U.MaxPositionLength=5;var H=i(9665);const _={experienceConfigSchema:r.IrisDataConfigSchema,mockConfig:H.mockConfig}},12574:function(e,t,i){"use strict";i.d(t,{Vv:function(){return k},Jw:function(){return I},XA:function(){return A}});var n=i(33940),r=i(33954),o=i(26415),s=i(17440),a=i(65135);const c=new class{getAllCampaigns(){return new Promise((e=>(0,n.mG)(this,void 0,void 0,(function*(){try{(yield s.U.isApiAvailableToUse())?s.U.getPreferenceSetting("campaigns").then((t=>{const i=t&&t.value;i||r.k.logError("PSL: window.chrome.ntpSettingsPrivate.getPref does not have campaigns."),e(i||[])})):(a.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.f_s),{message:"PSL: Error fetching campaigns due to window.chrome.ntpSettingsPrivate.getPref api not available for this version of EDGE"})),r.k.logError("PSL: Error fetching campaigns due to window.chrome.ntpSettingsPrivate.getPref api not available for this version of EDGE"),e([]))}catch(t){a.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.CBf),{message:`PSL fetch error. ${JSON.stringify(t)}`})),r.k.logError(t),e([])}}))))}persistCampaigns(e){return new Promise((t=>(0,n.mG)(this,void 0,void 0,(function*(){try{(yield s.U.isApiAvailableToUse())?(yield s.U.savePreferenceSetting("campaigns",e),r.k.log(`PSL: Number of campaigns persisted: ${e.length||0}.`),t(!0)):(a.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.RLb),{message:"PSL: Error persisting campaigns due to window.chrome.ntpSettingsPrivate.getPref api not available for this version of EDGE"})),r.k.logError("PSL: Error persisting campaigns due to window.chrome.ntpSettingsPrivate.getPref api not available for this version of EDGE"))}catch(e){a.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.CBf),{message:`PSL persist error. ${JSON.stringify(e)}`})),r.k.logError(e)}t(!1)}))))}clearPersistentStorage(){return this.persistCampaigns([])}};var d=i(65337);const l=new class{constructor(){this.storageKey="irisNewsLocalStorage"}getAllCampaigns(){try{return(0,d.$o)().getObject(this.storageKey)}catch(e){return r.k.logError(`Exception ${e} occurred retrieving user nurturing campaigns from local storage`),[]}}storeCampaigns(e){try{return(0,d.$o)().setObject(this.storageKey,e),r.k.log(`Number of campaigns persisted in local storage: ${e.length||0}.`),!0}catch(e){return r.k.logError(`Exception ${e} occurred storing user nurturing campaigns in local storage`),!1}}clearLocalStorage(){return this.storeCampaigns([])}};var u=i(84169),p=i(58155),g=i(88352),h=i(2040),m=i(73252),f=i(33799),v=i(52144),y=i(91881),b=i(12884),S=i(33379),C=i(72344),w=i(10619),T=i(85663);const k=new class{constructor(){this.cachedSurfaceMap=new Map,this.enabledFeatures=[],this.irisSessionContextAttributes=new Map,this.millisecondsInADay=864e5,this.timeNow=(new Date).getTime(),this.appType=u.jG&&u.jG.AppType,"edgeChromium"===this.appType&&(this.configDataPromise=this.getConfigDataAsync()),this.currentURL=(0,b.zp)()}get isEnabled(){return!!this.shouldUseCache()||!(!this.irisDataConfig||!this.irisDataConfig.enableCaching)&&this.isCookieConsentNotRequired()}set IrisDataConfig(e){this.irisDataConfig=e}clearCachedSurfaceMap(){this.isEnabled&&this.cachedSurfaceMap.clear()}populateCachedSurfaceMap(){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.isEnabled)try{if(this.purgeCacheWithQsp())return yield this.clearCachedSurfacesFromStorage(),void r.k.log("Cache purged!");this.clearCachedSurfaceMap();let e=[];if(e="edgeChromium"===u.jG.AppType?yield c.getAllCampaigns():l.getAllCampaigns(),!e||0===e.length)return void r.k.log("Bulk read of surfaces from local/persistent storage didn't return a surface.");const{subscribers:t}=this.irisDataConfig,i=[];Object.keys(t).forEach((e=>{t[e].active||i.push(y.S5[e])})),e.forEach((e=>{e&&e.placement&&(0===i.length||-1===i.indexOf(e.placement))&&(this.cachedSurfaceMap.set(e.placement,e),r.k.log(`Populated ${e.placement} from local/persistent storage.`))}))}catch(e){r.k.logError(`Bulk read of surfaces from local/persistent storage threw error: ${e}`)}}))}getCachedSurface(e){if(!e||0===e.length||0===this.cachedSurfaceMap.size)return null;if(!this.cachedSurfaceMap.has(e))return null;const t=this.cachedSurfaceMap.get(e);return t&&t.creatives&&0!==t.creatives.length?t:null}addSurfaceToCachedSurfaceMap(e){if(!e||!e.placement)return;const t=e.placement,i=new Map;let n;if(this.cachedSurfaceMap.has(t)&&(n=this.cachedSurfaceMap.get(t),n.creatives.forEach((e=>{i.set(e.creativeId,e)}))),e.creatives&&e.creatives.length>0){const t=(0,y.cF)()?y._l.MSNAnaheimNewsNTPImages+y.Yq:y._l.MSNAnaheimNewsNTPImages,r=y.S5[t];if(e.placement===r){if(n&&n.imageInfo)e.imageInfo=n.imageInfo;else{const t={dislikedCreatives:[],dislikedCreativeCountCurrentPeriod:0};e.imageInfo=t}this.hasUpdateTimeExpired(r,24)&&(e.imageInfo.dislikedCreativeCountCurrentPeriod=0),i.clear(),i.set(e.creatives[0].creativeId,e.creatives[0])}e.creatives.forEach((e=>{const t=i.get(e.creativeId);if(t&&(t.content=e.content,i.set(e.creativeId,t)),!t){const t={lastAddedTime:this.timeNow,useCount:0,useTime:0};e.storageInfo=t,i.set(e.creativeId,e)}}))}e.creatives=[...i.values()],this.cachedSurfaceMap.set(t,e),r.k.log(`Adding/Updating SurfaceInfo ${t} in storage.`)}addSurfacesToStorage(e){return(0,n.mG)(this,void 0,void 0,(function*(){e&&e.length>0&&(e.forEach((e=>{this.addSurfaceToCachedSurfaceMap(e)})),yield this.persistAllSurfaces())}))}persistAllSurfaces(){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.isEnabled){if("edgeChromium"===u.jG.AppType)return void(yield c.persistCampaigns([...this.cachedSurfaceMap.values()]));l.storeCampaigns([...this.cachedSurfaceMap.values()])}}))}clearCachedSurfacesFromStorage(){return(0,n.mG)(this,void 0,void 0,(function*(){this.isEnabled&&(this.clearCachedSurfaceMap(),"edgeChromium"!==u.jG.AppType?l.clearLocalStorage():yield c.clearPersistentStorage())}))}resetSurfaceLastUpdateTime(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!this.isEnabled&&!this.cachedSurfaceMap.get(e))return;const t=this.cachedSurfaceMap.get(e);t.lastUpdatedTime=-1,this.cachedSurfaceMap.set(e,t),this.persistAllSurfaces()}))}getCachedSurfaceMap(){return this.cachedSurfaceMap}haveWeShownCurrentCreativeRecently(e){if((0,T.isNullOrUndefined)(e.currentCreativeId))return!0;if(this.ignoreCreativeUseTime())return!1;let t=!0;return e.creatives.forEach((i=>{i.creativeId===e.currentCreativeId&&i.storageInfo&&i.storageInfo.useTime+14*this.millisecondsInADay<this.timeNow&&(t=!1)})),t}haveWeShownCreativeTooManyTimes(e){if((0,T.isNullOrUndefined)(e)||(0,T.isNullOrUndefined)(e.currentCreativeId))return!0;if(this.ignoreMaxCapPerCreative())return!1;let t=!0;return e.creatives.forEach((i=>{e.currentCreativeId===i.creativeId&&i.storageInfo&&i.storageInfo.useCount<=2&&(t=!1)})),t}getSurfaceWithSelectedCreative(e){if((0,T.isNullOrUndefined)(e.currentCreativeId))return null;let t;return e.creatives.forEach((i=>{e.currentCreativeId===i.creativeId&&(t=i)})),Object.assign(Object.assign({},e),{creatives:[t]})}updateAction(e,t,i){if(e&&t&&this.cachedSurfaceMap.has(e)){const n=this.cachedSurfaceMap.get(e);n&&n.creatives&&n.creatives.forEach((e=>{e.creativeId===t&&e.storageInfo&&(e.storageInfo.irisAction=i)}))}}markCreativeAsSeenByUser(e,t){if(e&&t&&this.cachedSurfaceMap.has(e)){const i=this.cachedSurfaceMap.get(e);i&&i.creatives&&i.creatives.forEach((e=>{e&&e.creativeId&&e.creativeId===t&&e.storageInfo&&(e.storageInfo.useCount++,e.storageInfo.lastAddedTime=this.timeNow,e.storageInfo.useTime=this.timeNow)}))}}updateCreativeLatestAddedTime(e,t,i){if(!this.cachedSurfaceMap.has(e))return;const n=this.cachedSurfaceMap.get(e);n&&n.creatives&&0!==n.creatives.length&&n.creatives.forEach((e=>{e&&e.creativeId===t&&e.storageInfo&&e.storageInfo.lastAddedTime&&(e.storageInfo.lastAddedTime=i)}))}purgeCacheWithQsp(){if(this.currentURL){const e=p.c.getQueryParameterByName("purgeCache",this.currentURL);if(e&&"true"===e.toLocaleLowerCase())return!0}return!1}shouldUseCache(){if(this.currentURL){const e=p.c.getQueryParameterByName("useCache",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}ignoreMaxCapPerCreative(){if(this.currentURL){const e=p.c.getQueryParameterByName("ignoreMaxCapPerCreative",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}ignoreUpdateTimeExpiration(){if(this.currentURL){const e=p.c.getQueryParameterByName("ignoreUpdateTimeExpiration",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}ignoreCreativeUseTime(){if(this.currentURL){const e=p.c.getQueryParameterByName("ignoreCreativeUseTime",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}ignoreBlackout(){if(this.currentURL){const e=p.c.getQueryParameterByName("ignoreBlackout",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}isCookieConsentNotRequired(){return v.A.get(v.U.CookieConsentStatus)===C._.NotRequired}getConfigDataAsync(){return(0,n.mG)(this,void 0,void 0,(function*(){return this.getConfigDataPromise=new Promise((e=>{try{(0,S.N)()&&window&&window.chrome&&window.chrome.ntpSettingsPrivate&&"function"==typeof window.chrome.ntpSettingsPrivate.getConfigData?window.chrome.ntpSettingsPrivate.getConfigData((t=>{void 0!==t?(this.profileCreationTimeInMs=t.profileCreationTime,this.enabledFeatures=t.enabledFeatures,this.setIrisSessionContextAttributes(t.irisAttributes),this.configData=t,e()):(w.i.trackAppErrorEvent(Object.assign(Object.assign({},o.Zt_),{message:"Config data is undefined"})),e())})):(w.i.trackAppErrorEvent(Object.assign(Object.assign({},o.Ez4),{message:"Failed to fetch config data from chromium API"})),e())}catch(t){w.i.trackAppErrorEvent(Object.assign(Object.assign({},o._bN),{message:"Exception fetching config data from chromium API",pb:Object.assign(Object.assign({},o._bN.pb),{customMessage:`Exception: ${t}`})})),e()}})),this.getConfigDataPromise}))}isBlackoutPeriodOver(){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.ignoreBlackout())return!0;if("edgeChromium"===this.appType){if(u.jG.IsFrePage)return!1;yield this.getConfigDataPromise}const e=this.irisDataConfig.blackoutPeriodInDays&&this.irisDataConfig.blackoutPeriodInDays*this.millisecondsInADay||7*this.millisecondsInADay;return!!this.profileCreationTimeInMs&&this.timeNow-this.profileCreationTimeInMs>e}))}getIrisSessionContextAttribute(e){return(0,n.mG)(this,void 0,void 0,(function*(){return"edgeChromium"===this.appType&&(yield this.getConfigDataPromise),this.irisSessionContextAttributes.has(e)?this.irisSessionContextAttributes.get(e):""}))}setIrisSessionContextAttributes(e){if(g.b.isNotNullOrUndefined(e)&&e.length>0){e.startsWith("&")&&e.length>=1&&(e=e.substring(1));e.split("&").map((e=>e.split("="))).forEach((e=>{this.irisSessionContextAttributes.set(e[0],e[1])}))}}getConfigData(){return this.configData}hasUpdateTimeExpired(e,t){if(this.ignoreUpdateTimeExpiration())return!0;const i=this.cachedSurfaceMap.get(e);if((0,T.isNullOrUndefined)(i))return r.k.log(`IrisDataConnector: Has update time expired. placement: ${e}. Placement not in PSL.`),!0;const n=(0,T.isNullOrUndefined)(i.lastUpdatedTime)?-1:i.lastUpdatedTime;if(n<0)return r.k.log(`IrisDataConnector: Has update time expired. placement: ${e}. Invalid lastUpdatedTime.`),!0;const o=n+36e5*t;return r.k.log(`IrisDataConnector: Has update time expired. placement: ${e}. Current time: ${this.timeNow}, lastUpdatedTime: ${o}. Result: ${o<this.timeNow}`),o<this.timeNow}getDislikeList(e){return e&&e.length>0?e.join(";"):""}hasMarketChanged(e){const t=this.cachedSurfaceMap.get(e);if((0,T.isNullOrUndefined)(t))return r.k.log(`IrisDataConnector: has market changed. placement: ${e}. Placement not in PSL.`),!0;const i=!!(0,T.isNullOrUndefined)(t.lastUpdatedMarket)||t.lastUpdatedMarket!==u.jG.CurrentMarket;return r.k.log(`IrisDataConnector: has market changed. placement: ${e} - ${i}.`),i}getImageInfo(e){const t=this.cachedSurfaceMap.get(e);return t&&t.imageInfo?t.imageInfo:null}addImageCreativeToDislikeList(){const e=(0,y.cF)()?y.S5[y._l.MSNAnaheimNewsNTPImages+y.Yq]:y.S5[y._l.MSNAnaheimNewsNTPImages],t=this.cachedSurfaceMap.get(e),i=t.creatives[0].creativeId;if((0,T.isNullOrUndefined)(t)||(0,T.isNullOrUndefined)(t.imageInfo))return!1;if(t.imageInfo.dislikedCreativeCountCurrentPeriod>=5)return!1;if((0,T.isNullOrUndefined)(t.imageInfo.dislikedCreatives))t.imageInfo.dislikedCreatives=[i];else{const e=t.imageInfo.dislikedCreatives.length;let n=!1;if(t.imageInfo.dislikedCreatives.forEach((e=>{e!==i||(n=!0)})),n)return!0;e>=20&&t.imageInfo.dislikedCreatives.shift(),t.imageInfo.dislikedCreatives.push(i)}return t.imageInfo.dislikedCreativeCountCurrentPeriod+=1,k.persistAllSurfaces(),!0}};function A(e=!1){return(0,n.mG)(this,void 0,void 0,(function*(){if(!e&&(yield I()))return!1;try{return!1!==(0,d.$o)().getObject(h.Ny)}catch(e){return w.i.trackAppErrorEvent(Object.assign(Object.assign({},o.Qhy),{message:"Failed to fetch nurturing accepted key from local storage",pb:Object.assign(Object.assign({},o.Qhy.pb),{customMessage:`Exception: ${e} occurred while reading key: ${h.Ny} from local storage.`})})),!1}}))}function I(){return(0,n.mG)(this,void 0,void 0,(function*(){yield u.jG.AccountInfoPromise;const e=u.jG.ResolvedAccountInfo;return(0,T.isNullOrUndefined)(m.Al.AadState)?f.Qm.AAD===(e&&e.account_type):m.Al.AadState}))}},70260:function(e,t,i){"use strict";i.d(t,{_:function(){return p}});var n=i(33940),r=i(26415),o=i(33954),s=i(84606),a=i(61857),c=i(91881),d=i(65135),l=i(84169),u=i(85663);class p{static createIrisRequestContext(e,t){return Object.assign({queryParams:e},t?{includedHeaders:t}:{})}static callIris(e){return(0,n.mG)(this,void 0,void 0,(function*(){if((0,u.isNullOrUndefined)(e))throw s.l.create(s.N.MissingContext,"IRIS: Request context undefined or null",r.YSG,`Request context: ${JSON.stringify(e)}`);const t=this.validateQParams(e.queryParams);if(t)throw s.l.create(s.N.QueryParametersInvalid,"IRIS: Invalid query parameters",r.LIN,`Error validating query parameters: ${t} query parameters: ${JSON.stringify(e.queryParams)}`);const i=p.generateGuid();e.queryParams.asid=i;const n=this.assembleQParameters(e.queryParams),l=this.formatQParameters(n),g=new URL(c.TY+"?"+l),h=this.getHeaders(e.includedHeaders),m=this.getRequestInit(h);let f;const v=(0,a.zq)();setTimeout((()=>{f="Timeout occurred.",v.resolve()}),c.KI);const y=yield Promise.race([v.waiting,fetch(g,m).catch((e=>{f=`Fetch failure caused by ${JSON.stringify(e)}`}))]),b=y&&y.status;if(!y||b&&!(b>=200&&b<300))throw f&&(/^Timeout/.test(f)||/^Fetch/.test(f))&&(o.k.log(`Iris: Arc call failed due to ${f}`),d.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.S2e),{message:`Arc call failed due to ${f}`}))),s.l.create(s.N.ResponseFailure,"Iris: Arc call failed.",r._ig,`Request url: ${g} Response status code: ${b} Response: ${JSON.stringify(y)}`);let S;try{if(S=yield y.text(),!S)throw"empty response body";const t=JSON.parse(S);if(!t)throw"error parsing json response";return{parsedResponse:t,reqContext:e}}catch(e){const t=null!=S?S:y;throw s.l.create(s.N.ResponseFailure,`Iris: Unable to parse iris resposne due to ${e}`,r.hnc,`Request url: ${g} Response status code: ${b} Response: ${JSON.stringify(t)}`)}}))}static formatTelemetryActionUrl(e,t){return e&&t?e.replace(/\{ACTION\}/,t):null}static updateIris(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){if((0,u.isNullOrUndefined)(e))throw s.l.create(s.N.ActionUrlInvalid,"Iris: Action beacon undefined or null",void 0,`Iris action url: ${e} headers: ${JSON.stringify(t)}`);const i=new URL(e),n=this.getHeaders(t),l=this.getRequestInit(n);let p;const g=(0,a.zq)();setTimeout((()=>{p="Timeout occurred.",g.resolve()}),c.VT);const h=yield Promise.race([g.waiting,fetch(i,l).catch((e=>{p=`fetch failure caused by: ${JSON.stringify(e)}`}))]),m=h&&h.status;if(!h||m&&m<200&&m>=300)throw p&&(/^Timeout/.test(p)||/^Fetch/.test(p))&&(o.k.log(`Iris: Arc call failed due to ${p}`),d.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.s51),{message:`Arc call failed due to ${p}`}))),s.l.create(s.N.ActionResponseInvalid,"Iris: Arc call failed.",r.a2y,`Request url: ${i} Response status code: ${m} Response: ${JSON.stringify(h)}`);return h}))}static createPropertyBagErrorMessage(e,t,i,n){return`Placement=${e}, Asid=${t}, Market=${i}, ${n}`}static getHeaders(e){const t=new Headers;return e&&((0,u.isNullOrUndefined)(e.xSdkIaf)||t.set("x-sdk-iaf",e.xSdkIaf)),t}static formatQParameters(e){if((0,u.isNullOrUndefined)(e))return null;const t=/[^=]/,i=[];for(const n in e)!(0,u.isNullOrUndefined)(e[n])&&t.test(e[n])&&i.push(`${n}=${e[n]}`);return i.length>0?i.join("&"):null}static getDefaultAppParameters(e){if(!l.jG)return o.k.log(`Iris: Missing App Environment Object: ${l.jG}`),d.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.EXN),{message:`App environment undefined. Placement: ${JSON.stringify(e.placement)}`})),null;let t;const i={locale:l.jG.CurrentMarket,country:l.jG.CountryCode,muid:l.jG.UserId?l.jG.UserId.replace(/^m-/,""):null};return i.muid||(t=`UserId: ${i.muid}`),i.locale||(t=(t?", ":"")+`Market: ${i.locale}`),i.country||(t=(t?", ":"")+`CountryCode: ${i.country}`),t&&(o.k.log(`Iris: Missing ${t} from App Environment Object`),d.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.yyJ),{message:`Missing App environment properties. Placement: ${JSON.stringify(e.placement)}. Error: ${t}`}))),i}static getRequiredStaticParameters(){return{nct:"1",fmt:"json",nocookie:"1"}}static assembleQParameters(e){if((0,u.isNullOrUndefined)(e))return d.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.Vsq),{message:"Undefined query param for ARC request."})),null;const t=this.getRequiredStaticParameters(),i=this.getDefaultAppParameters(e),n=(0,c.bu)(),o=(0,c.rB)();return Object.assign({},t,i||{},n||{},o,e)}static validateQParams(e){if((0,u.isNullOrUndefined)(e))return"untargetable; no query params";if(!e.placement)return"untargetable; no placement";if(/\|/.test(e.placement)){if(!e.bcnt)return"untargetable; no bcnt for batch request";const t=e.placement.split("|").length,i=e.bcnt.split("|").length;if(t!==i)return"untargetable; batch size mismatch p="+t+" b="+i}}static getDigit(e){let t=(new Date).getTime();const i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:7&i|8).toString(16)}static generateGuid(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,p.getDigit)}static getRequestInit(e){return{method:"GET",headers:e,credentials:"include"}}}},6660:function(e,t,i){"use strict";var n,r;i.d(t,{M:function(){return r},R:function(){return n}}),function(e){e.Impression="imp",e.Action="act"}(n||(n={})),function(e){e.Click="click",e.Conversion="conversion",e.Dislike="dislike",e.Dismiss="dismiss",e.Like="like",e.Hover="hover"}(r||(r={}))},91881:function(e,t,i){"use strict";i.d(t,{KI:function(){return r},M1:function(){return u},S5:function(){return d},So:function(){return p},TY:function(){return s},VT:function(){return o},Yq:function(){return a},_l:function(){return c},bu:function(){return h},cF:function(){return l},rB:function(){return g},uS:function(){return m}});var n=i(58155);const r=5e3,o=1e4,s="https://arc.msn.com/v4/api/selection",a=".int";var c;!function(e){e.MSNAnaheimNewsNTPImages="MSNAnaheimNewsNTPImages",e.MSNNewsCoachmark="MSNNewsCoachmark",e.WinHPCoachmark="WinHPCoachmark",e.MSNewsRewards="MSNewsRewards",e.ConditionalBanner="ConditionalBanner"}(c||(c={}));const d={[c.MSNAnaheimNewsNTPImages]:"88000244",[c.MSNAnaheimNewsNTPImages+a]:"88000245",[c.MSNNewsCoachmark]:"88000308",[c.MSNNewsCoachmark+a]:"88000309",[c.WinHPCoachmark]:"88000789",[c.WinHPCoachmark+a]:"88000788",[c.MSNewsRewards]:"88000321",[c.MSNewsRewards+a]:"88000322",[c.ConditionalBanner]:"10837393",[c.ConditionalBanner+a]:"10837394"},l=()=>{const e=location.search;return!!e&&/(\?|&)irisInternal=true/.test(e)},u=()=>{const e=location.search,t=new URLSearchParams(e);return t.has("testingNum")?t.get("testingNum"):"-1"},p=()=>{const e=location.search,t=new URLSearchParams(e);return t.has("ocid")?t.get("ocid"):""},g=()=>(()=>{const e=location.search;return!!e&&/(\?|&)irisStatic=true/.test(e)})()?{app:"anaheimstatic"}:{},h=()=>{const e=location.search;if(e&&/(\?|&)irisSegment=/.test(e)){const t=n.c.getQueryParameterByName("irisSegment",e);if(t)return{[t]:"1"}}return null};var m;!function(e){e.AcquisitionPath="AREF",e.BrowserChannel="ACHANNEL",e.BrowserVersion="ABUILD",e.Caller="clr",e.ClientID="edgeid",e.ConsumerVsEnterprise="ISU",e.DefaultBrowser="ADEFAB",e.DeviceOSVersion="devosver",e.OperatingSystem="OPSYS",e.PrimaryBrowser="APRIMB",e.TailoredExperiencesToggle="poptin",e.UITheme="UITHEME"}(m||(m={}))},84606:function(e,t,i){"use strict";i.d(t,{N:function(){return n},l:function(){return o}});var n,r=i(85663);!function(e){e[e.Unknown=0]="Unknown",e[e.MissingContext=1]="MissingContext",e[e.QueryParametersInvalid=2]="QueryParametersInvalid",e[e.FetchFailure=3]="FetchFailure",e[e.ResponseFailure=4]="ResponseFailure",e[e.Unparsable=5]="Unparsable",e[e.UnconvertableCreative=6]="UnconvertableCreative",e[e.ActionUrlInvalid=7]="ActionUrlInvalid",e[e.ActionCallFail=8]="ActionCallFail",e[e.ActionResponseInvalid=9]="ActionResponseInvalid"}(n||(n={}));class o{static create(e,t,i,n){return{appError:i,customMessage:n,errorMessage:t,irisErr:e}}static typeCheck(e){return e&&"object"==typeof e&&!(0,r.isNullOrUndefined)(e.irisErr)}}},83760:function(e,t,i){"use strict";var n;i.d(t,{W:function(){return n}}),function(e){e.offPageNavigation="nav-newtab",e.inPageNavigation="nav-inpage",e.executeAction="execute-action"}(n||(n={}))},6751:function(e,t,i){"use strict";i.d(t,{c:function(){return p}});var n=i(33940),r=i(70260),o=i(85663),s=i(36803),a=i(26415),c=i(65135);class d{static isError(e){return!(0,o.isNullOrUndefined)(e)&&"object"==typeof e&&!(0,o.isNullOrUndefined)(e.error)||!(0,o.isNullOrUndefined)(e.code)}static handleError(e,t){if(e&&"number"==typeof e.code)if(e.code>=1e3&&e.code<=1999)this.sendAppError(a.ZHI,e.code,t);else if(e.code>=3e3&&e.code<=3999)this.sendAppError(a.gAu,e.code,t);else switch(e.code){case 0:case 2e3:case 2040:break;case 2010:this.sendAppError(a.MRH,e.code,t);break;case 2020:this.sendAppError(a.CBH,e.code,t);break;default:this.sendAppError(a.CPU,e.code,t)}}static isValidSingleResponse(e){return!(0,o.isNullOrUndefined)(e)&&"object"==typeof e&&!(0,o.isNullOrUndefined)(e.prm)&&(0,s.R)(e.prm._id)&&(0,s.R)(e.prm._imp)&&!(0,o.isNullOrUndefined)(e.tracking)&&(0,s.R)(e.tracking.baseUri)&&!(0,o.isNullOrUndefined)(e.ad)&&!(0,o.isNullOrUndefined)(e.rdr)&&e.rdr.length>0&&(0,s.R)(e.rdr[0].c)&&(0,s.R)(e.rdr[0].u)&&(0,s.R)(e.f)&&(0,s.R)(e.v)}static isBatchResponse(e){return!(0,o.isNullOrUndefined)(e)&&"object"==typeof e&&!(0,o.isNullOrUndefined)(e.batchrsp)}static batchContainsItems(e){return e&&!(0,o.isNullOrUndefined)(e.items)&&"object"==typeof e.items&&e.items.length>0}static batchContainsErrors(e){return e&&!(0,o.isNullOrUndefined)(e.errors)&&"object"==typeof e.errors&&e.errors.length>0}static decodeSingleResponseString(e){if(!(0,s.R)(e))return null;try{return JSON.parse(e)}catch(t){return c.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.FQ3),{message:"Exception parsing JSON",pb:Object.assign(Object.assign({},a.FQ3.pb),{customMessage:`Error parsing json encodedString: ${e}`})})),null}}static sendAppError(e,t,i){c.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:`err: ${t}`,pb:Object.assign(Object.assign({},e.pb),{customMessage:i&&i.queryParams?r._.createPropertyBagErrorMessage(i.queryParams.placement,i.queryParams.asid,i.queryParams.locale):""})}))}}var l=i(62985),u=i(84606);class p{static requestSurfaceInfo(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){if(!e)return c.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.cL8),{message:"Attempted iris call without any params."})),Promise.reject("Attempted iris call without any params.");const i=r._.createIrisRequestContext(e,t);return yield r._.callIris(i).then(p.mapResponse).then(p.handleUnclaimedErrors).catch((e=>{let t,n,r;return u.l.typeCheck(e)&&(t=e.appError,n=e.customMessage,r=e.errorMessage),t=t||a.bUp,c.M0.sendAppErrorEvent(Object.assign(Object.assign({},t),{message:r||"Unhandled error encountered requesting/processing iris call",pb:Object.assign(Object.assign({},t.pb),{customMessage:n||`Error: ${JSON.stringify(e)} requestContext: ${JSON.stringify(i)}`})})),Promise.reject(e)}))}))}static sendActionUpdate(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){try{return yield r._.updateIris(e,t)}catch(i){let n,r,o;return u.l.typeCheck(i)&&(n=i.appError,r=i.customMessage,o=i.errorMessage),n=n||a.bUp,c.M0.sendAppErrorEvent(Object.assign(Object.assign({},n),{message:o||"Unhandled error encountered requesting/processing iris action update call",pb:Object.assign(Object.assign({},n.pb),{customMessage:r||`Error: ${JSON.stringify(i)} actionUrl: ${JSON.stringify(e)} includedHeaders: ${JSON.stringify(t)}`})})),Promise.reject(i)}}))}static handleUnclaimedErrors(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(e&&e.collection&&e.collection.hasUnclaimedErrors()){e.collection.getUnclaimedErrors().forEach((t=>{d.handleError(t,e.reqContext)}))}return e}))}static mapResponse(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!e||!e.parsedResponse)return Promise.resolve(null);const t=e.parsedResponse,i=e.reqContext&&e.reqContext.queryParams&&/^[^|]*$/.test(e.reqContext.queryParams.placement)?e.reqContext.queryParams.placement:null,n=new l.S,r={collection:n,reqContext:e.reqContext};if(d.isError(t))return n.addError(i,Object.assign(Object.assign({},t),{placement:i})),Promise.resolve(r);if(d.isBatchResponse(t)){if(d.batchContainsItems(t.batchrsp)){t.batchrsp.items.forEach((e=>{const t=e.placement?e.placement:i;p.extractCreativesFromItem(e,t,n)}))}if(d.batchContainsErrors(t.batchrsp)){t.batchrsp.errors.forEach((e=>{n.addError(e.placement||i,e)}))}}else{const r=p.convertToCreative(t);if(n.addCreative(i,r),!r){const t=e.reqContext&&e.reqContext.queryParams&&e.reqContext.queryParams.asid;c.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.EhB),{message:"Iris: Attempt to convert iris response to creative failed",pb:Object.assign(Object.assign({},a.EhB.pb),{customMessage:`ASID: ${t} RequestContext: ${JSON.stringify(e.reqContext)} Response: ${JSON.stringify(e.parsedResponse)}`})}))}}return Promise.resolve(r)}))}static convertToCreative(e){const t=e&&"string"==typeof e?d.decodeSingleResponseString(e):e;if(t&&d.isValidSingleResponse(t))return{creativeName:t.rdr[0].c,creativeNamespace:t.rdr[0].u,content:t.ad,creativeId:t.prm._id,telemetry:{impressionUrl:t.prm._imp,actionUrl:t.tracking.baseUri}};const i=t&&t.prm&&t.prm._id;return c.M0.sendAppErrorEvent(Object.assign(Object.assign({},a.N6m),{message:"Iris: Response format invalid - creativeId",pb:Object.assign(Object.assign({},a.N6m.pb),{customMessage:`Error converting response into creative due to invalid format creativeId: ${i}\n                    encodedString: ${"object"==typeof e?JSON.stringify(e):e}\n                    decodedString: ${"object"==typeof t?JSON.stringify(t):t}`})})),null}static addIrisEntityToCollection(e,t,i){if(!t||!i)return;const n=p.convertToCreative(t);n&&i.addCreative(e,n)}static extractCreativesFromItem(e,t,i){i&&e&&(e.items&&e.items.length>0&&e.items.forEach((e=>{p.addIrisEntityToCollection(t,e,i)})),e.item&&p.addIrisEntityToCollection(t,e.item,i))}}},62985:function(e,t,i){"use strict";i.d(t,{S:function(){return o}});var n=i(84169),r=i(85663);class o{constructor(){this._infoMap=new Map,this._unknown=[],this._errors=[]}static createSurfaceInfo(e,t,i,r){return{creatives:e||[],currentCreativeId:t,errors:i||[],lastUpdatedMarket:n.jG.CurrentMarket,lastUpdatedTime:(new Date).getTime(),placement:r}}static infoHasId(e){return e&&!(0,r.isNullOrUndefined)(e.placement)}static infoHasCreatives(e){return e&&!(0,r.isNullOrUndefined)(e.creatives)&&e.creatives.length>0}static infoHasErrors(e){return e&&!(0,r.isNullOrUndefined)(e.errors)&&e.errors.length>0}get(e){return!(0,r.isNullOrUndefined)(e)&&this._infoMap.has(e)?this._infoMap.get(e):null}add(e,t){e&&(t?this._infoMap.set(t,e):this._unknown.push(e))}addCreative(e,t){t&&"object"==typeof t?(0,r.isNullOrUndefined)(e)?this._unknown.push(o.createSurfaceInfo([t],null,null,null)):this.addData(e,t,!1):(0,r.isNullOrUndefined)(e)||this._infoMap.set(e,o.createSurfaceInfo(null,null,null,e))}addError(e,t){t&&"object"==typeof t&&0!==Object.keys(t).length&&((0,r.isNullOrUndefined)(e)?this._errors.push(t):this.addData(e,t,!0))}hasUnknowns(){return this._unknown.length>0}getUnknowns(){return this._unknown}hasUnclaimedErrors(){return this._errors.length>0}getUnclaimedErrors(){return this._errors}addData(e,t,i){if((0,r.isNullOrUndefined)(e)){const e=t;this._unknown.push(o.createSurfaceInfo([e],e.creativeId,null,null))}else if(this._infoMap.has(e)){this._infoMap.get(e)[i?"errors":"creatives"].push(t)}else{const n=t;this._infoMap.set(e,o.createSurfaceInfo(i?null:[n],i?null:n.creativeId,i?[t]:null,e))}}}},12884:function(e,t,i){"use strict";i.d(t,{$w:function(){return g},Dp:function(){return d},FK:function(){return u},G8:function(){return p},SV:function(){return h},Td:function(){return a},ZI:function(){return m},b0:function(){return b},bs:function(){return f},ij:function(){return o},l4:function(){return s},tM:function(){return y},x_:function(){return v},zp:function(){return l},zw:function(){return c}});var n=i(33379),r=i(2140);function o(){return(0,n.N)()?window.navigator.userAgent:(0,r.s)().userAgent}function s(){return(0,n.N)()?window.location.href:(0,r.s)().url.href}function a(){return(0,n.N)()?window.location.hostname:(0,r.s)().url.hostname}function c(){return(0,n.N)()?window.location.host:(0,r.s)().url.host}function d(){return(0,n.N)()?window.location.origin:(0,r.s)().url.origin}function l(){return(0,n.N)()?window.location.search:(0,r.s)().url.search}function u(){return(0,n.N)()?window.location.hash:(0,r.s)().url.hash}function p(){return(0,n.N)()?window.document.cookie:(0,r.s)().cookie}function g(e){if(!(0,n.N)())throw new Error("getDocumentElementById is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementById(e)}function h(e){if(!(0,n.N)())throw new Error("getDocumentElementsByTagName is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementsByTagName(e)}function m(e){if(!(0,n.N)())throw new Error("getDocumentElementsByClassName is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementsByClassName(e)}function f(){return(0,n.N)()?window.indexedDB:null}function v(){return(0,n.N)()?window.devicePixelRatio:(0,r.s)().devicePixelRatio}function y(){return!!((0,n.N)()?window.CSS&&window.CSS.supports&&CSS.supports("display","grid"):(0,r.s)().canUseCssGrid)}function b(e,t,i=!0,r="anonymous",o,s){if(!(0,n.N)())throw new Error("createScriptTag is unsupported server side. This call should be wrapped in canUseDOM().");const a=document.createElement("script");return t&&(a.id=t),o&&a.setAttribute("class",o),s&&(a.onload=s),a.type="text/javascript",e&&(a.src=e,a.async=i,a.crossOrigin=r),window&&window.NONCE_ID&&(a.nonce=window.NONCE_ID),a}},33379:function(e,t,i){"use strict";function n(){return!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv)}i.d(t,{N:function(){return n}})},27003:function(e,t,i){"use strict";i.d(t,{Gq:function(){return r}});let n=new Map;const r=Object.freeze({set(e,t){return n.set(e,t),this},get:function(e,t){let i=n.get(e);return void 0===i&&t&&(i=t(),n.set(e,i)),i},clear(){n.clear()},delete:e=>n.delete(e),has:e=>n.has(e)})},70587:function(e,t,i){"use strict";i.d(t,{Cw:function(){return a},cs:function(){return s},j4:function(){return c},mx:function(){return o}});var n=i(68692),r=i(80329);const o="rd",s="OSATE",a="OSAT",c={ver:"0.1.0",spec:{innerWidth:{clientValue:()=>window.innerWidth},innerHeight:{clientValue:()=>window.innerHeight},outerWidth:{clientValue:()=>window.outerWidth},breakpoint:{clientValue:()=>(0,r.wk)(window.innerWidth,n.A)},locationHash:{clientValue:()=>window.location.hash},locationHref:{clientValue:()=>window.location.href},locationHost:{clientValue:()=>window.location.host},locationHostName:{clientValue:()=>window.location.hostname},locationOrigin:{clientValue:()=>window.location.origin},locationPathName:{clientValue:()=>window.location.pathname},locationProtocol:{clientValue:()=>window.location.protocol},locationSearch:{clientValue:()=>window.location.search},screenTop:{clientValue:()=>window.screenTop},screenY:{clientValue:()=>window.screenY},canUseCssGrid:{clientValue:()=>window.CSS&&window.CSS.supports&&CSS.supports("display","grid")||!1},devicePixelRatio:{clientValue:()=>window.devicePixelRatio},language:{clientValue:()=>document.documentElement.lang},direction:{clientValue:()=>document.documentElement.dir}}}},68692:function(e,t,i){"use strict";i.d(t,{A:function(){return n}});const n=[0,656,980,1304]},99590:function(e,t,i){"use strict";i.d(t,{h:function(){return r}});var n=i(33379);function r(e){return"object"==typeof i.g&&i.g.TEST_ENV&&!i.g.TEST_SINGLETONPROXY||(0,n.N)()?e.getInstance():new Proxy(e,{get(e,t,i){const n=e.getInstance();return Reflect.get(n,t,n)},set(e,t,i,n){const r=e.getInstance();return Reflect.set(r,t,i,r)}})}},2140:function(e,t,i){"use strict";i.d(t,{s:function(){return d}});var n=i(27003),r=i(70587);const o="__RequestDataInstance__";class s{constructor(e,t){if(this.url=new URL(e.href),this.innerHeight=e.innerHeight,this.devicePixelRatio=e.devicePixelRatio,this.canUseCssGrid=e.canUseCssGrid,this.requestId=e.requestId,this.cookie=e.cookie,this.referer=e.referer,this.userAgent=e.userAgent,this.oneServiceHeaders=function(e){try{if(e)return JSON.parse(e)}catch(e){}}(e.oneServiceHeaders)||{},this.isPssrMode=t,t){const e=a(r.cs,this.cookie),t=!!e&&"1"===e,i=a(r.Cw,this.cookie);if(t&&i||!e&&!i)return this.msalAuthReady=!0,void(i&&(this.oneServiceHeaders.Authorization=`Bearer ${i}`));this.msalAuthReady=!1,this.pssrRejectedReason=e&&!t?"interactiveLogin":e&&!i?"missOSAT":"missOSATE"}}static getInstance(){const e=n.Gq.get(o);return e||(i.g.TEST_ENV?c({href:"http://localhost:8080/",innerHeight:768,devicePixelRatio:1,canUseCssGrid:!1,requestId:"0",cookie:"",userAgent:"",referer:"",oneServiceHeaders:""}):c({href:"http://localhost:8080/",innerHeight:0,devicePixelRatio:0,canUseCssGrid:!1,requestId:"0",cookie:"",userAgent:"",referer:"",oneServiceHeaders:""}))}static resetInstance(e,t=!1){const i=new s(e,t);return n.Gq.set(o,i),i}}function a(e,t){if(t&&e){const i=new RegExp("\\b"+e+"\\s*=\\s*([^;]*)","i").exec(t);return i&&i.length>1?i[1]:null}return null}const c=s.resetInstance,d=()=>s.getInstance()},59049:function(e,t,i){"use strict";i.d(t,{v:function(){return n}});class n extends Map{constructor(e){super(),this.identifier=e,this.subscriptions=new Map}set(e,t){super.set(e,t);const i=this.subscriptions.get(e)||[];return i.length?(i.forEach(((e,i)=>{try{e&&e(t)}catch(e){}})),this):this}subscribe(e,t,i=!0){const n=this.subscribeInternal(e,t);return i&&this.has(e)&&this.tryExecuteSubscriptionCallback(e,n.index,this.get(e)),{unsubscribe:n.unsubscribe}}subscribeInternal(e,t){const i=this.subscriptions.get(e)||[];this.subscriptions.set(e,[...i,t]);const n=i.length;return{unsubscribe:()=>{const t=this.subscriptions.get(e)||[];t[n]&&(t[n]=null),this.subscriptions.set(e,t)},index:n}}tryExecuteSubscriptionCallback(e,t,i){const n=this.subscriptions.get(e);if(!n||!n.length)return;const r=n[t];"function"==typeof r&&r(i)}}},35385:function(e,t,i){"use strict";i.d(t,{J:function(){return r}});var n=i(55067);class r{}r.updateLayout=new n.C("updateLayout"),r.initialize=new n.C("initialize")},43980:function(e,t,i){"use strict";i.d(t,{j:function(){return r}});var n=i(53899);function r(e,t,i,r,o){if(!i||r)return n.nP.custom;const s=n.Wi[n.nP.focused],a=n.Wi[n.nP.informational],c=n.Wi[n.nP.inspirational];return e===s.feeds_position&&t===s.current_background_image_type?n.nP.focused:e===a.feeds_position&&t===a.current_background_image_type&&void 0!==o&&o===a.daily_discovery?n.nP.informational:e===c.feeds_position&&t===c.current_background_image_type?n.nP.inspirational:n.nP.custom}},91608:function(e,t,i){"use strict";i.d(t,{A$:function(){return r},FQ:function(){return n},FT:function(){return s},Jx:function(){return c},cN:function(){return d},jb:function(){return o}});const n=92,r=50,o=40;let s;const a=[];function c(e){a.push(e)}function d(e){if(e!==s){s=e;for(const t of a)t(e)}}},53899:function(e,t,i){"use strict";i.d(t,{$B:function(){return f},$N:function(){return y},$_:function(){return b},F5:function(){return C},HX:function(){return l},L_:function(){return S},MT:function(){return m},Py:function(){return a},RZ:function(){return I},Uq:function(){return c},VE:function(){return p},Wi:function(){return A},YT:function(){return s},YZ:function(){return P},Z3:function(){return g},_9:function(){return w},_U:function(){return h},gZ:function(){return u},iz:function(){return n},nP:function(){return d},yR:function(){return v}});var n,r=i(12108),o=i(84169);!function(e){e[e.MicrosoftNews=0]="MicrosoftNews",e[e.Office365=1]="Office365",e[e.Gaming=2]="Gaming",e[e.Play=3]="Play",e[e.NavigationPage=4]="NavigationPage",e[e.Following=5]="Following"}(n||(n={}));const s={0:"MicrosoftNews",1:"Office365",2:"Gaming",3:"Play",4:"NavigationPage",5:"Following"};var a,c,d,l,u,p,g;!function(e){e.Enforced="ENFORCED",e.Recommended="RECOMMENDED"}(a||(a={})),function(e){e[e.focused=0]="focused",e[e.inspirational=1]="inspirational",e[e.informational=2]="informational",e[e.custom=3]="custom"}(c||(c={})),function(e){e.focused="focused",e.inspirational="inspirational",e.informational="informational",e.custom="custom"}(d||(d={})),function(e){e.bing="bing",e.custom="custom",e.iris="iris",e.off="off",e.theme="theme",e.enterprise="enterprise",e.imageAndVideo="imageAndVideo"}(l||(l={})),function(e){e[e.allowAll=0]="allowAll",e[e.disableImageOfTheDay=1]="disableImageOfTheDay",e[e.disableCustomImage=2]="disableCustomImage",e[e.disableAll=3]="disableAll"}(u||(u={})),function(e){e[e.off=0]="off",e[e.onerow=1]="onerow",e[e.tworows=2]="tworows",e[e.threerows=4]="threerows",e[e.top=3]="top"}(p||(p={})),function(e){e.off="off",e.onerow="onerow",e.tworows="tworows",e.threerows="threerows",e.top="top"}(g||(g={}));const h={0:"off",1:"onerow",2:"tworows",4:"threerows",3:"top"},m={0:"allowAll",1:"disableImageOfTheDay",2:"disableCustomImage",3:"disableAll"},f={off:0,onerow:1,tworows:2,threerows:4,top:3};var v;!function(e){e.off="off",e.tworows="tworows",e.threerows="threerows"}(v||(v={}));const y={off:0,tworows:1,threerows:2},b={0:"off",1:"tworows",2:"threerows"},S={backgroundImageTypePolicy:u.allowAll,currentBackgroundImageType:l.imageAndVideo,currentLayout:d.inspirational,quickLinksEnabled:!0,hideDefaultTopSites:!1,imageOfTheDayEnabled:!0,selectedFeedDisplaySetting:"headingsonly",dailyDiscoveryEnabled:!0},C={0:"focused",1:"inspirational",2:"informational",3:"custom"},w={backgroundImageTypePolicy:"ntp.background_type_blocked_by_policy",currentBackgroundImageType:"ntp.background_image_type",hideDefaultTopSites:"ntp.hide_default_top_sites",customBackgroundImageInfo:"ntp.local_background_image",layout:"ntp.layout_mode",quickLinks:"ntp.show_top_sites",quickLinksDisplaySetting:"ntp.quick_links_options",imageOfTheDay:"ntp.show_image_of_day",feeds:"ntp.news_feed_display",feedType:"ntp.feed_type",greeting:"ntp.show_greeting",showSettings:"ntp.show_settings",verticalTabsCollapsed:"edge.vertical_tabs.collapsed",verticalTabsOpened:"edge.vertical_tabs.opened",singleColumnEnabled:"ntp.single_column.enabled",userNurturingUpdated:"ntp.user_nurturing",hasUserSeenNewFre:"new_device_fre.has_user_seen_new_fre",defaultBrowserSettingEnabled:"browser.default_browser_setting_enabled",showAppLauncher:"ntp.enable_app_launcher",userChoices:"ntp.record_user_choices",selectedFeedPivot:"ntp.selected_feed_pivot",layoutModeInstrumentation:"instrumentation.ntp.layout_mode",newsFeedDsiplayInstrumentation:"instrumentation.ntp.news_feed_display"},T={focused:{quick_links:!0,feeds_position:"headingsonly",current_background_image_type:l.off,greeting:!0,hide_promoted_links:!1,daily_discovery:!0},inspirational:{quick_links:!0,feeds_position:"peek",current_background_image_type:l.imageAndVideo,greeting:!0,hide_promoted_links:!1,daily_discovery:!0},informational:{quick_links:!0,feeds_position:"always",current_background_image_type:l.imageAndVideo,greeting:!0,hide_promoted_links:!1,daily_discovery:!1}},k={focused:{quick_links:!0,feeds_position:"headingsonly",current_background_image_type:l.off,greeting:!0,hide_promoted_links:!1,daily_discovery:!0},inspirational:{quick_links:!0,feeds_position:"peek",current_background_image_type:l.imageAndVideo,greeting:!0,hide_promoted_links:!1,daily_discovery:!0},informational:{quick_links:!0,feeds_position:"always",current_background_image_type:l.imageAndVideo,greeting:!0,hide_promoted_links:!1,daily_discovery:!1}},A=o.jG.CurrentRequestTargetScope&&o.jG.CurrentRequestTargetScope.audienceMode===r.F.Enterprise?T:k,I="DefaultFeedPolicy",P={currentBackgroundImageType:A.informational.current_background_image_type,currentLayout:d.informational,quickLinksEnabled:A.informational.quick_links,hideDefaultTopSites:A.informational.hide_promoted_links,imageOfTheDayEnabled:!0,selectedFeedDisplaySetting:A.informational.feeds_position,dailyDiscoveryEnabled:A.informational.daily_discovery,greetingEnabled:A.informational.greeting}},4734:function(e,t,i){"use strict";i.d(t,{Qz:function(){return w},bn:function(){return T},v:function(){return k},FQ:function(){return v},gy:function(){return h},S0:function(){return p},F_:function(){return m},Qm:function(){return f}});var n,r=i(33940);!function(e){e[e.StandardEventBasedDeferral=0]="StandardEventBasedDeferral",e[e.CustomEventBasedDeferral=1]="CustomEventBasedDeferral"}(n||(n={}));var o=i(68917),s=i(53301),a=i(83757),c=i(53076),d=i(93450),l=i(49016);const u=(e,t)=>e.filter((e=>t in e));function p(){return d._.getInstance().rootReducer.connector(c.z.MilestoneData)}function g(e){const t=p();if(!t)return;const i=t.getCurrentState().perExperienceMilestones,n=i&&i.get(e);let r;return n&&(r=n.perInstanceMilestones.get(a.t)),r}function h(e){const t=g(e);if(!t||function(e){let t;switch(e.loadAfter.eventType){case o.Gg.aboveTheFoldVisuallyReady:t=y();break;case o.Gg.belowTheFoldTransitionStart:t=b();break;case o.Gg.hydrationComplete:t=C();break;default:t=(0,l.c)(e.loadAfter.experienceType,e.loadAfter.eventType)}return t}(t))return null;if(t.shouldLoad&&t.loadAfter){return{deferralType:S(t.loadAfter),shouldResolve:t.shouldLoad}}return null}function m(){return p()?y()?Promise.resolve():new Promise((e=>{s.g.updateAboveTheFoldVisuallyReady.registerObserver((t=>{e()}))})):Promise.resolve()}function f(){return p()?b()?Promise.resolve():new Promise((e=>{s.g.updateBelowTheFoldTransitionStart.registerObserver((t=>{e()}))})):Promise.resolve()}function v(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=p();if(!t)return;const i=t.getCurrentState().plugins;if(!i||0===i.length)return;const n=u(i,e);for(const t of n)void 0!==t[e]&&(yield t[e].call(t))}))}function y(){const e=p();if(!e)return!1;const{aboveTheFoldVisuallyReady:t}=e.getCurrentState();return Boolean(t&&t.endTime!==a.n)}function b(){const e=p();return!!e&&e.getCurrentState().belowTheFoldTransitionStart}function S(e){return e.eventType in o.ic?n.CustomEventBasedDeferral:n.StandardEventBasedDeferral}function C(){const e=p();return!!e&&e.getCurrentState().hydrationComplete}function w(e,t,i,n){return{deferralInfo:e,experienceType:t,experienceGroup:i,experienceInstance:n}}function T(e,t,i,n){return{experienceType:e,currentState:t,experienceGroup:i,experienceInstance:n}}function k(e,t,i,n,r){return{experienceType:e,experienceGroup:t,experienceInstance:i,startTime:n,endTime:r}}},53301:function(e,t,i){"use strict";i.d(t,{g:function(){return o}});var n=i(55067);class r{constructor(){this.updateHydrationComplete=new n.C("updateHydrationRenderComplete"),this.updateRiverHydrationComplete=new n.C("updateRiverHydrationRenderComplete"),this.updateAboveTheFoldVisuallyReady=new n.C("updateAboveTheFoldVisuallyReady"),this.updateBelowTheFoldTransitionStart=new n.C("updateBelowTheFoldTransitionStart"),this.updateExperienceLoadDeferralState=new n.C("updateExperienceLoadDeferralState"),this.updateExperienceCurrentState=new n.C("updateExperienceCurrentState"),this.updateExperiencePublicState=new n.C("updateExperiencePublicState"),this.updateExperienceRenderDeferralState=new n.C("updateExperienceRenderDeferralState"),this.updateInitTiming=new n.C("UpdateInitTiming"),this.updatePageComplete=new n.C("updatePageCompleteTiming"),this.updateRenderTiming=new n.C("UpdateRenderTiming"),this.updateVisuallyReadyTiming=new n.C("UpdateVisuallyReadyTiming"),this.updateStartLoadingTiming=new n.C("UpdateStartLoadingTiming"),this.updateDomCompleteTiming=new n.C("UpdateDomCompleteTiming"),this.updateMilestonePlugins=new n.C("updateMilestonePlugin")}resetInstance(){this.updateHydrationComplete.unregisterObservers(),this.updateRiverHydrationComplete.unregisterObservers(),this.updateAboveTheFoldVisuallyReady.unregisterObservers(),this.updateBelowTheFoldTransitionStart.unregisterObservers(),this.updateExperienceLoadDeferralState.unregisterObservers(),this.updateExperienceCurrentState.unregisterObservers(),this.updateExperiencePublicState.unregisterObservers(),this.updateExperienceRenderDeferralState.unregisterObservers(),this.updateInitTiming.unregisterObservers(),this.updatePageComplete.unregisterObservers(),this.updateRenderTiming.unregisterObservers(),this.updateVisuallyReadyTiming.unregisterObservers(),this.updateDomCompleteTiming.unregisterObservers(),this.updateMilestonePlugins.unregisterObservers(),o=new r}}let o=new r},98358:function(e,t,i){"use strict";i.d(t,{m:function(){return h}});var n=i(53301),r=i(68917),o=i(4734),s=i(78690),a=i(49016),c=i(2820);function d(e,t){e.registerObserver((e=>{((e.params||[])[0]||[]).forEach((({deferralInfo:e,experienceType:i})=>{e&&i&&function(e,t,i){if(!e||!t||!(t.eventType in r.Gg)||!t.experienceType&&!t.experienceGroup)return;const{eventType:n,experienceType:o}=t,d=o||t.experienceGroup,l=a.v.get(d);if(l&&l.referencedDependentsDeferralMap){if(l.currentState<n){const t=l.referencedDependentsDeferralMap.get(n);t?t.size>0&&t.set(e,i):l.referencedDependentsDeferralMap.set(n,new Map([[e,i]]))}}else a.v.set(d,{currentState:s.D.notStarted,referencedDependentsDeferralMap:new Map([[n,new Map([[e,i]])]])}),o&&(0,c.w)(o,!0)}(i,e,t)}))}))}function l(){d(n.g.updateExperienceLoadDeferralState,s.D.loadDeferred),d(n.g.updateExperienceRenderDeferralState,s.D.renderDeferred),n.g.updateExperienceCurrentState.registerObserver((e=>{const t=[];if(((e.params||[])[0]||[]).forEach((({experienceType:e,currentState:i})=>{if(!e||!i)return;const n=a.v.get(e);if(!n)return;n.currentState=i;const c=r.ez.get(i),d=c&&n.referencedDependentsDeferralMap.get(c);d&&d.forEach(((e,i)=>{if(!i)return;const n=e===s.D.loadDeferred?s.D.resolvedForLoad:s.D.resolvedForRender;t.push((0,o.bn)(i,n))}))})),t.length){const e=(0,o.S0)();e&&n.g.updateExperienceCurrentState.getActionSender(e).send(t)}}))}var u=i(70493);let p=new Map;(0,u.U)((()=>{p=new Map}));var g=i(63439);class h extends g.e{constructor(e,t,i,r,a,c,d){super(e,t,i,r,a,c,d),this.startObservers(),n.g.updateInitTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],s.D.initialized))),n.g.updateRenderTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],s.D.rendered))),n.g.updateVisuallyReadyTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],s.D.visuallyReady))),n.g.updateStartLoadingTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],s.D.startLoading))),n.g.updateDomCompleteTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],s.D.domComplete))),n.g.updateExperienceLoadDeferralState.registerObserver((e=>{const t=((e.params||[])[0]||[]).map((({experienceType:e,experienceGroup:t,experienceInstance:i})=>(0,o.bn)(e,s.D.loadDeferred,t,i)));t.length&&n.g.updateExperienceCurrentState.getActionSender(this).send(t)})),n.g.updateExperienceRenderDeferralState.registerObserver((e=>{const t=((e.params||[])[0]||[]).map((({experienceType:e,experienceGroup:t,experienceInstance:i})=>(0,o.bn)(e,s.D.renderDeferred,t,i)));t.length&&n.g.updateExperienceCurrentState.getActionSender(this).send(t)}))}startObservers(){l(),n.g.updateExperienceCurrentState.registerObserver((e=>{((e.params||[])[0]||[]).forEach((e=>{e.currentState===s.D.domComplete&&p.forEach(((t,i)=>{let n=!0;const{DomCompleteDependencies:r,DomCompleteCallback:o}=t;for(const t of r.values()){const{dependencyId:{experienceType:i,experienceGroup:r,experienceNamespace:o}}=t;if(i&&i!==e.experienceType||r&&r!==e.experienceGroup||o&&o!==e.experienceInstance||(t.milestoneReached=!0),!t.milestoneReached){n=!1;break}}n&&(t.dependenciesMet=!0,o&&(p.delete(i),o()))}))}))}))}updateExperienceTiming(e,t){e&&e.endTime&&n.g.updateExperienceCurrentState.getActionSender(this).send([(0,o.bn)(e.experienceType,t,e.experienceGroup,e.experienceInstance)])}}},83757:function(e,t,i){"use strict";i.d(t,{n:function(){return r},t:function(){return n}});const n="default",r=-1},39008:function(e,t,i){"use strict";i.d(t,{c:function(){return b}});var n=i(30856),r=i(53301),o=i(60070),s=i(78690),a=i(33954);function c(){return g(r.g.updateAboveTheFoldVisuallyReady,(()=>!0))}function d(){return g(r.g.updateBelowTheFoldTransitionStart,(()=>!0))}function l(e){return p(e,s.D.resolvedForLoad)}function u(e){return p(e,s.D.resolvedForRender)}function p(e,t){return g(r.g.updateExperienceCurrentState,(i=>((i.params||[])[0]||[]).some((i=>i.currentState===t&&i.experienceType===e))))}function g(e,t){return new Promise(((i,n)=>{try{e.registerObserver((e=>{t(e)&&i(!0)}))}catch(e){a.k.logError(e),n(!1)}}))}function h(){return new Promise(((e,t)=>{try{r.g.updateHydrationComplete.registerObserver((()=>{e(!0)}))}catch(e){a.k.logError(e),t(!1)}}))}var m=i(83757),f=i(68917);class v{static updateExperienceCurrentState(e,t,i,n,r){const o=this.getOrCreateExperienceInstanceMilestone(e,t,n,r);o&&(o.currentState=i)}static updateMilestoneTiming(e,t,i,n,r,a,c){const d=this.getOrCreateExperienceInstanceMilestone(e,t,a,c);let l;if(d)switch(i){case o.c.initialized:l=d.initializationTime;break;case o.c.rendered:l=d.renderTime;break;case o.c.visuallyReady:l=d.visuallyReadyTime;break;case o.c.domComplete:l=d.domCompleteTime;break;case o.c.startLoading:return void(l=d.startLoadingTime);case o.c.error:return void(d.currentState=s.D.error);default:throw new Error("Invalid Argument: Unrecognized eventType")}if(!l)throw new Error(`Invalid experience time object while processing timing update for ${i}`);n&&(l.startTime=n),r&&(l.endTime=r)}static updateHydrationComplete(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);e.hydrationComplete=t}static updateBelowTheFoldTransitionStart(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);e.belowTheFoldTransitionStart=t}static updateMilestonePlugin(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);e.plugins&&0!==e.plugins.length?e.plugins=e.plugins.concat(t):e.plugins=t}static updateAboveTheFoldVisuallyReady(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);if(!e.aboveTheFoldVisuallyReady)throw new Error("AboveTheFold start not set");e.aboveTheFoldVisuallyReady.startTime=performance.timing.navigationStart,e.aboveTheFoldVisuallyReady.endTime=t}static updatePageComplete(e,t){if(!e)throw new Error(v.invalidMilestoneModelMessage);if(!e.aboveTheFoldVisuallyReady)throw new Error("AboveTheFold start not set");e.pageCompleteTiming.startTime=performance.timing.navigationStart,e.pageCompleteTiming.endTime=t}static deferExperienceLoad(e,t,i,n,r){const o=this.getOrCreateExperienceInstanceMilestone(e,t,n,r);o.loadAfter={experienceType:i.experienceType,experienceGroup:i.experienceGroup,eventType:i.eventType},v.updateLoadDeferralHandler(o,t)}static deferExperienceRender(e,t,i,n,r){const o=this.getOrCreateExperienceInstanceMilestone(e,t,n,r);o.renderAfter={experienceType:i.experienceType,experienceGroup:i.experienceGroup,eventType:i.eventType},v.updateRenderDeferralHandler(o,t)}static getOrCreateExperienceMilestone(e,t,i){if(!t)throw new Error("Invalid Argument: experienceType");e||(e={aboveTheFoldVisuallyReady:void 0,pageCompleteTiming:void 0,perExperienceMilestones:void 0}),e.perExperienceMilestones||(e.perExperienceMilestones=new Map);let n=e.perExperienceMilestones.get(t);return n||(n={experienceType:t,experienceGroup:i,perInstanceMilestones:new Map},e.perExperienceMilestones.set(t,n)),n}static getOrCreateExperienceInstanceMilestone(e,t,i,n){const r=this.getOrCreateExperienceMilestone(e,t,i),o=n||m.t;let a=r.perInstanceMilestones.get(o);return a||(a={currentState:s.D.notStarted,initializationTime:{endTime:m.n,startTime:m.n},loadAfter:{experienceType:void 0,eventType:void 0},renderAfter:{experienceType:void 0,eventType:void 0},renderTime:{endTime:m.n,startTime:m.n},visuallyReadyTime:{endTime:m.n,startTime:m.n},startLoadingTime:{endTime:m.n,startTime:m.n},domCompleteTime:{endTime:m.n,startTime:m.n}},r.perInstanceMilestones.set(o,a)),a}static updateLoadDeferralHandler(e,t){switch(e.loadAfter.eventType){case f.Gg.aboveTheFoldVisuallyReady:e.shouldLoad=c;break;case f.Gg.belowTheFoldTransitionStart:e.shouldLoad=d;break;case f.Gg.hydrationComplete:e.shouldLoad=h;break;default:return void(e.shouldLoad=l.bind(this,t))}}static updateRenderDeferralHandler(e,t){switch(e.renderAfter.eventType){case f.Gg.aboveTheFoldVisuallyReady:e.shouldRender=c;break;case f.Gg.belowTheFoldTransitionStart:e.shouldRender=d;break;case f.Gg.hydrationComplete:e.shouldRender=h;break;default:return void(e.shouldRender=u.bind(this,t))}}}v.invalidMilestoneModelMessage="Invalid Argument: milestoneModel";var y=i(85663);class b{reduce(e,t){let i;if(i=e?Object.assign({},e):{aboveTheFoldVisuallyReady:{endTime:m.n,startTime:m.n},pageCompleteTiming:{endTime:m.n,startTime:m.n},perExperienceMilestones:new Map},!t)return i;let n=!1;return n=n||this.handlePageLevelActions(n,t,i),n=n||this.handleExperienceLevelActions(n,t,i),i||e}handleExperienceLevelActions(e,t,i){return e=(e=(e=(e=(e=(e=(e=(e=(e=e||n.G.handleAction(t,r.g.updateInitTiming,(e=>this.updateTiming(o.c.initialized,i,e))))||n.G.handleAction(t,r.g.updateRenderTiming,(e=>this.updateTiming(o.c.rendered,i,e))))||n.G.handleAction(t,r.g.updateVisuallyReadyTiming,(e=>this.updateTiming(o.c.visuallyReady,i,e))))||n.G.handleAction(t,r.g.updateStartLoadingTiming,(e=>this.updateTiming(o.c.startLoading,i,e))))||n.G.handleAction(t,r.g.updateDomCompleteTiming,(e=>this.updateTiming(o.c.domComplete,i,e))))||n.G.handleAction(t,r.g.updateExperienceLoadDeferralState,(e=>e.forEach((({deferralInfo:e,experienceType:t,experienceGroup:n,experienceInstance:r})=>{e&&t&&v.deferExperienceLoad(i,t,e,n,r)})))))||n.G.handleAction(t,r.g.updateExperienceRenderDeferralState,(e=>e.forEach((({deferralInfo:e,experienceType:t,experienceGroup:n,experienceInstance:r})=>{e&&t&&v.deferExperienceRender(i,t,e,n,r)})))))||n.G.handleAction(t,r.g.updateExperienceCurrentState,(e=>e.forEach((({experienceType:e,currentState:t,experienceGroup:n,experienceInstance:r})=>{t&&e&&v.updateExperienceCurrentState(i,e,t,n,r)})))))||n.G.handleAction(t,r.g.updateExperiencePublicState,(e=>{}))}handlePageLevelActions(e,t,i){return e=(e=(e=(e=(e=e||n.G.handleAction(t,r.g.updatePageComplete,(e=>v.updatePageComplete(i,e))))||n.G.handleAction(t,r.g.updateAboveTheFoldVisuallyReady,(e=>v.updateAboveTheFoldVisuallyReady(i,e))))||n.G.handleAction(t,r.g.updateBelowTheFoldTransitionStart,(e=>{(0,y.isNullOrUndefined)(e)||v.updateBelowTheFoldTransitionStart(i,e)})))||n.G.handleAction(t,r.g.updateHydrationComplete,(()=>{v.updateHydrationComplete(i,!0)})))||n.G.handleAction(t,r.g.updateMilestonePlugins,(e=>{e.length>0&&v.updateMilestonePlugin(i,e)}))}updateTiming(e,t,i){const{startTime:n,endTime:r,experienceType:o,experienceGroup:s,experienceInstance:a}=i;v.updateMilestoneTiming(t,o,e,n,r,s,a)}}},49016:function(e,t,i){"use strict";i.d(t,{c:function(){return o},v:function(){return r}});var n=i(70493);let r=new Map;function o(e,t){const i=r.get(e);return!i||i.currentState>=t}(0,n.U)((()=>{r=new Map}))},2820:function(e,t,i){"use strict";i.d(t,{w:function(){return o}});var n=i(70493);let r={};function o(e,t){return null!=t?r[e]=t:r[e]}(0,n.U)((()=>{r={}}))},68917:function(e,t,i){"use strict";i.d(t,{Gg:function(){return r},ez:function(){return s},ic:function(){return n}});var n,r,o=i(78690);!function(e){e[e.belowTheFoldTransitionStart=0]="belowTheFoldTransitionStart"}(n||(n={})),function(e){e[e.startLoading=14]="startLoading",e[e.loaded=4]="loaded",e[e.rendered=8]="rendered",e[e.domComplete=10]="domComplete",e[e.visuallyReady=11]="visuallyReady",e[e.aboveTheFoldVisuallyReady=12]="aboveTheFoldVisuallyReady",e[e.belowTheFoldTransitionStart=0]="belowTheFoldTransitionStart",e[e.hydrationComplete=1]="hydrationComplete"}(r||(r={}));const s=new Map([[o.D.loaded,r.loaded],[o.D.rendered,r.rendered],[o.D.domComplete,r.domComplete],[o.D.visuallyReady,r.visuallyReady]])},78690:function(e,t,i){"use strict";var n;i.d(t,{D:function(){return n}}),function(e){e[e.notStarted=1]="notStarted",e[e.loadDeferred=2]="loadDeferred",e[e.resolvedForLoad=3]="resolvedForLoad",e[e.loaded=4]="loaded",e[e.initialized=5]="initialized",e[e.renderDeferred=6]="renderDeferred",e[e.resolvedForRender=7]="resolvedForRender",e[e.rendered=8]="rendered",e[e.domComplete=10]="domComplete",e[e.visuallyReady=11]="visuallyReady",e[e.error=12]="error",e[e.startLoading=14]="startLoading"}(n||(n={}))},60070:function(e,t,i){"use strict";var n;i.d(t,{c:function(){return n}}),function(e){e[e.domComplete=0]="domComplete",e[e.error=1]="error",e[e.initialized=2]="initialized",e[e.rendered=3]="rendered",e[e.visuallyReady=5]="visuallyReady",e[e.startLoading=6]="startLoading"}(n||(n={}))},4766:function(e,t,i){"use strict";i.d(t,{$0:function(){return A},og:function(){return w},Qw:function(){return k}});var n=i(55801),r=i(85068);class o extends n.r{reportInteractionTelemetry(e){}getPlacementRules(){return[...super.getPlacementRules(),...this._platformData.placementRules]}get id(){return this._platformData.id}get placementSource(){return r.mv.Internal}get group(){return this._platformData.group}}var s=i(3913),a=i(63854),c=i(65453);class d extends a.L{get IsValid(){return!!this._contentData&&super.IsValid}get _contentData(){return this._platformData.contentModel}get title(){return this._contentData.title}get description(){return this._contentData.description}get contentImage(){return this._contentData.contentImage}get logoImage(){return this._contentData.logoImage}get engageContentAction(){return Object.assign(Object.assign({},this._contentData.engageContentAction),{actionDelegate:()=>{var e,t,i;null===(t=null===(e=this._contentData.engageContentAction)||void 0===e?void 0:e.actionDelegate)||void 0===t||t.call(e),null===(i=this._interactionReporter)||void 0===i||i.reportInteraction(c.p.Engaged)}})}get dismissContentAction(){return Object.assign(Object.assign({},this._contentData.dismissContentAction),{actionDelegate:()=>{var e,t,i;null===(t=null===(e=this._contentData.dismissContentAction)||void 0===e?void 0:e.actionDelegate)||void 0===t||t.call(e),null===(i=this._interactionReporter)||void 0===i||i.reportInteraction(c.p.Dismissed)}})}get closeContentAction(){return Object.assign(Object.assign({},this._contentData.closeContentAction),{actionDelegate:()=>{var e,t,i;null===(t=null===(e=this._contentData.closeContentAction)||void 0===e?void 0:e.actionDelegate)||void 0===t||t.call(e),null===(i=this._interactionReporter)||void 0===i||i.reportInteraction(c.p.Closed)}})}}var l=i(16229);class u extends l.r{get IsValid(){return!!this._surfaceData&&super.IsValid}get _surfaceData(){return this._platformData.surfaceModel}get position(){return this._surfaceData.position}get size(){return this._surfaceData.size}get dismissAfterSeconds(){return this._surfaceData.dismissAfterSeconds}get displaySurfaceAction(){return{actionDelegate:()=>{var e,t,i,n;null===(t=(e=super.displaySurfaceAction).actionDelegate)||void 0===t||t.call(e),null===(n=null===(i=this._surfaceData.displaySurfaceAction)||void 0===i?void 0:i.actionDelegate)||void 0===n||n.call(i)}}}get hideSurfaceAction(){return{actionDelegate:()=>{var e,t,i,n;null===(t=null===(e=super.hideSurfaceAction)||void 0===e?void 0:e.actionDelegate)||void 0===t||t.call(e),null===(n=null===(i=this._surfaceData.hideSurfaceAction)||void 0===i?void 0:i.actionDelegate)||void 0===n||n.call(i)}}}}var p=i(37526);class g extends p.F3{get IsValid(){return!!this._surfaceData&&super.IsValid}get _surfaceData(){return this._platformData.surfaceModel}get transitionEffect(){return this._surfaceData.transitionEffect}get position(){return this._surfaceData.position}get dismissAfterSeconds(){return this._surfaceData.dismissAfterSeconds}}var h=i(26415),m=i(65135),f=i(86331),v=i(81555);function y(e){return e[Math.floor(Math.random()*e.length)]}const b=(e=r.US.Coachmark)=>{let t;if(e===r.US.Coachmark)t={surfaceType:r.US.Coachmark,size:y(Object.values(f.dm)),position:{coachmarkAnchor:v._.myInterests,anchoringPosition:f.RC.Below,hasPointer:!0,pointerPosition:f.Jt.Center},displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}}};else t={surfaceType:r.US.HorizontalBanner,position:y(Object.values(p.bw)),displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}}};return{id:"nurturingPlacementManagerTestKey",placementSource:r.mv.Internal,group:r.V$.Functional,surfaceModel:t,contentModel:{title:y(["Buy Something","Take Action","Learn functionality","Do Something"]),description:"Description should be defined here and need to be informative.",contentType:r.JK.CallToAction,contentImage:y([{url:"https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE5300W?ver=29b3",altText:"Image Alt Text"},{url:"https://www.bing.com/th?id=OADD2.10239253524416_1IRFPKC9YUHNF27KA&pid=21.2&c=16&roil=0&roit=0&roir=1&roib=1&w=300&h=225&dynsize=1",altText:"Image Alt Text"}]),logoImage:{url:"https://www.bing.com/th?id=OADD2.10239253524416_1IRFPKC9YUHNF27KA&pid=21.2&c=16&roil=0&roit=0&roir=1&roib=1&w=300&h=225&dynsize=1",altText:"Image for Rewards for you!"},engageContentAction:{label:y(["Engage","Click","Approve","Go To"]),actionDelegate:()=>{}},dismissContentAction:{label:y(["Dismiss","Not Now","Later","Never"]),actionDelegate:()=>{}}}}},S={[r.US.Coachmark]:(e,t)=>new u(e,t),[r.US.HorizontalBanner]:(e,t)=>new g(e,t)},C={[r.JK.CallToAction]:(e,t)=>new d(e,t)};class w extends s.Dz{sendInternalPlacement(e,t=[]){const i=S[e.surfaceModel.surfaceType],n=C[e.contentModel.contentType];if(i&&n)try{this.providePlacement(new o(Object.assign(Object.assign({},e),{placementRules:t}),i,n))}catch(t){m.M0.sendAppErrorEvent(Object.assign(Object.assign({},h.hle.InternalPlacementProviderError),{message:"Internal data is not valid or missing.",pb:e}))}}showMockPlacement(){this.sendInternalPlacement(b())}}let T;const k=e=>{T=e},A=()=>T},55801:function(e,t,i){"use strict";i.d(t,{r:function(){return o}});var n=i(88901),r=i(65453);class o{constructor(e,t,i){if(this._platformData=e,this.onPlacementInteraction=e=>{},!e)throw new Error("Platform data is required for PlacementModel");if(this.surfaceModel=t(e,this),this.contentModel=i(e,this),!this.IsValid)throw new Error("Platform data is not valid in PlacementModel")}get IsValid(){return!!this.id&&this.surfaceModel.IsValid&&this.contentModel.IsValid}getPlacementRules(){return[(0,n.nQ)(r.p.Viewed,3)]}reportInteraction(e){this.reportInteractionTelemetry(e),this.onPlacementInteraction(e)}}},85068:function(e,t,i){"use strict";var n,r,o,s;i.d(t,{JK:function(){return r},US:function(){return n},V$:function(){return s},mv:function(){return o}}),function(e){e.Coachmark="Coachmark",e.HorizontalBanner="HorizontalBanner",e.RiverCard="RiverCard"}(n||(n={})),function(e){e.CallToAction="CallToAction",e.CallToChoice="CallToChoice"}(r||(r={})),function(e){e.Iris="Iris",e.Amplify="Amplify",e.Internal="Internal"}(o||(o={})),function(e){e.Default="Default",e.Promotional="Promotional",e.Functional="Functional",e.Settings="Settings"}(s||(s={}))},63854:function(e,t,i){"use strict";i.d(t,{L:function(){return r}});var n=i(85068);class r extends class{constructor(e,t){if(this._platformData=e,this._interactionReporter=t,!e)throw new Error("Platform data is required for ContentTemplateModel")}}{get contentType(){return n.JK.CallToAction}get IsValid(){return!!this.title&&!!this.description}}},65453:function(e,t,i){"use strict";var n;i.d(t,{p:function(){return n}}),function(e){e.Served="Served",e.Viewed="Viewed",e.Hidden="Hidden",e.Engaged="Engaged",e.Dismissed="Dismissed",e.Closed="Closed"}(n||(n={}))},3913:function(e,t,i){"use strict";i.d(t,{Dz:function(){return r},iU:function(){return n}});class n{}class r extends n{constructor(){super(...arguments),this._placementsQueue=[]}providePlacement(e){this._callback?this._callback(e):this._placementsQueue.push(e)}subscribeForPlacementStream(e){this._callback||(this._callback=e,this._placementsQueue.forEach((t=>e(t))))}}},88901:function(e,t,i){"use strict";i.d(t,{HL:function(){return a},SX:function(){return s},lH:function(){return c},nQ:function(){return d},y8:function(){return o}});var n=i(26415),r=i(65135);const o=864e5;function s(e,t){if(!e||!t)throw new Error("PlacementInteractionsThrottle: Invalid parameters.");return(i,n)=>{if(!i)return!1;if(!n)return!0;let r;return Object.values(n).flat().forEach((t=>{(null==t?void 0:t.type)===e&&(null==t?void 0:t.ts)&&(!r||r.ts<t.ts)&&(r=t)})),!(r&&Date.now()-r.ts<=t)}}function a(e,t,i){return(n,r)=>{if(!n)return!1;const o=(null==r?void 0:r[n.id])||[];if(null==(i=null==i?void 0:i.filter((e=>e!==n.id)))?void 0:i.length){const e=i.flatMap((e=>(null==r?void 0:r[e])||[]));o.push(...e)}if(!o.length)return!0;let s;return o.forEach((t=>{(null==t?void 0:t.type)===e&&(null==t?void 0:t.ts)&&(!s||s.ts<t.ts)&&(s=t)})),!s||Date.now()-s.ts>t}}function c(e,t,i){return(n,r)=>{const o=(null==r?void 0:r[n.id])||[];if(null==(i=null==i?void 0:i.filter((e=>e!==n.id)))?void 0:i.length){const e=i.flatMap((e=>(null==r?void 0:r[e])||[]));o.push(...e)}if(!o.length)return!0;return((null==o?void 0:o.filter((t=>t.type===e)).length)||0)<t}}function d(e,t){return(i,o)=>{const s=null==o?void 0:o[i.id];if(!s)return!0;return((null==s?void 0:s.filter((t=>t.type===e)).length)||0)>t&&r.M0.sendAppErrorEvent(Object.assign(Object.assign({},n.hle.PlacementRulesExceedInteractionsError),{message:`Placement (id: ${i.id}) exceed ${e} interactions limit of ${t} times.`})),!0}}},49879:function(e,t,i){"use strict";i.d(t,{C:function(){return r}});var n=i(65453);class r{constructor(e,t){if(this._platformData=e,this._interactionReporter=t,!e)throw new Error("Platform data is required for PlacementSurfaceModel")}get displaySurfaceAction(){return{actionDelegate:()=>{var e;null===(e=this._interactionReporter)||void 0===e||e.reportInteraction(n.p.Viewed)}}}get hideSurfaceAction(){return{actionDelegate:()=>{var e;null===(e=this._interactionReporter)||void 0===e||e.reportInteraction(n.p.Hidden)}}}}},16229:function(e,t,i){"use strict";i.d(t,{r:function(){return o}});var n=i(85068),r=i(49879);class o extends r.C{get IsValid(){return!!this.size}get surfaceType(){return n.US.Coachmark}}},37526:function(e,t,i){"use strict";i.d(t,{F3:function(){return a},Sy:function(){return n},bw:function(){return r}});var n,r,o=i(85068),s=i(49879);!function(e){e.SlideUp="SlideUp",e.FadeIn="FadeIn",e.SlideRight="SlideRight"}(n||(n={})),function(e){e.Top="Top",e.Bottom="Bottom"}(r||(r={}));class a extends s.C{get IsValid(){return!!this.position}get surfaceType(){return o.US.HorizontalBanner}}},91470:function(e,t,i){"use strict";i.d(t,{f:function(){return d}});var n=i(53899),r=i(65337),o=i(31293),s=i(68723),a=i(53076),c=i(82423);function d(e){const t=(0,r.$o)().getObject(n.RZ);if(t&&t.isEnforced)return t.contentSource;const i=(0,o.$z)();let d;e&&i&&(d=e[i]);const l=(0,c.K0)(a.z.AdminPortalData),u=l&&l.getCurrentState(),p=u?u.settings:(0,r.$o)().getObject(s.Ai);if(!p)return d;const{adminSelectedNavId:g,isOfficeContentEnabled:h,isShowCompanyAndIndustry:m}=p;let f;return e&&g&&(f=e[g]),h&&m?d||f||t&&t.contentSource||n.iz.MicrosoftNews:h?n.iz.Office365:n.iz.MicrosoftNews}},12611:function(e,t,i){"use strict";i.d(t,{Jw:function(){return a},LZ:function(){return d},N:function(){return b},SY:function(){return c},Sn:function(){return l},TL:function(){return y},XA:function(){return f},_0:function(){return g},cx:function(){return h},hA:function(){return p},ni:function(){return s},v9:function(){return v},xD:function(){return u}});var n=i(44772),r=i(26415),o=i(65135);function s(e,t=!1,i=!1,n){if(!e)return e;if(Array.isArray(e)){if(!e.length)return e;e=e[0]}if(!e||!e.subCards||!Array.isArray(e.subCards))return e;const s=e.subCards.map((e=>a(e,t,i,n)));return!e.subCards.length||s&&s.length&&e.subCards.length===s.length||o.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.eto),{message:"Mapper returned invalid data",pb:Object.assign(Object.assign({},r.eto.pb),{customMessage:`Count mismatch - expected count [${e.subCards.length}] - actual count [${s.length}]`})})),{feedItems:s,nextPageUrl:e.nextPageUrl}}function a(e,t=!1,i=!1,r){if(!e)return{};if(e.type===n.PL.AiCharacterCard||e.type===n.PL.BingHealthFitnessCard||e.type===n.PL.BoostAd||e.type===n.PL.CashbackAds||e.type===n.PL.Elections||e.type===n.PL.EsportsCasualGames||e.type===n.PL.EsportsHighlight||e.type===n.PL.EsportsLiveStream||e.type===n.PL.EventSDCardAmplifyAds||e.type===n.PL.EventSDCardShopping||e.type===n.PL.EventSDCardSportsMIT1||e.type===n.PL.EventSDCardSportsMIT2||e.type===n.PL.EventSDCardSportsMIT3||e.type===n.PL.EventSDCardWorldCup||e.type===n.PL.EventSDCardWorldCup2||e.type===n.PL.GroupedContent||e.type===n.PL.HealthTipCard||e.type===n.PL.LinkedInCard||e.type===n.PL.LocalGuide||e.type===n.PL.LocalNews||e.type===n.PL.LocalNewsFeed||e.type===n.PL.MyBriefRiverCard||e.type===n.PL.RecommendedSearchesCard||e.type===n.PL.Promotion||e.type===n.PL.SageGroupedFeed||e.type===n.PL.ShoppingFeedCard||e.type===n.PL.ShoppingMerchantCategoryDeals||e.type===n.PL.ShoppingProngCardResponse||e.type===n.PL.SportsMatch||e.type===n.PL.SportsOlympics||e.type===n.PL.StockQuote||e.type===n.PL.StockQuote_spotlight||e.type===n.PL.TopStories||e.type===n.PL.TrafficDelays||e.type===n.PL.TravelDestinationCard||e.type===n.PL.Upsell||e.type===n.PL.UserInterestTopic||e.type===n.PL.UserInterestTopicAndProvider||e.type===n.PL.VideoShoppingCard||e.type===n.PL.WeatherSummary||e.type===n.PL.WeatherSummary_spotlight||e.type===n.PL.WorkHeadlines||e.type===n.PL.WindowsShellTrendingTopics||e.type===n.PL.ColdStartArticleFreCard||e.type===n.PL.MoneyInfo||e.type===n.PL.MoneyMoreForYouCard)return e;const o=(e.type||"").toLowerCase();if(o.startsWith("gold")||o.startsWith("combo:"))return e;if(e.type===n.PL.TopicFeed)return p(e);const s=e.wpoMetadata&&e.wpoMetadata.contentType,g=s===n.PL.NewsGroups||s===n.PL.NewsAnswerModule;if(i&&e.type===n.PL.Infopane&&!g)return e;if(e.type===n.PL.ComboCard)return l(e);if(e.subCards)return t?{subItems:e.subCards.map((e=>a(e))),type:e.type||"tabbedInfopane"}:u(e,r);if(e.type===n.PL.ExternalLink)return c(e);if(e.type===n.PL.WebContent&&!i)return d(e);const{abstract:m="",actions:S=[],aiComments:C,badges:w,cardId:T,category:k,colorSamples:A,commentStatus:I,commentSummary:P,dataUrl:E,engagementSummary:O,externalVideoFiles:M,feed:x={},financeMetadata:D,id:R,images:L,isBreaking:F,isFeatured:N,isLocalContent:B,isLocalNews:j,locale:$,position:U,provider:H={},publishedDateTime:_,reactionStatus:W,reactionSummary:z,reasons:G,recoId:V,relatedCards:q,ri:Z,rotPos:K,sourceId:Q,spotlightStamp:J,title:X="",topComments:Y,topics:ee=[],traceIdIndex:te,type:ie,url:ne,videoMetadata:re}=e,oe=y(L)||{},se=M||[],ae=ee.find((e=>e.feedId===x.id&&e.locale===$)),ce=v(ne);let de=f(H.logoUrl);!de&&H.logo&&H.logo.url&&(de=f(H.logo.url));const le=S.map((e=>b[e]||e));return w&&w.some((e=>"followedPublisher"===e.type))&&le.push("followedPublisher"),{id:R,cardId:T,cardContent:{abstract:m,aiComments:C,badges:w,colorSamples:A,category:{product:k,label:void 0},destinationUrl:ne,financeMetadata:D,id:R,isLocalContent:B,isLocalNews:j,isBreaking:F||0,isFeatured:N||!1,images:[{id:f(oe.url),height:oe.height,width:oe.width,caption:oe.title,focalRegion:oe.focalRegion,attribution:oe.attribution,source:oe.source,url:oe.url,colorSamples:oe.colorSamples}],kicker:X,locale:$,provider:{id:H.id,name:H.name,logo:{id:de},logoUrl:H.logoUrl||H.logo&&H.logo.url,profileId:H.profileId,subscribable:!1},publishedDateTime:_,reasons:G,sourceHref:E,sourceId:Q,type:h(ie),title:X,topics:ee,tags:[ae||{}],uriTitle:ce[6],videoFiles:se},metadata:{abstractLength:m.length,titleLength:X.length,category:k||ce[4],subCategory:ce[5],primaryImage:{height:oe.height,width:oe.width},locale:$,feed:{id:x.id},kicker:[x],actions:le,reactionStatus:W,commentStatus:I,reactionSummary:z,commentSummary:P,engagementSummary:O,reasons:G,topComments:Y,recoId:V,relatedCards:q,ri:Z,videoMetadata:re},reasons:G,position:U,rotPos:K,spotlightStamp:J,type:ie,traceIdIndex:te||r}}function c(e){const{type:t,category:i,images:n,id:r,url:o,abstract:s="",title:a="",provider:c={},feed:d={},cardId:l,position:u,rotPos:p}=e,g=y(n)||{},h=v(o),{uiHint:m,actionText:b}=e.uiMetadata||{};let S=f(c.logoUrl);return!S&&c.logo&&c.logo.url&&(S=f(c.logo.url)),{id:r,cardId:l,position:u,rotPos:p,type:t,metadata:{abstractLength:s.length,title:a,titleLength:a.length,category:i||h[4],subCategory:"other",primaryImage:{height:g.height,width:g.width,url:g.url},locale:h[3],url:o,abstract:s,uiHint:m,actionText:b,feed:{id:d.id},kicker:[{feedName:d.feedName}]},cardContent:{id:r,type:t,title:a,abstract:s,category:{product:i,label:void 0},provider:{id:c.id,name:c.name,logo:{id:S},logoUrl:c.logoUrl||c.logo&&c.logo.url,subscribable:!1},images:[{id:f(g.url),height:g.height,width:g.width,caption:g.title,focalRegion:g.focalRegion,attribution:g.attribution,url:g.url,colorSamples:g.colorSamples}],kicker:a,destinationUrl:o}}}function d(e){const{id:t,cardId:i,type:n,images:r,url:o,category:s,locale:a,reactionStatus:c,commentStatus:d,reactionSummary:l,commentSummary:u,tag:p,abstract:g="",feed:h={},title:m="",provider:S={},actions:C=[],isBreaking:w=0,externalVideoFiles:T={},publishedDateTime:k,colorSamples:A,dataUrl:I,sourceId:P,financeMetadata:E,isLocalContent:O,position:M,rotPos:x,videoMetadata:D={}}=e,R=y(r)||{},L=v(o);return{id:t,cardId:i,position:M,rotPos:x,type:n,metadata:{abstract:g,abstractLength:g.length,titleLength:m.length,category:s||L[4],subCategory:L[5],publishedDateTime:k,externalVideoFiles:T,locale:a,feed:{id:h.id},kicker:[h],actions:C.map((e=>b[e]||e)),reactionStatus:c,commentStatus:d,reactionSummary:l,commentSummary:u,primaryImage:{height:R.height,width:R.width,url:R.url},url:o,title:m,provider:{name:S.name,logo:{url:S.logoUrl}},viewCount:D.viewCount},cardContent:{id:t,type:n,title:m,abstract:g,isBreaking:w,tags:[p||{}],provider:{id:S.id,name:S.name,logoUrl:S.logoUrl,image:{alt:S.name,src:S.logoUrl}},category:{product:s,label:void 0},locale:a,images:[{id:f(R.url),height:R.height,width:R.width,caption:R.title,focalRegion:R.focalRegion,attribution:R.attribution,url:R.url,colorSamples:R.colorSamples}],colorSamples:A,videoFiles:T,publishedDateTime:k,kicker:m,sourceHref:I,destinationUrl:o,sourceId:P,financeMetadata:E,isLocalContent:O}}}function l(e){const{subCards:t}=e||{},i=t&&t.map((e=>a(e)));return Object.assign(Object.assign({},e),{subItems:i,subCards:null})}function u(e,t){const{type:i,title:n,wpoMetadata:r,subType:o,rotPos:s,position:c,cardId:d}=e,l={cardId:d,metadata:{title:n},position:c,subItems:e.subCards.map((e=>a(e))),subType:o,type:i,rotPos:s,traceIdIndex:t};return r&&(l.wpoMetadata=r),l}function p(e){return e.feed&&"linkedinnews"===e.feed.canonicalName?e.type=n.PL.LinkedInCard:(e.feed&&(e.feed.canonicalName===n.PL.TopicFeedWeekends||e.feed.canonicalName===n.PL.TopicFeedMomentInTime1)||e.feed.canonicalName===n.PL.TopicFeedShopping||e.feed.canonicalName===n.PL.TopicFeedWeather)&&(e.type=n.PL.TopicFeedMomentInTime1),e}function g(e){return e}function h(e){switch(e){case"article":return"ArticlePreview";case"video":return"VideoPreview";case"slideshow":return"SlideshowPreview";case"webcontent":return"WebContentPreview";default:return""}}const m=new RegExp(/bing.(com|net)\/th/);function f(e){if(!e)return"";if(m.test(e))return;const t=e.split("/");return y(t)&&t[t.length-1].replace(".img","")}function v(e){return e?e.split("/"):[]}function y(e=[],t=0){return e[t]}const b={liked:"like",unliked:"unlike",saved:"save"}},51125:function(e,t,i){"use strict";i.d(t,{Dz:function(){return v},Ee:function(){return h},N:function(){return f},T1:function(){return p},i$:function(){return d},j9:function(){return g},s6:function(){return m}});var n=i(33940),r=i(42420),o=i(84169),s=i(94788),a=i(67462);const c=10/1440,d="cbypass";let l="",u=parseInt((0,a.ej)(d))||0;function p(){return(0,n.mG)(this,void 0,void 0,(function*(){u=Date.now(),(0,a.sq)(d,u.toString(),c,o.jG.HostPage.topDomain,"/"),yield r.U.purgeCacheAsync(r.R.river),(0,s.mS)({id:"updatemyfeed",payload:u})}))}function g(){return(0,n.mG)(this,void 0,void 0,(function*(){u=Date.now(),(0,a.sq)(d,u.toString(),c,o.jG.HostPage.topDomain,"/"),yield r.U.purgeCacheAsync(r.R.river)}))}function h(){return u}function m(e){u>0&&e.searchParams.set(d,u.toString())}function f(){return l}function v(e,t){if(!e)return;if(t)return void(l=e);l=l?`${l},${e}`:e}},82037:function(e,t,i){"use strict";i.d(t,{fK:function(){return p},rg:function(){return h},tW:function(){return g}});var n=i(33940),r=i(68364),o=i(26415),s=i(73252),a=i(32050);const c="//assets.msn",d="prg-1s-bkupdmnt",l="prg-1s-bkupdmnt1",u="prg-1s-bkupdmnt3";function p(){const e=s.Al.CurrentFlightSet;return!(!e||!(e.has(d)||e.has(l)||e.has("prg-1s-bkupdmnt2")||e.has(u)))}function g(){const e=s.Al.CurrentFlightSet;return!(!e||!e.has(d)&&!e.has(l))}function h(e,t={},i,d=!1){return(0,n.mG)(this,void 0,void 0,(function*(){let n;try{if(n=yield(0,a.Sm)(e,i,t),n&&n.ok)return n}catch(t){(0,r.OO)(t,o.mmU.OneServiceAkamaiRequestFailed,o.mmU.OneServiceAkamaiRequestFailed.message,`Failed URL: ${e}`)}return n&&n.headers&&n.headers.get("OneWebServiceLatency")||d?n:(e=s.Al.CurrentFlightSet&&s.Al.CurrentFlightSet.has(u)?e.replace(c,"//api.msn").replace("/service/","/"):e.replace(c,"//assets2.msn"),(0,a.Sm)(e,i,t))}))}},19809:function(e,t,i){"use strict";i.d(t,{$:function(){return n}});var n,r=i(33940),o=i(84169),s=i(392),a=i(73252),c=i(90846),d=i(2040),l=i(53578),u=i(65337),p=i(88352),g=i(47903),h=i(76323),m=i(4875),f=i(72447),v=i(51671),y=i(33379),b=i(2140),S=i(26415),C=i(65135),w=i(73932),T=i(75270),k=i(67462),A=i(79022),I=i(87711);function P(e){if("Peregrine"===e){const e=(0,o.Yq)();null===C.M0||void 0===C.M0||C.M0.sendAppErrorEvent(Object.assign(Object.assign({},S.EDA),{message:"Generated OneService params with generic ocid value 'Peregrine'.",pb:Object.assign(Object.assign({},S.EDA.pb),{appType:e.AppType,hostPage:e.HostPage,stackTrace:Error().stack})}),!1)}}!function(e){function t(e=null,t,i=!1,r=null,c=!1,d=(0,m.VQ)()){const l=(0,o.Yq)(),u=[{key:"apikey",value:l.OneServiceApiKey},{key:"activityId",value:l.ActivityId},{key:"ocid",value:i?n(l.TrackInfo,t):t},{key:l.OneServiceContentMarketQspKey,value:l.CurrentMarket},{key:"it",value:(0,s.E)()}];if(P(u.find((e=>"ocid"==e.key)).value),e&&u.push({key:"user",value:e}),d&&u.push({key:m.rZ,value:m.AN}),a.Al.IsBlendedEnterprise&&u.push({key:"audienceMode",value:"enterprise"}),l.ShouldUseFdheadQsp){let e=(0,a.nP)().CurrentFlights;if(r){e=e?`${e},${r}`:r;const t="prg-bngimg-t";-1===e.indexOf(t)&&(e+=","+t),!0===c&&(e=r)}u.push({key:"fdhead",value:e})}return u}function i(e=(0,m.VQ)(),t,i,n){var s,p,g,h;return(0,r.mG)(this,void 0,void 0,(function*(){const r={};let m;const v=(0,o.Yq)()||{};if("windowsShell"===v.AppType||"windowsShellV2"===v.AppType)v.IsWinAADUser&&(m=yield C(),Object.assign(r,(0,c.tx)(m)));else if("winWidgets"===v.AppType){if((0,y.N)()&&"function"==typeof window.createWindowsWidget1SAuthHeaders){const e=yield window.createWindowsWidget1SAuthHeaders();Object.assign(r,e)}}else{if("windows"===v.AppType||"homePage"===v.AppType){const e=w.U.getTraceInstance(),t=e.getTraceId(!0),i=e.getSpanId(!0);r[d.Yu.traceParent]="00-"+t+"-"+i+"-00"}if(v.WidgetAttributes&&(m=yield S()),!m)if(e&&!(yield v.isGccModUser)){const e={id:l.d3,friendlyName:l.Ak},t=yield null===(s=(0,T.Kf)())||void 0===s?void 0:s.getAuthData(e);m=null==t?void 0:t.authToken}else if("gaming"===i&&n&&(0,y.N)()){const e=(0,u.$o)().getObject("xboxXTokenId");e&&e.notAfter&&new Date(e.notAfter)>new Date&&(r[d.Yu.xboxToken]=JSON.stringify(e))}else if((null==t?void 0:t.skipDualAuthHeader)||!(0,c.G5)()||(0,c.TJ)()){if((0,c.iA)(null===(p=v.CurrentRequestTargetScope)||void 0===p?void 0:p.audienceMode)){const e=(0,k.ej)(d.OJ)||(0,k.ej)(d.d_);Object.assign(r,(0,c.o1)(e))}}else{const e=(0,c.hk)()?yield(0,f.IY)():(0,c.aS)();m=null==e?void 0:e.accessToken}Object.assign(r,(0,c.me)(m))}if(!(0,y.N)()){const{oneServiceHeaders:e,cookie:t,referer:i}=(0,b.s)();e&&Object.assign(r,e),t&&(r.Cookie=t),i&&(r.Referer=i);const n=null===(h=null===(g=(0,a.nP)().ClientSettings)||void 0===g?void 0:g.detection)||void 0===h?void 0:h.ip;n&&(r["X-FD-ClientIP"]=n,r["X-MSEdge-ClientIP"]=n)}return r}))}function n(e,t){return p.b.isNonNullObject(e)&&p.b.isNonNullObject(e.sitePage)&&(0,A.Z)(e.sitePage.page_product)&&(0,A.Z)(e.sitePage.page_type)?e.sitePage.page_product+"-"+e.sitePage.page_type+(t?"-"+t:""):t}e.serviceRequestOnComplete=function(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){try{const i=yield e();return t(),i}catch(e){throw t(),e}}))},e.getOneServiceParamsWithoutAuth=t,e.getOneServiceNonDynamicParamsWithoutAuth=function(e,t=!1){const i=(0,o.Yq)(),r=[{key:"apikey",value:i.OneServiceApiKey},{key:"ocid",value:t?n(i.TrackInfo,e):e},{key:i.OneServiceContentMarketQspKey,value:i.CurrentMarket}];return P(r.find((e=>"ocid"==e.key)).value),(0,m.VQ)()&&r.push({key:m.rZ,value:m.AN}),r},e.getOneServiceParamsWithAuth=function(e=null,i,n=!1,r=null,s=!1){const a=(0,o.Yq)(),c=[...t(e,i,n,r,s)],d=a.AuthCookieName;return d&&c.push({key:"scn",value:d.toUpperCase()}),c},e.getOneServiceHeaders=i,e.getOneServiceFeedCallHeaders=function(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){const r=yield i(e,null,t,n),s=(0,o.Yq)(),a=s.ActivityId;return s.SendFeedCallActivityIdInHeader&&a&&(r[d.Yu.activityId]=a),r}))},e.getLocationParams=function(e,t){const i=(0,o.Yq)(),n=e||i.Latitude,r=t||i.Longitude;return n&&r?{key:"location",value:`${n}|${r}`}:null},e.getOneServiceOCID=n,e.getBaseRequestData=function(t,i){return(0,r.mG)(this,void 0,void 0,(function*(){return{headers:yield e.getOneServiceHeaders((0,m.VQ)(),i),method:t}}))},e.getCommonParams=function(e,t=!1){return(0,a.nP)().UserIsSignedIn?this.getOneServiceParamsWithAuth((0,o.Yq)().UserId,e,t):this.getOneServiceParamsWithoutAuth((0,o.Yq)().UserId,e,t)},e.getCommonParams2=function(e,t=!1,i=!1){return(0,v.hC)()?this.getOneServiceParamsWithAuth((0,o.Yq)().UserId,e,t,i):this.getOneServiceParamsWithoutAuth((0,o.Yq)().UserId,e,t,i)},e.urlContainsOcidParam=function(e){if(!e)return!1;const t=e.split("?");if(t.length<2)return!1;const i=t[1].split("#")[0];return!!new g.h(i).get("ocid")},e.removeOcidFromUrl=function(e){if(!e)return e;const t=e.split("?");if(t.length<2)return e;const i=t[1].split("#")[0],n=new g.h(i);if(n.get("ocid")){n.delete("ocid");let t=e.replace(i,n.toString());return"?"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t}return e},e.removeOcidFromRiverCardProviderResponse=function(t){t&&t.cardMetadata&&t.cardMetadata.length&&t.cardMetadata.forEach((t=>{t.cardContent&&t.cardContent.destinationUrl?t.cardContent.destinationUrl=e.removeOcidFromUrl(t.cardContent.destinationUrl):t.subItems&&t.subItems.length&&t.subItems.forEach((t=>{t.cardContent&&t.cardContent.destinationUrl&&(t.cardContent.destinationUrl=e.removeOcidFromUrl(t.cardContent.destinationUrl))})),t.metadata&&t.metadata.relatedCards&&t.metadata.relatedCards.forEach((t=>{t.url=e.removeOcidFromUrl(t.url)}))}))},e.removeOcidFromWindowsOneServiceResponse=function(t){t&&t.cards&&t.cards.forEach((t=>{t.subCards.forEach((t=>{t.url?t.url=e.removeOcidFromUrl(t.url):t.subCards&&t.subCards.forEach((t=>{t.url&&(t.url=e.removeOcidFromUrl(t.url))}))}))}))};const S=(0,h.p)((()=>(0,r.mG)(this,void 0,void 0,(function*(){let e;const t=(0,y.N)()&&window.__pw_options,i=t&&t.auth&&t.auth.serviceToken;if("object"==typeof i&&i.then){const t=3e3;e=yield Promise.race([i,(0,I.Kb)(t).then((()=>null))])}return e&&e.tokenValue})))),C=(0,h.p)((()=>(0,r.mG)(this,void 0,void 0,(function*(){if(!((0,y.N)()&&window&&window.ShellFeedsApp&&window.ShellFeedsApp.getQueryHeadersAsync))return;const e=yield Promise.race([window.ShellFeedsApp.getQueryHeadersAsync(),(0,I.Kb)(3e3).then((()=>null))]);return e&&e[d.Yu.entAuthorization]||null}))));e._reset=function(){S.cache.clear(),C.cache.clear()}}(n||(n={}))},87298:function(e,t,i){"use strict";i.d(t,{O:function(){return b},w:function(){return S}});var n=i(33940),r=i(26415),o=i(9947),s=i(65135),a=i(33379);class c{constructor(e,t,i,n,r,s,d){if(!e)throw new Error("loggingService is required for ExponentialBackoffRetry.");const l=new o.K(e);this.logInvalidParams(l,t,i,n,r,d),this.loggingService=e,this.maxRetries=t||c.defaultMaxRetries,this.baseRetryDelayInMs=i||c.defaultBaseRetryDelayInMs,this.maxRetryDelayInMs=n||c.maxAllowedRetryDelayInMs,this.factor=r||c.defaultFactor,this.minOffsetInMs=s||c.defaultMinOffsetInMs,this.maxOffsetInMs=d||c.defaultMaxOffsetInMs,(0,a.N)()&&this.loggingService.infoCallback((()=>"ExponentialBackoffRetry has been configured."),null,{maxRetries:t,minTimeout:i,maxTimeout:n,factor:r})}executeRequest(e,t,i,r,o){return(0,n.mG)(this,void 0,void 0,(function*(){return new Promise(((s,a)=>(0,n.mG)(this,void 0,void 0,(function*(){yield this.tryRequest(e,s,a,0,t,i,r,o)}))))}))}logInvalidParams(e,t,i,n,r,o){t&&(t<1||t>c.maxAllowedRetries)&&e.fatal(`maxRetries should be at least 1 and less than ${c.maxAllowedRetries}.`),i&&i<c.defaultBaseRetryDelayInMs&&e.fatal("baseRetryDelay has to be a positive value greater than or equal to 100."),i&&o&&i<=o&&e.fatal("baseRetryDelay must not be smaller than the maximum delay offset."),n&&(n<=0||n>c.maxAllowedRetryDelayInMs)&&e.fatal(`maxRetryDelay has to be a positive value less than ${c.maxAllowedRetryDelayInMs}.`),r&&r<=0&&e.fatal("factor has to be a positive value.")}tryRequest(e,t,i,o,c,d,l,u){return(0,n.mG)(this,void 0,void 0,(function*(){const n=()=>(0,a.N)()&&o<this.maxRetries&&!u;try{const i=l||1e4,n=yield this.timeoutServiceRequest(i,e(o));t(n)}catch(a){if(n()){const n=3,u=parseFloat((Math.random()*(this.minOffsetInMs-this.maxOffsetInMs)+this.maxOffsetInMs).toFixed(n)),p=.5,g=Math.random()<p?-1:1,h=Math.min(this.baseRetryDelayInMs*Math.pow(this.factor,o),this.maxRetryDelayInMs)+u*g;if(this.loggingService.warnCallback((()=>`Retrying the request in ${h} milliseconds.`),d,{error:a,currentRetry:o+1,requestInfo:c}),s.M0&&s.M0.sendAppErrorEvent){const e=("string"==typeof a?a:a.message)||"";s.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.mmU.ServiceRequestRetryAttempted),{pb:Object.assign(Object.assign({},r.mmU.ServiceRequestRetryAttempted.pb),{retryAttemptsMade:o,serviceFailed:d&&d.Message,maxRetries:this.maxRetries,customMessage:`${this.getActivityName(d)}. Error details: '${e}'. Retrying the request in ${h} milliseconds`})}),!1)}setTimeout((()=>this.tryRequest(e,t,i,o+1,c,d,l)),h)}else this.loggingService.errorCallback((()=>n()?`ExponentialBackoffRetry has exceeded maximum retries ${this.maxRetries}`:"Request has failed."),d,{error:a,currentRetry:o,requestInfo:c}),i(a)}}))}timeoutServiceRequest(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return new Promise(((i,r)=>(0,n.mG)(this,void 0,void 0,(function*(){const n=setTimeout((()=>r(new Error(`Service Request Timed out after ${e} milliseconds!`))),e);try{const e=yield t;i(e),clearTimeout(n)}catch(e){r(e),clearTimeout(n)}}))))}))}getActivityName(e){return`Activity name: '${e&&e.Message||"None"}'`}}c.defaultBaseRetryDelayInMs=100,c.defaultFactor=2,c.defaultMaxOffsetInMs=25,c.defaultMaxRetries=5,c.defaultMinOffsetInMs=1,c.maxAllowedRetries=10,c.maxAllowedRetryDelayInMs=2e3;var d=i(32050),l=i(82037),u=i(13010),p=i(1970),g=i(42147),h=i(84147),m=i(19809),f=i(33954);let v,y;function b(e,t={},i,n=!1){return(0,l.fK)()?(0,l.rg)(e,t,i,n):(0,d.Sm)(e,i,t)}function S(e,t,i,r){return(0,n.mG)(this,void 0,void 0,(function*(){const n=C().activityLoggingService.createActivity(t);return r=r||(0,l.tW)(),yield m.$.serviceRequestOnComplete((()=>function(){if(y)return y;return y=new c(C().loggingService,3),y}().executeRequest(e,null,n,i,r)),(()=>C().activityLoggingService.endActivity(n)))}))}function C(){if(v)return v;const e=u.u.getInstance("ExperienceActivityLogger");return(0,a.N)()&&f.k.isDebug()&&e.addAppender(new p.N(h.i.Activity)),v=new g.N(f.k.getLoggingService(),e),v}},63535:function(e,t,i){"use strict";i.d(t,{PH:function(){return u},Ph:function(){return c},fU:function(){return p},qQ:function(){return d}});var n=i(84169),r=i(73252),o=i(33954);let s,a;const c=new URL("","https://api.msn.com/");function d(){const e=(0,n.Yq)();var t;return s||(t=e.ServiceUrlBase,s=new URL("",t),g(s)),s}function l(){const e=(0,n.Yq)();var t;return a||(t=e.FeedServiceUrlBase,a=new URL("",t),g(a)),a}function u(e,t=d()){return new URL(e+(null==t?void 0:t.search),t)}function p(e,t=l()){return new URL(e+(null==t?void 0:t.search),t)}function g(e){let t=!1;"dev"!==e.searchParams.get("env.service")&&(0,r.nP)().UserIsSignedIn&&(t=!0),o.k.log("u-si: "+(0,n.Yq)().UserId),o.k.log("a-si: "+t),o.k.log("ss-si: "+(0,r.nP)().UserIsSignedIn)}},57945:function(e,t,i){"use strict";i.d(t,{Y:function(){return r}});var n=i(38652);function r(e){const t=window&&window.chrome&&window.chrome.ntpSettingsPrivate;t&&t.logLoadingError&&(0,n.e)().then((()=>{t.logLoadingError(e)}))}},38652:function(e,t,i){"use strict";i.d(t,{e:function(){return n}});function n(){return"visible"===document.visibilityState?Promise.resolve():new Promise((e=>{document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&e()}))}))}},76868:function(e,t,i){"use strict";var n;i.d(t,{y:function(){return n}}),function(e){e[e.MuidChange=1]="MuidChange",e[e.MarketChange=2]="MarketChange",e[e.InterestsChange=3]="InterestsChange",e[e.PivotSwitch=4]="PivotSwitch",e[e.WeatherChange=5]="WeatherChange",e[e.MoneyChange=6]="MoneyChange",e[e.FeedLayoutSwitch=7]="FeedLayoutSwitch",e[e.FetchRiverDataFailure=8]="FetchRiverDataFailure",e[e.BackgroundImageChange=9]="BackgroundImageChange",e[e.PublisherMuted=10]="PublisherMuted",e[e.StalePrerenderPage=11]="StalePrerenderPage"}(n||(n={}))},73:function(e,t,i){"use strict";i.d(t,{C7:function(){return h},Qf:function(){return p},U4:function(){return m},VX:function(){return r},W1:function(){return o},WM:function(){return s},Y5:function(){return c},Z6:function(){return a},dd:function(){return l},eO:function(){return g},id:function(){return f},pM:function(){return u},pc:function(){return d},v3:function(){return n}});const n="epdu",r="ppreload",o="ppage",s="ppmuid",a="fpr",c="TTPR",d="TTF.SearchBox",l="TTVR",u="TTVR.SearchBox",p="TTVR.BackgroundExecution",g="backgroundpreload",h="prerender",m="TTPV",f="ltsActivePageTimeStamp"},75384:function(e,t,i){"use strict";i.d(t,{Qc:function(){return $},TR:function(){return V},wY:function(){return W},oc:function(){return _},Bj:function(){return z},VD:function(){return G},lr:function(){return U},Q9:function(){return H}});var n=i(33940),r=i(19388),o=i(26415),s=i(62676),a=i(33954),c=i(14675),d=i(73252),l=i(96361),u=i(65337),p=i(73),g=i(87538),h=i(76868),m=i(67462),f=i(65135);let v,y;function b(){const e=(0,u.$o)().removeObject(p.Z6);if(e){a.k.logObjects("pageRevealDelegate:isForceReloadRequested, time: "+new Date(e.time).toTimeString());const t=e.time;if(v=e.data,t>performance.timing.navigationStart)return!0}return function(){const e=(0,m.jG)()||"";if(y!==e)return v=h.y.MuidChange,(0,u.$o)().setItem(p.WM,`Previous MUID: ${e}, New MUID: ${y}`),!0;return!1}()}function S(e,t=!1){!function(e){v&&((0,u.$o)().setItem(p.VX,v+""),(0,u.$o)().setItem(p.W1,(e-performance.timing.navigationStart).toString()))}(e),(0,g.Z)({newUrl:C(t),invalidatePageCache:!1})}function C(e=!1){const t=location.href;return t?t.replace(/prerender(=\d)?/,"invalidaterender=1")+(e?"&stale=1":""):""}var w=i(49786),T=i(32717),k=i(59294),A=i(33379),I=i(38349),P=i(4734);let E,O,M,x,D,R=!1;const L=new k.o,F=new k.o,N=new k.o,B=new k.o,j=new k.o;function $(e,t,i,c,g){return d.Al.IsPrerender?"visible"===document.visibilityState?(g&&N.set(),void L.set()):(g&&(f.M0.addOrUpdateTmplProperty("feedPrerender","0"),(0,w.Yc)(g)),M=e,x=t,(0,T.Hv)(),y=(0,m.jG)()||"",Z()||g?(0,r.su)("PrerenderStart",performance.now()):function(){E=document.createElement("div");const e=document.body,t=E.style;t.background="transparent",t.position="fixed",t.bottom=t.left=t.right=t.top="0",t.zIndex="2147483647",e?(e.appendChild(E),a.k.logObjects("pageRevealDelegate:addOverlay: Added overlay")):a.k.logObjects("pageRevealDelegate:addOverlay: Document body is not available, failed to add overlay.");(0,r.su)("PrerenderStart",performance.now())}(),D=()=>function(e){return(0,n.mG)(this,void 0,void 0,(function*(){document.removeEventListener("visibilitychange",D);const t=function(){if(!d.Al||!d.Al.CurrentFlightSet)return-1;if(d.Al.CurrentFlightSet.has("prg-refpreren1"))return 43200;if(d.Al.CurrentFlightSet.has("prg-refpreren2"))return 21600;if(d.Al.CurrentFlightSet.has("prg-refpreren3"))return 10800;return-1}();if(t>0){((0,I.Hk)()-performance.timing.navigationStart)/1e3>t&&(0,I.yV)(h.y.StalePrerenderPage)}if(b())return t>0&&(document.body.style.display="none"),void S((0,I.Hk)());performance.mark(s.DB);const i=performance.now();window._pageTimings[s.DB]=Math.round(i),e&&(N.set(),yield G(),yield function(){if(!d.Al.IsPrerender)return Promise.resolve();return B.getResultAsync()}(),performance.mark(l.Jl)),yield(0,P.F_)(),R=!0;const n=Z()||e;n||(O=setTimeout((()=>{q()}),1e3)),function(e){f.M0.addOrUpdateTmplProperty("isbackgroundpreload","1"),f.M0.addOrUpdateTmplProperty("isprerender","1"),f.M0.addOrUpdateCustomProperty(p.W1,(e-performance.timing.navigationStart).toString()),(0,r.su)("PrerenderRevealed",e);const t=(0,r.O0)("PrerenderStart");(0,r.su)("PrerenderAge",e-t)}((0,I.Hk)()),yield(0,w.XX)(i,M,x),E&&!n&&(q(),yield F.getResultAsync()),n&&(0,r.EV)(l.cA),(0,l.fm)(M,e),performance.mark(s.O6),performance.measure("StaleRevalidation",s.DB,s.O6),(0,l.G)(),L.set(),(0,T.mB)(),(0,w.Gy)()}))}(g),document.addEventListener("visibilitychange",D),void function(e,t){e&&window.setTimeout((()=>{"visible"!==document.visibilityState&&f.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.GI7),{pb:Object.assign(Object.assign({},o.GI7.pb),{customMessage:"Prerender content staled"})}))}),6e4*e);t&&window.setTimeout((()=>{"visible"!==document.visibilityState&&f.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.DxP),{pb:Object.assign(Object.assign({},o.DxP.pb),{customMessage:"Prerender sd staled"})}))}),6e4*t)}(i,c)):((0,A.N)()&&window._pageTimings&&(window._pageTimings[p.C7]=0),void function(){const e=(0,u.$o)().removeItem(p.VX),t=(0,u.$o)().removeItem(p.W1),i=(0,u.$o)().removeItem(p.WM);e&&f.M0.addOrUpdateCustomProperty(p.VX,e),t&&f.M0.addOrUpdateCustomProperty(p.W1,t),i&&f.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.smA),{pb:Object.assign(Object.assign({},o.smA.pb),{customMessage:i})}),!1)}())}function U(){return d.Al.IsPrerender?L.getResultAsync():Promise.resolve()}function H(){return d.Al.IsPrerender?N.getResultAsync():Promise.resolve()}function _(){N.set()}function W(){B.set()}function z(){j.set()}function G(){return d.Al.IsPrerender?j.getResultAsync():Promise.resolve()}function V(){return d.Al.IsPrerender&&!R}function q(){try{O&&clearTimeout(O),document.body.removeChild(E),a.k.logObjects("pageRevealDelegate:removeOverlay: Removed overlay"),(0,c.c)((()=>{(0,r.EV)(l.cA),F.set()}))}catch(e){}E=null}function Z(){var e;return!!(null===(e=d.Al.CurrentFlightSet)||void 0===e?void 0:e.has("prg-no-overlay"))}},38349:function(e,t,i){"use strict";i.d(t,{Ge:function(){return s},HQ:function(){return a},Hk:function(){return l},ih:function(){return c},yV:function(){return d}});var n=i(73),r=i(65337);const o=new Set;function s(e){const t=(0,r.$o)().getObject(n.v3)||{},i=t[e];return!isNaN(i)&&(o.has(e)||o.add(e),delete t[e],(0,r.$o)().setObject(n.v3,t),i>performance.timing.navigationStart)}function a(e){return o&&o.has(e)}function c(e){const t=(0,r.$o)().getObject(n.v3)||{},i=t[e];isNaN(i)&&(t[e]=l(),(0,r.$o)().setObject(n.v3,t))}function d(e){const t={time:l(),data:e};(0,r.$o)().setObject(n.Z6,t)}function l(){return Math.round(performance.timing.navigationStart+performance.now())}},96361:function(e,t,i){"use strict";i.d(t,{G:function(){return v},Jl:function(){return g},cA:function(){return p},ew:function(){return y},fm:function(){return f},my:function(){return S},tV:function(){return b}});var n=i(83227),r=i(82890),o=i(15213),s=i(19388),a=i(62676),c=i(26415),d=i(73),l=i(65135);const u="TTVR.",p="OverlayRemoval",g="disableFeedPrerenderInitComplete";let h=0,m=0;function f(e,t){t&&function(){const e=["TTVR",r.p.wpoCallStart,r.p.wpoResponseBack,r.p.firstSectionRenderStart,u+r.p.feed,u+r.p.basicFeed,u+r.p.viewCards,"TTVR.GridViewFeed",u+r.p.sdCards,"TTVR.MoneyInfoCardWC","TTVR.WeatherCardWC","TTVR.WithRefreshDelay","TTVR.ShoppingCardWC","TTVR.TrendingNowWC","TTVR.SportsCardWC","WeatherCardWC.Ready","WeatherCardWC.Start","WeatherGreeting.Render","WelcomeGreeting.Start",a.zJ,o.q.RequestInitiated,o.q.AdProcessed,o.q.AdRendered,o.q.RenderReady,o.q.TimeToConsumeAds,o.q.RenderReady,o.q.TimeToAdResponse,o.q.TimeToServeAd],t=window._pageTimings;if(!t)return;const i=m-h;e.forEach((e=>{Object.prototype.hasOwnProperty.call(t,e)&&(t[e]-=i)}));for(const e in t)0==e.indexOf("TTVR.ShoppingCardWC-")&&(t[e]-=i)}();const i=window._pageTimings;if(!i)return;const f=(0,s.TZ)(g),v=(0,s.Sc)(p);i[d.C7]=1,i[d.eO]=1;let y=v,b=-1;e.forEach((e=>{const r=i[u+e];let o=(0,s.Sc)(e);if(o=Math.max(o,v),i["TTVR.BackgroundExecution."+e]=r,i[u+e]=o||-1,e===n.x.commonSearchBoxEdgeNext)if(t&&f>-1){const e=performance.measure("disableFeedPrerenderInitTime",a.DB,g);b=o-Math.round((null==e?void 0:e.duration)||0)}else b=o;o>y&&(y=o)}));const S=i[d.dd];let C=!1;if(isNaN(S)||null===S){let t=i.IncompleteMarkers;if(!t){const e=(0,s.bO)(s.oN.Primary);t=null==e?void 0:e.join(",")}const n=(0,s.Gb)(),r=n.marker||"None",o=n.value||"None";l.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.lFV),{message:"TTVR missing during prerender.",pb:Object.assign(Object.assign({},c.lFV.pb),{customMessage:`Incomplete markers: ${t}. visuallyReadyDependencies: ${e.join("|")}. Last Marked: ${r} ${o}`})})),C=!0}if((isNaN(y)||null===y)&&(l.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.HYO),{message:"TTPR missing during prerender."})),C=!0),C)return;const w=Math.min(y,S);i[d.Y5]=i[d.dd]=w,i[d.Qf]=S;const T=i[d.pM],k=i[d.pc],A=i[`${d.Y5}.${r.p.searchBox}`]=Math.min(b,T);isNaN(T)||null===T?l.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.Cab),{message:"TTVR.SearchBox missing during prerender."})):i[d.pM]=Math.min(A,T),isNaN(k)||null===k?l.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.bor),{message:"TTF.SearchBox missing during prerender."})):i[d.pc]=Math.min(A,k)}function v(){const e=window._pageTimings;e&&(e[d.U4]=Math.round(performance.now()))}function y(){h=Math.round(performance.now())}function b(){m=Math.round(performance.now())}function S(){return m-h}},49786:function(e,t,i){"use strict";i.d(t,{Gy:function(){return v},MV:function(){return S},XX:function(){return f},Yc:function(){return C}});var n=i(33940),r=i(19388),o=i(68364),s=i(26415),a=i(59294),c=i(4734),d=i(38349),l=i(14675);let u,p=[],g=[],h=new Set,m=new a.o;function f(e,t,i){const n=(0,c.S0)().getCurrentState().aboveTheFoldVisuallyReady.endTime,o=new Set;for(const e of p){const{experienceType:i}=e;t.includes(i)&&h.add(i)}0==h.size&&m.set();for(const t of p){const{experienceType:s}=t;if(u&&"GridViewFeed"===s){(0,r.EV)(s),b(s),o.add(s);continue}const a=(0,d.Ge)(s),c=0===t.thresholdMinutes||null!=t.thresholdMinutes&&e-n>6e4*t.thresholdMinutes;i||a||c?(y(t),g.push(t.delayCallback)):((0,r.EV)(s),b(s)),o.add(s)}for(const e of t)o.has(e)||(0,r.EV)(e);return m.getResultAsync()}function v(){for(const e of g)e()}function y(e){return(0,n.mG)(this,void 0,void 0,(function*(){try{yield e.criticalCallback(),(0,l.c)((()=>{(0,r.EV)(e.experienceType),b(e.experienceType)}))}catch(t){(0,o.OO)(t,s.NKp,"Exception when running stale revalidate callback","Experience: "+e.experienceType)}}))}function b(e){h.delete(e)&&0==h.size&&m.set()}function S(e){p.push(e)}function C(e){u=e}},95838:function(e,t,i){"use strict";i.d(t,{EW:function(){return w},VK:function(){return y},aP:function(){return f},ck:function(){return C},dG:function(){return v},rd:function(){return b}});var n=i(73252),r=i(65337),o=i(33379),s=i(73),a=i(75384),c=i(32717);let d,l=!1;const u=2e4,p=()=>!l||!(null===n.Al||void 0===n.Al?void 0:n.Al.IsPrerender),g=()=>!l||(null===n.Al||void 0===n.Al?void 0:n.Al.IsPrerender);let h;const m=e=>{if(!p()&&e.key===s.id){const t=e.newValue;h&&clearTimeout(h),null===t?(S(),d&&d()):h=setTimeout((()=>{S(),d&&d()}),2e4)}};function f(e){p()||(d=e)}function v(e){l=e}function y(){return!(!l||!(0,a.TR)()||function(){const e=function(){if(!l)return;return(0,r.$o)().getItem(s.id)}();if(!e)return!0;const t=new Date(e).getTime();if(Date.now()-t>=u)return!0;return!1}())}function b(){p()||(0,o.N)()&&(window.addEventListener("storage",m),(0,c.eC)().then(S))}function S(){(0,o.N)()&&window.removeEventListener("storage",m)}function C(){g()||(0,r.$o)().removeItem(s.id)}function w(){if(!g())return(0,r.$o)().setItem(s.id,(new Date).toISOString())}},32717:function(e,t,i){"use strict";i.d(t,{Hv:function(){return a},eC:function(){return d},hR:function(){return p},mB:function(){return c}});var n=i(59294);let r,o,s=!1;function a(){s=!0}function c(){s=!1,u()}function d(e){return"visible"!==document.visibilityState||e&&s?(r||(r=new n.o,document.addEventListener("visibilitychange",l)),r.getResultAsync()):Promise.resolve()}function l(){"visible"===document.visibilityState&&u()}function u(){!s&&r&&(r.set(),r=null)}function p(){return o||(o=new Promise((e=>{"visible"===document.visibilityState&&e(),document.addEventListener("visibilitychange",(function t(){"visible"===document.visibilityState&&(e(),document.removeEventListener("visibilitychange",t))}))}))),o}},37209:function(e,t,i){"use strict";i.d(t,{o:function(){return y}});var n=i(33940),r=i(14752),o=i(22704),s=i(26415),a=i(76950),c=i(10209),d=i(82890),l=i(65135),u=i(38156),p=i(60483),g=i(59997),h=i(73252),m=i(78125),f=i(92402);function v(e){return e?"#242424":"#F7F7F7"}function y(e,t,i){var y;return(0,n.mG)(this,void 0,void 0,(function*(){let n;r.A.startMark("WC.Render"),n=void 0===i||"boolean"==typeof i?{noPaint:!!i}:i;const b=e.configRef,S=(0,a.ITY)(b.experienceType),C=matchMedia("(prefers-color-scheme:dark)");window.isSSREnabled&&!window.isSSRCompleted&&(null===l.M0||void 0===l.M0||l.M0.addOrUpdateTmplProperty("SSRIncomplete","1"),(0,o.Ou)()[d.p.isSSRAborted]="1",null===(y=document.querySelector(t))||void 0===y||y.remove(),null===l.M0||void 0===l.M0||l.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.txQ.SsrIncompleteError),{message:"SSR didn't complete successfully, remove the existing design system provider element to avoid broken UI",pb:Object.assign({},s.txQ.SsrIncompleteError.pb)})));const w=document.querySelector(t)||document.createElement(t);w.baseLayerLuminance=C.matches?m.h.DarkMode:m.h.LightMode,w.direction="rtl"===h.Al.MarketDir?g.N.rtl:g.N.ltr,w.setAttribute("fill-color",v(C.matches));for(const e in n)Reflect.set(w,e,Reflect.get(n,e));(0,f.zb)(w),w.removeAttribute(f.B7),C.addEventListener("change",(e=>{w.baseLayerLuminance=e.matches?m.h.DarkMode:m.h.LightMode,w.setAttribute("fill-color",v(e.matches))})),w.isConnected||document.body.appendChild(w);const T=new p.D({type:u.c9.Module,name:b.experienceType,content:{}});let k=w.querySelector(S);k||(k=document.createElement(S)),k.parentTelemetry=T,k.setAttribute("config-instance-src",null==b?void 0:b.instanceSrc),k.setAttribute("instance-id",b.experienceType),k.setAttribute("data-t",T.getMetadataTag()),yield(0,c.Fg)(e),k.isConnected||w.appendChild(k),r.A.endMark("WC.Render")}))}},22897:function(e,t,i){"use strict";var n=i(38949);function r(e,t){const i=new URLSearchParams(e.location.search);if(i){const e=new URLSearchParams(t.search);if(null==i?void 0:i.keys())for(const t of i.keys())if(i.getAll(t)&&!e.getAll(t).length){i.getAll(t).forEach((i=>e.append(t,i)))}let n="";e.forEach(((e,t)=>n=n.concat(`&${t}=${e}`))),t.search=n.slice(1)}return t}function o(e,t,i){return"string"==typeof e?{pathname:e,state:t,search:i}:e}const s=(0,i(33379).N)()?function(e){const t=e(),i=t.push,n=t.replace;return t.push=(e,n,s)=>i.apply(t,[r(t,o(e,n,s))]),t.replace=(e,i,s)=>n.apply(t,[r(t,o(e,i,s))]),t}(n.lX):null;t.ZP=s},67893:function(e,t,i){"use strict";i.d(t,{lY:function(){return v}});var n,r=i(33940),o=i(31293),s=i(84169),a=i(30528);!function(e){e.NavigationData="NavigationDataAdapter",e.TopicsData="TopicsDataAdapter"}(n||(n={}));var c=i(88257),d=i(53076),l=i(93450),u=i(4734);class p{constructor(e,t){this.onUpdateFollowedTopics=()=>{if(!this.connector)return this.onRouteUpdateCallback([]);const e=this.connector.getCurrentState(),t=e.followedTopicIds,i=e.topicMap,r=[];t&&i&&t.forEach((e=>{const t=i[e],o={path:(0,a.qC)(t.name||t.canonicalName,e),display:t.name,experienceInfo:this.dynamicRouteExperienceInfo,context:{feedId:e},pivotId:e,dynamicPivotSource:n.TopicsData};r.push(o)})),this.onRouteUpdateCallback(r)},this.onRouteUpdateCallback=e,this.dynamicRouteExperienceInfo=t}getDynamicPivotsFromDataConnector(e){return(0,r.mG)(this,void 0,void 0,(function*(){switch(e){case d.z.TopicData:yield this.getPivotsFromTopicData();break;case d.z.NavigationData:yield this.getPivotsFromNavigationData();break;default:return}}))}getPivotsFromTopicData(){return(0,r.mG)(this,void 0,void 0,(function*(){yield(0,u.F_)(),l._.getInstance().rootReducer.getDataConnector(d.z.TopicData).then((e=>{this.connector=e,this.connector.getFollowedTopics(!1).then((()=>{this.onUpdateFollowedTopics()}))})),c.G.followedTopics.registerObserver(this.onUpdateFollowedTopics),c.G.updateTopicFollowedState.registerObserver(this.onUpdateFollowedTopics)}))}getPivotsFromNavigationData(){return(0,r.mG)(this,void 0,void 0,(function*(){if(this.connector=yield l._.getInstance().rootReducer.getDataConnector(d.z.NavigationData),this.connector){const e=yield this.connector.getNavigationItems(s.jG.HostPage.verticalKey,s.jG.HostPage.categoryKey);this.onRouteUpdateCallback(this.mapNavigationItemsToDynamicRoutes(e))}else this.onRouteUpdateCallback([])}))}mapNavigationItemsToDynamicRoutes(e){return e.map((e=>({path:e.targetUrl,externalUrl:e.targetUrl,display:e.displayText,pivotId:e.categoryKey,dynamicPivotSource:n.NavigationData})))}}var g,h=i(22897);class m{constructor(e){if(this.staticRoutes=[],this.dynamicRoutes=[],this.onUpdateRoutesCallbacks=[],this.switchListeners=[],this.useCustomRoutingEvent=!1,this.callSwitchListeners=e=>{if(!this.switchListeners.length)return;const t=this.getPivotSelectionInfoFromPath(e.state&&e.state.previousPath),i=this.getPivotSelectionInfoFromPath(e.pathname,e),n={newSelection:i,oldSelection:t};this.config.enableRememberedPivots&&(0,o.cf)(i&&i.pivotId),this.switchListeners.sort(((e,t)=>e.order-t.order));for(const e of this.switchListeners)e.callback(n)},e&&(this.useCustomRoutingEvent=e.useCustomRoutingEvent,(0,a.Vk)(e.enableLocaleFeedPrefix),(0,a.I8)(e.includeFeedPrefixForAppType),this.setRoutes(e)),h.ZP.listen(this.callSwitchListeners),"windows"===s.jG.AppType||this.useCustomRoutingEvent){const e=window.history.pushState;window.history.pushState=(t,i,n)=>{e.apply(window.history,[t,i,n]);const r=new CustomEvent("pushstate",{detail:{state:t,title:i,url:n}});window.dispatchEvent(r)},window.addEventListener("pushstate",(e=>{e.detail&&e.detail.state&&e.detail.state.shouldPush&&h.ZP.replace(window.location.pathname,{context:e.detail.state},window.location.search)}))}}setRoutes(e){this.config=e,this.setStaticRoutes(),this.config.disableLoadingDynamicRoutes||this.setDynamicRoutes()}pushHistory(e,t,i,n){const r=h.ZP.location.pathname;h.ZP.push((0,a.qC)(e,t,!0,i&&i.excludeFeedPrefix),{previousPath:r,context:i},n)}getStaticRoutes(){return this.staticRoutes}getDynamicRoutes(){return this.dynamicRoutes}getDynamicRoute(){const e=h.ZP.location.pathname.split("/"),t=e.findIndex((e=>"interest"===e.toLowerCase())),i=t>-1&&t<e.length-1?e[t+1]:"";return{path:(0,a.qC)("interest"),experienceInfo:this.config.dynamicRouteExperienceInfo,pivotId:"oneriver.xfeed",display:decodeURIComponent(i)}}isDynamicRoute(e){let t="";return a.T6&&(t="windows"===s.jG.AppType||a.uO?`/${s.jG.CurrentMarket}/feed`:`/${s.jG.CurrentMarket}`),t+="/interest",0===e.indexOf(t)}getCurrentRoute(){const e=h.ZP.location.pathname,t=this.staticRoutes.find((t=>t.path===e));return t||(/\/interest\/.+\//.test(e)?this.getDynamicRoute():null)}addDynamicRouteListener(e){this.onUpdateRoutesCallbacks.push(e)}addSwitchListener(e,t=g.AfterLoadContent){this.switchListeners.push({callback:e,order:t})}getRememberedPivot(){if(!this.config.enableRememberedPivots)return;const e=(0,o.$z)();e&&this.config.staticRoutes.forEach((t=>{t.pivotId===e&&this.pushHistory(t.canonicalName)}))}getPivotSelectionInfoFromPath(e,t){if(!e)return null;const i=this.config.staticRoutes.find((t=>(0,a.qC)(t.canonicalName,void 0,!0,t.context&&t.context.excludeFeedPrefix)===e));if(i)return{pivotId:i.pivotId,telemetryPageName:i.telemetryPageName,telemetryPivotCategory:i.telemetryPivotCategory,display:i.display||i.canonicalName,categoryKey:i.categoryKey,subCategoryKey:i.subCategoryKey,pageTitle:i.pageTitle};if(!this.isDynamicRoute(e))return null;const n=e.split("/");let r=0;a.T6&&(r="windows"===s.jG.AppType||a.uO?2:1);const o=t&&t.state&&t.state.context;return{telemetryPageName:"xfeed",telemetryPivotCategory:"news",pivotId:o&&t.state.context.feedId||n.length>=4+r&&n[3+r],display:o&&(t.state.context.display||t.state.context.query)||n.length>=3+r&&decodeURIComponent(n[2+r])}}setStaticRoutes(){const{staticRoutes:e}=this.config;e.forEach((e=>{let t;t=e.canonicalName?(0,a.qC)(e.canonicalName,void 0,!0,e.context&&e.context.excludeFeedPrefix):(0,a.Or)(e.externalUrl);const i={path:t,externalUrl:e.externalUrl,experienceInfo:e.experienceInfo,queryParamOverrides:e.queryParamOverrides,display:e.display||e.canonicalName,pivotId:e.pivotId,context:e.context,categoryKey:e.categoryKey,subCategoryKey:e.subCategoryKey,pageTitle:e.pageTitle};this.staticRoutes.push(i)}))}setDynamicRoutes(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=new p(this.onUpdateDynamicRoute.bind(this),this.config.dynamicRouteExperienceInfo);yield e.getDynamicPivotsFromDataConnector(this.config.dynamicRouteDataConnector)}))}onUpdateDynamicRoute(e){this.dynamicRoutes=e;for(const e of this.onUpdateRoutesCallbacks)e(this.dynamicRoutes)}}let f;!function(e){e[e.Telemetry=0]="Telemetry",e[e.Monetization=1]="Monetization",e[e.LoadContent=2]="LoadContent",e[e.AfterLoadContent=3]="AfterLoadContent"}(g||(g={}));const v=e=>f?(e&&f.setRoutes(e),f):(f=new m(e),f)},30528:function(e,t,i){"use strict";i.d(t,{He:function(){return d},I8:function(){return a},Or:function(){return l},T6:function(){return r},Vk:function(){return o},n8:function(){return u},qC:function(){return c},uO:function(){return s}});var n=i(84169);let r=!1;function o(e){r=e}let s=!1;function a(e){s=e}function c(e,t,i=!0,o=!1){if(r&&i){let i=`/${n.jG.CurrentMarket}`;if("windows"!==n.jG.AppType&&!s||o||(i+="/feed"),!e)return i;if(t)return i+`/interest/${encodeURIComponent(e)}/${encodeURIComponent(t)}`;const r="/"===e[0]?e.slice(1):e;return i+(p[r]?`${p[r]}`:`/${r}`)}{if(!e)return"";if(t)return`/interest/${encodeURIComponent(e)}/${encodeURIComponent(t)}`;const i="/"===e[0]?e.slice(1):e;return p[i]||`/${i}`}}function d(e){return!!(e&&e.oldSelection&&e.newSelection)&&(!(!e.oldSelection||!e.oldSelection.pivotId)&&!(!e.newSelection||!e.newSelection.pivotId))}function l(e){try{return new URL(e).pathname}catch(e){return null}}var u;!function(e){e.MyFeed="myFeed",e.Personalize="personalize",e.Saves="saves"}(u||(u={}));const p={myFeed:"/",personalize:"/personalize",interest:"/interest/*/:id",saves:"/personalize/saves"}},62661:function(e,t,i){"use strict";i.d(t,{l:function(){return d}});var n=i(37574);class r{constructor(){this.callbacks=[],this.clickCallbacks=[]}getSelectedPivot(){return this.selectedPivot}setSelectedPivot(e){e&&e.pivotId&&(this.selectedPivot=Object.assign({},e))}switchPivot(e){const t=this.selectedPivot;this.selectedPivot=Object.assign({},e);const i={newSelection:this.selectedPivot,oldSelection:t,navIsSticky:this.selectedPivot.navIsSticky};this.callbacks.sort(((e,t)=>e.switchCallbackOrder-t.switchCallbackOrder));for(const e of this.callbacks)e.callback(i)}clickPivot(e=!0,t){for(const i of this.clickCallbacks)i(e,t)}addSwitchListener(e,t=n.I.AfterLoadContent){this.callbacks.find((i=>i.callback===e&&i.switchCallbackOrder===t))||this.callbacks.push({callback:e,switchCallbackOrder:t})}removeSwitchListener(e){this.callbacks=this.callbacks.filter((t=>t.callback!==e))}addClickListener(e){this.clickCallbacks.push(e)}removeClickListener(e){this.clickCallbacks=this.clickCallbacks.filter((t=>t!==e))}reportLoadComplete(){this.loadComplete=!0,this.loadCompleteResolveCallback&&this.loadCompleteResolveCallback()}waitForLoadComplete(){return this.loadCompletePromise?this.loadCompletePromise:this.loadComplete?Promise.resolve():(this.loadCompletePromise=new Promise((e=>{this.loadCompleteResolveCallback=e})),this.loadCompletePromise)}}var o=i(70493),s=i(27003);const a="__PivotManager_default__",c="__PivotManager_namedSwitchers__";function d(e){if(e){const t=s.Gq.get(c,(()=>new Map));let i=t.get(e);return i||(i=new r,t.set(e,i)),i}return s.Gq.get(a,(()=>new r))}(0,o.U)((()=>{s.Gq.delete(a),s.Gq.delete(c)}))},37574:function(e,t,i){"use strict";var n;i.d(t,{I:function(){return n}}),function(e){e[e.Telemetry=0]="Telemetry",e[e.Monetization=1]="Monetization",e[e.LoadContent=2]="LoadContent",e[e.AfterLoadContent=3]="AfterLoadContent"}(n||(n={}))},28781:function(e,t,i){"use strict";i.d(t,{X:function(){return r}});var n=i(55067);class r{}r.pageVisibilityChange=new n.C("PageVisibilityChange"),r.timeForPageReveal=new n.C("TimeForPageReveal"),r.forcePageReload=new n.C("ForcePageReload"),r.updateCurrentPageRefreshState=new n.C("UpdateCurrentPageRefreshState"),r.updateDidRenderStartInBackgroundRenderFlag=new n.C("UpdateDidRenderStartInBackgroundRenderFlag")},56698:function(e,t,i){"use strict";i.d(t,{Eu:function(){return p},bY:function(){return u},fv:function(){return g}});var n=i(53076),r=i(6719),o=i(93450),s=i(28781),a=i(94546),c=i(26415),d=i(65135),l=i(73252);function u(e){const t=o._.getInstance().rootReducer.connector(n.z.Preload);t&&s.X.forcePageReload.getActionSender(t).send(e||a.T.SettingsChange)}function p(e){const t=o._.getInstance().rootReducer.connector(n.z.Preload);t&&s.X.timeForPageReveal.getActionSender(t).send(e)}function g(e){if(!l.Al.IsPreload)return;if("windowsShell"===l.Al.ClientSettings.apptype)return e.Win10PerfDCREnabled=1,e[r.Qf]=e[r.dd],e[r.dd]=5,void(e[r.C7]=1);const t=function(){const e=o._.getInstance().rootReducer.connector(n.z.Preload);if(!e)return!1;return e.getCurrentState().didRenderStartInBackground}();t&&("edgeChromium"===l.Al.ClientSettings.apptype?(e[r.C7]=1,e[r.eO]=1):e[r.eO]=1);const i=e[r.Lh],s=e[r.dd],a=e[r.pM],u=e[r.pc];let p=!1;if((isNaN(s)||null===s)&&(d.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.OHc.TtvrMissing),{message:"TTVR missing during preload."})),p=!0),(isNaN(i)||null===i)&&(d.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.OHc.TfprMissing),{message:"TFPR missing during preload."})),p=!0),p)return;const g=e[r.Lh]=e[r.dd]=Math.min(i,s);t&&(e[r.Qf]=s),isNaN(a)||null===a?d.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.OHc.TtvrSearchBoxMissing),{message:"TTVR.SearchBox missing during preload."})):e[r.pM]=Math.min(g,a),isNaN(u)||null===u?d.M0.sendAppErrorEvent(Object.assign(Object.assign({},c.OHc.TtfSearchBoxMissing),{message:"TTF.SearchBox missing during preload."})):e[r.pc]=Math.min(g,u)}},6719:function(e,t,i){"use strict";i.d(t,{C7:function(){return l},H$:function(){return n},Lh:function(){return a},Qf:function(){return c},dd:function(){return o},eO:function(){return d},jh:function(){return u},pM:function(){return s},pc:function(){return r}});const n="TTPR2",r="TTF.SearchBox",o="TTVR",s="TTVR.SearchBox",a="TFPR",c="TTVR.BackgroundExecution",d="backgroundpreload",l="prerender",u="TTAF"},94546:function(e,t,i){"use strict";var n;i.d(t,{T:function(){return n}}),function(e){e[e.StalePage=1]="StalePage",e[e.SettingsChange=2]="SettingsChange",e[e.MuidChange=3]="MuidChange",e[e.GizmoSettingChange=4]="GizmoSettingChange",e[e.TopSites=5]="TopSites",e[e.PivotSwitch=6]="PivotSwitch",e[e.SignInStateChange=7]="SignInStateChange",e[e.MutePublisher=8]="MutePublisher",e[e.UnMutePublisher=9]="UnMutePublisher",e[e.Dislike=10]="Dislike",e[e.Like=11]="Like",e[e.Save=12]="Save",e[e.Hide=13]="Hide",e[e.KidsMode=14]="KidsMode",e[e.MarketChange=15]="MarketChange",e[e.InterestsSdCardSettingChange=16]="InterestsSdCardSettingChange",e[e.InterestsChange=17]="InterestsChange",e[e.WeatherChange=18]="WeatherChange",e[e.MoneyCardChange=19]="MoneyCardChange",e[e.Disabled=20]="Disabled"}(n||(n={}))},70785:function(e,t,i){"use strict";i.d(t,{o:function(){return c}});var n=i(53076),r=i(93450),o=i(28781),s=i(73252);const a={didPreload:!1,timeTakenForRevealInMs:0,pageRevealed:!0};function c(){const e=r._.getInstance().rootReducer.connector(n.z.Preload);if(!e||!s.Al.IsPreload)return Promise.resolve(a);const t=e.getCurrentState();if(t&&t.pageRevealedData){const e=t.pageRevealedData;return Promise.resolve(e)}return new Promise((e=>{o.X.pageVisibilityChange.registerObserver((t=>{const i=t.params[0];e(i)}))}))}},63158:function(e,t,i){"use strict";i.d(t,{cB:function(){return s}});var n=i(65337);"undefined"!=typeof window&&window.location.href;const r="timestamp_",o="lastKnown_";function s(){(0,n.$o)().supported&&((0,n.$o)().removeSubstringKeys(o),(0,n.$o)().removeSubstringKeys(r),(0,n.$o)().removeSubstringKeys("force_timestamp_"),(0,n.$o)().removeSubstringKeys("keys_"),(0,n.$o)().removeSubstringKeys("_jssMap"))}},44772:function(e,t,i){"use strict";i.d(t,{PL:function(){return n},TU:function(){return s},ne:function(){return o}});var n,r=i(38156);function o(e){switch(e){case"ArticlePreview":return r.uH.Article;case"SlideshowPreview":return r.uH.Gallery;case"VideoPreview":return r.uH.Video;case"WebContentPreview":return r.uH.WebContent;case"WebContentExternal":return r.uH.ExternalLink;default:return null}}!function(e){e.HotListCard="hotlist",e.MobileRewardsCard="Rewards",e.TabbedInfopaneCard="tabbedinfopane",e.TabbedInfopaneCardTab="tabbed-infopane-tab",e.MangaCard="MangaCard",e.MobileShoppingCard="ShoppingFeed1",e.MobileShoppingCard2="ShoppingFeed2",e.MobileShoppingCard3="ShoppingFeed3",e.MobileShoppingCard4="ShoppingFeed4",e.VideoShoppingCard="VideoShoppingSDCard",e.VideoShoppingCarouselCard="VideoShoppingCarousel",e.SuperListCard="super-list-card",e.RealEstateCard="real-estate-card",e.PrayerTimesCard="PrayerTimes",e.PrismCarouselCard="PrismFeedCarousel",e.TrendingSearchCard="TrendingSearchCard",e.CommuteCard="CommuteMetadata",e.DigestCard="digest-card",e.Article="article",e.Slideshow="slideshow",e.Video="video",e.Spotlight="content360",e.Infopane="infopane",e.TabbedInfopane="tabbedInfopane",e.HalfPane="HalfPane",e.HeadToHead="HeadToHead",e.Mosaic="Mosaic",e.Triptych="Triptych",e.TabbedFeedCard="GroupedXfeedUpsell",e.TabbedInfopaneTab="tabbedInfopaneTab",e.WebContent="webcontent",e.ExternalLink="link",e.ChannelCarousel="followCarousel",e.InterestManagementCard="InterestManager",e.GamingInterestGroup="GamingInterestGroup",e.DenseList="DenseList",e.BackFillContent="BackfillContent",e.MyBriefRiverCard="toppicks",e.NativeAd="nativead",e.CmsAd="cmsad",e.AmplifyAd="amplifyad",e.BoostAd="BoostAd",e.EventSDCardAmplifyAds="EventSDCardAmplifyAds",e.ShoppingCard="ShoppingCard",e.EdgeShoppingCard="EdgeShoppingCard",e.ShoppingCarousel="ShoppingCarousel",e.ShoppingRiver="ShoppingRiver",e.EventSDCardShopping="EventSDCardShopping",e.ComicsCarousel="ComicsCarousel",e.EditorsPickCarousel="EditorsPickCarousel",e.SelectCarousel="SelectCarousel",e.DailyFixGamesCarousel="DailyFixGamesCarousel",e.NewsSegmentCarousel="NewsSegmentCarousel",e.SubscriptionCarousel="SubscriptionCarousel",e.GroceryCouponSdCard="GroceryCouponSdCard",e.BeaconProviderUpsell="BeaconProviderUpsell",e.MoneyTopicStripe="MoneyTopicStripe",e.LinkedInCard="linkedInNewsCard",e.SectionHeader="GreetingsUpsell",e.TopStories="topStories",e.NewsGroups="newsGroups",e.NewsAnswerModule="NewsAnswerModule",e.WorkHeadlines="workNews",e.Trending="trendingnow",e.TrendingTopics="TrendingTopicsUpsellAnaheim",e.LocalNews="XfeedUpsell",e.LocalNewsFeed="LocalNewsFeed",e.SageGroupedFeed="SageGroupedFeed",e.TrendingInTenMinutes="trendingInTenMinutes",e.Horoscope="Horoscope",e.Elections="EventSDCardElection",e.RecommendedSearchCarousel="RecommendedSearchCarousel",e.RecommendedSearchesCard="RecommendedSearch",e.OnThisDay="OnThisDay",e.Lottery="Lottery",e.PartnerUpsell="PartnerUpsell",e.Qna="qnacard",e.quizcard="quizcard",e.Recipes="recipecard",e.Inspiration="PrismFeedCard",e.Rewards="rewardscard",e.TravelDestinationCard="TravelDestinationCard",e.TravelDestinationCarouselCard="TravelDestinationCarouselCard",e.TravelInspirationCard="TravelInspirationCard",e.BingHealthCovid19StatsCard="Covid19Stats",e.BingHealthFitnessCard="healthcard",e.HealthTipCard="healthtipcard",e.PollsCard="pollscard",e.PlaceholderCard="placeholder",e.CashbackAds="CashbackAds",e.Promotion="Promotion",e.BingVideo="BingVideo",e.BingVideoCarousel="BingVideoCarousel",e.CasualGamesCarousel="CasualGamesCarousel",e.EsportsCasualGames="esportsCasualGames",e.EsportsHighlight="esportsHighlight",e.EsportsLiveStream="esportsLiveStream",e.EsportsMatch="esportsMatch",e.EsportsTournament="esportsTournament",e.EventSDCardWorldCup="EventSDCardWorldCup",e.EventSDCardWorldCup2="EventSDCardWorldCup2",e.ShoppingFeedCard="ShoppingFeedCard",e.WeatherSummary="WeatherSummary",e.WeatherSummary_spotlight="WeatherSummary_spotlight",e.StockQuote="StockQuote",e.StockQuote_spotlight="StockQuote_spotlight",e.MoneyInfo="MoneyInfo",e.MoneyPreWL="MoneyPreWL",e.MoneyCrypto="CryptoCard",e.MoneyMarketBrief="MarketBrief",e.MoneyMoreForYouCard="MoneyMoreForYouCard",e.SportsMatch="SportsMatch",e.SportsOlympics="SportsOlympics",e.TrafficDelays="TrafficDelays",e.ShoppingProngCardResponse="ShoppingProngCardResponse",e.ShoppingMerchantCategoryDeals="ShoppingMerchantCategoryDeals",e.ShoppingVideoCarousel="ShoppingVideoCarousel",e.Group="group",e.Upsell="FreUpsell",e.Dense="densetab",e.LocalGuide="localdaycard",e.Marketplace="MarketPlace",e.MarketplaceEvent="EventSDCardMarketplace",e.GamingClip="GamingClip",e.GamingClipsCarousel="GamingClipsCarousel",e.GamingHighlightClipsCarousel="GamingHighlightClipsCarousel",e.GamingCompete="GamingCompete",e.GamingHighlight="GamingHighlight",e.GamingHighlightsCarousel="GamingHighlightsCarousel",e.GamingLiveStream="GamingLiveStream",e.GamingLiveStreamCarousel="GamingLiveStreamCarousel",e.GamingMatch="GamingMatch",e.GamingPersonalize="GamingPersonalize",e.GamingRecentlyPlayed="GamingRecentlyPlayed",e.GamingRecommendedGames="GamingRecommendedGames",e.GamingReddit="GamingReddit",e.GamingRewards="GamingRewardsCard",e.GamingTournament="GamingTournament",e.GamingUpcomingGames="GamingUpcomingGames",e.GamingVideoCarousel="GamingVideoCarousel",e.GamingVod="GamingVod",e.GamingVideo="GamingVideo",e.AiCharacterCard="AicharacterCard",e.MicrosoftFeedCard="MicrosoftFeedCard",e.IndustryNewsCard="IndustryNewsCard",e.RecommendedCardFeed="RecommendedCardFeed",e.RecommendedInterests="RecommendedInterests",e.WindowsShellRecommendedInterests="WindowsShellRecommendedInterests",e.CompanyNewsCard="CompanyNewsCard",e.AutosEntityList="AutosEntityList",e.AutosCarousel="AutosCarousel",e.ContainerizedHalfu="containerizedHalfu",e.ComboCard="Combo",e.TopicFeed="TopicFeed",e.TopicFeedWeekends="eventcontentcardweekend",e.TopicFeedMomentInTime1="eventcontentcardmit1",e.TopicFeedTrendingNow="trending now",e.TopicFeedTopStories="topstories",e.TopicFeedShopping="eventcontentcardshopping",e.TopicFeedWeather="eventdynamiccontentcardweather",e.Calendar="Calendar",e.Entertainment="Entertainment",e.Family="Family",e.M365="M365",e.Photos="Photos",e.ThirdPartyWidget="3pwidget",e.Tips="Tips",e.ToDo="ToDo",e.XboxGamePass="xboxgamepass",e.GroupedContent="GroupedContentFeed",e.UserInterestTopic="UserInterestTopic",e.SuggestedInterest="SuggestedInterest",e.UserInterestTopicAndProvider="UserInterestTopicAndProvider",e.NewsFlipper="NewsFlipper",e.ColdStartArticleFreCard="ArticleFre",e.WindowsShellTrendingTopics="TrendingTopicsUpsell",e.WindowsShellNotificationBanner="genericbadge",e.RewardsDailySet="RewardsDailySet",e.BoostAdsBanner="BoostAdsBanner",e.BoostAdsCoachmark="BoostAdsCoachmark",e.GoBig="goBig",e.EventSDCardSportsMIT1="EventSDCardSportsMIT1",e.EventSDCardSportsMIT2="EventSDCardSportsMIT2",e.EventSDCardSportsMIT3="EventSDCardSportsMIT3"}(n||(n={}));const s=[n.NativeAd,n.CmsAd,n.AmplifyAd,n.EventSDCardAmplifyAds,n.BoostAd,n.BoostAdsBanner,n.BoostAdsCoachmark]},12858:function(e,t,i){"use strict";i.d(t,{$H:function(){return r},Au:function(){return n},fv:function(){return o}});const n="0067acd6d05f4168b92f510d33b9ed74",r="dc6cfb18912240efaa3557c0123fb1eb",o="32649384730b2d61c9e79d46de589115"},81866:function(e,t,i){"use strict";i.d(t,{jK:function(){return S},o9:function(){return C},Tt:function(){return ie},qT:function(){return ne},yk:function(){return N},cz:function(){return B},JG:function(){return E},q3:function(){return O},dz:function(){return I},Ei:function(){return P},IK:function(){return h},FM:function(){return m},Of:function(){return M},SP:function(){return x},yj:function(){return D},v_:function(){return R},bG:function(){return L},c6:function(){return F},mu:function(){return se},F:function(){return ae},H:function(){return k},_k:function(){return A},Kz:function(){return w},gR:function(){return T},df:function(){return le},cN:function(){return ue},c4:function(){return d},$x:function(){return l},_u:function(){return u},ao:function(){return f},Ef:function(){return v},br:function(){return y},ZW:function(){return b},pp:function(){return p},k4:function(){return g},r:function(){return re},dP:function(){return oe},Nd:function(){return j},R3:function(){return $},R2:function(){return Q},e_:function(){return J},ZK:function(){return U},pk:function(){return H},wS:function(){return Z},WR:function(){return K},Jz:function(){return z},pQ:function(){return G},eI:function(){return _},kE:function(){return W},dq:function(){return V},js:function(){return q},OH:function(){return ce},E$:function(){return de},ix:function(){return ee},mX:function(){return te},Ld:function(){return X},r1:function(){return Y}});var n=i(17157),r=i(33940),o=i(12858);function s(e,t){var i,n;if(function(e){var t;try{return null!==(t=null==e?void 0:e.needHeader)&&void 0!==t&&t}catch(e){c(`Failed to get feed needHeader Failed with exception : ${e}`)}}(e))try{const e=JSON.parse(t),o=JSON.parse(null!==(i=null==e?void 0:e.header)&&void 0!==i?i:null),s=null!==(n=null==o?void 0:o["ddd-activityid"])&&void 0!==n?n:null;s&&function(e){(0,r.mG)(this,void 0,void 0,(function*(){let t=window.localStorage.getItem(a);t=`${t?`${t},`:""}${e}`,window.localStorage.setItem(a,t)}))}(s)}catch(e){c(`Failed to get feed needHeader Failed with exception : ${e}`)}}const a="activityIds";function c(e){(0,n.wq)()&&function(e){new Promise(((t,i)=>{!function(e,t){(0,n.dw)("logEvent",e,t)}(e,(e=>{t(e)}))}))}({appId:o.Au,type:"Debug",name:"HP_WEBVIEW_SERVER_LOG",data:{message:e}})}function d(e,t){(0,n.dw)("navigate",e,t)}function l(e){return new Promise(((t,i)=>{d(e,(e=>{t(e)}))}))}function u(e,t){d(e,t)}function p(e,t){(0,n.dw)("requestBrowser",e,t)}function g(e){return new Promise(((t,i)=>{p(e,(e=>{t(e)}))}))}function h(e,t){(0,n.dw)("getHttp",e,t)}function m(e){return new Promise(((t,i)=>{h(e,(i=>{t(i),s(e,i)}))}))}function f(e,t){(0,n.dw)("postHttp",e,t)}function v(e){return new Promise(((t,i)=>{f(e,(e=>{t(e)}))}))}function y(e,t){(0,n.dw)("putHttp",e,t)}function b(e){return new Promise(((t,i)=>{y(e,(e=>{t(e)}))}))}function S(e,t){(0,n.dw)("deleteHttp",e,t)}function C(e){return new Promise(((t,i)=>{S(e,(e=>{t(e)}))}))}function w(e,t){(0,n.dw)("logEvent",e,t)}function T(e){return new Promise(((t,i)=>{w(e,(e=>{t(e)}))}))}function k(e,t){(0,n.dw)("logError",e,t)}function A(e){return new Promise(((t,i)=>{k(e,(e=>{t(e)}))}))}function I(e,t){(0,n.dw)("getDeviceInfo",e,t)}function P(e){return new Promise(((t,i)=>{I(e,(e=>{t(e)}))}))}function E(e,t){(0,n.dw)("getBatteryInfo",e,t)}function O(e){return new Promise(((t,i)=>{E(e,(e=>{t(e)}))}))}function M(e,t){(0,n.dw)("getLocationInfo",e,t)}function x(e){return new Promise(((t,i)=>{M(e,(e=>{t(e)}))}))}function D(e,t){(0,n.dw)("getNetworkInfo",e,t)}function R(e){return new Promise(((t,i)=>{D(e,(e=>{t(e)}))}))}function L(e,t){(0,n.dw)("getUserInfo",e,t)}function F(e){return new Promise(((t,i)=>{L(e,(e=>{t(e)}))}))}function N(e,t){(0,n.dw)("getAppList",e,t)}function B(e){return new Promise(((t,i)=>{N(e,(e=>{t(e)}))}))}function j(e,t){(0,n.dw)("requestDialog",e,t)}function $(e){return new Promise(((t,i)=>{j(e,(e=>{t(e)}))}))}function U(e,t){(0,n.dw)("requestPermission",e,t)}function H(e){return new Promise(((t,i)=>{U(e,(e=>{t(e)}))}))}function _(e,t){(0,n.dw)("requestToast",e,t)}function W(e){return new Promise(((t,i)=>{_(e,(e=>{t(e)}))}))}function z(e,t){(0,n.dw)("requestSnackBar",e,t)}function G(e){return new Promise(((t,i)=>{z(e,(e=>{t(e)}))}))}function V(e,t){(0,n.dw)("requestVibration",e,t)}function q(e){return new Promise(((t,i)=>{V(e,(e=>{t(e)}))}))}function Z(e,t){(0,n.dw)("requestRestart",e,t)}function K(e){return new Promise(((t,i)=>{Z(e,(e=>{t(e)}))}))}function Q(e,t){(0,n.dw)("requestOrientation",e,t)}function J(e){return new Promise(((t,i)=>{Q(e,(e=>{t(e)}))}))}function X(e,t){return(0,n.oL)(e,t)}function Y(e,t,i){(0,n.Ev)(e,t,i)}function ee(e,t){(0,n.dw)("sendBroadcast",e,t)}function te(e){return new Promise(((t,i)=>{ee(e,(e=>{t(e)}))}))}function ie(e,t){(0,n.dw)("fetchAds",e,t)}function ne(e){return new Promise(((t,i)=>{ie(e,(e=>{t(e)}))}))}function re(e,t){(0,n.dw)("requestCustom",e,t)}function oe(e){return new Promise(((t,i)=>{re(e,(e=>{t(e)}))}))}function se(e,t){(0,n.dw)("loadData",e,t)}function ae(e){return new Promise(((t,i)=>{se(e,(e=>{t(e)}))}))}function ce(e,t){(0,n.dw)("saveData",e,t)}function de(e){return new Promise(((t,i)=>{ce(e,(e=>{t(e)}))}))}function le(e,t){(0,n.dw)("requestShare",e,t)}function ue(e){return new Promise(((t,i)=>{le(e,(e=>{t(e)}))}))}},17157:function(e,t,i){"use strict";i.d(t,{Ev:function(){return m},NG:function(){return u},Yt:function(){return l},dw:function(){return g},oL:function(){return h},wq:function(){return a}});var n=i(83648);const r={},o={};function s(e,t){let i=n.Base64.decode(t);void 0!==i&&""!==i||(i=null),r[e]&&r[e].length>0&&(r[e].forEach((e=>{e(i)})),r[e]=void 0),o[e]&&o[e].length>0&&o[e].forEach((e=>{e(i)}))}function a(){var e,t,i,n;const r=null===(e=window.sapphireWebViewBridge)||void 0===e?void 0:e.send,o=null===(n=null===(i=null===(t=window.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===i?void 0:i.send)||void 0===n?void 0:n.postMessage;return r||o}let c,d=!1;function l(){!d&&a()&&(window.sapphireWebViewBridge||(window.sapphireWebViewBridge={}),window.sapphireWebViewBridge.$onDataReady=s,d=!0)}function u(e){c=e}function p(e,t){var i,n,r,o,s,a,d;console.log(e,t);const l="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),u={scenario:e,data:{data:t},id:l};c&&!u.data.data.appId&&(u.data.data.appId=c);const p=JSON.stringify(u);return(null===(r=null===(n=null===(i=window.webkit)||void 0===i?void 0:i.messageHandlers)||void 0===n?void 0:n.send)||void 0===r?void 0:r.postMessage)&&(null===(a=null===(s=null===(o=window.webkit)||void 0===o?void 0:o.messageHandlers)||void 0===s?void 0:s.send)||void 0===a||a.postMessage(p)),(null===(d=window.sapphireWebViewBridge)||void 0===d?void 0:d.send)&&window.sapphireWebViewBridge.send(p),l}function g(e,t,i){const n=p(e,t);i&&function(e,t){r[e]?r[e].push(t):r[e]=[t]}(n,i)}function h(e,t){const i=p("subscribe",e);var n,r;return r=t,o[n=i]?o[n].push(r):o[n]=[r],i}function m(e,t,i){g("unSubscribe",t,(e=>{i&&i(e)})),o[e]=void 0}},89123:function(e,t,i){"use strict";i.d(t,{J:function(){return d},f:function(){return u}});var n=i(33940);const r={prefix:"SW",startTime:"StartTime",navigationFetchTime:"NavigationFetchTime",navigationCacheReadTime:"NavigationCacheReadTime",navFeedHandlerComplete:"NavFeedHandlerComplete",navFeedHandlerWillRespond:"NavFeedHandlerWillRespond",navFeedHandlerDidRespond:"NavFeedHandlerDidRespond",navFeedHandlerStart:"NavFeedHandlerStart",navFeedCacheDuration:"NavFeedCacheDuration",navParseDuration:"NavParseDuration",navFeedCachedStatus:"NavFeedCachedStatus",navFeedCacheReadTime:"NavFeedCacheReadTime",navFeedFetchTime:"NavFeedFetchTime",navFeedCacheOpenDuration:"NavFeedCacheOpenDuration"};function o(e){return[r.prefix,e].filter((e=>e.length>0)).join(".")}var s=i(41065);var a=i(62676);const c={hit:1,"hit-mem":2,miss:0};function d(e){l()&&(e[o(r.startTime)]=Math.round(function(){const e=performance.getEntriesByType("navigation")[0],t=e.workerStart;return e.requestStart-t}()),e[o(r.navigationFetchTime)]=Math.round(function(){const e=performance.getEntriesByType("navigation")[0].transferSize;if(0===e||300===e)return-1;return performance.timing.responseStart-performance.timing.requestStart}()),e[o(r.navigationCacheReadTime)]=Math.round(function(){const e=performance.getEntriesByType("navigation")[0],t=e.transferSize;if(0===t||300===t){return e.responseStart-e.requestStart}return-1}()),function(e){(0,n.mG)(this,void 0,void 0,(function*(){if(!l())return;const t=yield function(){return(0,n.mG)(this,void 0,void 0,(function*(){return(0,s.T)({type:"NAV_PERF_DATA"})}))}();e[a.kc]=t&&"hit"===t.cachedStatus?1:0,t&&t.cacheReadTime&&(e[o(r.navigationCacheReadTime)]=Math.round(t.cacheReadTime)),t&&t.fetchTime&&(e[o(r.navigationFetchTime)]=Math.round(t.fetchTime))}))}(e))}function l(){const e=performance.getEntriesByType("navigation");if(!e||0===e.length)return!1;const t=e[0].workerStart;return Boolean(t)}function u(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!l())return;const t=yield function(){return(0,n.mG)(this,void 0,void 0,(function*(){return(0,s.T)({type:"FEED_FETCH_PERF_DATA"})}))}();t&&t.navFeedHandlerComplete&&(e[o(r.navFeedHandlerComplete)]=Math.round(t.navFeedHandlerComplete)),t&&t.navFeedHandlerStart&&(e[o(r.navFeedHandlerStart)]=Math.round(t.navFeedHandlerStart)),t&&t.navFeedHandlerWillRespond&&(e[o(r.navFeedHandlerWillRespond)]=Math.round(t.navFeedHandlerWillRespond)),t&&t.navFeedHandlerDidRespond&&(e[o(r.navFeedHandlerDidRespond)]=Math.round(t.navFeedHandlerDidRespond)),t&&t.navFeedCacheDuration&&(e[o(r.navFeedCacheDuration)]=Math.round(t.navFeedCacheDuration)),t&&t.navFeedCacheOpenDuration&&(e[o(r.navFeedCacheOpenDuration)]=Math.round(t.navFeedCacheOpenDuration)),t&&t.navParseDuration&&(e[o(r.navParseDuration)]=Math.round(t.navParseDuration)),t&&t.navFeedCachedStatus&&(e[a.Ak]=c[t.navFeedCachedStatus]),t&&t.navFeedCacheReadTime&&(e[o(r.navFeedCacheReadTime)]=Math.round(t.navFeedCacheReadTime)),t&&t.navFeedFetchTime&&(e[o(r.navFeedFetchTime)]=Math.round(t.navFeedFetchTime))}))}},42420:function(e,t,i){"use strict";i.d(t,{R:function(){return s},U:function(){return o}});var n=i(33940);let r=!1;const o={purgeCacheAsync:function(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.isServiceWorkerActive()){const t=(yield caches.keys()).filter((t=>t.includes(e)));yield Promise.all(t.map((e=>caches.delete(e))))}}))},purgeEntryInCache:function(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.isServiceWorkerActive()){const n=yield caches.open(e),r=(yield n.keys()).filter((e=>e.url.startsWith(t)&&e.method===i));yield Promise.all(r.map((e=>n.delete(e))))}}))},isServiceWorkerActive:function(){const{navigator:e}=window,t=e&&e.serviceWorker&&e.serviceWorker.controller;return t&&"activated"===t.state},getIsServiceWorkerEnabled:function(){return r},setIsServiceWorkerEnabled:function(e){r=e}};var s;!function(e){e.base="base",e.followedTopics="followedTopics",e.publishersProfile="publishersProfile",e.river="river",e.subscribedPublishers="subscribedPublishers",e.financeGraphAction="financeGraphAction"}(s||(s={}))},41065:function(e,t,i){"use strict";function n(e){if(!navigator.serviceWorker)return;const t=navigator.serviceWorker.controller;return t?r(t,e):navigator.serviceWorker.ready.then((t=>{const i=t.active;if(i)return r(i,e)}))}function r(e,t){return new Promise((i=>{const n=new MessageChannel;n.port1.onmessage=e=>{i(e.data)},e.postMessage(t,[n.port2])}))}i.d(t,{T:function(){return n}})},55027:function(e,t,i){"use strict";i.d(t,{I:function(){return r}});var n=i(55067);class r{}r.layoutAnimationStart=new n.C("layoutAnimationStart"),r.layoutAnimationComplete=new n.C("layoutAnimationComplete"),r.headerTransitionEnd=new n.C("headerTransitionEnd")},49042:function(e,t,i){"use strict";i.d(t,{B:function(){return r}});var n=i(55067);class r{}r.toggleCollapsibleControl=new n.C("toggleCollapsibleControlSignature")},11978:function(e,t,i){"use strict";i.d(t,{O:function(){return r},y:function(){return o}});var n=i(55067);class r{}function o(){r.setSignInState.unregisterObservers()}r.setSignInState=new n.C("setSignInStateSignature"),r.updateFlyoutDisplayState=new n.C("setFlyoutDisplayStateSignature")},75244:function(e,t,i){"use strict";i.d(t,{m:function(){return s}});var n=i(63439),r=i(11978),o=i(33379);class s extends n.e{constructor(e,t,i,n,r,s,a){super(e,t,i,n,r,s,a),this._authPrivateApi=(0,o.N)()&&window&&window.chrome&&window.chrome.authPrivate,this.registerSignInEventChangedCallback()}updateSignInState(e){var t,i;null===(i=null===(t=null===r.O||void 0===r.O?void 0:r.O.setSignInState)||void 0===t?void 0:t.getActionSender(this))||void 0===i||i.send(e)}updateSignInFlyoutDisplayState(e){var t,i;null===(i=null===(t=null===r.O||void 0===r.O?void 0:r.O.updateFlyoutDisplayState)||void 0===t?void 0:t.getActionSender(this))||void 0===i||i.send(e)}registerSignInEventChangedCallback(){this._authPrivateApi&&this._authPrivateApi.onSignInStateChanged.addListener((e=>{const t=e;this.updateSignInState(!!t.account_id)}))}}},79485:function(e,t,i){"use strict";i.d(t,{e:function(){return o}});var n=i(30856),r=i(11978);class o{reduce(e,t){if(!e)return{isUserSignedIn:void 0,isFlyoutDisplayed:!1};if(!t)return e;let i;return n.G.handleAction(t,r.O.setSignInState,(t=>{i=Object.assign(Object.assign({},e),{isUserSignedIn:t})})),n.G.handleAction(t,r.O.updateFlyoutDisplayState,(t=>{i=Object.assign(Object.assign({},e),{isFlyoutDisplayed:t})})),i||e}}},47680:function(e,t,i){"use strict";i.d(t,{j:function(){return r}});var n=i(55067);class r{}r.disableSmartList=new n.C("disableSmartList"),r.registerSmartList=new n.C("registerSmartList"),r.persistSmartList=new n.C("persistSmartList"),r.updateSmartListBadgeProps=new n.C("updateSmartListBadgeProps"),r.updateSmartListState=new n.C("updateSmartListState"),r.userSignInSignature=new n.C("userSignInSignature"),r.userSignOutSignature=new n.C("userSignOutSignature")},12360:function(e,t,i){"use strict";i.r(t),i.d(t,{SmartListSharedActions:function(){return r.j},SmartListSharedDataConnector:function(){return a},SmartListSharedDataReducer:function(){return d},ToolingInfo:function(){return l}});var n,r=i(47680);!function(e){e[e.notStarted=0]="notStarted",e[e.initialized=1]="initialized",e[e.rendered=2]="rendered",e[e.unmounted=3]="unmounted"}(n||(n={}));var o=i(63439),s=i(83227);class a extends o.e{initSmartList(e,t){if(!e)return;const i=this.getSmartList(e);i&&i.initCallback&&i.currentState===n.notStarted&&(e===s.x.edgeShopping?t&&(i.initCallback(t),r.j.updateSmartListState.getActionSender(this).send(e,n.initialized)):(i.initCallback(),r.j.updateSmartListState.getActionSender(this).send(e,n.initialized)))}moveFocusToSmartList(e,t){const i=this.getSmartList(e);return!!(i&&i.focusCallback&&i.renderCallback&&i.currentState===n.rendered)&&(i.focusCallback(t),!0)}renderSmartList(e,t){if(!e||!t)return;const i=this.getSmartList(e);i&&i.renderCallback&&(i.renderCallback(t),r.j.updateSmartListState.getActionSender(this).send(e,n.rendered))}unmountSmartList(e,t){if(!e||!t)return;const i=this.getSmartList(e);i&&i.unmountCallback&&i.currentState===n.rendered&&(i.unmountCallback(t),r.j.updateSmartListState.getActionSender(this).send(e,n.unmounted))}updateSignInStatus(e,t){const i=this.getSmartList(e);return!(!i||!i.updateSignInStatusCallback)&&(i.updateSignInStatusCallback(t),!0)}getSmartList(e){if(!e)return;const t=this.getCurrentState().smartLists;return t&&0!==t.size?t.get(e):void 0}}var c=i(30856);class d{reduce(e,t){if(!e)return{smartLists:new Map};if(!t)return e;let i=!1;const o=Object.assign({},e);return i=i||c.G.handleAction(t,r.j.disableSmartList,(e=>{if(e){const t=o.smartLists.get(e);t&&(t.currentState=n.notStarted)}})),i=i||c.G.handleAction(t,r.j.registerSmartList,(e=>{e&&(o.smartLists.has(e.experienceType)||o.smartLists.set(e.experienceType,{badgeProps:void 0,currentState:n.notStarted,focusCallback:e.focusShouldMove,initCallback:e.initShouldFire.bind(e),isUserSignedIn:!1,renderCallback:e.renderShouldFire,shouldPersist:void 0,unmountCallback:e.unmountShouldFire,updateSignInStatusCallback:e.updateSignInStatus}))})),i=i||c.G.handleAction(t,r.j.persistSmartList,(e=>{if(e){const t=o.smartLists.get(e);t&&(t.shouldPersist=!0)}})),i=i||c.G.handleAction(t,r.j.updateSmartListState,((e,t)=>{if(e){const i=o.smartLists.get(e);i&&(i.currentState=t)}})),i=i||c.G.handleAction(t,r.j.updateSmartListBadgeProps,((e,t)=>{if(e){const i=o.smartLists.get(e);i&&t&&(i.badgeProps=t)}})),i=i||c.G.handleAction(t,r.j.userSignInSignature,(e=>{if(e){const t=o.smartLists.get(e);t&&(t.isUserSignedIn=!0)}})),i=i||c.G.handleAction(t,r.j.userSignOutSignature,(e=>{if(e){const t=o.smartLists.get(e);t&&(t.badgeProps=null,t.isUserSignedIn=!1)}})),i?o:e}}const l={experienceConfigSchema:{}}},59785:function(e,t,i){"use strict";i.d(t,{AF:function(){return a},li:function(){return c}});var n=i(33940),r=i(27003);const o=()=>r.Gq.get("__ssr_util__pending_preload_bundles",(()=>new Set)),s=new Map,a=(e,t)=>{if(s.has(e))throw new Error(`Bundle ${e} is already registered.`);s.set(e,t);const i=o();return i.has(e)&&(i.delete(e),t()),()=>(r.Gq.get("__ssr_util__preload_bundles",(()=>new Set)).add(e),t())},c=e=>{const t=o(),i=e.map((e=>(0,n.mG)(void 0,void 0,void 0,(function*(){if(s.has(e))return s.get(e)();t.add(e)}))));return Promise.all(i)}},31780:function(e,t,i){"use strict";i.d(t,{et:function(){return f},l6:function(){return h},mY:function(){return v}});var n=i(33940),r=i(26415),o=i(73252),s=i(46336),a=i(12611),c=i(65135),d=i(3072),l=i(60813),u=i(4734),p=i(75384);const g=[],h=e=>{if(l.Qu.includes(e.type))return e;try{const{type:t,isBreaking:i,locale:n,category:r,images:o,topics:s=[],dataUrl:c,publishedDateTime:d,id:l,url:u,abstract:p="",title:g="",provider:h={},feed:m={},actions:f=[],externalVideoFiles:v,reactionStatus:y,commentStatus:b,reactionSummary:S,commentSummary:C,reasons:w,sourceId:T,topComments:k,colorSamples:A,isLocalContent:I,badges:P,relatedCards:E,recoDocMetadata:O,offer:M,recoId:x,ri:D,subType:R,traceIdIndex:L,rowCount:F,videoMetadata:N,isWorkNewsContent:B}=e,j=(0,a.TL)(o)||{},$=v||{},U=s.find((e=>e.feedId===m.id&&e.locale===n)),H=(0,a.v9)(u);let _=(0,a.XA)(h.logoUrl);return!_&&h.logo&&h.logo.url&&(_=(0,a.XA)(h.logo.url)),{id:l,type:t,metadata:{abstract:p,abstractLength:p.length,titleLength:g.length,category:r||H[4],subCategory:H[5],primaryImage:{height:j.height,width:j.width},locale:n,feed:{id:m.id},kicker:[m],actions:f.map((e=>a.N[e]||e)),reactionStatus:y,commentStatus:b,reactionSummary:S,commentSummary:C,reasons:w,topComments:k,relatedCards:E,topics:s,recoId:x,recoDocMetadata:O,ri:D,videoFiles:$,videoMetadata:N},cardContent:{id:l,type:(0,a.cx)(t),title:g,uriTitle:H[6],abstract:p,isBreaking:i||0,tags:[U||{}],provider:{id:h.id,name:h.name,logo:{id:_},lightThemeSVGLogo:h.lightThemeSVGLogo,darkThemeSVGLogo:h.darkThemeSVGLogo,profileId:h.profileId,logoUrl:h.logoUrl,subscribable:!1},category:{product:r,label:void 0},locale:n,images:[{id:(0,a.XA)(j.url),height:j.height,width:j.width,caption:j.title,focalRegion:j.focalRegion,attribution:j.attribution,url:j.url,colorSamples:j.colorSamples}],videoFiles:$,publishedDateTime:d,kicker:g,sourceHref:c,destinationUrl:u,sourceId:T,colorSamples:A,isLocalContent:I,isWorkNewsContent:B,badges:P,topics:s},offer:M,subType:R,rowCount:F,traceIdIndex:L}}catch(t){return e}};function m(){const e=m;return new Promise((t=>{void 0!==e.cache&&t(e.cache);const i=n=>{n>3&&(e.cache=null,t(null));const r=document.getElementById("ntp-diagnostics");r&&r.innerText?(e.cache=r,t(r)):(n++,setTimeout((()=>i(++n)),3e3))};i(0)}))}const f=(e,t)=>c.M0.addOrUpdateIdxId(e,t),v=(e,t)=>(0,n.mG)(void 0,void 0,void 0,(function*(){try{(e||t)&&g.push({id:e,debug:t}),yield Promise.all([(0,u.F_)(),(0,p.lr)()]);const i=yield m();if(i&&i.innerText){const e=JSON.parse(i.innerText);Object.assign(e,{traceInfo:g}),Object.assign(e,{prgDiagnostics:y()}),Object.assign(e,{authTrail:b()}),i.innerText=JSON.stringify(e)}}catch(e){c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.D2d.UpdateIdxidToDomFail),{message:"Error throwed during update idxid into diagnostic element"}))}})),y=()=>{const e=o.Al&&o.Al.Diagnostics||{};return e&&(0,s.fB)(JSON.stringify(e))},b=()=>{try{return(0,d.pD)()}catch(e){c.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.MCu.AuthCompressedRecordsNotFoundNTP),{message:"Error throwed when getCompressedRecords doesn't return anything for NTP"}))}}},67277:function(e,t,i){"use strict";i.d(t,{e:function(){return j}});var n=i(33940),r=i(65337);const o="1adindices",s=e=>{try{return JSON.parse(e,c)}catch(e){return null}},a=(e,t)=>t instanceof Map?{dataType:"Map",value:Array.from(t.entries())}:t,c=(e,t)=>"object"==typeof t&&null!==t&&"Map"===t.dataType?new Map(t.value):t;var d=i(65135),l=i(73252);const u=(e,t,i)=>{d.M0.sendAppErrorEvent(Object.assign(Object.assign({},i),{pb:Object.assign(Object.assign({},i.pb),{customMessage:`Config: ${e}, Response: ${t}`,isPrerender:null===l.Al||void 0===l.Al?void 0:l.Al.IsPrerender})}))};var p,g,h,m=i(64950),f=i(96288),v=i(92170),y=i(40252),b=i(32050),S=i(63535),C=i(19809),w=i(87298),T=i(68364),k=i(26415);!function(e){e.CacheData="CacheData"}(p||(p={})),function(e){e.AdsSsr="AdsSsr"}(g||(g={})),function(e){e.PredictedAdPlacements="PredictedAdPlacements"}(h||(h={}));class A{constructor(){this.actionsServiceEndpoint="graph/actions",this.ocid="ntp-ads-cache",this.apiKey="Ctz9EPtL1YqXXOuymQHypfaBCLF5mOgFsdvxhT8ZNR",this.timeoutMs=1e3}getRequestUrl(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=(0,S.PH)(this.actionsServiceEndpoint,S.Ph);return C.$.getCommonParams(this.ocid).forEach((({key:t,value:i})=>e.searchParams.append(t,i))),e.searchParams.set("ocid",this.ocid),e.searchParams.set("apikey",this.apiKey),e}))}getRequestInit(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i={method:"GET",credentials:"include"};return i.headers=yield C.$.getOneServiceHeaders(),e&&(i.method=e),t&&(i.body=JSON.stringify(t)),i}))}sendRequest(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){const n=yield(0,w.w)((()=>(0,b.Sm)(e.toString(),this.timeoutMs,t)),i,this.timeoutMs,!0),r=yield n.json();if((0,f.Z)(r)&&(0,v.Z)(r.value)){const e=(0,y.Z)(r.value);return e&&e.metadata}}))}getAdUserPreference(e,t,i,r){return(0,n.mG)(this,void 0,void 0,(function*(){try{const n=yield this.getRequestUrl(),o=yield this.getRequestInit();return n.searchParams.append("$filter",`actionType eq '${e}' and targetType eq '${t}' and definitionName eq '${i}'`),n.searchParams.append("$top","1"),yield this.sendRequest(n,o,r)}catch(e){(0,T.OO)(e,k.eL$,"Call to get ads user preference failed")}}))}setAdUserPreference(e,t,i,r,o){return(0,n.mG)(this,void 0,void 0,(function*(){try{const n=yield this.getRequestUrl(),s=yield this.getRequestInit("POST",{actionType:e,targetType:t,definitionName:i,metadata:r});return yield this.sendRequest(n,s,o)}catch(e){(0,T.OO)(e,k.eL$,"Call to set ads user preference failed")}}))}getPredictedAdPlacements(){return(0,n.mG)(this,void 0,void 0,(function*(){return this.getAdUserPreference(p.CacheData,g.AdsSsr,h.PredictedAdPlacements,"AdsUserActionService.getPredictedAdPlacements")}))}setPredictedAdPlacements(e){return(0,n.mG)(this,void 0,void 0,(function*(){return this.setAdUserPreference(p.CacheData,g.AdsSsr,h.PredictedAdPlacements,e,"AdsUserActionService.setPredictedAdPlacements")}))}}var I=i(18769),P=i(85013),E=i(14752),O=i(40755),M=i(52965),x=i(16614),D=i(44772),R=i(75384),L=i(18179),F=i(33379),N=i(27003);class B{constructor(e,t){this.hasSSRAdData=!!((0,F.N)()&&window.ntpSSRData&&window.ntpSSRData.samAd),this.cardsIndexList=[],this.nativeAdIndexList=[],this.cmsAdIndexList=[],this.getCmsAdsConfig=()=>this.cmsAdsConfig,this.getAdRegionTupleListMap=()=>this.adRegionTupleListMap,this.getPlacementsBySectionIndex=(e,t)=>{const i=this.getAdIndexList(t)[this.config.auctionPreSectionsNum||0],n=B.isFilteredRegion[t]?(0,O.Z)(e,(e=>e<=i))+1:e.length,r=[];return e.forEach(((e,t)=>{t<n&&r.push(e)})),r},this.getCmsRequestFromTuple=(e=0)=>{const t={placements:[]};return this.adRegionTupleListMap.forEach(((i,n)=>{if(!i[0]){if(0===e&&this.shouldDeferInfopaneAuctionOnPrerender(n))return;const r=i[1],o=this.getAdIndexList(n)[e]||-1,s=B.isFilteredRegion[n]?(0,O.Z)(r,(e=>e<=o))+1:r.length,a=r.splice(0,s);this.checkAndAddPlacement(t,!i[0],n,a)}})),t},this.fireCmsAuction=(e=0)=>(0,n.mG)(this,void 0,void 0,(function*(){var t,i,n,r;let o;if((null===(i=null===(t=this.cmsRequest)||void 0===t?void 0:t.placements)||void 0===i?void 0:i.length)?(o=this.cmsRequest,this.cmsRequest=void 0):o=this.getCmsRequestFromTuple(e),o&&o.placements.length)try{const{infopane:e,river:t,documentId:i}=this.cmsAdsConfig,s=o.placements.find((({region:e})=>"resinfopane"===e)),a=o.placements.find((({region:e})=>"resriver"===e)),c=e.splice(0,null!==(n=null==s?void 0:s.indices.length)&&void 0!==n?n:0),d=t.splice(0,null!==(r=null==a?void 0:a.indices.length)&&void 0!==r?r:0);this.isFirstCmsAdsBatch=!1,this.cmsRequestPromise=this.nativeAdService.fetchCmsAds(o,i,[...c,...d]);const{placements:l}=yield this.cmsRequestPromise;return l}catch(e){(0,T.OO)(e,k.QyX.SuperFeedCMSAdFetchFailed,"Call to CMS Ad Service failed")}})),this.fetchSamPredictContent=(e=[])=>(0,n.mG)(this,void 0,void 0,(function*(){if(!this.isFirstSamAdsBatch)return;this.config.enableUASAdPlacementPrediction&&(!(0,F.N)()||this.hasSSRAdData)&&this.cachedAdIndicesResponseFromUAS&&(this.cachedAdIndicesFromUAS=yield this.cachedAdIndicesResponseFromUAS);const t=this.getPredictedAdRequest();if(this.samRequest=t,t&&t.placements&&t.placements.length)try{E.A.startMark("AdServiceCall.SuperFeed");const i=this.nativeAdService.fetchSamAds(t,!0,e,this.getIsPrerenderAds()),n=(0,L.pl)(this.config);[this.predictSamResponse]=yield Promise.all([i,n])}catch(e){(0,T.OO)(e,k.QyX.SuperFeedCMSAdFetchFailed,"Call to SAM Ad Service failed")}finally{E.A.endMark("AdServiceCall.SuperFeed")}})),this.waitForSamPredictResponse=()=>(0,n.mG)(this,void 0,void 0,(function*(){return this.predictSamResponse})),this.addToCallbackList=e=>{this.nativeAdService.addToCallbackList(e)},this.getSamRequestFromTupleWithSectionIndex=(e=0)=>{const t={placements:[]};return this.adRegionTupleListMap.forEach(((i,n)=>{if(i[0]){if(0===e&&this.shouldDeferInfopaneAuctionOnPrerender(n))return;const r=i[1],o=this.getAdIndexList(n)[e]||-1,s=B.isFilteredRegion[n]?(0,O.Z)(r,(e=>e<=o))+1:r.length,a=r.splice(0,s);this.checkAndAddPlacement(t,i[0],n,a)}})),t},this.shouldDeferInfopaneAuctionOnPrerender=e=>this.getIsPrerenderAds()&&e.includes("infopane"),this.getAdIndexList=e=>{var t,i;return(null===(t=this.config.riverSectionCardProviderConfig)||void 0===t?void 0:t.useRelativeAdPlacement)&&"river"===e?this.nativeAdIndexList:(null===(i=this.config.riverSectionCardProviderConfig)||void 0===i?void 0:i.useRelativeAdPlacement)&&"resriver"===e?this.cmsAdIndexList:this.cardsIndexList},this.fireSamAuction=(e=[],t,i)=>(0,n.mG)(this,void 0,void 0,(function*(){var n,r,o,s;let a;if((null===(r=null===(n=this.samRequest)||void 0===n?void 0:n.placements)||void 0===r?void 0:r.length)?(a=this.samRequest,this.samRequest=void 0):a=this.getSamRequestFromTupleWithSectionIndex(t),a&&a.placements.length){i&&(a={placements:a.placements,pageType:i.pageType,locale:i.locale,adid:i.adid,anid:i.anid,muid:i.muid,sapphireid:i.sapphireid,appName:i.appName,clientVersion:i.clientVersion,packageName:i.packageName});try{E.A.startMark("AdServiceCall.SuperFeed");const{isFirstSamAdsBatch:t,nativeAdService:i}=this,n=t?e:[];this.isFirstSamAdsBatch=!1;const r=i.fetchSamAds(a,t,n,this.getIsPrerenderAds());if(!this.config.loadAdTemplate)return yield r;if(this.config.enableNativeAdWC||this.config.enableNativeAdWCInfopane){const[e]=yield Promise.all([r,this.lazyLoadDRBundle(null===(s=null===(o=this.config)||void 0===o?void 0:o.adTemplateConfig)||void 0===s?void 0:s.configType)]);return e}{const[e]=yield Promise.all([r,(0,L.pl)(this.config)]);return e}}catch(e){(0,T.OO)(e,k.QyX.SuperFeedGetSamDataFailed,"Get SAM data failed")}finally{E.A.endMark("AdServiceCall.SuperFeed")}}})),this.initNativeAdConfig(e),this.initAdRegionTupleListMap(),this.beaconService=new I.A(null==e?void 0:e.adBeaconServiceConfig),!this.config.enableUASAdPlacementPrediction||(0,F.N)()&&!this.hasSSRAdData||this.initAdsUserActionService()}initNativeAdConfig(e){var t,i,n;this.isFirstSamAdsBatch=!0,this.isFirstCmsAdsBatch=!0,this.config=(0,M.Z)(e)||{},this.cmsAdsConfig=null!==(i=null===(t=this.config)||void 0===t?void 0:t.cmsAds)&&void 0!==i?i:{documentId:"",infopane:[],river:[]};const r={};this.config.backfillContentForMissingPlacements&&(r.useEmptyPlacementsForNoContent=!0),this.config.enablePrerenderAds&&this.config.enablePrerenderAuctionFlag&&(r.enablePrerenderAdsAuctionFlag=!0),this.config.auctionTimeoutOverride&&(r.auctionTimeoutOverride=this.config.auctionTimeoutOverride),this.config.disableAdsSSR&&(r.disableAdsSSR=!0),this.config.enableSponsoredCollectionSSR&&(r.enableSponsoredCollectionSSR=!0),this.nativeAdService=(0,P.d)((null===(n=this.config)||void 0===n?void 0:n.adTemplateConfig)||{},r)}initAdRegionTupleListMap(){this.adRegionTupleListMap=new Map([["infopane",[!0,[],[]]],["rightrail",[!0,[],[]]],["river",[!0,[],[]]],["infopane-tab",[!0,[],[]]],["resinfopane",[this.config.enableInfopaneLeadgenNative,[],[]]],["resriver",[this.config.enableRiverLeadgenNative,[],[]]],["dense-river",[!0,[],[]]]])}initAdsUserActionService(){this.adsUserActionService=new A,this.cachedAdIndicesResponseFromUAS=this.adsUserActionService.getPredictedAdPlacements()}loadCmsBackfillList(){return this.nativeAdService.loadCmsBackFillList()}fillAdsMap(e){if(!e)return;const{adLabelText:t,isGreyAdsLabelEnabled:i}=this.nativeAdService.getAdTagStyleByLocale(),n=(0,m.AH)(Object.assign({adLabelText:t,isGreyAdsLabelEnabled:i},this.config),e);this.adRegionTupleListMap.forEach(((e,t)=>{var i;e[2].push(...null!==(i=n[t])&&void 0!==i?i:[])}))}createNativeAdCardMetadata(e,t){var i;const n="resinfopane"===e||"resriver"===e?D.PL.CmsAd:D.PL.NativeAd,r=null===(i=this.adRegionTupleListMap.get(e))||void 0===i?void 0:i[2],o=null==r?void 0:r.find((e=>e.regionIndex===t));return o?{type:n,regionIndex:t,id:this.getNativeAdId(e,o.regionIndex),placement:o}:{type:n,regionIndex:t,placement:{items:[]}}}getPredictCmsAdsData(){var e,t;if(!this.isFirstCmsAdsBatch)return;const i=this.getCmsRequestFromTuple();if(this.predictCmsResponse&&this.validateCmsAdPlacementConfig(i),this.cmsRequest=i,(null===(t=null===(e=this.cmsRequest)||void 0===e?void 0:e.placements)||void 0===t?void 0:t.length)&&(this.isFirstCmsAdsBatch=!1),this.predictCmsResponse){const e=this.predictCmsResponse;return this.predictCmsResponse=void 0,e}}waitForCmsAuction(){return(0,n.mG)(this,void 0,void 0,(function*(){this.cmsRequestPromise&&(yield this.cmsRequestPromise)}))}checkAndAddPlacement(e,t,i,n){e&&t&&n.length&&e.placements.push({region:i,indices:n.splice(0),img:this.getRegionImg(i)})}fetchCmsPredictContent(){var e,t;return(0,n.mG)(this,void 0,void 0,(function*(){if(!this.isFirstCmsAdsBatch)return;this.config.enableUASAdPlacementPrediction&&(!(0,F.N)()||this.hasSSRAdData)&&this.cachedAdIndicesResponseFromUAS&&(this.cachedAdIndicesFromUAS=yield this.cachedAdIndicesResponseFromUAS);const i=this.getPredictedAdRequest(!0);if(this.cmsRequest=i,i.placements.length)try{const{infopane:n,river:r,documentId:o}=this.cmsAdsConfig,s=i.placements.find((({region:e})=>"resinfopane"===e)),a=i.placements.find((({region:e})=>"resriver"===e)),c=n.splice(0,null!==(e=null==s?void 0:s.indices.length)&&void 0!==e?e:0),d=r.splice(0,null!==(t=null==a?void 0:a.indices.length)&&void 0!==t?t:0),{placements:l}=yield this.nativeAdService.fetchCmsAds(i,o,[...c,...d]);return this.predictCmsResponse=l,l}catch(e){(0,T.OO)(e,k.QyX.SuperFeedCMSAdFetchFailed,"Call to CMS Ad Service failed")}}))}lazyLoadDRBundle(e){switch(e){case"prg-ad-like":return i.e("na-like-button").then(i.bind(i,35857));case"prg-trending":return i.e("na-trending").then(i.bind(i,41915));case"prg-ad-ctav2":case"prg-ad-ctav3":return i.e("na-call-to-action").then(i.bind(i,98950));case"prg-ad-sh-v1":return i.e("nas-highlight-v1").then(i.bind(i,72555));case"prg-ad-sh-v3":case"prg-ad-sh-v4":return Promise.all([i.e("nas-highlight-v3v4").then(i.bind(i,33389)),i.e("nas-highlight-v3v4").then(i.bind(i,54353))]);case"prg-ad-combo":return Promise.all([i.e("na-decoration-combo").then(i.bind(i,72501)),i.e("na-decoration-combo").then(i.bind(i,56588)),i.e("na-decoration-combo").then(i.bind(i,1418)),i.e("na-decoration-combo").then(i.bind(i,48094))])}}getPredictedAdRequest(e){const t={placements:[]};return this.adRegionTupleListMap.forEach(((i,n)=>{const r=e?this.getCmsIndices(n):this.getSamIndices(n),o=e?!i[0]:i[0];o&&(null==r?void 0:r.length)&&this.checkAndAddPlacement(t,o,n,r)})),t}getPredictSamAdsData(){var e,t;if(this.isFirstSamAdsBatch){if((0,F.N)()){const e=this.getSamRequestFromTupleWithSectionIndex();this.predictSamResponse&&this.validateSamAdPlacementConfig(e),this.samRequest=e}if((null===(t=null===(e=this.samRequest)||void 0===e?void 0:e.placements)||void 0===t?void 0:t.length)&&(this.isFirstSamAdsBatch=!1),this.predictSamResponse){const e=this.predictSamResponse;return this.predictSamResponse=void 0,e}}}fireServedTrackingCallForPlacements(e){if(!e)return;const t=this.beaconService.sendBeaconForAdServed.bind(this.beaconService);e.map((({beaconsJson:e,bingTrackerUrls:t=[],videoViewabilityData:i,beaconsSupportHttpPOST:n})=>!e||t.length>0&&i?null:{beaconsJson:e,beaconsSupportHttpPOST:n})).filter((e=>!(!e||!e.beaconsJson))).forEach(t)}updateAdRegionTupleListMap(e){const{adRegionTupleListMap:t}=this;t.forEach(((t,i)=>{var n;t[1].push(...null!==(n=e.get(i))&&void 0!==n?n:[])}))}updateAdCache(){if(!this.isFirstSamAdsBatch)return;const e=new Map;if(this.adRegionTupleListMap.forEach(((t,i)=>{const n=this.getPlacementsBySectionIndex(t[1],i);e.set(i,n)})),((e,t)=>{var i,n;const o=JSON.stringify(e,a);o!==(0,r.$o)().getItem(t)&&(null===(i=(0,r.$o)())||void 0===i||i.setItem(t,o),null===(n=(0,r.$o)())||void 0===n||n.setItem(`${t}_date`,JSON.stringify(new Date)))})(e,o),this.config.enableUASAdPlacementPrediction&&(!(0,F.N)()||this.hasSSRAdData)){const t=Object.fromEntries(e);if((0,x.Z)(t,this.cachedAdIndicesFromUAS))return;this.adsUserActionService&&this.adsUserActionService.setPredictedAdPlacements(t)}}isAdsMapEmpty(){let e=!0;return this.adRegionTupleListMap.forEach((t=>{t[2].length>0&&(e=!1)})),e}getRegionImg(e){var t,i,n,r,o,s,a,c,d,l,u,p;switch(e){case"resriver":return null===(i=null===(t=this.config.adTemplateConfig)||void 0===t?void 0:t.imageSizeConfig)||void 0===i?void 0:i.river;case"resinfopane":return null===(r=null===(n=this.config.adTemplateConfig)||void 0===n?void 0:n.imageSizeConfig)||void 0===r?void 0:r.infopane;case"river":return null===(s=null===(o=this.config.adTemplateConfig)||void 0===o?void 0:o.imageSizeConfig)||void 0===s?void 0:s.river;case"infopane":return null===(c=null===(a=this.config.adTemplateConfig)||void 0===a?void 0:a.imageSizeConfig)||void 0===c?void 0:c.infopane;case"rightrail":return null===(l=null===(d=this.config.adTemplateConfig)||void 0===d?void 0:d.imageSizeConfig)||void 0===l?void 0:l.river;case"infopane-tab":return null===(p=null===(u=this.config.adTemplateConfig)||void 0===u?void 0:u.imageSizeConfig)||void 0===p?void 0:p.infopaneTab;default:return}}refresh(){this.initNativeAdConfig(this.config),this.initAdRegionTupleListMap(),this.cardsIndexList=[],this.nativeAdIndexList=[],this.cmsAdIndexList=[]}updateCardsIndexPersection(e){e.map((e=>{var t;const i=this.cardsIndexList[this.cardsIndexList.length-1]||0;this.cardsIndexList.push(i+((null===(t=e.cards)||void 0===t?void 0:t.length)||0))}))}updateRelativeAdIndexPersection(e){e.forEach((e=>{var t,i;const n=this.nativeAdIndexList[this.nativeAdIndexList.length-1]||0,r=(null===(t=e.cards)||void 0===t?void 0:t.filter((e=>"nativead"===e.type)).length)||0;this.nativeAdIndexList.push(n+r);const o=this.cmsAdIndexList[this.cmsAdIndexList.length-1]||0,s=(null===(i=e.cards)||void 0===i?void 0:i.filter((e=>"cmsad"===e.type)).length)||0;this.cmsAdIndexList.push(o+s)}))}updateAndFilterSamAdResponse(e,t){const{placements:i}=this.nativeAdService.updateSamAdResponse(e,t,this.getIsPrerenderAds());return i.filter((e=>e.items.length))}getAdIndices(e){let t;if(this.config.enableUASAdPlacementPrediction&&this.cachedAdIndicesFromUAS&&(!(0,F.N)()||this.hasSSRAdData)&&(t=new Map(Object.entries(this.cachedAdIndicesFromUAS))),(!t||!t.size)&&this.config.adPlacementsConfig&&(!(0,F.N)()||this.hasSSRAdData)){t=new Map;for(const[e,i]of Object.entries(this.config.adPlacementsConfig))t.set(e.replace("_","-"),i)}return t&&t.size||!(0,F.N)()||(t=(e=>{var t;const i=null===(t=(0,r.$o)())||void 0===t?void 0:t.getItem(e);return s(i)})(o)),(null==t?void 0:t.get(e))||[]}getSamIndices(e){return this.config.avoidPredictInfopaneAd&&e.toLowerCase().indexOf("infopane")>-1?[]:this.config.shouldUseAdCache?this.getAdIndices(e):[]}getPredictedSamIndices(e){var t,i,n;return(null===(n=null===(i=null===(t=this.samRequest)||void 0===t?void 0:t.placements)||void 0===i?void 0:i.find((t=>t.region===e)))||void 0===n?void 0:n.indices)||[]}getCmsIndices(e){return this.config.avoidPredictInfopaneAd&&e.toLowerCase().indexOf("resinfopane")>-1?[]:this.config.shouldUseAdCache?this.getAdIndices(e):[]}getPredictedCmsIndices(e){var t,i,n;return(null===(n=null===(i=null===(t=this.cmsRequest)||void 0===t?void 0:t.placements)||void 0===i?void 0:i.find((t=>t.region===e)))||void 0===n?void 0:n.indices)||[]}validateSamAdPlacementConfig(e){var t,i,n,r;const o=[],s=new Map;for(const t of e.placements){const e=t.region,i=this.getPredictedSamIndices(e);if(!i||!i.length){o.push(t);continue}const n=i.filter((e=>t.indices.indexOf(e)>=0)),r=t.indices.filter((e=>n.indexOf(e)<0));t.indices=r,r.length&&o.push(t),s.set(e,n)}let a=o;if(o.length&&this.config.avoidPredictInfopaneAd&&(a=a.filter((e=>e.region.toLowerCase().indexOf("infopane")<0))),a.length?(u(JSON.stringify(null===(t=this.samRequest)||void 0===t?void 0:t.placements),JSON.stringify(e.placements),k.QyX.SuperFeedSamAdsMismatch),d.M0.addOrUpdateTmplProperty("edge_ntp.adMismatched","1")):d.M0.addOrUpdateTmplProperty("edge_ntp.adMatched","1"),e.placements=o,null===(r=null===(n=null===(i=this.predictSamResponse)||void 0===i?void 0:i.samResponse)||void 0===n?void 0:n.placements)||void 0===r?void 0:r.length){const e=[];if(this.predictSamResponse.samResponse.placements.forEach((t=>{const i=t.region&&s.get(t.region);t.index&&i&&i.indexOf(t.index)>-1&&e.push(t)})),this.predictSamResponse.samResponse.placements=e,this.hasSSRAdData){const e=[];this.predictSamResponse.placeHolderResponse.placements.forEach((t=>{const i=t.region&&s.get(t.region);t.regionIndex&&i&&i.indexOf(t.regionIndex)>-1&&e.push(t)})),this.predictSamResponse.placeHolderResponse.placements=e}}}validateCmsAdPlacementConfig(e){var t,i;const n=[],r=new Map;for(const t of e.placements){const e=t.region,i=this.getPredictedCmsIndices(e);if(!i||!i.length){n.push(t);continue}const o=i.filter((e=>t.indices.indexOf(e)>=0)),s=t.indices.filter((e=>o.indexOf(e)<0));t.indices=s,s.length&&n.push(t),r.set(e,o)}let o=n;if(n.length&&this.config.avoidPredictInfopaneAd&&(o=o.filter((e=>e.region.toLowerCase().indexOf("infopane")<0))),o.length&&u(JSON.stringify(null===(t=this.cmsRequest)||void 0===t?void 0:t.placements),JSON.stringify(e),k.QyX.SuperFeedCmsAdsMismatch),e.placements=n,this.predictCmsResponse&&this.predictCmsResponse.length){const e=[];null===(i=this.predictCmsResponse)||void 0===i||i.forEach((t=>{const i=r.get(t.region);i&&i.indexOf(t.regionIndex)>-1&&e.push(t)})),this.predictCmsResponse=e}}getNativeAdId(e,t){return`nativead-${e}-${t}`}getIsPrerenderAds(){const e=this.config.enablePrerenderAds&&(0,R.TR)()&&(0,F.N)(),t=this.config.enableSponsoredCollectionSSR&&!(0,F.N)();return!(!e&&!t)}createMetaTags(e){return(0,n.mG)(this,void 0,void 0,(function*(){return new Promise((t=>{e.forEach((e=>{var t;if("infopane"==e.region||"river"==e.region){const i=e.items&&(null===(t=e.items[0])||void 0===t?void 0:t.adSelectionReason);if(i){const t=this.getNativeAdId(e.region,e.regionIndex);let n;switch(e.region){case"infopane":n=`tab_panel_${t}`;break;case"river":n=`native_ad_${t}`;break;default:return}try{if(!(0,F.N)())return;const e=JSON.parse(i).ads[0].id,t=i.replace(e,n),r=document.head,o=document.createElement("meta");o.name="AdsMetadata",o.content=t,r.appendChild(o)}catch(e){return void(0,T.OO)(e,k.QyX.SuperFeedWhyThisAdFailed,"Failed to add WhyThisAd meta tag to head")}}}})),t()}))}))}}B.isFilteredRegion={river:!0,resriver:!0};const j=(e,t,i=!1)=>{const n="NATIVE_AD_HELPER_INSTANCE";let r=N.Gq.get(n);return r&&!i||(r=new B(e,t),N.Gq.set(n,r)),r}},54291:function(e,t,i){"use strict";i.d(t,{X:function(){return I}});var n=i(33940),r=i(22704),o=i(26415),s=i(33954),a=i(25568),c=i(82890),d=i(99704),l=i(77316);var u=i(84169),p=i(47903),g=i(32050),h=i(9375),m=i(2040),f=i(31780),v=i(87298),y=i(82037),b=JSON.parse('{"nextPageUrl":"","sections":[{"region":"river","subSections":[{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"followCarousel","isLocalContent":false,"galleryItemCount":0,"subCards":[],"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false,"isShowSelectMoreMessage":false}]},{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"InterestManager","isLocalContent":false,"galleryItemCount":0,"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false}]}]}],"isPartial":false}'),S=i(65135),C=i(51125),w=i(33379),T=i(27003),k=i(75384);const A=(0,r.Ou)();class I{constructor(){this.shouldRetryInOtherDomain=!1}fetchFromWpoService(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){let i=yield this.fetchFromService(e,t);return i.appError&&!i.sections&&this.shouldRetryInOtherDomain&&(e.domainOverride=a.hM,e.requestPathOverride=a.hZ,i=yield this.fetchFromService(e,t,!0)),i}))}fetchFromService(e,t,i=!1){var r,a,I,P,E,O,M;return(0,n.mG)(this,void 0,void 0,(function*(){let n;const x=(0,k.TR)(),D=u.jG.ShouldUseFdheadQsp?(null===(a=null===(r=u.jG.CurrentRequestTargetScope)||void 0===r?void 0:r.pageExperiments)||void 0===a?void 0:a.join(","))||"":void 0,R=e.useNextPageUrl&&e.paginationTimeoutMs?e.paginationTimeoutMs:e.timeoutMs,L=Object.assign(Object.assign({},e),{fdhead:D,nextPageUrl:e.useNextPageUrl?e.nextPageUrl:"",requestType:e.requestType?d.xd[e.requestType]:d.xd.wpoService,refreshType:x?d.Rx.Bgtask:void 0,timeoutMs:e.query&&e.customFeedTimeoutMs?e.customFeedTimeoutMs:R||2e3,disableContent:e.disableContent,isRetry:i}),F=yield l.q.requestInit(L),N=yield l.q.buildServiceRequestURL(L);this.requestQueryParams=new p.h(N.search),N.search=this.requestQueryParams.toString(),(0,w.N)()&&(A[c.p.wpoCallStart]=Math.round(window.performance.now()));const{nextPageUrl:B,pageScenario:j}=e||{};let $,U;try{let r=(0,w.N)()?1e4:800;(0,w.N)()&&(null==e?void 0:e.overrideCSRTimeoutInMs)?r=null==e?void 0:e.overrideCSRTimeoutInMs:!(0,w.N)()&&(null==e?void 0:e.overrideSSRTimeoutInMs)&&(r=null==e?void 0:e.overrideSSRTimeoutInMs),t&&t();const a=!(e.useNextPageUrl&&B),c=e.isMobile&&e.mobileUrl||N.href,d=5e3;U=(()=>{let e=0;const t=a?o.QyX.SuperFeedResponseReturnSlowAtFirstPage:o.QyX.SuperFeedResponseReturnSlowAtSecondPage;return setInterval((()=>{e+=1,S.M0.sendAppErrorEvent(Object.assign(Object.assign({},t),{pb:Object.assign(Object.assign({},t.pb),{url:decodeURIComponent(c),isFirstPage:a,activityId:u.jG.ActivityId,isPrerender:x}),message:`Request didn't finish in ${d*e}ms`}))}),d)})();const l=yield(0,v.w)((()=>(0,w.N)()?(0,v.O)(decodeURIComponent(c),F,r,e.skipRetry):(0,g.Sm)(decodeURIComponent(c),r,F)),"SuperFeedDataProvider.fetchFromWpoService",((0,w.N)()?null==e?void 0:e.overrideCSRTimeoutInMs:null==e?void 0:e.overrideSSRTimeoutInMs)?r:0,e.skipRetry);U&&(clearInterval(U),U=null),$=null===(I=null==l?void 0:l.headers)||void 0===I?void 0:I.get("ddd-debugid"),T.Gq.set("OneServiceResponseDebugId",$);const{status:p}=l||{};if("following"===e.feedName&&(204===p||404===p)&&a){const e=b;return 204===p&&(null===(O=null===(E=null===(P=null==e?void 0:e.sections)||void 0===P?void 0:P[0].subSections)||void 0===E?void 0:E[0].cards)||void 0===O?void 0:O[0])&&(e.sections[0].subSections[0].cards[0].isShowSelectMoreMessage=!0),e}if(!l||!l.ok){const{statusText:e}=l||{},t=Object.assign(Object.assign({},o.QyX.SuperFeedPageDataProviderNullOrErroneousResponse),{message:l?"OneService returned error response":"OneService response was null",pb:Object.assign(Object.assign({},o.QyX.SuperFeedPageDataProviderNullOrErroneousResponse.pb),{url:N.href,status:p,statusText:e,requestHeaders:JSON.stringify((0,h.GI)(F.headers)),responseHeaders:this.getResponseHeaders(l),isPrerender:x,debugId:$,isRetriedRequest:i})});return S.M0.sendAppErrorEvent(t),{appError:t,debugId:$}}if(!e.disableContent&&204===l.status){return{sections:[],appError:this.logAndReturnNoContentError(N,F,l.status,x,l),debugId:$}}let y,k;if(l.headers){l.headers.get("X-Statics-Fallback")&&(n=!0,S.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.QyX.SuperFeedPageDataProviderStaticResponse),{pb:Object.assign(Object.assign({},o.QyX.SuperFeedPageDataProviderStaticResponse.pb),{isPrerender:x,responseHeaders:this.getResponseHeaders(l),url:N.href,debugId:$,isRetriedRequest:i}),message:"Fell back to static content on the feeds call"})));const e=l.headers.get("ddd-tmpl");e&&S.M0.addOrUpdateTmplString(e);const t=l.headers.get(m.rD.traceId);"edgeChromium"==u.jG.AppType&&(y=(0,f.et)(t,!B),(0,w.N)()&&(0,f.mY)(t,$)),"windows"!=u.jG.AppType&&"superApp"!=u.jG.AppType||(y=(0,f.et)(t,!B),(0,C.Dz)($,!B)),k=l.headers.get(m.rD.userType)}const M=(0,w.N)()&&performance.now(),D=yield l.json();if(M&&A&&(A.FeedResponseJsonReadTime=Math.round(performance.now()-M)),D&&D.swCacheEnabled){S.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.UOk.SWCacheTriggered),{pb:Object.assign(Object.assign({},o.UOk.SWCacheTriggered.pb),{url:decodeURIComponent(N.href),isFirstPage:a,activityId:u.jG.ActivityId,isPrerender:x,debugId:$,isRetriedRequest:i}),message:"Service Worker Cached Data Triggered"}));let e=null,t="";switch(null==D?void 0:D.cacheTriggeredReason){case o.UOk.SWTriggeredDueToFetchError.id:e=o.UOk.SWTriggeredDueToFetchError,t="Service Worker Triggered due to fetch error: "+D.cacheTriggeredErrorMessage;break;case o.UOk.SWTriggeredDueToWpoServiceError.id:e=o.UOk.SWTriggeredDueToWpoServiceError,t="Service Worker Triggered due to wpo service error";break;case o.UOk.SWTriggeredDueToWpoReponseNoContent.id:e=o.UOk.SWTriggeredDueToWpoReponseNoContent,t="Service Worker Triggered due to Status 204 no content";break;case o.UOk.SWTriggeredDueToStaticContentLoaded.id:e=o.UOk.SWTriggeredDueToStaticContentLoaded,t="Service Worker Triggered due to static content loaded";break;case o.UOk.SWTriggeredDueToEmptySection.id:e=o.UOk.SWTriggeredDueToEmptySection,t="Service Worker Triggered due to wpo service returns empty section";break;case o.UOk.SWTriggeredDueToEmptySectionForStaticFallBack.id:e=o.UOk.SWTriggeredDueToEmptySectionForStaticFallBack,t="Service Worker Triggered due to static fallback returns empty section"}e&&S.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{pb:Object.assign(Object.assign({},e.pb),{url:decodeURIComponent(N.href),isFirstPage:a,activityId:u.jG.ActivityId,isPrerender:x,debugId:$,isRetriedRequest:i}),message:t}))}if(D&&D.serviceContext&&D.serviceContext.preRenderDisabled)return D.serviceContext.debugId&&S.M0.addOrUpdateCustomProperty("PartialId",D.serviceContext.debugId),{isPartial:D.isPartial,serviceContext:D.serviceContext};if("winfullpage"===j&&D&&D.sections&&D.sections.length>0){const e=D.sections;(e[0].subSections&&e[0].subSections.length>0?e[0].subSections:e).some((e=>!e.layoutTemplate))&&S.M0.sendAppErrorEvent(Object.assign(Object.assign({},o.QyX.SuperFeedSectionLayoutTemplateMissing),{pb:Object.assign(Object.assign({},o.QyX.SuperFeedSectionLayoutTemplateMissing.pb),{url:decodeURIComponent(N.href),dataTemplate:D.sections.map((e=>e.dataTemplate)).join(","),layoutTemplate:D.sections.map((e=>e.layoutTemplate)).join(",")}),message:"LayoutTemplate field missing for sections on the feeds call"}))}let R;D&&(e.disableContent||D.sections&&D.sections.length)||s.k.log("River has reached end of content stream.");const L=D&&D.metadata;if("byregion"!=e.wpoSchema){const e=function(e){return e&&e.sections&&!e.sections[0].region?{nextPageUrl:e.nextPageUrl,sections:[{region:"river",subSections:e.sections}],adsMetadata:e.adsMetadata,pageContext:e.pageContext}:e}(D);return Object.assign(Object.assign({},e),{isStatic:n,appError:R,traceIdIndex:y,metadata:L,userType:k,debugId:$})}return Object.assign(Object.assign({},D),{isStatic:n,appError:R,traceIdIndex:y,metadata:L,userType:k,debugId:$})}catch(t){U&&(clearInterval(U),U=null);let n;const r=!B;let s;if(["Service Request Timed out","Fetch for https://"].some((e=>{var i;return null===(i=null==t?void 0:t.message)||void 0===i?void 0:i.includes(e)}))){const e=x?o.QyX.SuperFeedDataProviderPrerenderTimeout:o.QyX.SuperFeedDataProviderTimeout;n=r?e:o.QyX.SuperFeedDataProviderNonFirstPageTimeout,s=!0,n===o.QyX.SuperFeedDataProviderTimeout&&this.shouldRetryInOtherDomain&&!i&&(n=o.QyX.SuperFeedDataProviderTimeoutBeforeRetry)}else n=o.QyX.SuperFeedPageDataProviderClientNetworkError;const a=(0,y.fK)();this.shouldRetryInOtherDomain=r&&!e.domainOverride&&!a;const c=Object.assign(Object.assign({},n),{message:"Error while fetching OneService response",pb:Object.assign(Object.assign({},n.pb),{url:N.href,activityId:u.jG.ActivityId,requestHeaders:JSON.stringify((0,h.GI)(F.headers)),customMessage:`${t}`,isPrerender:x,debugId:$,isRetry:this.shouldRetryInOtherDomain,domainOverride:null!==(M=e.domainOverride)&&void 0!==M?M:"",isRetriedRequest:i,isRetryBackupDomainFlight:a})});return S.M0.sendAppErrorEvent(c),{appError:c,userEndError:s,debugId:$}}}))}logAndReturnNoContentError(e,t,i,n,r){const s=Object.assign(Object.assign({},o.QyX.SuperFeedPageDataProviderNoContentResponse),{message:"Service returned no content.",pb:Object.assign(Object.assign({},o.QyX.SuperFeedPageDataProviderNoContentResponse.pb),{activityId:u.jG.ActivityId,requestHeaders:JSON.stringify((0,h.GI)(t.headers)),responseHeaders:this.getResponseHeaders(r),status:i,url:e.href,isPrerender:n,debugId:r.headers&&r.headers.get("ddd-debugid")})});return S.M0.sendAppErrorEvent(s),s}getResponseHeaders(e){return e&&e.headers?JSON.stringify({"Akamai-Request-ID":e.headers.get("Akamai-Request-ID"),"Akamai-Server-IP":e.headers.get("Akamai-Server-IP"),"X-MSEdge-Ref":e.headers.get("X-MSEdge-Ref")}):""}}},96470:function(e,t,i){"use strict";i.d(t,{P:function(){return c}});var n=i(11326),r=i(8158),o=i(53076);var s=i(10209);let a=!1;function c(e,t){a||(a=!0,(0,n.x)(e)||t&&t()||requestAnimationFrame((()=>{t&&t()||e.forEach((({experienceType:e,instanceSrc:t})=>{if(e in o.z)r.n.loadExperience(e);else{const i=function(e,t="default",i=e){return{instanceId:e,configRef:{experienceType:i,instanceSrc:t||"default"}}}(e,t);(0,s.Fg)(i)}}))})))}},64950:function(e,t,i){"use strict";i.d(t,{AH:function(){return m},Og:function(){return C},Qz:function(){return I},aR:function(){return A},iK:function(){return b},m0:function(){return w},pE:function(){return k},vZ:function(){return T},yy:function(){return P},zX:function(){return S}});var n=i(33940),r=i(15213),o=i(89696),s=i(19388),a=i(22704),c=i(44772),d=i(90351),l=i(73252),u=i(75384);const p=["river","resriver","river_cms","rightrail"],g=e=>t=>{var i;const n=Object.assign(Object.assign({},t),{adLabelText:e.adLabelText,isGreyAdsLabelEnabled:e.isGreyAdsLabelEnabled,isWhiteSlug:e.isWhiteSlug,isTransparentSlug:e.isTransparentSlug,isNarrowTitleFooterGap:e.isNarrowTitleFooterGap,isTransparentAdSlugWithBorder:e.isTransparentAdSlugWithBorder,isTransparentAdSlugWithBorderV2:e.isTransparentAdSlugWithBorderV2,isTransparentAdSlugWithBorderV2NonDr:e.isTransparentAdSlugWithBorderV2NonDr,enableAdsColorBleed:e.enableAdsColorBleed,isAdSlugV4NonDr:e.isAdSlugV4NonDr});return"rightrail"===t.region&&(null===(i=e.rightrail)||void 0===i?void 0:i.useTransparentAdCard)&&(n.shouldUseWhiteGradient=!0),p.includes(t.region)?(n.isProviderInFooter=e.isProviderInFooter,n.isProviderInHeader=e.isProviderInHeader,((e,t)=>{var i;if(null===(i=t.items)||void 0===i?void 0:i.length){if(e.useArticleCardTemplate){const i=Number(t.items[0].imageWidth)||(0,d.Z)(e.adTemplateConfig,"imageSizeConfig.river.w"),n=Number(t.items[0].imageHeight)||(0,d.Z)(e.adTemplateConfig,"imageSizeConfig.river.h");return t.items[0].imageWidth=(225*i/n).toFixed().toString(),t.items[0].imageHeight="225",t.imageWidth=t.items[0].imageWidth,void(t.imageHeight=t.items[0].imageHeight)}t.items[0].imageWidth="300",t.items[0].imageHeight="156"}})(e,n),n):n},h=(e,t)=>{var i;const n=null!==(i=e[t.region])&&void 0!==i?i:[];return Object.assign(Object.assign({},e),{[t.region]:n.concat(t)})},m=(e,t)=>t.map(g(e)).reduce(h,{});let f,v=!1;let y;const b=()=>(0,n.mG)(void 0,void 0,void 0,(function*(){return y||(y=new Promise((e=>{v?e():f=()=>{e(),f=void 0}})))})),S=(e=!1)=>{window.requestAnimationFrame((()=>{setTimeout((()=>{const t=(0,o.v0)(l.Al.IsPrerender&&!e),i=(0,s.O0)(r.q.RenderReady);i>-1&&i&&(0,s.su)(r.q.AdRendered,t-i);const n=(0,s.O0)(r.q.TimeToAdResponse);n>-1&&(0,s.O_)(r.q.AdProcessed,n,t);const c=(0,s.O0)(e?r.q.TimeToServeAdBackground:r.q.TimeToServeAd);c>-1&&(0,s.su)(r.q.RespToAdCallback,c-n);const d=e=>{(0,s.O_)(r.q.TimeToRenderAd,0,e),v=!0,f&&f()};e?(0,u.lr)().then((()=>{const e=(0,a.Ou)();d(e.TTPR),(0,s.O_)(r.q.TimeToRequestAd,0,1)})):d(t)}),0)}));const t=(0,o.v0)(l.Al.IsPrerender&&!e);(0,s.su)(r.q.RenderReady,t);const i=(0,s.O0)(e?r.q.TimeToServeAdBackground:r.q.TimeToServeAd);i>-1&&(0,s.su)(r.q.AdCallbackProcessed,t-i)},C=e=>{var t,i;return 0===(null===(i=null===(t=e.placement)||void 0===t?void 0:t.items)||void 0===i?void 0:i.length)},w=e=>e.type===c.PL.Infopane,T=e=>e.type===c.PL.TabbedInfopaneCard,k=e=>e.type===c.PL.ChannelCarousel,A=e=>e.type===c.PL.NativeAd,I=e=>e.type===c.PL.CmsAd,P=e=>e.type===c.PL.Dense},92031:function(e,t,i){"use strict";i.d(t,{$S:function(){return k},$y:function(){return v},Ay:function(){return S},Gh:function(){return D},IK:function(){return E},IV:function(){return x},Kb:function(){return T},QF:function(){return n},Rc:function(){return P},U$:function(){return y},U1:function(){return N},Zs:function(){return I},eT:function(){return O},gA:function(){return A},jo:function(){return b},js:function(){return f},tV:function(){return w},uS:function(){return r},z2:function(){return M}});var n,r,o=i(33940),s=i(26415),a=i(68364),c=i(33954),d=i(53899),l=i(24888),u=i(61857),p=i(53076),g=i(65135),h=i(33379),m=i(82423);!function(e){e.pinMsnews="pinMsnews",e.tryInformationalMode="tryInformationalMode",e.tryInformationalModeDirect="tryInformationalModeDirect",e.tryInformationalModeProg="tryInformationalModeProg",e.tryPersonalizations="tryPersonalizations",e.focusOnSearchBar="focusOnSearchBar",e.tryOffice365="tryOffice365"}(n||(n={})),function(e){e.setDefaultBrowser="setDefaultBrowser"}(r||(r={}));const f=()=>{const e=new Promise((e=>{try{(0,h.N)()&&window&&window.chrome&&window.chrome.shellIntegrationPrivate&&"function"==typeof window.chrome.shellIntegrationPrivate.setDefaultBrowser?window.chrome.shellIntegrationPrivate.setDefaultBrowser((t=>{const i=null==t?void 0:t.success;i&&document.dispatchEvent(new CustomEvent("setDefaultBrowserSuccess",{})),e({actionCompleted:i,status:null==t?void 0:t.message})})):(g.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.DKZ),{message:"TargetActionLib: window.chrome.shellIntegrationPrivate.setDefaultBrowser chromium API not available"})),e({actionCompleted:!1,status:"set default browser api not available"}))}catch(t){(0,a.OO)(t,s.WQV,"TargetActionLib: Exception executing window.chrome.shellIntegrationPrivate.setDefaultBrowser chromium API to set default browser to Edge"),e({actionCompleted:!1,status:JSON.stringify(t)})}}));return()=>(0,o.mG)(void 0,void 0,void 0,(function*(){return yield e}))},v=e=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const t=l.LR[l.HV.openEdgeBrowserNewWindow];return t?yield t({text:e}):null})),y=(e,t)=>{switch(e){case n.tryInformationalMode:return T(t);case n.tryInformationalModeDirect:return A();case n.tryInformationalModeProg:return k(t);case n.tryPersonalizations:return C();case n.tryOffice365:return S()}},b=e=>{if(e===r.setDefaultBrowser)return f()},S=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){let e;const t=l.LR[l.HV.clickOffice365Button];return t&&(e=yield t({})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e})),C=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){let e;const t=l.LR[l.HV.clickPersonalizeButton];return t&&(e=yield t({})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e})),w=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){let e;const t=l.LR[l.HV.clickVoiceSearchButton];return t&&(e=yield t({})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e})),T=e=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){let t;return t=yield L(),yield(0,u.rT)(e||1e3),t=yield R(),t})),k=e=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){let t;t=yield L(),yield(0,u.rT)(e||1e3),t=yield R(),yield(0,u.rT)(e||1e3);const i=l.LR[l.HV.clickSettingsCloseButton];return i&&(t=yield i({})),t})),A=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const e={actionCompleted:!1},t=yield(0,m.oU)(p.z.ChromiumPageSettings);if(!t)return e.status="ChromiumPageSettingsConnector not found",e;const i=t.getCurrentState(),n=Object.assign(Object.assign(Object.assign({},i),{originalLayout:i.currentLayout}),d.YZ);return t.updateLayout(n),e.actionCompleted=!0,e.status="Layout mode changed to informational",document.dispatchEvent(new CustomEvent("changeToInformationalSuccess",{})),e})),I=e=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){let e;const t=l.LR[l.HV.clickWaffleButton];return t&&(e=yield t({})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e})),P=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){return F("always")})),E=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){return F("peek")})),O=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const e={actionCompleted:!1};return window.scrollTo({top:0,behavior:"smooth"}),e.actionCompleted=!0,e})),M=()=>()=>{let e={actionCompleted:!1,status:"pinPage API not available"};try{if(!((0,h.N)()&&window&&window.chrome&&window.chrome.appPinningPrivate&&window.chrome.appPinningPrivate.pinPage))return g.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.oEq),{message:"window.chrome.appPinningPrivate.pinPage not available"})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e;const t="This attests that the user has agreed to pin this website";window.chrome.appPinningPrivate.pinPage(t,"https://microsoftnews.msn.com?ocid=msnewspintb","Microsoft News"),e={actionCompleted:!0,status:"Microsoftnews pinned to taskbar"}}catch(e){g.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.oEq),{message:"Exception executing window.chrome.appPinningPrivate.pinPage chromium API to pin Microsoftnews to taskbar",pb:Object.assign(Object.assign({},s.oEq.pb),{customMessage:`Exception: ${e}`})}))}return c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e},x=e=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){try{if(!((0,h.N)()&&window&&window.chrome&&window.chrome.desktopWidgetPrivate))return g.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.NqK),{message:"window.chrome.desktopWidgetPrivate api not available"})),{actionCompleted:!1,status:"window.chrome.desktopWidgetPrivate api not available"};if(!window.chrome.desktopWidgetPrivate.launch)return g.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.WNM),{message:"window.chrome.desktopWidgetPrivate.launch api not available"})),{actionCompleted:!1,status:"window.chrome.desktopWidgetPrivate.launch api not available"};const t=(0,u.Bw)(e);return window.chrome.desktopWidgetPrivate.launch(t,"COACHMARK"),window.chrome.desktopWidgetPrivate.enableAutoStart?(window.chrome.desktopWidgetPrivate.enableAutoStart(t,"COACHMARK"),{actionCompleted:!0,status:"Launched web widget and default to windows start."}):(g.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.mNl),{message:"window.chrome.desktopWidgetPrivate.enableAutoStart api not available"})),{actionCompleted:!1,status:"window.chrome.desktopWidgetPrivate.enableAutoStart api not available"})}catch(e){return g.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.dyx),{message:"Exception launching web widget and defaulting to windows start",pb:Object.assign(Object.assign({},s.dyx.pb),{customMessage:`Error: ${JSON.stringify(e)}`})})),{actionCompleted:!1,status:"Exception executing launchAndDefaultWebWidget() CTA"}}})),D=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){try{let e;const t=l.LR[l.HV.focusOnSearchBar];return t&&(e=yield t({})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e}catch(e){return g.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.Zwk),{message:"Exception when try to focus on search bar",pb:Object.assign(Object.assign({},s.Zwk.pb),{customMessage:`Error: ${JSON.stringify(e)}`})})),{actionCompleted:!1,status:`Exception executing focusOnSearchBar() CTA. Error: ${JSON.stringify(e)}`}}}));function R(){return(0,o.mG)(this,void 0,void 0,(function*(){let e;const t=l.LR[l.HV.clickSettingsInformationalButton];return t&&(e=yield t({})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e}))}function L(){return(0,o.mG)(this,void 0,void 0,(function*(){let e;const t=l.LR[l.HV.clickSettingsButton];return t&&(e=yield t({})),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e}))}function F(e){return(0,o.mG)(this,void 0,void 0,(function*(){const t={actionCompleted:!1},i=yield(0,m.oU)(p.z.ChromiumPageSettings);if(!i)return t.status="ChromiumPageSettingsConnector not found",t;const n=i.getCurrentState();if(n.currentLayout!==d.nP.custom){const e=Object.assign(Object.assign({},n),{originalLayout:n.currentLayout,currentLayout:d.nP.custom});i.updateLayout(e)}return i.updateFeeds(e),t.actionCompleted=!0,t.status=`Feed toggle changed to ${e}`,t}))}const N=()=>()=>(0,o.mG)(void 0,void 0,void 0,(function*(){try{let e;const t=l.LR[l.HV.clickRewardsButton];return t?(e=yield t({}),c.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e):(g.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.$t),{message:"Rewards icon not found"})),{actionCompleted:!1,status:"Rewards icon not found"})}catch(e){return g.M0.sendAppErrorEvent(Object.assign(Object.assign({},s.IEE),{message:"Exception when try to click on rewards button",pb:Object.assign(Object.assign({},s.IEE.pb),{customMessage:`Error: ${JSON.stringify(e)}`})})),{actionCompleted:!1,status:`Exception executing clickRewardsButton() CTA. Error: ${JSON.stringify(e)}`}}}))},24888:function(e,t,i){"use strict";i.d(t,{LR:function(){return a},HV:function(){return s}});var n=i(61857),r=i(33940),o=i(36803);const s={clickAddTileButton:"clickAddTileButton",clickMyFeedPivotButton:"clickMyFeedPivotButton",clickOffice365Button:"clickOffice365Button",clickPersonalizeButton:"clickPersonalizeButton",clickSettingsAdvancedButton:"clickSettingsAdvancedButton",clickSettingsButton:"clickSettingsButton",clickSettingsCloseButton:"clickSettingsCloseButton",clickSettingsCustomButton:"clickSettingsCustomButton",clickSettingsFocusedButton:"clickSettingsFocusedButton",clickSettingsInformationalButton:"clickSettingsInformationalButton",clickSettingsInspirationalButton:"clickSettingsInspirationalButton",clickVoiceSearchButton:"clickVoiceSearchButton",clickWaffleButton:"clickWaffleButton",openEdgeBrowserNewWindow:"openEdgeBrowserNewWindow",focusOnSearchBar:"focusOnSearchBar",clickRewardsButton:"clickRewardsButton"},a={[s.clickAddTileButton]:()=>(0,n.xB)("AddTopSiteButton"),[s.clickMyFeedPivotButton]:()=>(0,n.xB)("MyFeedPivotButton"),[s.clickOffice365Button]:()=>(0,n.xB)("office365"),[s.clickPersonalizeButton]:()=>(0,n.xB)("PersonalizeButton"),[s.clickSettingsAdvancedButton]:()=>(0,n.xB)("SettingsAdvancedButton"),[s.clickSettingsButton]:()=>(0,n.xB)("SettingsButton"),[s.clickSettingsCloseButton]:()=>(0,n.xB)("settingsCloseButton"),[s.clickSettingsCustomButton]:()=>(0,n.xB)("SettingsCustomButton"),[s.clickSettingsFocusedButton]:()=>(0,n.xB)("SettingsFocusedButton"),[s.clickSettingsInformationalButton]:()=>(0,n.xB)("settingsInformationalButton"),[s.clickSettingsInspirationalButton]:()=>(0,n.xB)("SettingsInspirationalButton"),[s.clickVoiceSearchButton]:()=>(0,n.xB)("searchBoxVoiceButton"),[s.openEdgeBrowserNewWindow]:e=>(0,r.mG)(void 0,void 0,void 0,(function*(){return e&&e.text&&(0,o.R)(e.text)?(window.open(e.text,"_blank").focus(),{actionCompleted:!0,status:"Window opened"}):{actionCompleted:!1,status:"No url provided"}})),[s.clickWaffleButton]:()=>(0,n.xB)("waffle"),[s.focusOnSearchBar]:()=>(0,n.yC)("searchBoxInput"),[s.clickRewardsButton]:()=>(0,n.xB)("rewardsIcon")}},61857:function(e,t,i){"use strict";i.d(t,{Bw:function(){return p},rT:function(){return l},xB:function(){return c},yC:function(){return d},zq:function(){return u}});var n=i(33940),r=i(36803),o=i(53899),s=i(9533);const a=e=>(0,r.R)(e)?(0,s.b_)(e):null,c=e=>{const t=a(e);if(!t)return{actionCompleted:!1,status:`TargetId [${e}] was not found.`};const i=(e=>{const t=e&&e.click;return!(!t||"function"!=typeof t||(e.click.call(e),0))})(t);return{actionCompleted:i,status:`Click status: TargetId [${e}] == ${i}`}},d=e=>{const t=a(e);if(!t)return{actionCompleted:!1,status:`TargetId [${e}] was not found.`};const i=(e=>{const t=e&&e.focus;return!(!t||"function"!=typeof t||(e.focus.call(e),0))})(t);return{actionCompleted:i,status:`Focus status: TargetId [${e}] == ${i}`}},l=e=>(0,n.mG)(void 0,void 0,void 0,(function*(){const t=new Promise((t=>{setTimeout(t,e)}));yield t})),u=()=>{const e={resolve:null,waiting:null};return e.waiting=new Promise((t=>{e.resolve=t})),e},p=e=>{switch(e){case o.nP.custom:return"NTP_CUSTOM";case o.nP.focused:return"NTP_FOCUSED";case o.nP.informational:return"NTP_INFORMATIONAL";case o.nP.inspirational:return"NTP_INSPIRATIONAL";default:return"NTP_UNKNOWN"}}},75559:function(e,t,i){"use strict";i.d(t,{NS:function(){return r},ob:function(){return a},qP:function(){return n},tM:function(){return o},tW:function(){return s}});const n="data-t";var r;!function(e){e.Auto="auto",e.AutoScroll="autoScroll",e.Load="load",e.OutOfFocus="outoffocus",e.Partial="partial",e.Resize="resize",e.Scroll="scroll",e.Swipe="swipe",e.Tap="tap",e.View="view"}(r||(r={}));const o="TelemetryPageViewNotificationEvent",s="AppErrorNotificationEvent",a="IDXId"},38156:function(e,t,i){"use strict";i.d(t,{Aw:function(){return o},c9:function(){return n},hP:function(){return a},uH:function(){return r},wu:function(){return s}});const n={Undefined:0,Header:1,Footer:2,TopNavBar:3,NavBar:4,DropDown:5,Section:6,Carousel:7,Module:8,SearchBox:9,InputBox:10,ActionButton:11,Interaction:12,Headline:13,Entity:15,Topic:29,Provider:30,NewStories:46,AutoSuggest:47,Tile:49,TrendingNews:50,AllCoverage:51,Report:52,MsccCookieComplianceBanner:54,CookieWallCookieComplianceBanner:57,FRE:60,VideoPlayer:61,ContentCard:62,SubmitForm:63,TrafficCard:64,WeatherCard:65,TravelDestinationCard:66,FitnessWorkoutVideo:67,BingHealthFitnessCard:68,FamilyCard:69,FitnessCard:70,HealthQnACard:71,HealthTipCard:72,HealthFitnessCarousel:73,CovidCard:74,Audio:75,ShoppingAd:76,ContentGroup:77,AicreationCard:78,Game:79},r={Undefined:0,StructuredData:1,AppStore:2,CmsPromotions:3,MicrosoftWebStore:4,XboxStore:5,OfficeStore:6,PartnerLinks:7,SponsoredContent:8,ExternalLink:10,SearchPromo:11,Feed:12,Article:13,Gallery:14,Video:15,Audio:16,Settings:17,DisplayAd:18,OfficeDocument:19,App:20,SearchResult:21,VideoAd:22,Map:23,Comment:24,Profile:25,Coachmark:26,TrendingSearch:27,AutoSuggestSearch:28,SearchHistory:29,TextSearch:30,TopSites:31,SearchLink:32,ImageSearch:33,VoiceSearch:34,Toast:35,Greeting:36,Image:37,Banner:38,Waffle:39,Notification:40,QnaTopic:41,QnaContent:42,Publisher:43,Topic:44,LayoutToggle:45,WebContent:46,FinanceTicker:47,CashbackOffer:48,AiCharacter:49,FoodItem:50,FitnessChallenge:51,Overlay:52,Inspiration:53,DailyDiscovery:54},o={Click:"click",Hover:"mouseenter",MouseLeave:"mouseleave",Submit:"submit",View:"view",RightClick:"rightclick",Wheel:"wheel",KeyPress:"keypress",HorizontalSwipe:"hswipe",MiddleClick:"middleclick",VerticalSwipe:"vswipe",Launch:"launch"},s={Undefined:0,Navigate:1,ContextMenu:2,Pin:3,Unpin:4,Rearrange:5,Remove:6,Add:7,Open:8,View:9,Follow:10,Unfollow:11,More:12,Close:13,Share:14,Like:15,Dislike:16,Unlike:17,Undislike:18,Mute:19,Unmute:20,Cancel:21,Launch:22,Install:23,Manage:24,Show:25,MuteCancel:26,Save:27,Hide:28,Unhide:29,Customize:30,Suspend:31,Clear:32,SignIn:33,SignOut:34,UndoSave:35,TurnOn:36,TurnOff:37,Forward:38,Response:39,Report:40,ZoomIn:41,ZoomOut:42,Comment:43,Sort:44,Love:45,Surprised:46,Thinking:47,Sad:48,Angry:49,TextSearch:50,ImageSearch:51,UndoRemove:52,Rename:53,SearchLink:54,VoiceSearch:55,Complete:56,Play:57,Pause:58,Seek:59,Volume:60,ClosedCaptions:61,Fullscreen:62,Restore:63,Replay:64,Copy:65,Reactlike:66,UnReactlike:67,UnLove:68,UnSurprised:69,UnThinking:70,UnSad:71,UnAngry:72,ReportAd:73,Refresh:74,Paginate:75,Click:76,Hover:77,SelectProduct:78,Signup:79,CompleteOrder:80,Model3DInteraction:81,PushNotificationReceive:82,PushNotificationShow:83,PushNotificationClick:84,PushNotificationHmsClick:85,Expand:86,Collapse:87,NoSearchQuerySubmit:88,Feedback:89,QualityChange:90,ProtocolLaunch:91},a={Empty:0,SearchBox:1,TopSites:2,Suggested:4,ContentFeed:8,WinFRE:16,BingImage:32,ContentBelowTheFold:64,CustomModeOption:128,GreetingEnabled:256,HeadingsOnly:512,StripeLayout:1024,Peek:2048}},65135:function(e,t,i){"use strict";let n;i.d(t,{M0:function(){return s},dK:function(){return o},uZ:function(){return a}});const r=new Promise((e=>{n=e}));let o=()=>r,s=null;function a(e,t=n){s=e,t()}},75816:function(e,t,i){"use strict";var n;i.d(t,{G:function(){return n}}),function(e){e[e.All=0]="All",e[e.Otf=1]="Otf",e[e.OneDS=2]="OneDS",e[e.CTag=3]="CTag",e[e.Comscore=4]="Comscore",e[e.Debug=5]="Debug",e[e.SuperApp=6]="SuperApp"}(n||(n={}))},82357:function(e,t,i){"use strict";i.d(t,{P:function(){return r}});var n=i(98429);class r{createPageViewPayload(e){if(!e)return;const t=e&&e.page,i=t&&t.content,r=e&&e.user,o={rnd:(0,n.Xn)(),udc:!0};return t&&(o["pg.n"]=t.name,o["pg.t"]=t.type,o["pg.c"]=t.config,o["pg.p"]=t.product,o.rf=t.referral,o.tp=t.url,o.cvs=t.canvas,t.consentChanged&&(o.ctsa=t.consentChanged)),i&&(o.di=i.domainId,o["st.dpt"]=i.category,o["st.sdpt"]=i.subcategory,o.subcvs=i.vertical),e&&(o.lng=e.locale&&e.locale.mkt,e.request&&(o.rid=e.request.requestId,o.activityId=e.request.activityId),e.browser&&(o["d.imd"]=e.browser.isMobile,o.scr=e.browser.screenSize,o.anoncknm=e.browser.anoncknm)),r&&(o.issso=r.isSso,o.aadState=r.aadState),o}}},93048:function(e,t,i){"use strict";i.d(t,{O:function(){return r}});var n=i(98429);class r{createPageViewPayload(e){if(!e)return;let t=e&&e.page&&e.page.url;try{const i=new URL(t),n=e&&e.page&&e.page.config;(8&n||2048&n)&&(i.searchParams.set("content","1"),t=i.href),e.locale&&e.locale.mkt&&(i.searchParams.set("mkt",e.locale.mkt),t=i.href)}catch(e){}return{rn:(0,n.Xn)(),c1:2,c2:3000001,cs_ucfr:1,c7:t,c8:e&&e.page&&e.page.content&&e.page.content.title,c9:e&&e.page&&e.page.referral}}}},7282:function(e,t,i){"use strict";i.d(t,{k:function(){return l}});var n=i(75559),r=i(38156),o=i(65004),s=i(98429),a=i(65969),c=i(24410),d=i(13578);class l{constructor(e=!1){this.enableBatchingForAllEvents=!1,this.enableBatchingEventList={},!0!==e?Array.isArray(e)&&e.forEach((e=>this.enableBatchingEventList[e]=!0)):this.enableBatchingForAllEvents=!0}createPageViewPayload(e){if(e){return this.createEvent("PageView",Object.assign({},e),o.zU.RealTime)}}createContentViewPayload(e,t,{contentViewType:i,isMeaningfulScroll:r}){if(!t)return;const a=[];e.forEach((e=>{a.push(this.mapTelemetryObject(e))}));let c;(0,s.d5)()&&(c={content:{docHeight:(0,s.d5)()}});const l=Object.assign(Object.assign(Object.assign({},t),c),{compressedObject:a,contentViewType:i});if(i===n.NS.Scroll&&(l.isMeaningfulScroll=r),!(0,d.Z)(a)){return this.createEvent("ContentView",l,o.zU.RealTime)}}createActionPayload(e,t,i,n){if((0,d.Z)(e)||!t)return;let s;i===r.Aw.RightClick?s="rightclick":t&&t.browser&&!0===t.browser.isMobile?s="tap":i===r.Aw.Click&&(s="click");const a=e.content&&e.content.type,l=e.type||(0,c.Y)(a,n);0!==l&&(e.type=l),delete e.action,delete e.behavior,delete e.overrideId,delete e.overrideDestinationUrl,delete e.overrideEmailIdScrubbing;return this.createEvent("UserAction",Object.assign(Object.assign({actionType:i,behavior:n,object:e},t),{gesture:s}),o.zU.RealTime)}createEventPayload(e,t,i){if(!i)return;return this.createEvent(e,Object.assign(Object.assign({},i),t),o.zU.RealTime)}createCustomEventPayload(e,t,i){if(!i&&"AppError"!==e||(0,d.Z)(t))return;return this.createEvent(e,Object.assign(Object.assign({},i),{extSchema:t}),o.zU.RealTime)}mapTelemetryObject(e){r.c9.ContentCard;let t;const i=e&&e.content&&e.content.type;(i||e.behavior)&&(t=(0,c.Y)(i,e.behavior));const n={n:e&&e.name,y:e&&e.type||t,l:e&&e.content&&e.content.id,h:e&&e.content&&e.content.headlineIdx,v:e&&e.content&&e.content.vertical,tp:e&&e.content&&e.content.topic,c:e&&e.content&&e.content.category,s:e&&e.content&&e.content.source,f:e&&e.feed&&e.feed.id,ct:e&&e.content&&e.content.type,i:e&&e.placement&&e.placement.id,p:e&&e.placement&&e.placement.parentId,o:e&&e.placement&&e.placement.ordinal,aud:e&&e.content&&e.content.audienceMode,isLocal:e&&e.content&&e.content.isLocal,subscriptionType:e&&e.content&&e.content.subscriptionType,providerType:e&&e.content&&e.content.providerType,zone:e&&e.zone,isMonetized:e&&e.isMonetized};return e.ext&&(n.ext=e.ext),n}createEvent(e,t,i){let n=0;return!s.kP||this.enableBatchingForAllEvents||this.enableBatchingEventList[e]||(n=2),{name:a.id[e],data:t,baseType:a.id.Base,latency:i,sync:n}}}},28253:function(e,t,i){"use strict";i.d(t,{M:function(){return o}});const n=100;class r{constructor(){this.startOrContinue=e=>{if(this.startTime)return;this.startTime=e&&e.timeStamp||performance.now(),this.frameTimestamps=[];const t=e=>{this.frameTimestamps.push(e),this.nextFrameRequest=requestAnimationFrame(t)};this.nextFrameRequest=requestAnimationFrame(t),this.maxDurationTimer=setTimeout((()=>this.autoStop()),5e3);const i=()=>{"hidden"===document.visibilityState&&this.autoStop(),document.removeEventListener("visibilitychange",i)};document.addEventListener("visibilitychange",i)},this.stop=e=>{if(e&&this.autoStopCalculationCallback)return this.autoStopCalculationCallback;if(null==this.startTime)return()=>{};cancelAnimationFrame(this.nextFrameRequest),this.nextFrameRequest=void 0,clearTimeout(this.maxDurationTimer);const t=this.startTime;if(!e&&(this.startTime=void 0,this.autoStopCalculationCallback)){const e=this.autoStopCalculationCallback;return this.autoStopCalculationCallback=void 0,e}const i=Math.min(performance.now(),t+5e3),r=this.frameTimestamps;return()=>function(e,t,i){if(t-e<n)return;let r=0,o=0;for(let s=e,a=s+n,c=0,d=0;a<=t;s+=n,a+=n,c=0){for(;d<i.length&&i[d]<a;)d++,c++;c>=2&&o++,r++}return o/r}(t,i,r)},this.autoStop=()=>this.autoStopCalculationCallback=this.stop(!0)}}const o=()=>new r},71786:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var n=i(26779);class r{constructor(){this.endOfFeedTime=0,this.measureEndOfFeedTime=(0,n.P)((e=>{const t=e&&e.timeStamp||performance.now();if(document.body.scrollHeight-window.innerHeight-window.scrollY<=20)this.endOfFeedBlockStartTime||(this.endOfFeedBlockStartTime=t);else if(this.endOfFeedBlockStartTime){const e=t-this.endOfFeedBlockStartTime;this.endOfFeedTime+=e,this.endOfFeedBlockStartTime=void 0}}),5),this.startOrContinue=e=>{this.isTracking||(this.isTracking=!0,this.measureEndOfFeedTime(e),window.addEventListener("scroll",this.measureEndOfFeedTime),this.resizeObserver||(this.resizeObserver=new ResizeObserver((()=>this.measureEndOfFeedTime()))),this.resizeObserver.observe(document.body))},this.stop=()=>{if(!this.isTracking)return;this.isTracking=!1,window.removeEventListener("scroll",this.measureEndOfFeedTime),this.resizeObserver.unobserve(document.body),this.endOfFeedBlockStartTime&&(this.endOfFeedTime+=performance.now()-this.endOfFeedBlockStartTime,this.endOfFeedBlockStartTime=void 0);const e=this.endOfFeedTime<0?void 0:Math.min(this.endOfFeedTime,15e3);return this.endOfFeedTime=0,e}}}const o=()=>"undefined"==typeof ResizeObserver?void 0:new r},98146:function(e,t,i){"use strict";i.d(t,{v:function(){return s}});var n=i(90351),r=i(25514);const o={n:"name",t:"type",a:"action",b:"behavior",customHandled:"customHandled",d:"overrideDestinationUrl",oe:"overrideEmailIdScrubbing",z:"zone",ism:"isMonetized",isci:"isCI","c.hi":"content.headlineIdx","c.auth":"content.author","c.i":"content.id","c.l":"content.isLocal","c.s":"content.source","c.p":"content.parentId","c.t":"content.type","c.tp":"content.topic","c.v":"content.vertical","c.c":"content.category","c.sc":"content.subcategory","c.pn":"content.partnerName","c.pi":"content.partnerId","c.b":"content.brand","c.bi":"content.brandId","c.st":"content.subscriptionType","c.pl.i":"content.placement.id","c.pl.p":"content.placement.parentId","c.pl.o":"content.placement.ordinal","c.pl.l":"content.placement.lineage","c.pl.lo":"content.placement.lineageOrdinal","c.aud":"content.audienceMode","c.pv":"content.providerType","f.i":"feed.id","f.n":"feed.name","f.t":"feed.type",ext:"ext","m.c":"metrics.isContentCI"};class s{static compress(e){const t={},i=Object.keys(o);for(let r=0;r<i.length;r++){const s=i[r],a=(0,n.Z)(e,o[s]);void 0!==a&&(t[s]=a)}const r=(0,n.Z)(e,"content.headline");return r&&(t["c.hl"]=r),t}static decompress(e){if(!e)return;const t={},i=Object.keys(o);for(let s=0;s<i.length;s++){const a=i[s],c=(0,n.Z)(e,a);void 0!==c&&(0,r.Z)(t,o[a],c)}return e["c.hl"]&&(0,r.Z)(t,"content.headline",e["c.hl"]),t}}},18536:function(e,t,i){"use strict";i.d(t,{u:function(){return d}});var n=i(75559),r=i(65135),o=i(98429),s=i(98146),a=i(60483),c=i(46728);class d{constructor(e){this.hasInheritedProperty=!1,this.ordinal=0,this.ordinalCount=0,this.contract=e||{},this.ordinalCount=0,this.superContract={}}get combinedContract(){if(this.contract){const e=(this.contract.content=this.contract.content||{}).headline;this.contract.content.headline=e||(0,o.tH)(this.element)}return this.hasInheritedProperty?(0,c.Z)({},this.superContract,this.contract,this.internalContract):(0,c.Z)({},this.contract,this.internalContract)}get internalContract(){const{lineage:e,lineageOrdinal:t}=d.getLineage(this),i=d.getInheritedProperties(this),n=Object.assign({placement:{id:this.id,lineage:e,lineageOrdinal:t}},i);return this.parentDOM&&this.parentDOM.id&&0!==this.parentDOM.id&&(n.placement.parentId=this.parentDOM.id,n.placement.ordinal=this.ordinal),n}static addElement(e){if(!e)return;const t=this.parseContract(e);let i=this.get(e);if(i&&i.id?i.contract=t:(i=new d(t),i.id=this.generateId(),this.set(e,i)),!i)return;let r=e.parentElement;!r&&e.parentNode&&e.parentNode.host&&(r=e.parentNode.host);let s=r&&(0,o.pE)(r,"["+n.qP+"]"),a=s&&this.get(s);return s&&!a&&((0,o.t0)("telemetrynodeadded",s),a=this.get(s)),i===a&&(s=s.closest("["+n.qP+"]"),a=this.get(s)),i.parentDOM=a&&a!==i?a:d.getRoot(),this.inheritProperty(i),this.needUpdate=!0,i}static inheritProperty(e){if(!r.M0||!r.M0.config||r.M0.config.inheritByTraversingDOM||!e.contract)return;const t=e.parentDOM.contract,i=e.parentDOM.superContract,n=e.contract,o=e.superContract;r.M0.config.inheritExt&&(t.ext||i.ext)&&(e.hasInheritedProperty=!0,o.ext=Object.assign(Object.assign(Object.assign({},i.ext),t.ext),n.ext))}static isObject(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}static renderObject(e){return e.render()}static renderContract(e){return a.D.render(e)}static setAttribute(e,t,i=null){if(!e||!e.setAttribute)return;t=t||i&&i.contract;const r=this.renderContract(t);r&&e.setAttribute(n.qP,r[n.qP])}static get(e){const t=this.elementMap.get(e),i=this.parseContract(e);return t&&i&&(t.contract=i),t}static getLineage(e,t=">",i=!1){var n,o;try{if(e.parentDOM&&e.parentDOM!==d.root){let{lineage:n,lineageOrdinal:r}=this.getLineage(e.parentDOM,t,i);n+=t+e.contract.name;return{lineage:n,lineageOrdinal:(r?r+t:"")+e.ordinal}}if(e.parentDOM&&e.parentDOM===d.root&&i){const t={lineage:e.contract.name};return t.lineageOrdinal=""+e.ordinal,t}return{lineage:e.contract.name}}catch(t){r.M0&&r.M0.config&&r.M0.config.logElementForLineageFailure&&r.M0.sendAppErrorEvent({id:20203,message:`Error while parsing lineage. elementTag: ${null===(n=e.element)||void 0===n?void 0:n.tagName}, elementId: ${null===(o=e.element)||void 0===o?void 0:o.id}`})}}static getInheritedProperties(e){const t=r.M0&&r.M0.config&&r.M0.config.inheritByTraversingDOM&&r.M0.config.inheritPropertyList;if(t&&e)return r.M0.config.memoizeInheritedProperties?this.getInheritedPropertiesWithMemoize(e,t):this.getInheritedPropertiesWithoutMemoize(e,t)}static getInheritedPropertiesWithoutMemoize(e,t){const i={};for(;e&&e!==d.root;){for(const n of t){const t=e.contract[n];void 0!==t&&(void 0===i[n]?i[n]=t:this.isObject(i[n])&&(i[n]=Object.assign(Object.assign({},t),i[n])))}e=e.parentDOM}return i}static getInheritedPropertiesWithMemoize(e,t){if(e.memoizedProperties)return e.memoizedProperties;const i={};for(const n of t){i[n]=e.contract[n];let t=e.parentDOM;for(;t&&t!==d.root;){const e=t.memoizedProperties?t.memoizedProperties[n]:t.contract[n];if(void 0!==e&&(void 0===i[n]?i[n]=e:this.isObject(i[n])&&(i[n]=Object.assign(Object.assign({},e),i[n]))),t.memoizedProperties)break;t=t.parentDOM}}return e.memoizedProperties=i,i}static getRoot(){return d.root}static getTelemetryObject(e){const t=this.get(e);if(t&&t.contract)return new a.D(t.contract)}static parseContract(e){try{const t=e&&e.getAttribute&&e.getAttribute(n.qP);return this.parseAttribute(t)}catch(e){console.log("json parse error")}}static parseAttribute(e){try{const t=e&&JSON.parse(e);return this.parseMetadata(t)}catch(e){}}static parseMetadata(e){try{return e&&s.v.decompress(e)}catch(e){}}static set(e,t){t.element=e,this.elementMap.set(e,t)}static updateLayout(){if(!this.needUpdate)return;this.needUpdate=!1,this.root.ordinalCount=0;const e=(0,o.Ux)(document.documentElement);for(let t=0;t<e.length;t++){const i=e[t];let n=this.get(i);n&&void 0!==n.parentDOM||((0,o.t0)("telemetrynodeadded",i),n=this.get(i)),n.ordinal=++n.parentDOM.ordinalCount,n.ordinalCount=0}}static generateId(){return++this.lastId}}d.elementMap=new WeakMap,d.root=new d({name:"root"}),d.lastId=0,d.needUpdate=!1},69244:function(e,t,i){"use strict";i.d(t,{o:function(){return j}});var n=i(75559),r=i(75816),o=i(38156);var s=i(98429);let a,c=new Promise((e=>a=e));const d=new Map;function l(){d.clear()}var u=i(65969),p=i(18536);class g{constructor(){this.clickSearchDepth=20}observe(e=window,t){e.addEventListener("click",this.clickEventCallback.bind(this)),e.addEventListener("auxclick",this.auxClickEventCallback.bind(this)),t||e.addEventListener("contextmenu",this.contextMenuEventCallback.bind(this))}unobserve(e,t){e.removeEventListener("click",this.clickEventCallback.bind(this)),e.removeEventListener("auxclick",this.auxClickEventCallback.bind(this)),t||e.removeEventListener("contextmenu",this.contextMenuEventCallback.bind(this))}handleClickEvent(e,t,i){const n=this.getTelemetryClickTarget(e);if(!n)return;n&&n.hasAttribute("data-customhandled")||this.dispatchEvent("telemetryclick",n,t,i)}contextMenuEventCallback(e){const t=this.getClickTarget(e);this.handleClickEvent(t,o.Aw.RightClick,o.wu.ContextMenu)}clickEventCallback(e){const t=this.getClickTarget(e);1===e.button?this.handleClickEvent(t,o.Aw.MiddleClick,o.wu.Navigate):this.handleClickEvent(t)}auxClickEventCallback(e){if(1===e.button){const t=this.getClickTarget(e);this.handleClickEvent(t,o.Aw.MiddleClick,o.wu.Navigate)}}dispatchEvent(e,t,i,n){const r=new CustomEvent(e,{detail:{element:t,action:i,behavior:n}});dispatchEvent(r)}getTelemetryClickTarget(e){let t=e;for(let e=0;e<this.clickSearchDepth&&t&&!this.validTarget(t);e++)t.assignedSlot?t=t.assignedSlot:t.parentElement?t=t.parentElement:t.parentNode&&t.parentNode.host&&(t=t.parentNode.host);if(this.validTarget(t))return t}getClickTarget(e){if(!e.composedPath||"function"!=typeof e.composedPath)return e.target;{const t=e.composedPath();if(t.length>2&&"hasAttribute"in t[0]&&!t[0].hasAttribute(n.qP)&&"[object ShadowRoot]"===Object.prototype.toString.call(t[1])&&"hasAttribute"in t[2]&&t[2].hasAttribute(n.qP))return t[2];if(t.length>0)return t[0]}}validTarget(e){if(!e)return!1;const t=p.u.get(e);let i;return i=t?t.contract:p.u.parseContract(e),"BUTTON"===e.nodeName||e.hasAttribute("href")||e.getAttribute&&"button"===e.getAttribute("role")||i&&i.type===o.c9.DropDown||i&&i.type===o.c9.ActionButton||i&&i.behavior&&e.tagName.includes("-")||e.form}}class h{static start(){this.startTime=Date.now(),this.isPause=!1,this.started=!0}static pause(){this.started&&!this.isPause&&(this.isPause=!0,this.dwellTimeElapse+=Date.now()-this.startTime)}static getDwellTime(){if(this.isPause){return this.dwellTimeElapse}if(0!==this.startTime&&this.started){return this.dwellTimeElapse+(Date.now()-this.startTime)}return 0}static setDwellTime(e,t){this.startTime=e,this.dwellTimeElapse=t}static reset(){this.dwellTimeElapse=0,this.startTime=0,this.isPause=!1,this.started=!1}static getIsActive(){return this.started&&!this.isPause}}h.started=!1,h.startTime=0,h.dwellTimeElapse=0,h.isPause=!1;class m{constructor(){this.filterNodeList=["script"]}observe(e,t){e!==window&&(this.init(t),this.mutationObserver.observe(e,{attributes:!0,childList:!0,characterData:!1,subtree:!0,attributeFilter:["data-t"]}))}unobserve(e){}init(e){if(!this.mutationObserver){this.mutationObserver=new MutationObserver(this.mutationCallback.bind(this)),this.processAddedSubtreeAndDispatchEvent(document.documentElement);const t=HTMLElement.prototype.attachShadow,i=this;if(t)try{HTMLElement.prototype.attachShadow=function(e){const n=t.call(this,e);return this.shadowRoot&&i.observe(this.shadowRoot),n}}catch(t){e.push({message:"attachShadow exception in LayoutEventManager.ts",error:t})}}}mutationCallback(e){setTimeout((()=>{this.processMutationRecord(e)}),10)}processMutationRecord(e){for(let t=0;t<e.length;t++){const i=e[t],n=i.addedNodes;n&&n.length>0?this.processMutatedNodes(Array.from(n)):"attributes"===i.type&&this.processMutatedNodes([i.target])}}processMutatedNodes(e){e&&e.forEach((e=>{(0,s.Zq)(e)?this.processAddedSubtreeAndDispatchEvent(e):e.nodeType!==Node.ELEMENT_NODE||this.filterNodeList.includes(e.tagName&&e.tagName.toLowerCase())||this.processAddedSubtreeAndDispatchEvent(e)}))}processAddedSubtreeAndDispatchEvent(e){(0,s.jT)(e)&&(0,s.t0)("telemetrynodeadded",e);const t=this.processSubtree(e);for(let e=0;e<t.length;e++)(0,s.t0)("telemetrynodeadded",t[e])}processSubtree(e){if(!e)return;let t;return t=(0,s.Zq)(e)?e.shadowRoot.querySelectorAll("[data-t]"):e.querySelectorAll("[data-t]"),t}}var f=i(60483);class v{constructor(e,t,i,n,r,o,a){this.eventIndexInternal=0,this.cookiesToCollect=["TOptOut","OptanonConsent"],this.qspToScrubbed=["tid","upn","q","username","email"],this.contract=e,this.updateActivityId(t),this.anonCookieName=i,this.buildNumber=n||"",this.afdMuidInternal=a,this.customProps={},this.tmplProps={},this.joinIdProps={},this.eventIndexInternal=0,this.browserHiddenOnce=!1,this.overrideScrollOffset=r,this.viewTypeCallback=o,s.kP&&document.addEventListener("visibilitychange",this.browserVisibilityCallback.bind(this))}get requestId(){return this.requestIdInternal}get combinedContract(){this.eventIndexInternal=this.eventIndexInternal+1,this.tmplString=this.generateStringFromKeyValueObject(this.tmplProps);const e=this.joinIdProps&&Object.keys(this.joinIdProps).length>0?JSON.stringify(this.joinIdProps):void 0,t=Object.keys(this.customProps).length>0?JSON.stringify(this.customProps):void 0;this.customString=t;try{const e=window;void 0!==e&&e.navigator&&void 0!==typeof e.navigator.globalPrivacyControl&&(this.globalPrivacyControl=e.navigator.globalPrivacyControl)}catch(e){}const i={page:Object.assign(Object.assign({},this.contract.page),{url:(0,s.Mm)((0,s.XW)(this.contract.page.url,this.contract.page.ocid),this.qspToScrubbed),referral:(0,s.Mm)(this.contract.page.referral||s.kP&&document.referrer,this.qspToScrubbed),content:this.contract.page.content?Object.assign({},this.contract.page.content):void 0,dwellTime:h.getDwellTime(),viewType:this.contract.page.viewType||this.viewTypeCallback&&this.viewTypeCallback()}),browser:Object.assign(Object.assign({},this.contract.browser),{width:(0,s.wi)(),height:(0,s.P6)(),screenSize:s.kP?[screen.width,screen.height].join("x"):"0x0",clientId:(0,s.i2)(this.activityIdInternal),scrollOffset:"function"==typeof this.overrideScrollOffset&&this.overrideScrollOffset()||(0,s.qC)(),anoncknm:this.anonCookieName,cookieEnabled:s.kP&&navigator.cookieEnabled,globalPrivacyControl:this.globalPrivacyControl,hiddenOnce:this.browserHiddenOnce,muid:(0,s.FL)()||void 0,cookies:(0,s.tV)(this.cookiesToCollect)||void 0}),flight:Object.assign(Object.assign({},this.contract.flight),{tmpl:this.tmplString}),integration:Object.assign(Object.assign({},this.contract.integration),{joinIds:e}),request:{activityId:this.activityIdInternal,requestId:this.requestIdInternal,afdMuid:this.afdMuidInternal},timestamp:+Date.now(),eventIndex:this.eventIndexInternal,sdk:{name:"peregrine",ver:"1.0.17",schemaVer:"1.0.16"},user:this.contract.user,locale:this.contract.locale,feed:this.contract.feed,gallery:this.contract.gallery,custom:this.customString,build:this.buildNumber},n=(0,s.F$)();n&&(i.browser.isWin11=n);const r=(0,s.uV)();return r&&(i.browser.isXBox=r),i}static mergeContract(e,t){if(!e||!t)return e||t;const i=Object.keys(t),n=Object.assign({},e);for(let e=0;e<i.length;e++){const r=i[e];n[r]=Object.assign(Object.assign({},n[r]),t[r])}return e.page&&e.page.content&&t.page&&t.page.content&&(n.page.content=Object.assign(Object.assign({},e.page.content),t.page.content)),e.user&&t.user&&(n.user=Object.assign(Object.assign({},e.user),t.user)),n}update(e,t=!1){e&&(t?this.contract=v.mergeContract(this.contract,e):this.updatedContract=v.mergeContract(this.updatedContract,e))}updateActivityId(e){this.activityIdInternal=e;const t=this.contract&&this.contract.page&&this.contract.page.isStatic&&"true"===this.contract.page.isStatic.toString().toLowerCase()?(0,s.pW)():e;this.updateRequestId(t)}getEventIndexInternal(){return this.eventIndexInternal}updateRequestId(e,t){this.eventIndexInternal=t||0,this.requestIdInternal=e||(0,s.pW)()}updateAfdMuid(e){this.afdMuidInternal=e||""}updateContract(){this.contract=v.mergeContract(this.contract,this.updatedContract),delete this.updatedContract}addOrUpdateCustomProperty(e,t){this.customProps[e]=t}removeCustomProperty(e){e&&delete this.customProps[e]}addOrUpdateTmplProperty(e,t){this.tmplProps[e]=t}removeTmplProperty(e){delete this.tmplProps[e]}addOrUpdateJoinIdProperty(e,t){this.joinIdProps[e]=t}getJoinId(e){return this.joinIdProps[e]}updatePageConfiguration(e){this.update({page:{config:e}})}get JoinIdProps(){return this.joinIdProps}browserVisibilityCallback(){(document.hidden||"hidden"===document.visibilityState)&&(this.browserHiddenOnce=!0)}generateStringFromKeyValueObject(e){const t=[];return e&&Object.keys(e).forEach((i=>{e[i]?t.push(i+":"+e[i]):t.push(i)})),t.length>0?t.join(";"):void 0}}var y=i(63165),b=i(3232),S=i(14590);class C{constructor(e){this.config=e}get disable(){return this.config.disable}set disable(e){this.config.disable=e}}var w=i(73932),T=i(13578);class k extends C{constructor(e){super(e),this.transporterReady=!1,setTimeout((()=>{this.collectorChannelPlugin=new b.Z,this.appInsightsCore=new y.Z;const t=new S.Z,i={populateBrowserInfo:!1,populateOperatingSystemInfo:!1,enableApplicationInsightsTrace:!1,enableDistributedTracing:!0,enableApplicationInsightsUser:!1,sessionRenewalMs:18e5,sessionExpirationMs:18e5,userConsentCookieName:"OptanonAlertBoxClosed"},n={instrumentationKey:e.key,channels:[[this.collectorChannelPlugin]],extensionConfig:[t],disablePageUnloadEvents:["visibilitychange"]},r=[];if(s.kP||(n.extensionConfig[this.collectorChannelPlugin.identifier]={httpXHROverride:{sendPOST:(t,i,n)=>{delete t.headers["cache-control"],delete t.headers["content-type"];const r={method:"POST",credentials:"include",body:t.data,headers:t.headers};t.data.length>64e3?this.sendRequest(e,t.urlString,r).then((e=>{i(e.status)})).catch((e=>{i(0,{})})):(this.sendRequest(e,t.urlString,Object.assign(Object.assign({},r),{keepalive:!0})).then((e=>{})).catch((e=>{})),i(200,{}))}}}),e.addNoResponse){const e={addNoResponse:!1};n.extensionConfig[this.collectorChannelPlugin.identifier]=e}if(s.kP&&(n.extensionConfig[t.identifier]=i,r.push(t)),e&&e.anonCookieName&&(n.anonCookieName=e.anonCookieName),e.endpoint&&(n.endpointUrl=e.endpoint),this.appInsightsCore.initialize(n,r),e&&e.enableTraceGenerator)try{w.U.getTraceInstance().setTraceObj(this.appInsightsCore)}catch(e){}this.transporterReady=!0}),100)}sendRequest(e,t,i){var n;return e.abortableFetch?e.abortableFetch(t,null!==(n=e.timeout)&&void 0!==n?n:1e3,i,void 0,void 0,void 0,!0):fetch(t,i)}transport(e,t=!0,i=0){!e||(0,T.Z)(e)||this.config.disable||(this.transporterReady&&this.appInsightsCore&&this.appInsightsCore.isInitialized&&this.appInsightsCore.isInitialized()&&this.collectorChannelPlugin&&this.collectorChannelPlugin.isInitialized&&this.collectorChannelPlugin.isInitialized()?this.appInsightsCore.track(e):i<50&&setTimeout((()=>this.transport(e,t,i+1)),200))}}class A extends C{constructor(e){super(e)}transport(e){if(!e||!this.config.endpoint||this.config.disable)return;const t=this.generateUrl(this.config.endpoint+"?",e);this.generatePixelBeacon(t)}generatePixelBeacon(e){(new Image).src=e.replace(/&amp;/gi,"&")}generateUrl(e,t){const i=[];let n=e;return Object.keys(t).forEach((e=>{let n=t[e];"object"==typeof n&&n&&(n=JSON.stringify(n)),i.push(this.encodeURIComponent(e)+"="+this.encodeURIComponent(n))})),n=e+i.join("&").replace(/%20/g,"+"),n}encodeURIComponent(e){return null!=e&&encodeURIComponent(e)||""}}let I=null,P={};class E extends C{constructor(e){super(e),I=e&&e.callbackData?e.callbackData.callback:null,P=e&&e.callbackData?e.callbackData.data:null}transport(e){if(!e||this.config.disable)return;let t;try{t=this.flattenObj(e),t.isCoreView=!0,t.platform="app",P&&(t["browser.muid"]=P)}catch(e){return void window.console.error("Error occured while flatterning telemetry payload :",e)}e.name&&I({type:e.eventType,name:e.name,app_id:"0067acd6d05f4168b92f510d33b9ed74",data:{oneds:t}})}flattenObj(e){const t={},i=(e,n)=>{Object.keys(e).forEach((r=>{let o="";o=""===n?`${r}`:`${n}.${r}`,"object"==typeof e[r]&&e[r]?i(e[r],o):t[this.formatKey(o)]=e[r]}))};return i(e,""),t}formatKey(e){if(!e)return e;if("eventType"===e)return"type";if(e.startsWith("data.")){const t=e.substring(5,e.length);return t.endsWith(".destinationUrl")?t.replace(".destinationUrl",".destinationUri"):t}return e}}var O=i(82357);class M extends C{constructor(e){super(e)}transport(e){e&&!this.config.disable&&this.config.callback(e)}}var x=i(93048),D=i(7282),R=i(65004),L=i(24410);class F extends D.k{createEvent(e,t,i,n=0){return{name:this.getSuperAppOneDSEventName(u.id[e]),eventType:this.getSuperAppOneDSEventType(u.id[e]),data:t,baseType:u.id.Base,latency:i,sync:n}}createContentViewPayload(e,t,i){if(!t)return;const r=[];e.forEach((e=>{r.push(this.mapTelemetryObject(e))}));let o;(0,s.d5)()&&(o={content:{docHeight:(0,s.d5)()}});let a=null;try{a=JSON.stringify(r)}catch(e){a=r}const c=Object.assign(Object.assign(Object.assign({},t),o),{object:a,contentViewType:i.contentViewType});if(i.contentViewType===n.NS.Scroll&&(c.isMeaningfulScroll=i.isMeaningfulScroll),!(0,T.Z)(r)){return this.createEvent("ContentView",c,R.zU.RealTime)}}mapTelemetryObject(e){let t;const i=e&&e.content&&e.content.type;(i||e.behavior)&&(t=(0,L.Y)(i,e.behavior));const n=Object.assign({},e);return delete n.action,delete n.behavior,delete n.overrideId,n}getSuperAppOneDSEventType(e){switch(e){case u.id.PageView:return"Microsoft.Windows.MsnApps.PageView";case u.id.UserAction:return"Microsoft.Windows.MsnApps.PageAction";case u.id.AppError:return"Microsoft.Windows.MsnApps.Failure";case u.id.AppPerfTrace:return"Microsoft.Windows.MsnApps.ClientPerf";case u.id.ContentView:return"Microsoft.Windows.MsnApps.ContentView";case u.id.LoadTime:case u.id.Unload:return"Microsoft.Windows.MsnApps.AppLifeCycle";case u.id.VideoPlay:return"Microsoft.Windows.MsnApps.VideoPlay";case u.id.TraceInfo:return"Microsoft.Windows.MsnApps.TraceInfo";default:return null}}getSuperAppOneDSEventName(e){switch(e){case u.id.PageView:return"PAGE_VIEW_HP_WEBVIEW";case u.id.UserAction:return"PAGE_ACTION_HP_WEBVIEW_CLICK";case u.id.AppError:return"HP_WEBVIEW_APP_ERROR";case u.id.AdFeedback:return"PAGE_ACTION_HP_WEBVIEW_AD_FEEDBACK";case u.id.AdImpression:return"HP_WEBVIEW_AD_IMPRESSION";case u.id.AppPerfTrace:return"HP_WEBVIEW_APP_PERF_TRACE";case u.id.Base:return"PAGE_VIEW_HP_WEBVIEW_BASE";case u.id.ContentView:return"CONTENT_VIEW_HP_WEBVIEW";case u.id.Feedback:return"PAGE_ACTION_HP_WEBVIEW_FEEDBACK";case u.id.LoadTime:return"HP_WEBVIEW_LOAD_TIME";case u.id.ServerLog:return"HP_WEBVIEW_SERVER_LOG";case u.id.Unload:return"HP_WEBVIEW_UNLOAD";case u.id.VideoAdPlay:return"CONTENT_VIEW_HP_WEBVIEW_VIDEO_AD";case u.id.VideoPlay:return"CONTENT_VIEW_HP_WEBVIEW_VIDEO";case u.id.TraceInfo:return"DIAGNOSTIC_HP_WEBVIEW_TRACEINFO";default:return e}}}class N{constructor(){this.trackingSystems=[]}add(e){this.trackingSystems.push(e)}sendPageViewEvent(e,t=r.G.All){this.trackingSystems.forEach((i=>{if((t===r.G.All||t===i.type)&&i.mapper.createPageViewPayload){const t=i.mapper.createPageViewPayload(e);i.transporter.transport(t)}}))}sendContentViewEvent(e,t,i={contentViewType:n.NS.Partial}){this.trackingSystems.forEach((n=>{if(n.mapper.createContentViewPayload){const r=n.mapper.createContentViewPayload(e,t,i);n.transporter.transport(r)}}))}sendActionEvent(e,t,i,n){this.trackingSystems.forEach((r=>{if(r.mapper.createActionPayload){const o=r.mapper.createActionPayload(e,t,i,n);r.transporter.transport(o)}}))}sendEventPayload(e,t,i){this.trackingSystems.forEach((n=>{if(n.mapper.createCustomEventPayload){const r=n.mapper.createEventPayload(e,t,i);n.transporter.transport(r)}}))}sendCustomEvent(e,t,i){this.trackingSystems.forEach((n=>{if(n.mapper.createCustomEventPayload){const r=n.mapper.createCustomEventPayload(e,t,i);n.transporter.transport(r)}}))}disable(e=r.G.All){this.trackingSystems.forEach((t=>{e!==r.G.All&&e!==t.type||(t.transporter.disable=!0)}))}enable(e=r.G.All){this.trackingSystems.forEach((t=>{e!==r.G.All&&e!==t.type||(t.transporter.disable=!1)}))}}class B{constructor(e,t,i,r,o){this.contentViewCallback=e,this.overrideScrollOffset=t,this.endOfFeedTimeTracker=i,this.appResponsivenessTracker=r,this.scrollChanged=!0,this.sizeChanged=!0,this.newScrollLeft=null,this.newScrollTop=null,this.firstScrolledMargin=10,this.forceScrollFiring=!1,this.viewportEventIntervalDelayMs=200,this.viewportLeft=0,this.viewportTop=0,this.viewportWidth=0,this.viewportHeight=0,this.userInteracted=!1,this.eventTimerId=0,this.eventTimeoutMS=1e3,this.syntheticTelemetryScrollCallback=(e,t)=>{e&&(this.userInteracted=!0,this.updateMechanism=n.NS.Scroll,this.scrollChanged=!0,this.triggerCallback(),t(e),this.forceScrollFiring=!0)},this.viewportOffset=0,null==o||o().then((e=>{e.start(),this.scrollInputTracker=e}))}initListerner(){const e=this.throttle(this.update.bind(this),this.viewportEventIntervalDelayMs);e(),this.attachEvent("resize",(t=>{this.userInteracted=!0,this.updateMechanism=n.NS.Resize,this.sizeChanged=!0,this.triggerCallback(),e(t)})),this.attachEvent("scroll",(t=>{t&&!t.preventDefaultScroll&&(this.userInteracted=!0,this.updateMechanism=n.NS.Scroll,this.scrollChanged=!0,this.triggerCallback(),e(t))})),s.kP&&window.addEventListener("telemetryscroll",(t=>{this.syntheticTelemetryScrollCallback(t,e)}))}resetViewportOffset(){this.viewportOffset=this.overrideScrollOffset?this.overrideScrollOffset():(0,s.qC)()}triggerCallback(){this.dispatchEvent("telemetryviewportupdated",this.updateMechanism)}dispatchEvent(e,t){const i=new CustomEvent(e,{detail:{mech:t}});dispatchEvent(i)}throttle(e,t=1e3){let i=0,n=!1;return r=>{if(n)return;const o=(new Date).getTime(),s=o-i;s>t?(i=o,e(r)):(n=!0,setTimeout((()=>{n=!1,e()}),t-s))}}update(e){let t=this.sizeChanged,i=this.scrollChanged;const n=this.viewportWidth,r=this.viewportHeight,o=this.viewportLeft,s=this.viewportTop;this.updateCurrentViewportValues(),t=t&&(r!==this.viewportHeight||n!==this.viewportWidth),i=i&&(o!==this.viewportLeft||s!==this.viewportTop),(this.forceScrollFiring||t||i)&&(this.scheduleViewportEvent(e),this.forceScrollFiring=!1)}updateCurrentViewportValues(){this.scrollChanged&&(this.viewportLeft=this.newScrollLeft||this.getScrollLeft(),this.viewportTop=this.newScrollTop||this.getScrollTop(),this.newScrollLeft=this.newScrollTop=null,!this.firstScroll&&this.viewportTop>this.firstScrolledMargin&&(this.firstScroll=!0)),this.sizeChanged&&(this.viewportWidth=window.innerWidth||document.documentElement.clientWidth,this.viewportHeight=window.innerHeight||document.documentElement.clientHeight),this.scrollChanged=this.sizeChanged=!1}scheduleViewportEvent(e){if(this.userInteracted&&(this.lastScrollStarted||(this.lastScrollStarted=e&&e.timeStamp||performance.now()),this.endOfFeedTimeTracker&&this.endOfFeedTimeTracker.startOrContinue(e),this.appResponsivenessTracker&&this.appResponsivenessTracker.startOrContinue(e),this.eventLastScheduleTime=+new Date,!this.eventTimerId)){const e=()=>{this.eventTimerId=this.userInteracted=!1;const t=Date.now()-this.eventLastScheduleTime;if(t>this.eventTimeoutMS){const e=performance.now()-this.lastScrollStarted;let t,i;this.lastScrollStarted=void 0,this.scrollInputTracker&&(t=this.scrollInputTracker.getPendingPotentialInputType(),i=this.scrollInputTracker.getAndResetPotentialMissedScrollInput()),this.contentViewCallback(this.updateMechanism,this.isMeaningfulScroll(),t,i,e,this.endOfFeedTimeTracker&&this.endOfFeedTimeTracker.stop(),this.appResponsivenessTracker&&this.appResponsivenessTracker.stop())}else this.eventTimerId=setTimeout(e,this.eventTimeoutMS-t)};this.eventTimerId=setTimeout(e,this.eventTimeoutMS)}}isMeaningfulScroll(){if(this.updateMechanism!==n.NS.Scroll)return!1;const e=this.overrideScrollOffset?this.overrideScrollOffset():(0,s.qC)(),t=(0,s.P6)();return(e>this.viewportOffset&&e-this.viewportOffset>t/2||e<this.viewportOffset&&this.viewportOffset-e>t/2)&&(this.viewportOffset=e,!0)}getScrollTop(){if("undefined"!=typeof pageYOffset)return pageYOffset;{const e=document.body;let t=document.documentElement;return t=t.clientHeight?t:e,t.scrollTop}}getScrollLeft(){if(void 0!==window.pageXOffset)return window.pageXOffset;{const e=document.body;let t=document.documentElement;return t=t.clientWidth?t:e,t.scrollLeft}}attachEvent(e,t){window.addEventListener(e,t,!1)}}s.kP&&function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}}();class j{constructor(e){this.internalErrors=[],this.eventQueue=[],this.contentUpdateQueue=new Set,this.partialContentUpdateQueue=new Set,this.contentViewTriggerSource=n.NS.Load,this.contentViewTimeout=1e3,this.contentViewTimer=null,this.contentViewDelay=200,this.scheduledContentViewType=null,this.contentViewTimePassed=0,this.contentViewLastExecution=0,this.contentUpdateDebugQueue=new Set,this.intersectionObserverOptions={root:null,rootMargin:"0px",threshold:0},this.traceIdIndex=-1,this.maxScrollLoadTimeEvents=10,this.contentViewBeaconSent=!1,this.batchSendScrollLoadTimeEvent=(e,t,i,n,r)=>{if(this.scrollLoadTimeEventsBatcher)this.scrollLoadTimeEventsBatcher.defer();else{const e=e=>{let t,i,n,r,o=0;if(e.forEach((e=>{null!=e.eoft&&(t=(t||0)+e.eoft),null!=e.ari&&e.duration&&(i=(i||0)+e.ari*e.duration),e.duration&&(o+=e.duration),e.inputType&&(n||(n={}),n[e.inputType]=(n[e.inputType]||0)+1),!r&&e.potentialMissedScrollInput&&(r=e.potentialMissedScrollInput)})),o<=0||null==t&&null==i)return;const s={scrollDuration:Math.round(o)};n&&(s.scrollInputs=n),r&&(s.potentialMissedScrollInput=r),null!=t&&(s.scrollEoft=Math.round(t/o*1e4)),null!=i&&(s.scrollAri=Math.round(i/o*1e4)),this.sendLoadTimeEvent({markers:s})};this.scrollLoadTimeEventsBatcher=function(e,t){const{autoFlushIntervalInMs:i,maxFlushes:n}=Object.assign({},t);let r,o=[],s=0;const a=()=>{(null==n||s<n)&&(s++,o.length&&(e(o),o=[]))},c=()=>{i&&(r&&clearTimeout(r),r=setTimeout(a,i))};return{enqueue:e=>{o.push(e),c()},flush:a,defer:c}}(e,{maxFlushes:this.maxScrollLoadTimeEvents}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this.scrollLoadTimeEventsBatcher.flush()})),window.addEventListener("beforeunload",(()=>this.scrollLoadTimeEventsBatcher.flush()))}const o=r&&r();this.scrollLoadTimeEventsBatcher.enqueue({eoft:n,ari:o,duration:e,inputType:t,potentialMissedScrollInput:i})};try{this.config=e,this.config.autoCaptureContentView=void 0===e.autoCaptureContentView||e.autoCaptureContentView,this.config.beacons=e.beacons||{},this.config.beacons.PageOutOfFocus=this.config.beacons.PageOutOfFocus||{},this.config.beacons.PageOutOfFocus.disable=void 0===this.config.beacons.PageOutOfFocus.disable||this.config.beacons.PageOutOfFocus.disable,s.kP&&(this.layoutEventManager=new m,this.layoutEventManager.observe(document.documentElement,this.internalErrors),this.clickEventManager=new g,this.clickEventManager.observe(window,this.config.disableContextMenu),window.addEventListener("beforeunload",this.unloadEventCallback.bind(this)),window.addEventListener("telemetrynodeadded",(e=>{e&&e.detail&&e.detail.element&&this.viewportIntersectionObserver&&(p.u.addElement(e.detail.element),this.viewportIntersectionObserver.observe(e.detail.element))})),window.addEventListener("telemetrynodremoved",(e=>{e&&e.detail&&e.detail.element&&this.viewportIntersectionObserver&&this.viewportIntersectionObserver.unobserve(e.detail.element)})),window.addEventListener("telemetryclick",this.clickEventHandler.bind(this)),window.addEventListener("focus",this.onFocusCallback.bind(this)),window.addEventListener("blur",this.onBlurCallback.bind(this))),this.trackingSystemList=new N,e.trackingSystems.forEach((t=>{t.transporterConfig.abortableFetch=e.abortableFetch,t.transporterConfig.anonCookieName=e.anonCookieName,t.transporterConfig.addNoResponse=e.addNoResponse,t.transporterConfig.enableTraceGenerator=e.enableTraceGenerator,t.transporterConfig.enableEventsBatching=e.enableEventsBatching,t.transporterConfig.timeout=e.timeout,this.trackingSystemList.add(class{static getTrackingSystem(e,t){switch(e.type){case r.G.OneDS:return{transporter:new k(e.transporterConfig),mapper:new D.k(e.transporterConfig.enableEventsBatching),type:e.type};case r.G.CTag:return{transporter:new A(e.transporterConfig),mapper:new O.P,type:e.type};case r.G.Comscore:return{transporter:new A(e.transporterConfig),mapper:new x.O,type:e.type};case r.G.Debug:return{transporter:new M(e.transporterConfig),mapper:e.mapper,type:e.type};case r.G.SuperApp:return{transporter:new E(e.transporterConfig),mapper:new F,type:e.type};default:return{transporter:new k(e.transporterConfig),mapper:new D.k,type:e.type}}}}.getTrackingSystem(t))}))}catch(e){this.internalErrors.push({message:"Error in Telemetry Lib constructor.",error:e})}}getTrackingSystemList(){return this.trackingSystemList}setContentViewTimeout(e){this.contentViewTimeout=e}resetContentViewTimeout(){this.contentViewTimeout=u.S8}renderTelemetryAttribute(e,t,i){return new f.D(e).render(t)}observeSingleElement(e){}observeElementTree(e){}initPage(e,t,n,r,o){if(this.pageMetadata=new v(e,t,this.config.anonCookieName,n,this.config.overrideScrollOffset,this.config.viewTypeCallback,r),s.kP){let e,t,n;"IntersectionObserver"in i.g&&(this.viewportIntersectionObserver=new IntersectionObserver(this.contentVisibilityCallback.bind(this),this.intersectionObserverOptions),this.contentVisibilityCallbackPromise=(0,s.xI)()),this.config.enableScrollPerformanceTracking&&o&&(e=o.endOfFeedTimeTracker,t=o.appResponsivenessTracker,n=o.scrollInputTracker),this.viewportEventManager=new B(((e,t,i,n,r,o,s)=>{this.config.autoCaptureContentView&&(this.autoSendContentViewEvent({contentViewType:e,isMeaningfulScroll:t}),(null!=o||s)&&this.batchSendScrollLoadTimeEvent(r,i,n,o,s))}),this.config.overrideScrollOffset,e,t,n),window.addEventListener("telemetryviewportupdated",(e=>{e&&e.detail&&e.detail.mech&&(this.contentViewTriggerSource=e.detail.mech)})),this.viewportEventManager.initListerner()}}sendPageView(e=null,t=!1,i=null,o=r.G.All,a=!1){this.queueEvent("PageView",(()=>{this.config.beacons&&this.config.beacons.PageView&&this.config.beacons.PageView.disable||!this.pageMetadata||(this.config.resetAppErrorCounterOnPageView&&l(),e=e||{},(0,s.lB)(e),this.contentLoaded=!1,this.config.disableAutoCalculateDwellTime||h.reset(),this.pageMetadata.update(e),i?this.pageMetadata.updateActivityId(i):t||this.updateRequestId(),this.pageMetadata.updateContract(),this.viewportEventManager.resetViewportOffset(),this.updatePageMetadata({page:{isMonetized:!1}},!0),this.trackingSystemList.sendPageViewEvent(this.pageMetadata.combinedContract,o),!a||o!==r.G.All&&o!==r.G.Comscore||fetch(u.EE),t||(this.contentViewTriggerSource=n.NS.Load,setTimeout((()=>{this.autoSendContentViewEvent({contentViewType:n.NS.Load})}),1e3)),this.dispatchEvent(n.tM,{requestId:this.pageMetadata.requestId}))}))}getRequestId(){return this.pageMetadata.requestId}getCurrentEventIndex(){return this.pageMetadata.getEventIndexInternal()}updateRequestId(e,t){this.pageMetadata.updateRequestId(e,t)}disableTrackingSystem(e=r.G.All){this.trackingSystemList.disable(e)}enableTrackingSystem(e=r.G.All){this.trackingSystemList.enable(e)}disableBeacon(e){this.config.beacons[e]||(this.config.beacons[e]={}),this.config.beacons[e].disable=!0}enableBeacon(e){this.config.beacons[e]||(this.config.beacons[e]={}),this.config.beacons[e].disable=!1}disableAutoUnloadCallback(){this.ignoreAutoUnloadCallback=!0}enableAutoUnloadCallback(){this.ignoreAutoUnloadCallback=!1}updatePageConfiguration(...e){let t;e.forEach((e=>{t|=e})),this.pageMetadata.updatePageConfiguration(t)}updatePageMetadata(e,t=!1){e&&this.pageMetadata.update(e,t)}addOrUpdateCustomProperty(e,t){this.pageMetadata.addOrUpdateCustomProperty(e,t)}removeCustomProperty(e){this.pageMetadata.removeCustomProperty(e)}addOrUpdateJoinIdProperty(e,t){this.pageMetadata.addOrUpdateJoinIdProperty(e,t)}addOrUpdateTmplProperty(e,t){this.pageMetadata.addOrUpdateTmplProperty(e,t)}removeTmplProperty(e){this.pageMetadata.removeTmplProperty(e)}addOrUpdateTmplString(e){if(!e)return;const t=e.split(";");for(let e=0;e<t.length;e++){const i=t[e].split(":");2===i.length?this.addOrUpdateTmplProperty(i[0],i[1]):1===i.length&&this.addOrUpdateTmplProperty(i[0])}}removeTmplString(e){if(!e)return;const t=e.split(";");for(let e=0;e<t.length;e++){const i=t[e].split(":");i&&i.length&&this.pageMetadata.removeTmplProperty(i[0])}}addOrUpdateIdxId(e,t){if(e){t&&(delete this.pageMetadata.JoinIdProps[n.ob],this.traceIdIndex=-1);const i=this.pageMetadata.getJoinId(n.ob),r=i?`${i},${e}`:e;return this.pageMetadata.addOrUpdateJoinIdProperty(n.ob,r),this.traceIdIndex+=1,this.traceIdIndex}}sendActionEvent(e,t,i,r,a){this.queueEvent("UserAction",(()=>{if(!(this.config.beacons&&this.config.beacons.UserAction&&this.config.beacons.UserAction.disable)&&this.pageMetadata&&e){const c=e;p.u.updateLayout();const d=this.clickEventManager.getTelemetryClickTarget(e);let l;d&&(e=d),l=e.getAttribute&&e.getAttribute(n.qP),e.parentElement&&!l&&(l=(e=e.parentElement).getAttribute&&e.getAttribute(n.qP));let u=p.u.get(e);if(!u){const e=p.u.parseAttribute(l);e&&(u=new p.u(e))}if(this.pageMetadata&&u){a&&((0,s.Vr)(c,this.pageMetadata.contract.page.ocid),(0,s.Zf)(c,this.pageMetadata.contract.page.partnerTrackingCode),(0,s.uK)(c,this.pageMetadata.requestId),(0,s.wC)(c,this.pageMetadata.getEventIndexInternal()+1));const n=e.getAttribute("action")||e.form&&e.form.getAttribute("action"),d=t||u.contract.action,l=void 0===i?u.contract.behavior:i,p=u.contract.overrideDestinationUrl||(0,s.jv)(r)&&r||e.getAttribute("href")||n;if(p&&!p.startsWith("mailto:")?!0===u.contract.overrideEmailIdScrubbing||(0,s.uj)(p)?u.contract.destinationUrl=p:(u.contract.destinationUrl="",this.sendAppErrorEvent({id:54301,severity:0,message:"Email found in the destination url",pb:u.combinedContract})):u.contract.destinationUrl="",d===o.Aw.RightClick&&l===o.wu.ContextMenu&&!(u&&u.contract&&u.contract.destinationUrl))return;this.trackingSystemList.sendActionEvent(u.combinedContract,this.pageMetadata.combinedContract,null==d?o.Aw.Click:d,null==l?o.wu.Navigate:l),u.contract&&u.contract.triggerPageView&&l===o.wu.Navigate&&this.sendPageView(null,!1)}}}))}scheduleContentViewEvent(e=n.NS.Partial,t){if(!s.kP)return;const i=(new Date).getTime();this.contentViewTimePassed=i-this.contentViewLastExecution,this.contentViewTimePassed<=this.contentViewDelay&&e!==n.NS.Partial||(this.contentViewLastExecution=i,this.contentViewTimer&&this.scheduledContentViewType===e&&window.clearTimeout(this.contentViewTimer),this.contentViewTimer=window.setTimeout((()=>this.autoSendContentViewEvent({contentViewType:e})),t||this.contentViewTimeout),this.scheduledContentViewType=e)}sendContentViewEvent(e,t=n.NS.Partial,i=!0){this.queueEvent("ContentView",(()=>{if(this.config.beacons&&this.config.beacons.ContentView&&this.config.beacons.ContentView.disable||!this.pageMetadata)return;p.u.updateLayout();const n=(0,s.Ux)(e),r=[];if(n&&n.length>0){for(let e=0;e<n.length;e++){const t=n[e],o=p.u.get(t);o&&(!i||this.contentUpdateQueue.has(t)||this.partialContentUpdateQueue.has(t))&&(this.setIsMonetizedFlag(o.combinedContract),r.push(o.combinedContract))}this.trackingSystemList.sendContentViewEvent(r,this.pageMetadata.combinedContract,{contentViewType:t})}this.contentLoaded||(this.contentLoaded=!0,this.pageMetadata.addOrUpdateTmplProperty("dwellTimeContentLoaded","true"),this.startAutoDwellTime())}))}sendAppErrorEvent(e,t=!0){if(!this.config.ignoreAppErrorCounter&&function(e){if(!e||!e.id)return!0;d.has(e.id)||d.set(e.id,0);const t=d.get(e.id)+1;return d.set(e.id,t),3===e.severity&&t>25||3!==e.severity&&t>10}(e))return console.error(JSON.stringify(e)),void console.error(`App errors throttled for Id: ${e.id}`);if(!function(e){const{pb:t,severity:i=1}=e;return 3===i||(!(t&&t.shouldSupressWarnings)||1!==i)}(e))return console.error(JSON.stringify(e)),void console.error(`This App error Id: ${e.id} will not be sent!`);if(!(this.config.beacons&&this.config.beacons.AppError&&this.config.beacons.AppError.disable)&&this.pageMetadata)if(function(e){const{pb:t}=e;return!(!t||!t.shouldDelayUntilLoadTime)}(e)){const i=Object.assign(Object.assign({},e),{pb:Object.assign(Object.assign({},e.pb),{delayed:1})});c.then((()=>{this.queueAppErrorEvent(i,t)}))}else this.queueAppErrorEvent(e,t)}sendLoadTimeEvent(e){this.sendEvent("LoadTime",e),a()}sendFeedbackEvent(e){this.sendEvent("Feedback",e)}sendAdImpressionEvent(e){this.sendEvent("AdImpression",e)}sendAdFeedbackEvent(e){this.sendEvent("AdFeedback",e)}sendVideoPlayEvent(e,t,i=!1){if(this.config.beacons&&this.config.beacons.VideoPlay&&this.config.beacons.VideoPlay.disable)return;const n=i?"VideoAdPlay":"VideoPlay";t&&p.u.updateLayout();const r=t?p.u.get(t):void 0,o=r?r.combinedContract:{};if(e){const t=Object.assign(Object.assign({},o),e);this.trackingSystemList.sendEventPayload(n,{object:t},this.pageMetadata.combinedContract)}else t&&this.pageMetadata&&r&&this.trackingSystemList.sendEventPayload(n,{object:o},this.pageMetadata.combinedContract)}sendGamePlayEvent(e,t){if(!(this.config.beacons&&this.config.beacons.GamePlay&&this.config.beacons.GamePlay.disable))if(e)this.trackingSystemList.sendEventPayload("GamePlay",{object:e},this.pageMetadata.combinedContract);else if(t){p.u.updateLayout();const e=p.u.get(t);this.pageMetadata&&e&&this.trackingSystemList.sendEventPayload("GamePlay",{object:e.combinedContract},this.pageMetadata.combinedContract)}}sendAudioPlayEvent(e,t){if(!(this.config.beacons&&this.config.beacons.AudioPlay&&this.config.beacons.AudioPlay.disable))if(e)this.trackingSystemList.sendEventPayload("AudioPlay",{object:e},this.pageMetadata.combinedContract);else if(t){p.u.updateLayout();const e=p.u.get(t);this.pageMetadata&&e&&this.trackingSystemList.sendEventPayload("AudioPlay",{object:e.combinedContract},this.pageMetadata.combinedContract)}}sendServerLogEvent(e){this.sendEvent("ServerLog",e)}sendAppPerfTraceEvent(e){this.sendEvent("AppPerfTrace",e)}sendAuthEvent(e){this.sendEvent("Auth",e)}sendHeartBeatEvent(e){this.sendEvent("HeartBeat",e)}sendClientLogEvent(e){this.config.enableSendClientLogEvent&&this.sendEvent("ClientLog",e)}sendPageOutOfFocusEvent(e){this.queueEvent("PageOutOfFocus",(()=>{this.config.beacons&&this.config.beacons.PageOutOfFocus&&this.config.beacons.PageOutOfFocus.disable||!this.pageMetadata||this.trackingSystemList.sendEventPayload("PageOutOfFocus",null,this.pageMetadata.combinedContract)}))}sendUnloadEvent(){this.queueEvent("Unload",(()=>{this.config.beacons&&this.config.beacons.Unload&&this.config.beacons.Unload.disable||!this.pageMetadata||this.trackingSystemList.sendEventPayload("Unload",null,this.pageMetadata.combinedContract)}))}sendTraceInfoEvent(e){this.queueEvent("TraceInfo",(()=>{this.config.beacons&&this.config.beacons.TraceInfo&&this.config.beacons.TraceInfo.disable||!this.pageMetadata||this.sendEvent("TraceInfo",e)}))}getPageMetadata(){return this.pageMetadata}flush(e=!0,t,i){const n=e=>!(t&&t!==e.eventType||i&&i===e.eventType);for(const e of this.eventQueue)"function"==typeof e.callback&&n(e)&&e.callback();this.eventQueue=this.eventQueue.filter((e=>!n(e))),this.config.useEventQueue=!e}empty(){this.eventQueue=[]}enableEventQueue(){this.config.useEventQueue=!0}disableEventQueue(){this.config.useEventQueue=!1}addEventTypeToForceQueueList(e){this.config.forceUseEventQueueList||(this.config.forceUseEventQueueList=[]),this.config.forceUseEventQueueList.push(e)}removeEventTypeFromForceQueueList(e){this.config.forceUseEventQueueList&&(this.config.forceUseEventQueueList=this.config.forceUseEventQueueList.filter((t=>t!==e)))}startDwellTime(){h.start()}pauseDwellTime(){h.pause()}resetDwellTime(){h.reset()}isDwellTimeActive(){return h.getIsActive()}setDwellTime(e,t){h.setDwellTime(e,t)}getDwellTime(){return h.getDwellTime()}clickEventHandler(e){if(e&&e.detail&&e.detail.element&&this.pageMetadata){const t=e.detail.element;this.sendActionEvent(t,e.detail.action,e.detail.behavior,void 0,!0),t.attributes&&t.attributes.href&&t.attributes.href.value&&t.attributes.href.value.startsWith&&"function"==typeof t.attributes.href.value.startsWith&&t.attributes.href.value.startsWith("mailto:")&&(this.ignoreUnload=!0)}}queueAppErrorEvent(e,t=!0){this.queueEvent("AppError",(()=>{if(this.trackingSystemList.sendCustomEvent("AppError",e,this.pageMetadata.combinedContract),t){const t=new Date+": "+ +new Date+" "+JSON.stringify(e);console.error(t)}this.dispatchEvent(n.tW,{error:e})}))}unloadEventCallback(){this.ignoreAutoUnloadCallback||this.config.beacons&&this.config.beacons.Unload&&this.config.beacons.Unload.disable||(this.pageMetadata&&!this.ignoreUnload&&this.sendUnloadEvent(),this.ignoreUnload=!1)}setIsMonetizedFlag(e){e&&e.isMonetized&&this.updatePageMetadata({page:{isMonetized:!0}},!0)}autoSendContentViewEvent(e){this.queueEvent("ContentView",(()=>{if(this.pageMetadata){let t;if(p.u.updateLayout(),e.contentViewType!==n.NS.Partial&&this.contentUpdateQueue&&this.contentUpdateQueue.size>0?t=this.contentUpdateQueue:this.partialContentUpdateQueue&&this.partialContentUpdateQueue.size>0&&(t=this.partialContentUpdateQueue),t){const i=[...t].map((t=>{const i=p.u.get(t);if(i&&(e.contentViewType!==n.NS.Partial||!i.isCaptured))return i.isCaptured=!0,this.setIsMonetizedFlag(i.combinedContract),i.combinedContract})).filter((e=>e));this.trackingSystemList.sendContentViewEvent(i,this.pageMetadata.combinedContract,e),this.contentViewBeaconSent=!0,this.partialContentUpdateQueue.clear(),this.contentViewTriggerSource=null}this.contentLoaded||(this.contentLoaded=!0,this.pageMetadata.addOrUpdateTmplProperty("dwellTimeContentLoaded","true"),this.startAutoDwellTime())}}))}contentVisibilityCallback(e){for(let t=0;t<e.length;t++){const i=e[t];i.isIntersecting?(this.contentUpdateQueue.add(i.target),this.contentViewTriggerSource||this.partialContentUpdateQueue.add(i.target)):(this.contentUpdateQueue.delete(i.target),this.partialContentUpdateQueue.delete(i.target))}!this.contentViewTriggerSource&&this.config.autoCaptureContentView&&this.scheduleContentViewEvent(n.NS.Partial,500),this.contentUpdateQueue.size&&this.contentVisibilityCallbackPromise&&this.contentVisibilityCallbackPromise.resolve()}sendEvent(e,t){this.queueEvent(e,(()=>{this.config.beacons&&this.config.beacons[e]&&this.config.beacons[e].disable||!this.pageMetadata||this.trackingSystemList.sendCustomEvent(e,t,this.pageMetadata.combinedContract)}))}queueEvent(e,t){this.config.useEventQueue||this.config.forceUseEventQueueList&&this.config.forceUseEventQueueList.includes(e)?this.eventQueue.push({eventType:e,callback:t}):t()}dispatchEvent(e,t){s.kP&&setTimeout((()=>dispatchEvent(new CustomEvent(e,{detail:t}))),0)}startAutoDwellTime(){document.hasFocus()&&!this.config.disableAutoCalculateDwellTime&&(h.start(),this.pageMetadata.addOrUpdateTmplProperty("dwellTimeStart","true"))}onFocusCallback(){this.contentLoaded&&!this.config.disableAutoCalculateDwellTime&&(h.start(),this.pageMetadata.addOrUpdateTmplProperty("dwellTimeFocusStart","true"))}waitForContentVisibilityObserverInit(){return this.contentVisibilityCallbackPromise?this.contentVisibilityCallbackPromise.promise:Promise.resolve()}onBlurCallback(){this.sendPageOutOfFocusEvent({}),this.config.disableAutoCalculateDwellTime||(h.pause(),this.pageMetadata.addOrUpdateTmplProperty("dwellTimePause","true"))}isContentViewBeaconSent(){return this.contentViewBeaconSent}}},60483:function(e,t,i){"use strict";i.d(t,{D:function(){return o}});var n=i(75559),r=i(98146);class o{constructor(e,t,i){this.contract=e}static render(e){const t=r.v.compress(e);return{[n.qP]:JSON.stringify(t)}}addChild(e){return new o(e,this)}addOrUpdateChild(e,t){return t?(t.contract=e,t):new o(e,this)}updateContract(e){this.contract=e}render(e){return o.render(this.contract)}getMetadataTag(){return JSON.stringify(this.getMetadata())}getMetadata(){return r.v.compress(this.contract)}}},73932:function(e,t,i){"use strict";i.d(t,{U:function(){return o}});var n=i(39860),r=i(65135);class o{constructor(){this.getSpanId=(e=!1)=>{if(o.traceCtrxObj&&!e)return o.traceCtrxObj.getSpanId();const t=(0,n.DO)().substring(0,16);return(0,r.dK)().then((()=>{o.setSpanIdFunc(t)}),(()=>{})),t},this.getTraceId=(e=!1)=>{if(o.traceCtrxObj&&!e)return o.traceCtrxObj.getTraceId();const t=(0,n.DO)();return(0,r.dK)().then((()=>{o.setTraceIdFunc(t)}),(()=>{})),t}}setTraceObj(e){o.traceCtrxObj=e&&e.getTraceCtx()}}o.getTraceInstance=()=>(o.traceInstance||(o.traceInstance=new o),o.traceInstance),o.setSpanIdFunc=e=>{const t=e||(0,n.DO)().substring(0,16);try{o.traceCtrxObj.setSpanId(t)}catch(e){}},o.setTraceIdFunc=e=>{const t=e||(0,n.DO)();try{o.traceCtrxObj.setTraceId(t)}catch(e){}}},65969:function(e,t,i){"use strict";i.d(t,{EE:function(){return n},S8:function(){return o},id:function(){return r}});const n="https://www.msn.com/PV.xml",r={UserAction:"MS.News.Web.PageAction",PageView:"MS.News.Web.PageView",ContentView:"MS.News.Web.ContentView",AppError:"MS.News.Web.AppError",LoadTime:"MS.News.Web.LoadTime",Unload:"MS.News.Web.Unload",Base:"MS.News.Web.Base",Feedback:"MS.News.Web.Feedback",AdImpression:"MS.News.Web.AdImpression",AdFeedback:"MS.News.Web.AdFeedback",GamePlay:"MS.News.Web.GamePlay",VideoPlay:"MS.News.Web.VideoPlay",VideoAdPlay:"MS.News.Web.VideoAdPlay",AudioPlay:"MS.News.Web.AudioPlay",ServerLog:"MS.News.Web.ServerLog",AppPerfTrace:"MS.News.Web.AppPerfTrace",Auth:"MS.News.Web.Auth",HeartBeat:"MS.News.Web.HeartBeat",ClientLog:"MS.News.Web.ClientLog",PageOutOfFocus:"MS.News.Web.PageOutOfFocus",TraceInfo:"MS.News.Web.TraceInfo"},o=1e3},98429:function(e,t,i){"use strict";i.d(t,{F$:function(){return j},FL:function(){return v},Mm:function(){return H},P6:function(){return h},Ux:function(){return D},Vr:function(){return C},XW:function(){return S},Xn:function(){return p},Zf:function(){return w},Zq:function(){return L},d5:function(){return f},i2:function(){return y},jT:function(){return F},jv:function(){return N},kP:function(){return b},lB:function(){return W},pE:function(){return M},pW:function(){return u},qC:function(){return m},t0:function(){return B},tH:function(){return I},tV:function(){return U},uK:function(){return T},uV:function(){return $},uj:function(){return _},wC:function(){return k},wi:function(){return g},xI:function(){return z}});let n,r,o,s,a,c,d=(new Date).getTime();try{a="sessionStorage"in window&&window.sessionStorage}catch(e){}try{navigator&&navigator.userAgentData&&"Windows"===navigator.userAgentData.platform&&navigator.userAgentData.getHighEntropyValues&&navigator.userAgentData.getHighEntropyValues(["platformVersion"])&&navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then((e=>{c=e.platformVersion}))}catch(e){}function l(e){const t=(d+16*Math.random())%16|0;return d=Math.floor(d/16),("x"===e?t:7&t|8).toString(16)}function u(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,l)}function p(){return Date.now()}function g(){return b&&(window.outerWidth||document.documentElement.clientWidth)}function h(){return b&&(window.outerHeight||document.documentElement.clientHeight)}function m(){return b&&(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop)||0}function f(){return b&&Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0,document.documentElement.clientHeight||0)}function v(){const e="undefined"!=typeof document&&document.cookie;if(!b&&!e)return"";const t=new RegExp("\\bMUID\\s*=\\s*([^;]*)","i").exec(e);return t&&t.length>1?t[1]:""}function y(e){return b?(n||""===n||(n=v()||e||""),n):v()}const b=!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv);function S(e,t){return function(e,t){if(t&&e){const i=t.toLowerCase();if(-1==i.indexOf("?ocid=")&&-1==i.indexOf("&ocid=")){const i=-1==t.indexOf("?")?"?":"&";t=`${t}${i}ocid=${encodeURIComponent(e)}`}}return t}(t,e)}function C(e,t){A(e,"ocid",t)}function w(e,t){let i=t;try{const e=new URL(location.href);i=e.searchParams.get("pc")||e.searchParams.get("PC")||e.searchParams.get("pC")||e.searchParams.get("Pc")||i}catch(e){}A(e,"pc",i||t)}function T(e,t){A(e,"cvid",t,!0)}function k(e,t){A(e,"ei",t.toString(),!0)}function A(e,t,i,n=!1){if(!e||!t)return;let r=e;if("a"!==r.nodeName&&r.closest("a")&&(r=r.closest("a")),!r)return;const{href:o}=r;if(o)try{const e=new URL(o);(!e.searchParams.get(t)||n)&&i&&(e.host.includes("msn.com")||e.host.includes("msn.cn")||e.host.includes("bing.com"))&&(e.searchParams.set(t,i),r.href=e.href)}catch(e){}}function I(e,t=""){if(!e)return;const i=e.getAttribute("data-hl")||"";if(!t&&!i){const i=e.querySelector("h4")||e.querySelector("h3"),n=function(e,t,i=2){if(!t)return;let n=t,r=0;for(;n&&n!==e;n=n.parentElement,r++)if(r>i)return;return r}(e,i);i&&n&&n<=2&&(t=E(i))}const n=e instanceof HTMLAnchorElement?e.querySelector(".title"):"";!t&&n&&(t=E(n));const r=e instanceof HTMLAnchorElement?e.getAttribute("title"):"";!t&&r&&(t=r);const o=e instanceof HTMLAnchorElement?e.getAttribute("aria-lable"):"";return!t&&o&&(t=o),"string"!=typeof t&&(t=i||e.getAttribute("data-piitxt")||("FORM"==e.nodeName?"[form submit]":e.getAttribute("title")||O(e,"title","img")||E(e)||e.getAttribute("alt")||O(e,"alt")||"")),null!=t.trim&&(t=t.trim()),t}const P=/(^\s+)|(\s+$)/gm;function E(e){return(e&&(e.textContent||e.innerText)||"").replace(P,"")}function O(e,t,i=""){const n=e.children||[];let r,o=0;for(t=t||"alt";o<n.length;o++)if(r=n[o].getAttribute(t)||O(n[o],t,i),r&&i!=n[o].localName)return r}function M(e,t){if(!e||e===document||e===window)return null;const i=e.closest(t);if(i)return i;const n=x(e);return n&&n.host?M(n.host,t):void 0}function x(e){return e.parentNode?x(e.parentNode):e}function D(e){const t=[];if(!e)return;let i;return i=L(e)?e.shadowRoot.querySelectorAll("*"):e.querySelectorAll("*"),R(Array.from(i),t),t}function R(e,t=[]){for(let i=0;i<e.length;i++){const n=e[i];F(n)&&t.push(n),L(n)&&R(Array.from(n.shadowRoot.querySelectorAll("*")),t)}}function L(e){return!!e.shadowRoot}function F(e){return e.hasAttribute&&e.hasAttribute("data-t")}function N(e){try{new URL(e)}catch(e){return!1}return!0}function B(e,t){const i=new CustomEvent(e,{detail:{element:t}});dispatchEvent(i)}function j(){let e=!1;if(b)try{const t=c;if(t&&parseInt(t.split(".")[0])>=11&&(e=!0),!e&&window&&window.external&&window.external.getHostEnvironmentValue("os-build")){const t=JSON.parse(window.external.getHostEnvironmentValue("os-build"))["os-build"].split(".");(t[0]>10||10===t[0]&&t[1]>0||t[2]>=22e3)&&(e=!0)}}catch(e){}return o=!0===e||null,o}function $(){let e=!1;const t="os-sku";if(b)try{if(window&&window.external&&window.external.getHostEnvironmentValue(t)){const i=JSON.parse(window.external.getHostEnvironmentValue(t));e=i&&"192"===i[t]}}catch(e){}return s=!0===e||null,s}function U(e){if(!r&&""!==r&&b)try{if(!e||0===e.length)return;const t=document.cookie;if(t){let i="";e.forEach((e=>{const n=new RegExp("\\b"+e+"\\s*=\\s*([^;]*)","i").exec(t),r=n&&n.length>1?n[1]:"";""!==r&&(i+=e+"="+r+";")})),r=i}}catch(e){}return r}function H(e,t){if(!e||""===e)return"";let i=!1,n=null;if(b)try{if(n=new URL(e),!t||0===t.length)return;t.forEach((e=>{n.searchParams.has(e)&&(i=!0),n.searchParams.delete(e)}))}catch(t){return e}return i?n.toString():e}function _(e){if(!e||""===e)return"";let t=null,i=!1;if(b)try{t=new URL(e);const n=new RegExp(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/gi);t.searchParams.forEach((function(e,t){e.match(n)&&(i=!0)}))}catch(e){}return i?"":e}function W(e){const t="sign-in-refreshed-page";b&&a&&a.getItem(t)?(a.removeItem(t),(e.page=e.page||{}).isAutoRefresh=!0):function(e){return!e||!e.page||!0!==e.page.isAutoRefresh&&!1!==e.page.isAutoRefresh}(e)&&((e.page=e.page||{}).isAutoRefresh=!1)}function z(){let e;return{promise:new Promise((t=>{e=t})),resolve:e}}},24410:function(e,t,i){"use strict";i.d(t,{Y:function(){return r}});var n=i(38156);function r(e,t){const i=function(e){switch(e){case n.uH.AppStore:return 17;case n.uH.StructuredData:return 16;case n.uH.CmsPromotions:return 19;case n.uH.MicrosoftWebStore:return 20;case n.uH.XboxStore:return 21;case n.uH.OfficeStore:return 22;case n.uH.PartnerLinks:return 24;case n.uH.SponsoredContent:return 25;default:return 0}}(e)||function(e){switch(e){case n.wu.Navigate:return 14;case n.wu.Follow:return 26;case n.wu.Unfollow:return 27;case n.wu.More:return 28;case n.wu.Close:return 36;case n.wu.Share:return 37;case n.wu.Like:return 38;case n.wu.Dislike:return 39;case n.wu.Unlike:return 40;case n.wu.Undislike:return 41;case n.wu.Mute:return 42;case n.wu.Unmute:return 43;case n.wu.Cancel:return 44;case n.wu.Manage:return 45;default:return 0}}(t);if(0!==i)return i;if(e===n.uH.App){if(t===n.wu.Install)return 23;if(t===n.wu.Launch)return 18}return 0}},26779:function(e,t,i){"use strict";function n(e,t){let i;return(...n)=>{const r=performance.now();if(!i||r-i>=t)return i=r,e(...n)}}i.d(t,{P:function(){return n}})},32758:function(e,t,i){"use strict";i.d(t,{D:function(){return m}});var n=i(65135),r=i(31293),o=i(2040),s=i(65337),a=i(62661),c=i(37574),d=i(53076),l=i(63439),u=i(93450);const p="tp";var g=i(33379),h=i(67893);class m extends l.e{constructor(e,t,i,r,o,s,l){super(e,t,i,r,o,s,l);const p=(0,a.l)(),f=p.getSelectedPivot();if(f&&f.telemetryPivotCategory){let e;e.page.pivot=f.telemetryPivotCategory,n.M0.updatePageMetadata(e)}if((0,g.N)()){const e=u._.getInstance().rootReducer.connector(d.z.SharedState);e&&e.getCurrentState().useHistory?(0,h.lY)().addSwitchListener((e=>{window.requestAnimationFrame((()=>m.onPivotSwitch(e)))}),c.I.Telemetry):p.addSwitchListener(m.onPivotSwitch,c.I.Telemetry)}}static onPivotSwitch(e){let t;const i=e.newSelection;if(i&&(n.M0.addOrUpdateCustomProperty(p,i.display),t={feed:{id:i.pivotId,name:i.display,type:"xfeed"===i.telemetryPageName?"category filter":void 0},page:{content:{topic:i.display},pivot:""}},i.telemetryPivotCategory&&(t.page.pivot=i.telemetryPivotCategory),i.telemetryVertical&&(t.page.content.vertical=i.telemetryVertical),i.telemetryPageType&&(t.page.type=i.telemetryPageType),"gaming"===i.pivotId&&(t.feed.id=`gaming/${(0,r.ll)()}`),"following"===i.pivotId&&(t.feed.id=`following/${(0,r.ll)()}`),n.M0.updatePageMetadata(t)),e.oldSelection||m.isPivotManagerSwitched){if(m.isPivotManagerSwitched=!1,i.telemetryPageName)t.page.name=i.telemetryPageName;else if(i.pivotId)switch(i.pivotId){case"productivityHub":t.page.name="entnewshp";break;case"myfeed":case"myFeed":t.page.name="default";break;case"myInterests":t.page.name="cinterests";break;case"gaming":t.page.name="gaming";break;case"play":t.page.name="play";break;case"navigationPage":t.page.name="navigationPage";break;case"following":t.page.name="following",t.feed.id=`following/${o.uD.Manual}`}"gaming"===i.pivotId&&(t.feed.id=`gaming/${o.uD.Manual}`,t.page.isCorePV=!0);const e="IsGamer",r="IsXboxGamer",a="IsPCGamer",c=(0,s.$o)().getItem("userType");return n.M0.addOrUpdateTmplProperty(e,c&&c.includes(e)?"1":"0"),n.M0.addOrUpdateTmplProperty(r,c&&c.includes(r)?"1":"0"),n.M0.addOrUpdateTmplProperty(a,c&&c.includes(a)?"1":"0"),n.M0.updateRequestId(),n.M0.updatePageMetadata(t),void n.M0.sendPageView(null,!0)}}}m.isPivotManagerSwitched=!1},72467:function(e,t,i){"use strict";i.r(t),i.d(t,{TelemetryDataConnector:function(){return n.D},TelemetryDataReducer:function(){return r},ToolingInfo:function(){return o}});var n=i(32758);class r{reduce(e,t){return{}}}const o={experienceConfigSchema:{}}},37180:function(e,t,i){"use strict";i.d(t,{y:function(){return o}});var n=i(53899),r=i(38156);function o(e,t,i){let o=r.hP.SearchBox;switch(e.selectedFeedDisplaySetting){case"always":o|=r.hP.ContentFeed;break;case"headingsonly":o|=r.hP.HeadingsOnly;break;case"onscroll":o|=r.hP.ContentBelowTheFold;break;case"peek":o|=r.hP.Peek;break;default:o|=r.hP.Empty}return e.imageOfTheDayEnabled&&(o|=r.hP.BingImage),e.greetingEnabled&&t&&(o|=r.hP.GreetingEnabled),e.quickLinksEnabled&&!i&&(o|=r.hP.TopSites),e.currentLayout===n.nP.custom&&(o|=r.hP.CustomModeOption),o}},86088:function(e,t,i){"use strict";i.r(t),i.d(t,{TelemetryDataEdgeChromiumConnector:function(){return T},TelemetryDataEdgeChromiumReducer:function(){return k},ToolingInfo:function(){return A},edgeNextGetPageConfiguration:function(){return g.y}});var n=i(33940),r=i(7009),o=i(63439),s=i(82423),a=i(49042),c=i(55027),d=i(73252),l=i(84169),u=i(44979),p=i(35385),g=i(37180),h=i(75384),m=i(32717),f=i(53076),v=i(65932),y=i(65135),b=i(14989),S=i(16614),C=i(67462),w=i(33379);class T extends o.e{constructor(e,t,i,n,o,s,a){super(e,t,i,n,o,s,a),this.fireTelemetryBeacon=!0,this.isMSASignedin=!1,this.edgeChromiumPgltCookieName="pglt",this.cookieExpireInDays=182;const c=new URLSearchParams(window.location.search);this.firstLaunchParam=c.get("firstlaunch"),(0,v.Uo)(f.z.TopSitesLayoutData,(e=>{this.quickLinksCollapsedCurrentState=e.isTopSitesCollapsed})),(0,w.N)()&&(this.setupLayoutTelemetry(),this.getPrimaryAccountInfoAsync().then((e=>{this.isMSASignedin=e.accountType===r.l7.MSA})))}getLayoutStateAsync(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=yield(0,s.oU)(f.z.ChromiumPageSettings);return yield e.getLayoutStateAsync()}))}getPrimaryAccountInfoAsync(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=yield(0,s.oU)(f.z.ChromiumPageSettings);return yield e.getPrimaryAccountInfoAsync()}))}pageSettingTelemetry(e){if("visible"===document.visibilityState){const t=(0,g.y)(e,this.isMSASignedin,this.quickLinksCollapsedCurrentState);y.M0.updatePageConfiguration(t),this.setPgltCookie(String(t)),this.stampTmpl(e)}}initializeTelemetry(e){const t=y.M0.getPageMetadata();if(t&&t.contract&&t.contract.page){const t=(0,g.y)(e,this.isMSASignedin,this.quickLinksCollapsedCurrentState);y.M0.updatePageConfiguration(t),this.setPgltCookie(String(t)),this.stampTmpl(e)}const i=document.createEvent("Event");i.initEvent("trackvaluesupdated",!0,!0),document.dispatchEvent(i)}setupLayoutTelemetry(){this.getLayoutStateAsync().then((e=>{this.currentLayoutState=e,this.initializeTelemetry(e),a.B.toggleCollapsibleControl.registerObserver((e=>{const t=e&&e.params;if(!t||t.length<1)return;const i=t[0]&&1==t[0],n=t[1]&&1==t[1];if(this.quickLinksCollapsedCurrentState!=i&&!n){this.quickLinksCollapsedCurrentState=i;const e=(0,g.y)(this.currentLayoutState,this.isMSASignedin,this.quickLinksCollapsedCurrentState);y.M0.updatePageConfiguration(e),y.M0.sendPageView(null,!1)}}))})),p.J.updateLayout.registerObserver((e=>{const t=e&&e.params;!t||t.length<1||this.pageSettingTelemetry(t[0])})),c.I.layoutAnimationComplete.registerObserver((()=>{this.getLayoutStateAsync().then((e=>{if("1"===this.firstLaunchParam){if(!this.fireTelemetryBeacon)return;this.fireTelemetryBeacon=!1}this.currentLayoutState.backgroundImageTypePolicy===e.backgroundImageTypePolicy&&this.currentLayoutState.currentBackgroundImageType===e.currentBackgroundImageType&&this.currentLayoutState.currentLayout===e.currentLayout&&(0,S.Z)(this.currentLayoutState.customBackgroundImageInfo,e.customBackgroundImageInfo)&&this.currentLayoutState.greetingEnabled===e.greetingEnabled&&this.currentLayoutState.imageOfTheDayEnabled===e.imageOfTheDayEnabled&&this.currentLayoutState.market===e.market&&this.currentLayoutState.quickLinksEnabled===e.quickLinksEnabled&&this.currentLayoutState.selectedFeedDisplaySetting===e.selectedFeedDisplaySetting||(this.currentLayoutState=e,(0,h.TR)()||(0,m.eC)().then((()=>{y.M0.sendPageView(null,!1)})))}))}))}setPgltCookie(e){let t=this.edgeChromiumPgltCookieName;const{apptype:i,pagetype:n}=d.Al.ClientSettings?d.Al.ClientSettings:{apptype:void 0,pagetype:void 0};i&&n&&(t+="-"+d.Al.ClientSettings.apptype+"-"+d.Al.ClientSettings.pagetype),(0,C.sq)(t,e,this.cookieExpireInDays,l.jG.HostPage.topDomain)}stampTmpl(e){if(!b.SX)return;const t=(0,u.Nd)(this.requestContext.data.innerWidth,"innerWidth"),i=(0,u.Nd)(this.requestContext.data.outerWidth,"outerWidth");if(!t||!i)return;let n=0;const r=!(0,u.Nd)(this.requestContext.data.screenTop,"screenTop")&&!(0,u.Nd)(this.requestContext.data.screenY,"screenY")?0:14;e.verticalTabsOpened&&(n=e.verticalTabsCollapsed?48:256);const o=Math.round(1e4*(i-r-n)/innerWidth)/1e4;if(!o)return;const s=Math.round((i-r)/o);if(s){if(y.M0.addOrUpdateTmplProperty("edge.zoom",o+""),y.M0.addOrUpdateTmplProperty("edge_ntp.actualWidth",t+""),y.M0.addOrUpdateTmplProperty("edge_ntp.expectedWidth",s+""),e.verticalTabsOpened){if(y.M0.addOrUpdateTmplProperty("vertical_tabs.opened","1"),y.M0.addOrUpdateTmplProperty("vertical_tabs.collapsed",e.verticalTabsCollapsed?"1":"0"),s<=t)return;let i=1,n=1;for(let e=b.SX.length-1;e>1;e--){const r=b.SX[e].minViewportWidthPx;if(!r||1!=i&&1!=n)break;1==i&&s>r&&(i=e),1==n&&t>r&&(n=e)}i>n&&(y.M0.addOrUpdateTmplProperty("vertical_tabs.eligiblecol",i+1+""),y.M0.addOrUpdateTmplProperty("vertical_tabs.showncol",n+1+""))}this.stampHardware()}}stampHardware(){if(window&&window.navigator){const e=window.navigator;e.deviceMemory&&y.M0.addOrUpdateTmplProperty("edge.mem",e.deviceMemory+""),e.hardwareConcurrency&&y.M0.addOrUpdateTmplProperty("edge.concurrency",e.hardwareConcurrency+""),e.connection&&e.connection.effectiveType&&y.M0.addOrUpdateTmplProperty("edge.connection",e.connection.effectiveType+"")}}}class k{reduce(e,t){return{}}}const A={experienceConfigSchema:{}}},62947:function(e,t,i){"use strict";i.d(t,{I:function(){return r}});var n=i(55067);class r{}r.setMaxTiles=new n.C("setMaxTilesSignature")},20147:function(e,t,i){"use strict";i.d(t,{L:function(){return u}});var n=i(33940),r=i(63439),o=i(65932),s=i(49042),a=i(62947),c=i(53076),d=i(1584),l=i(33954);class u extends r.e{constructor(e,t,i,r,a,u,p){super(e,t,i,r,a,u,p);try{(0,o.Uo)(c.z.ChromiumPageSettings,(e=>(0,n.mG)(this,void 0,void 0,(function*(){e.isLoadCompleted&&(this.currentLayoutState=e,(0,d.NU)(this.currentLayoutState).then((e=>{s.B.toggleCollapsibleControl.getActionSender(this).send(e,!0)})))}))))}catch(e){l.k.log(e)}}updateCollapsedStatus(e,t=!1){s.B.toggleCollapsibleControl.getActionSender(this).send(e,t)}updateMaxTiles(e){a.I.setMaxTiles.getActionSender(this).send(e)}}},31172:function(e,t,i){"use strict";i.d(t,{A:function(){return s}});var n=i(30856),r=i(49042),o=i(62947);class s{reduce(e,t){if(!e)return{isTopSitesCollapsed:!0,maxTiles:8};if(!t)return e;let i;return n.G.handleAction(t,r.B.toggleCollapsibleControl,(t=>{i=Object.assign(Object.assign({},e),{isTopSitesCollapsed:t})})),n.G.handleAction(t,o.I.setMaxTiles,(t=>{i=Object.assign(Object.assign({},e),{maxTiles:t})})),i||e}}},88257:function(e,t,i){"use strict";i.d(t,{G:function(){return r}});var n=i(55067);class r{}r.followedTopics=new n.C("FollowedTopics"),r.followedTopicsFailed=new n.C("FollowedTopicsFailedSignature"),r.recommendedTopics=new n.C("RecommendedTopics"),r.recommendedTopicsFailed=new n.C("RecommendedTopicsFailed"),r.hiddenTopics=new n.C("HiddenTopics"),r.hiddenTopicsFailed=new n.C("HiddenTopicsFailed"),r.topic=new n.C("Topic"),r.topicFailed=new n.C("TopicsFailed"),r.topics=new n.C("Topics"),r.topicsFailed=new n.C("TopicsFailed"),r.topicGroup=new n.C("TopicGroup"),r.topicGroupFailed=new n.C("TopicGroupFailed"),r.updateTopicFollowedState=new n.C("UpdateTopicFollowedState"),r.updateTopicFollowedStateFailed=new n.C("UpdateTopicFollowedStateFailed"),r.updateTopicHiddenState=new n.C("UpdateTopicHiddenState"),r.updateTopicHiddenStateFailed=new n.C("UpdateTopicHiddenStateFailed")},36585:function(e,t,i){"use strict";i.d(t,{Og:function(){return g},dG:function(){return h},ti:function(){return p},v1:function(){return u}});var n=i(33940),r=i(81866),o=i(68364),s=i(26415),a=i(49972);let c,d,l=!1;function u(){return d}function p(){return l}function g(){return(0,n.mG)(this,void 0,void 0,(function*(){let e=0;return new Promise(((t,i)=>{if(l)t();else{const r=setInterval((function(){return(0,n.mG)(this,void 0,void 0,(function*(){l?(clearInterval(r),t()):e>30?(clearInterval(r),i()):e++}))}),50)}}))}))}function h(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t={};if(e&&(t.SiteName="www.msn.com"),d){t.MUID=d.muid;const e=yield function(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(c.isSignedIn&&"AAD"===c.accountType){const e=yield(0,r.c6)({refresh:!0,accountType:"AAD"});try{const t=JSON.parse(e);if(t.accessToken&&t.accessToken.length>0)return`Bearer ${t.accessToken}`}catch(e){(0,o.OO)(e,s.c5r.ViewsSapphireUserConfigError,"SapphireUserConfig getAccessToken error",`Detail error: ${(0,a.n)(e,!0)}`)}}if(c.isSignedIn&&"MSA"===c.accountType){const t=yield(0,r.c6)({refresh:!0,accountType:"MSA",type:"AccessToken",scope:e});try{const e=JSON.parse(t);if(e.succeed)return e.accessToken}catch(e){(0,o.OO)(e,s.c5r.ViewsSapphireUserConfigError,"SapphireUserConfig getAccessToken error.",`Detail error: ${(0,a.n)(e,!0)}`)}}return null}))}("service::api.msn.com::MBI_SSL");"MSA"===d.accountType&&e?t.UserAuthToken=e:"AAD"===d.accountType&&e&&(t.Authorization=e)}return t}))}},95460:function(e,t,i){"use strict";i.d(t,{Vo:function(){return h},XJ:function(){return g}});var n=i(33940),r=i(85594),o=i(76858),s=i(4734),a=i(7124);let c=!1;function d(){l()}const l=(0,a.Z)((()=>h(!1)),300),u=new Set;class p extends r.Pq{constructor(e){super(e),this.options=e}bind(e){this.target=e.targets[this.targetNodeId],c||(addEventListener("resize",d),c=!0),this.initialCalc(),u.add(this)}unbind(){u.delete(this)}initialCalc(){return(0,n.mG)(this,void 0,void 0,(function*(){yield(0,s.F_)(),this.recalculate(!1)}))}recalculate(e){return(0,n.mG)(this,void 0,void 0,(function*(){yield(0,o.y)();const t=this.target;if("fixed"!==t.style.position&&t.offsetWidth>0&&t.offsetHeight>0){const i={top:t.offsetTop,left:t.offsetLeft};if(e&&this.lastPosition){const e=this.lastPosition.left-i.left,n=this.lastPosition.top-i.top;if(e||n){const i=`translate(${e}px, ${n}px)`;t.style.transform=i,requestAnimationFrame((()=>{const e="transform .3s ease-out",i=t.style.transition;t.style.transition=i?i+", "+e:e,t.style.transform="translate(0, 0)",setTimeout((()=>{t.style.transition=i,t.style.transform=null}),300)}))}}this.lastPosition=i}}))}}function g(){return new p({})}function h(e){for(const t of u.values())t.recalculate(e)}r.m0.define(p)},23344:function(e,t,i){"use strict";i.d(t,{Fc:function(){return c},Fl:function(){return a},Nu:function(){return d}});var n=i(85594);const r={},o={};class s extends n.Pq{constructor(e){super(e),this.options=e,this.stickyClassApplied=!1,this.refreshSticky=()=>{const e=r[this.options.breakpointName];if(e<0)return;const t=scrollY>e;if(t!==this.stickyClassApplied){const e=this.options.stickyClassName;t?this.target.classList.add(e):this.target.classList.remove(e),this.stickyClassApplied=t}}}bind(e){this.target=e.targets[this.targetNodeId],this.refreshSticky();const{breakpointName:t}=this.options;let i=o[t];i||(i=new Set,o[t]=i),i.add(this),addEventListener("scroll",this.refreshSticky)}unbind(e){o[this.options.breakpointName].delete(this),removeEventListener("scroll",this.refreshSticky)}}function a(e){return new s(e)}function c(e,t){r[e]=t;const i=o[e];if(i)for(const e of i)e.refreshSticky()}function d(e){return r[e]}n.m0.define(s)},68848:function(e,t,i){"use strict";function n(e,t=!1){if(e){if(t&&e.display)return e.display;if(e.content)return e.content}return e}function r(e){return e.language&&e.market&&(e.language+"-"+(e.script?e.script+"-":"")+e.market).toLowerCase()||""}i.d(t,{H:function(){return n},p:function(){return r}})},53909:function(e,t,i){"use strict";i.d(t,{D3:function(){return s},KL:function(){return l},QG:function(){return u},mL:function(){return h},pG:function(){return c},q3:function(){return d},vc:function(){return a},zz:function(){return p}});var n=i(31573),r=i(12697);let o;var s,a;!function(e){e.JPG="jpg",e.PNG="png"}(s||(s={})),function(e){e[e.None=0]="None",e[e.Letterbox=1]="Letterbox",e[e.Scale=2]="Scale",e[e.Stretch=3]="Stretch",e[e.Crop=4]="Crop",e[e.FocalCrop=5]="FocalCrop",e[e.FacialCrop=6]="FacialCrop"}(a||(a={}));const c=90,d="www.bing.com/th",l=new RegExp(/bing\.(com|net)\/th/);function u(e,t){return`${(0,n.PQ)()?"//prod-streaming-video.msn.cn/":"//prod-streaming-video-msn-com.akamaized.net/"}${e}.${t||"mp4"}`}function p(e,t){return h(((0,n.PQ)()?"//img-s.msn.cn/tenant/amp/entityid/":"//img-s-msn-com.akamaized.net/tenant/amp/entityid/")+e,t)}const g=Math.ceil(4*Math.random())||4;function h(e,t){if(e&&l.test(e))return function(e,t){try{return m(new URL(e),t).href}catch(i){const n=m(new URL(`https://${e}`),t);return`//${n.host}${n.pathname}${n.search}`}}(e,t);const{focalRegion:i,backgroundColor:n}=t;let{width:a=0,height:c=0,format:d=s.JPG}=t,u="";if(i){const e=v(i.x1,i.x2),t=v(i.y1,i.y2);null!=e&&null!=t&&(u+=`&x=${e}&y=${t}`)}n&&(u+=`&b=${n}`);const p=null==t.mode?6:t.mode;if(6===p&&(u+="&u=t"),t.enableDpiScaling){if(!t.devicePixelRatio)throw new Error("A valid devicePixelRatio value must be provided when DPI scaling is enabled");const e=function(e){if(f()&&o)return o;if(e<1)return null;let t=e;(0,r.Z)(4*t)||(t=Math.ceil(10*t)/10);t>3&&(t=3);f()&&(o=t);return t}(t.devicePixelRatio);e&&(a=Math.round(a*e),c=Math.round(c*e))}return`${e}?w=${a}&h=${c}&q=${t.quality||60}&m=${p}&f=${d}${u}`}function m(e,t){(0,n.PQ)()&&(e.hostname=`ts${g}.cn.mm.bing.net`);const{width:i=0,height:r=0}=t,o=t.quality||c,s=t.crop||0===t.crop?t.crop:1;if(e.searchParams.set("w",`${i}`),e.searchParams.set("h",`${r}`),e.searchParams.set("qlt",`${o}`),e.searchParams.set("c",`${s}`),e.searchParams.set("rs","1"),t.enableDpiScaling){e.searchParams.set("dpr",`${t.devicePixelRatio}`);const i=t.padding||0;e.searchParams.set("p",`${i}`)}return e}function f(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}function v(e,t){if(null!=e&&null!=t)return Math.floor((e+t)/2)}},31573:function(e,t,i){"use strict";let n,r;function o(e){n=e}function s(){return n}function a(e){r=e}function c(){return r}i.d(t,{PQ:function(){return s},g8:function(){return c},jW:function(){return a},sV:function(){return o}})},98878:function(e,t,i){"use strict";i.d(t,{o:function(){return l}});var n=i(33940),r=i(27003),o=i(33379);class s{constructor(){this.cacheMap=new Map}has(e){return(0,n.mG)(this,void 0,void 0,(function*(){return!!this.cacheMap[e]}))}get(e){return(0,n.mG)(this,void 0,void 0,(function*(){return this.cacheMap[e]}))}set(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){return this.cacheMap[e]=t,!0}))}mSet(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return Object.keys(e).forEach((t=>{this.cacheMap[t]=e[t]})),!0}))}del(e){return(0,n.mG)(this,void 0,void 0,(function*(){delete this.cacheMap[e]}))}itemCount(){return(0,n.mG)(this,void 0,void 0,(function*(){return Object.keys(this.cacheMap).length}))}reset(){return(0,n.mG)(this,void 0,void 0,(function*(){this.cacheMap=new Map}))}}const a="__ServerCacheUpdateMap__";let c,d;const l=(0,o.N)()?null:{emitUpdate:function(){return(0,n.mG)(this,void 0,void 0,(function*(){if(!r.Gq.has(a))return;const e=r.Gq.get(a),t=[];return e.forEach(((e,i)=>{const n=d.mSet(e,i).then((()=>{const e=r.Gq.get(a);e&&e.delete(i)}));t.push(n)})),Promise.all(t)}))},initialize:function(e,t=!1){d=e,c=t},reset:function(){return(0,n.mG)(this,void 0,void 0,(function*(){yield d.reset()}))},set:function(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){if(c)return function(e,t,i){const n=r.Gq.get(a,(()=>new Map)),o=n.get(i);n.set(i,Object.assign(Object.assign({},o),{[e]:t}))}(e,t,i);yield d.set(e,t,i)}))},get:function(e){return(0,n.mG)(this,void 0,void 0,(function*(){return yield d.get(e)}))},has:function(e){return(0,n.mG)(this,void 0,void 0,(function*(){return yield d.has(e)}))},del:function(e){return(0,n.mG)(this,void 0,void 0,(function*(){return yield d.del(e)}))},itemCount:function(){return(0,n.mG)(this,void 0,void 0,(function*(){return yield d.itemCount()}))}};i.g.TEST_ENV&&!(0,o.N)()&&l.initialize(new s)},51019:function(e,t,i){"use strict";i.d(t,{Ye:function(){return G},fy:function(){return K}});var n=i(33940),r=i(26415),o=i(22704),s=i(59902),a=i(15443),c=i(99704),d=i(77316),l=i(75192),u=i(84754),p=i(73252),g=i(94788),h=i(47903),m=i(84169),f=i(32050),v=i(2040),y=i(46336),b=i(33379),S=i(27003),C=i(25845),w=i(25568),T=i(82890),k=i(26768),A=i(87298),I=i(82037),P=i(75384),E=JSON.parse('{"nextPageUrl":"","sections":[{"region":"river","subSections":[{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"followCarousel","isLocalContent":false,"galleryItemCount":0,"subCards":[],"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false,"isShowSelectMoreMessage":false}]},{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"InterestManager","isLocalContent":false,"galleryItemCount":0,"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false}]}]}],"isPartial":false}'),O=i(59294),M=i(65135),x=i(60813),D=i(44772),R=i(68364);class L{constructor(){this.infoPaneCardCount=0,this.riverCardCount=0,this.rightrailCardCount=0,this.denseRiverCardCount=0,this.riverNativeAdRelativeCount=0,this.riverCmsAdRelativeCount=0,this.infopaneCmsAdCount=0,this.mapRegionBasedWpoResponseForSuperFeed=(e,t,i,n)=>{if(!e||!e.sections.length)return{rawAdRegionTupleMap:F()};this.rawAdRegionTupleMap=F();const r={rawAdRegionTupleMap:this.rawAdRegionTupleMap},o=e.serviceContext?e.serviceContext.debugId:e.debugId,s=function(e){if(e.sections[0].region)return e;return{nextPageUrl:e.nextPageUrl,sections:[{region:"river",subSections:e.sections}],pageContext:e.pageContext}}(e),{nextPageUrl:a,sections:c,pageContext:d}=s;return r.nextPageUrl=a,r.pageContext=d,r.regions=c.map((e=>{const{subSections:r,region:s}=e;return{region:s,sections:r.map((({dataTemplate:e,layoutTemplate:r,cards:a})=>({dataTemplate:e,layoutTemplate:r,cards:a.map((e=>this.convertCardForSuperFeed(e,s,o,void 0,t,i,n)))})))}})),r}}convertCardForSuperFeed(e,t,i,n,o,s=0,a=0){let c;if("river"===t?(this.riverCardCount++,c=this.riverCardCount):"rightrail"===t&&(this.rightrailCardCount++,c=this.rightrailCardCount),Object.values(D.PL).includes(e.type)||(0,R.OO)(null,r.nsS,`${e.type} undefined error, it is not in OneServiceMetadataType`),e.subCards){let t=x.uq.NotDenseCard;if(e.type===D.PL.Dense&&n===D.PL.Infopane?t=x.uq.IsInfopaneDenseCard:e.type===D.PL.Dense&&n!==D.PL.Infopane&&(t=x.uq.IsRiverDenseCard),e.type===D.PL.Infopane||e.type===D.PL.GroupedContent||e.type===D.PL.ColdStartArticleFreCard||e.type===D.PL.RewardsDailySet||e.type===D.PL.TabbedInfopaneCard||t!==x.uq.NotDenseCard)return this.convertComplexCardForSuperFeed(e,t,i,o,a);if("TopStories"===e.subType)return this.convertNestedCard(e);if(e.type===D.PL.NewsAnswerModule)return this.convertNewsGroupsCard(e)}if(x.Qu.includes(e.type))return e;if(D.TU.includes(e.type)){let i=c;return"river"===t&&(e.type===D.PL.NativeAd?this.riverNativeAdRelativeCount++:e.type===D.PL.CmsAd&&(this.riverCmsAdRelativeCount>=s?(e.type=D.PL.NativeAd,this.riverNativeAdRelativeCount++):this.riverCmsAdRelativeCount++),o&&(i=e.type===D.PL.NativeAd?this.riverNativeAdRelativeCount:this.riverCmsAdRelativeCount)),this.convertCardForAds(e,t,i)}try{const{type:t,isBreaking:n,locale:r,category:o,images:s,topics:a=[],dataUrl:c,publishedDateTime:d,id:l,url:u,abstract:p="",title:g="",provider:h={},reasons:m,feed:f={},actions:v=[],externalVideoFiles:y=[],reactionStatus:b,commentStatus:S,reactionSummary:C,commentSummary:w,sourceId:T,topComments:k,topQuestions:A,colorSamples:I,isLocalContent:P,badges:E,relatedCards:O,recoDocMetadata:M,recoId:D,ri:R,offer:L,subType:F,videoMetadata:$,isWorkNewsContent:U,wpoMetadata:H}=e,_=B(s)||{},W=a.find((e=>e.feedId===f.id&&e.locale===r)),z=function(e){if(!e)return[];return e.split("/")}(u);let G=N(h.logoUrl);!G&&h.logo&&h.logo.url&&(G=N(h.logo.url));const V=v.map((e=>x.N[e]||e));return E&&E.some((e=>"followedPublisher"===e.type))&&V.push("followedPublisher"),{id:l,type:t,metadata:{abstract:p,abstractLength:p.length,titleLength:g.length,category:o||z[4],subCategory:z[5],primaryImage:{height:_.height,width:_.width},locale:r,feed:{id:f.id},kicker:[f],actions:V,reactionStatus:b,commentStatus:S,reactionSummary:C,commentSummary:w,topComments:k,topQuestions:A,reasons:m,relatedCards:O,topics:a,recoDocMetadata:M,recoId:D,ri:R,debugId:i,videoFiles:y,videoMetadata:$,wpoMetadata:H},cardContent:{id:l,type:j(t),title:g,uriTitle:z[6],abstract:p,isBreaking:n||0,tags:[W||{}],provider:{id:h.id,name:h.name,logo:{id:G},profileId:h.profileId,logoUrl:h.logoUrl,subscribable:!1,lightThemeSVGLogo:h.lightThemeSVGLogo,darkThemeSVGLogo:h.darkThemeSVGLogo},category:{product:o,label:void 0},locale:r,images:[{id:N(_.url),height:_.height,width:_.width,caption:_.title,focalRegion:_.focalRegion,attribution:_.attribution,url:_.url,colorSamples:_.colorSamples}],videoFiles:y,publishedDateTime:d,kicker:g,sourceHref:c,destinationUrl:u,sourceId:T,colorSamples:I,isLocalContent:P,isWorkNewsContent:U,badges:E,topics:a},offer:L,subType:F}}catch(t){return e}}convertCardForAds(e,t,i){return e.type===D.PL.NativeAd?("river"===t?this.rawAdRegionTupleMap.get("river").push(i):"rightrail"===t&&this.rawAdRegionTupleMap.get("rightrail").push(i),{type:D.PL.NativeAd,regionIndex:i,placement:{items:[]}}):e.type===D.PL.CmsAd?("river"===t&&this.rawAdRegionTupleMap.get("resriver").push(i),{type:D.PL.CmsAd,regionIndex:i,placement:{items:[]}}):e.type===D.PL.AmplifyAd||e.type===D.PL.BoostAdsBanner||e.type===D.PL.BoostAdsCoachmark||e.type===D.PL.EventSDCardAmplifyAds||e.type===D.PL.BoostAd?{type:e.type,regionIndex:i,data:e.data,id:`${e.type}-${e.section}-${i}`}:void 0}convertComplexCardForSuperFeed(e,t,i,n,r=0){const{id:o,type:s,title:a,wpoMetadata:c}=e;let d,l;try{d=e.subCards.map((e=>{if(t===x.uq.IsInfopaneDenseCard){if(e.type===D.PL.NativeAd)return this.rawAdRegionTupleMap.get("infopane-tab").push(this.infoPaneCardCount),{type:D.PL.NativeAd,regionIndex:this.infoPaneCardCount,placement:{items:[]}}}else if(t===x.uq.IsRiverDenseCard){if(this.denseRiverCardCount++,e.type===D.PL.NativeAd)return this.rawAdRegionTupleMap.get("dense-river").push(this.denseRiverCardCount),{type:D.PL.NativeAd,regionIndex:this.denseRiverCardCount,placement:{items:[]}}}else{if(this.infoPaneCardCount++,e.type===D.PL.NativeAd)return this.rawAdRegionTupleMap.get("infopane").push(this.infoPaneCardCount),{type:D.PL.NativeAd,regionIndex:this.infoPaneCardCount,placement:{items:[]}};if(e.type===D.PL.CmsAd){let t="resinfopane";return this.infopaneCmsAdCount>=r&&(e.type=D.PL.NativeAd,t="infopane"),this.rawAdRegionTupleMap.get(t).push(this.infoPaneCardCount),{type:e.type,regionIndex:this.infoPaneCardCount,placement:{items:[]}}}}if(e.type===D.PL.Dense||e.type===D.PL.TopicFeed||e.type===D.PL.TabbedInfopaneCardTab){let t=x.uq.IsInfopaneDenseCard;return s!==D.PL.Infopane&&s!==D.PL.TabbedInfopaneCard&&(t=x.uq.IsRiverDenseCard),this.convertComplexCardForSuperFeed(e,t,i,n)}return this.convertCardForSuperFeed(e,"none",i,s,n)}))}finally{l={id:o,type:s,subItems:d||[],metadata:{title:a},wpoMetadata:c},e.type===D.PL.TopicFeed&&(l={id:o,type:s,subItems:d||[],metadata:{title:a},wpoMetadata:c,feed:e.feed?e.feed:null})}return l}convertNestedCard(e){return e.subCards[0].type=e.type,e.subCards[0].subType=e.subType,e=e.subCards[0]}convertNewsGroupsCard(e){return{id:e.id,type:e.type,subType:e.subType,subCards:e.subCards||[]}}resetCardCountForSuperFeed(){this.infoPaneCardCount=0,this.riverCardCount=0,this.rightrailCardCount=0,this.denseRiverCardCount=0,this.riverNativeAdRelativeCount=0,this.riverCmsAdRelativeCount=0}}function F(){return new Map([["rightrail",[]],["infopane",[]],["river",[]],["resinfopane",[]],["resriver",[]],["infopane-tab",[]],["dense-river",[]]])}function N(e){if(!e)return"";const t=e.split("/");return B(t)&&t[t.length-1].replace(".img","")}function B(e,t=0){if(e)return e[t]}function j(e){switch(e){case D.PL.Article:return"ArticlePreview";case D.PL.Video:return"VideoPreview";case D.PL.Slideshow:return"SlideshowPreview";case D.PL.WebContent:return"WebContentPreview";default:return""}}var $=i(51125),U=i(3072),H=i(85663),_=i(95378),W=i(4734),z=i(1033);const G=1e4,V="gaming",q=["cbypass","activityId","prerender","timeOut","caller","infopaneCount","edgExpMask","skipRetry"];function Z(){const e=Z;return new Promise((t=>{void 0!==e.cache&&t(e.cache);const i=n=>{n>3&&(e.cache=null,t(null));const r=document.getElementById("ntp-diagnostics");r&&r.innerText?(e.cache=r,t(r)):(n++,setTimeout((()=>i(++n)),3e3))};i(0)}))}class K{constructor(e,t){this.shouldRetryInOtherDomain=!1,this.traceInfo=[],this.shouldResetRightRailPromise=!1,this.wpoRightRailPromise=new O.o,this.noContentRetryCount=0,this.maxContentRetryCount=5,this.isPartialResponse=e=>!!(e&&e.serviceContext&&e.serviceContext.preRenderDisabled),this.getAuthTrail=()=>{try{return(0,U.pD)()}catch(e){M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.MCu.AuthCompressedRecordsNotFoundNTP),{message:"Error throwed when getCompressedRecords doesn't return anything for NTP"}))}},this.mapperHelper=new L,this.config=e,this.initializeRequest(),this.isXFeed=t}fetch(e,t,i,o,s){return(0,n.mG)(this,void 0,void 0,(function*(){let n=this.config.initialRequest;if(this.shouldResetRightRailPromise&&(this.wpoRightRailPromise=new O.o,this.shouldResetRightRailPromise=!1),e&&(e.feedId||e.nextPageUrl||(e.feedId=n.feedId),n=Object.assign(Object.assign({},n),e)),!n)return M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.D2d.RiverConfigurationIssue),{message:"default WpoService fetch configuration was invalid"})),this.responseStatus=k.F.InvalidRequest,{status:this.responseStatus,isStatic:this.isStatic,regions:void 0,rawAdRegionTupleMap:new Map([["rightRail",[]],["infopane",[]],["river",[]],["resinfopane",[]],["resriver",[]],["infopane-tab",[]]])};const a=yield this.fetchRiverSectionFeedLayoutData(n,t,i);return t===C.V.init&&!(0,b.N)()&&a&&z.SI.setSSRInitialFeedResponse(a),this.handleResponseMapForSuperFeed(n,a,o,s)}))}handleResponseMapForSuperFeed(e,t,i,n){var o;if(this.isPartialResponse(t))return t&&t.serviceContext&&t.serviceContext.debugId&&M.M0.addOrUpdateCustomProperty("PartialId",t.serviceContext.debugId),{status:this.responseStatus,isStatic:!1,rawAdRegionTupleMap:new Map([["rightRail",[]],["infopane",[]],["river",[]],["resinfopane",[]],["resriver",[]],["infopane-tab",[]]]),isPartial:t.isPartial,serviceContext:t.serviceContext};const s=new Set(["msft-dense-nine-card"]);(null===(o=null==t?void 0:t.sections)||void 0===o?void 0:o.length)>0&&"river"===t.sections[0].region&&t.sections[0].subSections.forEach(((e,i)=>{s.has(e.layoutTemplate)&&(t.sections[0].subSections[i].cards=[{type:"densetab",isLocalContent:!1,galleryItemCount:0,subCards:e.cards}])}));const a=this.mapperHelper.mapRegionBasedWpoResponseForSuperFeed(t,this.config.useRelativeAdPlacement,i,n),{nextPageUrl:c,regions:d,rawAdRegionTupleMap:l,pageContext:u}=a;let p;this.responseStatus===k.F.Success?(p=Object.assign(Object.assign({},e),{nextPageUrl:c}),this.noContentRetryCount=0):this.responseStatus===k.F.Failed?(p=Object.assign({},e),this.noContentRetryCount=0):this.responseStatus===k.F.NoContent&&(this.noContentCannotRetry()||(p=Object.assign({},e),this.noContentRetryCount++),M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.D2d.WpoResponseFetchNoContent),{pb:Object.assign(Object.assign({},r.D2d.WpoResponseFetchNoContent.pb),{isFirstPage:!e.nextPageUrl,url:e.nextPageUrl,requestId:e.requestId,status:this.responseStatus,noContentRetryCount:this.noContentRetryCount})})));return{regions:d,nextPageRequest:p,rawAdRegionTupleMap:l,status:this.responseStatus,isStatic:this.isStatic,traceIdIndex:t?t.traceIdIndex:void 0,metadata:t?t.metadata:void 0,userType:t?t.userType:void 0,pageContext:u}}fetchRiverSectionFeedLayoutData(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){const n=(null===p.Al||void 0===p.Al?void 0:p.Al.IsPrerender)||this.config.disableWorker,r=t===C.V.init||t===C.V.refresh;if((0,b.N)()&&r&&window.ntpSSRData&&window.ntpSSRData.wpoFeed){const e=window.ntpSSRData.wpoFeed;return e&&e&&e.sections&&e.sections.length>0?this.responseStatus=k.F.Success:this.responseStatus=k.F.NoContent,delete window.ntpSSRData.wpoFeed,e}if(t!==C.V.init||this.isXFeed||n||e.feedName===V&&e.dontUseWorkerForFeed)this.checkWebWorkerUrl=!1;else{this.checkWebWorkerUrl=!1;let t="myfeed";e.feedName===V&&(t="gaming"),"following"===e.feedName&&(t="following");const n=this.config.removeTimeoutWebworker?void 0:1e3;i&&i();const s=yield(0,g.ot)({id:t},n),c=s&&s.payload;if(c){new h.h(new URL(c.nextPageUrl).search);const e=l.sj.MultiColumn;if(l.sj.MultiColumn===e&&s.fetched){this.checkWebWorkerUrl=!0,this.responseStatus=k.F.Success;(0,o.Ou)().isFeedFromWW=1;const e=c.traceId;return c.traceIdIndex=this.addOrUpdateIdxId(e,r),(0,b.N)()&&this.updateDiagnosticDataIntoElement(c.traceId,c.debugId),c.tmpl&&M.M0.addOrUpdateTmplString(c.tmpl),a.n.publish(a.j.userIsSignedIn,{isSignedIn:c.isSignedIn,src:"WW-wcp"}),c}}}if(z.SI.enableEarlyMainFeedRequest&&t===C.V.init){const t=(0,b.N)()?G:void 0,n=yield z.SI.getEarlyWpoFeedData(t);if(this.responseStatus=null==n?void 0:n.responseStatus,z.SI.enableEarlyMainFeedRequest=!1,this.responseStatus===k.F.Success||!(0,b.N)())return n;if(!e.skipRetry){const t=yield this.fetchFromWpoService(e,r,i);if(t)return t}}else{const t=yield this.fetchFromWpoService(e,r,i);if(t)return t}if(this.shouldRetryInOtherDomain){e.domainOverride=w.hM,e.requestPathOverride=w.hZ;const t=yield this.fetchFromWpoService(e,r,void 0,!0);if(t)return t}return this.getCachedResponse(e)}))}fetchFromWpoService(e,t,i,a=!1){var l,y,C,O,x,D,R;return(0,n.mG)(this,void 0,void 0,(function*(){const n=null===p.Al||void 0===p.Al?void 0:p.Al.IsPrerender,L=(0,P.TR)();!(0,b.N)()&&this.config.requestToOrigin&&(e.domainOverride=w.hM,e.requestPathOverride=w.hZ);const F=!t&&e.paginationTimeoutMs?e.paginationTimeoutMs:e.timeoutMs,N=L&&t?2e3:F,B=m.jG.ShouldUseFdheadQsp?null===(y=null===(l=m.jG.CurrentRequestTargetScope)||void 0===l?void 0:l.pageExperiments)||void 0===y?void 0:y.join(","):void 0;let j;(0,b.N)()&&(j=!(window&&window.chrome&&window.chrome.embeddedSearch),M.M0.addOrUpdateTmplProperty("privatew",`${j}`));const U=Object.assign(Object.assign({},e),{audienceMode:null===(C=m.jG.CurrentRequestTargetScope)||void 0===C?void 0:C.audienceMode,enableRightRailColumn:e.powerRightRailWithWpo,fdhead:B,isXFeed:this.isXFeed,nextPageUrl:e.useNextPageUrl&&e.nextPageUrl,requestType:c.xd.wpoService,timeoutMs:e.query&&e.customFeedTimeoutMs?e.customFeedTimeoutMs:N,refreshType:L&&!(0,u.ZE)()?c.Rx.Bgtask:void 0,isDhp:L&&this.isDhp(),isRetry:a,private:j}),H=yield d.q.requestInit(U),W=yield d.q.buildServiceRequestURL(U),z=decodeURIComponent(W.href);this.requestQueryParams=new h.h(W.search),e.serviceUrl=z;const V=(0,o.Ou)();let q;if(V[T.p.wpoCallStart]=Math.round((0,o.UE)()),W.search=this.requestQueryParams.toString(),this.checkWebWorkerUrl){const e=(0,g.Fr)("WebWorkerInitFeedUrl");e&&e.payload&&e.payload!==W.href&&M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.D2d.WpoServiceUrlAndWebWorkerUrlDifferent),{message:"Wpo feed fetch url does not match web worker"}))}const Z=e.useNextPageUrl&&e.nextPageUrl,K=!Z;let Q,J;try{let c;c=(0,b.N)()?(null==e?void 0:e.overrideCSRTimeoutInMs)||G:(null==e?void 0:e.overrideSSRTimeoutInMs)||800,i&&i(),J=(()=>{let e=0;const t=K?r.D2d.WpoResponseReturnSlowAtFirstPage:r.D2d.WpoResponseReturnSlowAtSecondPage;return setInterval((()=>{e+=1,M.M0.sendAppErrorEvent(Object.assign(Object.assign({},t),{pb:Object.assign(Object.assign({},t.pb),{url:z,isFirstPage:K,activityId:m.jG.ActivityId,isPrerender:L}),message:`Request didn't finish in ${5e3*e}ms`}))}),5e3)})();const d=yield(0,A.w)((()=>(0,b.N)()?(0,A.O)(z,H,c,e.skipRetry):(0,f.Sm)(z,c,H,void 0,void 0,!0)),"WpoCardProvider.fetch",c,e.skipRetry);let l,u,p,g,h,y;if(J&&(clearInterval(J),J=null),d){const{ok:i,status:n,statusText:o,headers:s}=d;if(Q=s&&s.get("ddd-debugid"),S.Gq.set("OneServiceResponseDebugId",Q),"following"===e.feedName){const e=new URLSearchParams(W.search),i="activityId",o=e.get(i)||"";if(o&&o!=m.jG.ActivityId&&M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.D2d.MismatchedActivityID),{message:"ActivityId mismatched",pb:Object.assign(Object.assign({},r.D2d.MismatchedActivityID.pb),{clientActivityId:m.jG.ActivityId,serviceSideActivityId:o,debugId:Q})})),(204===n||404===n)&&K&&t){const e=E;return 204===n&&(null===(D=null===(x=null===(O=null==e?void 0:e.sections)||void 0===O?void 0:O[0].subSections)||void 0===x?void 0:x[0].cards)||void 0===D?void 0:D[0])&&(e.sections[0].subSections[0].cards[0].isShowSelectMoreMessage=!0),e}}i?e.disableContent||204!==n||(l=K?r.D2d.WpoResponseNoContentAtFirstPage:r.D2d.WpoResponseNoContentAtSecondPage,g=!1):(l=e.disableContent?r.k28:K?r.D2d.WpoServiceErrorAtFirstPage:r.D2d.WpoServiceErrorAtSecondPage,u=n,p=o,g=!0)}else l=e.disableContent?r.k28:K?r.D2d.WpoServiceErrorAtFirstPage:r.D2d.WpoServiceErrorAtSecondPage,g=!0;if(l){const e=(0,_.Z)(H,"headers.Authorization");if(M.M0.sendAppErrorEvent(Object.assign(Object.assign({},l),{pb:Object.assign(Object.assign({},l.pb),{url:decodeURIComponent(W.href),requestHeaders:JSON.stringify(e&&e.headers),status:u,statusText:p,isFirstPage:K,activityId:m.jG.ActivityId,isPrerender:L,isRetriedRequest:a,isInitializedAsPrerenderPage:n,debugId:Q})})),g)return void(this.responseStatus=k.F.Failed)}const C=d.headers&&d.headers.get("X-Statics-Fallback");if(d.headers){if(C){const e=L?r.D2d.StaticContentLoadedPrerender:r.D2d.StaticContentLoaded;M.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{pb:Object.assign(Object.assign({},r.D2d.StaticContentLoaded.pb),{url:decodeURIComponent(W.href),isFirstPage:K,activityId:m.jG.ActivityId,isPrerender:L,isInitializedAsPrerenderPage:n,debugId:Q,isRetriedRequest:a}),message:"Fell back to static content on the feeds call"})),this.isStatic=!0}const e=d.headers.get("ddd-tmpl");M.M0.addOrUpdateTmplString(e);const i=d.headers.get(v.rD.traceId);h=this.addOrUpdateIdxId(i,t),(0,$.Dz)(Q,!1),(0,b.N)()&&this.updateDiagnosticDataIntoElement(i,Q),y=d.headers.get(v.rD.userType)}if(!Z){const e=V[T.p.wpoCallStart],t=V[T.p.wpoResponseBack]=Math.round((0,o.UE)());V[T.p.feedRequestFG]=t-e,(0,s.QP)({name:T.p.feedRequestFG,startTime:e,endTime:t})}if(![r.D2d.WpoResponseNoContentAtFirstPage,r.D2d.WpoResponseNoContentAtSecondPage,r.D2d.WpoResponseNoContent].includes(l)){const t=(0,b.N)()&&(0,o.UE)();if(q=yield d.json(),t&&V&&(V.FeedResponseJsonReadTime=Math.round((0,o.UE)()-t)),null==q?void 0:q.swCacheEnabled){M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.UOk.SWCacheTriggered),{pb:Object.assign(Object.assign({},r.UOk.SWCacheTriggered.pb),{url:decodeURIComponent(W.href),isFirstPage:K,activityId:m.jG.ActivityId,isPrerender:L,isInitializedAsPrerenderPage:n,debugId:Q,isRetriedRequest:a}),message:"Service Worker Cached Data Triggered"}));let e=null,t="";switch(null==q?void 0:q.cacheTriggeredReason){case r.UOk.SWTriggeredDueToFetchError.id:e=r.UOk.SWTriggeredDueToFetchError,t="Service Worker Triggered due to fetch error: "+q.cacheTriggeredErrorMessage;break;case r.UOk.SWTriggeredDueToWpoServiceError.id:e=r.UOk.SWTriggeredDueToWpoServiceError,t="Service Worker Triggered due to wpo service error";break;case r.UOk.SWTriggeredDueToWpoReponseNoContent.id:e=r.UOk.SWTriggeredDueToWpoReponseNoContent,t="Service Worker Triggered due to Status 204 no content";break;case r.UOk.SWTriggeredDueToStaticContentLoaded.id:e=r.UOk.SWTriggeredDueToStaticContentLoaded,t="Service Worker Triggered due to static content loaded";break;case r.UOk.SWTriggeredDueToEmptySection.id:e=r.UOk.SWTriggeredDueToEmptySection,t="Service Worker Triggered due to wpo service returns empty section";break;case r.UOk.SWTriggeredDueToEmptySectionForStaticFallBack.id:e=r.UOk.SWTriggeredDueToEmptySectionForStaticFallBack,t="Service Worker Triggered due to static fallback returns empty section"}e&&M.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{pb:Object.assign(Object.assign({},e.pb),{url:decodeURIComponent(W.href),isFirstPage:K,activityId:m.jG.ActivityId,isPrerender:L,isInitializedAsPrerenderPage:n,debugId:Q,isRetriedRequest:a}),message:t}))}if(q.traceIdIndex=h,q.userType=y,q.debugId=Q,!(e.disableContent||this.isPartialResponse(q)||q.sections&&q.sections.length>0)){const e=C?r.D2d.WpoServiceEmptySectionForStaticFallBack:r.D2d.WpoServiceEmptySection;M.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{pb:Object.assign(Object.assign({},e.pb),{url:decodeURIComponent(W.href),isFirstPage:K,activityId:m.jG.ActivityId,isPrerender:L,isInitializedAsPrerenderPage:n,debugId:Q,isRetriedRequest:a}),message:"Empty Section on the feed call"}))}}}catch(t){J&&(clearInterval(J),J=null);const i=["Service Request Timed out","Fetch for https://"],o=["TypeError: Failed to fetch"];let s;const c=(0,I.fK)();if(this.shouldRetryInOtherDomain=K&&!e.domainOverride&&!c&&!(!(0,b.N)()&&this.config.requestToOrigin),i.some((e=>{var i;return null===(i=null==t?void 0:t.message)||void 0===i?void 0:i.includes(e)}))){const e=L?r.D2d.ServiceTimeoutPrerender:r.D2d.ServiceTimeout;s=K?e:r.D2d.ServiceTimeoutNonFirstPage,s===r.D2d.ServiceTimeout&&this.shouldRetryInOtherDomain&&!a&&(s=r.D2d.ServiceTimeoutBeforeRetry)}else s=o.some((e=>{var i;return null===(i=null==t?void 0:t.message)||void 0===i?void 0:i.includes(e)}))?this.shouldRetryInOtherDomain?r.D2d.TypeErrorIssueIsNotLastTry:r.D2d.TypeErrorIssueIsLastTry:this.shouldRetryInOtherDomain?r.D2d.OtherIssueIsNotLastTry:r.D2d.OtherIssueIsLastTry;const d=(0,_.Z)(H,"headers.Authorization");return M.M0.sendAppErrorEvent(Object.assign(Object.assign({},s),{message:"Error while fetching WpoService response",pb:Object.assign(Object.assign({},s.pb),{customMessage:`Error: ${t}`,url:decodeURIComponent(W.href),requestHeaders:JSON.stringify(d.headers),isFirstPage:K,activityId:m.jG.ActivityId,isPrerender:L,isInitializedAsPrerenderPage:n,domainOverride:null!==(R=e.domainOverride)&&void 0!==R?R:"",isRetry:this.shouldRetryInOtherDomain,debugId:Q,isRetriedRequest:a,isRetryBackupDomainFlight:c})})),void(this.responseStatus=k.F.Failed)}return q&&q&&q.sections&&q.sections.length>0||this.isPartialResponse(q)?this.responseStatus=k.F.Success:this.responseStatus=k.F.NoContent,q}))}getCachedResponse(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(e.skipRetry&&(0,b.N)()&&window.caches&&e.serviceUrl&&e.serviceWorkerCachePrefix)try{const t=(yield caches.keys()).find((t=>t.startsWith(e.serviceWorkerCachePrefix)));if(!t)return;const i=yield caches.open(t);if(!i)return;const n=this.normalizeUrl(e.serviceUrl),o=((yield i.keys())||[]).find((e=>e.url&&this.normalizeUrl(e.url)===n));if(o)return M.M0.sendAppErrorEvent(Object.assign({},r.D2d.CacheStorageFallbackReturned)),yield o.json();M.M0.sendAppErrorEvent(Object.assign({},r.D2d.CacheStorageFallbackNotFound))}catch(t){M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.D2d.CacheStorageFallbackNotFound),{message:"An error occurred while retrieving a cached response. "+t.message,pb:Object.assign(Object.assign({},r.D2d.CacheStorageFallbackNotFound.pb),{isFirstPage:!e.nextPageUrl,url:e.serviceUrl,requestId:e.requestId,stack:t.stack})}))}}))}normalizeUrl(e){try{const t=new URL(e);q.forEach((e=>t.searchParams.delete(e)));return decodeURIComponent(t.toString()).replace("/serviceak/","/service/").replace("api.msn.com/","assets.msn.com/").replace("api.msn.cn/","assets.msn.cn/")}catch(e){return""}}clearCache(){this.mapperHelper.resetCardCountForSuperFeed()}initializeRequest(){const{initialRequest:e}=this.config;null!==e&&(0,H.isNullOrUndefined)(e.useNextPageUrl)&&(e.useNextPageUrl=!0)}addOrUpdateIdxId(e,t){return M.M0.addOrUpdateIdxId(e,t)}updateDiagnosticDataIntoElement(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){try{(e||t)&&this.traceInfo.push({id:e,debug:t}),yield Promise.all([(0,W.F_)(),(0,P.lr)()]);const i=yield Z();if(i&&i.innerText){const e=JSON.parse(i.innerText);Object.assign(e,{traceInfo:this.traceInfo}),Object.assign(e,{prgDiagnostics:this.getPrgDiagnostics()}),Object.assign(e,{authTrail:this.getAuthTrail()}),i.innerText=JSON.stringify(e)}}catch(e){M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.D2d.UpdateIdxidToDomFail),{message:"Error throwed during update idxid into diagnostic element"}))}}))}getResponseStatus(){return this.responseStatus}_requestQueryParams(){return this.requestQueryParams}isDhp(){var e;return(null===(e=window.location.search)||void 0===e?void 0:e.indexOf("startpage=1"))>-1}getPrgDiagnostics(){const e=p.Al&&p.Al.Diagnostics||{};return e&&(0,y.fB)(JSON.stringify(e))}noContentCannotRetry(){return this.noContentRetryCount>=this.maxContentRetryCount}}},26768:function(e,t,i){"use strict";var n,r;i.d(t,{F:function(){return n}}),function(e){e[e.InvalidRequest=0]="InvalidRequest",e[e.Success=1]="Success",e[e.NoContent=2]="NoContent",e[e.Failed=3]="Failed"}(n||(n={})),function(e){e.river="river",e.rightRail="rightrail"}(r||(r={}))},60813:function(e,t,i){"use strict";i.d(t,{N:function(){return o},Qu:function(){return s},uq:function(){return n}});var n,r=i(44772);!function(e){e[e.IsInfopaneDenseCard=0]="IsInfopaneDenseCard",e[e.IsRiverDenseCard=1]="IsRiverDenseCard",e[e.NotDenseCard=2]="NotDenseCard"}(n||(n={}));const o={liked:"like",unliked:"unlike",saved:"save"},s=[r.PL.AutosCarousel,r.PL.AutosEntityList,r.PL.BeaconProviderUpsell,r.PL.BingHealthCovid19StatsCard,r.PL.BingHealthFitnessCard,r.PL.BingVideoCarousel,r.PL.CasualGamesCarousel,r.PL.ChannelCarousel,r.PL.CommuteCard,r.PL.CompanyNewsCard,r.PL.DigestCard,r.PL.EdgeShoppingCard,r.PL.Elections,r.PL.EsportsCasualGames,r.PL.EsportsLiveStream,r.PL.EsportsMatch,r.PL.EsportsTournament,r.PL.EventSDCardShopping,r.PL.EventSDCardSportsMIT1,r.PL.EventSDCardSportsMIT2,r.PL.EventSDCardSportsMIT3,r.PL.EventSDCardWorldCup,r.PL.EventSDCardWorldCup2,r.PL.GamingClip,r.PL.GamingClipsCarousel,r.PL.GamingCompete,r.PL.GamingHighlight,r.PL.GamingHighlightClipsCarousel,r.PL.GamingHighlightsCarousel,r.PL.GamingInterestGroup,r.PL.GamingLiveStream,r.PL.GamingLiveStreamCarousel,r.PL.GamingMatch,r.PL.GamingRecentlyPlayed,r.PL.GamingRecommendedGames,r.PL.GamingReddit,r.PL.GamingRewards,r.PL.GamingTournament,r.PL.GamingUpcomingGames,r.PL.GamingVideoCarousel,r.PL.GamingVod,r.PL.GoBig,r.PL.GroceryCouponSdCard,r.PL.HealthTipCard,r.PL.Horoscope,r.PL.HotListCard,r.PL.IndustryNewsCard,r.PL.Inspiration,r.PL.InterestManagementCard,r.PL.LinkedInCard,r.PL.LocalNewsFeed,r.PL.Lottery,r.PL.MangaCard,r.PL.Marketplace,r.PL.MarketplaceEvent,r.PL.MicrosoftFeedCard,r.PL.MobileRewardsCard,r.PL.MobileShoppingCard,r.PL.MobileShoppingCard2,r.PL.MobileShoppingCard3,r.PL.MobileShoppingCard4,r.PL.MoneyCrypto,r.PL.MoneyInfo,r.PL.MoneyMarketBrief,r.PL.MoneyPreWL,r.PL.MoneyTopicStripe,r.PL.MyBriefRiverCard,r.PL.OnThisDay,r.PL.PrayerTimesCard,r.PL.PrismCarouselCard,r.PL.Qna,r.PL.RealEstateCard,r.PL.Recipes,r.PL.RecommendedCardFeed,r.PL.RecommendedInterests,r.PL.RecommendedSearchCarousel,r.PL.Rewards,r.PL.RewardsDailySet,r.PL.SectionHeader,r.PL.ShoppingCard,r.PL.ShoppingCarousel,r.PL.ShoppingRiver,r.PL.SportsMatch,r.PL.SportsOlympics,r.PL.StockQuote,r.PL.SuperListCard,r.PL.TabbedInfopaneCard,r.PL.TopStories,r.PL.TopicFeed,r.PL.TrafficDelays,r.PL.TravelDestinationCard,r.PL.TravelDestinationCarouselCard,r.PL.TravelInspirationCard,r.PL.Trending,r.PL.TrendingInTenMinutes,r.PL.TrendingSearchCard,r.PL.TrendingTopics,r.PL.Upsell,r.PL.UserInterestTopic,r.PL.UserInterestTopicAndProvider,r.PL.VideoShoppingCard,r.PL.VideoShoppingCarouselCard,r.PL.WeatherSummary,r.PL.quizcard]},75970:function(e,t,i){"use strict";function n(e,t){var i;const{audienceMode:n="",locale:r={},pageType:o=""}=t||{},s=null!==(i=r.content)&&void 0!==i?i:r,{language:a,market:c}=s;return`wpo_data_ ${n}_${a}_${c}_${o}_${e}`}function r(e){return e&&e.treatments&&e.treatments.length?e.treatments.filter((e=>e&&e.id&&!e.properties)).map((e=>e.id)):null}i.d(t,{U:function(){return r},_:function(){return n}})},77331:function(e,t,i){"use strict";var n;i.d(t,{_h:function(){return n}}),function(e){e.topSites="topsites",e.layoutPromotion="layoutPromotion",e.topSitesPromotion="topsitesPromotion",e.topsitesCollapse="topsitesCollapse",e.recommendedsitesCollapse="recommendedsitesCollapse",e.bellCoachMark="bellCoachMark",e.pageFeedLayout="pageFeedLayout",e.backupRegionStatus="backupRegionStatus",e.searchBoxCollapse="searchBoxCollapse",e.followedTopics="followedTopics",e.feedContextualFeedback="feedContextualFeedback"}(n||(n={}))},1033:function(e,t,i){"use strict";i.d(t,{C5:function(){return y},SI:function(){return C}});var n=i(33940),r=i(22704),o=i(26415),s=i(68364),a=i(77331),c=i(59049),d=i(970),l=i(84169),u=i(65337),p=i(25568),g=i(75970),h=i(65135),m=i(4734),f=i(27003),v=i(99590);const y={Request:"Wpo.Treatments.Request",Response:"Wpo.Treatments.Response",StoreInit:"Wpo.Treatments.StoreInit",Parsed:"Wpo.Treatments.Parsed",Stored:"Wpo.Treatments.Stored"},b="ssr-feed-data";class S{constructor(){this.wpoContextWindowObjectPropertyName="_wpoContext",this.timeOutInMilliSeconds=100,this.oneServiceTreatmentFlight="prg-wpo-ostreat",this.wpoFeedDataCache=new c.v("WpoFeedDataCache"),this.enableEarlyMainFeedRequest=!1}static getInstance(){return f.Gq.get("__WpoServiceClient__",(()=>new S))}initialize(e,t,i,o=!0,s){return(0,n.mG)(this,void 0,void 0,(function*(){this.optimizationDataReceived||(this.isNthCall=!o,o?(0,m.F_)().then((()=>{const n=Math.round(performance.now());this.getWpoServiceDataAndStore(t,e,i,s),(0,r.Ou)().WpoInit=Math.round(performance.now()-n)})):yield this.getWpoServiceDataAndStore(t,e,i,s))}))}getWpoTreatmentsUrl(e,t,i,n){const r=(0,d.L)(),o=`${t.locale.content.language}-${t.locale.content.market}`,s=t.audienceMode,a=t.pageType,c=t.pageExperiments,u=c&&c.indexOf(this.oneServiceTreatmentFlight)>-1;let g=`${u?"https://api.msn.com/wposervice/treatments":`${location.origin}/optimizer/api/optimize/treatments`}?appType=${e}&market=${o}&audiencemode=${s}&pageType=${a}`;if(l.jG.ShouldUseFdheadQsp){g+=`&fdhead=${c&&c.join()}`}u&&(g+=`&ocid=${p.m8}&apikey=${l.jG.OneServiceApiKey}&User=${l.jG.UserId}&activityId=${i}`),n&&(g+=`&pgc=${n}`);const h=r.get(p.hE.wpoitems);return h&&(g+=`&wpoitems=${h}`),g}onWPOFeedReady(e){this.wpoFeedDataCache.subscribe(b,e)}setSSRInitialFeedResponse(e){this.wpoFeedDataCache.set(b,e)}resetFeedDataCache(){this.wpoFeedDataCache.clear()}getWpoServiceDataAndStore(e,t,i,r){return(0,n.mG)(this,void 0,void 0,(function*(){let n,s;try{const a=(null==t?void 0:t.pageExperiments)||[];if(a.length>0){const e=null===l.jG||void 0===l.jG?void 0:l.jG.UserId;if(a.includes(this.oneServiceTreatmentFlight)&&(null==e||null==e)){const e="Missing userId for wpo treatments",t=`locale=${l.jG.CurrentMarket}`;return void this.logAppError(o.Ukr,e,t)}}const c=window[this.wpoContextWindowObjectPropertyName];let d,u;if(c)d=c.treatmentsPromise,u=c.treatmentsPromiseAbortController;else{n=this.getWpoTreatmentsUrl(e,t,i,r);const o=n.includes(p.hM);d=fetch(n,{method:"GET",credentials:"include",headers:o?{}:{activityId:i}})}u&&(s=setTimeout((()=>{u.abort()}),this.timeOutInMilliSeconds));const g=yield d;if(clearTimeout(s),!g.ok){const e=`WPO treatments call received non 20* response: ${g.statusText}`,t=`activityId:${i},isNthCall:${this.isNthCall},Url: ${n}.Status code received: ${g.statusText}`;return void this.logAppError(o.ra1,e,t)}this.optimizationDataReceived=!0;let h=null;if(200===g.status){h=yield g.json();const e=g.headers.get("ddd-tmpl");e&&(h=h||{},h.dddTmplHeaderValue=e)}this.addWpoDataToLocalStorage(h,e,t)}catch(e){const t=`Failed to fetch wpo treatments.Error:${e}`,r=`isNthCall:${this.isNthCall},activityId:${i},Url:${n}`;this.logAppError(o.CPg,t,r)}finally{window[this.wpoContextWindowObjectPropertyName]=null,clearTimeout(s)}}))}addWpoOptimizationDataToLocalStorage(e,t,i,n=!1){const s=(0,g._)(t,i);if(this.optimizationDataReceived)return;if(!e||!e.optimizationItems)return;if(!e.optimizationItems.length)return this.logAppError(o.lGs,"WPO Optimization data is empty in feed response ",`isFocusedMode:${n}`),void(0,u.$o)().removeItem(s);const a=(0,r.Ou)();a[y.StoreInit]=Math.round(performance.now());try{const t={treatments:this.parseOptimizationItems(e.optimizationItems)};a[y.Parsed]=Math.round(performance.now()),(0,u.$o)().setObject(s,t),a[y.Stored]=Math.round(performance.now()),this.optimizationDataReceived=!0}catch(t){const i=`Failed to store wpo response to LS.Error:${t}`,n=`WpoServiceResponse: ${JSON.stringify(e)}. key: ${s}`;this.logAppError(o.pOl,i,n)}}storeEarlyWpoFeedData(e){this.wpoFeedDataCache.set("feed-ready",e)}getEarlyWpoFeedData(e){let t,i,n;e&&(i=new Promise((i=>{n=setTimeout((()=>{t&&t.unsubscribe(),this.wpoFeedDataCache.delete("feed-ready");const n=`Getting early main feed timeout in ${e}ms`;this.logAppError(o.$HJ,n),i(void 0)}),e)})));const r=new Promise((e=>{t=this.wpoFeedDataCache.subscribe("feed-ready",(i=>{n&&clearTimeout(n),t&&t.unsubscribe(),this.wpoFeedDataCache.delete("feed-ready"),e(i)}))}));return e?Promise.race([r,i]):r}addWpoDataToLocalStorage(e,t,i){const n=(0,g._)(t,i);if(e&&e.treatments)try{if((0,u.$o)().setObject(n,e),this.isNthCall){const e="_appTimings";(window[e]||(window[e]={}))["Wpo.TreatmentsPopulation-end"]=performance.now()}const t=(0,g.U)(e);if(t&&t.length){if(1===t.length&&"prg-wpo-infoprm-ctrl"===t[0])return;const e="Wpo treatment is missing properties.",i=`${t}`;this.logAppError(o.uSS,e,i)}}catch(t){const i=`Failed to store wpo response to LS.Error:${t}`,r=`WpoServiceResponse: ${JSON.stringify(e)}. key: ${n}`;this.logAppError(o.pOl,i,r)}else(0,u.$o)().removeItem(n)}logAppError(e,t,i=""){h.M0.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:t,pb:Object.assign(Object.assign({},e.pb),{customMessage:i})}))}parseOptimizationItems(e){if(!e||!e.length)return[];return e.map(((e,t)=>{if(e.type&&e.type.trim().length)if(Object.values(a._h).includes(e.type)||this.logAppError(o.OE6,`Unknown Type in WPO optimization items. Type: ${e.type}, Index: ${t}`),e.data){if(e.type&&e.data){let i;try{if(i=JSON.parse(e.data),!Object.entries(i).length)return void this.logAppError(o.OnJ,`Parsed WPO Optimization item but it is empty. Type: ${e.type}, Index: ${t}`)}catch(i){return void(0,s.OO)(i,o.X1V,`${i}. Type: ${e.type}, Index: ${t}`)}if(i)return{type:e.type,properties:i}}}else this.logAppError(o.uSS,`Unable to find data in WPO optimization item. Type: ${e.type}, Index: ${t}`);else this.logAppError(o._wC,`Type not found in WPO optimization items. Index: ${t}`)})).filter(Boolean)}isOptimizationDataReceived(){return this.optimizationDataReceived}}const C=(0,v.h)(S)},46065:function(){},9665:function(){},53692:function(e,t,i){"use strict";i.d(t,{j:function(){return a}});var n=i(33940),r=i(99452),o=i(26415),s=i(92773);class a{constructor(e,t){this.props=e,this.cb=t}connectedCallback(e){const{source:t}=e;this.props.forEach((e=>{r.y$.getNotifier(t).subscribe(this,e)})),this.handleChange(t)}disconnectedCallback(e){const{source:t}=e;this.props.forEach((e=>{r.y$.getNotifier(t).unsubscribe(this,e)})),t.$fastController.removeStyles(this.styles)}handleChange(e){this.styles=this.cb(e),e.$fastController.addStyles(this.styles)}}(0,n.gn)([(0,s.Et)(o.a4J,"CssInjectionBehavior.Bind")],a.prototype,"connectedCallback",null),(0,n.gn)([(0,s.Et)(o.a4J,"CssInjectionBehavior.Unbind")],a.prototype,"disconnectedCallback",null),(0,n.gn)([(0,s.Et)(o.a4J,"CssInjectionBehaviorHandleChange")],a.prototype,"handleChange",null)},41503:function(e,t,i){"use strict";i.d(t,{g:function(){return a}});var n=i(33940),r=i(99452),o=i(26415),s=i(92773);class a{constructor(e){this.propertyName=e}connectedCallback(e){r.y$.getNotifier(e.source).subscribe(this,this.propertyName)}disconnectedCallback(e){this.styles&&e.source.$fastController.removeStyles(this.styles)}handleChange(e,t){this.styles&&e.$fastController.removeStyles(this.styles),this.styles=e[t],e.$fastController.addStyles(this.styles)}}(0,n.gn)([(0,s.Et)(o.a4J,"PropertyBehavior.Bind")],a.prototype,"connectedCallback",null),(0,n.gn)([(0,s.Et)(o.a4J,"PropertyBehavior.Unbind")],a.prototype,"disconnectedCallback",null),(0,n.gn)([(0,s.Et)(o.a4J,"PropertyBehavior.HandleChange")],a.prototype,"handleChange",null)},96146:function(e,t,i){"use strict";i.d(t,{b:function(){return s}});var n=i(99452),r=i(28904);const o={handleChange(e){e.$fastController.isConnected?e.connected&&e.connected():e.disconnected&&e.disconnected()}};function s(e){return class extends e{constructor(...e){super(...e),n.y$.getNotifier(this.$fastController).subscribe(o,"isConnected")}}}s(r.H)}}]);